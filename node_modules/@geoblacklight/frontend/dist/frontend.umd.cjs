(function(ie,Z){typeof exports=="object"&&typeof module<"u"?Z(exports):typeof define=="function"&&define.amd?define(["exports"],Z):(ie=typeof globalThis<"u"?globalThis:ie||self,Z(ie["@geoblacklight/frontend"]={}))})(this,function(exports){"use strict";var oD=Object.defineProperty;var lD=(ie,Z,ee)=>Z in ie?oD(ie,Z,{enumerable:!0,configurable:!0,writable:!0,value:ee}):ie[Z]=ee;var xc=(ie,Z,ee)=>(lD(ie,typeof Z!="symbol"?Z+"":Z,ee),ee);function _mergeNamespaces(ie,Z){for(var ee=0;ee<Z.length;ee++){const ae=Z[ee];if(typeof ae!="string"&&!Array.isArray(ae)){for(const ye in ae)if(ye!=="default"&&!(ye in ie)){const ve=Object.getOwnPropertyDescriptor(ae,ye);ve&&Object.defineProperty(ie,ye,ve.get?ve:{enumerable:!0,get:()=>ae[ye]})}}}return Object.freeze(Object.defineProperty(ie,Symbol.toStringTag,{value:"Module"}))}class BaseEvent{constructor(Z){this.propagationStopped,this.defaultPrevented,this.type=Z,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch(ie,Z,ee){let ae,ye;ee=ee||ascending;let ve=0,be=ie.length,Qe=!1;for(;ve<be;)ae=ve+(be-ve>>1),ye=+ee(ie[ae],Z),ye<0?ve=ae+1:(be=ae,Qe=!ye);return Qe?ve:~ve}function ascending(ie,Z){return ie>Z?1:ie<Z?-1:0}function descending(ie,Z){return ie<Z?1:ie>Z?-1:0}function linearFindNearest(ie,Z,ee){if(ie[0]<=Z)return 0;const ae=ie.length;if(Z<=ie[ae-1])return ae-1;if(typeof ee=="function"){for(let ye=1;ye<ae;++ye){const ve=ie[ye];if(ve===Z)return ye;if(ve<Z)return ee(Z,ie[ye-1],ve)>0?ye-1:ye}return ae-1}if(ee>0){for(let ye=1;ye<ae;++ye)if(ie[ye]<Z)return ye-1;return ae-1}if(ee<0){for(let ye=1;ye<ae;++ye)if(ie[ye]<=Z)return ye;return ae-1}for(let ye=1;ye<ae;++ye){if(ie[ye]==Z)return ye;if(ie[ye]<Z)return ie[ye-1]-Z<Z-ie[ye]?ye-1:ye}return ae-1}function reverseSubArray(ie,Z,ee){for(;Z<ee;){const ae=ie[Z];ie[Z]=ie[ee],ie[ee]=ae,++Z,--ee}}function extend$2(ie,Z){const ee=Array.isArray(Z)?Z:[Z],ae=ee.length;for(let ye=0;ye<ae;ye++)ie[ie.length]=ee[ye]}function equals$2(ie,Z){const ee=ie.length;if(ee!==Z.length)return!1;for(let ae=0;ae<ee;ae++)if(ie[ae]!==Z[ae])return!1;return!0}function isSorted(ie,Z,ee){const ae=Z||ascending;return ie.every(function(ye,ve){if(ve===0)return!0;const be=ae(ie[ve-1],ye);return!(be>0||ee&&be===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(ie){let Z=!1,ee,ae,ye;return function(){const ve=Array.prototype.slice.call(arguments);return(!Z||this!==ye||!equals$2(ve,ae))&&(Z=!0,ye=this,ae=ve,ee=ie.apply(this,arguments)),ee}}function toPromise(ie){function Z(){let ee;try{ee=ie()}catch(ae){return Promise.reject(ae)}return ee instanceof Promise?ee:Promise.resolve(ee)}return Z()}function clear(ie){for(const Z in ie)delete ie[Z]}function isEmpty$1(ie){let Z;for(Z in ie)return!1;return!Z}class Target extends Disposable{constructor(Z){super(),this.eventTarget_=Z,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(Z,ee){if(!Z||!ee)return;const ae=this.listeners_||(this.listeners_={}),ye=ae[Z]||(ae[Z]=[]);ye.includes(ee)||ye.push(ee)}dispatchEvent(Z){const ee=typeof Z=="string",ae=ee?Z:Z.type,ye=this.listeners_&&this.listeners_[ae];if(!ye)return;const ve=ee?new BaseEvent(Z):Z;ve.target||(ve.target=this.eventTarget_||this);const be=this.dispatching_||(this.dispatching_={}),Qe=this.pendingRemovals_||(this.pendingRemovals_={});ae in be||(be[ae]=0,Qe[ae]=0),++be[ae];let Xe;for(let Je=0,tt=ye.length;Je<tt;++Je)if("handleEvent"in ye[Je]?Xe=ye[Je].handleEvent(ve):Xe=ye[Je].call(this,ve),Xe===!1||ve.propagationStopped){Xe=!1;break}if(--be[ae]===0){let Je=Qe[ae];for(delete Qe[ae];Je--;)this.removeEventListener(ae,VOID);delete be[ae]}return Xe}disposeInternal(){this.listeners_&&clear(this.listeners_)}getListeners(Z){return this.listeners_&&this.listeners_[Z]||void 0}hasListener(Z){return this.listeners_?Z?Z in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(Z,ee){const ae=this.listeners_&&this.listeners_[Z];if(ae){const ye=ae.indexOf(ee);ye!==-1&&(this.pendingRemovals_&&Z in this.pendingRemovals_?(ae[ye]=VOID,++this.pendingRemovals_[Z]):(ae.splice(ye,1),ae.length===0&&delete this.listeners_[Z]))}}}const EventType={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(ie,Z,ee,ae,ye){if(ae&&ae!==ie&&(ee=ee.bind(ae)),ye){const be=ee;ee=function(){ie.removeEventListener(Z,ee),be.apply(this,arguments)}}const ve={target:ie,type:Z,listener:ee};return ie.addEventListener(Z,ee),ve}function listenOnce(ie,Z,ee,ae){return listen(ie,Z,ee,ae,!0)}function unlistenByKey(ie){ie&&ie.target&&(ie.target.removeEventListener(ie.type,ie.listener),clear(ie))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(Z,ee){if(Array.isArray(Z)){const ae=Z.length,ye=new Array(ae);for(let ve=0;ve<ae;++ve)ye[ve]=listen(this,Z[ve],ee);return ye}return listen(this,Z,ee)}onceInternal(Z,ee){let ae;if(Array.isArray(Z)){const ye=Z.length;ae=new Array(ye);for(let ve=0;ve<ye;++ve)ae[ve]=listenOnce(this,Z[ve],ee)}else ae=listenOnce(this,Z,ee);return ee.ol_key=ae,ae}unInternal(Z,ee){const ae=ee.ol_key;if(ae)unByKey(ae);else if(Array.isArray(Z))for(let ye=0,ve=Z.length;ye<ve;++ye)this.removeEventListener(Z[ye],ee);else this.removeEventListener(Z,ee)}}Observable.prototype.on,Observable.prototype.once,Observable.prototype.un;function unByKey(ie){if(Array.isArray(ie))for(let Z=0,ee=ie.length;Z<ee;++Z)unlistenByKey(ie[Z]);else unlistenByKey(ie)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(ie){return ie.ol_uid||(ie.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(Z,ee,ae){super(Z),this.key=ee,this.oldValue=ae}}class BaseObject extends Observable{constructor(Z){super(),this.on,this.once,this.un,getUid(this),this.values_=null,Z!==void 0&&this.setProperties(Z)}get(Z){let ee;return this.values_&&this.values_.hasOwnProperty(Z)&&(ee=this.values_[Z]),ee}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(Z,ee){let ae;ae=`change:${Z}`,this.hasListener(ae)&&this.dispatchEvent(new ObjectEvent(ae,Z,ee)),ae=ObjectEventType.PROPERTYCHANGE,this.hasListener(ae)&&this.dispatchEvent(new ObjectEvent(ae,Z,ee))}addChangeListener(Z,ee){this.addEventListener(`change:${Z}`,ee)}removeChangeListener(Z,ee){this.removeEventListener(`change:${Z}`,ee)}set(Z,ee,ae){const ye=this.values_||(this.values_={});if(ae)ye[Z]=ee;else{const ve=ye[Z];ye[Z]=ee,ve!==ee&&this.notify(Z,ve)}}setProperties(Z,ee){for(const ae in Z)this.set(ae,Z[ae],ee)}applyProperties(Z){Z.values_&&Object.assign(this.values_||(this.values_={}),Z.values_)}unset(Z,ee){if(this.values_&&Z in this.values_){const ae=this.values_[Z];delete this.values_[Z],isEmpty$1(this.values_)&&(this.values_=null),ee||this.notify(Z,ae)}}}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(Z,ee,ae){super(Z),this.element=ee,this.index=ae}}class Collection extends BaseObject{constructor(Z,ee){if(super(),this.on,this.once,this.un,ee=ee||{},this.unique_=!!ee.unique,this.array_=Z||[],this.unique_)for(let ae=0,ye=this.array_.length;ae<ye;++ae)this.assertUnique_(this.array_[ae],ae);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(Z){for(let ee=0,ae=Z.length;ee<ae;++ee)this.push(Z[ee]);return this}forEach(Z){const ee=this.array_;for(let ae=0,ye=ee.length;ae<ye;++ae)Z(ee[ae],ae,ee)}getArray(){return this.array_}item(Z){return this.array_[Z]}getLength(){return this.get(Property$2.LENGTH)}insertAt(Z,ee){if(Z<0||Z>this.getLength())throw new Error("Index out of bounds: "+Z);this.unique_&&this.assertUnique_(ee),this.array_.splice(Z,0,ee),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,ee,Z))}pop(){return this.removeAt(this.getLength()-1)}push(Z){this.unique_&&this.assertUnique_(Z);const ee=this.getLength();return this.insertAt(ee,Z),this.getLength()}remove(Z){const ee=this.array_;for(let ae=0,ye=ee.length;ae<ye;++ae)if(ee[ae]===Z)return this.removeAt(ae)}removeAt(Z){if(Z<0||Z>=this.getLength())return;const ee=this.array_[Z];return this.array_.splice(Z,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,ee,Z)),ee}setAt(Z,ee){const ae=this.getLength();if(Z>=ae){this.insertAt(Z,ee);return}if(Z<0)throw new Error("Index out of bounds: "+Z);this.unique_&&this.assertUnique_(ee,Z);const ye=this.array_[Z];this.array_[Z]=ee,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,ye,Z)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,ee,Z))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(Z,ee){for(let ae=0,ye=this.array_.length;ae<ye;++ae)if(this.array_[ae]===Z&&ae!==ee)throw new Error("Duplicate item added to a unique collection")}}function assert(ie,Z){if(!ie)throw new Error(Z)}class Feature extends BaseObject{constructor(Z){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),Z)if(typeof Z.getSimplifiedGeometry=="function"){const ee=Z;this.setGeometry(ee)}else{const ee=Z;this.setProperties(ee)}}clone(){const Z=new Feature(this.hasProperties()?this.getProperties():null);Z.setGeometryName(this.getGeometryName());const ee=this.getGeometry();ee&&Z.setGeometry(ee.clone());const ae=this.getStyle();return ae&&Z.setStyle(ae),Z}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const Z=this.getGeometry();Z&&(this.geometryChangeKey_=listen(Z,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(Z){this.set(this.geometryName_,Z)}setStyle(Z){this.style_=Z,this.styleFunction_=Z?createStyleFunction(Z):void 0,this.changed()}setId(Z){this.id_=Z,this.changed()}setGeometryName(Z){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=Z,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(ie){if(typeof ie=="function")return ie;let Z;return Array.isArray(ie)?Z=ie:(assert(typeof ie.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),Z=[ie]),function(){return Z}}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom"),SAFARI_BUG_237906=SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua)),WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,PASSIVE_EVENT_LISTENERS=function(){let ie=!1;try{const Z=Object.defineProperty({},"passive",{get:function(){ie=!0}});window.addEventListener("_",null,Z),window.removeEventListener("_",null,Z)}catch{}return ie}(),tmp_=new Array(6);function create$3(){return[1,0,0,1,0,0]}function reset(ie){return set(ie,1,0,0,1,0,0)}function multiply(ie,Z){const ee=ie[0],ae=ie[1],ye=ie[2],ve=ie[3],be=ie[4],Qe=ie[5],Xe=Z[0],Je=Z[1],tt=Z[2],it=Z[3],st=Z[4],lt=Z[5];return ie[0]=ee*Xe+ye*Je,ie[1]=ae*Xe+ve*Je,ie[2]=ee*tt+ye*it,ie[3]=ae*tt+ve*it,ie[4]=ee*st+ye*lt+be,ie[5]=ae*st+ve*lt+Qe,ie}function set(ie,Z,ee,ae,ye,ve,be){return ie[0]=Z,ie[1]=ee,ie[2]=ae,ie[3]=ye,ie[4]=ve,ie[5]=be,ie}function setFromArray(ie,Z){return ie[0]=Z[0],ie[1]=Z[1],ie[2]=Z[2],ie[3]=Z[3],ie[4]=Z[4],ie[5]=Z[5],ie}function apply(ie,Z){const ee=Z[0],ae=Z[1];return Z[0]=ie[0]*ee+ie[2]*ae+ie[4],Z[1]=ie[1]*ee+ie[3]*ae+ie[5],Z}function rotate$3(ie,Z){const ee=Math.cos(Z),ae=Math.sin(Z);return multiply(ie,set(tmp_,ee,ae,-ae,ee,0,0))}function scale$3(ie,Z,ee){return multiply(ie,set(tmp_,Z,0,0,ee,0,0))}function translate$1(ie,Z,ee){return multiply(ie,set(tmp_,1,0,0,1,Z,ee))}function compose$1(ie,Z,ee,ae,ye,ve,be,Qe){const Xe=Math.sin(ve),Je=Math.cos(ve);return ie[0]=ae*Je,ie[1]=ye*Xe,ie[2]=-ae*Xe,ie[3]=ye*Je,ie[4]=be*ae*Je-Qe*ae*Xe+Z,ie[5]=be*ye*Xe+Qe*ye*Je+ee,ie}function makeInverse(ie,Z){const ee=determinant(Z);assert(ee!==0,"Transformation matrix cannot be inverted");const ae=Z[0],ye=Z[1],ve=Z[2],be=Z[3],Qe=Z[4],Xe=Z[5];return ie[0]=be/ee,ie[1]=-ye/ee,ie[2]=-ve/ee,ie[3]=ae/ee,ie[4]=(ve*Xe-be*Qe)/ee,ie[5]=-(ae*Xe-ye*Qe)/ee,ie}function determinant(ie){return ie[0]*ie[3]-ie[1]*ie[2]}let transformStringDiv;function toString$3(ie){const Z="matrix("+ie.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return Z;const ee=transformStringDiv||(transformStringDiv=document.createElement("div"));return ee.style.transform=Z,ee.style.transform}const Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(ie){const Z=createEmpty();for(let ee=0,ae=ie.length;ee<ae;++ee)extendCoordinate(Z,ie[ee]);return Z}function _boundingExtentXYs(ie,Z,ee){const ae=Math.min.apply(null,ie),ye=Math.min.apply(null,Z),ve=Math.max.apply(null,ie),be=Math.max.apply(null,Z);return createOrUpdate$2(ae,ye,ve,be,ee)}function buffer$1(ie,Z,ee){return ee?(ee[0]=ie[0]-Z,ee[1]=ie[1]-Z,ee[2]=ie[2]+Z,ee[3]=ie[3]+Z,ee):[ie[0]-Z,ie[1]-Z,ie[2]+Z,ie[3]+Z]}function clone(ie,Z){return Z?(Z[0]=ie[0],Z[1]=ie[1],Z[2]=ie[2],Z[3]=ie[3],Z):ie.slice()}function closestSquaredDistanceXY(ie,Z,ee){let ae,ye;return Z<ie[0]?ae=ie[0]-Z:ie[2]<Z?ae=Z-ie[2]:ae=0,ee<ie[1]?ye=ie[1]-ee:ie[3]<ee?ye=ee-ie[3]:ye=0,ae*ae+ye*ye}function containsCoordinate(ie,Z){return containsXY(ie,Z[0],Z[1])}function containsExtent(ie,Z){return ie[0]<=Z[0]&&Z[2]<=ie[2]&&ie[1]<=Z[1]&&Z[3]<=ie[3]}function containsXY(ie,Z,ee){return ie[0]<=Z&&Z<=ie[2]&&ie[1]<=ee&&ee<=ie[3]}function coordinateRelationship(ie,Z){const ee=ie[0],ae=ie[1],ye=ie[2],ve=ie[3],be=Z[0],Qe=Z[1];let Xe=Relationship.UNKNOWN;return be<ee?Xe=Xe|Relationship.LEFT:be>ye&&(Xe=Xe|Relationship.RIGHT),Qe<ae?Xe=Xe|Relationship.BELOW:Qe>ve&&(Xe=Xe|Relationship.ABOVE),Xe===Relationship.UNKNOWN&&(Xe=Relationship.INTERSECTING),Xe}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(ie,Z,ee,ae,ye){return ye?(ye[0]=ie,ye[1]=Z,ye[2]=ee,ye[3]=ae,ye):[ie,Z,ee,ae]}function createOrUpdateEmpty(ie){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,ie)}function createOrUpdateFromCoordinate(ie,Z){const ee=ie[0],ae=ie[1];return createOrUpdate$2(ee,ae,ee,ae,Z)}function createOrUpdateFromFlatCoordinates(ie,Z,ee,ae,ye){const ve=createOrUpdateEmpty(ye);return extendFlatCoordinates(ve,ie,Z,ee,ae)}function equals$1(ie,Z){return ie[0]==Z[0]&&ie[2]==Z[2]&&ie[1]==Z[1]&&ie[3]==Z[3]}function extend$1(ie,Z){return Z[0]<ie[0]&&(ie[0]=Z[0]),Z[2]>ie[2]&&(ie[2]=Z[2]),Z[1]<ie[1]&&(ie[1]=Z[1]),Z[3]>ie[3]&&(ie[3]=Z[3]),ie}function extendCoordinate(ie,Z){Z[0]<ie[0]&&(ie[0]=Z[0]),Z[0]>ie[2]&&(ie[2]=Z[0]),Z[1]<ie[1]&&(ie[1]=Z[1]),Z[1]>ie[3]&&(ie[3]=Z[1])}function extendFlatCoordinates(ie,Z,ee,ae,ye){for(;ee<ae;ee+=ye)extendXY(ie,Z[ee],Z[ee+1]);return ie}function extendXY(ie,Z,ee){ie[0]=Math.min(ie[0],Z),ie[1]=Math.min(ie[1],ee),ie[2]=Math.max(ie[2],Z),ie[3]=Math.max(ie[3],ee)}function forEachCorner(ie,Z){let ee;return ee=Z(getBottomLeft(ie)),ee||(ee=Z(getBottomRight(ie)),ee)||(ee=Z(getTopRight(ie)),ee)||(ee=Z(getTopLeft(ie)),ee)?ee:!1}function getArea(ie){let Z=0;return isEmpty(ie)||(Z=getWidth(ie)*getHeight(ie)),Z}function getBottomLeft(ie){return[ie[0],ie[1]]}function getBottomRight(ie){return[ie[2],ie[1]]}function getCenter(ie){return[(ie[0]+ie[2])/2,(ie[1]+ie[3])/2]}function getCorner(ie,Z){let ee;if(Z==="bottom-left")ee=getBottomLeft(ie);else if(Z==="bottom-right")ee=getBottomRight(ie);else if(Z==="top-left")ee=getTopLeft(ie);else if(Z==="top-right")ee=getTopRight(ie);else throw new Error("Invalid corner");return ee}function getForViewAndSize(ie,Z,ee,ae,ye){const[ve,be,Qe,Xe,Je,tt,it,st]=getRotatedViewport(ie,Z,ee,ae);return createOrUpdate$2(Math.min(ve,Qe,Je,it),Math.min(be,Xe,tt,st),Math.max(ve,Qe,Je,it),Math.max(be,Xe,tt,st),ye)}function getRotatedViewport(ie,Z,ee,ae){const ye=Z*ae[0]/2,ve=Z*ae[1]/2,be=Math.cos(ee),Qe=Math.sin(ee),Xe=ye*be,Je=ye*Qe,tt=ve*be,it=ve*Qe,st=ie[0],lt=ie[1];return[st-Xe+it,lt-Je-tt,st-Xe-it,lt-Je+tt,st+Xe-it,lt+Je+tt,st+Xe+it,lt+Je-tt,st-Xe+it,lt-Je-tt]}function getHeight(ie){return ie[3]-ie[1]}function getIntersection(ie,Z,ee){const ae=ee||createEmpty();return intersects$1(ie,Z)?(ie[0]>Z[0]?ae[0]=ie[0]:ae[0]=Z[0],ie[1]>Z[1]?ae[1]=ie[1]:ae[1]=Z[1],ie[2]<Z[2]?ae[2]=ie[2]:ae[2]=Z[2],ie[3]<Z[3]?ae[3]=ie[3]:ae[3]=Z[3]):createOrUpdateEmpty(ae),ae}function getTopLeft(ie){return[ie[0],ie[3]]}function getTopRight(ie){return[ie[2],ie[3]]}function getWidth(ie){return ie[2]-ie[0]}function intersects$1(ie,Z){return ie[0]<=Z[2]&&ie[2]>=Z[0]&&ie[1]<=Z[3]&&ie[3]>=Z[1]}function isEmpty(ie){return ie[2]<ie[0]||ie[3]<ie[1]}function returnOrUpdate(ie,Z){return Z?(Z[0]=ie[0],Z[1]=ie[1],Z[2]=ie[2],Z[3]=ie[3],Z):ie}function intersectsSegment(ie,Z,ee){let ae=!1;const ye=coordinateRelationship(ie,Z),ve=coordinateRelationship(ie,ee);if(ye===Relationship.INTERSECTING||ve===Relationship.INTERSECTING)ae=!0;else{const be=ie[0],Qe=ie[1],Xe=ie[2],Je=ie[3],tt=Z[0],it=Z[1],st=ee[0],lt=ee[1],ct=(lt-it)/(st-tt);let gt,ut;ve&Relationship.ABOVE&&!(ye&Relationship.ABOVE)&&(gt=st-(lt-Je)/ct,ae=gt>=be&&gt<=Xe),!ae&&ve&Relationship.RIGHT&&!(ye&Relationship.RIGHT)&&(ut=lt-(st-Xe)*ct,ae=ut>=Qe&&ut<=Je),!ae&&ve&Relationship.BELOW&&!(ye&Relationship.BELOW)&&(gt=st-(lt-Qe)/ct,ae=gt>=be&&gt<=Xe),!ae&&ve&Relationship.LEFT&&!(ye&Relationship.LEFT)&&(ut=lt-(st-be)*ct,ae=ut>=Qe&&ut<=Je)}return ae}function applyTransform(ie,Z,ee,ae){if(isEmpty(ie))return createOrUpdateEmpty(ee);let ye=[];if(ae>1){const Qe=ie[2]-ie[0],Xe=ie[3]-ie[1];for(let Je=0;Je<ae;++Je)ye.push(ie[0]+Qe*Je/ae,ie[1],ie[2],ie[1]+Xe*Je/ae,ie[2]-Qe*Je/ae,ie[3],ie[0],ie[3]-Xe*Je/ae)}else ye=[ie[0],ie[1],ie[2],ie[1],ie[2],ie[3],ie[0],ie[3]];Z(ye,ye,2);const ve=[],be=[];for(let Qe=0,Xe=ye.length;Qe<Xe;Qe+=2)ve.push(ye[Qe]),be.push(ye[Qe+1]);return _boundingExtentXYs(ve,be,ee)}const unitByCode={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function fromCode(ie){return unitByCode[ie]}const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Projection{constructor(Z){this.code_=Z.code,this.units_=Z.units,this.extent_=Z.extent!==void 0?Z.extent:null,this.worldExtent_=Z.worldExtent!==void 0?Z.worldExtent:null,this.axisOrientation_=Z.axisOrientation!==void 0?Z.axisOrientation:"enu",this.global_=Z.global!==void 0?Z.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=Z.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=Z.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(Z){this.global_=Z,this.canWrapX_=!!(Z&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(Z){this.defaultTileGrid_=Z}setExtent(Z){this.extent_=Z,this.canWrapX_=!!(this.global_&&Z)}setWorldExtent(Z){this.worldExtent_=Z}setGetPointResolution(Z){this.getPointResolutionFunc_=Z}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$1=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection{constructor(Z){super({code:Z,units:"m",extent:EXTENT$1,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(ee,ae){return ee/Math.cosh(ae[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(ie,Z,ee){const ae=ie.length;ee=ee>1?ee:2,Z===void 0&&(ee>2?Z=ie.slice():Z=new Array(ae));for(let ye=0;ye<ae;ye+=ee){Z[ye]=HALF_SIZE*ie[ye]/180;let ve=RADIUS$1*Math.log(Math.tan(Math.PI*(+ie[ye+1]+90)/360));ve>MAX_SAFE_Y?ve=MAX_SAFE_Y:ve<-MAX_SAFE_Y&&(ve=-MAX_SAFE_Y),Z[ye+1]=ve}return Z}function toEPSG4326(ie,Z,ee){const ae=ie.length;ee=ee>1?ee:2,Z===void 0&&(ee>2?Z=ie.slice():Z=new Array(ae));for(let ye=0;ye<ae;ye+=ee)Z[ye]=180*ie[ye]/HALF_SIZE,Z[ye+1]=360*Math.atan(Math.exp(ie[ye+1]/RADIUS$1))/Math.PI-90;return Z}const RADIUS=6378137,EXTENT=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection{constructor(Z,ee){super({code:Z,units:"degrees",extent:EXTENT,axisOrientation:ee,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache={};function get$3(ie){return cache[ie]||cache[ie.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$2(ie,Z){cache[ie]=Z}let transforms={};function add$1(ie,Z,ee){const ae=ie.getCode(),ye=Z.getCode();ae in transforms||(transforms[ae]={}),transforms[ae][ye]=ee}function get$2(ie,Z){let ee;return ie in transforms&&Z in transforms[ie]&&(ee=transforms[ie][Z]),ee}function clamp$1(ie,Z,ee){return Math.min(Math.max(ie,Z),ee)}function squaredSegmentDistance(ie,Z,ee,ae,ye,ve){const be=ye-ee,Qe=ve-ae;if(be!==0||Qe!==0){const Xe=((ie-ee)*be+(Z-ae)*Qe)/(be*be+Qe*Qe);Xe>1?(ee=ye,ae=ve):Xe>0&&(ee+=be*Xe,ae+=Qe*Xe)}return squaredDistance(ie,Z,ee,ae)}function squaredDistance(ie,Z,ee,ae){const ye=ee-ie,ve=ae-Z;return ye*ye+ve*ve}function solveLinearSystem(ie){const Z=ie.length;for(let ae=0;ae<Z;ae++){let ye=ae,ve=Math.abs(ie[ae][ae]);for(let Qe=ae+1;Qe<Z;Qe++){const Xe=Math.abs(ie[Qe][ae]);Xe>ve&&(ve=Xe,ye=Qe)}if(ve===0)return null;const be=ie[ye];ie[ye]=ie[ae],ie[ae]=be;for(let Qe=ae+1;Qe<Z;Qe++){const Xe=-ie[Qe][ae]/ie[ae][ae];for(let Je=ae;Je<Z+1;Je++)ae==Je?ie[Qe][Je]=0:ie[Qe][Je]+=Xe*ie[ae][Je]}}const ee=new Array(Z);for(let ae=Z-1;ae>=0;ae--){ee[ae]=ie[ae][Z]/ie[ae][ae];for(let ye=ae-1;ye>=0;ye--)ie[ye][Z]-=ie[ye][ae]*ee[ae]}return ee}function toRadians(ie){return ie*Math.PI/180}function modulo(ie,Z){const ee=ie%Z;return ee*Z<0?ee+Z:ee}function lerp$1(ie,Z,ee){return ie+ee*(Z-ie)}function toFixed(ie,Z){const ee=Math.pow(10,Z);return Math.round(ie*ee)/ee}function floor$1(ie,Z){return Math.floor(toFixed(ie,Z))}function ceil(ie,Z){return Math.ceil(toFixed(ie,Z))}function add(ie,Z){return ie[0]+=+Z[0],ie[1]+=+Z[1],ie}function equals(ie,Z){let ee=!0;for(let ae=ie.length-1;ae>=0;--ae)if(ie[ae]!=Z[ae]){ee=!1;break}return ee}function rotate$2(ie,Z){const ee=Math.cos(Z),ae=Math.sin(Z),ye=ie[0]*ee-ie[1]*ae,ve=ie[1]*ee+ie[0]*ae;return ie[0]=ye,ie[1]=ve,ie}function scale$2(ie,Z){return ie[0]*=Z,ie[1]*=Z,ie}function wrapX$1(ie,Z){if(Z.canWrapX()){const ee=getWidth(Z.getExtent()),ae=getWorldsAway(ie,Z,ee);ae&&(ie[0]-=ae*ee)}return ie}function getWorldsAway(ie,Z,ee){const ae=Z.getExtent();let ye=0;return Z.canWrapX()&&(ie[0]<ae[0]||ie[0]>ae[2])&&(ee=ee||getWidth(ae),ye=Math.floor((ie[0]-ae[0])/ee)),ye}const DEFAULT_RADIUS=63710088e-1;function getDistance(ie,Z,ee){ee=ee||DEFAULT_RADIUS;const ae=toRadians(ie[1]),ye=toRadians(Z[1]),ve=(ye-ae)/2,be=toRadians(Z[0]-ie[0])/2,Qe=Math.sin(ve)*Math.sin(ve)+Math.sin(be)*Math.sin(be)*Math.cos(ae)*Math.cos(ye);return 2*ee*Math.atan2(Math.sqrt(Qe),Math.sqrt(1-Qe))}const levels={info:1,warn:2,error:3,none:4};let level=levels.info;function warn(...ie){console.warn(...ie)}function error(...ie){level>levels.error||console.error(...ie)}let showCoordinateWarning=!0;function disableCoordinateWarning(ie){showCoordinateWarning=!(ie===void 0?!0:ie)}function cloneTransform(ie,Z){if(Z!==void 0){for(let ee=0,ae=ie.length;ee<ae;++ee)Z[ee]=ie[ee];Z=Z}else Z=ie.slice();return Z}function identityTransform(ie,Z){if(Z!==void 0&&ie!==Z){for(let ee=0,ae=ie.length;ee<ae;++ee)Z[ee]=ie[ee];ie=Z}return ie}function addProjection(ie){add$2(ie.getCode(),ie),add$1(ie,ie,cloneTransform)}function addProjections(ie){ie.forEach(addProjection)}function get$1(ie){return typeof ie=="string"?get$3(ie):ie||null}function getPointResolution(ie,Z,ee,ae){ie=get$1(ie);let ye;const ve=ie.getPointResolutionFunc();if(ve){if(ye=ve(Z,ee),ae&&ae!==ie.getUnits()){const be=ie.getMetersPerUnit();be&&(ye=ye*be/METERS_PER_UNIT$1[ae])}}else{const be=ie.getUnits();if(be=="degrees"&&!ae||ae=="degrees")ye=Z;else{const Qe=getTransformFromProjections(ie,get$1("EPSG:4326"));if(Qe===identityTransform&&be!=="degrees")ye=Z*ie.getMetersPerUnit();else{let Je=[ee[0]-Z/2,ee[1],ee[0]+Z/2,ee[1],ee[0],ee[1]-Z/2,ee[0],ee[1]+Z/2];Je=Qe(Je,Je,2);const tt=getDistance(Je.slice(0,2),Je.slice(2,4)),it=getDistance(Je.slice(4,6),Je.slice(6,8));ye=(tt+it)/2}const Xe=ae?METERS_PER_UNIT$1[ae]:ie.getMetersPerUnit();Xe!==void 0&&(ye/=Xe)}}return ye}function addEquivalentProjections(ie){addProjections(ie),ie.forEach(function(Z){ie.forEach(function(ee){Z!==ee&&add$1(Z,ee,cloneTransform)})})}function addEquivalentTransforms(ie,Z,ee,ae){ie.forEach(function(ye){Z.forEach(function(ve){add$1(ye,ve,ee),add$1(ve,ye,ae)})})}function createProjection(ie,Z){return ie?typeof ie=="string"?get$1(ie):ie:get$1(Z)}function equivalent(ie,Z){if(ie===Z)return!0;const ee=ie.getUnits()===Z.getUnits();return(ie.getCode()===Z.getCode()||getTransformFromProjections(ie,Z)===cloneTransform)&&ee}function getTransformFromProjections(ie,Z){const ee=ie.getCode(),ae=Z.getCode();let ye=get$2(ee,ae);return ye||(ye=identityTransform),ye}function getTransform(ie,Z){const ee=get$1(ie),ae=get$1(Z);return getTransformFromProjections(ee,ae)}function transform(ie,Z,ee){return getTransform(Z,ee)(ie,void 0,ie.length)}function transformExtent(ie,Z,ee,ae){const ye=getTransform(Z,ee);return applyTransform(ie,ye,void 0,ae)}let userProjection=null;function setUserProjection(ie){userProjection=get$1(ie)}function getUserProjection(){return userProjection}function useGeographic(){setUserProjection("EPSG:4326")}function toUserCoordinate(ie,Z){return userProjection?transform(ie,Z,userProjection):ie}function fromUserCoordinate(ie,Z){return userProjection?transform(ie,userProjection,Z):(showCoordinateWarning&&!equals(ie,[0,0])&&ie[0]>=-180&&ie[0]<=180&&ie[1]>=-90&&ie[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),ie)}function toUserExtent(ie,Z){return userProjection?transformExtent(ie,Z,userProjection):ie}function fromUserExtent(ie,Z){return userProjection?transformExtent(ie,userProjection,Z):ie}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();function transform2D(ie,Z,ee,ae,ye,ve){ve=ve||[];let be=0;for(let Qe=Z;Qe<ee;Qe+=ae){const Xe=ie[Qe],Je=ie[Qe+1];ve[be++]=ye[0]*Xe+ye[2]*Je+ye[4],ve[be++]=ye[1]*Xe+ye[3]*Je+ye[5]}return ve&&ve.length!=be&&(ve.length=be),ve}function rotate$1(ie,Z,ee,ae,ye,ve,be){be=be||[];const Qe=Math.cos(ye),Xe=Math.sin(ye),Je=ve[0],tt=ve[1];let it=0;for(let st=Z;st<ee;st+=ae){const lt=ie[st]-Je,ct=ie[st+1]-tt;be[it++]=Je+lt*Qe-ct*Xe,be[it++]=tt+lt*Xe+ct*Qe;for(let gt=st+2;gt<st+ae;++gt)be[it++]=ie[gt]}return be&&be.length!=it&&(be.length=it),be}function scale$1(ie,Z,ee,ae,ye,ve,be,Qe){Qe=Qe||[];const Xe=be[0],Je=be[1];let tt=0;for(let it=Z;it<ee;it+=ae){const st=ie[it]-Xe,lt=ie[it+1]-Je;Qe[tt++]=Xe+ye*st,Qe[tt++]=Je+ve*lt;for(let ct=it+2;ct<it+ae;++ct)Qe[tt++]=ie[ct]}return Qe&&Qe.length!=tt&&(Qe.length=tt),Qe}function translate(ie,Z,ee,ae,ye,ve,be){be=be||[];let Qe=0;for(let Xe=Z;Xe<ee;Xe+=ae){be[Qe++]=ie[Xe]+ye,be[Qe++]=ie[Xe+1]+ve;for(let Je=Xe+2;Je<Xe+ae;++Je)be[Qe++]=ie[Je]}return be&&be.length!=Qe&&(be.length=Qe),be}const tmpTransform$1=create$3();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne(function(Z,ee,ae){if(!ae)return this.getSimplifiedGeometry(ee);const ye=this.clone();return ye.applyTransform(ae),ye.getSimplifiedGeometry(ee)})}simplifyTransformed(Z,ee){return this.simplifyTransformedInternal(this.getRevision(),Z,ee)}clone(){return abstract()}closestPointXY(Z,ee,ae,ye){return abstract()}containsXY(Z,ee){const ae=this.getClosestPoint([Z,ee]);return ae[0]===Z&&ae[1]===ee}getClosestPoint(Z,ee){return ee=ee||[NaN,NaN],this.closestPointXY(Z[0],Z[1],ee,1/0),ee}intersectsCoordinate(Z){return this.containsXY(Z[0],Z[1])}computeExtent(Z){return abstract()}getExtent(Z){if(this.extentRevision_!=this.getRevision()){const ee=this.computeExtent(this.extent_);(isNaN(ee[0])||isNaN(ee[1]))&&createOrUpdateEmpty(ee),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,Z)}rotate(Z,ee){abstract()}scale(Z,ee,ae){abstract()}simplify(Z){return this.getSimplifiedGeometry(Z*Z)}getSimplifiedGeometry(Z){return abstract()}getType(){return abstract()}applyTransform(Z){abstract()}intersectsExtent(Z){return abstract()}translate(Z,ee){abstract()}transform(Z,ee){const ae=get$1(Z),ye=ae.getUnits()=="tile-pixels"?function(ve,be,Qe){const Xe=ae.getExtent(),Je=ae.getWorldExtent(),tt=getHeight(Je)/getHeight(Xe);return compose$1(tmpTransform$1,Je[0],Je[3],tt,-tt,0,0,0),transform2D(ve,0,ve.length,Qe,tmpTransform$1,be),getTransform(ae,ee)(ve,be,Qe)}:getTransform(ae,ee);return this.applyTransform(ye),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(Z){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,Z)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(Z){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),Z<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&Z<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const ee=this.getSimplifiedGeometryInternal(Z);return ee.getFlatCoordinates().length<this.flatCoordinates.length?ee:(this.simplifiedGeometryMaxMinSquaredTolerance=Z,this)}getSimplifiedGeometryInternal(Z){return this}getStride(){return this.stride}setFlatCoordinates(Z,ee){this.stride=getStrideForLayout(Z),this.layout=Z,this.flatCoordinates=ee}setCoordinates(Z,ee){abstract()}setLayout(Z,ee,ae){let ye;if(Z)ye=getStrideForLayout(Z);else{for(let ve=0;ve<ae;++ve){if(ee.length===0){this.layout="XY",this.stride=2;return}ee=ee[0]}ye=ee.length,Z=getLayoutForStride(ye)}this.layout=Z,this.stride=ye}applyTransform(Z){this.flatCoordinates&&(Z(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(Z,ee){const ae=this.getFlatCoordinates();if(ae){const ye=this.getStride();rotate$1(ae,0,ae.length,ye,Z,ee,ae),this.changed()}}scale(Z,ee,ae){ee===void 0&&(ee=Z),ae||(ae=getCenter(this.getExtent()));const ye=this.getFlatCoordinates();if(ye){const ve=this.getStride();scale$1(ye,0,ye.length,ve,Z,ee,ae,ye),this.changed()}}translate(Z,ee){const ae=this.getFlatCoordinates();if(ae){const ye=this.getStride();translate(ae,0,ae.length,ye,Z,ee,ae),this.changed()}}}function getLayoutForStride(ie){let Z;return ie==2?Z="XY":ie==3?Z="XYZ":ie==4&&(Z="XYZM"),Z}function getStrideForLayout(ie){let Z;return ie=="XY"?Z=2:ie=="XYZ"||ie=="XYM"?Z=3:ie=="XYZM"&&(Z=4),Z}function transformGeom2D(ie,Z,ee){const ae=ie.getFlatCoordinates();if(!ae)return null;const ye=ie.getStride();return transform2D(ae,0,ae.length,ye,Z,ee)}function assignClosest(ie,Z,ee,ae,ye,ve,be){const Qe=ie[Z],Xe=ie[Z+1],Je=ie[ee]-Qe,tt=ie[ee+1]-Xe;let it;if(Je===0&&tt===0)it=Z;else{const st=((ye-Qe)*Je+(ve-Xe)*tt)/(Je*Je+tt*tt);if(st>1)it=ee;else if(st>0){for(let lt=0;lt<ae;++lt)be[lt]=lerp$1(ie[Z+lt],ie[ee+lt],st);be.length=ae;return}else it=Z}for(let st=0;st<ae;++st)be[st]=ie[it+st];be.length=ae}function maxSquaredDelta(ie,Z,ee,ae,ye){let ve=ie[Z],be=ie[Z+1];for(Z+=ae;Z<ee;Z+=ae){const Qe=ie[Z],Xe=ie[Z+1],Je=squaredDistance(ve,be,Qe,Xe);Je>ye&&(ye=Je),ve=Qe,be=Xe}return ye}function arrayMaxSquaredDelta(ie,Z,ee,ae,ye){for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve];ye=maxSquaredDelta(ie,Z,Qe,ae,ye),Z=Qe}return ye}function multiArrayMaxSquaredDelta(ie,Z,ee,ae,ye){for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve];ye=arrayMaxSquaredDelta(ie,Z,Qe,ae,ye),Z=Qe[Qe.length-1]}return ye}function assignClosestPoint(ie,Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt){if(Z==ee)return Je;let it,st;if(ye===0){if(st=squaredDistance(be,Qe,ie[Z],ie[Z+1]),st<Je){for(it=0;it<ae;++it)Xe[it]=ie[Z+it];return Xe.length=ae,st}return Je}tt=tt||[NaN,NaN];let lt=Z+ae;for(;lt<ee;)if(assignClosest(ie,lt-ae,lt,ae,be,Qe,tt),st=squaredDistance(be,Qe,tt[0],tt[1]),st<Je){for(Je=st,it=0;it<ae;++it)Xe[it]=tt[it];Xe.length=ae,lt+=ae}else lt+=ae*Math.max((Math.sqrt(st)-Math.sqrt(Je))/ye|0,1);if(ve&&(assignClosest(ie,ee-ae,Z,ae,be,Qe,tt),st=squaredDistance(be,Qe,tt[0],tt[1]),st<Je)){for(Je=st,it=0;it<ae;++it)Xe[it]=tt[it];Xe.length=ae}return Je}function assignClosestArrayPoint(ie,Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt){tt=tt||[NaN,NaN];for(let it=0,st=ee.length;it<st;++it){const lt=ee[it];Je=assignClosestPoint(ie,Z,lt,ae,ye,ve,be,Qe,Xe,Je,tt),Z=lt}return Je}function assignClosestMultiArrayPoint(ie,Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt){tt=tt||[NaN,NaN];for(let it=0,st=ee.length;it<st;++it){const lt=ee[it];Je=assignClosestArrayPoint(ie,Z,lt,ae,ye,ve,be,Qe,Xe,Je,tt),Z=lt[lt.length-1]}return Je}function deflateCoordinate(ie,Z,ee,ae){for(let ye=0,ve=ee.length;ye<ve;++ye)ie[Z++]=ee[ye];return Z}function deflateCoordinates(ie,Z,ee,ae){for(let ye=0,ve=ee.length;ye<ve;++ye){const be=ee[ye];for(let Qe=0;Qe<ae;++Qe)ie[Z++]=be[Qe]}return Z}function deflateCoordinatesArray(ie,Z,ee,ae,ye){ye=ye||[];let ve=0;for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=deflateCoordinates(ie,Z,ee[be],ae);ye[ve++]=Xe,Z=Xe}return ye.length=ve,ye}function deflateMultiCoordinatesArray(ie,Z,ee,ae,ye){ye=ye||[];let ve=0;for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=deflateCoordinatesArray(ie,Z,ee[be],ae,ye[ve]);Xe.length===0&&(Xe[0]=Z),ye[ve++]=Xe,Z=Xe[Xe.length-1]}return ye.length=ve,ye}function douglasPeucker(ie,Z,ee,ae,ye,ve,be){const Qe=(ee-Z)/ae;if(Qe<3){for(;Z<ee;Z+=ae)ve[be++]=ie[Z],ve[be++]=ie[Z+1];return be}const Xe=new Array(Qe);Xe[0]=1,Xe[Qe-1]=1;const Je=[Z,ee-ae];let tt=0;for(;Je.length>0;){const it=Je.pop(),st=Je.pop();let lt=0;const ct=ie[st],gt=ie[st+1],ut=ie[it],mt=ie[it+1];for(let ei=st+ae;ei<it;ei+=ae){const ni=ie[ei],ri=ie[ei+1],si=squaredSegmentDistance(ni,ri,ct,gt,ut,mt);si>lt&&(tt=ei,lt=si)}lt>ye&&(Xe[(tt-Z)/ae]=1,st+ae<tt&&Je.push(st,tt),tt+ae<it&&Je.push(tt,it))}for(let it=0;it<Qe;++it)Xe[it]&&(ve[be++]=ie[Z+it*ae],ve[be++]=ie[Z+it*ae+1]);return be}function douglasPeuckerArray(ie,Z,ee,ae,ye,ve,be,Qe){for(let Xe=0,Je=ee.length;Xe<Je;++Xe){const tt=ee[Xe];be=douglasPeucker(ie,Z,tt,ae,ye,ve,be),Qe.push(be),Z=tt}return be}function snap(ie,Z){return Z*Math.round(ie/Z)}function quantize(ie,Z,ee,ae,ye,ve,be){if(Z==ee)return be;let Qe=snap(ie[Z],ye),Xe=snap(ie[Z+1],ye);Z+=ae,ve[be++]=Qe,ve[be++]=Xe;let Je,tt;do if(Je=snap(ie[Z],ye),tt=snap(ie[Z+1],ye),Z+=ae,Z==ee)return ve[be++]=Je,ve[be++]=tt,be;while(Je==Qe&&tt==Xe);for(;Z<ee;){const it=snap(ie[Z],ye),st=snap(ie[Z+1],ye);if(Z+=ae,it==Je&&st==tt)continue;const lt=Je-Qe,ct=tt-Xe,gt=it-Qe,ut=st-Xe;if(lt*ut==ct*gt&&(lt<0&&gt<lt||lt==gt||lt>0&&gt>lt)&&(ct<0&&ut<ct||ct==ut||ct>0&&ut>ct)){Je=it,tt=st;continue}ve[be++]=Je,ve[be++]=tt,Qe=Je,Xe=tt,Je=it,tt=st}return ve[be++]=Je,ve[be++]=tt,be}function quantizeArray(ie,Z,ee,ae,ye,ve,be,Qe){for(let Xe=0,Je=ee.length;Xe<Je;++Xe){const tt=ee[Xe];be=quantize(ie,Z,tt,ae,ye,ve,be),Qe.push(be),Z=tt}return be}function quantizeMultiArray(ie,Z,ee,ae,ye,ve,be,Qe){for(let Xe=0,Je=ee.length;Xe<Je;++Xe){const tt=ee[Xe],it=[];be=quantizeArray(ie,Z,tt,ae,ye,ve,be,it),Qe.push(it),Z=tt[tt.length-1]}return be}function inflateCoordinates(ie,Z,ee,ae,ye){ye=ye!==void 0?ye:[];let ve=0;for(let be=Z;be<ee;be+=ae)ye[ve++]=ie.slice(be,be+ae);return ye.length=ve,ye}function inflateCoordinatesArray(ie,Z,ee,ae,ye){ye=ye!==void 0?ye:[];let ve=0;for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=ee[be];ye[ve++]=inflateCoordinates(ie,Z,Xe,ae,ye[ve]),Z=Xe}return ye.length=ve,ye}function inflateMultiCoordinatesArray(ie,Z,ee,ae,ye){ye=ye!==void 0?ye:[];let ve=0;for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=ee[be];ye[ve++]=Xe.length===1&&Xe[0]===Z?[]:inflateCoordinatesArray(ie,Z,Xe,ae,ye[ve]),Z=Xe[Xe.length-1]}return ye.length=ve,ye}function linearRing(ie,Z,ee,ae){let ye=0,ve=ie[ee-ae],be=ie[ee-ae+1];for(;Z<ee;Z+=ae){const Qe=ie[Z],Xe=ie[Z+1];ye+=be*Qe-ve*Xe,ve=Qe,be=Xe}return ye/2}function linearRings(ie,Z,ee,ae){let ye=0;for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve];ye+=linearRing(ie,Z,Qe,ae),Z=Qe}return ye}function linearRingss$1(ie,Z,ee,ae){let ye=0;for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve];ye+=linearRings(ie,Z,Qe,ae),Z=Qe[Qe.length-1]}return ye}class LinearRing extends SimpleGeometry{constructor(Z,ee){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,ee!==void 0&&!Array.isArray(Z[0])?this.setFlatCoordinates(ee,Z):this.setCoordinates(Z,ee)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(Z,ee,ae,ye){return ye<closestSquaredDistanceXY(this.getExtent(),Z,ee)?ye:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,Z,ee,ae,ye))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(Z){const ee=[];return ee.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,Z,ee,0),new LinearRing(ee,"XY")}getType(){return"LinearRing"}intersectsExtent(Z){return!1}setCoordinates(Z,ee){this.setLayout(ee,Z,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,Z,this.stride),this.changed()}}class Point extends SimpleGeometry{constructor(Z,ee){super(),this.setCoordinates(Z,ee)}clone(){const Z=new Point(this.flatCoordinates.slice(),this.layout);return Z.applyProperties(this),Z}closestPointXY(Z,ee,ae,ye){const ve=this.flatCoordinates,be=squaredDistance(Z,ee,ve[0],ve[1]);if(be<ye){const Qe=this.stride;for(let Xe=0;Xe<Qe;++Xe)ae[Xe]=ve[Xe];return ae.length=Qe,be}return ye}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(Z){return createOrUpdateFromCoordinate(this.flatCoordinates,Z)}getType(){return"Point"}intersectsExtent(Z){return containsXY(Z,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(Z,ee){this.setLayout(ee,Z,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,Z,this.stride),this.changed()}}const Point$1=Point;function linearRingContainsExtent(ie,Z,ee,ae,ye){return!forEachCorner(ye,function(be){return!linearRingContainsXY(ie,Z,ee,ae,be[0],be[1])})}function linearRingContainsXY(ie,Z,ee,ae,ye,ve){let be=0,Qe=ie[ee-ae],Xe=ie[ee-ae+1];for(;Z<ee;Z+=ae){const Je=ie[Z],tt=ie[Z+1];Xe<=ve?tt>ve&&(Je-Qe)*(ve-Xe)-(ye-Qe)*(tt-Xe)>0&&be++:tt<=ve&&(Je-Qe)*(ve-Xe)-(ye-Qe)*(tt-Xe)<0&&be--,Qe=Je,Xe=tt}return be!==0}function linearRingsContainsXY(ie,Z,ee,ae,ye,ve){if(ee.length===0||!linearRingContainsXY(ie,Z,ee[0],ae,ye,ve))return!1;for(let be=1,Qe=ee.length;be<Qe;++be)if(linearRingContainsXY(ie,ee[be-1],ee[be],ae,ye,ve))return!1;return!0}function linearRingssContainsXY(ie,Z,ee,ae,ye,ve){if(ee.length===0)return!1;for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=ee[be];if(linearRingsContainsXY(ie,Z,Xe,ae,ye,ve))return!0;Z=Xe[Xe.length-1]}return!1}function getInteriorPointOfArray(ie,Z,ee,ae,ye,ve,be){let Qe,Xe,Je,tt,it,st,lt;const ct=ye[ve+1],gt=[];for(let ei=0,ni=ee.length;ei<ni;++ei){const ri=ee[ei];for(tt=ie[ri-ae],st=ie[ri-ae+1],Qe=Z;Qe<ri;Qe+=ae)it=ie[Qe],lt=ie[Qe+1],(ct<=st&&lt<=ct||st<=ct&&ct<=lt)&&(Je=(ct-st)/(lt-st)*(it-tt)+tt,gt.push(Je)),tt=it,st=lt}let ut=NaN,mt=-1/0;for(gt.sort(ascending),tt=gt[0],Qe=1,Xe=gt.length;Qe<Xe;++Qe){it=gt[Qe];const ei=Math.abs(it-tt);ei>mt&&(Je=(tt+it)/2,linearRingsContainsXY(ie,Z,ee,ae,Je,ct)&&(ut=Je,mt=ei)),tt=it}return isNaN(ut)&&(ut=ye[ve]),be?(be.push(ut,ct,mt),be):[ut,ct,mt]}function getInteriorPointsOfMultiArray(ie,Z,ee,ae,ye){let ve=[];for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=ee[be];ve=getInteriorPointOfArray(ie,Z,Xe,ae,ye,2*be,ve),Z=Xe[Xe.length-1]}return ve}function forEach(ie,Z,ee,ae,ye){let ve;for(Z+=ae;Z<ee;Z+=ae)if(ve=ye(ie.slice(Z-ae,Z),ie.slice(Z,Z+ae)),ve)return ve;return!1}function intersectsLineString(ie,Z,ee,ae,ye){const ve=extendFlatCoordinates(createEmpty(),ie,Z,ee,ae);return intersects$1(ye,ve)?containsExtent(ye,ve)||ve[0]>=ye[0]&&ve[2]<=ye[2]||ve[1]>=ye[1]&&ve[3]<=ye[3]?!0:forEach(ie,Z,ee,ae,function(be,Qe){return intersectsSegment(ye,be,Qe)}):!1}function intersectsLineStringArray(ie,Z,ee,ae,ye){for(let ve=0,be=ee.length;ve<be;++ve){if(intersectsLineString(ie,Z,ee[ve],ae,ye))return!0;Z=ee[ve]}return!1}function intersectsLinearRing(ie,Z,ee,ae,ye){return!!(intersectsLineString(ie,Z,ee,ae,ye)||linearRingContainsXY(ie,Z,ee,ae,ye[0],ye[1])||linearRingContainsXY(ie,Z,ee,ae,ye[0],ye[3])||linearRingContainsXY(ie,Z,ee,ae,ye[2],ye[1])||linearRingContainsXY(ie,Z,ee,ae,ye[2],ye[3]))}function intersectsLinearRingArray(ie,Z,ee,ae,ye){if(!intersectsLinearRing(ie,Z,ee[0],ae,ye))return!1;if(ee.length===1)return!0;for(let ve=1,be=ee.length;ve<be;++ve)if(linearRingContainsExtent(ie,ee[ve-1],ee[ve],ae,ye)&&!intersectsLineString(ie,ee[ve-1],ee[ve],ae,ye))return!1;return!0}function intersectsLinearRingMultiArray(ie,Z,ee,ae,ye){for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve];if(intersectsLinearRingArray(ie,Z,Qe,ae,ye))return!0;Z=Qe[Qe.length-1]}return!1}function coordinates(ie,Z,ee,ae){for(;Z<ee-ae;){for(let ye=0;ye<ae;++ye){const ve=ie[Z+ye];ie[Z+ye]=ie[ee-ae+ye],ie[ee-ae+ye]=ve}Z+=ae,ee-=ae}}function linearRingIsClockwise(ie,Z,ee,ae){let ye=0,ve=ie[ee-ae],be=ie[ee-ae+1];for(;Z<ee;Z+=ae){const Qe=ie[Z],Xe=ie[Z+1];ye+=(Qe-ve)*(Xe+be),ve=Qe,be=Xe}return ye===0?void 0:ye>0}function linearRingsAreOriented(ie,Z,ee,ae,ye){ye=ye!==void 0?ye:!1;for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve],Xe=linearRingIsClockwise(ie,Z,Qe,ae);if(ve===0){if(ye&&Xe||!ye&&!Xe)return!1}else if(ye&&!Xe||!ye&&Xe)return!1;Z=Qe}return!0}function linearRingssAreOriented(ie,Z,ee,ae,ye){for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve];if(!linearRingsAreOriented(ie,Z,Qe,ae,ye))return!1;Qe.length&&(Z=Qe[Qe.length-1])}return!0}function orientLinearRings(ie,Z,ee,ae,ye){ye=ye!==void 0?ye:!1;for(let ve=0,be=ee.length;ve<be;++ve){const Qe=ee[ve],Xe=linearRingIsClockwise(ie,Z,Qe,ae);(ve===0?ye&&Xe||!ye&&!Xe:ye&&!Xe||!ye&&Xe)&&coordinates(ie,Z,Qe,ae),Z=Qe}return Z}function orientLinearRingsArray(ie,Z,ee,ae,ye){for(let ve=0,be=ee.length;ve<be;++ve)Z=orientLinearRings(ie,Z,ee[ve],ae,ye);return Z}function inflateEnds(ie,Z){const ee=[];let ae=0,ye=0;for(let ve=0,be=Z.length;ve<be;++ve){const Qe=Z[ve];if(!linearRingIsClockwise(ie,ae,Qe,2))ee.push(Z.slice(ye,ve+1));else{if(ee.length===0)continue;ee[ee.length-1].push(Z[ye])}ye=ve+1,ae=Qe}return ee}class Polygon extends SimpleGeometry{constructor(Z,ee,ae){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,ee!==void 0&&ae?(this.setFlatCoordinates(ee,Z),this.ends_=ae):this.setCoordinates(Z,ee)}appendLinearRing(Z){this.flatCoordinates?extend$2(this.flatCoordinates,Z.getFlatCoordinates()):this.flatCoordinates=Z.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const Z=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return Z.applyProperties(this),Z}closestPointXY(Z,ee,ae,ye){return ye<closestSquaredDistanceXY(this.getExtent(),Z,ee)?ye:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,Z,ee,ae,ye))}containsXY(Z,ee){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,Z,ee)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(Z){let ee;return Z!==void 0?(ee=this.getOrientedFlatCoordinates().slice(),orientLinearRings(ee,0,this.ends_,this.stride,Z)):ee=this.flatCoordinates,inflateCoordinatesArray(ee,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const Z=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,Z,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(Z){return Z<0||this.ends_.length<=Z?null:new LinearRing(this.flatCoordinates.slice(Z===0?0:this.ends_[Z-1],this.ends_[Z]),this.layout)}getLinearRings(){const Z=this.layout,ee=this.flatCoordinates,ae=this.ends_,ye=[];let ve=0;for(let be=0,Qe=ae.length;be<Qe;++be){const Xe=ae[be],Je=new LinearRing(ee.slice(ve,Xe),Z);ye.push(Je),ve=Xe}return ye}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const Z=this.flatCoordinates;linearRingsAreOriented(Z,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=Z:(this.orientedFlatCoordinates_=Z.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(Z){const ee=[],ae=[];return ee.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(Z),ee,0,ae),new Polygon(ee,"XY",ae)}getType(){return"Polygon"}intersectsExtent(Z){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,Z)}setCoordinates(Z,ee){this.setLayout(ee,Z,2),this.flatCoordinates||(this.flatCoordinates=[]);const ae=deflateCoordinatesArray(this.flatCoordinates,0,Z,this.stride,this.ends_);this.flatCoordinates.length=ae.length===0?0:ae[ae.length-1],this.changed()}}const Polygon$1=Polygon;function fromExtent(ie){if(isEmpty(ie))throw new Error("Cannot create polygon from empty extent");const Z=ie[0],ee=ie[1],ae=ie[2],ye=ie[3],ve=[Z,ee,Z,ye,ae,ye,ae,ee,Z,ee];return new Polygon(ve,"XY",[ve.length])}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Fill{constructor(Z){Z=Z||{},this.color_=Z.color!==void 0?Z.color:null}clone(){const Z=this.getColor();return new Fill({color:Array.isArray(Z)?Z.slice():Z||void 0})}getColor(){return this.color_}setColor(Z){this.color_=Z}}function interpolatePoint(ie,Z,ee,ae,ye,ve,be){let Qe,Xe;const Je=(ee-Z)/ae;if(Je===1)Qe=Z;else if(Je===2)Qe=Z,Xe=ye;else if(Je!==0){let tt=ie[Z],it=ie[Z+1],st=0;const lt=[0];for(let ut=Z+ae;ut<ee;ut+=ae){const mt=ie[ut],ei=ie[ut+1];st+=Math.sqrt((mt-tt)*(mt-tt)+(ei-it)*(ei-it)),lt.push(st),tt=mt,it=ei}const ct=ye*st,gt=binarySearch(lt,ct);gt<0?(Xe=(ct-lt[-gt-2])/(lt[-gt-1]-lt[-gt-2]),Qe=Z+(-gt-2)*ae):Qe=Z+gt*ae}be=be>1?be:2,ve=ve||new Array(be);for(let tt=0;tt<be;++tt)ve[tt]=Qe===void 0?NaN:Xe===void 0?ie[Qe+tt]:lerp$1(ie[Qe+tt],ie[Qe+ae+tt],Xe);return ve}function lineStringCoordinateAtM(ie,Z,ee,ae,ye,ve){if(ee==Z)return null;let be;if(ye<ie[Z+ae-1])return ve?(be=ie.slice(Z,Z+ae),be[ae-1]=ye,be):null;if(ie[ee-1]<ye)return ve?(be=ie.slice(ee-ae,ee),be[ae-1]=ye,be):null;if(ye==ie[Z+ae-1])return ie.slice(Z,Z+ae);let Qe=Z/ae,Xe=ee/ae;for(;Qe<Xe;){const st=Qe+Xe>>1;ye<ie[(st+1)*ae-1]?Xe=st:Qe=st+1}const Je=ie[Qe*ae-1];if(ye==Je)return ie.slice((Qe-1)*ae,(Qe-1)*ae+ae);const tt=ie[(Qe+1)*ae-1],it=(ye-Je)/(tt-Je);be=[];for(let st=0;st<ae-1;++st)be.push(lerp$1(ie[(Qe-1)*ae+st],ie[Qe*ae+st],it));return be.push(ye),be}function lineStringsCoordinateAtM(ie,Z,ee,ae,ye,ve,be){if(be)return lineStringCoordinateAtM(ie,Z,ee[ee.length-1],ae,ye,ve);let Qe;if(ye<ie[ae-1])return ve?(Qe=ie.slice(0,ae),Qe[ae-1]=ye,Qe):null;if(ie[ie.length-1]<ye)return ve?(Qe=ie.slice(ie.length-ae),Qe[ae-1]=ye,Qe):null;for(let Xe=0,Je=ee.length;Xe<Je;++Xe){const tt=ee[Xe];if(Z!=tt){if(ye<ie[Z+ae-1])return null;if(ye<=ie[tt-1])return lineStringCoordinateAtM(ie,Z,tt,ae,ye,!1);Z=tt}}return null}function lineStringLength(ie,Z,ee,ae){let ye=ie[Z],ve=ie[Z+1],be=0;for(let Qe=Z+ae;Qe<ee;Qe+=ae){const Xe=ie[Qe],Je=ie[Qe+1];be+=Math.sqrt((Xe-ye)*(Xe-ye)+(Je-ve)*(Je-ve)),ye=Xe,ve=Je}return be}class LineString extends SimpleGeometry{constructor(Z,ee){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,ee!==void 0&&!Array.isArray(Z[0])?this.setFlatCoordinates(ee,Z):this.setCoordinates(Z,ee)}appendCoordinate(Z){this.flatCoordinates?extend$2(this.flatCoordinates,Z):this.flatCoordinates=Z.slice(),this.changed()}clone(){const Z=new LineString(this.flatCoordinates.slice(),this.layout);return Z.applyProperties(this),Z}closestPointXY(Z,ee,ae,ye){return ye<closestSquaredDistanceXY(this.getExtent(),Z,ee)?ye:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,Z,ee,ae,ye))}forEachSegment(Z){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,Z)}getCoordinateAtM(Z,ee){return this.layout!="XYM"&&this.layout!="XYZM"?null:(ee=ee!==void 0?ee:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,Z,ee))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(Z,ee){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,Z,ee,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(Z){const ee=[];return ee.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,Z,ee,0),new LineString(ee,"XY")}getType(){return"LineString"}intersectsExtent(Z){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,Z)}setCoordinates(Z,ee){this.setLayout(ee,Z,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,Z,this.stride),this.changed()}}const LineString$1=LineString;class Stroke{constructor(Z){Z=Z||{},this.color_=Z.color!==void 0?Z.color:null,this.lineCap_=Z.lineCap,this.lineDash_=Z.lineDash!==void 0?Z.lineDash:null,this.lineDashOffset_=Z.lineDashOffset,this.lineJoin_=Z.lineJoin,this.miterLimit_=Z.miterLimit,this.width_=Z.width}clone(){const Z=this.getColor();return new Stroke({color:Array.isArray(Z)?Z.slice():Z||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(Z){this.color_=Z}setLineCap(Z){this.lineCap_=Z}setLineDash(Z){this.lineDash_=Z}setLineDashOffset(Z){this.lineDashOffset_=Z}setLineJoin(Z){this.lineJoin_=Z}setMiterLimit(Z){this.miterLimit_=Z}setWidth(Z){this.width_=Z}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function hasArea(ie){return ie[0]>0&&ie[1]>0}function scale(ie,Z,ee){return ee===void 0&&(ee=[0,0]),ee[0]=ie[0]*Z+.5|0,ee[1]=ie[1]*Z+.5|0,ee}function toSize(ie,Z){return Array.isArray(ie)?ie:(Z===void 0?Z=[ie,ie]:(Z[0]=ie,Z[1]=ie),Z)}class ImageStyle{constructor(Z){this.opacity_=Z.opacity,this.rotateWithView_=Z.rotateWithView,this.rotation_=Z.rotation,this.scale_=Z.scale,this.scaleArray_=toSize(Z.scale),this.displacement_=Z.displacement,this.declutterMode_=Z.declutterMode}clone(){const Z=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(Z)?Z.slice():Z,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(Z){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(Z){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(Z){this.displacement_=Z}setOpacity(Z){this.opacity_=Z}setRotateWithView(Z){this.rotateWithView_=Z}setRotation(Z){this.rotation_=Z}setScale(Z){this.scale_=Z,this.scaleArray_=toSize(Z)}listenImageChange(Z){abstract()}load(){abstract()}unlistenImageChange(Z){abstract()}}const HEX_COLOR_RE_=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,NAMED_COLOR_RE_=/^([a-z]*)$|^hsla?\(.*\)$/i;function asString(ie){return typeof ie=="string"?ie:toString$2(ie)}function fromNamed(ie){const Z=document.createElement("div");if(Z.style.color=ie,Z.style.color!==""){document.body.appendChild(Z);const ee=getComputedStyle(Z).color;return document.body.removeChild(Z),ee}return""}const fromString=function(){const Z={};let ee=0;return function(ae){let ye;if(Z.hasOwnProperty(ae))ye=Z[ae];else{if(ee>=1024){let ve=0;for(const be in Z)ve++&3||(delete Z[be],--ee)}ye=fromStringInternal_(ae),Z[ae]=ye,++ee}return ye}}();function asArray(ie){return Array.isArray(ie)?ie:fromString(ie)}function fromStringInternal_(ie){let Z,ee,ae,ye,ve;if(NAMED_COLOR_RE_.exec(ie)&&(ie=fromNamed(ie)),HEX_COLOR_RE_.exec(ie)){const be=ie.length-1;let Qe;be<=4?Qe=1:Qe=2;const Xe=be===4||be===8;Z=parseInt(ie.substr(1+0*Qe,Qe),16),ee=parseInt(ie.substr(1+1*Qe,Qe),16),ae=parseInt(ie.substr(1+2*Qe,Qe),16),Xe?ye=parseInt(ie.substr(1+3*Qe,Qe),16):ye=255,Qe==1&&(Z=(Z<<4)+Z,ee=(ee<<4)+ee,ae=(ae<<4)+ae,Xe&&(ye=(ye<<4)+ye)),ve=[Z,ee,ae,ye/255]}else if(ie.startsWith("rgba("))ve=ie.slice(5,-1).split(",").map(Number),normalize$1(ve);else if(ie.startsWith("rgb("))ve=ie.slice(4,-1).split(",").map(Number),ve.push(1),normalize$1(ve);else throw new Error("Invalid color");return ve}function normalize$1(ie){return ie[0]=clamp$1(ie[0]+.5|0,0,255),ie[1]=clamp$1(ie[1]+.5|0,0,255),ie[2]=clamp$1(ie[2]+.5|0,0,255),ie[3]=clamp$1(ie[3],0,1),ie}function toString$2(ie){let Z=ie[0];Z!=(Z|0)&&(Z=Z+.5|0);let ee=ie[1];ee!=(ee|0)&&(ee=ee+.5|0);let ae=ie[2];ae!=(ae|0)&&(ae=ae+.5|0);const ye=ie[3]===void 0?1:Math.round(ie[3]*100)/100;return"rgba("+Z+","+ee+","+ae+","+ye+")"}function isStringColor(ie){return NAMED_COLOR_RE_.test(ie)&&(ie=fromNamed(ie)),HEX_COLOR_RE_.test(ie)||ie.startsWith("rgba(")||ie.startsWith("rgb(")}function asColorLike(ie){return Array.isArray(ie)?toString$2(ie):ie}function createCanvasContext2D(ie,Z,ee,ae){let ye;return ee&&ee.length?ye=ee.shift():WORKER_OFFSCREEN_CANVAS?ye=new OffscreenCanvas(ie||300,Z||300):ye=document.createElement("canvas"),ie&&(ye.width=ie),Z&&(ye.height=Z),ye.getContext("2d",ae)}function releaseCanvas$1(ie){const Z=ie.canvas;Z.width=1,Z.height=1,ie.clearRect(0,0,1,1)}function replaceNode(ie,Z){const ee=Z.parentNode;ee&&ee.replaceChild(ie,Z)}function removeNode(ie){return ie&&ie.parentNode?ie.parentNode.removeChild(ie):null}function removeChildren(ie){for(;ie.lastChild;)ie.removeChild(ie.lastChild)}function replaceChildren(ie,Z){const ee=ie.childNodes;for(let ae=0;;++ae){const ye=ee[ae],ve=Z[ae];if(!ye&&!ve)break;if(ye!==ve){if(!ye){ie.appendChild(ve);continue}if(!ve){ie.removeChild(ye),--ae;continue}ie.insertBefore(ve,ye)}}}const CLASS_HIDDEN="ol-hidden",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(ie){const Z=ie.match(fontRegEx);if(!Z)return null;const ee={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let ae=0,ye=fontRegExMatchIndex.length;ae<ye;++ae){const ve=Z[ae+1];ve!==void 0&&(ee[fontRegExMatchIndex[ae]]=ve)}return ee.families=ee.family.split(/,\s?/),ee},defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext=null,measureFont;const textHeights={},registerFont=function(){const Z="32px ",ee=["monospace","serif"],ae=ee.length,ye="wmytzilWMYTZIL@#/&?$%10";let ve,be;function Qe(Je,tt,it){let st=!0;for(let lt=0;lt<ae;++lt){const ct=ee[lt];if(be=measureTextWidth(Je+" "+tt+" "+Z+ct,ye),it!=ct){const gt=measureTextWidth(Je+" "+tt+" "+Z+it+","+ct,ye);st=st&&gt!=be}}return!!st}function Xe(){let Je=!0;const tt=checkedFonts.getKeys();for(let it=0,st=tt.length;it<st;++it){const lt=tt[it];checkedFonts.get(lt)<100&&(Qe.apply(this,lt.split(`
`))?(clear(textHeights),measureContext=null,measureFont=void 0,checkedFonts.set(lt,100)):(checkedFonts.set(lt,checkedFonts.get(lt)+1,!0),Je=!1))}Je&&(clearInterval(ve),ve=void 0)}return function(Je){const tt=getFontParameters(Je);if(!tt)return;const it=tt.families;for(let st=0,lt=it.length;st<lt;++st){const ct=it[st],gt=tt.style+`
`+tt.weight+`
`+ct;checkedFonts.get(gt)===void 0&&(checkedFonts.set(gt,100,!0),Qe(tt.style,tt.weight,ct)||(checkedFonts.set(gt,0,!0),ve===void 0&&(ve=setInterval(Xe,32))))}}}(),measureTextHeight=function(){let ie;return function(Z){let ee=textHeights[Z];if(ee==null){if(WORKER_OFFSCREEN_CANVAS){const ae=getFontParameters(Z),ye=measureText(Z,"g");ee=(isNaN(Number(ae.lineHeight))?1.2:Number(ae.lineHeight))*(ye.actualBoundingBoxAscent+ye.actualBoundingBoxDescent)}else ie||(ie=document.createElement("div"),ie.innerHTML="M",ie.style.minHeight="0",ie.style.maxHeight="none",ie.style.height="auto",ie.style.padding="0",ie.style.border="none",ie.style.position="absolute",ie.style.display="block",ie.style.left="-99999px"),ie.style.font=Z,document.body.appendChild(ie),ee=ie.offsetHeight,document.body.removeChild(ie);textHeights[Z]=ee}return ee}}();function measureText(ie,Z){return measureContext||(measureContext=createCanvasContext2D(1,1)),ie!=measureFont&&(measureContext.font=ie,measureFont=measureContext.font),measureContext.measureText(Z)}function measureTextWidth(ie,Z){return measureText(ie,Z).width}function measureAndCacheTextWidth(ie,Z,ee){if(Z in ee)return ee[Z];const ae=Z.split(`
`).reduce((ye,ve)=>Math.max(ye,measureTextWidth(ie,ve)),0);return ee[Z]=ae,ae}function getTextDimensions(ie,Z){const ee=[],ae=[],ye=[];let ve=0,be=0,Qe=0,Xe=0;for(let Je=0,tt=Z.length;Je<=tt;Je+=2){const it=Z[Je];if(it===`
`||Je===tt){ve=Math.max(ve,be),ye.push(be),be=0,Qe+=Xe;continue}const st=Z[Je+1]||ie.font,lt=measureTextWidth(st,it);ee.push(lt),be+=lt;const ct=measureTextHeight(st);ae.push(ct),Xe=Math.max(Xe,ct)}return{width:ve,height:Qe,widths:ee,heights:ae,lineWidths:ye}}function drawImageOrLabel(ie,Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt){ie.save(),ee!==1&&(ie.globalAlpha*=ee),Z&&ie.transform.apply(ie,Z),ae.contextInstructions?(ie.translate(Xe,Je),ie.scale(tt[0],tt[1]),executeLabelInstructions(ae,ie)):tt[0]<0||tt[1]<0?(ie.translate(Xe,Je),ie.scale(tt[0],tt[1]),ie.drawImage(ae,ye,ve,be,Qe,0,0,be,Qe)):ie.drawImage(ae,ye,ve,be,Qe,Xe,Je,be*tt[0],Qe*tt[1]),ie.restore()}function executeLabelInstructions(ie,Z){const ee=ie.contextInstructions;for(let ae=0,ye=ee.length;ae<ye;ae+=2)Array.isArray(ee[ae+1])?Z[ee[ae]].apply(Z,ee[ae+1]):Z[ee[ae]]=ee[ae+1]}class RegularShape extends ImageStyle{constructor(Z){const ee=Z.rotateWithView!==void 0?Z.rotateWithView:!1;super({opacity:1,rotateWithView:ee,rotation:Z.rotation!==void 0?Z.rotation:0,scale:Z.scale!==void 0?Z.scale:1,displacement:Z.displacement!==void 0?Z.displacement:[0,0],declutterMode:Z.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=Z.fill!==void 0?Z.fill:null,this.origin_=[0,0],this.points_=Z.points,this.radius_=Z.radius!==void 0?Z.radius:Z.radius1,this.radius2_=Z.radius2,this.angle_=Z.angle!==void 0?Z.angle:0,this.stroke_=Z.stroke!==void 0?Z.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const Z=this.getScale(),ee=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(Z)?Z.slice():Z,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return ee.setOpacity(this.getOpacity()),ee}getAnchor(){const Z=this.size_;if(!Z)return null;const ee=this.getDisplacement(),ae=this.getScaleArray();return[Z[0]/2-ee[0]/ae[0],Z[1]/2+ee[1]/ae[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(Z){this.fill_=Z,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(Z){let ee=this.canvas_[Z];if(!ee){const ae=this.renderOptions_,ye=createCanvasContext2D(ae.size*Z,ae.size*Z);this.draw_(ae,ye,Z),ee=ye.canvas,this.canvas_[Z]=ee}return ee}getPixelRatio(Z){return Z}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(Z){this.stroke_=Z,this.render()}listenImageChange(Z){}load(){}unlistenImageChange(Z){}calculateLineJoinSize_(Z,ee,ae){if(ee===0||this.points_===1/0||Z!=="bevel"&&Z!=="miter")return ee;let ye=this.radius_,ve=this.radius2_===void 0?ye:this.radius2_;if(ye<ve){const li=ye;ye=ve,ve=li}const be=this.radius2_===void 0?this.points_:this.points_*2,Qe=2*Math.PI/be,Xe=ve*Math.sin(Qe),Je=Math.sqrt(ve*ve-Xe*Xe),tt=ye-Je,it=Math.sqrt(Xe*Xe+tt*tt),st=it/Xe;if(Z==="miter"&&st<=ae)return st*ee;const lt=ee/2/st,ct=ee/2*(tt/it),ut=Math.sqrt((ye+lt)*(ye+lt)+ct*ct)-ye;if(this.radius2_===void 0||Z==="bevel")return ut*2;const mt=ye*Math.sin(Qe),ei=Math.sqrt(ye*ye-mt*mt),ni=ve-ei,si=Math.sqrt(mt*mt+ni*ni)/mt;if(si<=ae){const li=si*ee/2-ve-ye;return 2*Math.max(ut,li)}return ut*2}createRenderOptions(){let Z=defaultLineCap,ee=defaultLineJoin,ae=0,ye=null,ve=0,be,Qe=0;this.stroke_&&(be=this.stroke_.getColor(),be===null&&(be=defaultStrokeStyle),be=asColorLike(be),Qe=this.stroke_.getWidth(),Qe===void 0&&(Qe=defaultLineWidth),ye=this.stroke_.getLineDash(),ve=this.stroke_.getLineDashOffset(),ee=this.stroke_.getLineJoin(),ee===void 0&&(ee=defaultLineJoin),Z=this.stroke_.getLineCap(),Z===void 0&&(Z=defaultLineCap),ae=this.stroke_.getMiterLimit(),ae===void 0&&(ae=defaultMiterLimit));const Xe=this.calculateLineJoinSize_(ee,Qe,ae),Je=Math.max(this.radius_,this.radius2_||0),tt=Math.ceil(2*Je+Xe);return{strokeStyle:be,strokeWidth:Qe,size:tt,lineCap:Z,lineDash:ye,lineDashOffset:ve,lineJoin:ee,miterLimit:ae}}render(){this.renderOptions_=this.createRenderOptions();const Z=this.renderOptions_.size;this.canvas_={},this.size_=[Z,Z]}draw_(Z,ee,ae){if(ee.scale(ae,ae),ee.translate(Z.size/2,Z.size/2),this.createPath_(ee),this.fill_){let ye=this.fill_.getColor();ye===null&&(ye=defaultFillStyle),ee.fillStyle=asColorLike(ye),ee.fill()}this.stroke_&&(ee.strokeStyle=Z.strokeStyle,ee.lineWidth=Z.strokeWidth,Z.lineDash&&(ee.setLineDash(Z.lineDash),ee.lineDashOffset=Z.lineDashOffset),ee.lineCap=Z.lineCap,ee.lineJoin=Z.lineJoin,ee.miterLimit=Z.miterLimit,ee.stroke())}createHitDetectionCanvas_(Z){if(this.fill_){let ee=this.fill_.getColor(),ae=0;if(typeof ee=="string"&&(ee=asArray(ee)),ee===null?ae=1:Array.isArray(ee)&&(ae=ee.length===4?ee[3]:1),ae===0){const ye=createCanvasContext2D(Z.size,Z.size);this.hitDetectionCanvas_=ye.canvas,this.drawHitDetectionCanvas_(Z,ye)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(Z){let ee=this.points_;const ae=this.radius_;if(ee===1/0)Z.arc(0,0,ae,0,2*Math.PI);else{const ye=this.radius2_===void 0?ae:this.radius2_;this.radius2_!==void 0&&(ee*=2);const ve=this.angle_-Math.PI/2,be=2*Math.PI/ee;for(let Qe=0;Qe<ee;Qe++){const Xe=ve+Qe*be,Je=Qe%2===0?ae:ye;Z.lineTo(Je*Math.cos(Xe),Je*Math.sin(Xe))}Z.closePath()}}drawHitDetectionCanvas_(Z,ee){ee.translate(Z.size/2,Z.size/2),this.createPath_(ee),ee.fillStyle=defaultFillStyle,ee.fill(),this.stroke_&&(ee.strokeStyle=Z.strokeStyle,ee.lineWidth=Z.strokeWidth,Z.lineDash&&(ee.setLineDash(Z.lineDash),ee.lineDashOffset=Z.lineDashOffset),ee.lineJoin=Z.lineJoin,ee.miterLimit=Z.miterLimit,ee.stroke())}}class CircleStyle extends RegularShape{constructor(Z){Z=Z||{radius:5},super({points:1/0,fill:Z.fill,radius:Z.radius,stroke:Z.stroke,scale:Z.scale!==void 0?Z.scale:1,rotation:Z.rotation!==void 0?Z.rotation:0,rotateWithView:Z.rotateWithView!==void 0?Z.rotateWithView:!1,displacement:Z.displacement!==void 0?Z.displacement:[0,0],declutterMode:Z.declutterMode})}clone(){const Z=this.getScale(),ee=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(Z)?Z.slice():Z,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return ee.setOpacity(this.getOpacity()),ee}setRadius(Z){this.radius_=Z,this.render()}}let Style$1=class hb{constructor(Z){Z=Z||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,Z.geometry!==void 0&&this.setGeometry(Z.geometry),this.fill_=Z.fill!==void 0?Z.fill:null,this.image_=Z.image!==void 0?Z.image:null,this.renderer_=Z.renderer!==void 0?Z.renderer:null,this.hitDetectionRenderer_=Z.hitDetectionRenderer!==void 0?Z.hitDetectionRenderer:null,this.stroke_=Z.stroke!==void 0?Z.stroke:null,this.text_=Z.text!==void 0?Z.text:null,this.zIndex_=Z.zIndex}clone(){let Z=this.getGeometry();return Z&&typeof Z=="object"&&(Z=Z.clone()),new hb({geometry:Z,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(Z){this.renderer_=Z}setHitDetectionRenderer(Z){this.hitDetectionRenderer_=Z}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(Z){this.fill_=Z}getImage(){return this.image_}setImage(Z){this.image_=Z}getStroke(){return this.stroke_}setStroke(Z){this.stroke_=Z}getText(){return this.text_}setText(Z){this.text_=Z}getZIndex(){return this.zIndex_}setGeometry(Z){typeof Z=="function"?this.geometryFunction_=Z:typeof Z=="string"?this.geometryFunction_=function(ee){return ee.get(Z)}:Z?Z!==void 0&&(this.geometryFunction_=function(){return Z}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=Z}setZIndex(Z){this.zIndex_=Z}};function toFunction(ie){let Z;if(typeof ie=="function")Z=ie;else{let ee;Array.isArray(ie)?ee=ie:(assert(typeof ie.getZIndex=="function","Expected an `Style` or an array of `Style`"),ee=[ie]),Z=function(){return ee}}return Z}let defaultStyles=null;function createDefaultStyle(ie,Z){if(!defaultStyles){const ee=new Fill({color:"rgba(255,255,255,0.4)"}),ae=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:ee,stroke:ae,radius:5}),fill:ee,stroke:ae})]}return defaultStyles}function defaultGeometryFunction(ie){return ie.getGeometry()}const DEFAULT_FILL_COLOR="#333";let Text$1=class gb{constructor(Z){Z=Z||{},this.font_=Z.font,this.rotation_=Z.rotation,this.rotateWithView_=Z.rotateWithView,this.scale_=Z.scale,this.scaleArray_=toSize(Z.scale!==void 0?Z.scale:1),this.text_=Z.text,this.textAlign_=Z.textAlign,this.justify_=Z.justify,this.repeat_=Z.repeat,this.textBaseline_=Z.textBaseline,this.fill_=Z.fill!==void 0?Z.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=Z.maxAngle!==void 0?Z.maxAngle:Math.PI/4,this.placement_=Z.placement!==void 0?Z.placement:"point",this.overflow_=!!Z.overflow,this.stroke_=Z.stroke!==void 0?Z.stroke:null,this.offsetX_=Z.offsetX!==void 0?Z.offsetX:0,this.offsetY_=Z.offsetY!==void 0?Z.offsetY:0,this.backgroundFill_=Z.backgroundFill?Z.backgroundFill:null,this.backgroundStroke_=Z.backgroundStroke?Z.backgroundStroke:null,this.padding_=Z.padding===void 0?null:Z.padding}clone(){const Z=this.getScale();return new gb({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(Z)?Z.slice():Z,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(Z){this.overflow_=Z}setFont(Z){this.font_=Z}setMaxAngle(Z){this.maxAngle_=Z}setOffsetX(Z){this.offsetX_=Z}setOffsetY(Z){this.offsetY_=Z}setPlacement(Z){this.placement_=Z}setRepeat(Z){this.repeat_=Z}setRotateWithView(Z){this.rotateWithView_=Z}setFill(Z){this.fill_=Z}setRotation(Z){this.rotation_=Z}setScale(Z){this.scale_=Z,this.scaleArray_=toSize(Z!==void 0?Z:1)}setStroke(Z){this.stroke_=Z}setText(Z){this.text_=Z}setTextAlign(Z){this.textAlign_=Z}setJustify(Z){this.justify_=Z}setTextBaseline(Z){this.textBaseline_=Z}setBackgroundFill(Z){this.backgroundFill_=Z}setBackgroundStroke(Z){this.backgroundStroke_=Z}setPadding(Z){this.padding_=Z}};const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(Z){super(),this.on,this.once,this.un,this.background_=Z.background;const ee=Object.assign({},Z);typeof Z.properties=="object"&&(delete ee.properties,Object.assign(ee,Z.properties)),ee[LayerProperty.OPACITY]=Z.opacity!==void 0?Z.opacity:1,assert(typeof ee[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),ee[LayerProperty.VISIBLE]=Z.visible!==void 0?Z.visible:!0,ee[LayerProperty.Z_INDEX]=Z.zIndex,ee[LayerProperty.MAX_RESOLUTION]=Z.maxResolution!==void 0?Z.maxResolution:1/0,ee[LayerProperty.MIN_RESOLUTION]=Z.minResolution!==void 0?Z.minResolution:0,ee[LayerProperty.MIN_ZOOM]=Z.minZoom!==void 0?Z.minZoom:-1/0,ee[LayerProperty.MAX_ZOOM]=Z.maxZoom!==void 0?Z.maxZoom:1/0,this.className_=ee.className!==void 0?ee.className:"ol-layer",delete ee.className,this.setProperties(ee),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(Z){const ee=this.state_||{layer:this,managed:Z===void 0?!0:Z},ae=this.getZIndex();return ee.opacity=clamp$1(Math.round(this.getOpacity()*100)/100,0,1),ee.visible=this.getVisible(),ee.extent=this.getExtent(),ee.zIndex=ae===void 0&&!ee.managed?1/0:ae,ee.maxResolution=this.getMaxResolution(),ee.minResolution=Math.max(this.getMinResolution(),0),ee.minZoom=this.getMinZoom(),ee.maxZoom=this.getMaxZoom(),this.state_=ee,ee}getLayersArray(Z){return abstract()}getLayerStatesArray(Z){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(Z){this.background_=Z,this.changed()}setExtent(Z){this.set(LayerProperty.EXTENT,Z)}setMaxResolution(Z){this.set(LayerProperty.MAX_RESOLUTION,Z)}setMinResolution(Z){this.set(LayerProperty.MIN_RESOLUTION,Z)}setMaxZoom(Z){this.set(LayerProperty.MAX_ZOOM,Z)}setMinZoom(Z){this.set(LayerProperty.MIN_ZOOM,Z)}setOpacity(Z){assert(typeof Z=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,Z)}setVisible(Z){this.set(LayerProperty.VISIBLE,Z)}setZIndex(Z){this.set(LayerProperty.Z_INDEX,Z)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function createExtent(ie,Z,ee){return function(ae,ye,ve,be,Qe){if(!ae)return;if(!ye&&!Z)return ae;const Xe=Z?0:ve[0]*ye,Je=Z?0:ve[1]*ye,tt=Qe?Qe[0]:0,it=Qe?Qe[1]:0;let st=ie[0]+Xe/2+tt,lt=ie[2]-Xe/2+tt,ct=ie[1]+Je/2+it,gt=ie[3]-Je/2+it;st>lt&&(st=(lt+st)/2,lt=st),ct>gt&&(ct=(gt+ct)/2,gt=ct);let ut=clamp$1(ae[0],st,lt),mt=clamp$1(ae[1],ct,gt);if(be&&ee&&ye){const ei=30*ye;ut+=-ei*Math.log(1+Math.max(0,st-ae[0])/ei)+ei*Math.log(1+Math.max(0,ae[0]-lt)/ei),mt+=-ei*Math.log(1+Math.max(0,ct-ae[1])/ei)+ei*Math.log(1+Math.max(0,ae[1]-gt)/ei)}return[ut,mt]}}function none$1(ie){return ie}function getViewportClampedResolution(ie,Z,ee,ae){const ye=getWidth(Z)/ee[0],ve=getHeight(Z)/ee[1];return ae?Math.min(ie,Math.max(ye,ve)):Math.min(ie,Math.min(ye,ve))}function getSmoothClampedResolution(ie,Z,ee){let ae=Math.min(ie,Z);const ye=50;return ae*=Math.log(1+ye*Math.max(0,ie/Z-1))/ye+1,ee&&(ae=Math.max(ae,ee),ae/=Math.log(1+ye*Math.max(0,ee/ie-1))/ye+1),clamp$1(ae,ee/2,Z*2)}function createSnapToResolutions(ie,Z,ee,ae){return Z=Z!==void 0?Z:!0,function(ye,ve,be,Qe){if(ye!==void 0){const Xe=ie[0],Je=ie[ie.length-1],tt=ee?getViewportClampedResolution(Xe,ee,be,ae):Xe;if(Qe)return Z?getSmoothClampedResolution(ye,tt,Je):clamp$1(ye,Je,tt);const it=Math.min(tt,ye),st=Math.floor(linearFindNearest(ie,it,ve));return ie[st]>tt&&st<ie.length-1?ie[st+1]:ie[st]}}}function createSnapToPower(ie,Z,ee,ae,ye,ve){return ae=ae!==void 0?ae:!0,ee=ee!==void 0?ee:0,function(be,Qe,Xe,Je){if(be!==void 0){const tt=ye?getViewportClampedResolution(Z,ye,Xe,ve):Z;if(Je)return ae?getSmoothClampedResolution(be,tt,ee):clamp$1(be,ee,tt);const it=1e-9,st=Math.ceil(Math.log(Z/tt)/Math.log(ie)-it),lt=-Qe*(.5-it)+.5,ct=Math.min(tt,be),gt=Math.floor(Math.log(Z/ct)/Math.log(ie)+lt),ut=Math.max(st,gt),mt=Z/Math.pow(ie,ut);return clamp$1(mt,ee,tt)}}}function createMinMaxResolution(ie,Z,ee,ae,ye){return ee=ee!==void 0?ee:!0,function(ve,be,Qe,Xe){if(ve!==void 0){const Je=ae?getViewportClampedResolution(ie,ae,Qe,ye):ie;return!ee||!Xe?clamp$1(ve,Z,Je):getSmoothClampedResolution(ve,Je,Z)}}}function disable(ie){if(ie!==void 0)return 0}function none(ie){if(ie!==void 0)return ie}function createSnapToN(ie){const Z=2*Math.PI/ie;return function(ee,ae){if(ae)return ee;if(ee!==void 0)return ee=Math.floor(ee/Z+.5)*Z,ee}}function createSnapToZero(ie){return ie=ie||toRadians(5),function(Z,ee){if(ee)return Z;if(Z!==void 0)return Math.abs(Z)<=ie?0:Z}}function easeIn(ie){return Math.pow(ie,3)}function easeOut(ie){return 1-easeIn(1-ie)}function inAndOut(ie){return 3*ie*ie-2*ie*ie*ie}function linear(ie){return ie}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(Z){super(),this.on,this.once,this.un,Z=Object.assign({},Z),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(Z.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,Z.projection&&disableCoordinateWarning(),Z.center&&(Z.center=fromUserCoordinate(Z.center,this.projection_)),Z.extent&&(Z.extent=fromUserExtent(Z.extent,this.projection_)),this.applyOptions_(Z)}applyOptions_(Z){const ee=Object.assign({},Z);for(const Qe in ViewProperty)delete ee[Qe];this.setProperties(ee,!0);const ae=createResolutionConstraint(Z);this.maxResolution_=ae.maxResolution,this.minResolution_=ae.minResolution,this.zoomFactor_=ae.zoomFactor,this.resolutions_=Z.resolutions,this.padding_=Z.padding,this.minZoom_=ae.minZoom;const ye=createCenterConstraint(Z),ve=ae.constraint,be=createRotationConstraint(Z);this.constraints_={center:ye,resolution:ve,rotation:be},this.setRotation(Z.rotation!==void 0?Z.rotation:0),this.setCenterInternal(Z.center!==void 0?Z.center:null),Z.resolution!==void 0?this.setResolution(Z.resolution):Z.zoom!==void 0&&this.setZoom(Z.zoom)}get padding(){return this.padding_}set padding(Z){let ee=this.padding_;this.padding_=Z;const ae=this.getCenterInternal();if(ae){const ye=Z||[0,0,0,0];ee=ee||[0,0,0,0];const ve=this.getResolution(),be=ve/2*(ye[3]-ee[3]+ee[1]-ye[1]),Qe=ve/2*(ye[0]-ee[0]+ee[2]-ye[2]);this.setCenterInternal([ae[0]+be,ae[1]-Qe])}}getUpdatedOptions_(Z){const ee=this.getProperties();return ee.resolution!==void 0?ee.resolution=this.getResolution():ee.zoom=this.getZoom(),ee.center=this.getCenterInternal(),ee.rotation=this.getRotation(),Object.assign({},ee,Z)}animate(Z){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const ee=new Array(arguments.length);for(let ae=0;ae<ee.length;++ae){let ye=arguments[ae];ye.center&&(ye=Object.assign({},ye),ye.center=fromUserCoordinate(ye.center,this.getProjection())),ye.anchor&&(ye=Object.assign({},ye),ye.anchor=fromUserCoordinate(ye.anchor,this.getProjection())),ee[ae]=ye}this.animateInternal.apply(this,ee)}animateInternal(Z){let ee=arguments.length,ae;ee>1&&typeof arguments[ee-1]=="function"&&(ae=arguments[ee-1],--ee);let ye=0;for(;ye<ee&&!this.isDef();++ye){const tt=arguments[ye];tt.center&&this.setCenterInternal(tt.center),tt.zoom!==void 0?this.setZoom(tt.zoom):tt.resolution&&this.setResolution(tt.resolution),tt.rotation!==void 0&&this.setRotation(tt.rotation)}if(ye===ee){ae&&animationCallback(ae,!0);return}let ve=Date.now(),be=this.targetCenter_.slice(),Qe=this.targetResolution_,Xe=this.targetRotation_;const Je=[];for(;ye<ee;++ye){const tt=arguments[ye],it={start:ve,complete:!1,anchor:tt.anchor,duration:tt.duration!==void 0?tt.duration:1e3,easing:tt.easing||inAndOut,callback:ae};if(tt.center&&(it.sourceCenter=be,it.targetCenter=tt.center.slice(),be=it.targetCenter),tt.zoom!==void 0?(it.sourceResolution=Qe,it.targetResolution=this.getResolutionForZoom(tt.zoom),Qe=it.targetResolution):tt.resolution&&(it.sourceResolution=Qe,it.targetResolution=tt.resolution,Qe=it.targetResolution),tt.rotation!==void 0){it.sourceRotation=Xe;const st=modulo(tt.rotation-Xe+Math.PI,2*Math.PI)-Math.PI;it.targetRotation=Xe+st,Xe=it.targetRotation}isNoopAnimation(it)?it.complete=!0:ve+=it.duration,Je.push(it)}this.animations_.push(Je),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let Z;for(let ee=0,ae=this.animations_.length;ee<ae;++ee){const ye=this.animations_[ee];if(ye[0].callback&&animationCallback(ye[0].callback,!1),!Z)for(let ve=0,be=ye.length;ve<be;++ve){const Qe=ye[ve];if(!Qe.complete){Z=Qe.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=Z,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const Z=Date.now();let ee=!1;for(let ae=this.animations_.length-1;ae>=0;--ae){const ye=this.animations_[ae];let ve=!0;for(let be=0,Qe=ye.length;be<Qe;++be){const Xe=ye[be];if(Xe.complete)continue;const Je=Z-Xe.start;let tt=Xe.duration>0?Je/Xe.duration:1;tt>=1?(Xe.complete=!0,tt=1):ve=!1;const it=Xe.easing(tt);if(Xe.sourceCenter){const st=Xe.sourceCenter[0],lt=Xe.sourceCenter[1],ct=Xe.targetCenter[0],gt=Xe.targetCenter[1];this.nextCenter_=Xe.targetCenter;const ut=st+it*(ct-st),mt=lt+it*(gt-lt);this.targetCenter_=[ut,mt]}if(Xe.sourceResolution&&Xe.targetResolution){const st=it===1?Xe.targetResolution:Xe.sourceResolution+it*(Xe.targetResolution-Xe.sourceResolution);if(Xe.anchor){const lt=this.getViewportSize_(this.getRotation()),ct=this.constraints_.resolution(st,0,lt,!0);this.targetCenter_=this.calculateCenterZoom(ct,Xe.anchor)}this.nextResolution_=Xe.targetResolution,this.targetResolution_=st,this.applyTargetState_(!0)}if(Xe.sourceRotation!==void 0&&Xe.targetRotation!==void 0){const st=it===1?modulo(Xe.targetRotation+Math.PI,2*Math.PI)-Math.PI:Xe.sourceRotation+it*(Xe.targetRotation-Xe.sourceRotation);if(Xe.anchor){const lt=this.constraints_.rotation(st,!0);this.targetCenter_=this.calculateCenterRotate(lt,Xe.anchor)}this.nextRotation_=Xe.targetRotation,this.targetRotation_=st}if(this.applyTargetState_(!0),ee=!0,!Xe.complete)break}if(ve){this.animations_[ae]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const be=ye[0].callback;be&&animationCallback(be,!0)}}this.animations_=this.animations_.filter(Boolean),ee&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(Z,ee){let ae;const ye=this.getCenterInternal();return ye!==void 0&&(ae=[ye[0]-ee[0],ye[1]-ee[1]],rotate$2(ae,Z-this.getRotation()),add(ae,ee)),ae}calculateCenterZoom(Z,ee){let ae;const ye=this.getCenterInternal(),ve=this.getResolution();if(ye!==void 0&&ve!==void 0){const be=ee[0]-Z*(ee[0]-ye[0])/ve,Qe=ee[1]-Z*(ee[1]-ye[1])/ve;ae=[be,Qe]}return ae}getViewportSize_(Z){const ee=this.viewportSize_;if(Z){const ae=ee[0],ye=ee[1];return[Math.abs(ae*Math.cos(Z))+Math.abs(ye*Math.sin(Z)),Math.abs(ae*Math.sin(Z))+Math.abs(ye*Math.cos(Z))]}return ee}setViewportSize(Z){this.viewportSize_=Array.isArray(Z)?Z.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const Z=this.getCenterInternal();return Z&&toUserCoordinate(Z,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(Z){return Z!==void 0?(Z[0]=this.hints_[0],Z[1]=this.hints_[1],Z):this.hints_.slice()}calculateExtent(Z){const ee=this.calculateExtentInternal(Z);return toUserExtent(ee,this.getProjection())}calculateExtentInternal(Z){Z=Z||this.getViewportSizeMinusPadding_();const ee=this.getCenterInternal();assert(ee,"The view center is not defined");const ae=this.getResolution();assert(ae!==void 0,"The view resolution is not defined");const ye=this.getRotation();return assert(ye!==void 0,"The view rotation is not defined"),getForViewAndSize(ee,ae,ye,Z)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(Z){this.applyOptions_(this.getUpdatedOptions_({maxZoom:Z}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(Z){this.applyOptions_(this.getUpdatedOptions_({minZoom:Z}))}setConstrainResolution(Z){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:Z}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(Z,ee){return this.getResolutionForExtentInternal(fromUserExtent(Z,this.getProjection()),ee)}getResolutionForExtentInternal(Z,ee){ee=ee||this.getViewportSizeMinusPadding_();const ae=getWidth(Z)/ee[0],ye=getHeight(Z)/ee[1];return Math.max(ae,ye)}getResolutionForValueFunction(Z){Z=Z||2;const ee=this.getConstrainedResolution(this.maxResolution_),ae=this.minResolution_,ye=Math.log(ee/ae)/Math.log(Z);return function(ve){return ee/Math.pow(Z,ve*ye)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(Z){const ee=Math.log(Z||2),ae=this.getConstrainedResolution(this.maxResolution_),ye=this.minResolution_,ve=Math.log(ae/ye)/ee;return function(be){return Math.log(ae/be)/ee/ve}}getViewportSizeMinusPadding_(Z){let ee=this.getViewportSize_(Z);const ae=this.padding_;return ae&&(ee=[ee[0]-ae[1]-ae[3],ee[1]-ae[0]-ae[2]]),ee}getState(){const Z=this.getProjection(),ee=this.getResolution(),ae=this.getRotation();let ye=this.getCenterInternal();const ve=this.padding_;if(ve){const be=this.getViewportSizeMinusPadding_();ye=calculateCenterOn(ye,this.getViewportSize_(),[be[0]/2+ve[3],be[1]/2+ve[0]],ee,ae)}return{center:ye.slice(0),projection:Z!==void 0?Z:null,resolution:ee,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:ae,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let Z;const ee=this.getResolution();return ee!==void 0&&(Z=this.getZoomForResolution(ee)),Z}getZoomForResolution(Z){let ee=this.minZoom_||0,ae,ye;if(this.resolutions_){const ve=linearFindNearest(this.resolutions_,Z,1);ee=ve,ae=this.resolutions_[ve],ve==this.resolutions_.length-1?ye=2:ye=ae/this.resolutions_[ve+1]}else ae=this.maxResolution_,ye=this.zoomFactor_;return ee+Math.log(ae/Z)/Math.log(ye)}getResolutionForZoom(Z){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const ee=clamp$1(Math.floor(Z),0,this.resolutions_.length-2),ae=this.resolutions_[ee]/this.resolutions_[ee+1];return this.resolutions_[ee]/Math.pow(ae,clamp$1(Z-ee,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,Z-this.minZoom_)}fit(Z,ee){let ae;if(assert(Array.isArray(Z)||typeof Z.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(Z)){assert(!isEmpty(Z),"Cannot fit empty extent provided as `geometry`");const ye=fromUserExtent(Z,this.getProjection());ae=fromExtent(ye)}else if(Z.getType()==="Circle"){const ye=fromUserExtent(Z.getExtent(),this.getProjection());ae=fromExtent(ye),ae.rotate(this.getRotation(),getCenter(ye))}else{const ye=getUserProjection();ye?ae=Z.clone().transform(ye,this.getProjection()):ae=Z}this.fitInternal(ae,ee)}rotatedExtentForGeometry(Z){const ee=this.getRotation(),ae=Math.cos(ee),ye=Math.sin(-ee),ve=Z.getFlatCoordinates(),be=Z.getStride();let Qe=1/0,Xe=1/0,Je=-1/0,tt=-1/0;for(let it=0,st=ve.length;it<st;it+=be){const lt=ve[it]*ae-ve[it+1]*ye,ct=ve[it]*ye+ve[it+1]*ae;Qe=Math.min(Qe,lt),Xe=Math.min(Xe,ct),Je=Math.max(Je,lt),tt=Math.max(tt,ct)}return[Qe,Xe,Je,tt]}fitInternal(Z,ee){ee=ee||{};let ae=ee.size;ae||(ae=this.getViewportSizeMinusPadding_());const ye=ee.padding!==void 0?ee.padding:[0,0,0,0],ve=ee.nearest!==void 0?ee.nearest:!1;let be;ee.minResolution!==void 0?be=ee.minResolution:ee.maxZoom!==void 0?be=this.getResolutionForZoom(ee.maxZoom):be=0;const Qe=this.rotatedExtentForGeometry(Z);let Xe=this.getResolutionForExtentInternal(Qe,[ae[0]-ye[1]-ye[3],ae[1]-ye[0]-ye[2]]);Xe=isNaN(Xe)?be:Math.max(Xe,be),Xe=this.getConstrainedResolution(Xe,ve?0:1);const Je=this.getRotation(),tt=Math.sin(Je),it=Math.cos(Je),st=getCenter(Qe);st[0]+=(ye[1]-ye[3])/2*Xe,st[1]+=(ye[0]-ye[2])/2*Xe;const lt=st[0]*it-st[1]*tt,ct=st[1]*it+st[0]*tt,gt=this.getConstrainedCenter([lt,ct],Xe),ut=ee.callback?ee.callback:VOID;ee.duration!==void 0?this.animateInternal({resolution:Xe,center:gt,duration:ee.duration,easing:ee.easing},ut):(this.targetResolution_=Xe,this.targetCenter_=gt,this.applyTargetState_(!1,!0),animationCallback(ut,!0))}centerOn(Z,ee,ae){this.centerOnInternal(fromUserCoordinate(Z,this.getProjection()),ee,ae)}centerOnInternal(Z,ee,ae){this.setCenterInternal(calculateCenterOn(Z,ee,ae,this.getResolution(),this.getRotation()))}calculateCenterShift(Z,ee,ae,ye){let ve;const be=this.padding_;if(be&&Z){const Qe=this.getViewportSizeMinusPadding_(-ae),Xe=calculateCenterOn(Z,ye,[Qe[0]/2+be[3],Qe[1]/2+be[0]],ee,ae);ve=[Z[0]-Xe[0],Z[1]-Xe[1]]}return ve}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(Z){const ee=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([ee[0]+Z[0],ee[1]+Z[1]])}adjustCenterInternal(Z){const ee=this.targetCenter_;this.setCenterInternal([ee[0]+Z[0],ee[1]+Z[1]])}adjustResolution(Z,ee){ee=ee&&fromUserCoordinate(ee,this.getProjection()),this.adjustResolutionInternal(Z,ee)}adjustResolutionInternal(Z,ee){const ae=this.getAnimating()||this.getInteracting(),ye=this.getViewportSize_(this.getRotation()),ve=this.constraints_.resolution(this.targetResolution_*Z,0,ye,ae);ee&&(this.targetCenter_=this.calculateCenterZoom(ve,ee)),this.targetResolution_*=Z,this.applyTargetState_()}adjustZoom(Z,ee){this.adjustResolution(Math.pow(this.zoomFactor_,-Z),ee)}adjustRotation(Z,ee){ee&&(ee=fromUserCoordinate(ee,this.getProjection())),this.adjustRotationInternal(Z,ee)}adjustRotationInternal(Z,ee){const ae=this.getAnimating()||this.getInteracting(),ye=this.constraints_.rotation(this.targetRotation_+Z,ae);ee&&(this.targetCenter_=this.calculateCenterRotate(ye,ee)),this.targetRotation_+=Z,this.applyTargetState_()}setCenter(Z){this.setCenterInternal(Z&&fromUserCoordinate(Z,this.getProjection()))}setCenterInternal(Z){this.targetCenter_=Z,this.applyTargetState_()}setHint(Z,ee){return this.hints_[Z]+=ee,this.changed(),this.hints_[Z]}setResolution(Z){this.targetResolution_=Z,this.applyTargetState_()}setRotation(Z){this.targetRotation_=Z,this.applyTargetState_()}setZoom(Z){this.setResolution(this.getResolutionForZoom(Z))}applyTargetState_(Z,ee){const ae=this.getAnimating()||this.getInteracting()||ee,ye=this.constraints_.rotation(this.targetRotation_,ae),ve=this.getViewportSize_(ye),be=this.constraints_.resolution(this.targetResolution_,0,ve,ae),Qe=this.constraints_.center(this.targetCenter_,be,ve,ae,this.calculateCenterShift(this.targetCenter_,be,ye,ve));this.get(ViewProperty.ROTATION)!==ye&&this.set(ViewProperty.ROTATION,ye),this.get(ViewProperty.RESOLUTION)!==be&&(this.set(ViewProperty.RESOLUTION,be),this.set("zoom",this.getZoom(),!0)),(!Qe||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),Qe))&&this.set(ViewProperty.CENTER,Qe),this.getAnimating()&&!Z&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(Z,ee,ae){Z=Z!==void 0?Z:200;const ye=ee||0,ve=this.constraints_.rotation(this.targetRotation_),be=this.getViewportSize_(ve),Qe=this.constraints_.resolution(this.targetResolution_,ye,be),Xe=this.constraints_.center(this.targetCenter_,Qe,be,!1,this.calculateCenterShift(this.targetCenter_,Qe,ve,be));if(Z===0&&!this.cancelAnchor_){this.targetResolution_=Qe,this.targetRotation_=ve,this.targetCenter_=Xe,this.applyTargetState_();return}ae=ae||(Z===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==Qe||this.getRotation()!==ve||!this.getCenterInternal()||!equals(this.getCenterInternal(),Xe))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:ve,center:Xe,resolution:Qe,duration:Z,easing:easeOut,anchor:ae}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(Z,ee,ae){ae=ae&&fromUserCoordinate(ae,this.getProjection()),this.endInteractionInternal(Z,ee,ae)}endInteractionInternal(Z,ee,ae){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(Z,ee,ae))}getConstrainedCenter(Z,ee){const ae=this.getViewportSize_(this.getRotation());return this.constraints_.center(Z,ee||this.getResolution(),ae)}getConstrainedZoom(Z,ee){const ae=this.getResolutionForZoom(Z);return this.getZoomForResolution(this.getConstrainedResolution(ae,ee))}getConstrainedResolution(Z,ee){ee=ee||0;const ae=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(Z,ee,ae)}}function animationCallback(ie,Z){setTimeout(function(){ie(Z)},0)}function createCenterConstraint(ie){if(ie.extent!==void 0){const ee=ie.smoothExtentConstraint!==void 0?ie.smoothExtentConstraint:!0;return createExtent(ie.extent,ie.constrainOnlyCenter,ee)}const Z=createProjection(ie.projection,"EPSG:3857");if(ie.multiWorld!==!0&&Z.isGlobal()){const ee=Z.getExtent().slice();return ee[0]=-1/0,ee[2]=1/0,createExtent(ee,!1,!1)}return none$1}function createResolutionConstraint(ie){let Z,ee,ae,be=ie.minZoom!==void 0?ie.minZoom:DEFAULT_MIN_ZOOM,Qe=ie.maxZoom!==void 0?ie.maxZoom:28;const Xe=ie.zoomFactor!==void 0?ie.zoomFactor:2,Je=ie.multiWorld!==void 0?ie.multiWorld:!1,tt=ie.smoothResolutionConstraint!==void 0?ie.smoothResolutionConstraint:!0,it=ie.showFullExtent!==void 0?ie.showFullExtent:!1,st=createProjection(ie.projection,"EPSG:3857"),lt=st.getExtent();let ct=ie.constrainOnlyCenter,gt=ie.extent;if(!Je&&!gt&&st.isGlobal()&&(ct=!1,gt=lt),ie.resolutions!==void 0){const ut=ie.resolutions;ee=ut[be],ae=ut[Qe]!==void 0?ut[Qe]:ut[ut.length-1],ie.constrainResolution?Z=createSnapToResolutions(ut,tt,!ct&&gt,it):Z=createMinMaxResolution(ee,ae,tt,!ct&&gt,it)}else{const mt=(lt?Math.max(getWidth(lt),getHeight(lt)):360*METERS_PER_UNIT$1.degrees/st.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),ei=mt/Math.pow(2,28-DEFAULT_MIN_ZOOM);ee=ie.maxResolution,ee!==void 0?be=0:ee=mt/Math.pow(Xe,be),ae=ie.minResolution,ae===void 0&&(ie.maxZoom!==void 0?ie.maxResolution!==void 0?ae=ee/Math.pow(Xe,Qe):ae=mt/Math.pow(Xe,Qe):ae=ei),Qe=be+Math.floor(Math.log(ee/ae)/Math.log(Xe)),ae=ee/Math.pow(Xe,Qe-be),ie.constrainResolution?Z=createSnapToPower(Xe,ee,ae,tt,!ct&&gt,it):Z=createMinMaxResolution(ee,ae,tt,!ct&&gt,it)}return{constraint:Z,maxResolution:ee,minResolution:ae,minZoom:be,zoomFactor:Xe}}function createRotationConstraint(ie){if(ie.enableRotation!==void 0?ie.enableRotation:!0){const ee=ie.constrainRotation;return ee===void 0||ee===!0?createSnapToZero():ee===!1?none:typeof ee=="number"?createSnapToN(ee):none}return disable}function isNoopAnimation(ie){return!(ie.sourceCenter&&ie.targetCenter&&!equals(ie.sourceCenter,ie.targetCenter)||ie.sourceResolution!==ie.targetResolution||ie.sourceRotation!==ie.targetRotation)}function calculateCenterOn(ie,Z,ee,ae,ye){const ve=Math.cos(-ye);let be=Math.sin(-ye),Qe=ie[0]*ve-ie[1]*be,Xe=ie[1]*ve+ie[0]*be;Qe+=(Z[0]/2-ee[0])*ae,Xe+=(ee[1]-Z[1]/2)*ae,be=-be;const Je=Qe*ve-Xe*be,tt=Xe*ve+Qe*be;return[Je,tt]}class Layer extends BaseLayer{constructor(Z){const ee=Object.assign({},Z);delete ee.source,super(ee),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,Z.render&&(this.render=Z.render),Z.map&&this.setMap(Z.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const ae=Z.source?Z.source:null;this.setSource(ae)}getLayersArray(Z){return Z=Z||[],Z.push(this),Z}getLayerStatesArray(Z){return Z=Z||[],Z.push(this.getLayerState()),Z}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const Z=this.getSource();return Z?Z.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const Z=this.getSource();Z&&(this.sourceChangeKey_=listen(Z,EventType.CHANGE,this.handleSourceChange_,this),Z.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(Z){return this.renderer_?this.renderer_.getFeatures(Z):Promise.resolve([])}getData(Z){return!this.renderer_||!this.rendered?null:this.renderer_.getData(Z)}isVisible(Z){let ee;const ae=this.getMapInternal();!Z&&ae&&(Z=ae.getView()),Z instanceof View?ee={viewState:Z.getState(),extent:Z.calculateExtent()}:ee=Z,!ee.layerStatesArray&&ae&&(ee.layerStatesArray=ae.getLayerGroup().getLayerStatesArray());let ye;ee.layerStatesArray?ye=ee.layerStatesArray.find(be=>be.layer===this):ye=this.getLayerState();const ve=this.getExtent();return inView(ye,ee.viewState)&&(!ve||intersects$1(ve,ee.extent))}getAttributions(Z){if(!this.isVisible(Z))return[];let ee;const ae=this.getSource();if(ae&&(ee=ae.getAttributions()),!ee)return[];const ye=Z instanceof View?Z.getViewStateAndExtent():Z;let ve=ee(ye);return Array.isArray(ve)||(ve=[ve]),ve}render(Z,ee){const ae=this.getRenderer();return ae.prepareFrame(Z)?(this.rendered=!0,ae.renderFrame(Z,ee)):null}unrender(){this.rendered=!1}setMapInternal(Z){Z||this.unrender(),this.set(LayerProperty.MAP,Z)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(Z){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),Z||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),Z&&(this.mapPrecomposeKey_=listen(Z,RenderEventType.PRECOMPOSE,function(ee){const ye=ee.frameState.layerStatesArray,ve=this.getLayerState(!1);assert(!ye.some(function(be){return be.layer===ve.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),ye.push(ve)},this),this.mapRenderKey_=listen(this,EventType.CHANGE,Z.render,Z),this.changed())}setSource(Z){this.set(LayerProperty.SOURCE,Z)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function inView(ie,Z){if(!ie.visible)return!1;const ee=Z.resolution;if(ee<ie.minResolution||ee>=ie.maxResolution)return!1;const ae=Z.zoom;return ae>ie.minZoom&&ae<=ie.maxZoom}function quickselect(ie,Z,ee,ae,ye){quickselectStep(ie,Z,ee||0,ae||ie.length-1,ye||defaultCompare)}function quickselectStep(ie,Z,ee,ae,ye){for(;ae>ee;){if(ae-ee>600){var ve=ae-ee+1,be=Z-ee+1,Qe=Math.log(ve),Xe=.5*Math.exp(2*Qe/3),Je=.5*Math.sqrt(Qe*Xe*(ve-Xe)/ve)*(be-ve/2<0?-1:1),tt=Math.max(ee,Math.floor(Z-be*Xe/ve+Je)),it=Math.min(ae,Math.floor(Z+(ve-be)*Xe/ve+Je));quickselectStep(ie,Z,tt,it,ye)}var st=ie[Z],lt=ee,ct=ae;for(swap(ie,ee,Z),ye(ie[ae],st)>0&&swap(ie,ee,ae);lt<ct;){for(swap(ie,lt,ct),lt++,ct--;ye(ie[lt],st)<0;)lt++;for(;ye(ie[ct],st)>0;)ct--}ye(ie[ee],st)===0?swap(ie,ee,ct):(ct++,swap(ie,ct,ae)),ct<=Z&&(ee=ct+1),Z<=ct&&(ae=ct-1)}}function swap(ie,Z,ee){var ae=ie[Z];ie[Z]=ie[ee],ie[ee]=ae}function defaultCompare(ie,Z){return ie<Z?-1:ie>Z?1:0}class RBush{constructor(Z=9){this._maxEntries=Math.max(4,Z),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(Z){let ee=this.data;const ae=[];if(!intersects(Z,ee))return ae;const ye=this.toBBox,ve=[];for(;ee;){for(let be=0;be<ee.children.length;be++){const Qe=ee.children[be],Xe=ee.leaf?ye(Qe):Qe;intersects(Z,Xe)&&(ee.leaf?ae.push(Qe):contains(Z,Xe)?this._all(Qe,ae):ve.push(Qe))}ee=ve.pop()}return ae}collides(Z){let ee=this.data;if(!intersects(Z,ee))return!1;const ae=[];for(;ee;){for(let ye=0;ye<ee.children.length;ye++){const ve=ee.children[ye],be=ee.leaf?this.toBBox(ve):ve;if(intersects(Z,be)){if(ee.leaf||contains(Z,be))return!0;ae.push(ve)}}ee=ae.pop()}return!1}load(Z){if(!(Z&&Z.length))return this;if(Z.length<this._minEntries){for(let ae=0;ae<Z.length;ae++)this.insert(Z[ae]);return this}let ee=this._build(Z.slice(),0,Z.length-1,0);if(!this.data.children.length)this.data=ee;else if(this.data.height===ee.height)this._splitRoot(this.data,ee);else{if(this.data.height<ee.height){const ae=this.data;this.data=ee,ee=ae}this._insert(ee,this.data.height-ee.height-1,!0)}return this}insert(Z){return Z&&this._insert(Z,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(Z,ee){if(!Z)return this;let ae=this.data;const ye=this.toBBox(Z),ve=[],be=[];let Qe,Xe,Je;for(;ae||ve.length;){if(ae||(ae=ve.pop(),Xe=ve[ve.length-1],Qe=be.pop(),Je=!0),ae.leaf){const tt=findItem(Z,ae.children,ee);if(tt!==-1)return ae.children.splice(tt,1),ve.push(ae),this._condense(ve),this}!Je&&!ae.leaf&&contains(ae,ye)?(ve.push(ae),be.push(Qe),Qe=0,Xe=ae,ae=ae.children[0]):Xe?(Qe++,ae=Xe.children[Qe],Je=!1):ae=null}return this}toBBox(Z){return Z}compareMinX(Z,ee){return Z.minX-ee.minX}compareMinY(Z,ee){return Z.minY-ee.minY}toJSON(){return this.data}fromJSON(Z){return this.data=Z,this}_all(Z,ee){const ae=[];for(;Z;)Z.leaf?ee.push(...Z.children):ae.push(...Z.children),Z=ae.pop();return ee}_build(Z,ee,ae,ye){const ve=ae-ee+1;let be=this._maxEntries,Qe;if(ve<=be)return Qe=createNode(Z.slice(ee,ae+1)),calcBBox(Qe,this.toBBox),Qe;ye||(ye=Math.ceil(Math.log(ve)/Math.log(be)),be=Math.ceil(ve/Math.pow(be,ye-1))),Qe=createNode([]),Qe.leaf=!1,Qe.height=ye;const Xe=Math.ceil(ve/be),Je=Xe*Math.ceil(Math.sqrt(be));multiSelect(Z,ee,ae,Je,this.compareMinX);for(let tt=ee;tt<=ae;tt+=Je){const it=Math.min(tt+Je-1,ae);multiSelect(Z,tt,it,Xe,this.compareMinY);for(let st=tt;st<=it;st+=Xe){const lt=Math.min(st+Xe-1,it);Qe.children.push(this._build(Z,st,lt,ye-1))}}return calcBBox(Qe,this.toBBox),Qe}_chooseSubtree(Z,ee,ae,ye){for(;ye.push(ee),!(ee.leaf||ye.length-1===ae);){let ve=1/0,be=1/0,Qe;for(let Xe=0;Xe<ee.children.length;Xe++){const Je=ee.children[Xe],tt=bboxArea(Je),it=enlargedArea(Z,Je)-tt;it<be?(be=it,ve=tt<ve?tt:ve,Qe=Je):it===be&&tt<ve&&(ve=tt,Qe=Je)}ee=Qe||ee.children[0]}return ee}_insert(Z,ee,ae){const ye=ae?Z:this.toBBox(Z),ve=[],be=this._chooseSubtree(ye,this.data,ee,ve);for(be.children.push(Z),extend(be,ye);ee>=0&&ve[ee].children.length>this._maxEntries;)this._split(ve,ee),ee--;this._adjustParentBBoxes(ye,ve,ee)}_split(Z,ee){const ae=Z[ee],ye=ae.children.length,ve=this._minEntries;this._chooseSplitAxis(ae,ve,ye);const be=this._chooseSplitIndex(ae,ve,ye),Qe=createNode(ae.children.splice(be,ae.children.length-be));Qe.height=ae.height,Qe.leaf=ae.leaf,calcBBox(ae,this.toBBox),calcBBox(Qe,this.toBBox),ee?Z[ee-1].children.push(Qe):this._splitRoot(ae,Qe)}_splitRoot(Z,ee){this.data=createNode([Z,ee]),this.data.height=Z.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(Z,ee,ae){let ye,ve=1/0,be=1/0;for(let Qe=ee;Qe<=ae-ee;Qe++){const Xe=distBBox(Z,0,Qe,this.toBBox),Je=distBBox(Z,Qe,ae,this.toBBox),tt=intersectionArea(Xe,Je),it=bboxArea(Xe)+bboxArea(Je);tt<ve?(ve=tt,ye=Qe,be=it<be?it:be):tt===ve&&it<be&&(be=it,ye=Qe)}return ye||ae-ee}_chooseSplitAxis(Z,ee,ae){const ye=Z.leaf?this.compareMinX:compareNodeMinX,ve=Z.leaf?this.compareMinY:compareNodeMinY,be=this._allDistMargin(Z,ee,ae,ye),Qe=this._allDistMargin(Z,ee,ae,ve);be<Qe&&Z.children.sort(ye)}_allDistMargin(Z,ee,ae,ye){Z.children.sort(ye);const ve=this.toBBox,be=distBBox(Z,0,ee,ve),Qe=distBBox(Z,ae-ee,ae,ve);let Xe=bboxMargin(be)+bboxMargin(Qe);for(let Je=ee;Je<ae-ee;Je++){const tt=Z.children[Je];extend(be,Z.leaf?ve(tt):tt),Xe+=bboxMargin(be)}for(let Je=ae-ee-1;Je>=ee;Je--){const tt=Z.children[Je];extend(Qe,Z.leaf?ve(tt):tt),Xe+=bboxMargin(Qe)}return Xe}_adjustParentBBoxes(Z,ee,ae){for(let ye=ae;ye>=0;ye--)extend(ee[ye],Z)}_condense(Z){for(let ee=Z.length-1,ae;ee>=0;ee--)Z[ee].children.length===0?ee>0?(ae=Z[ee-1].children,ae.splice(ae.indexOf(Z[ee]),1)):this.clear():calcBBox(Z[ee],this.toBBox)}}function findItem(ie,Z,ee){if(!ee)return Z.indexOf(ie);for(let ae=0;ae<Z.length;ae++)if(ee(ie,Z[ae]))return ae;return-1}function calcBBox(ie,Z){distBBox(ie,0,ie.children.length,Z,ie)}function distBBox(ie,Z,ee,ae,ye){ye||(ye=createNode(null)),ye.minX=1/0,ye.minY=1/0,ye.maxX=-1/0,ye.maxY=-1/0;for(let ve=Z;ve<ee;ve++){const be=ie.children[ve];extend(ye,ie.leaf?ae(be):be)}return ye}function extend(ie,Z){return ie.minX=Math.min(ie.minX,Z.minX),ie.minY=Math.min(ie.minY,Z.minY),ie.maxX=Math.max(ie.maxX,Z.maxX),ie.maxY=Math.max(ie.maxY,Z.maxY),ie}function compareNodeMinX(ie,Z){return ie.minX-Z.minX}function compareNodeMinY(ie,Z){return ie.minY-Z.minY}function bboxArea(ie){return(ie.maxX-ie.minX)*(ie.maxY-ie.minY)}function bboxMargin(ie){return ie.maxX-ie.minX+(ie.maxY-ie.minY)}function enlargedArea(ie,Z){return(Math.max(Z.maxX,ie.maxX)-Math.min(Z.minX,ie.minX))*(Math.max(Z.maxY,ie.maxY)-Math.min(Z.minY,ie.minY))}function intersectionArea(ie,Z){const ee=Math.max(ie.minX,Z.minX),ae=Math.max(ie.minY,Z.minY),ye=Math.min(ie.maxX,Z.maxX),ve=Math.min(ie.maxY,Z.maxY);return Math.max(0,ye-ee)*Math.max(0,ve-ae)}function contains(ie,Z){return ie.minX<=Z.minX&&ie.minY<=Z.minY&&Z.maxX<=ie.maxX&&Z.maxY<=ie.maxY}function intersects(ie,Z){return Z.minX<=ie.maxX&&Z.minY<=ie.maxY&&Z.maxX>=ie.minX&&Z.maxY>=ie.minY}function createNode(ie){return{children:ie,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(ie,Z,ee,ae,ye){const ve=[Z,ee];for(;ve.length;){if(ee=ve.pop(),Z=ve.pop(),ee-Z<=ae)continue;const be=Z+Math.ceil((ee-Z)/ae/2)*ae;quickselect(ie,be,Z,ee,ye),ve.push(Z,be,be,ee)}}function listenImage(ie,Z,ee){const ae=ie;let ye=!0,ve=!1,be=!1;const Qe=[listenOnce(ae,EventType.LOAD,function(){be=!0,ve||Z()})];return ae.src&&IMAGE_DECODE?(ve=!0,ae.decode().then(function(){ye&&Z()}).catch(function(Xe){ye&&(be?Z():ee())})):Qe.push(listenOnce(ae,EventType.ERROR,ee)),function(){ye=!1,Qe.forEach(unlistenByKey)}}function load(ie,Z){return new Promise((ee,ae)=>{function ye(){be(),ee(ie)}function ve(){be(),ae(new Error("Image load error"))}function be(){ie.removeEventListener("load",ye),ie.removeEventListener("error",ve)}ie.addEventListener("load",ye),ie.addEventListener("error",ve),Z&&(ie.src=Z)})}function decodeFallback(ie,Z){return Z&&(ie.src=Z),IMAGE_DECODE?new Promise((ee,ae)=>ie.decode().then(()=>ee(ie),ae)):load(ie)}class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let Z=0;for(const ee in this.cache_){const ae=this.cache_[ee];!(Z++&3)&&!ae.hasListener()&&(delete this.cache_[ee],--this.cacheSize_)}}}get(Z,ee,ae){const ye=getKey$1(Z,ee,ae);return ye in this.cache_?this.cache_[ye]:null}set(Z,ee,ae,ye){const ve=getKey$1(Z,ee,ae);this.cache_[ve]=ye,++this.cacheSize_}setSize(Z){this.maxCacheSize_=Z,this.expire()}}function getKey$1(ie,Z,ee){const ae=ee?asString(ee):"null";return Z+":"+ie+":"+ae}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(Z,ee,ae,ye,ve){super(),this.hitDetectionImage_=null,this.image_=Z,this.crossOrigin_=ae,this.canvas_={},this.color_=ve,this.imageState_=ye===void 0?ImageState.IDLE:ye,this.size_=Z&&Z.width&&Z.height?[Z.width,Z.height]:null,this.src_=ee,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(Z){return this.image_||this.initializeImage_(),this.replaceColor_(Z),this.canvas_[Z]?this.canvas_[Z]:this.image_}getPixelRatio(Z){return this.replaceColor_(Z),this.canvas_[Z]?Z:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const Z=this.size_[0],ee=this.size_[1],ae=createCanvasContext2D(Z,ee);ae.fillRect(0,0,Z,ee),this.hitDetectionImage_=ae.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(Z=>{this.image_=Z,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(Z){if(!this.color_||this.canvas_[Z]||this.imageState_!==ImageState.LOADED)return;const ee=this.image_,ae=document.createElement("canvas");ae.width=Math.ceil(ee.width*Z),ae.height=Math.ceil(ee.height*Z);const ye=ae.getContext("2d");ye.scale(Z,Z),ye.drawImage(ee,0,0),ye.globalCompositeOperation="multiply",ye.fillStyle=asString(this.color_),ye.fillRect(0,0,ae.width/Z,ae.height/Z),ye.globalCompositeOperation="destination-in",ye.drawImage(ee,0,0),this.canvas_[Z]=ae}}function get(ie,Z,ee,ae,ye){let ve=Z===void 0?void 0:shared.get(Z,ee,ye);return ve||(ve=new IconImage(ie,ie instanceof HTMLImageElement?ie.src||void 0:Z,ee,ae,ye),shared.set(Z,ee,ye,ve)),ve}function calculateScale(ie,Z,ee,ae){return ee!==void 0&&ae!==void 0?[ee/ie,ae/Z]:ee!==void 0?ee/ie:ae!==void 0?ae/Z:1}class Icon extends ImageStyle{constructor(Z){Z=Z||{};const ee=Z.opacity!==void 0?Z.opacity:1,ae=Z.rotation!==void 0?Z.rotation:0,ye=Z.scale!==void 0?Z.scale:1,ve=Z.rotateWithView!==void 0?Z.rotateWithView:!1;super({opacity:ee,rotation:ae,scale:ye,displacement:Z.displacement!==void 0?Z.displacement:[0,0],rotateWithView:ve,declutterMode:Z.declutterMode}),this.anchor_=Z.anchor!==void 0?Z.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=Z.anchorOrigin!==void 0?Z.anchorOrigin:"top-left",this.anchorXUnits_=Z.anchorXUnits!==void 0?Z.anchorXUnits:"fraction",this.anchorYUnits_=Z.anchorYUnits!==void 0?Z.anchorYUnits:"fraction",this.crossOrigin_=Z.crossOrigin!==void 0?Z.crossOrigin:null;const be=Z.img!==void 0?Z.img:null;let Qe=Z.src;assert(!(Qe!==void 0&&be),"`image` and `src` cannot be provided at the same time"),(Qe===void 0||Qe.length===0)&&be&&(Qe=be.src||getUid(be)),assert(Qe!==void 0&&Qe.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((Z.width!==void 0||Z.height!==void 0)&&Z.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let Xe;if(Z.src!==void 0?Xe=ImageState.IDLE:be!==void 0&&(be instanceof HTMLImageElement?be.complete?Xe=be.src?ImageState.LOADED:ImageState.IDLE:Xe=ImageState.LOADING:Xe=ImageState.LOADED),this.color_=Z.color!==void 0?asArray(Z.color):null,this.iconImage_=get(be,Qe,this.crossOrigin_,Xe,this.color_),this.offset_=Z.offset!==void 0?Z.offset:[0,0],this.offsetOrigin_=Z.offsetOrigin!==void 0?Z.offsetOrigin:"top-left",this.origin_=null,this.size_=Z.size!==void 0?Z.size:null,Z.width!==void 0||Z.height!==void 0){let Je,tt;if(Z.size)[Je,tt]=Z.size;else{const it=this.getImage(1);if(it.width&&it.height)Je=it.width,tt=it.height;else if(it instanceof HTMLImageElement){this.initialOptions_=Z;const st=()=>{if(this.unlistenImageChange(st),!this.initialOptions_)return;const lt=this.iconImage_.getSize();this.setScale(calculateScale(lt[0],lt[1],Z.width,Z.height))};this.listenImageChange(st);return}}Je!==void 0&&this.setScale(calculateScale(Je,tt,Z.width,Z.height))}}clone(){let Z,ee,ae;return this.initialOptions_?(ee=this.initialOptions_.width,ae=this.initialOptions_.height):(Z=this.getScale(),Z=Array.isArray(Z)?Z.slice():Z),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Z,width:ee,height:ae,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let Z=this.normalizedAnchor_;if(!Z){Z=this.anchor_;const ye=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!ye)return null;Z=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(Z[0]*=ye[0]),this.anchorYUnits_=="fraction"&&(Z[1]*=ye[1])}if(this.anchorOrigin_!="top-left"){if(!ye)return null;Z===this.anchor_&&(Z=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(Z[0]=-Z[0]+ye[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(Z[1]=-Z[1]+ye[1])}this.normalizedAnchor_=Z}const ee=this.getDisplacement(),ae=this.getScaleArray();return[Z[0]-ee[0]/ae[0],Z[1]+ee[1]/ae[1]]}setAnchor(Z){this.anchor_=Z,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(Z){return this.iconImage_.getImage(Z)}getPixelRatio(Z){return this.iconImage_.getPixelRatio(Z)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let Z=this.offset_;if(this.offsetOrigin_!="top-left"){const ee=this.getSize(),ae=this.iconImage_.getSize();if(!ee||!ae)return null;Z=Z.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(Z[0]=ae[0]-ee[0]-Z[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(Z[1]=ae[1]-ee[1]-Z[1])}return this.origin_=Z,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const Z=this.getScaleArray();if(this.size_)return this.size_[0]*Z[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*Z[0]}getHeight(){const Z=this.getScaleArray();if(this.size_)return this.size_[1]*Z[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*Z[1]}setScale(Z){delete this.initialOptions_,super.setScale(Z)}listenImageChange(Z){this.iconImage_.addEventListener(EventType.CHANGE,Z)}load(){this.iconImage_.load()}unlistenImageChange(Z){this.iconImage_.removeEventListener(EventType.CHANGE,Z)}}let numTypes=0;const BooleanType=1<<numTypes++,NumberType=1<<numTypes++,StringType=1<<numTypes++,ColorType=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType]:"boolean",[NumberType]:"number",[StringType]:"string",[ColorType]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function typeName(ie){const Z=[];for(const ee of namedTypes)includesType(ie,ee)&&Z.push(typeNames[ee]);return Z.length===0?"untyped":Z.length<3?Z.join(" or "):Z.slice(0,-1).join(", ")+", or "+Z[Z.length-1]}function includesType(ie,Z){return(ie&Z)===Z}function overlapsType(ie,Z){return!!(ie&Z)}class LiteralExpression{constructor(Z,ee){this.type=Z,this.value=ee}}class CallExpression{constructor(Z,ee,...ae){this.type=Z,this.operator=ee,this.args=ae}}function newParsingContext(){return{variables:new Set,properties:new Set}}function parse$9(ie,Z){switch(typeof ie){case"boolean":return new LiteralExpression(BooleanType,ie);case"number":return new LiteralExpression(NumberType,ie);case"string":return new LiteralExpression(StringType,ie)}if(!Array.isArray(ie))throw new Error("Expression must be an array or a primitive value");if(ie.length===0)throw new Error("Empty expression");if(typeof ie[0]=="string")return parseCallExpression(ie,Z);for(const ae of ie)if(typeof ae!="number")throw new Error("Expected an array of numbers");let ee=NumberArrayType;return(ie.length===3||ie.length===4)&&(ee|=ColorType),new LiteralExpression(ee,ie)}const Ops={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},parsers={[Ops.Number]:createParser(withArgs(1,1/0,AnyType),NumberType),[Ops.String]:createParser(withArgs(1,1/0,AnyType),StringType),[Ops.Get]:createParser(withGetArgs,AnyType),[Ops.Var]:createParser(withVarArgs,AnyType),[Ops.Resolution]:createParser(withNoArgs,NumberType),[Ops.Any]:createParser(withArgs(2,1/0,BooleanType),BooleanType),[Ops.All]:createParser(withArgs(2,1/0,BooleanType),BooleanType),[Ops.Not]:createParser(withArgs(1,1,BooleanType),BooleanType),[Ops.Equal]:createParser(withArgs(2,2,AnyType),BooleanType),[Ops.NotEqual]:createParser(withArgs(2,2,AnyType),BooleanType),[Ops.GreaterThan]:createParser(withArgs(2,2,AnyType),BooleanType),[Ops.GreaterThanOrEqualTo]:createParser(withArgs(2,2,AnyType),BooleanType),[Ops.LessThan]:createParser(withArgs(2,2,AnyType),BooleanType),[Ops.LessThanOrEqualTo]:createParser(withArgs(2,2,AnyType),BooleanType),[Ops.Multiply]:createParser(withArgs(2,1/0,NumberType),NumberType),[Ops.Divide]:createParser(withArgs(2,2,NumberType),NumberType),[Ops.Add]:createParser(withArgs(2,1/0,NumberType),NumberType),[Ops.Subtract]:createParser(withArgs(2,2,NumberType),NumberType),[Ops.Clamp]:createParser(withArgs(3,3,NumberType),NumberType),[Ops.Mod]:createParser(withArgs(2,2,NumberType),NumberType),[Ops.Pow]:createParser(withArgs(2,2,NumberType),NumberType),[Ops.Abs]:createParser(withArgs(1,1,NumberType),NumberType),[Ops.Floor]:createParser(withArgs(1,1,NumberType),NumberType),[Ops.Ceil]:createParser(withArgs(1,1,NumberType),NumberType),[Ops.Round]:createParser(withArgs(1,1,NumberType),NumberType),[Ops.Sin]:createParser(withArgs(1,1,NumberType),NumberType),[Ops.Cos]:createParser(withArgs(1,1,NumberType),NumberType),[Ops.Atan]:createParser(withArgs(1,2,NumberType),NumberType),[Ops.Sqrt]:createParser(withArgs(1,1,NumberType),NumberType),[Ops.Match]:createParser(withArgs(4,1/0,StringType|NumberType),AnyType)};function withGetArgs(ie,Z){if(ie.length!==2)throw new Error("Expected 1 argument for get operation");const ee=parse$9(ie[1],Z);if(!(ee instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if(typeof ee.value!="string")throw new Error("Expected a string argument for get operation");return Z.properties.add(ee.value),[ee]}function withVarArgs(ie,Z){if(ie.length!==2)throw new Error("Expected 1 argument for var operation");const ee=parse$9(ie[1],Z);if(!(ee instanceof LiteralExpression))throw new Error("Expected a literal argument for var operation");if(typeof ee.value!="string")throw new Error("Expected a string argument for get operation");return Z.variables.add(ee.value),[ee]}function withNoArgs(ie,Z){const ee=ie[0];if(ie.length!==1)throw new Error(`Expected no arguments for ${ee} operation`);return[]}function withArgs(ie,Z,ee){return function(ae,ye){const ve=ae[0],be=ae.length-1;if(ie===Z){if(be!==ie){const Xe=ie===1?"":"s";throw new Error(`Expected ${ie} argument${Xe} for operation ${ve}, got ${be}`)}}else if(be<ie||be>Z)throw new Error(`Expected ${ie} to ${Z} arguments for operation ${ve}, got ${be}`);const Qe=new Array(be);for(let Xe=0;Xe<be;++Xe){const Je=parse$9(ae[Xe+1],ye);if(!overlapsType(ee,Je.type)){const tt=typeName(ee),it=typeName(Je.type);throw new Error(`Unexpected type for argument ${Xe} of ${ve} operation : got ${tt} but expected ${it}`)}Qe[Xe]=Je}return Qe}}function createParser(ie,Z){return function(ee,ae){const ye=ee[0],ve=ie(ee,ae);return new CallExpression(Z,ye,...ve)}}function parseCallExpression(ie,Z){const ee=ie[0],ae=parsers[ee];if(!ae)throw new Error(`Unknown operator: ${ee}`);return ae(ie,Z)}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN}}function buildExpression(ie,Z,ee){const ae=parse$9(ie,ee);if(!overlapsType(Z,ae.type)){const ye=typeName(Z),ve=typeName(ae.type);throw new Error(`Expected expression to be of type ${ye}, got ${ve}`)}return compileExpression(ae)}function compileExpression(ie,Z){if(ie instanceof LiteralExpression)return function(){return ie.value};const ee=ie.operator;switch(ee){case Ops.Number:case Ops.String:return compileAssertionExpression(ie);case Ops.Get:case Ops.Var:return compileAccessorExpression(ie);case Ops.Resolution:return ae=>ae.resolution;case Ops.Any:case Ops.All:case Ops.Not:return compileLogicalExpression(ie);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(ie);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(ie);case Ops.Match:return compileMatchExpression(ie);default:throw new Error(`Unsupported operator ${ee}`)}}function compileAssertionExpression(ie,Z){const ee=ie.operator,ae=ie.args.length,ye=new Array(ae);for(let ve=0;ve<ae;++ve)ye[ve]=compileExpression(ie.args[ve]);switch(ee){case Ops.Number:case Ops.String:return ve=>{for(let be=0;be<ae;++be){const Qe=ye[be](ve);if(typeof Qe===ee)return Qe}throw new Error(`Expected one of the values to be a ${ee}`)};default:throw new Error(`Unsupported assertion operator ${ee}`)}}function compileAccessorExpression(ie,Z){const ee=ie.args[0];if(!(ee instanceof LiteralExpression))throw new Error("Expected literal name");const ae=ee.value;if(typeof ae!="string")throw new Error("Expected string name");switch(ie.operator){case Ops.Get:return ye=>ye.properties[ae];case Ops.Var:return ye=>ye.variables[ae];default:throw new Error(`Unsupported accessor operator ${ie.operator}`)}}function compileComparisonExpression(ie,Z){const ee=ie.operator,ae=compileExpression(ie.args[0]),ye=compileExpression(ie.args[1]);switch(ee){case Ops.Equal:return ve=>ae(ve)===ye(ve);case Ops.NotEqual:return ve=>ae(ve)!==ye(ve);case Ops.LessThan:return ve=>ae(ve)<ye(ve);case Ops.LessThanOrEqualTo:return ve=>ae(ve)<=ye(ve);case Ops.GreaterThan:return ve=>ae(ve)>ye(ve);case Ops.GreaterThanOrEqualTo:return ve=>ae(ve)>=ye(ve);default:throw new Error(`Unsupported comparison operator ${ee}`)}}function compileLogicalExpression(ie,Z){const ee=ie.operator,ae=ie.args.length,ye=new Array(ae);for(let ve=0;ve<ae;++ve)ye[ve]=compileExpression(ie.args[ve]);switch(ee){case Ops.Any:return ve=>{for(let be=0;be<ae;++be)if(ye[be](ve))return!0;return!1};case Ops.All:return ve=>{for(let be=0;be<ae;++be)if(!ye[be](ve))return!1;return!0};case Ops.Not:return ve=>!ye[0](ve);default:throw new Error(`Unsupported logical operator ${ee}`)}}function compileNumericExpression(ie,Z){const ee=ie.operator,ae=ie.args.length,ye=new Array(ae);for(let ve=0;ve<ae;++ve)ye[ve]=compileExpression(ie.args[ve]);switch(ee){case Ops.Multiply:return ve=>{let be=1;for(let Qe=0;Qe<ae;++Qe)be*=ye[Qe](ve);return be};case Ops.Divide:return ve=>ye[0](ve)/ye[1](ve);case Ops.Add:return ve=>{let be=0;for(let Qe=0;Qe<ae;++Qe)be+=ye[Qe](ve);return be};case Ops.Subtract:return ve=>ye[0](ve)-ye[1](ve);case Ops.Clamp:return ve=>{const be=ye[0](ve),Qe=ye[1](ve);if(be<Qe)return Qe;const Xe=ye[2](ve);return be>Xe?Xe:be};case Ops.Mod:return ve=>ye[0](ve)%ye[1](ve);case Ops.Pow:return ve=>Math.pow(ye[0](ve),ye[1](ve));case Ops.Abs:return ve=>Math.abs(ye[0](ve));case Ops.Floor:return ve=>Math.floor(ye[0](ve));case Ops.Ceil:return ve=>Math.ceil(ye[0](ve));case Ops.Round:return ve=>Math.round(ye[0](ve));case Ops.Sin:return ve=>Math.sin(ye[0](ve));case Ops.Cos:return ve=>Math.cos(ye[0](ve));case Ops.Atan:return ae===2?ve=>Math.atan2(ye[0](ve),ye[1](ve)):ve=>Math.atan(ye[0](ve));case Ops.Sqrt:return ve=>Math.sqrt(ye[0](ve));default:throw new Error(`Unsupported numeric operator ${ee}`)}}function compileMatchExpression(ie,Z){const ee=ie.args.length,ae=new Array(ee);for(let ye=0;ye<ee;++ye)ae[ye]=compileExpression(ie.args[ye]);return ye=>{const ve=ae[0](ye);for(let be=1;be<ee;be+=2)if(ve===ae[be](ye))return ae[be+1](ye);return ae[ee-1](ye)}}function always$1(ie){return!0}function rulesToStyleFunction(ie){const Z=newParsingContext(),ee=buildRuleSet(ie,Z),ae=newEvaluationContext();return function(ye,ve){return ae.properties=ye.getPropertiesInternal(),ae.resolution=ve,ee(ae)}}function flatStylesToStyleFunction(ie){const Z=newParsingContext(),ee=ie.length,ae=new Array(ee);for(let be=0;be<ee;++be)ae[be]=buildStyle(ie[be],Z);const ye=newEvaluationContext(),ve=new Array(ee);return function(be,Qe){ye.properties=be.getPropertiesInternal(),ye.resolution=Qe;for(let Xe=0;Xe<ee;++Xe)ve[Xe]=ae[Xe](ye);return ve}}function buildRuleSet(ie,Z){const ee=ie.length,ae=new Array(ee);for(let ye=0;ye<ee;++ye){const ve=ie[ye],be="filter"in ve?buildExpression(ve.filter,BooleanType,Z):always$1;let Qe;if(Array.isArray(ve.style)){const Xe=ve.style.length;Qe=new Array(Xe);for(let Je=0;Je<Xe;++Je)Qe[Je]=buildStyle(ve.style[Je],Z)}else Qe=[buildStyle(ve.style,Z)];ae[ye]={filter:be,styles:Qe}}return function(ye){const ve=[];let be=!1;for(let Qe=0;Qe<ee;++Qe){const Xe=ae[Qe].filter;if(Xe(ye)&&!(ie[Qe].else&&be)){be=!0;for(const Je of ae[Qe].styles){const tt=Je(ye);tt&&ve.push(tt)}}}return ve}}function buildStyle(ie,Z){const ee=buildFill(ie,"",Z),ae=buildStroke(ie,"",Z),ye=buildText(ie,Z),ve=buildImage(ie,Z),be=numberEvaluator(ie,"z-index",Z),Qe=new Style$1;return function(Xe){let Je=!0;if(ee){const tt=ee(Xe);tt&&(Je=!1),Qe.setFill(tt)}if(ae){const tt=ae(Xe);tt&&(Je=!1),Qe.setStroke(tt)}if(ye){const tt=ye(Xe);tt&&(Je=!1),Qe.setText(tt)}if(ve){const tt=ve(Xe);tt&&(Je=!1),Qe.setImage(tt)}return be&&Qe.setZIndex(be(Xe)),Je?null:Qe}}function buildFill(ie,Z,ee){const ae=colorLikeEvaluator(ie,Z+"fill-color",ee);if(!ae)return null;const ye=new Fill;return function(ve){const be=ae(ve);return be==="none"?null:(ye.setColor(be),ye)}}function buildStroke(ie,Z,ee){const ae=numberEvaluator(ie,Z+"stroke-width",ee),ye=colorLikeEvaluator(ie,Z+"stroke-color",ee);if(!ae&&!ye)return null;const ve=stringEvaluator(ie,Z+"stroke-line-cap",ee),be=stringEvaluator(ie,Z+"stroke-line-join",ee),Qe=numberArrayEvaluator(ie,Z+"stroke-line-dash",ee),Xe=numberEvaluator(ie,Z+"stroke-line-dash-offset",ee),Je=numberEvaluator(ie,Z+"stroke-miter-limit",ee),tt=new Stroke;return function(it){if(ye){const st=ye(it);if(st==="none")return null;tt.setColor(st)}if(ae&&tt.setWidth(ae(it)),ve){const st=ve(it);if(st!=="butt"&&st!=="round"&&st!=="square")throw new Error("Expected butt, round, or square line cap");tt.setLineCap(st)}if(be){const st=be(it);if(st!=="bevel"&&st!=="round"&&st!=="miter")throw new Error("Expected bevel, round, or miter line join");tt.setLineJoin(st)}return Qe&&tt.setLineDash(Qe(it)),Xe&&tt.setLineDashOffset(Xe(it)),Je&&tt.setMiterLimit(Je(it)),tt}}function buildText(ie,Z){const ee="text-",ae=stringEvaluator(ie,ee+"value",Z);if(!ae)return null;const ye=buildFill(ie,ee,Z),ve=buildFill(ie,ee+"background-",Z),be=buildStroke(ie,ee,Z),Qe=buildStroke(ie,ee+"background-",Z),Xe=stringEvaluator(ie,ee+"font",Z),Je=numberEvaluator(ie,ee+"max-angle",Z),tt=numberEvaluator(ie,ee+"offset-x",Z),it=numberEvaluator(ie,ee+"offset-y",Z),st=booleanEvaluator(ie,ee+"overflow",Z),lt=stringEvaluator(ie,ee+"placement",Z),ct=numberEvaluator(ie,ee+"repeat",Z),gt=sizeLikeEvaluator(ie,ee+"scale",Z),ut=booleanEvaluator(ie,ee+"rotate-with-view",Z),mt=numberEvaluator(ie,ee+"rotation",Z),ei=stringEvaluator(ie,ee+"align",Z),ni=stringEvaluator(ie,ee+"justify",Z),ri=stringEvaluator(ie,ee+"baseline",Z),si=numberArrayEvaluator(ie,ee+"padding",Z),li=new Text$1({});return function(ai){if(li.setText(ae(ai)),ye&&li.setFill(ye(ai)),ve&&li.setBackgroundFill(ve(ai)),be&&li.setStroke(be(ai)),Qe&&li.setBackgroundStroke(Qe(ai)),Xe&&li.setFont(Xe(ai)),Je&&li.setMaxAngle(Je(ai)),tt&&li.setOffsetX(tt(ai)),it&&li.setOffsetY(it(ai)),st&&li.setOverflow(st(ai)),lt){const ci=lt(ai);if(ci!=="point"&&ci!=="line")throw new Error("Expected point or line for text-placement");li.setPlacement(ci)}if(ct&&li.setRepeat(ct(ai)),gt&&li.setScale(gt(ai)),ut&&li.setRotateWithView(ut(ai)),mt&&li.setRotation(mt(ai)),ei){const ci=ei(ai);if(ci!=="left"&&ci!=="center"&&ci!=="right"&&ci!=="end"&&ci!=="start")throw new Error("Expected left, right, center, start, or end for text-align");li.setTextAlign(ci)}if(ni){const ci=ni(ai);if(ci!=="left"&&ci!=="right"&&ci!=="center")throw new Error("Expected left, right, or center for text-justify");li.setJustify(ci)}if(ri){const ci=ri(ai);if(ci!=="bottom"&&ci!=="top"&&ci!=="middle"&&ci!=="alphabetic"&&ci!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");li.setTextBaseline(ci)}return si&&li.setPadding(si(ai)),li}}function buildImage(ie,Z){return"icon-src"in ie?buildIcon(ie,Z):"shape-points"in ie?buildShape(ie,Z):"circle-radius"in ie?buildCircle(ie,Z):null}function buildIcon(ie,Z){const ee="icon-",ae=ee+"src",ye=requireString(ie[ae],ae),ve=coordinateEvaluator(ie,ee+"anchor",Z),be=sizeLikeEvaluator(ie,ee+"scale",Z),Qe=numberEvaluator(ie,ee+"opacity",Z),Xe=coordinateEvaluator(ie,ee+"displacement",Z),Je=numberEvaluator(ie,ee+"rotation",Z),tt=booleanEvaluator(ie,ee+"rotate-with-view",Z),it=optionalIconOrigin(ie,ee+"anchor-origin"),st=optionalIconAnchorUnits(ie,ee+"anchor-x-units"),lt=optionalIconAnchorUnits(ie,ee+"anchor-y-units"),ct=optionalColorLike(ie,ee+"color"),gt=optionalString(ie,ee+"cross-origin"),ut=optionalNumberArray(ie,ee+"offset"),mt=optionalIconOrigin(ie,ee+"offset-origin"),ei=optionalNumber(ie,ee+"width"),ni=optionalNumber(ie,ee+"height"),ri=optionalSize(ie,ee+"size"),si=optionalDeclutterMode(ie,ee+"declutter"),li=new Icon({src:ye,anchorOrigin:it,anchorXUnits:st,anchorYUnits:lt,color:ct,crossOrigin:gt,offset:ut,offsetOrigin:mt,height:ni,width:ei,size:ri,declutterMode:si});return function(ai){return Qe&&li.setOpacity(Qe(ai)),Xe&&li.setDisplacement(Xe(ai)),Je&&li.setRotation(Je(ai)),tt&&li.setRotateWithView(tt(ai)),be&&li.setScale(be(ai)),ve&&li.setAnchor(ve(ai)),li}}function buildShape(ie,Z){const ee="shape-",ae=ee+"points",ye=requireNumber(ie[ae],ae),ve=buildFill(ie,ee,Z),be=buildStroke(ie,ee,Z),Qe=sizeLikeEvaluator(ie,ee+"scale",Z),Xe=coordinateEvaluator(ie,ee+"displacement",Z),Je=numberEvaluator(ie,ee+"rotation",Z),tt=booleanEvaluator(ie,ee+"rotate-with-view",Z),it=optionalNumber(ie,ee+"radius"),st=optionalNumber(ie,ee+"radius1"),lt=optionalNumber(ie,ee+"radius2"),ct=optionalNumber(ie,ee+"angle"),gt=optionalDeclutterMode(ie,ee+"declutter-mode"),ut=new RegularShape({points:ye,radius:it,radius1:st,radius2:lt,angle:ct,declutterMode:gt});return function(mt){return ve&&ut.setFill(ve(mt)),be&&ut.setStroke(be(mt)),Xe&&ut.setDisplacement(Xe(mt)),Je&&ut.setRotation(Je(mt)),tt&&ut.setRotateWithView(tt(mt)),Qe&&ut.setScale(Qe(mt)),ut}}function buildCircle(ie,Z){const ee="circle-",ae=buildFill(ie,ee,Z),ye=buildStroke(ie,ee,Z),ve=numberEvaluator(ie,ee+"radius",Z),be=sizeLikeEvaluator(ie,ee+"scale",Z),Qe=coordinateEvaluator(ie,ee+"displacement",Z),Xe=numberEvaluator(ie,ee+"rotation",Z),Je=booleanEvaluator(ie,ee+"rotate-with-view",Z),tt=optionalDeclutterMode(ie,ee+"declutter-mode"),it=new CircleStyle({radius:5,declutterMode:tt});return function(st){return ve&&it.setRadius(ve(st)),ae&&it.setFill(ae(st)),ye&&it.setStroke(ye(st)),Qe&&it.setDisplacement(Qe(st)),Xe&&it.setRotation(Xe(st)),Je&&it.setRotateWithView(Je(st)),be&&it.setScale(be(st)),it}}function numberEvaluator(ie,Z,ee){if(!(Z in ie))return;const ae=buildExpression(ie[Z],NumberType,ee);return function(ye){return requireNumber(ae(ye),Z)}}function stringEvaluator(ie,Z,ee){if(!(Z in ie))return null;const ae=buildExpression(ie[Z],StringType,ee);return function(ye){return requireString(ae(ye),Z)}}function booleanEvaluator(ie,Z,ee){if(!(Z in ie))return null;const ae=buildExpression(ie[Z],BooleanType,ee);return function(ye){const ve=ae(ye);if(typeof ve!="boolean")throw new Error(`Expected a boolean for ${Z}`);return ve}}function colorLikeEvaluator(ie,Z,ee){if(!(Z in ie))return null;const ae=buildExpression(ie[Z],ColorType|StringType,ee);return function(ye){return requireColorLike(ae(ye),Z)}}function numberArrayEvaluator(ie,Z,ee){if(!(Z in ie))return null;const ae=buildExpression(ie[Z],NumberArrayType,ee);return function(ye){return requireNumberArray(ae(ye),Z)}}function coordinateEvaluator(ie,Z,ee){if(!(Z in ie))return null;const ae=buildExpression(ie[Z],NumberArrayType,ee);return function(ye){const ve=requireNumberArray(ae(ye),Z);if(ve.length!==2)throw new Error(`Expected two numbers for ${Z}`);return ve}}function sizeLikeEvaluator(ie,Z,ee){if(!(Z in ie))return null;const ae=buildExpression(ie[Z],NumberArrayType|NumberType,ee);return function(ye){return requireSizeLike(ae(ye),Z)}}function optionalNumber(ie,Z){const ee=ie[Z];if(ee!==void 0){if(typeof ee!="number")throw new Error(`Expected a number for ${Z}`);return ee}}function optionalSize(ie,Z){const ee=ie[Z];if(ee!==void 0){if(typeof ee=="number")return toSize(ee);if(!Array.isArray(ee))throw new Error(`Expected a number or size array for ${Z}`);if(ee.length!==2||typeof ee[0]!="number"||typeof ee[1]!="number")throw new Error(`Expected a number or size array for ${Z}`);return ee}}function optionalString(ie,Z){const ee=ie[Z];if(ee!==void 0){if(typeof ee!="string")throw new Error(`Expected a string for ${Z}`);return ee}}function optionalIconOrigin(ie,Z){const ee=ie[Z];if(ee!==void 0){if(ee!=="bottom-left"&&ee!=="bottom-right"&&ee!=="top-left"&&ee!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${Z}`);return ee}}function optionalIconAnchorUnits(ie,Z){const ee=ie[Z];if(ee!==void 0){if(ee!=="pixels"&&ee!=="fraction")throw new Error(`Expected pixels or fraction for ${Z}`);return ee}}function optionalNumberArray(ie,Z){const ee=ie[Z];if(ee!==void 0)return requireNumberArray(ee,Z)}function optionalDeclutterMode(ie,Z){const ee=ie[Z];if(ee!==void 0){if(typeof ee!="string")throw new Error(`Expected a string for ${Z}`);if(ee!=="declutter"&&ee!=="obstacle"&&ee!=="none")throw new Error(`Expected declutter, obstacle, or none for ${Z}`);return ee}}function optionalColorLike(ie,Z){const ee=ie[Z];if(ee!==void 0)return requireColorLike(ee,Z)}function requireNumberArray(ie,Z){if(!Array.isArray(ie))throw new Error(`Expected an array for ${Z}`);const ee=ie.length;for(let ae=0;ae<ee;++ae)if(typeof ie[ae]!="number")throw new Error(`Expected an array of numbers for ${Z}`);return ie}function requireString(ie,Z){if(typeof ie!="string")throw new Error(`Expected a string for ${Z}`);return ie}function requireNumber(ie,Z){if(typeof ie!="number")throw new Error(`Expected a number for ${Z}`);return ie}function requireColorLike(ie,Z){if(typeof ie=="string")return ie;const ee=requireNumberArray(ie,Z),ae=ee.length;if(ae<3||ae>4)throw new Error(`Expected a color with 3 or 4 values for ${Z}`);return ee}function requireSizeLike(ie,Z){if(typeof ie=="number")return ie;const ee=requireNumberArray(ie,Z);if(ee.length!==2)throw new Error(`Expected an array of two numbers for ${Z}`);return ee}const Property$1={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer{constructor(Z){Z=Z||{};const ee=Object.assign({},Z);delete ee.style,delete ee.renderBuffer,delete ee.updateWhileAnimating,delete ee.updateWhileInteracting,super(ee),this.declutter_=Z.declutter!==void 0?Z.declutter:!1,this.renderBuffer_=Z.renderBuffer!==void 0?Z.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(Z.style),this.updateWhileAnimating_=Z.updateWhileAnimating!==void 0?Z.updateWhileAnimating:!1,this.updateWhileInteracting_=Z.updateWhileInteracting!==void 0?Z.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(Z){return super.getFeatures(Z)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(Z){Z.declutterTree||(Z.declutterTree=new RBush(9)),this.getRenderer().renderDeclutter(Z)}setRenderOrder(Z){this.set(Property$1.RENDER_ORDER,Z)}setStyle(Z){this.style_=toStyleLike(Z),this.styleFunction_=Z===null?void 0:toFunction(this.style_),this.changed()}}function toStyleLike(ie){if(ie===void 0)return createDefaultStyle;if(!ie)return null;if(typeof ie=="function"||ie instanceof Style$1)return ie;if(!Array.isArray(ie))return flatStylesToStyleFunction([ie]);if(ie.length===0)return[];const Z=ie.length,ee=ie[0];if(ee instanceof Style$1){const ye=new Array(Z);for(let ve=0;ve<Z;++ve){const be=ie[ve];if(!(be instanceof Style$1))throw new Error("Expected a list of style instances");ye[ve]=be}return ye}if("style"in ee){const ye=new Array(Z);for(let ve=0;ve<Z;++ve){const be=ie[ve];if(!("style"in be))throw new Error("Expected a list of rules with a style property");ye[ve]=be}return rulesToStyleFunction(ye)}return flatStylesToStyleFunction(ie)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(Z,ee,ae,ye){}drawGeometry(Z){}setStyle(Z){}drawCircle(Z,ee){}drawFeature(Z,ee){}drawGeometryCollection(Z,ee){}drawLineString(Z,ee){}drawMultiLineString(Z,ee){}drawMultiPoint(Z,ee){}drawMultiPolygon(Z,ee){}drawPoint(Z,ee){}drawPolygon(Z,ee){}drawText(Z,ee){}setFillStrokeStyle(Z,ee){}setImageStyle(Z,ee){}setTextStyle(Z,ee){}}class CanvasBuilder extends VectorContext{constructor(Z,ee,ae,ye){super(),this.tolerance=Z,this.maxExtent=ee,this.pixelRatio=ye,this.maxLineWidth=0,this.resolution=ae,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(Z){const ee=this.pixelRatio;return ee==1?Z:Z.map(function(ae){return ae*ee})}appendFlatPointCoordinates(Z,ee){const ae=this.getBufferedMaxExtent(),ye=this.tmpCoordinate_,ve=this.coordinates;let be=ve.length;for(let Qe=0,Xe=Z.length;Qe<Xe;Qe+=ee)ye[0]=Z[Qe],ye[1]=Z[Qe+1],containsCoordinate(ae,ye)&&(ve[be++]=ye[0],ve[be++]=ye[1]);return be}appendFlatLineCoordinates(Z,ee,ae,ye,ve,be){const Qe=this.coordinates;let Xe=Qe.length;const Je=this.getBufferedMaxExtent();be&&(ee+=ye);let tt=Z[ee],it=Z[ee+1];const st=this.tmpCoordinate_;let lt=!0,ct,gt,ut;for(ct=ee+ye;ct<ae;ct+=ye)st[0]=Z[ct],st[1]=Z[ct+1],ut=coordinateRelationship(Je,st),ut!==gt?(lt&&(Qe[Xe++]=tt,Qe[Xe++]=it,lt=!1),Qe[Xe++]=st[0],Qe[Xe++]=st[1]):ut===Relationship.INTERSECTING?(Qe[Xe++]=st[0],Qe[Xe++]=st[1],lt=!1):lt=!0,tt=st[0],it=st[1],gt=ut;return(ve&&lt||ct===ee+ye)&&(Qe[Xe++]=tt,Qe[Xe++]=it),Xe}drawCustomCoordinates_(Z,ee,ae,ye,ve){for(let be=0,Qe=ae.length;be<Qe;++be){const Xe=ae[be],Je=this.appendFlatLineCoordinates(Z,ee,Xe,ye,!1,!1);ve.push(Je),ee=Xe}return ee}drawCustom(Z,ee,ae,ye){this.beginGeometry(Z,ee);const ve=Z.getType(),be=Z.getStride(),Qe=this.coordinates.length;let Xe,Je,tt,it,st;switch(ve){case"MultiPolygon":Xe=Z.getOrientedFlatCoordinates(),it=[];const lt=Z.getEndss();st=0;for(let ct=0,gt=lt.length;ct<gt;++ct){const ut=[];st=this.drawCustomCoordinates_(Xe,st,lt[ct],be,ut),it.push(ut)}this.instructions.push([Instruction.CUSTOM,Qe,it,Z,ae,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Qe,it,Z,ye||ae,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":tt=[],Xe=ve=="Polygon"?Z.getOrientedFlatCoordinates():Z.getFlatCoordinates(),st=this.drawCustomCoordinates_(Xe,0,Z.getEnds(),be,tt),this.instructions.push([Instruction.CUSTOM,Qe,tt,Z,ae,inflateCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Qe,tt,Z,ye||ae,inflateCoordinatesArray]);break;case"LineString":case"Circle":Xe=Z.getFlatCoordinates(),Je=this.appendFlatLineCoordinates(Xe,0,Xe.length,be,!1,!1),this.instructions.push([Instruction.CUSTOM,Qe,Je,Z,ae,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Qe,Je,Z,ye||ae,inflateCoordinates]);break;case"MultiPoint":Xe=Z.getFlatCoordinates(),Je=this.appendFlatPointCoordinates(Xe,be),Je>Qe&&(this.instructions.push([Instruction.CUSTOM,Qe,Je,Z,ae,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Qe,Je,Z,ye||ae,inflateCoordinates]));break;case"Point":Xe=Z.getFlatCoordinates(),this.coordinates.push(Xe[0],Xe[1]),Je=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,Qe,Je,Z,ae]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Qe,Je,Z,ye||ae]);break}this.endGeometry(ee)}beginGeometry(Z,ee){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,ee,0,Z],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,ee,0,Z],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const Z=this.hitDetectionInstructions;Z.reverse();let ee;const ae=Z.length;let ye,ve,be=-1;for(ee=0;ee<ae;++ee)ye=Z[ee],ve=ye[0],ve==Instruction.END_GEOMETRY?be=ee:ve==Instruction.BEGIN_GEOMETRY&&(ye[2]=ee,reverseSubArray(this.hitDetectionInstructions,be,ee),be=-1)}setFillStrokeStyle(Z,ee){const ae=this.state;if(Z){const ye=Z.getColor();ae.fillStyle=asColorLike(ye||defaultFillStyle)}else ae.fillStyle=void 0;if(ee){const ye=ee.getColor();ae.strokeStyle=asColorLike(ye||defaultStrokeStyle);const ve=ee.getLineCap();ae.lineCap=ve!==void 0?ve:defaultLineCap;const be=ee.getLineDash();ae.lineDash=be?be.slice():defaultLineDash;const Qe=ee.getLineDashOffset();ae.lineDashOffset=Qe||defaultLineDashOffset;const Xe=ee.getLineJoin();ae.lineJoin=Xe!==void 0?Xe:defaultLineJoin;const Je=ee.getWidth();ae.lineWidth=Je!==void 0?Je:defaultLineWidth;const tt=ee.getMiterLimit();ae.miterLimit=tt!==void 0?tt:defaultMiterLimit,ae.lineWidth>this.maxLineWidth&&(this.maxLineWidth=ae.lineWidth,this.bufferedMaxExtent_=null)}else ae.strokeStyle=void 0,ae.lineCap=void 0,ae.lineDash=null,ae.lineDashOffset=void 0,ae.lineJoin=void 0,ae.lineWidth=void 0,ae.miterLimit=void 0}createFill(Z){const ee=Z.fillStyle,ae=[Instruction.SET_FILL_STYLE,ee];return typeof ee!="string"&&ae.push(!0),ae}applyStroke(Z){this.instructions.push(this.createStroke(Z))}createStroke(Z){return[Instruction.SET_STROKE_STYLE,Z.strokeStyle,Z.lineWidth*this.pixelRatio,Z.lineCap,Z.lineJoin,Z.miterLimit,this.applyPixelRatio(Z.lineDash),Z.lineDashOffset*this.pixelRatio]}updateFillStyle(Z,ee){const ae=Z.fillStyle;(typeof ae!="string"||Z.currentFillStyle!=ae)&&(ae!==void 0&&this.instructions.push(ee.call(this,Z)),Z.currentFillStyle=ae)}updateStrokeStyle(Z,ee){const ae=Z.strokeStyle,ye=Z.lineCap,ve=Z.lineDash,be=Z.lineDashOffset,Qe=Z.lineJoin,Xe=Z.lineWidth,Je=Z.miterLimit;(Z.currentStrokeStyle!=ae||Z.currentLineCap!=ye||ve!=Z.currentLineDash&&!equals$2(Z.currentLineDash,ve)||Z.currentLineDashOffset!=be||Z.currentLineJoin!=Qe||Z.currentLineWidth!=Xe||Z.currentMiterLimit!=Je)&&(ae!==void 0&&ee.call(this,Z),Z.currentStrokeStyle=ae,Z.currentLineCap=ye,Z.currentLineDash=ve,Z.currentLineDashOffset=be,Z.currentLineJoin=Qe,Z.currentLineWidth=Xe,Z.currentMiterLimit=Je)}endGeometry(Z){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const ee=[Instruction.END_GEOMETRY,Z];this.instructions.push(ee),this.hitDetectionInstructions.push(ee)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone(this.maxExtent),this.maxLineWidth>0)){const Z=this.resolution*(this.maxLineWidth+1)/2;buffer$1(this.bufferedMaxExtent_,Z,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(Z,ee,ae,ye){super(Z,ee,ae,ye),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(Z,ee){if(!this.image_)return;this.beginGeometry(Z,ee);const ae=Z.getFlatCoordinates(),ye=Z.getStride(),ve=this.coordinates.length,be=this.appendFlatPointCoordinates(ae,ye);this.instructions.push([Instruction.DRAW_IMAGE,ve,be,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,ve,be,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(ee)}drawMultiPoint(Z,ee){if(!this.image_)return;this.beginGeometry(Z,ee);const ae=Z.getFlatCoordinates(),ye=Z.getStride(),ve=this.coordinates.length,be=this.appendFlatPointCoordinates(ae,ye);this.instructions.push([Instruction.DRAW_IMAGE,ve,be,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,ve,be,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(ee)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(Z,ee){const ae=Z.getAnchor(),ye=Z.getSize(),ve=Z.getOrigin();this.imagePixelRatio_=Z.getPixelRatio(this.pixelRatio),this.anchorX_=ae[0],this.anchorY_=ae[1],this.hitDetectionImage_=Z.getHitDetectionImage(),this.image_=Z.getImage(this.pixelRatio),this.height_=ye[1],this.opacity_=Z.getOpacity(),this.originX_=ve[0],this.originY_=ve[1],this.rotateWithView_=Z.getRotateWithView(),this.rotation_=Z.getRotation(),this.scale_=Z.getScaleArray(),this.width_=ye[0],this.declutterMode_=Z.getDeclutterMode(),this.declutterImageWithText_=ee}}const ImageBuilder=CanvasImageBuilder;class CanvasLineStringBuilder extends CanvasBuilder{constructor(Z,ee,ae,ye){super(Z,ee,ae,ye)}drawFlatCoordinates_(Z,ee,ae,ye){const ve=this.coordinates.length,be=this.appendFlatLineCoordinates(Z,ee,ae,ye,!1,!1),Qe=[Instruction.MOVE_TO_LINE_TO,ve,be];return this.instructions.push(Qe),this.hitDetectionInstructions.push(Qe),ae}drawLineString(Z,ee){const ae=this.state,ye=ae.strokeStyle,ve=ae.lineWidth;if(ye===void 0||ve===void 0)return;this.updateStrokeStyle(ae,this.applyStroke),this.beginGeometry(Z,ee),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ae.strokeStyle,ae.lineWidth,ae.lineCap,ae.lineJoin,ae.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const be=Z.getFlatCoordinates(),Qe=Z.getStride();this.drawFlatCoordinates_(be,0,be.length,Qe),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(ee)}drawMultiLineString(Z,ee){const ae=this.state,ye=ae.strokeStyle,ve=ae.lineWidth;if(ye===void 0||ve===void 0)return;this.updateStrokeStyle(ae,this.applyStroke),this.beginGeometry(Z,ee),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ae.strokeStyle,ae.lineWidth,ae.lineCap,ae.lineJoin,ae.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const be=Z.getEnds(),Qe=Z.getFlatCoordinates(),Xe=Z.getStride();let Je=0;for(let tt=0,it=be.length;tt<it;++tt)Je=this.drawFlatCoordinates_(Qe,Je,be[tt],Xe);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(ee)}finish(){const Z=this.state;return Z.lastStroke!=null&&Z.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(Z){Z.lastStroke!=null&&Z.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),Z.lastStroke=this.coordinates.length),Z.lastStroke=0,super.applyStroke(Z),this.instructions.push(beginPathInstruction)}}const LineStringBuilder=CanvasLineStringBuilder;class CanvasPolygonBuilder extends CanvasBuilder{constructor(Z,ee,ae,ye){super(Z,ee,ae,ye)}drawFlatCoordinatess_(Z,ee,ae,ye){const ve=this.state,be=ve.fillStyle!==void 0,Qe=ve.strokeStyle!==void 0,Xe=ae.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let Je=0;Je<Xe;++Je){const tt=ae[Je],it=this.coordinates.length,st=this.appendFlatLineCoordinates(Z,ee,tt,ye,!0,!Qe),lt=[Instruction.MOVE_TO_LINE_TO,it,st];this.instructions.push(lt),this.hitDetectionInstructions.push(lt),Qe&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),ee=tt}return be&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),Qe&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),ee}drawCircle(Z,ee){const ae=this.state,ye=ae.fillStyle,ve=ae.strokeStyle;if(ye===void 0&&ve===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(Z,ee),ae.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ae.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ae.strokeStyle,ae.lineWidth,ae.lineCap,ae.lineJoin,ae.miterLimit,defaultLineDash,defaultLineDashOffset]);const be=Z.getFlatCoordinates(),Qe=Z.getStride(),Xe=this.coordinates.length;this.appendFlatLineCoordinates(be,0,be.length,Qe,!1,!1);const Je=[Instruction.CIRCLE,Xe];this.instructions.push(beginPathInstruction,Je),this.hitDetectionInstructions.push(beginPathInstruction,Je),ae.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),ae.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(ee)}drawPolygon(Z,ee){const ae=this.state,ye=ae.fillStyle,ve=ae.strokeStyle;if(ye===void 0&&ve===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(Z,ee),ae.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ae.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ae.strokeStyle,ae.lineWidth,ae.lineCap,ae.lineJoin,ae.miterLimit,defaultLineDash,defaultLineDashOffset]);const be=Z.getEnds(),Qe=Z.getOrientedFlatCoordinates(),Xe=Z.getStride();this.drawFlatCoordinatess_(Qe,0,be,Xe),this.endGeometry(ee)}drawMultiPolygon(Z,ee){const ae=this.state,ye=ae.fillStyle,ve=ae.strokeStyle;if(ye===void 0&&ve===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(Z,ee),ae.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ae.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ae.strokeStyle,ae.lineWidth,ae.lineCap,ae.lineJoin,ae.miterLimit,defaultLineDash,defaultLineDashOffset]);const be=Z.getEndss(),Qe=Z.getOrientedFlatCoordinates(),Xe=Z.getStride();let Je=0;for(let tt=0,it=be.length;tt<it;++tt)Je=this.drawFlatCoordinatess_(Qe,Je,be[tt],Xe);this.endGeometry(ee)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const Z=this.tolerance;if(Z!==0){const ee=this.coordinates;for(let ae=0,ye=ee.length;ae<ye;++ae)ee[ae]=snap(ee[ae],Z)}return super.finish()}setFillStrokeStyles_(){const Z=this.state;Z.fillStyle!==void 0&&this.updateFillStyle(Z,this.createFill),Z.strokeStyle!==void 0&&this.updateStrokeStyle(Z,this.applyStroke)}}const PolygonBuilder=CanvasPolygonBuilder;function lineChunk(ie,Z,ee,ae,ye){const ve=[];let be=ee,Qe=0,Xe=Z.slice(ee,2);for(;Qe<ie&&be+ye<ae;){const[Je,tt]=Xe.slice(-2),it=Z[be+ye],st=Z[be+ye+1],lt=Math.sqrt((it-Je)*(it-Je)+(st-tt)*(st-tt));if(Qe+=lt,Qe>=ie){const ct=(ie-Qe+lt)/lt,gt=lerp$1(Je,it,ct),ut=lerp$1(tt,st,ct);Xe.push(gt,ut),ve.push(Xe),Xe=[gt,ut],Qe==ie&&(be+=ye),Qe=0}else if(Qe<ie)Xe.push(Z[be+ye],Z[be+ye+1]),be+=ye;else{const ct=lt-Qe,gt=lerp$1(Je,it,ct/lt),ut=lerp$1(tt,st,ct/lt);Xe.push(gt,ut),ve.push(Xe),Xe=[gt,ut],Qe=0,be+=ye}}return Qe>0&&ve.push(Xe),ve}function matchingChunk(ie,Z,ee,ae,ye){let ve=ee,be=ee,Qe=0,Xe=0,Je=ee,tt,it,st,lt,ct,gt,ut,mt,ei,ni;for(it=ee;it<ae;it+=ye){const ri=Z[it],si=Z[it+1];ct!==void 0&&(ei=ri-ct,ni=si-gt,lt=Math.sqrt(ei*ei+ni*ni),ut!==void 0&&(Xe+=st,tt=Math.acos((ut*ei+mt*ni)/(st*lt)),tt>ie&&(Xe>Qe&&(Qe=Xe,ve=Je,be=it),Xe=0,Je=it-ye)),st=lt,ut=ei,mt=ni),ct=ri,gt=si}return Xe+=lt,Xe>Qe?[Je,it]:[ve,be]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(Z,ee,ae,ye){super(Z,ee,ae,ye),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const Z=super.finish();return Z.textStates=this.textStates,Z.fillStates=this.fillStates,Z.strokeStates=this.strokeStates,Z}drawText(Z,ee){const ae=this.textFillState_,ye=this.textStrokeState_,ve=this.textState_;if(this.text_===""||!ve||!ae&&!ye)return;const be=this.coordinates;let Qe=be.length;const Xe=Z.getType();let Je=null,tt=Z.getStride();if(ve.placement==="line"&&(Xe=="LineString"||Xe=="MultiLineString"||Xe=="Polygon"||Xe=="MultiPolygon")){if(!intersects$1(this.getBufferedMaxExtent(),Z.getExtent()))return;let it;if(Je=Z.getFlatCoordinates(),Xe=="LineString")it=[Je.length];else if(Xe=="MultiLineString")it=Z.getEnds();else if(Xe=="Polygon")it=Z.getEnds().slice(0,1);else if(Xe=="MultiPolygon"){const gt=Z.getEndss();it=[];for(let ut=0,mt=gt.length;ut<mt;++ut)it.push(gt[ut][0])}this.beginGeometry(Z,ee);const st=ve.repeat,lt=st?void 0:ve.textAlign;let ct=0;for(let gt=0,ut=it.length;gt<ut;++gt){let mt;st?mt=lineChunk(st*this.resolution,Je,ct,it[gt],tt):mt=[Je.slice(ct,it[gt])];for(let ei=0,ni=mt.length;ei<ni;++ei){const ri=mt[ei];let si=0,li=ri.length;if(lt==null){const ci=matchingChunk(ve.maxAngle,ri,0,ri.length,2);si=ci[0],li=ci[1]}for(let ci=si;ci<li;ci+=tt)be.push(ri[ci],ri[ci+1]);const ai=be.length;ct=it[gt],this.drawChars_(Qe,ai),Qe=ai}}this.endGeometry(ee)}else{let it=ve.overflow?null:[];switch(Xe){case"Point":case"MultiPoint":Je=Z.getFlatCoordinates();break;case"LineString":Je=Z.getFlatMidpoint();break;case"Circle":Je=Z.getCenter();break;case"MultiLineString":Je=Z.getFlatMidpoints(),tt=2;break;case"Polygon":Je=Z.getFlatInteriorPoint(),ve.overflow||it.push(Je[2]/this.resolution),tt=3;break;case"MultiPolygon":const mt=Z.getFlatInteriorPoints();Je=[];for(let ei=0,ni=mt.length;ei<ni;ei+=3)ve.overflow||it.push(mt[ei+2]/this.resolution),Je.push(mt[ei],mt[ei+1]);if(Je.length===0)return;tt=2;break}const st=this.appendFlatPointCoordinates(Je,tt);if(st===Qe)return;if(it&&(st-Qe)/2!==Je.length/tt){let mt=Qe/2;it=it.filter((ei,ni)=>{const ri=be[(mt+ni)*2]===Je[ni*tt]&&be[(mt+ni)*2+1]===Je[ni*tt+1];return ri||--mt,ri})}this.saveTextStates_(),(ve.backgroundFill||ve.backgroundStroke)&&(this.setFillStrokeStyle(ve.backgroundFill,ve.backgroundStroke),ve.backgroundFill&&this.updateFillStyle(this.state,this.createFill),ve.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(Z,ee);let lt=ve.padding;if(lt!=defaultPadding&&(ve.scale[0]<0||ve.scale[1]<0)){let mt=ve.padding[0],ei=ve.padding[1],ni=ve.padding[2],ri=ve.padding[3];ve.scale[0]<0&&(ei=-ei,ri=-ri),ve.scale[1]<0&&(mt=-mt,ni=-ni),lt=[mt,ei,ni,ri]}const ct=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,Qe,st,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,lt==defaultPadding?defaultPadding:lt.map(function(mt){return mt*ct}),!!ve.backgroundFill,!!ve.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,it]);const gt=1/ct,ut=this.state.fillStyle;ve.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Qe,st,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[gt,gt],NaN,void 0,this.declutterImageWithText_,lt,!!ve.backgroundFill,!!ve.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,it]),ve.backgroundFill&&(this.state.fillStyle=ut,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(ee)}}saveTextStates_(){const Z=this.textStrokeState_,ee=this.textState_,ae=this.textFillState_,ye=this.strokeKey_;Z&&(ye in this.strokeStates||(this.strokeStates[ye]={strokeStyle:Z.strokeStyle,lineCap:Z.lineCap,lineDashOffset:Z.lineDashOffset,lineWidth:Z.lineWidth,lineJoin:Z.lineJoin,miterLimit:Z.miterLimit,lineDash:Z.lineDash}));const ve=this.textKey_;ve in this.textStates||(this.textStates[ve]={font:ee.font,textAlign:ee.textAlign||defaultTextAlign,justify:ee.justify,textBaseline:ee.textBaseline||defaultTextBaseline,scale:ee.scale});const be=this.fillKey_;ae&&(be in this.fillStates||(this.fillStates[be]={fillStyle:ae.fillStyle}))}drawChars_(Z,ee){const ae=this.textStrokeState_,ye=this.textState_,ve=this.strokeKey_,be=this.textKey_,Qe=this.fillKey_;this.saveTextStates_();const Xe=this.pixelRatio,Je=TEXT_ALIGN[ye.textBaseline],tt=this.textOffsetY_*Xe,it=this.text_,st=ae?ae.lineWidth*Math.abs(ye.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,Z,ee,Je,ye.overflow,Qe,ye.maxAngle,Xe,tt,ve,st*Xe,it,be,1]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,Z,ee,Je,ye.overflow,Qe&&defaultFillStyle,ye.maxAngle,Xe,tt,ve,st*Xe,it,be,1/Xe])}setTextStyle(Z,ee){let ae,ye,ve;if(!Z)this.text_="";else{const be=Z.getFill();be?(ye=this.textFillState_,ye||(ye={},this.textFillState_=ye),ye.fillStyle=asColorLike(be.getColor()||defaultFillStyle)):(ye=null,this.textFillState_=ye);const Qe=Z.getStroke();if(!Qe)ve=null,this.textStrokeState_=ve;else{ve=this.textStrokeState_,ve||(ve={},this.textStrokeState_=ve);const ct=Qe.getLineDash(),gt=Qe.getLineDashOffset(),ut=Qe.getWidth(),mt=Qe.getMiterLimit();ve.lineCap=Qe.getLineCap()||defaultLineCap,ve.lineDash=ct?ct.slice():defaultLineDash,ve.lineDashOffset=gt===void 0?defaultLineDashOffset:gt,ve.lineJoin=Qe.getLineJoin()||defaultLineJoin,ve.lineWidth=ut===void 0?defaultLineWidth:ut,ve.miterLimit=mt===void 0?defaultMiterLimit:mt,ve.strokeStyle=asColorLike(Qe.getColor()||defaultStrokeStyle)}ae=this.textState_;const Xe=Z.getFont()||defaultFont;registerFont(Xe);const Je=Z.getScaleArray();ae.overflow=Z.getOverflow(),ae.font=Xe,ae.maxAngle=Z.getMaxAngle(),ae.placement=Z.getPlacement(),ae.textAlign=Z.getTextAlign(),ae.repeat=Z.getRepeat(),ae.justify=Z.getJustify(),ae.textBaseline=Z.getTextBaseline()||defaultTextBaseline,ae.backgroundFill=Z.getBackgroundFill(),ae.backgroundStroke=Z.getBackgroundStroke(),ae.padding=Z.getPadding()||defaultPadding,ae.scale=Je===void 0?[1,1]:Je;const tt=Z.getOffsetX(),it=Z.getOffsetY(),st=Z.getRotateWithView(),lt=Z.getRotation();this.text_=Z.getText()||"",this.textOffsetX_=tt===void 0?0:tt,this.textOffsetY_=it===void 0?0:it,this.textRotateWithView_=st===void 0?!1:st,this.textRotation_=lt===void 0?0:lt,this.strokeKey_=ve?(typeof ve.strokeStyle=="string"?ve.strokeStyle:getUid(ve.strokeStyle))+ve.lineCap+ve.lineDashOffset+"|"+ve.lineWidth+ve.lineJoin+ve.miterLimit+"["+ve.lineDash.join()+"]":"",this.textKey_=ae.font+ae.scale+(ae.textAlign||"?")+(ae.repeat||"?")+(ae.justify||"?")+(ae.textBaseline||"?"),this.fillKey_=ye?typeof ye.fillStyle=="string"?ye.fillStyle:"|"+getUid(ye.fillStyle):""}this.declutterImageWithText_=ee}}const BATCH_CONSTRUCTORS={Circle:PolygonBuilder,Default:CanvasBuilder,Image:ImageBuilder,LineString:LineStringBuilder,Polygon:PolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(Z,ee,ae,ye){this.tolerance_=Z,this.maxExtent_=ee,this.pixelRatio_=ye,this.resolution_=ae,this.buildersByZIndex_={}}finish(){const Z={};for(const ee in this.buildersByZIndex_){Z[ee]=Z[ee]||{};const ae=this.buildersByZIndex_[ee];for(const ye in ae){const ve=ae[ye].finish();Z[ee][ye]=ve}}return Z}getBuilder(Z,ee){const ae=Z!==void 0?Z.toString():"0";let ye=this.buildersByZIndex_[ae];ye===void 0&&(ye={},this.buildersByZIndex_[ae]=ye);let ve=ye[ee];if(ve===void 0){const be=BATCH_CONSTRUCTORS[ee];ve=new be(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),ye[ee]=ve}return ve}}class LayerRenderer extends Observable{constructor(Z){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=Z,this.declutterExecutorGroup=null}getFeatures(Z){return abstract()}getData(Z){return null}prepareFrame(Z){return abstract()}renderFrame(Z,ee){return abstract()}loadedTileCallback(Z,ee,ae){Z[ee]||(Z[ee]={}),Z[ee][ae.tileCoord.toString()]=ae}createLoadedTileFinder(Z,ee,ae){return(ye,ve)=>{const be=this.loadedTileCallback.bind(this,ae,ye);return Z.forEachLoadedTile(ee,ye,ve,be)}}forEachFeatureAtCoordinate(Z,ee,ae,ye,ve){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(Z){const ee=Z.target;(ee.getState()===ImageState.LOADED||ee.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(Z){let ee=Z.getState();return ee!=ImageState.LOADED&&ee!=ImageState.ERROR&&Z.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),ee==ImageState.IDLE&&(Z.load(),ee=Z.getState()),ee==ImageState.LOADED}renderIfReadyAndVisible(){const Z=this.getLayer();Z&&Z.getVisible()&&Z.getSourceState()==="ready"&&Z.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(Z,ee,ae,ye){super(Z),this.inversePixelTransform=ee,this.frameState=ae,this.context=ye}}let pixelContext$1=null;function createPixelContext$1(){pixelContext$1=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(Z){super(Z),this.container=null,this.renderedResolution,this.tempTransform=create$3(),this.pixelTransform=create$3(),this.inversePixelTransform=create$3(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(Z,ee,ae){pixelContext$1||createPixelContext$1(),pixelContext$1.clearRect(0,0,1,1);let ye;try{pixelContext$1.drawImage(Z,ee,ae,1,1,0,0,1,1),ye=pixelContext$1.getImageData(0,0,1,1).data}catch{return pixelContext$1=null,null}return ye}getBackground(Z){let ae=this.getLayer().getBackground();return typeof ae=="function"&&(ae=ae(Z.viewState.resolution)),ae||void 0}useContainer(Z,ee,ae){const ye=this.getLayer().getClassName();let ve,be;if(Z&&Z.className===ye&&(!ae||Z&&Z.style.backgroundColor&&equals$2(asArray(Z.style.backgroundColor),asArray(ae)))){const Qe=Z.firstElementChild;Qe instanceof HTMLCanvasElement&&(be=Qe.getContext("2d"))}if(be&&be.canvas.style.transform===ee?(this.container=Z,this.context=be,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){ve=document.createElement("div"),ve.className=ye;let Qe=ve.style;Qe.position="absolute",Qe.width="100%",Qe.height="100%",be=createCanvasContext2D();const Xe=be.canvas;ve.appendChild(Xe),Qe=Xe.style,Qe.position="absolute",Qe.left="0",Qe.transformOrigin="top left",this.container=ve,this.context=be}!this.containerReused&&ae&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=ae)}clipUnrotated(Z,ee,ae){const ye=getTopLeft(ae),ve=getTopRight(ae),be=getBottomRight(ae),Qe=getBottomLeft(ae);apply(ee.coordinateToPixelTransform,ye),apply(ee.coordinateToPixelTransform,ve),apply(ee.coordinateToPixelTransform,be),apply(ee.coordinateToPixelTransform,Qe);const Xe=this.inversePixelTransform;apply(Xe,ye),apply(Xe,ve),apply(Xe,be),apply(Xe,Qe),Z.save(),Z.beginPath(),Z.moveTo(Math.round(ye[0]),Math.round(ye[1])),Z.lineTo(Math.round(ve[0]),Math.round(ve[1])),Z.lineTo(Math.round(be[0]),Math.round(be[1])),Z.lineTo(Math.round(Qe[0]),Math.round(Qe[1])),Z.clip()}dispatchRenderEvent_(Z,ee,ae){const ye=this.getLayer();if(ye.hasListener(Z)){const ve=new RenderEvent(Z,this.inversePixelTransform,ae,ee);ye.dispatchEvent(ve)}}preRender(Z,ee){this.frameState=ee,this.dispatchRenderEvent_(RenderEventType.PRERENDER,Z,ee)}postRender(Z,ee){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,Z,ee)}getRenderTransform(Z,ee,ae,ye,ve,be,Qe){const Xe=ve/2,Je=be/2,tt=ye/ee,it=-tt,st=-Z[0]+Qe,lt=-Z[1];return compose$1(this.tempTransform,Xe,Je,tt,it,-ae,st,lt)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function drawTextOnPath(ie,Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt,it){let st=ie[Z],lt=ie[Z+1],ct=0,gt=0,ut=0,mt=0;function ei(){ct=st,gt=lt,Z+=ae,st=ie[Z],lt=ie[Z+1],mt+=ut,ut=Math.sqrt((st-ct)*(st-ct)+(lt-gt)*(lt-gt))}do ei();while(Z<ee-ae&&mt+ut<ve);let ni=ut===0?0:(ve-mt)/ut;const ri=lerp$1(ct,st,ni),si=lerp$1(gt,lt,ni),li=Z-ae,ai=mt,ci=ve+Qe*Xe(Je,ye,tt);for(;Z<ee-ae&&mt+ut<ci;)ei();ni=ut===0?0:(ci-mt)/ut;const Ci=lerp$1(ct,st,ni),pi=lerp$1(gt,lt,ni);let gi;if(it){const Ti=[ri,si,Ci,pi];rotate$1(Ti,0,4,2,it,Ti,Ti),gi=Ti[0]>Ti[2]}else gi=ri>Ci;const _i=Math.PI,bi=[],Mi=li+ae===Z;Z=li,ut=0,mt=ai,st=ie[Z],lt=ie[Z+1];let yi;if(Mi){ei(),yi=Math.atan2(lt-gt,st-ct),gi&&(yi+=yi>0?-_i:_i);const Ti=(Ci+ri)/2,Ii=(pi+si)/2;return bi[0]=[Ti,Ii,(ci-ve)/2,yi,ye],bi}ye=ye.replace(/\n/g," ");for(let Ti=0,Ii=ye.length;Ti<Ii;){ei();let Ri=Math.atan2(lt-gt,st-ct);if(gi&&(Ri+=Ri>0?-_i:_i),yi!==void 0){let Ui=Ri-yi;if(Ui+=Ui>_i?-2*_i:Ui<-_i?2*_i:0,Math.abs(Ui)>be)return null}yi=Ri;const Pi=Ti;let xi=0;for(;Ti<Ii;++Ti){const Ui=gi?Ii-Ti-1:Ti,Vi=Qe*Xe(Je,ye[Ui],tt);if(Z+ae<ee&&mt+ut<ve+xi+Vi/2)break;xi+=Vi}if(Ti===Pi)continue;const ki=gi?ye.substring(Ii-Pi,Ii-Ti):ye.substring(Pi,Ti);ni=ut===0?0:(ve+xi/2-mt)/ut;const Li=lerp$1(ct,st,ni),Yr=lerp$1(gt,lt,ni);bi.push([Li,Yr,xi/2,Ri,ki]),ve+=xi}return bi}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(ie){return ie[3].declutterBox}const rtlRegEx=new RegExp("[-----]");function horizontalTextAlign(ie,Z){return Z==="start"?Z=rtlRegEx.test(ie)?"right":"left":Z==="end"&&(Z=rtlRegEx.test(ie)?"left":"right"),TEXT_ALIGN[Z]}function createTextChunks(ie,Z,ee){return ee>0&&ie.push(`
`,""),ie.push(Z,""),ie}class Executor{constructor(Z,ee,ae,ye){this.overlaps=ae,this.pixelRatio=ee,this.resolution=Z,this.alignFill_,this.instructions=ye.instructions,this.coordinates=ye.coordinates,this.coordinateCache_={},this.renderedTransform_=create$3(),this.hitDetectionInstructions=ye.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=ye.fillStates||{},this.strokeStates=ye.strokeStates||{},this.textStates=ye.textStates||{},this.widths_={},this.labels_={}}createLabel(Z,ee,ae,ye){const ve=Z+ee+ae+ye;if(this.labels_[ve])return this.labels_[ve];const be=ye?this.strokeStates[ye]:null,Qe=ae?this.fillStates[ae]:null,Xe=this.textStates[ee],Je=this.pixelRatio,tt=[Xe.scale[0]*Je,Xe.scale[1]*Je],it=Array.isArray(Z),st=Xe.justify?TEXT_ALIGN[Xe.justify]:horizontalTextAlign(Array.isArray(Z)?Z[0]:Z,Xe.textAlign||defaultTextAlign),lt=ye&&be.lineWidth?be.lineWidth:0,ct=it?Z:Z.split(`
`).reduce(createTextChunks,[]),{width:gt,height:ut,widths:mt,heights:ei,lineWidths:ni}=getTextDimensions(Xe,ct),ri=gt+lt,si=[],li=(ri+2)*tt[0],ai=(ut+lt)*tt[1],ci={width:li<0?Math.floor(li):Math.ceil(li),height:ai<0?Math.floor(ai):Math.ceil(ai),contextInstructions:si};(tt[0]!=1||tt[1]!=1)&&si.push("scale",tt),ye&&(si.push("strokeStyle",be.strokeStyle),si.push("lineWidth",lt),si.push("lineCap",be.lineCap),si.push("lineJoin",be.lineJoin),si.push("miterLimit",be.miterLimit),si.push("setLineDash",[be.lineDash]),si.push("lineDashOffset",be.lineDashOffset)),ae&&si.push("fillStyle",Qe.fillStyle),si.push("textBaseline","middle"),si.push("textAlign","center");const Ci=.5-st;let pi=st*ri+Ci*lt;const gi=[],_i=[];let bi=0,Mi=0,yi=0,Ti=0,Ii;for(let Ri=0,Pi=ct.length;Ri<Pi;Ri+=2){const xi=ct[Ri];if(xi===`
`){Mi+=bi,bi=0,pi=st*ri+Ci*lt,++Ti;continue}const ki=ct[Ri+1]||Xe.font;ki!==Ii&&(ye&&gi.push("font",ki),ae&&_i.push("font",ki),Ii=ki),bi=Math.max(bi,ei[yi]);const Li=[xi,pi+Ci*mt[yi]+st*(mt[yi]-ni[Ti]),.5*(lt+bi)+Mi];pi+=mt[yi],ye&&gi.push("strokeText",Li),ae&&_i.push("fillText",Li),++yi}return Array.prototype.push.apply(si,gi),Array.prototype.push.apply(si,_i),this.labels_[ve]=ci,ci}replayTextBackground_(Z,ee,ae,ye,ve,be,Qe){Z.beginPath(),Z.moveTo.apply(Z,ee),Z.lineTo.apply(Z,ae),Z.lineTo.apply(Z,ye),Z.lineTo.apply(Z,ve),Z.lineTo.apply(Z,ee),be&&(this.alignFill_=be[2],this.fill_(Z)),Qe&&(this.setStrokeStyle_(Z,Qe),Z.stroke())}calculateImageOrLabelDimensions_(Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt,it,st,lt,ct,gt,ut){Qe*=st[0],Xe*=st[1];let mt=ae-Qe,ei=ye-Xe;const ni=ve+Je>Z?Z-Je:ve,ri=be+tt>ee?ee-tt:be,si=ct[3]+ni*st[0]+ct[1],li=ct[0]+ri*st[1]+ct[2],ai=mt-ct[3],ci=ei-ct[0];(gt||it!==0)&&(p1[0]=ai,p4[0]=ai,p1[1]=ci,p2[1]=ci,p2[0]=ai+si,p3[0]=p2[0],p3[1]=ci+li,p4[1]=p3[1]);let Ci;return it!==0?(Ci=compose$1(create$3(),ae,ye,1,1,it,-ae,-ye),apply(Ci,p1),apply(Ci,p2),apply(Ci,p3),apply(Ci,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(ai,ai+si),Math.min(ci,ci+li),Math.max(ai,ai+si),Math.max(ci,ci+li),tmpExtent),lt&&(mt=Math.round(mt),ei=Math.round(ei)),{drawImageX:mt,drawImageY:ei,drawImageW:ni,drawImageH:ri,originX:Je,originY:tt,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:ut},canvasTransform:Ci,scale:st}}replayImageOrLabel_(Z,ee,ae,ye,ve,be,Qe){const Xe=!!(be||Qe),Je=ye.declutterBox,tt=Z.canvas,it=Qe?Qe[2]*ye.scale[0]/2:0;return Je.minX-it<=tt.width/ee&&Je.maxX+it>=0&&Je.minY-it<=tt.height/ee&&Je.maxY+it>=0&&(Xe&&this.replayTextBackground_(Z,p1,p2,p3,p4,be,Qe),drawImageOrLabel(Z,ye.canvasTransform,ve,ae,ye.originX,ye.originY,ye.drawImageW,ye.drawImageH,ye.drawImageX,ye.drawImageY,ye.scale)),!0}fill_(Z){if(this.alignFill_){const ee=apply(this.renderedTransform_,[0,0]),ae=512*this.pixelRatio;Z.save(),Z.translate(ee[0]%ae,ee[1]%ae),Z.rotate(this.viewRotation_)}Z.fill(),this.alignFill_&&Z.restore()}setStrokeStyle_(Z,ee){Z.strokeStyle=ee[1],Z.lineWidth=ee[2],Z.lineCap=ee[3],Z.lineJoin=ee[4],Z.miterLimit=ee[5],Z.lineDashOffset=ee[7],Z.setLineDash(ee[6])}drawLabelWithPointPlacement_(Z,ee,ae,ye){const ve=this.textStates[ee],be=this.createLabel(Z,ee,ye,ae),Qe=this.strokeStates[ae],Xe=this.pixelRatio,Je=horizontalTextAlign(Array.isArray(Z)?Z[0]:Z,ve.textAlign||defaultTextAlign),tt=TEXT_ALIGN[ve.textBaseline||defaultTextBaseline],it=Qe&&Qe.lineWidth?Qe.lineWidth:0,st=be.width/Xe-2*ve.scale[0],lt=Je*st+2*(.5-Je)*it,ct=tt*be.height/Xe+2*(.5-tt)*it;return{label:be,anchorX:lt,anchorY:ct}}execute_(Z,ee,ae,ye,ve,be,Qe,Xe){let Je;this.pixelCoordinates_&&equals$2(ae,this.renderedTransform_)?Je=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),Je=transform2D(this.coordinates,0,this.coordinates.length,2,ae,this.pixelCoordinates_),setFromArray(this.renderedTransform_,ae));let tt=0;const it=ye.length;let st=0,lt,ct,gt,ut,mt,ei,ni,ri,si,li,ai,ci,Ci=0,pi=0,gi=null,_i=null;const bi=this.coordinateCache_,Mi=this.viewRotation_,yi=Math.round(Math.atan2(-ae[1],ae[0])*1e12)/1e12,Ti={context:Z,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Mi},Ii=this.instructions!=ye||this.overlaps?0:200;let Ri,Pi,xi,ki;for(;tt<it;){const Li=ye[tt];switch(Li[0]){case Instruction.BEGIN_GEOMETRY:Ri=Li[1],ki=Li[3],Ri.getGeometry()?Qe!==void 0&&!intersects$1(Qe,ki.getExtent())?tt=Li[2]+1:++tt:tt=Li[2];break;case Instruction.BEGIN_PATH:Ci>Ii&&(this.fill_(Z),Ci=0),pi>Ii&&(Z.stroke(),pi=0),!Ci&&!pi&&(Z.beginPath(),ut=NaN,mt=NaN),++tt;break;case Instruction.CIRCLE:st=Li[1];const Ui=Je[st],Vi=Je[st+1],Kr=Je[st+2],Wi=Je[st+3],Zr=Kr-Ui,ps=Wi-Vi,Is=Math.sqrt(Zr*Zr+ps*ps);Z.moveTo(Ui+Is,Vi),Z.arc(Ui,Vi,Is,0,2*Math.PI,!0),++tt;break;case Instruction.CLOSE_PATH:Z.closePath(),++tt;break;case Instruction.CUSTOM:st=Li[1],lt=Li[2];const _s=Li[3],ws=Li[4],hi=Li.length==6?Li[5]:void 0;Ti.geometry=_s,Ti.feature=Ri,tt in bi||(bi[tt]=[]);const Bi=bi[tt];hi?hi(Je,st,lt,2,Bi):(Bi[0]=Je[st],Bi[1]=Je[st+1],Bi.length=2),ws(Bi,Ti),++tt;break;case Instruction.DRAW_IMAGE:st=Li[1],lt=Li[2],ri=Li[3],ct=Li[4],gt=Li[5];let qi=Li[6];const Xr=Li[7],rs=Li[8],Os=Li[9],gs=Li[10];let zs=Li[11];const $s=Li[12];let Us=Li[13];const xs=Li[14],sa=Li[15];if(!ri&&Li.length>=20){si=Li[19],li=Li[20],ai=Li[21],ci=Li[22];const Vs=this.drawLabelWithPointPlacement_(si,li,ai,ci);ri=Vs.label,Li[3]=ri;const ya=Li[23];ct=(Vs.anchorX-ya)*this.pixelRatio,Li[4]=ct;const Ns=Li[24];gt=(Vs.anchorY-Ns)*this.pixelRatio,Li[5]=gt,qi=ri.height,Li[6]=qi,Us=ri.width,Li[13]=Us}let Gs;Li.length>25&&(Gs=Li[25]);let ma,ha,za;Li.length>17?(ma=Li[16],ha=Li[17],za=Li[18]):(ma=defaultPadding,ha=!1,za=!1),gs&&yi?zs+=Mi:!gs&&!yi&&(zs-=Mi);let Io=0;for(;st<lt;st+=2){if(Gs&&Gs[Io++]<Us/this.pixelRatio)continue;const Vs=this.calculateImageOrLabelDimensions_(ri.width,ri.height,Je[st],Je[st+1],Us,qi,ct,gt,rs,Os,zs,$s,ve,ma,ha||za,Ri),ya=[Z,ee,ri,Vs,Xr,ha?gi:null,za?_i:null];if(Xe){if(xs==="none")continue;if(xs==="obstacle"){Xe.insert(Vs.declutterBox);continue}else{let Ns,fo;if(sa){const ja=lt-st;if(!sa[ja]){sa[ja]=ya;continue}if(Ns=sa[ja],delete sa[ja],fo=getDeclutterBox(Ns),Xe.collides(fo))continue}if(Xe.collides(Vs.declutterBox))continue;Ns&&(Xe.insert(fo),this.replayImageOrLabel_.apply(this,Ns)),Xe.insert(Vs.declutterBox)}}this.replayImageOrLabel_.apply(this,ya)}++tt;break;case Instruction.DRAW_CHARS:const wo=Li[1],hs=Li[2],Fs=Li[3],ca=Li[4];ci=Li[5];const Ta=Li[6],vi=Li[7],mi=Li[8];ai=Li[9];const Fi=Li[10];si=Li[11],li=Li[12];const Ni=[Li[13],Li[13]],is=this.textStates[li],vs=is.font,us=[is.scale[0]*vi,is.scale[1]*vi];let as;vs in this.widths_?as=this.widths_[vs]:(as={},this.widths_[vs]=as);const js=lineStringLength(Je,wo,hs,2),ea=Math.abs(us[0])*measureAndCacheTextWidth(vs,si,as);if(ca||ea<=js){const Vs=this.textStates[li].textAlign,ya=(js-ea)*horizontalTextAlign(si,Vs),Ns=drawTextOnPath(Je,wo,hs,2,si,ya,Ta,Math.abs(us[0]),measureAndCacheTextWidth,vs,as,yi?0:this.viewRotation_);e:if(Ns){const fo=[];let ja,xo,ll,qa,yo;if(ai)for(ja=0,xo=Ns.length;ja<xo;++ja){yo=Ns[ja],ll=yo[4],qa=this.createLabel(ll,li,"",ai),ct=yo[2]+(us[0]<0?-Fi:Fi),gt=Fs*qa.height+(.5-Fs)*2*Fi*us[1]/us[0]-mi;const no=this.calculateImageOrLabelDimensions_(qa.width,qa.height,yo[0],yo[1],qa.width,qa.height,ct,gt,0,0,yo[3],Ni,!1,defaultPadding,!1,Ri);if(Xe&&Xe.collides(no.declutterBox))break e;fo.push([Z,ee,qa,no,1,null,null])}if(ci)for(ja=0,xo=Ns.length;ja<xo;++ja){yo=Ns[ja],ll=yo[4],qa=this.createLabel(ll,li,ci,""),ct=yo[2],gt=Fs*qa.height-mi;const no=this.calculateImageOrLabelDimensions_(qa.width,qa.height,yo[0],yo[1],qa.width,qa.height,ct,gt,0,0,yo[3],Ni,!1,defaultPadding,!1,Ri);if(Xe&&Xe.collides(no.declutterBox))break e;fo.push([Z,ee,qa,no,1,null,null])}Xe&&Xe.load(fo.map(getDeclutterBox));for(let no=0,Ql=fo.length;no<Ql;++no)this.replayImageOrLabel_.apply(this,fo[no])}}++tt;break;case Instruction.END_GEOMETRY:if(be!==void 0){Ri=Li[1];const Vs=be(Ri,ki);if(Vs)return Vs}++tt;break;case Instruction.FILL:Ii?Ci++:this.fill_(Z),++tt;break;case Instruction.MOVE_TO_LINE_TO:for(st=Li[1],lt=Li[2],Pi=Je[st],xi=Je[st+1],ei=Pi+.5|0,ni=xi+.5|0,(ei!==ut||ni!==mt)&&(Z.moveTo(Pi,xi),ut=ei,mt=ni),st+=2;st<lt;st+=2)Pi=Je[st],xi=Je[st+1],ei=Pi+.5|0,ni=xi+.5|0,(st==lt-2||ei!==ut||ni!==mt)&&(Z.lineTo(Pi,xi),ut=ei,mt=ni);++tt;break;case Instruction.SET_FILL_STYLE:gi=Li,this.alignFill_=Li[2],Ci&&(this.fill_(Z),Ci=0,pi&&(Z.stroke(),pi=0)),Z.fillStyle=Li[1],++tt;break;case Instruction.SET_STROKE_STYLE:_i=Li,pi&&(Z.stroke(),pi=0),this.setStrokeStyle_(Z,Li),++tt;break;case Instruction.STROKE:Ii?pi++:Z.stroke(),++tt;break;default:++tt;break}}Ci&&this.fill_(Z),pi&&Z.stroke()}execute(Z,ee,ae,ye,ve,be){this.viewRotation_=ye,this.execute_(Z,ee,ae,this.instructions,ve,void 0,void 0,be)}executeHitDetection(Z,ee,ae,ye,ve){return this.viewRotation_=ae,this.execute_(Z,1,ee,this.hitDetectionInstructions,!0,ye,ve)}}const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(Z,ee,ae,ye,ve,be){this.maxExtent_=Z,this.overlaps_=ye,this.pixelRatio_=ae,this.resolution_=ee,this.renderBuffer_=be,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create$3(),this.createExecutors_(ve)}clip(Z,ee){const ae=this.getClipCoords(ee);Z.beginPath(),Z.moveTo(ae[0],ae[1]),Z.lineTo(ae[2],ae[3]),Z.lineTo(ae[4],ae[5]),Z.lineTo(ae[6],ae[7]),Z.clip()}createExecutors_(Z){for(const ee in Z){let ae=this.executorsByZIndex_[ee];ae===void 0&&(ae={},this.executorsByZIndex_[ee]=ae);const ye=Z[ee];for(const ve in ye){const be=ye[ve];ae[ve]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,be)}}}hasExecutors(Z){for(const ee in this.executorsByZIndex_){const ae=this.executorsByZIndex_[ee];for(let ye=0,ve=Z.length;ye<ve;++ye)if(Z[ye]in ae)return!0}return!1}forEachFeatureAtCoordinate(Z,ee,ae,ye,ve,be){ye=Math.round(ye);const Qe=ye*2+1,Xe=compose$1(this.hitDetectionTransform_,ye+.5,ye+.5,1/ee,-1/ee,-ae,-Z[0],-Z[1]),Je=!this.hitDetectionContext_;Je&&(this.hitDetectionContext_=createCanvasContext2D(Qe,Qe,void 0,{willReadFrequently:!0}));const tt=this.hitDetectionContext_;tt.canvas.width!==Qe||tt.canvas.height!==Qe?(tt.canvas.width=Qe,tt.canvas.height=Qe):Je||tt.clearRect(0,0,Qe,Qe);let it;this.renderBuffer_!==void 0&&(it=createEmpty(),extendCoordinate(it,Z),buffer$1(it,ee*(this.renderBuffer_+ye),it));const st=getPixelIndexArray(ye);let lt;function ct(si,li){const ai=tt.getImageData(0,0,Qe,Qe).data;for(let ci=0,Ci=st.length;ci<Ci;ci++)if(ai[st[ci]]>0){if(!be||lt!=="Image"&&lt!=="Text"||be.includes(si)){const pi=(st[ci]-3)/4,gi=ye-pi%Qe,_i=ye-(pi/Qe|0),bi=ve(si,li,gi*gi+_i*_i);if(bi)return bi}tt.clearRect(0,0,Qe,Qe);break}}const gt=Object.keys(this.executorsByZIndex_).map(Number);gt.sort(ascending);let ut,mt,ei,ni,ri;for(ut=gt.length-1;ut>=0;--ut){const si=gt[ut].toString();for(ei=this.executorsByZIndex_[si],mt=ORDER.length-1;mt>=0;--mt)if(lt=ORDER[mt],ni=ei[lt],ni!==void 0&&(ri=ni.executeHitDetection(tt,Xe,ae,ct,it),ri))return ri}}getClipCoords(Z){const ee=this.maxExtent_;if(!ee)return null;const ae=ee[0],ye=ee[1],ve=ee[2],be=ee[3],Qe=[ae,ye,ae,be,ve,be,ve,ye];return transform2D(Qe,0,8,2,Z,Qe),Qe}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(Z,ee,ae,ye,ve,be,Qe){const Xe=Object.keys(this.executorsByZIndex_).map(Number);Xe.sort(ascending),this.maxExtent_&&(Z.save(),this.clip(Z,ae)),be=be||ORDER;let Je,tt,it,st,lt,ct;for(Qe&&Xe.reverse(),Je=0,tt=Xe.length;Je<tt;++Je){const gt=Xe[Je].toString();for(lt=this.executorsByZIndex_[gt],it=0,st=be.length;it<st;++it){const ut=be[it];ct=lt[ut],ct!==void 0&&ct.execute(Z,ee,ae,ye,ve,Qe)}}this.maxExtent_&&Z.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(ie){if(circlePixelIndexArrayCache[ie]!==void 0)return circlePixelIndexArrayCache[ie];const Z=ie*2+1,ee=ie*ie,ae=new Array(ee+1);for(let ve=0;ve<=ie;++ve)for(let be=0;be<=ie;++be){const Qe=ve*ve+be*be;if(Qe>ee)break;let Xe=ae[Qe];Xe||(Xe=[],ae[Qe]=Xe),Xe.push(((ie+ve)*Z+(ie+be))*4+3),ve>0&&Xe.push(((ie-ve)*Z+(ie+be))*4+3),be>0&&(Xe.push(((ie+ve)*Z+(ie-be))*4+3),ve>0&&Xe.push(((ie-ve)*Z+(ie-be))*4+3))}const ye=[];for(let ve=0,be=ae.length;ve<be;++ve)ae[ve]&&ye.push(...ae[ve]);return circlePixelIndexArrayCache[ie]=ye,ye}class CanvasImmediateRenderer extends VectorContext{constructor(Z,ee,ae,ye,ve,be,Qe){super(),this.context_=Z,this.pixelRatio_=ee,this.extent_=ae,this.transform_=ye,this.transformRotation_=ye?toFixed(Math.atan2(ye[1],ye[0]),10):0,this.viewRotation_=ve,this.squaredTolerance_=be,this.userTransform_=Qe,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create$3()}drawImages_(Z,ee,ae,ye){if(!this.image_)return;const ve=transform2D(Z,ee,ae,ye,this.transform_,this.pixelCoordinates_),be=this.context_,Qe=this.tmpLocalTransform_,Xe=be.globalAlpha;this.imageOpacity_!=1&&(be.globalAlpha=Xe*this.imageOpacity_);let Je=this.imageRotation_;this.transformRotation_===0&&(Je-=this.viewRotation_),this.imageRotateWithView_&&(Je+=this.viewRotation_);for(let tt=0,it=ve.length;tt<it;tt+=2){const st=ve[tt]-this.imageAnchorX_,lt=ve[tt+1]-this.imageAnchorY_;if(Je!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const ct=st+this.imageAnchorX_,gt=lt+this.imageAnchorY_;compose$1(Qe,ct,gt,1,1,Je,-ct,-gt),be.save(),be.transform.apply(be,Qe),be.translate(ct,gt),be.scale(this.imageScale_[0],this.imageScale_[1]),be.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),be.restore()}else be.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,st,lt,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(be.globalAlpha=Xe)}drawText_(Z,ee,ae,ye){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const ve=transform2D(Z,ee,ae,ye,this.transform_,this.pixelCoordinates_),be=this.context_;let Qe=this.textRotation_;for(this.transformRotation_===0&&(Qe-=this.viewRotation_),this.textRotateWithView_&&(Qe+=this.viewRotation_);ee<ae;ee+=ye){const Xe=ve[ee]+this.textOffsetX_,Je=ve[ee+1]+this.textOffsetY_;Qe!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(be.save(),be.translate(Xe-this.textOffsetX_,Je-this.textOffsetY_),be.rotate(Qe),be.translate(this.textOffsetX_,this.textOffsetY_),be.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&be.strokeText(this.text_,0,0),this.textFillState_&&be.fillText(this.text_,0,0),be.restore()):(this.textStrokeState_&&be.strokeText(this.text_,Xe,Je),this.textFillState_&&be.fillText(this.text_,Xe,Je))}}moveToLineTo_(Z,ee,ae,ye,ve){const be=this.context_,Qe=transform2D(Z,ee,ae,ye,this.transform_,this.pixelCoordinates_);be.moveTo(Qe[0],Qe[1]);let Xe=Qe.length;ve&&(Xe-=2);for(let Je=2;Je<Xe;Je+=2)be.lineTo(Qe[Je],Qe[Je+1]);return ve&&be.closePath(),ae}drawRings_(Z,ee,ae,ye){for(let ve=0,be=ae.length;ve<be;++ve)ee=this.moveToLineTo_(Z,ee,ae[ve],ye,!0);return ee}drawCircle(Z){if(this.squaredTolerance_&&(Z=Z.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,Z.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const ee=transformGeom2D(Z,this.transform_,this.pixelCoordinates_),ae=ee[2]-ee[0],ye=ee[3]-ee[1],ve=Math.sqrt(ae*ae+ye*ye),be=this.context_;be.beginPath(),be.arc(ee[0],ee[1],ve,0,2*Math.PI),this.fillState_&&be.fill(),this.strokeState_&&be.stroke()}this.text_!==""&&this.drawText_(Z.getCenter(),0,2,2)}}setStyle(Z){this.setFillStrokeStyle(Z.getFill(),Z.getStroke()),this.setImageStyle(Z.getImage()),this.setTextStyle(Z.getText())}setTransform(Z){this.transform_=Z}drawGeometry(Z){switch(Z.getType()){case"Point":this.drawPoint(Z);break;case"LineString":this.drawLineString(Z);break;case"Polygon":this.drawPolygon(Z);break;case"MultiPoint":this.drawMultiPoint(Z);break;case"MultiLineString":this.drawMultiLineString(Z);break;case"MultiPolygon":this.drawMultiPolygon(Z);break;case"GeometryCollection":this.drawGeometryCollection(Z);break;case"Circle":this.drawCircle(Z);break}}drawFeature(Z,ee){const ae=ee.getGeometryFunction()(Z);ae&&(this.setStyle(ee),this.drawGeometry(ae))}drawGeometryCollection(Z){const ee=Z.getGeometriesArray();for(let ae=0,ye=ee.length;ae<ye;++ae)this.drawGeometry(ee[ae])}drawPoint(Z){this.squaredTolerance_&&(Z=Z.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const ee=Z.getFlatCoordinates(),ae=Z.getStride();this.image_&&this.drawImages_(ee,0,ee.length,ae),this.text_!==""&&this.drawText_(ee,0,ee.length,ae)}drawMultiPoint(Z){this.squaredTolerance_&&(Z=Z.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const ee=Z.getFlatCoordinates(),ae=Z.getStride();this.image_&&this.drawImages_(ee,0,ee.length,ae),this.text_!==""&&this.drawText_(ee,0,ee.length,ae)}drawLineString(Z){if(this.squaredTolerance_&&(Z=Z.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,Z.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const ee=this.context_,ae=Z.getFlatCoordinates();ee.beginPath(),this.moveToLineTo_(ae,0,ae.length,Z.getStride(),!1),ee.stroke()}if(this.text_!==""){const ee=Z.getFlatMidpoint();this.drawText_(ee,0,2,2)}}}drawMultiLineString(Z){this.squaredTolerance_&&(Z=Z.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const ee=Z.getExtent();if(intersects$1(this.extent_,ee)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const ae=this.context_,ye=Z.getFlatCoordinates();let ve=0;const be=Z.getEnds(),Qe=Z.getStride();ae.beginPath();for(let Xe=0,Je=be.length;Xe<Je;++Xe)ve=this.moveToLineTo_(ye,ve,be[Xe],Qe,!1);ae.stroke()}if(this.text_!==""){const ae=Z.getFlatMidpoints();this.drawText_(ae,0,ae.length,2)}}}drawPolygon(Z){if(this.squaredTolerance_&&(Z=Z.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,Z.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const ee=this.context_;ee.beginPath(),this.drawRings_(Z.getOrientedFlatCoordinates(),0,Z.getEnds(),Z.getStride()),this.fillState_&&ee.fill(),this.strokeState_&&ee.stroke()}if(this.text_!==""){const ee=Z.getFlatInteriorPoint();this.drawText_(ee,0,2,2)}}}drawMultiPolygon(Z){if(this.squaredTolerance_&&(Z=Z.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,Z.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const ee=this.context_,ae=Z.getOrientedFlatCoordinates();let ye=0;const ve=Z.getEndss(),be=Z.getStride();ee.beginPath();for(let Qe=0,Xe=ve.length;Qe<Xe;++Qe){const Je=ve[Qe];ye=this.drawRings_(ae,ye,Je,be)}this.fillState_&&ee.fill(),this.strokeState_&&ee.stroke()}if(this.text_!==""){const ee=Z.getFlatInteriorPoints();this.drawText_(ee,0,ee.length,2)}}}setContextFillState_(Z){const ee=this.context_,ae=this.contextFillState_;ae?ae.fillStyle!=Z.fillStyle&&(ae.fillStyle=Z.fillStyle,ee.fillStyle=Z.fillStyle):(ee.fillStyle=Z.fillStyle,this.contextFillState_={fillStyle:Z.fillStyle})}setContextStrokeState_(Z){const ee=this.context_,ae=this.contextStrokeState_;ae?(ae.lineCap!=Z.lineCap&&(ae.lineCap=Z.lineCap,ee.lineCap=Z.lineCap),equals$2(ae.lineDash,Z.lineDash)||ee.setLineDash(ae.lineDash=Z.lineDash),ae.lineDashOffset!=Z.lineDashOffset&&(ae.lineDashOffset=Z.lineDashOffset,ee.lineDashOffset=Z.lineDashOffset),ae.lineJoin!=Z.lineJoin&&(ae.lineJoin=Z.lineJoin,ee.lineJoin=Z.lineJoin),ae.lineWidth!=Z.lineWidth&&(ae.lineWidth=Z.lineWidth,ee.lineWidth=Z.lineWidth),ae.miterLimit!=Z.miterLimit&&(ae.miterLimit=Z.miterLimit,ee.miterLimit=Z.miterLimit),ae.strokeStyle!=Z.strokeStyle&&(ae.strokeStyle=Z.strokeStyle,ee.strokeStyle=Z.strokeStyle)):(ee.lineCap=Z.lineCap,ee.setLineDash(Z.lineDash),ee.lineDashOffset=Z.lineDashOffset,ee.lineJoin=Z.lineJoin,ee.lineWidth=Z.lineWidth,ee.miterLimit=Z.miterLimit,ee.strokeStyle=Z.strokeStyle,this.contextStrokeState_={lineCap:Z.lineCap,lineDash:Z.lineDash,lineDashOffset:Z.lineDashOffset,lineJoin:Z.lineJoin,lineWidth:Z.lineWidth,miterLimit:Z.miterLimit,strokeStyle:Z.strokeStyle})}setContextTextState_(Z){const ee=this.context_,ae=this.contextTextState_,ye=Z.textAlign?Z.textAlign:defaultTextAlign;ae?(ae.font!=Z.font&&(ae.font=Z.font,ee.font=Z.font),ae.textAlign!=ye&&(ae.textAlign=ye,ee.textAlign=ye),ae.textBaseline!=Z.textBaseline&&(ae.textBaseline=Z.textBaseline,ee.textBaseline=Z.textBaseline)):(ee.font=Z.font,ee.textAlign=ye,ee.textBaseline=Z.textBaseline,this.contextTextState_={font:Z.font,textAlign:ye,textBaseline:Z.textBaseline})}setFillStrokeStyle(Z,ee){if(!Z)this.fillState_=null;else{const ae=Z.getColor();this.fillState_={fillStyle:asColorLike(ae||defaultFillStyle)}}if(!ee)this.strokeState_=null;else{const ae=ee.getColor(),ye=ee.getLineCap(),ve=ee.getLineDash(),be=ee.getLineDashOffset(),Qe=ee.getLineJoin(),Xe=ee.getWidth(),Je=ee.getMiterLimit(),tt=ve||defaultLineDash;this.strokeState_={lineCap:ye!==void 0?ye:defaultLineCap,lineDash:this.pixelRatio_===1?tt:tt.map(it=>it*this.pixelRatio_),lineDashOffset:(be||defaultLineDashOffset)*this.pixelRatio_,lineJoin:Qe!==void 0?Qe:defaultLineJoin,lineWidth:(Xe!==void 0?Xe:defaultLineWidth)*this.pixelRatio_,miterLimit:Je!==void 0?Je:defaultMiterLimit,strokeStyle:asColorLike(ae||defaultStrokeStyle)}}}setImageStyle(Z){let ee;if(!Z||!(ee=Z.getSize())){this.image_=null;return}const ae=Z.getPixelRatio(this.pixelRatio_),ye=Z.getAnchor(),ve=Z.getOrigin();this.image_=Z.getImage(this.pixelRatio_),this.imageAnchorX_=ye[0]*ae,this.imageAnchorY_=ye[1]*ae,this.imageHeight_=ee[1]*ae,this.imageOpacity_=Z.getOpacity(),this.imageOriginX_=ve[0],this.imageOriginY_=ve[1],this.imageRotateWithView_=Z.getRotateWithView(),this.imageRotation_=Z.getRotation();const be=Z.getScaleArray();this.imageScale_=[be[0]*this.pixelRatio_/ae,be[1]*this.pixelRatio_/ae],this.imageWidth_=ee[0]*ae}setTextStyle(Z){if(!Z)this.text_="";else{const ee=Z.getFill();if(!ee)this.textFillState_=null;else{const lt=ee.getColor();this.textFillState_={fillStyle:asColorLike(lt||defaultFillStyle)}}const ae=Z.getStroke();if(!ae)this.textStrokeState_=null;else{const lt=ae.getColor(),ct=ae.getLineCap(),gt=ae.getLineDash(),ut=ae.getLineDashOffset(),mt=ae.getLineJoin(),ei=ae.getWidth(),ni=ae.getMiterLimit();this.textStrokeState_={lineCap:ct!==void 0?ct:defaultLineCap,lineDash:gt||defaultLineDash,lineDashOffset:ut||defaultLineDashOffset,lineJoin:mt!==void 0?mt:defaultLineJoin,lineWidth:ei!==void 0?ei:defaultLineWidth,miterLimit:ni!==void 0?ni:defaultMiterLimit,strokeStyle:asColorLike(lt||defaultStrokeStyle)}}const ye=Z.getFont(),ve=Z.getOffsetX(),be=Z.getOffsetY(),Qe=Z.getRotateWithView(),Xe=Z.getRotation(),Je=Z.getScaleArray(),tt=Z.getText(),it=Z.getTextAlign(),st=Z.getTextBaseline();this.textState_={font:ye!==void 0?ye:defaultFont,textAlign:it!==void 0?it:defaultTextAlign,textBaseline:st!==void 0?st:defaultTextBaseline},this.text_=tt!==void 0?Array.isArray(tt)?tt.reduce((lt,ct,gt)=>lt+=gt%2?" ":ct,""):tt:"",this.textOffsetX_=ve!==void 0?this.pixelRatio_*ve:0,this.textOffsetY_=be!==void 0?this.pixelRatio_*be:0,this.textRotateWithView_=Qe!==void 0?Qe:!1,this.textRotation_=Xe!==void 0?Xe:0,this.textScale_=[this.pixelRatio_*Je[0],this.pixelRatio_*Je[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(ie,Z,ee,ae,ye,ve,be){const Qe=ie[0]*HIT_DETECT_RESOLUTION,Xe=ie[1]*HIT_DETECT_RESOLUTION,Je=createCanvasContext2D(Qe,Xe);Je.imageSmoothingEnabled=!1;const tt=Je.canvas,it=new CanvasImmediateRenderer(Je,HIT_DETECT_RESOLUTION,ye,null,be),st=ee.length,lt=Math.floor((256*256*256-1)/st),ct={};for(let ut=1;ut<=st;++ut){const mt=ee[ut-1],ei=mt.getStyleFunction()||ae;if(!ei)continue;let ni=ei(mt,ve);if(!ni)continue;Array.isArray(ni)||(ni=[ni]);const si=(ut*lt).toString(16).padStart(7,"#00000");for(let li=0,ai=ni.length;li<ai;++li){const ci=ni[li],Ci=ci.getGeometryFunction()(mt);if(!Ci||!intersects$1(ye,Ci.getExtent()))continue;const pi=ci.clone(),gi=pi.getFill();gi&&gi.setColor(si);const _i=pi.getStroke();_i&&(_i.setColor(si),_i.setLineDash(null)),pi.setText(void 0);const bi=ci.getImage();if(bi){const Ii=bi.getImageSize();if(!Ii)continue;const Ri=createCanvasContext2D(Ii[0],Ii[1],void 0,{alpha:!1}),Pi=Ri.canvas;Ri.fillStyle=si,Ri.fillRect(0,0,Pi.width,Pi.height),pi.setImage(new Icon({img:Pi,anchor:bi.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:bi.getOrigin(),opacity:1,size:bi.getSize(),scale:bi.getScale(),rotation:bi.getRotation(),rotateWithView:bi.getRotateWithView()}))}const Mi=pi.getZIndex()||0;let yi=ct[Mi];yi||(yi={},ct[Mi]=yi,yi.Polygon=[],yi.Circle=[],yi.LineString=[],yi.Point=[]);const Ti=Ci.getType();if(Ti==="GeometryCollection"){const Ii=Ci.getGeometriesArrayRecursive();for(let Ri=0,Pi=Ii.length;Ri<Pi;++Ri){const xi=Ii[Ri];yi[xi.getType().replace("Multi","")].push(xi,pi)}}else yi[Ti.replace("Multi","")].push(Ci,pi)}}const gt=Object.keys(ct).map(Number).sort(ascending);for(let ut=0,mt=gt.length;ut<mt;++ut){const ei=ct[gt[ut]];for(const ni in ei){const ri=ei[ni];for(let si=0,li=ri.length;si<li;si+=2){it.setStyle(ri[si+1]);for(let ai=0,ci=Z.length;ai<ci;++ai)it.setTransform(Z[ai]),it.drawGeometry(ri[si])}}}return Je.getImageData(0,0,tt.width,tt.height)}function hitDetect(ie,Z,ee){const ae=[];if(ee){const ye=Math.floor(Math.round(ie[0])*HIT_DETECT_RESOLUTION),ve=Math.floor(Math.round(ie[1])*HIT_DETECT_RESOLUTION),be=(clamp$1(ye,0,ee.width-1)+clamp$1(ve,0,ee.height-1)*ee.width)*4,Qe=ee.data[be],Xe=ee.data[be+1],tt=ee.data[be+2]+256*(Xe+256*Qe),it=Math.floor((256*256*256-1)/Z.length);tt&&tt%it===0&&ae.push(Z[tt/it-1])}return ae}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function getSquaredTolerance(ie,Z){const ee=getTolerance(ie,Z);return ee*ee}function getTolerance(ie,Z){return SIMPLIFY_TOLERANCE*ie/Z}function renderCircleGeometry(ie,Z,ee,ae,ye){const ve=ee.getFill(),be=ee.getStroke();if(ve||be){const Xe=ie.getBuilder(ee.getZIndex(),"Circle");Xe.setFillStrokeStyle(ve,be),Xe.drawCircle(Z,ae)}const Qe=ee.getText();if(Qe&&Qe.getText()){const Xe=(ye||ie).getBuilder(ee.getZIndex(),"Text");Xe.setTextStyle(Qe),Xe.drawText(Z,ae)}}function renderFeature(ie,Z,ee,ae,ye,ve,be){let Qe=!1;const Xe=ee.getImage();if(Xe){const Je=Xe.getImageState();Je==ImageState.LOADED||Je==ImageState.ERROR?Xe.unlistenImageChange(ye):(Je==ImageState.IDLE&&Xe.load(),Xe.listenImageChange(ye),Qe=!0)}return renderFeatureInternal(ie,Z,ee,ae,ve,be),Qe}function renderFeatureInternal(ie,Z,ee,ae,ye,ve){const be=ee.getGeometryFunction()(Z);if(!be)return;const Qe=be.simplifyTransformed(ae,ye);if(ee.getRenderer())renderGeometry(ie,Qe,ee,Z);else{const Je=GEOMETRY_RENDERERS[Qe.getType()];Je(ie,Qe,ee,Z,ve)}}function renderGeometry(ie,Z,ee,ae){if(Z.getType()=="GeometryCollection"){const ve=Z.getGeometries();for(let be=0,Qe=ve.length;be<Qe;++be)renderGeometry(ie,ve[be],ee,ae);return}ie.getBuilder(ee.getZIndex(),"Default").drawCustom(Z,ae,ee.getRenderer(),ee.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(ie,Z,ee,ae,ye){const ve=Z.getGeometriesArray();let be,Qe;for(be=0,Qe=ve.length;be<Qe;++be){const Xe=GEOMETRY_RENDERERS[ve[be].getType()];Xe(ie,ve[be],ee,ae,ye)}}function renderLineStringGeometry(ie,Z,ee,ae,ye){const ve=ee.getStroke();if(ve){const Qe=ie.getBuilder(ee.getZIndex(),"LineString");Qe.setFillStrokeStyle(null,ve),Qe.drawLineString(Z,ae)}const be=ee.getText();if(be&&be.getText()){const Qe=(ye||ie).getBuilder(ee.getZIndex(),"Text");Qe.setTextStyle(be),Qe.drawText(Z,ae)}}function renderMultiLineStringGeometry(ie,Z,ee,ae,ye){const ve=ee.getStroke();if(ve){const Qe=ie.getBuilder(ee.getZIndex(),"LineString");Qe.setFillStrokeStyle(null,ve),Qe.drawMultiLineString(Z,ae)}const be=ee.getText();if(be&&be.getText()){const Qe=(ye||ie).getBuilder(ee.getZIndex(),"Text");Qe.setTextStyle(be),Qe.drawText(Z,ae)}}function renderMultiPolygonGeometry(ie,Z,ee,ae,ye){const ve=ee.getFill(),be=ee.getStroke();if(be||ve){const Xe=ie.getBuilder(ee.getZIndex(),"Polygon");Xe.setFillStrokeStyle(ve,be),Xe.drawMultiPolygon(Z,ae)}const Qe=ee.getText();if(Qe&&Qe.getText()){const Xe=(ye||ie).getBuilder(ee.getZIndex(),"Text");Xe.setTextStyle(Qe),Xe.drawText(Z,ae)}}function renderPointGeometry(ie,Z,ee,ae,ye){const ve=ee.getImage(),be=ee.getText();let Qe;if(ve){if(ve.getImageState()!=ImageState.LOADED)return;let Xe=ie;if(ye){const tt=ve.getDeclutterMode();if(tt!=="none")if(Xe=ye,tt==="obstacle"){const it=ie.getBuilder(ee.getZIndex(),"Image");it.setImageStyle(ve,Qe),it.drawPoint(Z,ae)}else be&&be.getText()&&(Qe={})}const Je=Xe.getBuilder(ee.getZIndex(),"Image");Je.setImageStyle(ve,Qe),Je.drawPoint(Z,ae)}if(be&&be.getText()){let Xe=ie;ye&&(Xe=ye);const Je=Xe.getBuilder(ee.getZIndex(),"Text");Je.setTextStyle(be,Qe),Je.drawText(Z,ae)}}function renderMultiPointGeometry(ie,Z,ee,ae,ye){const ve=ee.getImage(),be=ee.getText();let Qe;if(ve){if(ve.getImageState()!=ImageState.LOADED)return;let Xe=ie;if(ye){const tt=ve.getDeclutterMode();if(tt!=="none")if(Xe=ye,tt==="obstacle"){const it=ie.getBuilder(ee.getZIndex(),"Image");it.setImageStyle(ve,Qe),it.drawMultiPoint(Z,ae)}else be&&be.getText()&&(Qe={})}const Je=Xe.getBuilder(ee.getZIndex(),"Image");Je.setImageStyle(ve,Qe),Je.drawMultiPoint(Z,ae)}if(be&&be.getText()){let Xe=ie;ye&&(Xe=ye);const Je=Xe.getBuilder(ee.getZIndex(),"Text");Je.setTextStyle(be,Qe),Je.drawText(Z,ae)}}function renderPolygonGeometry(ie,Z,ee,ae,ye){const ve=ee.getFill(),be=ee.getStroke();if(ve||be){const Xe=ie.getBuilder(ee.getZIndex(),"Polygon");Xe.setFillStrokeStyle(ve,be),Xe.drawPolygon(Z,ae)}const Qe=ee.getText();if(Qe&&Qe.getText()){const Xe=(ye||ie).getBuilder(ee.getZIndex(),"Text");Xe.setTextStyle(Qe),Xe.drawText(Z,ae)}}class Source extends BaseObject{constructor(Z){super(),this.projection=get$1(Z.projection),this.attributions_=adaptAttributions(Z.attributions),this.attributionsCollapsible_=Z.attributionsCollapsible!==void 0?Z.attributionsCollapsible:!0,this.loading=!1,this.state_=Z.state!==void 0?Z.state:"ready",this.wrapX_=Z.wrapX!==void 0?Z.wrapX:!1,this.interpolate_=!!Z.interpolate,this.viewResolver=null,this.viewRejector=null;const ee=this;this.viewPromise_=new Promise(function(ae,ye){ee.viewResolver=ae,ee.viewRejector=ye})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(Z){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(Z){this.attributions_=adaptAttributions(Z),this.changed()}setState(Z){this.state_=Z,this.changed()}}function adaptAttributions(ie){return ie?Array.isArray(ie)?function(Z){return ie}:typeof ie=="function"?ie:function(Z){return[ie]}:null}let withCredentials=!1;function loadFeaturesXhr(ie,Z,ee,ae,ye,ve,be){const Qe=new XMLHttpRequest;Qe.open("GET",typeof ie=="function"?ie(ee,ae,ye):ie,!0),Z.getType()=="arraybuffer"&&(Qe.responseType="arraybuffer"),Qe.withCredentials=withCredentials,Qe.onload=function(Xe){if(!Qe.status||Qe.status>=200&&Qe.status<300){const Je=Z.getType();let tt;Je=="json"||Je=="text"?tt=Qe.responseText:Je=="xml"?(tt=Qe.responseXML,tt||(tt=new DOMParser().parseFromString(Qe.responseText,"application/xml"))):Je=="arraybuffer"&&(tt=Qe.response),tt?ve(Z.readFeatures(tt,{extent:ee,featureProjection:ye}),Z.readProjection(tt)):be()}else be()},Qe.onerror=be,Qe.send()}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Tile extends Target{constructor(Z,ee,ae){super(),ae=ae||{},this.tileCoord=Z,this.state=ee,this.interimTile=null,this.key="",this.transition_=ae.transition===void 0?250:ae.transition,this.transitionStarts_={},this.interpolate=!!ae.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let Z=this.interimTile;do{if(Z.getState()==TileState.LOADED)return this.transition_=0,Z;Z=Z.interimTile}while(Z);return this}refreshInterimChain(){if(!this.interimTile)return;let Z=this.interimTile,ee=this;do{if(Z.getState()==TileState.LOADED){Z.interimTile=null;break}else Z.getState()==TileState.LOADING?ee=Z:Z.getState()==TileState.IDLE?ee.interimTile=Z.interimTile:ee=Z;Z=ee.interimTile}while(Z)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(Z){if(this.state!==TileState.ERROR&&this.state>Z)throw new Error("Tile load sequence violation");this.state=Z,this.changed()}load(){abstract()}getAlpha(Z,ee){if(!this.transition_)return 1;let ae=this.transitionStarts_[Z];if(!ae)ae=ee,this.transitionStarts_[Z]=ae;else if(ae===-1)return 1;const ye=ee-ae+1e3/60;return ye>=this.transition_?1:easeIn(ye/this.transition_)}inTransition(Z){return this.transition_?this.transitionStarts_[Z]!==-1:!1}endTransition(Z){this.transition_&&(this.transitionStarts_[Z]=-1)}}class ImageTile extends Tile{constructor(Z,ee,ae,ye,ve,be){super(Z,ee,be),this.crossOrigin_=ye,this.src_=ae,this.key=ae,this.image_=new Image,ye!==null&&(this.image_.crossOrigin=ye),this.unlisten_=null,this.tileLoadFunction_=ve}getImage(){return this.image_}setImage(Z){this.image_=Z,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const Z=this.image_;Z.naturalWidth&&Z.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const ie=createCanvasContext2D(1,1);return ie.fillStyle="rgba(0,0,0,0)",ie.fillRect(0,0,1,1),ie.canvas}class Kinetic{constructor(Z,ee,ae){this.decay_=Z,this.minVelocity_=ee,this.delay_=ae,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(Z,ee){this.points_.push(Z,ee,Date.now())}end(){if(this.points_.length<6)return!1;const Z=Date.now()-this.delay_,ee=this.points_.length-3;if(this.points_[ee+2]<Z)return!1;let ae=ee-3;for(;ae>0&&this.points_[ae+2]>Z;)ae-=3;const ye=this.points_[ee+2]-this.points_[ae+2];if(ye<1e3/60)return!1;const ve=this.points_[ee]-this.points_[ae],be=this.points_[ee+1]-this.points_[ae+1];return this.angle_=Math.atan2(be,ve),this.initialVelocity_=Math.sqrt(ve*ve+be*be)/ye,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class MapRenderer extends Disposable{constructor(Z){super(),this.map_=Z}dispatchRenderEvent(Z,ee){abstract()}calculateMatrices2D(Z){const ee=Z.viewState,ae=Z.coordinateToPixelTransform,ye=Z.pixelToCoordinateTransform;compose$1(ae,Z.size[0]/2,Z.size[1]/2,1/ee.resolution,-1/ee.resolution,-ee.rotation,-ee.center[0],-ee.center[1]),makeInverse(ye,ae)}forEachFeatureAtCoordinate(Z,ee,ae,ye,ve,be,Qe,Xe){let Je;const tt=ee.viewState;function it(ri,si,li,ai){return ve.call(be,si,ri?li:null,ai)}const st=tt.projection,lt=wrapX$1(Z.slice(),st),ct=[[0,0]];if(st.canWrapX()&&ye){const ri=st.getExtent(),si=getWidth(ri);ct.push([-si,0],[si,0])}const gt=ee.layerStatesArray,ut=gt.length,mt=[],ei=[];for(let ri=0;ri<ct.length;ri++)for(let si=ut-1;si>=0;--si){const li=gt[si],ai=li.layer;if(ai.hasRenderer()&&inView(li,tt)&&Qe.call(Xe,ai)){const ci=ai.getRenderer(),Ci=ai.getSource();if(ci&&Ci){const pi=Ci.getWrapX()?lt:Z,gi=it.bind(null,li.managed);ei[0]=pi[0]+ct[ri][0],ei[1]=pi[1]+ct[ri][1],Je=ci.forEachFeatureAtCoordinate(ei,ee,ae,gi,mt)}if(Je)return Je}}if(mt.length===0)return;const ni=1/mt.length;return mt.forEach((ri,si)=>ri.distanceSq+=si*ni),mt.sort((ri,si)=>ri.distanceSq-si.distanceSq),mt.some(ri=>Je=ri.callback(ri.feature,ri.layer,ri.geometry)),Je}hasFeatureAtCoordinate(Z,ee,ae,ye,ve,be){return this.forEachFeatureAtCoordinate(Z,ee,ae,ye,TRUE,this,ve,be)!==void 0}getMap(){return this.map_}renderFrame(Z){abstract()}flushDeclutterItems(Z){}scheduleExpireIconCache(Z){shared.canExpireCache()&&Z.postRenderFunctions.push(expireIconCache)}}function expireIconCache(ie,Z){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(Z){super(Z),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,Z.redrawText.bind(Z)),this.element_=document.createElement("div");const ee=this.element_.style;ee.position="absolute",ee.width="100%",ee.height="100%",ee.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const ae=Z.getViewport();ae.insertBefore(this.element_,ae.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(Z,ee){const ae=this.getMap();if(ae.hasListener(Z)){const ye=new RenderEvent(Z,void 0,ee);ae.dispatchEvent(ye)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(Z){if(!Z){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(Z),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,Z);const ee=Z.layerStatesArray.sort(function(be,Qe){return be.zIndex-Qe.zIndex}),ae=Z.viewState;this.children_.length=0;const ye=this.declutterLayers_;ye.length=0;let ve=null;for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=ee[be];Z.layerIndex=be;const Je=Xe.layer,tt=Je.getSourceState();if(!inView(Xe,ae)||tt!="ready"&&tt!="undefined"){Je.unrender();continue}const it=Je.render(Z,ve);it&&(it!==ve&&(this.children_.push(it),ve=it),"getDeclutter"in Je&&ye.push(Je))}this.flushDeclutterItems(Z),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,Z),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(Z)}flushDeclutterItems(Z){const ee=this.declutterLayers_;for(let ae=ee.length-1;ae>=0;--ae)ee[ae].renderDeclutter(Z);ee.length=0}}class GroupEvent extends BaseEvent{constructor(Z,ee){super(Z),this.layer=ee}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(Z){Z=Z||{};const ee=Object.assign({},Z);delete ee.layers;let ae=Z.layers;super(ee),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),ae?Array.isArray(ae)?ae=new Collection(ae.slice(),{unique:!0}):assert(typeof ae.getArray=="function","Expected `layers` to be an array or a `Collection`"):ae=new Collection(void 0,{unique:!0}),this.setLayers(ae)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const Z=this.getLayers();this.layersListenerKeys_.push(listen(Z,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(Z,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const ae in this.listenerKeys_)this.listenerKeys_[ae].forEach(unlistenByKey);clear(this.listenerKeys_);const ee=Z.getArray();for(let ae=0,ye=ee.length;ae<ye;ae++){const ve=ee[ae];this.registerLayerListeners_(ve),this.dispatchEvent(new GroupEvent("addlayer",ve))}this.changed()}registerLayerListeners_(Z){const ee=[listen(Z,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(Z,EventType.CHANGE,this.handleLayerChange_,this)];Z instanceof LayerGroup&&ee.push(listen(Z,"addlayer",this.handleLayerGroupAdd_,this),listen(Z,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(Z)]=ee}handleLayerGroupAdd_(Z){this.dispatchEvent(new GroupEvent("addlayer",Z.layer))}handleLayerGroupRemove_(Z){this.dispatchEvent(new GroupEvent("removelayer",Z.layer))}handleLayersAdd_(Z){const ee=Z.element;this.registerLayerListeners_(ee),this.dispatchEvent(new GroupEvent("addlayer",ee)),this.changed()}handleLayersRemove_(Z){const ee=Z.element,ae=getUid(ee);this.listenerKeys_[ae].forEach(unlistenByKey),delete this.listenerKeys_[ae],this.dispatchEvent(new GroupEvent("removelayer",ee)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(Z){const ee=this.getLayers();if(ee){const ae=ee.getArray();for(let ye=0,ve=ae.length;ye<ve;++ye)this.dispatchEvent(new GroupEvent("removelayer",ae[ye]))}this.set(Property.LAYERS,Z)}getLayersArray(Z){return Z=Z!==void 0?Z:[],this.getLayers().forEach(function(ee){ee.getLayersArray(Z)}),Z}getLayerStatesArray(Z){const ee=Z!==void 0?Z:[],ae=ee.length;this.getLayers().forEach(function(be){be.getLayerStatesArray(ee)});const ye=this.getLayerState();let ve=ye.zIndex;!Z&&ye.zIndex===void 0&&(ve=0);for(let be=ae,Qe=ee.length;be<Qe;be++){const Xe=ee[be];Xe.opacity*=ye.opacity,Xe.visible=Xe.visible&&ye.visible,Xe.maxResolution=Math.min(Xe.maxResolution,ye.maxResolution),Xe.minResolution=Math.max(Xe.minResolution,ye.minResolution),Xe.minZoom=Math.max(Xe.minZoom,ye.minZoom),Xe.maxZoom=Math.min(Xe.maxZoom,ye.maxZoom),ye.extent!==void 0&&(Xe.extent!==void 0?Xe.extent=getIntersection(Xe.extent,ye.extent):Xe.extent=ye.extent),Xe.zIndex===void 0&&(Xe.zIndex=ve)}return ee}getSourceState(){return"ready"}}class MapEvent extends BaseEvent{constructor(Z,ee,ae){super(Z),this.map=ee,this.frameState=ae!==void 0?ae:null}}class MapBrowserEvent extends MapEvent{constructor(Z,ee,ae,ye,ve,be){super(Z,ee,ve),this.originalEvent=ae,this.pixel_=null,this.coordinate_=null,this.dragging=ye!==void 0?ye:!1,this.activePointers=be}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(Z){this.pixel_=Z}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(Z){this.coordinate_=Z}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends Target{constructor(Z,ee){super(Z),this.map_=Z,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=ee===void 0?1:ee,this.down_=null;const ae=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=ae,this.pointerdownListenerKey_=listen(ae,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(ae,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(Z){let ee=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,Z);this.dispatchEvent(ee),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,ee=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,Z),this.dispatchEvent(ee)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const ae=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,Z);this.dispatchEvent(ae)},250)}updateActivePointers_(Z){const ee=Z,ae=ee.pointerId;if(ee.type==MapBrowserEventType.POINTERUP||ee.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[ae];for(const ye in this.trackedTouches_)if(this.trackedTouches_[ye].target!==ee.target){delete this.trackedTouches_[ye];break}}else(ee.type==MapBrowserEventType.POINTERDOWN||ee.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[ae]=ee);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(Z){this.updateActivePointers_(Z);const ee=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,Z,void 0,void 0,this.activePointers_);this.dispatchEvent(ee),this.emulateClicks_&&!ee.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(Z)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(Z){return Z.button===0}handlePointerDown_(Z){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(Z);const ee=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,Z,void 0,void 0,this.activePointers_);if(this.dispatchEvent(ee),this.down_=new PointerEvent(Z.type,Z),Object.defineProperty(this.down_,"target",{writable:!1,value:Z.target}),this.dragListenerKeys_.length===0){const ae=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(ae,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(ae,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==ae&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(Z){if(this.isMoving_(Z)){this.updateActivePointers_(Z),this.dragging_=!0;const ee=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,Z,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(ee)}}relayMoveEvent_(Z){this.originalPointerMoveEvent_=Z;const ee=!!(this.down_&&this.isMoving_(Z));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,Z,ee))}handleTouchMove_(Z){const ee=this.originalPointerMoveEvent_;(!ee||ee.defaultPrevented)&&(typeof Z.cancelable!="boolean"||Z.cancelable===!0)&&Z.preventDefault()}isMoving_(Z){return this.dragging_||Math.abs(Z.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(Z.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(Z,ee){this.priorityFunction_=Z,this.keyFunction_=ee,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear(this.queuedElements_)}dequeue(){const Z=this.elements_,ee=this.priorities_,ae=Z[0];Z.length==1?(Z.length=0,ee.length=0):(Z[0]=Z.pop(),ee[0]=ee.pop(),this.siftUp_(0));const ye=this.keyFunction_(ae);return delete this.queuedElements_[ye],ae}enqueue(Z){assert(!(this.keyFunction_(Z)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const ee=this.priorityFunction_(Z);return ee!=DROP?(this.elements_.push(Z),this.priorities_.push(ee),this.queuedElements_[this.keyFunction_(Z)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(Z){return Z*2+1}getRightChildIndex_(Z){return Z*2+2}getParentIndex_(Z){return Z-1>>1}heapify_(){let Z;for(Z=(this.elements_.length>>1)-1;Z>=0;Z--)this.siftUp_(Z)}isEmpty(){return this.elements_.length===0}isKeyQueued(Z){return Z in this.queuedElements_}isQueued(Z){return this.isKeyQueued(this.keyFunction_(Z))}siftUp_(Z){const ee=this.elements_,ae=this.priorities_,ye=ee.length,ve=ee[Z],be=ae[Z],Qe=Z;for(;Z<ye>>1;){const Xe=this.getLeftChildIndex_(Z),Je=this.getRightChildIndex_(Z),tt=Je<ye&&ae[Je]<ae[Xe]?Je:Xe;ee[Z]=ee[tt],ae[Z]=ae[tt],Z=tt}ee[Z]=ve,ae[Z]=be,this.siftDown_(Qe,Z)}siftDown_(Z,ee){const ae=this.elements_,ye=this.priorities_,ve=ae[ee],be=ye[ee];for(;ee>Z;){const Qe=this.getParentIndex_(ee);if(ye[Qe]>be)ae[ee]=ae[Qe],ye[ee]=ye[Qe],ee=Qe;else break}ae[ee]=ve,ye[ee]=be}reprioritize(){const Z=this.priorityFunction_,ee=this.elements_,ae=this.priorities_;let ye=0;const ve=ee.length;let be,Qe,Xe;for(Qe=0;Qe<ve;++Qe)be=ee[Qe],Xe=Z(be),Xe==DROP?delete this.queuedElements_[this.keyFunction_(be)]:(ae[ye]=Xe,ee[ye++]=be);ee.length=ye,ae.length=ye,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(Z,ee){super(function(ae){return Z.apply(null,ae)},function(ae){return ae[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=ee,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(Z){const ee=super.enqueue(Z);return ee&&Z[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),ee}getTilesLoading(){return this.tilesLoading_}handleTileChange(Z){const ee=Z.target,ae=ee.getState();if(ae===TileState.LOADED||ae===TileState.ERROR||ae===TileState.EMPTY){ae!==TileState.ERROR&&ee.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const ye=ee.getKey();ye in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[ye],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(Z,ee){let ae=0,ye,ve,be;for(;this.tilesLoading_<Z&&ae<ee&&this.getCount()>0;)ve=this.dequeue()[0],be=ve.getKey(),ye=ve.getState(),ye===TileState.IDLE&&!(be in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[be]=!0,++this.tilesLoading_,++ae,ve.load())}}function getTilePriority(ie,Z,ee,ae,ye){if(!ie||!(ee in ie.wantedTiles)||!ie.wantedTiles[ee][Z.getKey()])return DROP;const ve=ie.viewState.center,be=ae[0]-ve[0],Qe=ae[1]-ve[1];return 65536*Math.log(ye)+Math.sqrt(be*be+Qe*Qe)/ye}class Control extends BaseObject{constructor(Z){super();const ee=Z.element;ee&&!Z.target&&!ee.style.pointerEvents&&(ee.style.pointerEvents="auto"),this.element=ee||null,this.target_=null,this.map_=null,this.listenerKeys=[],Z.render&&(this.render=Z.render),Z.target&&this.setTarget(Z.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(Z){this.map_&&removeNode(this.element);for(let ee=0,ae=this.listenerKeys.length;ee<ae;++ee)unlistenByKey(this.listenerKeys[ee]);this.listenerKeys.length=0,this.map_=Z,Z&&((this.target_?this.target_:Z.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(Z,MapEventType.POSTRENDER,this.render,this)),Z.render())}render(Z){}setTarget(Z){this.target_=typeof Z=="string"?document.getElementById(Z):Z}}class Attribution extends Control{constructor(Z){Z=Z||{},super({element:document.createElement("div"),render:Z.render,target:Z.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=Z.collapsed!==void 0?Z.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=Z.collapsible!==void 0,this.collapsible_=Z.collapsible!==void 0?Z.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const ee=Z.className!==void 0?Z.className:"ol-attribution",ae=Z.tipLabel!==void 0?Z.tipLabel:"Attributions",ye=Z.expandClassName!==void 0?Z.expandClassName:ee+"-expand",ve=Z.collapseLabel!==void 0?Z.collapseLabel:"",be=Z.collapseClassName!==void 0?Z.collapseClassName:ee+"-collapse";typeof ve=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=ve,this.collapseLabel_.className=be):this.collapseLabel_=ve;const Qe=Z.label!==void 0?Z.label:"i";typeof Qe=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Qe,this.label_.className=ye):this.label_=Qe;const Xe=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=ae,this.toggleButton_.appendChild(Xe),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const Je=ee+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),tt=this.element;tt.className=Je,tt.appendChild(this.toggleButton_),tt.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(Z){const ee=Array.from(new Set(this.getMap().getAllLayers().flatMap(ye=>ye.getAttributions(Z)))),ae=!this.getMap().getAllLayers().some(ye=>ye.getSource()&&ye.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(ae),ee}updateElement_(Z){if(!Z){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const ee=this.collectSourceAttributions_(Z),ae=ee.length>0;if(this.renderedVisible_!=ae&&(this.element.style.display=ae?"":"none",this.renderedVisible_=ae),!equals$2(ee,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let ye=0,ve=ee.length;ye<ve;++ye){const be=document.createElement("li");be.innerHTML=ee[ye],this.ulElement_.appendChild(be)}this.renderedAttributions_=ee}}handleClick_(Z){Z.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(Z){this.collapsible_!==Z&&(this.collapsible_=Z,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(Z){this.userCollapsed_=Z,!(!this.collapsible_||this.collapsed_===Z)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(Z){this.updateElement_(Z.frameState)}}const Attribution$1=Attribution;class Rotate extends Control{constructor(Z){Z=Z||{},super({element:document.createElement("div"),render:Z.render,target:Z.target});const ee=Z.className!==void 0?Z.className:"ol-rotate",ae=Z.label!==void 0?Z.label:"",ye=Z.compassClassName!==void 0?Z.compassClassName:"ol-compass";this.label_=null,typeof ae=="string"?(this.label_=document.createElement("span"),this.label_.className=ye,this.label_.textContent=ae):(this.label_=ae,this.label_.classList.add(ye));const ve=Z.tipLabel?Z.tipLabel:"Reset rotation",be=document.createElement("button");be.className=ee+"-reset",be.setAttribute("type","button"),be.title=ve,be.appendChild(this.label_),be.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const Qe=ee+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Xe=this.element;Xe.className=Qe,Xe.appendChild(be),this.callResetNorth_=Z.resetNorth?Z.resetNorth:void 0,this.duration_=Z.duration!==void 0?Z.duration:250,this.autoHide_=Z.autoHide!==void 0?Z.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(Z){Z.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const ee=this.getMap().getView();if(!ee)return;const ae=ee.getRotation();ae!==void 0&&(this.duration_>0&&ae%(2*Math.PI)!==0?ee.animate({rotation:0,duration:this.duration_,easing:easeOut}):ee.setRotation(0))}render(Z){const ee=Z.frameState;if(!ee)return;const ae=ee.viewState.rotation;if(ae!=this.rotation_){const ye="rotate("+ae+"rad)";if(this.autoHide_){const ve=this.element.classList.contains(CLASS_HIDDEN);!ve&&ae===0?this.element.classList.add(CLASS_HIDDEN):ve&&ae!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=ye}this.rotation_=ae}}const Rotate$1=Rotate;class Zoom extends Control{constructor(Z){Z=Z||{},super({element:document.createElement("div"),target:Z.target});const ee=Z.className!==void 0?Z.className:"ol-zoom",ae=Z.delta!==void 0?Z.delta:1,ye=Z.zoomInClassName!==void 0?Z.zoomInClassName:ee+"-in",ve=Z.zoomOutClassName!==void 0?Z.zoomOutClassName:ee+"-out",be=Z.zoomInLabel!==void 0?Z.zoomInLabel:"+",Qe=Z.zoomOutLabel!==void 0?Z.zoomOutLabel:"",Xe=Z.zoomInTipLabel!==void 0?Z.zoomInTipLabel:"Zoom in",Je=Z.zoomOutTipLabel!==void 0?Z.zoomOutTipLabel:"Zoom out",tt=document.createElement("button");tt.className=ye,tt.setAttribute("type","button"),tt.title=Xe,tt.appendChild(typeof be=="string"?document.createTextNode(be):be),tt.addEventListener(EventType.CLICK,this.handleClick_.bind(this,ae),!1);const it=document.createElement("button");it.className=ve,it.setAttribute("type","button"),it.title=Je,it.appendChild(typeof Qe=="string"?document.createTextNode(Qe):Qe),it.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-ae),!1);const st=ee+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,lt=this.element;lt.className=st,lt.appendChild(tt),lt.appendChild(it),this.duration_=Z.duration!==void 0?Z.duration:250}handleClick_(Z,ee){ee.preventDefault(),this.zoomByDelta_(Z)}zoomByDelta_(Z){const ae=this.getMap().getView();if(!ae)return;const ye=ae.getZoom();if(ye!==void 0){const ve=ae.getConstrainedZoom(ye+Z);this.duration_>0?(ae.getAnimating()&&ae.cancelAnimations(),ae.animate({zoom:ve,duration:this.duration_,easing:easeOut})):ae.setZoom(ve)}}}const Zoom$1=Zoom;function defaults$2(ie){ie=ie||{};const Z=new Collection;return(ie.zoom!==void 0?ie.zoom:!0)&&Z.push(new Zoom$1(ie.zoomOptions)),(ie.rotate!==void 0?ie.rotate:!0)&&Z.push(new Rotate$1(ie.rotateOptions)),(ie.attribution!==void 0?ie.attribution:!0)&&Z.push(new Attribution$1(ie.attributionOptions)),Z}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(Z){super(),this.on,this.once,this.un,Z&&Z.handleEvent&&(this.handleEvent=Z.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(Z){return!0}setActive(Z){this.set(InteractionProperty.ACTIVE,Z)}setMap(Z){this.map_=Z}}function pan(ie,Z,ee){const ae=ie.getCenterInternal();if(ae){const ye=[ae[0]+Z[0],ae[1]+Z[1]];ie.animateInternal({duration:ee!==void 0?ee:250,easing:linear,center:ie.getConstrainedCenter(ye)})}}function zoomByDelta(ie,Z,ee,ae){const ye=ie.getZoom();if(ye===void 0)return;const ve=ie.getConstrainedZoom(ye+Z),be=ie.getResolutionForZoom(ve);ie.getAnimating()&&ie.cancelAnimations(),ie.animate({resolution:be,anchor:ee,duration:ae!==void 0?ae:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(Z){super(),Z=Z||{},this.delta_=Z.delta?Z.delta:1,this.duration_=Z.duration!==void 0?Z.duration:250}handleEvent(Z){let ee=!1;if(Z.type==MapBrowserEventType.DBLCLICK){const ae=Z.originalEvent,ye=Z.map,ve=Z.coordinate,be=ae.shiftKey?-this.delta_:this.delta_,Qe=ye.getView();zoomByDelta(Qe,be,ve,this.duration_),ae.preventDefault(),ee=!0}return!ee}}const DoubleClickZoom$1=DoubleClickZoom;class PointerInteraction extends Interaction{constructor(Z){Z=Z||{},super(Z),Z.handleDownEvent&&(this.handleDownEvent=Z.handleDownEvent),Z.handleDragEvent&&(this.handleDragEvent=Z.handleDragEvent),Z.handleMoveEvent&&(this.handleMoveEvent=Z.handleMoveEvent),Z.handleUpEvent&&(this.handleUpEvent=Z.handleUpEvent),Z.stopDown&&(this.stopDown=Z.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(Z){return!1}handleDragEvent(Z){}handleEvent(Z){if(!Z.originalEvent)return!0;let ee=!1;if(this.updateTrackedPointers_(Z),this.handlingDownUpSequence){if(Z.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(Z),Z.originalEvent.preventDefault();else if(Z.type==MapBrowserEventType.POINTERUP){const ae=this.handleUpEvent(Z);this.handlingDownUpSequence=ae&&this.targetPointers.length>0}}else if(Z.type==MapBrowserEventType.POINTERDOWN){const ae=this.handleDownEvent(Z);this.handlingDownUpSequence=ae,ee=this.stopDown(ae)}else Z.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(Z);return!ee}handleMoveEvent(Z){}handleUpEvent(Z){return!1}stopDown(Z){return Z}updateTrackedPointers_(Z){Z.activePointers&&(this.targetPointers=Z.activePointers)}}function centroid(ie){const Z=ie.length;let ee=0,ae=0;for(let ye=0;ye<Z;ye++)ee+=ie[ye].clientX,ae+=ie[ye].clientY;return{clientX:ee/Z,clientY:ae/Z}}function all(ie){const Z=arguments;return function(ee){let ae=!0;for(let ye=0,ve=Z.length;ye<ve&&(ae=ae&&Z[ye](ee),!!ae);++ye);return ae}}const altShiftKeysOnly=function(ie){const Z=ie.originalEvent;return Z.altKey&&!(Z.metaKey||Z.ctrlKey)&&Z.shiftKey},focus=function(ie){const Z=ie.map.getTargetElement(),ee=ie.map.getOwnerDocument().activeElement;return Z.contains(ee)},focusWithTabindex=function(ie){return ie.map.getTargetElement().hasAttribute("tabindex")?focus(ie):!0},always=TRUE,mouseActionButton=function(ie){const Z=ie.originalEvent;return Z.button==0&&!(WEBKIT&&MAC&&Z.ctrlKey)},noModifierKeys=function(ie){const Z=ie.originalEvent;return!Z.altKey&&!(Z.metaKey||Z.ctrlKey)&&!Z.shiftKey},platformModifierKey=function(ie){const Z=ie.originalEvent;return MAC?Z.metaKey:Z.ctrlKey},shiftKeyOnly=function(ie){const Z=ie.originalEvent;return!Z.altKey&&!(Z.metaKey||Z.ctrlKey)&&Z.shiftKey},targetNotEditable=function(ie){const Z=ie.originalEvent,ee=Z.target.tagName;return ee!=="INPUT"&&ee!=="SELECT"&&ee!=="TEXTAREA"&&!Z.target.isContentEditable},mouseOnly=function(ie){const Z=ie.originalEvent;return assert(Z!==void 0,"mapBrowserEvent must originate from a pointer event"),Z.pointerType=="mouse"},primaryAction=function(ie){const Z=ie.originalEvent;return assert(Z!==void 0,"mapBrowserEvent must originate from a pointer event"),Z.isPrimary&&Z.button===0};class DragPan extends PointerInteraction{constructor(Z){super({stopDown:FALSE}),Z=Z||{},this.kinetic_=Z.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const ee=Z.condition?Z.condition:all(noModifierKeys,primaryAction);this.condition_=Z.onFocusOnly?all(focusWithTabindex,ee):ee,this.noKinetic_=!1}handleDragEvent(Z){const ee=Z.map;this.panning_||(this.panning_=!0,ee.getView().beginInteraction());const ae=this.targetPointers,ye=ee.getEventPixel(centroid(ae));if(ae.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(ye[0],ye[1]),this.lastCentroid){const ve=[this.lastCentroid[0]-ye[0],ye[1]-this.lastCentroid[1]],Qe=Z.map.getView();scale$2(ve,Qe.getResolution()),rotate$2(ve,Qe.getRotation()),Qe.adjustCenterInternal(ve)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=ye,this.lastPointersCount_=ae.length,Z.originalEvent.preventDefault()}handleUpEvent(Z){const ee=Z.map,ae=ee.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const ye=this.kinetic_.getDistance(),ve=this.kinetic_.getAngle(),be=ae.getCenterInternal(),Qe=ee.getPixelFromCoordinateInternal(be),Xe=ee.getCoordinateFromPixelInternal([Qe[0]-ye*Math.cos(ve),Qe[1]-ye*Math.sin(ve)]);ae.animateInternal({center:ae.getConstrainedCenter(Xe),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,ae.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(Z){if(this.targetPointers.length>0&&this.condition_(Z)){const ae=Z.map.getView();return this.lastCentroid=null,ae.getAnimating()&&ae.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const DragPan$1=DragPan;class DragRotate extends PointerInteraction{constructor(Z){Z=Z||{},super({stopDown:FALSE}),this.condition_=Z.condition?Z.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=Z.duration!==void 0?Z.duration:250}handleDragEvent(Z){if(!mouseOnly(Z))return;const ee=Z.map,ae=ee.getView();if(ae.getConstraints().rotation===disable)return;const ye=ee.getSize(),ve=Z.pixel,be=Math.atan2(ye[1]/2-ve[1],ve[0]-ye[0]/2);if(this.lastAngle_!==void 0){const Qe=be-this.lastAngle_;ae.adjustRotationInternal(-Qe)}this.lastAngle_=be}handleUpEvent(Z){return mouseOnly(Z)?(Z.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(Z){return mouseOnly(Z)&&mouseActionButton(Z)&&this.condition_(Z)?(Z.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RenderBox extends Disposable{constructor(Z){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+Z,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const Z=this.startPixel_,ee=this.endPixel_,ae="px",ye=this.element_.style;ye.left=Math.min(Z[0],ee[0])+ae,ye.top=Math.min(Z[1],ee[1])+ae,ye.width=Math.abs(ee[0]-Z[0])+ae,ye.height=Math.abs(ee[1]-Z[1])+ae}setMap(Z){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const ee=this.element_.style;ee.left="inherit",ee.top="inherit",ee.width="inherit",ee.height="inherit"}this.map_=Z,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(Z,ee){this.startPixel_=Z,this.endPixel_=ee,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const Z=this.startPixel_,ee=this.endPixel_,ye=[Z,[Z[0],ee[1]],ee,[ee[0],Z[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);ye[4]=ye[0].slice(),this.geometry_?this.geometry_.setCoordinates([ye]):this.geometry_=new Polygon$1([ye])}getGeometry(){return this.geometry_}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(Z,ee,ae){super(Z),this.coordinate=ee,this.mapBrowserEvent=ae}}class DragBox extends PointerInteraction{constructor(Z){super(),this.on,this.once,this.un,Z=Z||{},this.box_=new RenderBox(Z.className||"ol-dragbox"),this.minArea_=Z.minArea!==void 0?Z.minArea:64,Z.onBoxEnd&&(this.onBoxEnd=Z.onBoxEnd),this.startPixel_=null,this.condition_=Z.condition?Z.condition:mouseActionButton,this.boxEndCondition_=Z.boxEndCondition?Z.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(Z,ee,ae){const ye=ae[0]-ee[0],ve=ae[1]-ee[1];return ye*ye+ve*ve>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(Z){this.box_.setPixels(this.startPixel_,Z.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,Z.coordinate,Z))}handleUpEvent(Z){this.box_.setMap(null);const ee=this.boxEndCondition_(Z,this.startPixel_,Z.pixel);return ee&&this.onBoxEnd(Z),this.dispatchEvent(new DragBoxEvent(ee?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,Z.coordinate,Z)),!1}handleDownEvent(Z){return this.condition_(Z)?(this.startPixel_=Z.pixel,this.box_.setMap(Z.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,Z.coordinate,Z)),!0):!1}onBoxEnd(Z){}}class DragZoom extends DragBox{constructor(Z){Z=Z||{};const ee=Z.condition?Z.condition:shiftKeyOnly;super({condition:ee,className:Z.className||"ol-dragzoom",minArea:Z.minArea}),this.duration_=Z.duration!==void 0?Z.duration:200,this.out_=Z.out!==void 0?Z.out:!1}onBoxEnd(Z){const ae=this.getMap().getView();let ye=this.getGeometry();if(this.out_){const ve=ae.rotatedExtentForGeometry(ye),be=ae.getResolutionForExtentInternal(ve),Qe=ae.getResolution()/be;ye=ye.clone(),ye.scale(Qe*Qe)}ae.fitInternal(ye,{duration:this.duration_,easing:easeOut})}}const DragZoom$1=DragZoom,Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(Z){super(),Z=Z||{},this.defaultCondition_=function(ee){return noModifierKeys(ee)&&targetNotEditable(ee)},this.condition_=Z.condition!==void 0?Z.condition:this.defaultCondition_,this.duration_=Z.duration!==void 0?Z.duration:100,this.pixelDelta_=Z.pixelDelta!==void 0?Z.pixelDelta:128}handleEvent(Z){let ee=!1;if(Z.type==EventType.KEYDOWN){const ae=Z.originalEvent,ye=ae.key;if(this.condition_(Z)&&(ye==Key.DOWN||ye==Key.LEFT||ye==Key.RIGHT||ye==Key.UP)){const be=Z.map.getView(),Qe=be.getResolution()*this.pixelDelta_;let Xe=0,Je=0;ye==Key.DOWN?Je=-Qe:ye==Key.LEFT?Xe=-Qe:ye==Key.RIGHT?Xe=Qe:Je=Qe;const tt=[Xe,Je];rotate$2(tt,be.getRotation()),pan(be,tt,this.duration_),ae.preventDefault(),ee=!0}}return!ee}}class KeyboardZoom extends Interaction{constructor(Z){super(),Z=Z||{},this.condition_=Z.condition?Z.condition:function(ee){return!platformModifierKey(ee)&&targetNotEditable(ee)},this.delta_=Z.delta?Z.delta:1,this.duration_=Z.duration!==void 0?Z.duration:100}handleEvent(Z){let ee=!1;if(Z.type==EventType.KEYDOWN||Z.type==EventType.KEYPRESS){const ae=Z.originalEvent,ye=ae.key;if(this.condition_(Z)&&(ye==="+"||ye==="-")){const ve=Z.map,be=ye==="+"?this.delta_:-this.delta_,Qe=ve.getView();zoomByDelta(Qe,be,void 0,this.duration_),ae.preventDefault(),ee=!0}}return!ee}}const KeyboardZoom$1=KeyboardZoom;class MouseWheelZoom extends Interaction{constructor(Z){Z=Z||{},super(Z),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=Z.maxDelta!==void 0?Z.maxDelta:1,this.duration_=Z.duration!==void 0?Z.duration:250,this.timeout_=Z.timeout!==void 0?Z.timeout:80,this.useAnchor_=Z.useAnchor!==void 0?Z.useAnchor:!0,this.constrainResolution_=Z.constrainResolution!==void 0?Z.constrainResolution:!1;const ee=Z.condition?Z.condition:always;this.condition_=Z.onFocusOnly?all(focusWithTabindex,ee):ee,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const Z=this.getMap();if(!Z)return;Z.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(Z){if(!this.condition_(Z)||Z.type!==EventType.WHEEL)return!0;const ae=Z.map,ye=Z.originalEvent;ye.preventDefault(),this.useAnchor_&&(this.lastAnchor_=Z.coordinate);let ve;if(Z.type==EventType.WHEEL&&(ve=ye.deltaY,FIREFOX&&ye.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(ve/=DEVICE_PIXEL_RATIO),ye.deltaMode===WheelEvent.DOM_DELTA_LINE&&(ve*=40)),ve===0)return!1;this.lastDelta_=ve;const be=Date.now();this.startTime_===void 0&&(this.startTime_=be),(!this.mode_||be-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(ve)<4?"trackpad":"wheel");const Qe=ae.getView();if(this.mode_==="trackpad"&&!(Qe.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(Qe.getAnimating()&&Qe.cancelAnimations(),Qe.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),Qe.adjustZoom(-ve/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=be,!1;this.totalDelta_+=ve;const Xe=Math.max(this.timeout_-(be-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ae),Xe),!1}handleWheelZoom_(Z){const ee=Z.getView();ee.getAnimating()&&ee.cancelAnimations();let ae=-clamp$1(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(ee.getConstrainResolution()||this.constrainResolution_)&&(ae=ae?ae>0?1:-1:0),zoomByDelta(ee,ae,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(Z){this.useAnchor_=Z,Z||(this.lastAnchor_=null)}}const MouseWheelZoom$1=MouseWheelZoom;class PinchRotate extends PointerInteraction{constructor(Z){Z=Z||{};const ee=Z;ee.stopDown||(ee.stopDown=FALSE),super(ee),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=Z.threshold!==void 0?Z.threshold:.3,this.duration_=Z.duration!==void 0?Z.duration:250}handleDragEvent(Z){let ee=0;const ae=this.targetPointers[0],ye=this.targetPointers[1],ve=Math.atan2(ye.clientY-ae.clientY,ye.clientX-ae.clientX);if(this.lastAngle_!==void 0){const Xe=ve-this.lastAngle_;this.rotationDelta_+=Xe,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),ee=Xe}this.lastAngle_=ve;const be=Z.map,Qe=be.getView();Qe.getConstraints().rotation!==disable&&(this.anchor_=be.getCoordinateFromPixelInternal(be.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(be.render(),Qe.adjustRotationInternal(ee,this.anchor_)))}handleUpEvent(Z){return this.targetPointers.length<2?(Z.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(Z){if(this.targetPointers.length>=2){const ee=Z.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||ee.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(Z){Z=Z||{};const ee=Z;ee.stopDown||(ee.stopDown=FALSE),super(ee),this.anchor_=null,this.duration_=Z.duration!==void 0?Z.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(Z){let ee=1;const ae=this.targetPointers[0],ye=this.targetPointers[1],ve=ae.clientX-ye.clientX,be=ae.clientY-ye.clientY,Qe=Math.sqrt(ve*ve+be*be);this.lastDistance_!==void 0&&(ee=this.lastDistance_/Qe),this.lastDistance_=Qe;const Xe=Z.map,Je=Xe.getView();ee!=1&&(this.lastScaleDelta_=ee),this.anchor_=Xe.getCoordinateFromPixelInternal(Xe.getEventPixel(centroid(this.targetPointers))),Xe.render(),Je.adjustResolutionInternal(ee,this.anchor_)}handleUpEvent(Z){if(this.targetPointers.length<2){const ae=Z.map.getView(),ye=this.lastScaleDelta_>1?1:-1;return ae.endInteraction(this.duration_,ye),!1}return!0}handleDownEvent(Z){if(this.targetPointers.length>=2){const ee=Z.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||ee.getView().beginInteraction(),!0}return!1}}const PinchZoom$1=PinchZoom;function defaults$1(ie){ie=ie||{};const Z=new Collection,ee=new Kinetic(-.005,.05,100);return(ie.altShiftDragRotate!==void 0?ie.altShiftDragRotate:!0)&&Z.push(new DragRotate),(ie.doubleClickZoom!==void 0?ie.doubleClickZoom:!0)&&Z.push(new DoubleClickZoom$1({delta:ie.zoomDelta,duration:ie.zoomDuration})),(ie.dragPan!==void 0?ie.dragPan:!0)&&Z.push(new DragPan$1({onFocusOnly:ie.onFocusOnly,kinetic:ee})),(ie.pinchRotate!==void 0?ie.pinchRotate:!0)&&Z.push(new PinchRotate),(ie.pinchZoom!==void 0?ie.pinchZoom:!0)&&Z.push(new PinchZoom$1({duration:ie.zoomDuration})),(ie.keyboard!==void 0?ie.keyboard:!0)&&(Z.push(new KeyboardPan),Z.push(new KeyboardZoom$1({delta:ie.zoomDelta,duration:ie.zoomDuration}))),(ie.mouseWheelZoom!==void 0?ie.mouseWheelZoom:!0)&&Z.push(new MouseWheelZoom$1({onFocusOnly:ie.onFocusOnly,duration:ie.zoomDuration})),(ie.shiftDragZoom!==void 0?ie.shiftDragZoom:!0)&&Z.push(new DragZoom$1({duration:ie.zoomDuration})),Z}function removeLayerMapProperty(ie){if(ie instanceof Layer){ie.setMapInternal(null);return}ie instanceof LayerGroup&&ie.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(ie,Z){if(ie instanceof Layer){ie.setMapInternal(Z);return}if(ie instanceof LayerGroup){const ee=ie.getLayers().getArray();for(let ae=0,ye=ee.length;ae<ye;++ae)setLayerMapProperty(ee[ae],Z)}}let Map$1=class extends BaseObject{constructor(Z){super(),Z=Z||{},this.on,this.once,this.un;const ee=createOptionsInternal(Z);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=Z.maxTilesLoading!==void 0?Z.maxTilesLoading:16,this.pixelRatio_=Z.pixelRatio!==void 0?Z.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create$3(),this.pixelToCoordinateTransform_=create$3(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=Z.moveTolerance,this.keyboardEventTarget_=ee.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=ee.controls||defaults$2(),this.interactions=ee.interactions||defaults$1({onFocusOnly:!0}),this.overlays_=ee.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(ee.values);const ae=this;Z.view&&!(Z.view instanceof View)&&Z.view.then(function(ye){ae.setView(new View(ye))}),this.controls.addEventListener(CollectionEventType.ADD,ye=>{ye.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,ye=>{ye.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,ye=>{ye.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,ye=>{ye.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,ye=>{this.addOverlayInternal_(ye.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,ye=>{const ve=ye.element.getId();ve!==void 0&&delete this.overlayIdIndex_[ve.toString()],ye.element.setMap(null)}),this.controls.forEach(ye=>{ye.setMap(this)}),this.interactions.forEach(ye=>{ye.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(Z){this.getControls().push(Z)}addInteraction(Z){this.getInteractions().push(Z)}addLayer(Z){this.getLayerGroup().getLayers().push(Z)}handleLayerAdd_(Z){setLayerMapProperty(Z.layer,this)}addOverlay(Z){this.getOverlays().push(Z)}addOverlayInternal_(Z){const ee=Z.getId();ee!==void 0&&(this.overlayIdIndex_[ee.toString()]=Z),Z.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(Z,ee,ae){if(!this.frameState_||!this.renderer_)return;const ye=this.getCoordinateFromPixelInternal(Z);ae=ae!==void 0?ae:{};const ve=ae.hitTolerance!==void 0?ae.hitTolerance:0,be=ae.layerFilter!==void 0?ae.layerFilter:TRUE,Qe=ae.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(ye,this.frameState_,ve,Qe,ee,null,be,null)}getFeaturesAtPixel(Z,ee){const ae=[];return this.forEachFeatureAtPixel(Z,function(ye){ae.push(ye)},ee),ae}getAllLayers(){const Z=[];function ee(ae){ae.forEach(function(ye){ye instanceof LayerGroup?ee(ye.getLayers()):Z.push(ye)})}return ee(this.getLayers()),Z}hasFeatureAtPixel(Z,ee){if(!this.frameState_||!this.renderer_)return!1;const ae=this.getCoordinateFromPixelInternal(Z);ee=ee!==void 0?ee:{};const ye=ee.layerFilter!==void 0?ee.layerFilter:TRUE,ve=ee.hitTolerance!==void 0?ee.hitTolerance:0,be=ee.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(ae,this.frameState_,ve,be,ye,null)}getEventCoordinate(Z){return this.getCoordinateFromPixel(this.getEventPixel(Z))}getEventCoordinateInternal(Z){return this.getCoordinateFromPixelInternal(this.getEventPixel(Z))}getEventPixel(Z){const ae=this.viewport_.getBoundingClientRect(),ye=this.getSize(),ve=ae.width/ye[0],be=ae.height/ye[1],Qe="changedTouches"in Z?Z.changedTouches[0]:Z;return[(Qe.clientX-ae.left)/ve,(Qe.clientY-ae.top)/be]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(Z){return toUserCoordinate(this.getCoordinateFromPixelInternal(Z),this.getView().getProjection())}getCoordinateFromPixelInternal(Z){const ee=this.frameState_;return ee?apply(ee.pixelToCoordinateTransform,Z.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(Z){const ee=this.overlayIdIndex_[Z.toString()];return ee!==void 0?ee:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(Z){const ee=this.getLayerGroup();if(Z instanceof Collection){ee.setLayers(Z);return}const ae=ee.getLayers();ae.clear(),ae.extend(Z)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const Z=this.getLayerGroup().getLayerStatesArray();for(let ee=0,ae=Z.length;ee<ae;++ee){const ye=Z[ee];if(!ye.visible)continue;const ve=ye.layer.getRenderer();if(ve&&!ve.ready)return!0;const be=ye.layer.getSource();if(be&&be.loading)return!0}return!1}getPixelFromCoordinate(Z){const ee=fromUserCoordinate(Z,this.getView().getProjection());return this.getPixelFromCoordinateInternal(ee)}getPixelFromCoordinateInternal(Z){const ee=this.frameState_;return ee?apply(ee.coordinateToPixelTransform,Z.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const Z=this.getTargetElement();return Z?Z.ownerDocument:document}getTilePriority(Z,ee,ae,ye){return getTilePriority(this.frameState_,Z,ee,ae,ye)}handleBrowserEvent(Z,ee){ee=ee||Z.type;const ae=new MapBrowserEvent(ee,this,Z);this.handleMapBrowserEvent(ae)}handleMapBrowserEvent(Z){if(!this.frameState_)return;const ee=Z.originalEvent,ae=ee.type;if(ae===PointerEventType.POINTERDOWN||ae===EventType.WHEEL||ae===EventType.KEYDOWN){const ye=this.getOwnerDocument(),ve=this.viewport_.getRootNode?this.viewport_.getRootNode():ye,be=ee.target;if(this.overlayContainerStopEvent_.contains(be)||!(ve===ye?ye.documentElement:ve).contains(be))return}if(Z.frameState=this.frameState_,this.dispatchEvent(Z)!==!1){const ye=this.getInteractions().getArray().slice();for(let ve=ye.length-1;ve>=0;ve--){const be=ye[ve];if(be.getMap()!==this||!be.getActive()||!this.getTargetElement())continue;if(!be.handleEvent(Z)||Z.propagationStopped)break}}}handlePostRender(){const Z=this.frameState_,ee=this.tileQueue_;if(!ee.isEmpty()){let ye=this.maxTilesLoading_,ve=ye;if(Z){const be=Z.viewHints;if(be[ViewHint.ANIMATING]||be[ViewHint.INTERACTING]){const Qe=Date.now()-Z.time>8;ye=Qe?0:8,ve=Qe?0:2}}ee.getTilesLoading()<ye&&(ee.reprioritize(),ee.loadMoreTiles(ye,ve))}Z&&this.renderer_&&!Z.animate&&(this.renderComplete_===!0?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,Z),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,Z)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,Z))));const ae=this.postRenderFunctions_;for(let ye=0,ve=ae.length;ye<ve;++ye)ae[ye](this,Z);ae.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let ae=0,ye=this.targetChangeHandlerKeys_.length;ae<ye;++ae)unlistenByKey(this.targetChangeHandlerKeys_[ae]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const ae=this.targetElement_.getRootNode();ae instanceof ShadowRoot&&this.resizeObserver_.unobserve(ae.host),this.setSize(void 0)}const Z=this.getTarget(),ee=typeof Z=="string"?document.getElementById(Z):Z;if(this.targetElement_=ee,!ee)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{ee.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const ve in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[ve],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const ae=this.keyboardEventTarget_?this.keyboardEventTarget_:ee;this.targetChangeHandlerKeys_=[listen(ae,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(ae,EventType.KEYPRESS,this.handleBrowserEvent,this)];const ye=ee.getRootNode();ye instanceof ShadowRoot&&this.resizeObserver_.observe(ye.host),this.resizeObserver_.observe(ee)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const Z=this.getView();Z&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=listen(Z,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(Z,EventType.CHANGE,this.handleViewPropertyChanged_,this),Z.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const Z=this.getLayerGroup();Z&&(this.handleLayerAdd_(new GroupEvent("addlayer",Z)),this.layerGroupPropertyListenerKeys_=[listen(Z,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(Z,EventType.CHANGE,this.render,this),listen(Z,"addlayer",this.handleLayerAdd_,this),listen(Z,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const Z=this.getLayerGroup().getLayerStatesArray();for(let ee=0,ae=Z.length;ee<ae;++ee){const ye=Z[ee].layer;ye.hasRenderer()&&ye.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const Z=this.frameState_;Z&&this.renderer_.flushDeclutterItems(Z)}removeControl(Z){return this.getControls().remove(Z)}removeInteraction(Z){return this.getInteractions().remove(Z)}removeLayer(Z){return this.getLayerGroup().getLayers().remove(Z)}handleLayerRemove_(Z){removeLayerMapProperty(Z.layer)}removeOverlay(Z){return this.getOverlays().remove(Z)}renderFrame_(Z){const ee=this.getSize(),ae=this.getView(),ye=this.frameState_;let ve=null;if(ee!==void 0&&hasArea(ee)&&ae&&ae.isDef()){const be=ae.getHints(this.frameState_?this.frameState_.viewHints:void 0),Qe=ae.getState();if(ve={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(Qe.center,Qe.resolution,Qe.rotation,ee),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:ee,tileQueue:this.tileQueue_,time:Z,usedTiles:{},viewState:Qe,viewHints:be,wantedTiles:{},mapId:getUid(this),renderTargets:{}},Qe.nextCenter&&Qe.nextResolution){const Xe=isNaN(Qe.nextRotation)?Qe.rotation:Qe.nextRotation;ve.nextExtent=getForViewAndSize(Qe.nextCenter,Qe.nextResolution,Xe,ee)}}this.frameState_=ve,this.renderer_.renderFrame(ve),ve&&(ve.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,ve.postRenderFunctions),ye&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(ve.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,ye)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!ve.viewHints[ViewHint.ANIMATING]&&!ve.viewHints[ViewHint.INTERACTING]&&!equals$1(ve.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,ve)),clone(ve.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,ve)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(Z){const ee=this.getLayerGroup();ee&&this.handleLayerRemove_(new GroupEvent("removelayer",ee)),this.set(MapProperty.LAYERGROUP,Z)}setSize(Z){this.set(MapProperty.SIZE,Z)}setTarget(Z){this.set(MapProperty.TARGET,Z)}setView(Z){if(!Z||Z instanceof View){this.set(MapProperty.VIEW,Z);return}this.set(MapProperty.VIEW,new View);const ee=this;Z.then(function(ae){ee.setView(new View(ae))})}updateSize(){const Z=this.getTargetElement();let ee;if(Z){const ye=getComputedStyle(Z),ve=Z.offsetWidth-parseFloat(ye.borderLeftWidth)-parseFloat(ye.paddingLeft)-parseFloat(ye.paddingRight)-parseFloat(ye.borderRightWidth),be=Z.offsetHeight-parseFloat(ye.borderTopWidth)-parseFloat(ye.paddingTop)-parseFloat(ye.paddingBottom)-parseFloat(ye.borderBottomWidth);!isNaN(ve)&&!isNaN(be)&&(ee=[ve,be],!hasArea(ee)&&(Z.offsetWidth||Z.offsetHeight||Z.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const ae=this.getSize();ee&&(!ae||!equals$2(ee,ae))&&(this.setSize(ee),this.updateViewportSize_())}updateViewportSize_(){const Z=this.getView();if(Z){let ee;const ae=getComputedStyle(this.viewport_);ae.width&&ae.height&&(ee=[parseInt(ae.width,10),parseInt(ae.height,10)]),Z.setViewportSize(ee)}}};function createOptionsInternal(ie){let Z=null;ie.keyboardEventTarget!==void 0&&(Z=typeof ie.keyboardEventTarget=="string"?document.getElementById(ie.keyboardEventTarget):ie.keyboardEventTarget);const ee={},ae=ie.layers&&typeof ie.layers.getLayers=="function"?ie.layers:new LayerGroup({layers:ie.layers});ee[MapProperty.LAYERGROUP]=ae,ee[MapProperty.TARGET]=ie.target,ee[MapProperty.VIEW]=ie.view instanceof View?ie.view:new View;let ye;ie.controls!==void 0&&(Array.isArray(ie.controls)?ye=new Collection(ie.controls.slice()):(assert(typeof ie.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),ye=ie.controls));let ve;ie.interactions!==void 0&&(Array.isArray(ie.interactions)?ve=new Collection(ie.interactions.slice()):(assert(typeof ie.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),ve=ie.interactions));let be;return ie.overlays!==void 0?Array.isArray(ie.overlays)?be=new Collection(ie.overlays.slice()):(assert(typeof ie.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),be=ie.overlays):be=new Collection,{controls:ye,interactions:ve,keyboardEventTarget:Z,overlays:be,values:ee}}class LRUCache{constructor(Z){this.highWaterMark=Z!==void 0?Z:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(Z){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(Z){return this.entries_.hasOwnProperty(Z)}forEach(Z){let ee=this.oldest_;for(;ee;)Z(ee.value_,ee.key_,this),ee=ee.newer}get(Z,ee){const ae=this.entries_[Z];return assert(ae!==void 0,"Tried to get a value for a key that does not exist in the cache"),ae===this.newest_||(ae===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(ae.newer.older=ae.older,ae.older.newer=ae.newer),ae.newer=null,ae.older=this.newest_,this.newest_.newer=ae,this.newest_=ae),ae.value_}remove(Z){const ee=this.entries_[Z];return assert(ee!==void 0,"Tried to get a value for a key that does not exist in the cache"),ee===this.newest_?(this.newest_=ee.older,this.newest_&&(this.newest_.newer=null)):ee===this.oldest_?(this.oldest_=ee.newer,this.oldest_&&(this.oldest_.older=null)):(ee.newer.older=ee.older,ee.older.newer=ee.newer),delete this.entries_[Z],--this.count_,ee.value_}getCount(){return this.count_}getKeys(){const Z=new Array(this.count_);let ee=0,ae;for(ae=this.newest_;ae;ae=ae.older)Z[ee++]=ae.key_;return Z}getValues(){const Z=new Array(this.count_);let ee=0,ae;for(ae=this.newest_;ae;ae=ae.older)Z[ee++]=ae.value_;return Z}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(Z){if(this.containsKey(Z))return this.entries_[Z].value_}pop(){const Z=this.oldest_;return delete this.entries_[Z.key_],Z.newer&&(Z.newer.older=null),this.oldest_=Z.newer,this.oldest_||(this.newest_=null),--this.count_,Z.value_}replace(Z,ee){this.get(Z),this.entries_[Z].value_=ee}set(Z,ee){assert(!(Z in this.entries_),"Tried to set a value for a key that is used already");const ae={key_:Z,newer:null,older:this.newest_,value_:ee};this.newest_?this.newest_.newer=ae:this.oldest_=ae,this.newest_=ae,this.entries_[Z]=ae,++this.count_}setSize(Z){this.highWaterMark=Z}}function createOrUpdate$1(ie,Z,ee,ae){return ae!==void 0?(ae[0]=ie,ae[1]=Z,ae[2]=ee,ae):[ie,Z,ee]}function getKeyZXY(ie,Z,ee){return ie+"/"+Z+"/"+ee}function getKey(ie){return getKeyZXY(ie[0],ie[1],ie[2])}function getCacheKeyForTileKey(ie){const[Z,ee,ae]=ie.substring(ie.lastIndexOf("/")+1,ie.length).split(",").map(Number);return getKeyZXY(Z,ee,ae)}function fromKey(ie){return ie.split("/").map(Number)}function hash$2(ie){return(ie[1]<<ie[0])+ie[2]}function withinExtentAndZ(ie,Z){const ee=ie[0],ae=ie[1],ye=ie[2];if(Z.getMinZoom()>ee||ee>Z.getMaxZoom())return!1;const ve=Z.getFullTileRange(ee);return ve?ve.containsXY(ae,ye):!0}class TileCache extends LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(Z){for(;this.canExpireCache()&&!(this.peekLast().getKey()in Z);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const Z=this.peekFirstKey(),ae=fromKey(Z)[0];this.forEach(ye=>{ye.tileCoord[0]!==ae&&(this.remove(getKey(ye.tileCoord)),ye.release())})}}class TileRange{constructor(Z,ee,ae,ye){this.minX=Z,this.maxX=ee,this.minY=ae,this.maxY=ye}contains(Z){return this.containsXY(Z[1],Z[2])}containsTileRange(Z){return this.minX<=Z.minX&&Z.maxX<=this.maxX&&this.minY<=Z.minY&&Z.maxY<=this.maxY}containsXY(Z,ee){return this.minX<=Z&&Z<=this.maxX&&this.minY<=ee&&ee<=this.maxY}equals(Z){return this.minX==Z.minX&&this.minY==Z.minY&&this.maxX==Z.maxX&&this.maxY==Z.maxY}extend(Z){Z.minX<this.minX&&(this.minX=Z.minX),Z.maxX>this.maxX&&(this.maxX=Z.maxX),Z.minY<this.minY&&(this.minY=Z.minY),Z.maxY>this.maxY&&(this.maxY=Z.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(Z){return this.minX<=Z.maxX&&this.maxX>=Z.minX&&this.minY<=Z.maxY&&this.maxY>=Z.minY}}function createOrUpdate(ie,Z,ee,ae,ye){return ye!==void 0?(ye.minX=ie,ye.maxX=Z,ye.minY=ee,ye.maxY=ae,ye):new TileRange(ie,Z,ee,ae)}const canvasPool$1=[];class VectorRenderTile extends Tile{constructor(Z,ee,ae,ye){super(Z,ee,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=ye.bind(void 0,this),this.wrappedTileCoord=ae}getContext(Z){const ee=getUid(Z);return ee in this.context_||(this.context_[ee]=createCanvasContext2D(1,1,canvasPool$1)),this.context_[ee]}hasContext(Z){return getUid(Z)in this.context_}getImage(Z){return this.hasContext(Z)?this.getContext(Z).canvas:null}getReplayState(Z){const ee=getUid(Z);return ee in this.replayState_||(this.replayState_[ee]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[ee]}load(){this.getSourceTiles()}release(){for(const Z in this.context_){const ee=this.context_[Z];releaseCanvas$1(ee),canvasPool$1.push(ee.canvas),delete this.context_[Z]}super.release()}}let VectorTile$1=class extends Tile{constructor(Z,ee,ae,ye,ve,be){super(Z,ee,be),this.extent=null,this.format_=ye,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=ve,this.url_=ae,this.key=ae}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(Z,ee){this.setFeatures(Z)}onError(){this.setState(TileState.ERROR)}setFeatures(Z){this.features_=Z,this.setState(TileState.LOADED)}setLoader(Z){this.loader_=Z}};const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer{constructor(Z){Z=Z||{};const ee=Object.assign({},Z);delete ee.preload,delete ee.useInterimTilesOnError,super(ee),this.on,this.once,this.un,this.setPreload(Z.preload!==void 0?Z.preload:0),this.setUseInterimTilesOnError(Z.useInterimTilesOnError!==void 0?Z.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(Z){this.set(TileProperty.PRELOAD,Z)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(Z){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,Z)}getData(Z){return super.getData(Z)}}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(Z,ee,ae,ye,ve,be){this.sourceProj_=Z,this.targetProj_=ee;let Qe={};const Xe=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(ei){const ni=ei[0]+"/"+ei[1];return Qe[ni]||(Qe[ni]=Xe(ei)),Qe[ni]},this.maxSourceExtent_=ye,this.errorThresholdSquared_=ve*ve,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!ye&&!!this.sourceProj_.getExtent()&&getWidth(ye)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const Je=getTopLeft(ae),tt=getTopRight(ae),it=getBottomRight(ae),st=getBottomLeft(ae),lt=this.transformInv_(Je),ct=this.transformInv_(tt),gt=this.transformInv_(it),ut=this.transformInv_(st),mt=MAX_SUBDIVISION+(be?Math.max(0,Math.ceil(Math.log2(getArea(ae)/(be*be*256*256)))):0);if(this.addQuad_(Je,tt,it,st,lt,ct,gt,ut,mt),this.wrapsXInSource_){let ei=1/0;this.triangles_.forEach(function(ni,ri,si){ei=Math.min(ei,ni.source[0][0],ni.source[1][0],ni.source[2][0])}),this.triangles_.forEach(ni=>{if(Math.max(ni.source[0][0],ni.source[1][0],ni.source[2][0])-ei>this.sourceWorldWidth_/2){const ri=[[ni.source[0][0],ni.source[0][1]],[ni.source[1][0],ni.source[1][1]],[ni.source[2][0],ni.source[2][1]]];ri[0][0]-ei>this.sourceWorldWidth_/2&&(ri[0][0]-=this.sourceWorldWidth_),ri[1][0]-ei>this.sourceWorldWidth_/2&&(ri[1][0]-=this.sourceWorldWidth_),ri[2][0]-ei>this.sourceWorldWidth_/2&&(ri[2][0]-=this.sourceWorldWidth_);const si=Math.min(ri[0][0],ri[1][0],ri[2][0]);Math.max(ri[0][0],ri[1][0],ri[2][0])-si<this.sourceWorldWidth_/2&&(ni.source=ri)}})}Qe={}}addTriangle_(Z,ee,ae,ye,ve,be){this.triangles_.push({source:[ye,ve,be],target:[Z,ee,ae]})}addQuad_(Z,ee,ae,ye,ve,be,Qe,Xe,Je){const tt=boundingExtent([ve,be,Qe,Xe]),it=this.sourceWorldWidth_?getWidth(tt)/this.sourceWorldWidth_:null,st=this.sourceWorldWidth_,lt=this.sourceProj_.canWrapX()&&it>.5&&it<1;let ct=!1;if(Je>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const ut=boundingExtent([Z,ee,ae,ye]);ct=getWidth(ut)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||ct}!lt&&this.sourceProj_.isGlobal()&&it&&(ct=it>MAX_TRIANGLE_WIDTH||ct)}if(!ct&&this.maxSourceExtent_&&isFinite(tt[0])&&isFinite(tt[1])&&isFinite(tt[2])&&isFinite(tt[3])&&!intersects$1(tt,this.maxSourceExtent_))return;let gt=0;if(!ct&&(!isFinite(ve[0])||!isFinite(ve[1])||!isFinite(be[0])||!isFinite(be[1])||!isFinite(Qe[0])||!isFinite(Qe[1])||!isFinite(Xe[0])||!isFinite(Xe[1]))){if(Je>0)ct=!0;else if(gt=(!isFinite(ve[0])||!isFinite(ve[1])?8:0)+(!isFinite(be[0])||!isFinite(be[1])?4:0)+(!isFinite(Qe[0])||!isFinite(Qe[1])?2:0)+(!isFinite(Xe[0])||!isFinite(Xe[1])?1:0),gt!=1&&gt!=2&&gt!=4&&gt!=8)return}if(Je>0){if(!ct){const ut=[(Z[0]+ae[0])/2,(Z[1]+ae[1])/2],mt=this.transformInv_(ut);let ei;lt?ei=(modulo(ve[0],st)+modulo(Qe[0],st))/2-modulo(mt[0],st):ei=(ve[0]+Qe[0])/2-mt[0];const ni=(ve[1]+Qe[1])/2-mt[1];ct=ei*ei+ni*ni>this.errorThresholdSquared_}if(ct){if(Math.abs(Z[0]-ae[0])<=Math.abs(Z[1]-ae[1])){const ut=[(ee[0]+ae[0])/2,(ee[1]+ae[1])/2],mt=this.transformInv_(ut),ei=[(ye[0]+Z[0])/2,(ye[1]+Z[1])/2],ni=this.transformInv_(ei);this.addQuad_(Z,ee,ut,ei,ve,be,mt,ni,Je-1),this.addQuad_(ei,ut,ae,ye,ni,mt,Qe,Xe,Je-1)}else{const ut=[(Z[0]+ee[0])/2,(Z[1]+ee[1])/2],mt=this.transformInv_(ut),ei=[(ae[0]+ye[0])/2,(ae[1]+ye[1])/2],ni=this.transformInv_(ei);this.addQuad_(Z,ut,ei,ye,ve,mt,ni,Xe,Je-1),this.addQuad_(ut,ee,ae,ei,mt,be,Qe,ni,Je-1)}return}}if(lt){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}gt&11||this.addTriangle_(Z,ae,ye,ve,Qe,Xe),gt&14||this.addTriangle_(Z,ae,ee,ve,Qe,be),gt&&(gt&13||this.addTriangle_(ee,ye,Z,be,Xe,ve),gt&7||this.addTriangle_(ee,ye,ae,be,Xe,Qe))}calculateSourceExtent(){const Z=createEmpty();return this.triangles_.forEach(function(ee,ae,ye){const ve=ee.source;extendCoordinate(Z,ve[0]),extendCoordinate(Z,ve[1]),extendCoordinate(Z,ve[2])}),Z}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool=[];function drawTestTriangle(ie,Z,ee,ae,ye){ie.beginPath(),ie.moveTo(0,0),ie.lineTo(Z,ee),ie.lineTo(ae,ye),ie.closePath(),ie.save(),ie.clip(),ie.fillRect(0,0,Math.max(Z,ae)+1,Math.max(ee,ye)),ie.restore()}function verifyBrokenDiagonalRendering(ie,Z){return Math.abs(ie[Z*4]-210)>2||Math.abs(ie[Z*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const ie=createCanvasContext2D(6,6,canvasPool);ie.globalCompositeOperation="lighter",ie.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(ie,4,5,4,0),drawTestTriangle(ie,4,5,0,5);const Z=ie.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(Z,0)||verifyBrokenDiagonalRendering(Z,4)||verifyBrokenDiagonalRendering(Z,8),releaseCanvas$1(ie),canvasPool.push(ie.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(ie,Z,ee,ae){const ye=transform(ee,Z,ie);let ve=getPointResolution(Z,ae,ee);const be=Z.getMetersPerUnit();be!==void 0&&(ve*=be);const Qe=ie.getMetersPerUnit();Qe!==void 0&&(ve/=Qe);const Xe=ie.getExtent();if(!Xe||containsCoordinate(Xe,ye)){const Je=getPointResolution(ie,ve,ye)/ve;isFinite(Je)&&Je>0&&(ve/=Je)}return ve}function calculateSourceExtentResolution(ie,Z,ee,ae){const ye=getCenter(ee);let ve=calculateSourceResolution(ie,Z,ye,ae);return(!isFinite(ve)||ve<=0)&&forEachCorner(ee,function(be){return ve=calculateSourceResolution(ie,Z,be,ae),isFinite(ve)&&ve>0}),ve}function render$1(ie,Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt,it){const st=createCanvasContext2D(Math.round(ee*ie),Math.round(ee*Z),canvasPool);if(it||(st.imageSmoothingEnabled=!1),Xe.length===0)return st.canvas;st.scale(ee,ee);function lt(ri){return Math.round(ri*ee)/ee}st.globalCompositeOperation="lighter";const ct=createEmpty();Xe.forEach(function(ri,si,li){extend$1(ct,ri.extent)});const gt=getWidth(ct),ut=getHeight(ct),mt=createCanvasContext2D(Math.round(ee*gt/ae),Math.round(ee*ut/ae),canvasPool);it||(mt.imageSmoothingEnabled=!1);const ei=ee/ae;Xe.forEach(function(ri,si,li){const ai=ri.extent[0]-ct[0],ci=-(ri.extent[3]-ct[3]),Ci=getWidth(ri.extent),pi=getHeight(ri.extent);ri.image.width>0&&ri.image.height>0&&mt.drawImage(ri.image,Je,Je,ri.image.width-2*Je,ri.image.height-2*Je,ai*ei,ci*ei,Ci*ei,pi*ei)});const ni=getTopLeft(be);return Qe.getTriangles().forEach(function(ri,si,li){const ai=ri.source,ci=ri.target;let Ci=ai[0][0],pi=ai[0][1],gi=ai[1][0],_i=ai[1][1],bi=ai[2][0],Mi=ai[2][1];const yi=lt((ci[0][0]-ni[0])/ve),Ti=lt(-(ci[0][1]-ni[1])/ve),Ii=lt((ci[1][0]-ni[0])/ve),Ri=lt(-(ci[1][1]-ni[1])/ve),Pi=lt((ci[2][0]-ni[0])/ve),xi=lt(-(ci[2][1]-ni[1])/ve),ki=Ci,Li=pi;Ci=0,pi=0,gi-=ki,_i-=Li,bi-=ki,Mi-=Li;const Yr=[[gi,_i,0,0,Ii-yi],[bi,Mi,0,0,Pi-yi],[0,0,gi,_i,Ri-Ti],[0,0,bi,Mi,xi-Ti]],Ui=solveLinearSystem(Yr);if(Ui){if(st.save(),st.beginPath(),isBrokenDiagonalRendering()||!it){st.moveTo(Ii,Ri);const Vi=4,Kr=yi-Ii,Wi=Ti-Ri;for(let Zr=0;Zr<Vi;Zr++)st.lineTo(Ii+lt((Zr+1)*Kr/Vi),Ri+lt(Zr*Wi/(Vi-1))),Zr!=Vi-1&&st.lineTo(Ii+lt((Zr+1)*Kr/Vi),Ri+lt((Zr+1)*Wi/(Vi-1)));st.lineTo(Pi,xi)}else st.moveTo(Ii,Ri),st.lineTo(yi,Ti),st.lineTo(Pi,xi);st.clip(),st.transform(Ui[0],Ui[2],Ui[1],Ui[3],yi,Ti),st.translate(ct[0]-ki,ct[3]-Li),st.scale(ae/ee,-ae/ee),st.drawImage(mt.canvas,0,0),st.restore()}}),releaseCanvas$1(mt),canvasPool.push(mt.canvas),tt&&(st.save(),st.globalCompositeOperation="source-over",st.strokeStyle="black",st.lineWidth=1,Qe.getTriangles().forEach(function(ri,si,li){const ai=ri.target,ci=(ai[0][0]-ni[0])/ve,Ci=-(ai[0][1]-ni[1])/ve,pi=(ai[1][0]-ni[0])/ve,gi=-(ai[1][1]-ni[1])/ve,_i=(ai[2][0]-ni[0])/ve,bi=-(ai[2][1]-ni[1])/ve;st.beginPath(),st.moveTo(pi,gi),st.lineTo(ci,Ci),st.lineTo(_i,bi),st.closePath(),st.stroke()}),st.restore()),st.canvas}class ReprojTile extends Tile{constructor(Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt,it,st){super(ve,TileState.IDLE,{interpolate:!!st}),this.renderEdges_=it!==void 0?it:!1,this.pixelRatio_=Qe,this.gutter_=Xe,this.canvas_=null,this.sourceTileGrid_=ee,this.targetTileGrid_=ye,this.wrappedTileCoord_=be||ve,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const lt=ye.getTileCoordExtent(this.wrappedTileCoord_),ct=this.targetTileGrid_.getExtent();let gt=this.sourceTileGrid_.getExtent();const ut=ct?getIntersection(lt,ct):lt;if(getArea(ut)===0){this.state=TileState.EMPTY;return}const mt=Z.getExtent();mt&&(gt?gt=getIntersection(gt,mt):gt=mt);const ei=ye.getResolution(this.wrappedTileCoord_[0]),ni=calculateSourceExtentResolution(Z,ae,ut,ei);if(!isFinite(ni)||ni<=0){this.state=TileState.EMPTY;return}const ri=tt!==void 0?tt:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(Z,ae,ut,gt,ni*ri,ei),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=ee.getZForResolution(ni);let si=this.triangulation_.calculateSourceExtent();if(gt&&(Z.canWrapX()?(si[1]=clamp$1(si[1],gt[1],gt[3]),si[3]=clamp$1(si[3],gt[1],gt[3])):si=getIntersection(si,gt)),!getArea(si))this.state=TileState.EMPTY;else{const li=ee.getTileRangeForExtentAndZ(si,this.sourceZ_);for(let ai=li.minX;ai<=li.maxX;ai++)for(let ci=li.minY;ci<=li.maxY;ci++){const Ci=Je(this.sourceZ_,ai,ci,Qe);Ci&&this.sourceTiles_.push(Ci)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const Z=[];if(this.sourceTiles_.forEach(ee=>{ee&&ee.getState()==TileState.LOADED&&Z.push({extent:this.sourceTileGrid_.getTileCoordExtent(ee.tileCoord),image:ee.getImage()})}),this.sourceTiles_.length=0,Z.length===0)this.state=TileState.ERROR;else{const ee=this.wrappedTileCoord_[0],ae=this.targetTileGrid_.getTileSize(ee),ye=typeof ae=="number"?ae:ae[0],ve=typeof ae=="number"?ae:ae[1],be=this.targetTileGrid_.getResolution(ee),Qe=this.sourceTileGrid_.getResolution(this.sourceZ_),Xe=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render$1(ye,ve,this.pixelRatio_,Qe,this.sourceTileGrid_.getExtent(),be,Xe,this.triangulation_,Z,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let Z=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(ee=>{const ae=ee.getState();if(ae==TileState.IDLE||ae==TileState.LOADING){Z++;const ye=listen(ee,EventType.CHANGE,function(ve){const be=ee.getState();(be==TileState.LOADED||be==TileState.ERROR||be==TileState.EMPTY)&&(unlistenByKey(ye),Z--,Z===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(ye)}}),Z===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(ee,ae,ye){ee.getState()==TileState.IDLE&&ee.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas$1(this.canvas_.getContext("2d")),canvasPool.push(this.canvas_),this.canvas_=null),super.release()}}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(Z){super(Z),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange(0,0,0,0)}isDrawableTile(Z){const ee=this.getLayer(),ae=Z.getState(),ye=ee.getUseInterimTilesOnError();return ae==TileState.LOADED||ae==TileState.EMPTY||ae==TileState.ERROR&&!ye}getTile(Z,ee,ae,ye){const ve=ye.pixelRatio,be=ye.viewState.projection,Qe=this.getLayer();let Je=Qe.getSource().getTile(Z,ee,ae,ve,be);return Je.getState()==TileState.ERROR&&Qe.getUseInterimTilesOnError()&&Qe.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(Je)||(Je=Je.getInterimTile()),Je}getData(Z){const ee=this.frameState;if(!ee)return null;const ae=this.getLayer(),ye=apply(ee.pixelToCoordinateTransform,Z.slice()),ve=ae.getExtent();if(ve&&!containsCoordinate(ve,ye))return null;const be=ee.pixelRatio,Qe=ee.viewState.projection,Xe=ee.viewState,Je=ae.getRenderSource(),tt=Je.getTileGridForProjection(Xe.projection),it=Je.getTilePixelRatio(ee.pixelRatio);for(let st=tt.getZForResolution(Xe.resolution);st>=tt.getMinZoom();--st){const lt=tt.getTileCoordForCoordAndZ(ye,st),ct=Je.getTile(st,lt[1],lt[2],be,Qe);if(!(ct instanceof ImageTile||ct instanceof ReprojTile)||ct instanceof ReprojTile&&ct.getState()===TileState.EMPTY)return null;if(ct.getState()!==TileState.LOADED)continue;const gt=tt.getOrigin(st),ut=toSize(tt.getTileSize(st)),mt=tt.getResolution(st),ei=Math.floor(it*((ye[0]-gt[0])/mt-lt[1]*ut[0])),ni=Math.floor(it*((gt[1]-ye[1])/mt-lt[2]*ut[1])),ri=Math.round(it*Je.getGutterForProjection(Xe.projection));return this.getImageData(ct.getImage(),ei+ri,ni+ri)}return null}loadedTileCallback(Z,ee,ae){return this.isDrawableTile(ae)?super.loadedTileCallback(Z,ee,ae):!1}prepareFrame(Z){return!!this.getLayer().getSource()}renderFrame(Z,ee){const ae=Z.layerStatesArray[Z.layerIndex],ye=Z.viewState,ve=ye.projection,be=ye.resolution,Qe=ye.center,Xe=ye.rotation,Je=Z.pixelRatio,tt=this.getLayer(),it=tt.getSource(),st=it.getRevision(),lt=it.getTileGridForProjection(ve),ct=lt.getZForResolution(be,it.zDirection),gt=lt.getResolution(ct);let ut=Z.extent;const mt=Z.viewState.resolution,ei=it.getTilePixelRatio(Je),ni=Math.round(getWidth(ut)/mt*Je),ri=Math.round(getHeight(ut)/mt*Je),si=ae.extent&&fromUserExtent(ae.extent,ve);si&&(ut=getIntersection(ut,fromUserExtent(ae.extent,ve)));const li=gt*ni/2/ei,ai=gt*ri/2/ei,ci=[Qe[0]-li,Qe[1]-ai,Qe[0]+li,Qe[1]+ai],Ci=lt.getTileRangeForExtentAndZ(ut,ct),pi={};pi[ct]={};const gi=this.createLoadedTileFinder(it,ve,pi),_i=this.tmpExtent,bi=this.tmpTileRange_;this.newTiles_=!1;const Mi=Xe?getRotatedViewport(ye.center,mt,Xe,Z.size):void 0;for(let Yr=Ci.minX;Yr<=Ci.maxX;++Yr)for(let Ui=Ci.minY;Ui<=Ci.maxY;++Ui){if(Xe&&!lt.tileCoordIntersectsViewport([ct,Yr,Ui],Mi))continue;const Vi=this.getTile(ct,Yr,Ui,Z);if(this.isDrawableTile(Vi)){const Zr=getUid(this);if(Vi.getState()==TileState.LOADED){pi[ct][Vi.tileCoord.toString()]=Vi;let ps=Vi.inTransition(Zr);ps&&ae.opacity!==1&&(Vi.endTransition(Zr),ps=!1),!this.newTiles_&&(ps||!this.renderedTiles.includes(Vi))&&(this.newTiles_=!0)}if(Vi.getAlpha(Zr,Z.time)===1)continue}const Kr=lt.getTileCoordChildTileRange(Vi.tileCoord,bi,_i);let Wi=!1;Kr&&(Wi=gi(ct+1,Kr)),Wi||lt.forEachTileCoordParentTileRange(Vi.tileCoord,gi,bi,_i)}const yi=gt/be*Je/ei;compose$1(this.pixelTransform,Z.size[0]/2,Z.size[1]/2,1/Je,1/Je,Xe,-ni/2,-ri/2);const Ti=toString$3(this.pixelTransform);this.useContainer(ee,Ti,this.getBackground(Z));const Ii=this.context,Ri=Ii.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose$1(this.tempTransform,ni/2,ri/2,yi,yi,0,-ni/2,-ri/2),Ri.width!=ni||Ri.height!=ri?(Ri.width=ni,Ri.height=ri):this.containerReused||Ii.clearRect(0,0,ni,ri),si&&this.clipUnrotated(Ii,Z,si),it.getInterpolate()||(Ii.imageSmoothingEnabled=!1),this.preRender(Ii,Z),this.renderedTiles.length=0;let Pi=Object.keys(pi).map(Number);Pi.sort(ascending);let xi,ki,Li;ae.opacity===1&&(!this.containerReused||it.getOpaque(Z.viewState.projection))?Pi=Pi.reverse():(xi=[],ki=[]);for(let Yr=Pi.length-1;Yr>=0;--Yr){const Ui=Pi[Yr],Vi=it.getTilePixelSize(Ui,Je,ve),Wi=lt.getResolution(Ui)/gt,Zr=Vi[0]*Wi*yi,ps=Vi[1]*Wi*yi,Is=lt.getTileCoordForCoordAndZ(getTopLeft(ci),Ui),_s=lt.getTileCoordExtent(Is),ws=apply(this.tempTransform,[ei*(_s[0]-ci[0])/gt,ei*(ci[3]-_s[3])/gt]),hi=ei*it.getGutterForProjection(ve),Bi=pi[Ui];for(const qi in Bi){const Xr=Bi[qi],rs=Xr.tileCoord,Os=Is[1]-rs[1],gs=Math.round(ws[0]-(Os-1)*Zr),zs=Is[2]-rs[2],$s=Math.round(ws[1]-(zs-1)*ps),Us=Math.round(ws[0]-Os*Zr),xs=Math.round(ws[1]-zs*ps),sa=gs-Us,Gs=$s-xs,ma=ct===Ui,ha=ma&&Xr.getAlpha(getUid(this),Z.time)!==1;let za=!1;if(!ha)if(xi){Li=[Us,xs,Us+sa,xs,Us+sa,xs+Gs,Us,xs+Gs];for(let Io=0,wo=xi.length;Io<wo;++Io)if(ct!==Ui&&Ui<ki[Io]){const hs=xi[Io];intersects$1([Us,xs,Us+sa,xs+Gs],[hs[0],hs[3],hs[4],hs[7]])&&(za||(Ii.save(),za=!0),Ii.beginPath(),Ii.moveTo(Li[0],Li[1]),Ii.lineTo(Li[2],Li[3]),Ii.lineTo(Li[4],Li[5]),Ii.lineTo(Li[6],Li[7]),Ii.moveTo(hs[6],hs[7]),Ii.lineTo(hs[4],hs[5]),Ii.lineTo(hs[2],hs[3]),Ii.lineTo(hs[0],hs[1]),Ii.clip())}xi.push(Li),ki.push(Ui)}else Ii.clearRect(Us,xs,sa,Gs);this.drawTileImage(Xr,Z,Us,xs,sa,Gs,hi,ma),xi&&!ha?(za&&Ii.restore(),this.renderedTiles.unshift(Xr)):this.renderedTiles.push(Xr),this.updateUsedTiles(Z.usedTiles,it,Xr)}}return this.renderedRevision=st,this.renderedResolution=gt,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,ci),this.renderedExtent_=ci,this.renderedPixelRatio=Je,this.renderedProjection=ve,this.manageTilePyramid(Z,it,lt,Je,ve,ut,ct,tt.getPreload()),this.scheduleExpireCache(Z,it),this.postRender(Ii,Z),ae.extent&&Ii.restore(),Ii.imageSmoothingEnabled=!0,Ti!==Ri.style.transform&&(Ri.style.transform=Ti),this.container}drawTileImage(Z,ee,ae,ye,ve,be,Qe,Xe){const Je=this.getTileImage(Z);if(!Je)return;const tt=getUid(this),it=ee.layerStatesArray[ee.layerIndex],st=it.opacity*(Xe?Z.getAlpha(tt,ee.time):1),lt=st!==this.context.globalAlpha;lt&&(this.context.save(),this.context.globalAlpha=st),this.context.drawImage(Je,Qe,Qe,Je.width-2*Qe,Je.height-2*Qe,ae,ye,ve,be),lt&&this.context.restore(),st!==it.opacity?ee.animate=!0:Xe&&Z.endTransition(tt)}getImage(){const Z=this.context;return Z?Z.canvas:null}getTileImage(Z){return Z.getImage()}scheduleExpireCache(Z,ee){if(ee.canExpireCache()){const ae=(function(ye,ve,be){const Qe=getUid(ye);Qe in be.usedTiles&&ye.expireCache(be.viewState.projection,be.usedTiles[Qe])}).bind(null,ee);Z.postRenderFunctions.push(ae)}}updateUsedTiles(Z,ee,ae){const ye=getUid(ee);ye in Z||(Z[ye]={}),Z[ye][ae.getKey()]=!0}manageTilePyramid(Z,ee,ae,ye,ve,be,Qe,Xe,Je){const tt=getUid(ee);tt in Z.wantedTiles||(Z.wantedTiles[tt]={});const it=Z.wantedTiles[tt],st=Z.tileQueue,lt=ae.getMinZoom(),ct=Z.viewState.rotation,gt=ct?getRotatedViewport(Z.viewState.center,Z.viewState.resolution,ct,Z.size):void 0;let ut=0,mt,ei,ni,ri,si,li;for(li=lt;li<=Qe;++li)for(ei=ae.getTileRangeForExtentAndZ(be,li,ei),ni=ae.getResolution(li),ri=ei.minX;ri<=ei.maxX;++ri)for(si=ei.minY;si<=ei.maxY;++si)ct&&!ae.tileCoordIntersectsViewport([li,ri,si],gt)||(Qe-li<=Xe?(++ut,mt=ee.getTile(li,ri,si,ye,ve),mt.getState()==TileState.IDLE&&(it[mt.getKey()]=!0,st.isKeyQueued(mt.getKey())||st.enqueue([mt,tt,ae.getTileCoordCenter(mt.tileCoord),ni])),Je!==void 0&&Je(mt)):ee.useTile(li,ri,si,ve));ee.updateCacheSize(ut,ve)}}class TileLayer extends BaseTileLayer{constructor(Z){super(Z)}createRenderer(){return new CanvasTileLayerRenderer(this)}}const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(Z){super(Z),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=create$3()}prepareTile(Z,ee,ae){let ye;const ve=Z.getState();return(ve===TileState.LOADED||ve===TileState.ERROR)&&(this.updateExecutorGroup_(Z,ee,ae),this.tileImageNeedsRender_(Z)&&(ye=!0)),ye}getTile(Z,ee,ae,ye){const ve=ye.pixelRatio,be=ye.viewState,Qe=be.resolution,Xe=be.projection,Je=this.getLayer(),tt=Je.getSource().getTile(Z,ee,ae,ve,Xe),it=ye.viewHints,st=!(it[ViewHint.ANIMATING]||it[ViewHint.INTERACTING]);return(st||!tt.wantedResolution)&&(tt.wantedResolution=Qe),this.prepareTile(tt,ve,Xe)&&(st||Date.now()-ye.time<8)&&Je.getRenderMode()!=="vector"&&this.renderTileImage_(tt,ye),super.getTile(Z,ee,ae,ye)}isDrawableTile(Z){const ee=this.getLayer();return super.isDrawableTile(Z)&&(ee.getRenderMode()==="vector"?getUid(ee)in Z.executorGroups:Z.hasContext(ee))}getTileImage(Z){return Z.getImage(this.getLayer())}prepareFrame(Z){const ee=this.getLayer().getRevision();return this.renderedLayerRevision_!==ee&&(this.renderedLayerRevision_=ee,this.renderedTiles.length=0),super.prepareFrame(Z)}updateExecutorGroup_(Z,ee,ae){const ye=this.getLayer(),ve=ye.getRevision(),be=ye.getRenderOrder()||null,Qe=Z.wantedResolution,Xe=Z.getReplayState(ye);if(!Xe.dirty&&Xe.renderedResolution===Qe&&Xe.renderedRevision==ve&&Xe.renderedRenderOrder==be)return;const Je=ye.getSource(),tt=ye.getDeclutter(),it=Je.getTileGrid(),lt=Je.getTileGridForProjection(ae).getTileCoordExtent(Z.wrappedTileCoord),ct=Je.getSourceTiles(ee,ae,Z),gt=getUid(ye);delete Z.hitDetectionImageData[gt],Z.executorGroups[gt]=[],tt&&(Z.declutterExecutorGroups[gt]=[]),Xe.dirty=!1;for(let ut=0,mt=ct.length;ut<mt;++ut){const ei=ct[ut];if(ei.getState()!=TileState.LOADED)continue;const ni=ei.tileCoord,ri=it.getTileCoordExtent(ni),si=getIntersection(lt,ri),li=buffer$1(si,ye.getRenderBuffer()*Qe,this.tmpExtent),ai=equals$1(ri,si)?null:li,ci=new BuilderGroup(0,li,Qe,ee),Ci=tt?new BuilderGroup(0,si,Qe,ee):void 0,pi=getSquaredTolerance(Qe,ee),gi=function(Ti){let Ii;const Ri=Ti.getStyleFunction()||ye.getStyleFunction();if(Ri&&(Ii=Ri(Ti,Qe)),Ii){const Pi=this.renderFeature(Ti,pi,Ii,ci,Ci);Xe.dirty=Xe.dirty||Pi}},_i=ei.getFeatures();be&&be!==Xe.renderedRenderOrder&&_i.sort(be);for(let Ti=0,Ii=_i.length;Ti<Ii;++Ti){const Ri=_i[Ti];(!ai||intersects$1(ai,Ri.getGeometry().getExtent()))&&gi.call(this,Ri)}const bi=ci.finish(),Mi=ye.getRenderMode()!=="vector"&&tt&&ct.length===1?null:si,yi=new ExecutorGroup(Mi,Qe,ee,Je.getOverlaps(),bi,ye.getRenderBuffer());if(Z.executorGroups[gt].push(yi),Ci){const Ti=new ExecutorGroup(null,Qe,ee,Je.getOverlaps(),Ci.finish(),ye.getRenderBuffer());Z.declutterExecutorGroups[gt].push(Ti)}}Xe.renderedRevision=ve,Xe.renderedRenderOrder=be,Xe.renderedResolution=Qe}forEachFeatureAtCoordinate(Z,ee,ae,ye,ve){const be=ee.viewState.resolution,Qe=ee.viewState.rotation;ae=ae??0;const Xe=this.getLayer(),tt=Xe.getSource().getTileGridForProjection(ee.viewState.projection),it=boundingExtent([Z]);buffer$1(it,be*ae,it);const st={},lt=function(ut,mt,ei){let ni=ut.getId();ni===void 0&&(ni=getUid(ut));const ri=st[ni];if(ri){if(ri!==!0&&ei<ri.distanceSq){if(ei===0)return st[ni]=!0,ve.splice(ve.lastIndexOf(ri),1),ye(ut,Xe,mt);ri.geometry=mt,ri.distanceSq=ei}}else{if(ei===0)return st[ni]=!0,ye(ut,Xe,mt);ve.push(st[ni]={feature:ut,layer:Xe,geometry:mt,distanceSq:ei,callback:ye})}},ct=this.renderedTiles;let gt;for(let ut=0,mt=ct.length;!gt&&ut<mt;++ut){const ei=ct[ut],ni=tt.getTileCoordExtent(ei.wrappedTileCoord);if(!intersects$1(ni,it))continue;const ri=getUid(Xe),si=[ei.executorGroups[ri]],li=ei.declutterExecutorGroups[ri];li&&si.push(li),si.some(ai=>{const ci=ai===li?ee.declutterTree.all().map(Ci=>Ci.value):null;for(let Ci=0,pi=ai.length;Ci<pi;++Ci)if(gt=ai[Ci].forEachFeatureAtCoordinate(Z,be,Qe,ae,lt,ci),gt)return!0})}return gt}getFeatures(Z){return new Promise((ee,ae)=>{const ye=this.getLayer(),ve=getUid(ye),be=ye.getSource(),Qe=this.renderedProjection,Xe=Qe.getExtent(),Je=this.renderedResolution,tt=be.getTileGridForProjection(Qe),it=apply(this.renderedPixelToCoordinateTransform_,Z.slice()),st=tt.getTileCoordForCoordAndResolution(it,Je);let lt;for(let ni=0,ri=this.renderedTiles.length;ni<ri;++ni)if(st.toString()===this.renderedTiles[ni].tileCoord.toString()){if(lt=this.renderedTiles[ni],lt.getState()===TileState.LOADED){const si=tt.getTileCoordExtent(lt.tileCoord);be.getWrapX()&&Qe.canWrapX()&&!containsExtent(Xe,si)&&wrapX$1(it,Qe);break}lt=void 0}if(!lt||lt.loadingSourceTiles>0){ee([]);return}const ct=tt.getTileCoordExtent(lt.wrappedTileCoord),gt=getTopLeft(ct),ut=[(it[0]-gt[0])/Je,(gt[1]-it[1])/Je],mt=lt.getSourceTiles().reduce(function(ni,ri){return ni.concat(ri.getFeatures())},[]);let ei=lt.hitDetectionImageData[ve];if(!ei){const ni=toSize(tt.getTileSize(tt.getZForResolution(Je,be.zDirection))),ri=this.renderedRotation_,si=[this.getRenderTransform(tt.getTileCoordCenter(lt.wrappedTileCoord),Je,0,HIT_DETECT_RESOLUTION,ni[0]*HIT_DETECT_RESOLUTION,ni[1]*HIT_DETECT_RESOLUTION,0)];ei=createHitDetectionImageData(ni,si,mt,ye.getStyleFunction(),tt.getTileCoordExtent(lt.wrappedTileCoord),lt.getReplayState(ye).renderedResolution,ri),lt.hitDetectionImageData[ve]=ei}ee(hitDetect(ut,mt,ei))})}handleFontsChanged(){const Z=this.getLayer();Z.getVisible()&&this.renderedLayerRevision_!==void 0&&Z.changed()}handleStyleImageChange_(Z){this.renderIfReadyAndVisible()}renderDeclutter(Z){const ee=this.context,ae=ee.globalAlpha;ee.globalAlpha=this.getLayer().getOpacity();const ye=Z.viewHints,ve=!(ye[ViewHint.ANIMATING]||ye[ViewHint.INTERACTING]),be=this.renderedTiles;for(let Qe=0,Xe=be.length;Qe<Xe;++Qe){const Je=be[Qe],tt=Je.declutterExecutorGroups[getUid(this.getLayer())];if(tt)for(let it=tt.length-1;it>=0;--it)tt[it].execute(this.context,1,this.getTileRenderTransform(Je,Z),Z.viewState.rotation,ve,void 0,Z.declutterTree)}ee.globalAlpha=ae}getTileRenderTransform(Z,ee){const ae=ee.pixelRatio,ye=ee.viewState,ve=ye.center,be=ye.resolution,Qe=ye.rotation,Xe=ee.size,Je=Math.round(Xe[0]*ae),tt=Math.round(Xe[1]*ae),st=this.getLayer().getSource().getTileGridForProjection(ee.viewState.projection),lt=Z.tileCoord,ct=st.getTileCoordExtent(Z.wrappedTileCoord),gt=st.getTileCoordExtent(lt,this.tmpExtent)[0]-ct[0];return multiply(scale$3(this.inversePixelTransform.slice(),1/ae,1/ae),this.getRenderTransform(ve,be,Qe,ae,Je,tt,gt))}postRender(Z,ee){const ae=ee.viewHints,ye=!(ae[ViewHint.ANIMATING]||ae[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=ee.pixelToCoordinateTransform.slice(),this.renderedRotation_=ee.viewState.rotation;const ve=this.getLayer(),be=ve.getRenderMode(),Qe=Z.globalAlpha;Z.globalAlpha=ve.getOpacity();const Xe=VECTOR_REPLAYS[be],Je=ee.viewState,tt=Je.rotation,it=ve.getSource(),lt=it.getTileGridForProjection(Je.projection).getZForResolution(Je.resolution,it.zDirection),ct=this.renderedTiles,gt=[],ut=[];let mt=!0;for(let ei=ct.length-1;ei>=0;--ei){const ni=ct[ei];mt=mt&&!ni.getReplayState(ve).dirty;const ri=ni.executorGroups[getUid(ve)].filter(Ci=>Ci.hasExecutors(Xe));if(ri.length===0)continue;const si=this.getTileRenderTransform(ni,ee),li=ni.tileCoord[0];let ai=!1;const ci=ri[0].getClipCoords(si);if(ci){for(let Ci=0,pi=gt.length;Ci<pi;++Ci)if(lt!==li&&li<ut[Ci]){const gi=gt[Ci];intersects$1([ci[0],ci[3],ci[4],ci[7]],[gi[0],gi[3],gi[4],gi[7]])&&(ai||(Z.save(),ai=!0),Z.beginPath(),Z.moveTo(ci[0],ci[1]),Z.lineTo(ci[2],ci[3]),Z.lineTo(ci[4],ci[5]),Z.lineTo(ci[6],ci[7]),Z.moveTo(gi[6],gi[7]),Z.lineTo(gi[4],gi[5]),Z.lineTo(gi[2],gi[3]),Z.lineTo(gi[0],gi[1]),Z.clip())}gt.push(ci),ut.push(li)}for(let Ci=0,pi=ri.length;Ci<pi;++Ci)ri[Ci].execute(Z,1,si,tt,ye,Xe);ai&&Z.restore()}Z.globalAlpha=Qe,this.ready=mt,super.postRender(Z,ee)}renderFeature(Z,ee,ae,ye,ve){if(!ae)return!1;let be=!1;if(Array.isArray(ae))for(let Qe=0,Xe=ae.length;Qe<Xe;++Qe)be=renderFeature(ye,Z,ae[Qe],ee,this.boundHandleStyleImageChange_,void 0,ve)||be;else be=renderFeature(ye,Z,ae,ee,this.boundHandleStyleImageChange_,void 0,ve);return be}tileImageNeedsRender_(Z){const ee=this.getLayer();if(ee.getRenderMode()==="vector")return!1;const ae=Z.getReplayState(ee),ye=ee.getRevision(),ve=Z.wantedResolution;return ae.renderedTileResolution!==ve||ae.renderedTileRevision!==ye}renderTileImage_(Z,ee){const ae=this.getLayer(),ye=Z.getReplayState(ae),ve=ae.getRevision(),be=Z.executorGroups[getUid(ae)];ye.renderedTileRevision=ve;const Qe=Z.wrappedTileCoord,Xe=Qe[0],Je=ae.getSource();let tt=ee.pixelRatio;const st=ee.viewState.projection,lt=Je.getTileGridForProjection(st),ct=lt.getResolution(Z.tileCoord[0]),gt=ee.pixelRatio/Z.wantedResolution*ct,ut=lt.getResolution(Xe),mt=Z.getContext(ae);tt=Math.round(Math.max(tt,gt/tt));const ei=Je.getTilePixelSize(Xe,tt,st);mt.canvas.width=ei[0],mt.canvas.height=ei[1];const ni=tt/gt;if(ni!==1){const ai=reset(this.tmpTransform_);scale$3(ai,ni,ni),mt.setTransform.apply(mt,ai)}const ri=lt.getTileCoordExtent(Qe,this.tmpExtent),si=gt/ut,li=reset(this.tmpTransform_);scale$3(li,si,-si),translate$1(li,-ri[0],-ri[3]);for(let ai=0,ci=be.length;ai<ci;++ai)be[ai].execute(mt,ni,li,0,!0,IMAGE_REPLAYS[ae.getRenderMode()]);ye.renderedTileResolution=Z.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(Z){Z=Z||{};const ee=Object.assign({},Z);delete ee.preload,delete ee.useInterimTilesOnError,super(ee),this.on,this.once,this.un;const ae=Z.renderMode||"hybrid";assert(ae=="hybrid"||ae=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=ae,this.setPreload(Z.preload?Z.preload:0),this.setUseInterimTilesOnError(Z.useInterimTilesOnError!==void 0?Z.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this)}getFeatures(Z){return super.getFeatures(Z)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(Z){this.set(TileProperty.PRELOAD,Z)}setUseInterimTilesOnError(Z){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,Z)}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},tmpTileCoord=[0,0,0],DECIMALS=5;class TileGrid{constructor(Z){this.minZoom=Z.minZoom!==void 0?Z.minZoom:0,this.resolutions_=Z.resolutions,assert(isSorted(this.resolutions_,function(ye,ve){return ve-ye},!0),"`resolutions` must be sorted in descending order");let ee;if(!Z.origins){for(let ye=0,ve=this.resolutions_.length-1;ye<ve;++ye)if(!ee)ee=this.resolutions_[ye]/this.resolutions_[ye+1];else if(this.resolutions_[ye]/this.resolutions_[ye+1]!==ee){ee=void 0;break}}this.zoomFactor_=ee,this.maxZoom=this.resolutions_.length-1,this.origin_=Z.origin!==void 0?Z.origin:null,this.origins_=null,Z.origins!==void 0&&(this.origins_=Z.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const ae=Z.extent;ae!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(ae)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,Z.tileSizes!==void 0&&(this.tileSizes_=Z.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=Z.tileSize!==void 0?Z.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=ae!==void 0?ae:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],Z.sizes!==void 0?this.fullTileRanges_=Z.sizes.map(function(ye,ve){const be=new TileRange(Math.min(0,ye[0]),Math.max(ye[0]-1,-1),Math.min(0,ye[1]),Math.max(ye[1]-1,-1));if(ae){const Qe=this.getTileRangeForExtentAndZ(ae,ve);be.minX=Math.max(Qe.minX,be.minX),be.maxX=Math.min(Qe.maxX,be.maxX),be.minY=Math.max(Qe.minY,be.minY),be.maxY=Math.min(Qe.maxY,be.maxY)}return be},this):ae&&this.calculateTileRanges_(ae)}forEachTileCoord(Z,ee,ae){const ye=this.getTileRangeForExtentAndZ(Z,ee);for(let ve=ye.minX,be=ye.maxX;ve<=be;++ve)for(let Qe=ye.minY,Xe=ye.maxY;Qe<=Xe;++Qe)ae([ee,ve,Qe])}forEachTileCoordParentTileRange(Z,ee,ae,ye){let ve,be,Qe,Xe=null,Je=Z[0]-1;for(this.zoomFactor_===2?(be=Z[1],Qe=Z[2]):Xe=this.getTileCoordExtent(Z,ye);Je>=this.minZoom;){if(this.zoomFactor_===2?(be=Math.floor(be/2),Qe=Math.floor(Qe/2),ve=createOrUpdate(be,be,Qe,Qe,ae)):ve=this.getTileRangeForExtentAndZ(Xe,Je,ae),ee(Je,ve))return!0;--Je}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(Z){return this.origin_?this.origin_:this.origins_[Z]}getResolution(Z){return this.resolutions_[Z]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(Z,ee,ae){if(Z[0]<this.maxZoom){if(this.zoomFactor_===2){const ve=Z[1]*2,be=Z[2]*2;return createOrUpdate(ve,ve+1,be,be+1,ee)}const ye=this.getTileCoordExtent(Z,ae||this.tmpExtent_);return this.getTileRangeForExtentAndZ(ye,Z[0]+1,ee)}return null}getTileRangeForTileCoordAndZ(Z,ee,ae){if(ee>this.maxZoom||ee<this.minZoom)return null;const ye=Z[0],ve=Z[1],be=Z[2];if(ee===ye)return createOrUpdate(ve,be,ve,be,ae);if(this.zoomFactor_){const Xe=Math.pow(this.zoomFactor_,ee-ye),Je=Math.floor(ve*Xe),tt=Math.floor(be*Xe);if(ee<ye)return createOrUpdate(Je,Je,tt,tt,ae);const it=Math.floor(Xe*(ve+1))-1,st=Math.floor(Xe*(be+1))-1;return createOrUpdate(Je,it,tt,st,ae)}const Qe=this.getTileCoordExtent(Z,this.tmpExtent_);return this.getTileRangeForExtentAndZ(Qe,ee,ae)}getTileRangeForExtentAndZ(Z,ee,ae){this.getTileCoordForXYAndZ_(Z[0],Z[3],ee,!1,tmpTileCoord);const ye=tmpTileCoord[1],ve=tmpTileCoord[2];this.getTileCoordForXYAndZ_(Z[2],Z[1],ee,!0,tmpTileCoord);const be=tmpTileCoord[1],Qe=tmpTileCoord[2];return createOrUpdate(ye,be,ve,Qe,ae)}getTileCoordCenter(Z){const ee=this.getOrigin(Z[0]),ae=this.getResolution(Z[0]),ye=toSize(this.getTileSize(Z[0]),this.tmpSize_);return[ee[0]+(Z[1]+.5)*ye[0]*ae,ee[1]-(Z[2]+.5)*ye[1]*ae]}getTileCoordExtent(Z,ee){const ae=this.getOrigin(Z[0]),ye=this.getResolution(Z[0]),ve=toSize(this.getTileSize(Z[0]),this.tmpSize_),be=ae[0]+Z[1]*ve[0]*ye,Qe=ae[1]-(Z[2]+1)*ve[1]*ye,Xe=be+ve[0]*ye,Je=Qe+ve[1]*ye;return createOrUpdate$2(be,Qe,Xe,Je,ee)}getTileCoordForCoordAndResolution(Z,ee,ae){return this.getTileCoordForXYAndResolution_(Z[0],Z[1],ee,!1,ae)}getTileCoordForXYAndResolution_(Z,ee,ae,ye,ve){const be=this.getZForResolution(ae),Qe=ae/this.getResolution(be),Xe=this.getOrigin(be),Je=toSize(this.getTileSize(be),this.tmpSize_);let tt=Qe*(Z-Xe[0])/ae/Je[0],it=Qe*(Xe[1]-ee)/ae/Je[1];return ye?(tt=ceil(tt,DECIMALS)-1,it=ceil(it,DECIMALS)-1):(tt=floor$1(tt,DECIMALS),it=floor$1(it,DECIMALS)),createOrUpdate$1(be,tt,it,ve)}getTileCoordForXYAndZ_(Z,ee,ae,ye,ve){const be=this.getOrigin(ae),Qe=this.getResolution(ae),Xe=toSize(this.getTileSize(ae),this.tmpSize_);let Je=(Z-be[0])/Qe/Xe[0],tt=(be[1]-ee)/Qe/Xe[1];return ye?(Je=ceil(Je,DECIMALS)-1,tt=ceil(tt,DECIMALS)-1):(Je=floor$1(Je,DECIMALS),tt=floor$1(tt,DECIMALS)),createOrUpdate$1(ae,Je,tt,ve)}getTileCoordForCoordAndZ(Z,ee,ae){return this.getTileCoordForXYAndZ_(Z[0],Z[1],ee,!1,ae)}getTileCoordResolution(Z){return this.resolutions_[Z[0]]}getTileSize(Z){return this.tileSize_?this.tileSize_:this.tileSizes_[Z]}getFullTileRange(Z){return this.fullTileRanges_?this.fullTileRanges_[Z]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,Z):null}getZForResolution(Z,ee){const ae=linearFindNearest(this.resolutions_,Z,ee||0);return clamp$1(ae,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(Z,ee){return intersectsLinearRing(ee,0,ee.length,2,this.getTileCoordExtent(Z))}calculateTileRanges_(Z){const ee=this.resolutions_.length,ae=new Array(ee);for(let ye=this.minZoom;ye<ee;++ye)ae[ye]=this.getTileRangeForExtentAndZ(Z,ye);this.fullTileRanges_=ae}}function getForProjection(ie){let Z=ie.getDefaultTileGrid();return Z||(Z=createForProjection(ie),ie.setDefaultTileGrid(Z)),Z}function wrapX(ie,Z,ee){const ae=Z[0],ye=ie.getTileCoordCenter(Z),ve=extentFromProjection(ee);if(!containsCoordinate(ve,ye)){const be=getWidth(ve),Qe=Math.ceil((ve[0]-ye[0])/be);return ye[0]+=be*Qe,ie.getTileCoordForCoordAndZ(ye,ae)}return Z}function createForExtent(ie,Z,ee,ae){ae=ae!==void 0?ae:"top-left";const ye=resolutionsFromExtent(ie,Z,ee);return new TileGrid({extent:ie,origin:getCorner(ie,ae),resolutions:ye,tileSize:ee})}function createXYZ(ie){const Z=ie||{},ee=Z.extent||get$1("EPSG:3857").getExtent(),ae={extent:ee,minZoom:Z.minZoom,tileSize:Z.tileSize,resolutions:resolutionsFromExtent(ee,Z.maxZoom,Z.tileSize,Z.maxResolution)};return new TileGrid(ae)}function resolutionsFromExtent(ie,Z,ee,ae){Z=Z!==void 0?Z:DEFAULT_MAX_ZOOM,ee=toSize(ee!==void 0?ee:DEFAULT_TILE_SIZE);const ye=getHeight(ie),ve=getWidth(ie);ae=ae>0?ae:Math.max(ve/ee[0],ye/ee[1]);const be=Z+1,Qe=new Array(be);for(let Xe=0;Xe<be;++Xe)Qe[Xe]=ae/Math.pow(2,Xe);return Qe}function createForProjection(ie,Z,ee,ae){const ye=extentFromProjection(ie);return createForExtent(ye,Z,ee,ae)}function extentFromProjection(ie){ie=get$1(ie);let Z=ie.getExtent();if(!Z){const ee=180*METERS_PER_UNIT$1.degrees/ie.getMetersPerUnit();Z=createOrUpdate$2(-ee,-ee,ee,ee)}return Z}class TileSource extends Source{constructor(Z){super({attributions:Z.attributions,attributionsCollapsible:Z.attributionsCollapsible,projection:Z.projection,state:Z.state,wrapX:Z.wrapX,interpolate:Z.interpolate}),this.on,this.once,this.un,this.opaque_=Z.opaque!==void 0?Z.opaque:!1,this.tilePixelRatio_=Z.tilePixelRatio!==void 0?Z.tilePixelRatio:1,this.tileGrid=Z.tileGrid!==void 0?Z.tileGrid:null;const ee=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),ee),this.tileCache=new TileCache(Z.cacheSize||0),this.tmpSize=[0,0],this.key_=Z.key||"",this.tileOptions={transition:Z.transition,interpolate:Z.interpolate},this.zDirection=Z.zDirection?Z.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(Z,ee){const ae=this.getTileCacheForProjection(Z);ae&&ae.expireCache(ee)}forEachLoadedTile(Z,ee,ae,ye){const ve=this.getTileCacheForProjection(Z);if(!ve)return!1;let be=!0,Qe,Xe,Je;for(let tt=ae.minX;tt<=ae.maxX;++tt)for(let it=ae.minY;it<=ae.maxY;++it)Xe=getKeyZXY(ee,tt,it),Je=!1,ve.containsKey(Xe)&&(Qe=ve.get(Xe),Je=Qe.getState()===TileState.LOADED,Je&&(Je=ye(Qe)!==!1)),Je||(be=!1);return be}getGutterForProjection(Z){return 0}getKey(){return this.key_}setKey(Z){this.key_!==Z&&(this.key_=Z,this.changed())}getOpaque(Z){return this.opaque_}getResolutions(Z){const ee=Z?this.getTileGridForProjection(Z):this.tileGrid;return ee?ee.getResolutions():null}getTile(Z,ee,ae,ye,ve){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(Z){return this.tileGrid?this.tileGrid:getForProjection(Z)}getTileCacheForProjection(Z){const ee=this.getProjection();return assert(ee===null||equivalent(ee,Z),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(Z){return this.tilePixelRatio_}getTilePixelSize(Z,ee,ae){const ye=this.getTileGridForProjection(ae),ve=this.getTilePixelRatio(ee),be=toSize(ye.getTileSize(Z),this.tmpSize);return ve==1?be:scale(be,ve,this.tmpSize)}getTileCoordForTileUrlFunction(Z,ee){ee=ee!==void 0?ee:this.getProjection();const ae=this.getTileGridForProjection(ee);return this.getWrapX()&&ee.isGlobal()&&(Z=wrapX(ae,Z,ee)),withinExtentAndZ(Z,ae)?Z:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(Z,ee){const ae=this.getTileCacheForProjection(ee);Z>ae.highWaterMark&&(ae.highWaterMark=Z)}useTile(Z,ee,ae,ye){}}class TileSourceEvent extends BaseEvent{constructor(Z,ee){super(Z),this.tile=ee}}function createFromTemplate(ie,Z){const ee=/\{z\}/g,ae=/\{x\}/g,ye=/\{y\}/g,ve=/\{-y\}/g;return function(be,Qe,Xe){if(be)return ie.replace(ee,be[0].toString()).replace(ae,be[1].toString()).replace(ye,be[2].toString()).replace(ve,function(){const Je=be[0],tt=Z.getFullTileRange(Je);return assert(tt,"The {-y} placeholder requires a tile grid with extent"),(tt.getHeight()-be[2]-1).toString()})}}function createFromTemplates(ie,Z){const ee=ie.length,ae=new Array(ee);for(let ye=0;ye<ee;++ye)ae[ye]=createFromTemplate(ie[ye],Z);return createFromTileUrlFunctions(ae)}function createFromTileUrlFunctions(ie){return ie.length===1?ie[0]:function(Z,ee,ae){if(!Z)return;const ye=hash$2(Z),ve=modulo(ye,ie.length);return ie[ve](Z,ee,ae)}}function expandUrl(ie){const Z=[];let ee=/\{([a-z])-([a-z])\}/.exec(ie);if(ee){const ae=ee[1].charCodeAt(0),ye=ee[2].charCodeAt(0);let ve;for(ve=ae;ve<=ye;++ve)Z.push(ie.replace(ee[0],String.fromCharCode(ve)));return Z}if(ee=/\{(\d+)-(\d+)\}/.exec(ie),ee){const ae=parseInt(ee[2],10);for(let ye=parseInt(ee[1],10);ye<=ae;ye++)Z.push(ie.replace(ee[0],ye.toString()));return Z}return Z.push(ie),Z}class UrlTile extends TileSource{constructor(Z){super({attributions:Z.attributions,cacheSize:Z.cacheSize,opaque:Z.opaque,projection:Z.projection,state:Z.state,tileGrid:Z.tileGrid,tilePixelRatio:Z.tilePixelRatio,wrapX:Z.wrapX,transition:Z.transition,interpolate:Z.interpolate,key:Z.key,attributionsCollapsible:Z.attributionsCollapsible,zDirection:Z.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=Z.tileLoadFunction,Z.tileUrlFunction&&(this.tileUrlFunction=Z.tileUrlFunction),this.urls=null,Z.urls?this.setUrls(Z.urls):Z.url&&this.setUrl(Z.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(Z){const ee=Z.target,ae=getUid(ee),ye=ee.getState();let ve;ye==TileState.LOADING?(this.tileLoadingKeys_[ae]=!0,ve=TileEventType.TILELOADSTART):ae in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[ae],ve=ye==TileState.ERROR?TileEventType.TILELOADERROR:ye==TileState.LOADED?TileEventType.TILELOADEND:void 0),ve!=null&&this.dispatchEvent(new TileSourceEvent(ve,ee))}setTileLoadFunction(Z){this.tileCache.clear(),this.tileLoadFunction=Z,this.changed()}setTileUrlFunction(Z,ee){this.tileUrlFunction=Z,this.tileCache.pruneExceptNewestZ(),typeof ee<"u"?this.setKey(ee):this.changed()}setUrl(Z){const ee=expandUrl(Z);this.urls=ee,this.setUrls(ee)}setUrls(Z){this.urls=Z;const ee=Z.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(Z,this.tileGrid),ee):this.setKey(ee)}tileUrlFunction(Z,ee,ae){}useTile(Z,ee,ae){const ye=getKeyZXY(Z,ee,ae);this.tileCache.containsKey(ye)&&this.tileCache.get(ye)}}class TileImage extends UrlTile{constructor(Z){super({attributions:Z.attributions,cacheSize:Z.cacheSize,opaque:Z.opaque,projection:Z.projection,state:Z.state,tileGrid:Z.tileGrid,tileLoadFunction:Z.tileLoadFunction?Z.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:Z.tilePixelRatio,tileUrlFunction:Z.tileUrlFunction,url:Z.url,urls:Z.urls,wrapX:Z.wrapX,transition:Z.transition,interpolate:Z.interpolate!==void 0?Z.interpolate:!0,key:Z.key,attributionsCollapsible:Z.attributionsCollapsible,zDirection:Z.zDirection}),this.crossOrigin=Z.crossOrigin!==void 0?Z.crossOrigin:null,this.tileClass=Z.tileClass!==void 0?Z.tileClass:ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=Z.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const Z in this.tileCacheForProjection)if(this.tileCacheForProjection[Z].canExpireCache())return!0;return!1}expireCache(Z,ee){const ae=this.getTileCacheForProjection(Z);this.tileCache.expireCache(this.tileCache==ae?ee:{});for(const ye in this.tileCacheForProjection){const ve=this.tileCacheForProjection[ye];ve.expireCache(ve==ae?ee:{})}}getGutterForProjection(Z){return this.getProjection()&&Z&&!equivalent(this.getProjection(),Z)?0:this.getGutter()}getGutter(){return 0}getKey(){let Z=super.getKey();return this.getInterpolate()||(Z+=":disable-interpolation"),Z}getOpaque(Z){return this.getProjection()&&Z&&!equivalent(this.getProjection(),Z)?!1:super.getOpaque(Z)}getTileGridForProjection(Z){const ee=this.getProjection();if(this.tileGrid&&(!ee||equivalent(ee,Z)))return this.tileGrid;const ae=getUid(Z);return ae in this.tileGridForProjection||(this.tileGridForProjection[ae]=getForProjection(Z)),this.tileGridForProjection[ae]}getTileCacheForProjection(Z){const ee=this.getProjection();if(!ee||equivalent(ee,Z))return this.tileCache;const ae=getUid(Z);return ae in this.tileCacheForProjection||(this.tileCacheForProjection[ae]=new TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[ae]}createTile_(Z,ee,ae,ye,ve,be){const Qe=[Z,ee,ae],Xe=this.getTileCoordForTileUrlFunction(Qe,ve),Je=Xe?this.tileUrlFunction(Xe,ye,ve):void 0,tt=new this.tileClass(Qe,Je!==void 0?TileState.IDLE:TileState.EMPTY,Je!==void 0?Je:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return tt.key=be,tt.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),tt}getTile(Z,ee,ae,ye,ve){const be=this.getProjection();if(!be||!ve||equivalent(be,ve))return this.getTileInternal(Z,ee,ae,ye,be||ve);const Qe=this.getTileCacheForProjection(ve),Xe=[Z,ee,ae];let Je;const tt=getKey(Xe);Qe.containsKey(tt)&&(Je=Qe.get(tt));const it=this.getKey();if(Je&&Je.key==it)return Je;const st=this.getTileGridForProjection(be),lt=this.getTileGridForProjection(ve),ct=this.getTileCoordForTileUrlFunction(Xe,ve),gt=new ReprojTile(be,st,ve,lt,Xe,ct,this.getTilePixelRatio(ye),this.getGutter(),(ut,mt,ei,ni)=>this.getTileInternal(ut,mt,ei,ni,be),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return gt.key=it,Je?(gt.interimTile=Je,gt.refreshInterimChain(),Qe.replace(tt,gt)):Qe.set(tt,gt),gt}getTileInternal(Z,ee,ae,ye,ve){let be=null;const Qe=getKeyZXY(Z,ee,ae),Xe=this.getKey();if(!this.tileCache.containsKey(Qe))be=this.createTile_(Z,ee,ae,ye,ve,Xe),this.tileCache.set(Qe,be);else if(be=this.tileCache.get(Qe),be.key!=Xe){const Je=be;be=this.createTile_(Z,ee,ae,ye,ve,Xe),Je.getState()==TileState.IDLE?be.interimTile=Je.interimTile:be.interimTile=Je,be.refreshInterimChain(),this.tileCache.replace(Qe,be)}return be}setRenderReprojectionEdges(Z){if(this.renderReprojectionEdges_!=Z){this.renderReprojectionEdges_=Z;for(const ee in this.tileCacheForProjection)this.tileCacheForProjection[ee].clear();this.changed()}}setTileGridForProjection(Z,ee){const ae=get$1(Z);if(ae){const ye=getUid(ae);ye in this.tileGridForProjection||(this.tileGridForProjection[ye]=ee)}}clear(){super.clear();for(const Z in this.tileCacheForProjection)this.tileCacheForProjection[Z].clear()}}function defaultTileLoadFunction(ie,Z){ie.getImage().src=Z}class XYZ extends TileImage{constructor(Z){Z=Z||{};const ee=Z.projection!==void 0?Z.projection:"EPSG:3857",ae=Z.tileGrid!==void 0?Z.tileGrid:createXYZ({extent:extentFromProjection(ee),maxResolution:Z.maxResolution,maxZoom:Z.maxZoom,minZoom:Z.minZoom,tileSize:Z.tileSize});super({attributions:Z.attributions,cacheSize:Z.cacheSize,crossOrigin:Z.crossOrigin,interpolate:Z.interpolate,opaque:Z.opaque,projection:ee,reprojectionErrorThreshold:Z.reprojectionErrorThreshold,tileGrid:ae,tileLoadFunction:Z.tileLoadFunction,tilePixelRatio:Z.tilePixelRatio,tileUrlFunction:Z.tileUrlFunction,url:Z.url,urls:Z.urls,wrapX:Z.wrapX!==void 0?Z.wrapX:!0,transition:Z.transition,attributionsCollapsible:Z.attributionsCollapsible,zDirection:Z.zDirection}),this.gutter_=Z.gutter!==void 0?Z.gutter:0}getGutter(){return this.gutter_}}class GeometryCollection extends Geometry{constructor(Z){super(),this.geometries_=Z||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let Z=0,ee=this.geometries_.length;Z<ee;++Z)this.changeEventsKeys_.push(listen(this.geometries_[Z],EventType.CHANGE,this.changed,this))}clone(){const Z=new GeometryCollection(null);return Z.setGeometries(this.geometries_),Z.applyProperties(this),Z}closestPointXY(Z,ee,ae,ye){if(ye<closestSquaredDistanceXY(this.getExtent(),Z,ee))return ye;const ve=this.geometries_;for(let be=0,Qe=ve.length;be<Qe;++be)ye=ve[be].closestPointXY(Z,ee,ae,ye);return ye}containsXY(Z,ee){const ae=this.geometries_;for(let ye=0,ve=ae.length;ye<ve;++ye)if(ae[ye].containsXY(Z,ee))return!0;return!1}computeExtent(Z){createOrUpdateEmpty(Z);const ee=this.geometries_;for(let ae=0,ye=ee.length;ae<ye;++ae)extend$1(Z,ee[ae].getExtent());return Z}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let Z=[];const ee=this.geometries_;for(let ae=0,ye=ee.length;ae<ye;++ae)ee[ae].getType()===this.getType()?Z=Z.concat(ee[ae].getGeometriesArrayRecursive()):Z.push(ee[ae]);return Z}getSimplifiedGeometry(Z){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),Z<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&Z<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const ee=[],ae=this.geometries_;let ye=!1;for(let ve=0,be=ae.length;ve<be;++ve){const Qe=ae[ve],Xe=Qe.getSimplifiedGeometry(Z);ee.push(Xe),Xe!==Qe&&(ye=!0)}if(ye){const ve=new GeometryCollection(null);return ve.setGeometriesArray(ee),ve}return this.simplifiedGeometryMaxMinSquaredTolerance=Z,this}getType(){return"GeometryCollection"}intersectsExtent(Z){const ee=this.geometries_;for(let ae=0,ye=ee.length;ae<ye;++ae)if(ee[ae].intersectsExtent(Z))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(Z,ee){const ae=this.geometries_;for(let ye=0,ve=ae.length;ye<ve;++ye)ae[ye].rotate(Z,ee);this.changed()}scale(Z,ee,ae){ae||(ae=getCenter(this.getExtent()));const ye=this.geometries_;for(let ve=0,be=ye.length;ve<be;++ve)ye[ve].scale(Z,ee,ae);this.changed()}setGeometries(Z){this.setGeometriesArray(cloneGeometries(Z))}setGeometriesArray(Z){this.unlistenGeometriesChange_(),this.geometries_=Z,this.listenGeometriesChange_(),this.changed()}applyTransform(Z){const ee=this.geometries_;for(let ae=0,ye=ee.length;ae<ye;++ae)ee[ae].applyTransform(Z);this.changed()}translate(Z,ee){const ae=this.geometries_;for(let ye=0,ve=ae.length;ye<ve;++ye)ae[ye].translate(Z,ee);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(ie){const Z=[];for(let ee=0,ae=ie.length;ee<ae;++ee)Z.push(ie[ee].clone());return Z}const GeometryCollection$1=GeometryCollection;class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(Z,ee){if(ee){let ae=ee.dataProjection?get$1(ee.dataProjection):this.readProjection(Z);ee.extent&&ae&&ae.getUnits()==="tile-pixels"&&(ae=get$1(ae),ae.setWorldExtent(ee.extent)),ee={dataProjection:ae,featureProjection:ee.featureProjection}}return this.adaptOptions(ee)}adaptOptions(Z){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},Z)}getType(){return abstract()}readFeature(Z,ee){return abstract()}readFeatures(Z,ee){return abstract()}readGeometry(Z,ee){return abstract()}readProjection(Z){return abstract()}writeFeature(Z,ee){return abstract()}writeFeatures(Z,ee){return abstract()}writeGeometry(Z,ee){return abstract()}}function transformGeometryWithOptions(ie,Z,ee){const ae=ee?get$1(ee.featureProjection):null,ye=ee?get$1(ee.dataProjection):null;let ve;if(ae&&ye&&!equivalent(ae,ye)?ve=(Z?ie.clone():ie).transform(Z?ae:ye,Z?ye:ae):ve=ie,Z&&ee&&ee.decimals!==void 0){const be=Math.pow(10,ee.decimals),Qe=function(Xe){for(let Je=0,tt=Xe.length;Je<tt;++Je)Xe[Je]=Math.round(Xe[Je]*be)/be;return Xe};ve===ie&&(ve=ie.clone()),ve.applyTransform(Qe)}return ve}class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(Z,ee){return this.readFeatureFromObject(getObject(Z),this.getReadOptions(Z,ee))}readFeatures(Z,ee){return this.readFeaturesFromObject(getObject(Z),this.getReadOptions(Z,ee))}readFeatureFromObject(Z,ee){return abstract()}readFeaturesFromObject(Z,ee){return abstract()}readGeometry(Z,ee){return this.readGeometryFromObject(getObject(Z),this.getReadOptions(Z,ee))}readGeometryFromObject(Z,ee){return abstract()}readProjection(Z){return this.readProjectionFromObject(getObject(Z))}readProjectionFromObject(Z){return abstract()}writeFeature(Z,ee){return JSON.stringify(this.writeFeatureObject(Z,ee))}writeFeatureObject(Z,ee){return abstract()}writeFeatures(Z,ee){return JSON.stringify(this.writeFeaturesObject(Z,ee))}writeFeaturesObject(Z,ee){return abstract()}writeGeometry(Z,ee){return JSON.stringify(this.writeGeometryObject(Z,ee))}writeGeometryObject(Z,ee){return abstract()}}function getObject(ie){if(typeof ie=="string"){const Z=JSON.parse(ie);return Z||null}return ie!==null?ie:null}class MultiLineString extends SimpleGeometry{constructor(Z,ee,ae){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(Z[0]))this.setCoordinates(Z,ee);else if(ee!==void 0&&ae)this.setFlatCoordinates(ee,Z),this.ends_=ae;else{let ye=this.getLayout();const ve=Z,be=[],Qe=[];for(let Xe=0,Je=ve.length;Xe<Je;++Xe){const tt=ve[Xe];Xe===0&&(ye=tt.getLayout()),extend$2(be,tt.getFlatCoordinates()),Qe.push(be.length)}this.setFlatCoordinates(ye,be),this.ends_=Qe}}appendLineString(Z){this.flatCoordinates?extend$2(this.flatCoordinates,Z.getFlatCoordinates().slice()):this.flatCoordinates=Z.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const Z=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return Z.applyProperties(this),Z}closestPointXY(Z,ee,ae,ye){return ye<closestSquaredDistanceXY(this.getExtent(),Z,ee)?ye:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,Z,ee,ae,ye))}getCoordinateAtM(Z,ee,ae){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(ee=ee!==void 0?ee:!1,ae=ae!==void 0?ae:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,Z,ee,ae))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(Z){return Z<0||this.ends_.length<=Z?null:new LineString$1(this.flatCoordinates.slice(Z===0?0:this.ends_[Z-1],this.ends_[Z]),this.layout)}getLineStrings(){const Z=this.flatCoordinates,ee=this.ends_,ae=this.layout,ye=[];let ve=0;for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=ee[be],Je=new LineString$1(Z.slice(ve,Xe),ae);ye.push(Je),ve=Xe}return ye}getFlatMidpoints(){const Z=[],ee=this.flatCoordinates;let ae=0;const ye=this.ends_,ve=this.stride;for(let be=0,Qe=ye.length;be<Qe;++be){const Xe=ye[be],Je=interpolatePoint(ee,ae,Xe,ve,.5);extend$2(Z,Je),ae=Xe}return Z}getSimplifiedGeometryInternal(Z){const ee=[],ae=[];return ee.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,Z,ee,0,ae),new MultiLineString(ee,"XY",ae)}getType(){return"MultiLineString"}intersectsExtent(Z){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,Z)}setCoordinates(Z,ee){this.setLayout(ee,Z,2),this.flatCoordinates||(this.flatCoordinates=[]);const ae=deflateCoordinatesArray(this.flatCoordinates,0,Z,this.stride,this.ends_);this.flatCoordinates.length=ae.length===0?0:ae[ae.length-1],this.changed()}}const MultiLineString$1=MultiLineString;class MultiPoint extends SimpleGeometry{constructor(Z,ee){super(),ee&&!Array.isArray(Z[0])?this.setFlatCoordinates(ee,Z):this.setCoordinates(Z,ee)}appendPoint(Z){this.flatCoordinates?extend$2(this.flatCoordinates,Z.getFlatCoordinates()):this.flatCoordinates=Z.getFlatCoordinates().slice(),this.changed()}clone(){const Z=new MultiPoint(this.flatCoordinates.slice(),this.layout);return Z.applyProperties(this),Z}closestPointXY(Z,ee,ae,ye){if(ye<closestSquaredDistanceXY(this.getExtent(),Z,ee))return ye;const ve=this.flatCoordinates,be=this.stride;for(let Qe=0,Xe=ve.length;Qe<Xe;Qe+=be){const Je=squaredDistance(Z,ee,ve[Qe],ve[Qe+1]);if(Je<ye){ye=Je;for(let tt=0;tt<be;++tt)ae[tt]=ve[Qe+tt];ae.length=be}}return ye}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(Z){const ee=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return Z<0||ee<=Z?null:new Point$1(this.flatCoordinates.slice(Z*this.stride,(Z+1)*this.stride),this.layout)}getPoints(){const Z=this.flatCoordinates,ee=this.layout,ae=this.stride,ye=[];for(let ve=0,be=Z.length;ve<be;ve+=ae){const Qe=new Point$1(Z.slice(ve,ve+ae),ee);ye.push(Qe)}return ye}getType(){return"MultiPoint"}intersectsExtent(Z){const ee=this.flatCoordinates,ae=this.stride;for(let ye=0,ve=ee.length;ye<ve;ye+=ae){const be=ee[ye],Qe=ee[ye+1];if(containsXY(Z,be,Qe))return!0}return!1}setCoordinates(Z,ee){this.setLayout(ee,Z,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,Z,this.stride),this.changed()}}const MultiPoint$1=MultiPoint;function linearRingss(ie,Z,ee,ae){const ye=[];let ve=createEmpty();for(let be=0,Qe=ee.length;be<Qe;++be){const Xe=ee[be];ve=createOrUpdateFromFlatCoordinates(ie,Z,Xe[0],ae),ye.push((ve[0]+ve[2])/2,(ve[1]+ve[3])/2),Z=Xe[Xe.length-1]}return ye}class MultiPolygon extends SimpleGeometry{constructor(Z,ee,ae){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!ae&&!Array.isArray(Z[0])){let ye=this.getLayout();const ve=Z,be=[],Qe=[];for(let Xe=0,Je=ve.length;Xe<Je;++Xe){const tt=ve[Xe];Xe===0&&(ye=tt.getLayout());const it=be.length,st=tt.getEnds();for(let lt=0,ct=st.length;lt<ct;++lt)st[lt]+=it;extend$2(be,tt.getFlatCoordinates()),Qe.push(st)}ee=ye,Z=be,ae=Qe}ee!==void 0&&ae?(this.setFlatCoordinates(ee,Z),this.endss_=ae):this.setCoordinates(Z,ee)}appendPolygon(Z){let ee;if(!this.flatCoordinates)this.flatCoordinates=Z.getFlatCoordinates().slice(),ee=Z.getEnds().slice(),this.endss_.push();else{const ae=this.flatCoordinates.length;extend$2(this.flatCoordinates,Z.getFlatCoordinates()),ee=Z.getEnds().slice();for(let ye=0,ve=ee.length;ye<ve;++ye)ee[ye]+=ae}this.endss_.push(ee),this.changed()}clone(){const Z=this.endss_.length,ee=new Array(Z);for(let ye=0;ye<Z;++ye)ee[ye]=this.endss_[ye].slice();const ae=new MultiPolygon(this.flatCoordinates.slice(),this.layout,ee);return ae.applyProperties(this),ae}closestPointXY(Z,ee,ae,ye){return ye<closestSquaredDistanceXY(this.getExtent(),Z,ee)?ye:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,Z,ee,ae,ye))}containsXY(Z,ee){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,Z,ee)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(Z){let ee;return Z!==void 0?(ee=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(ee,0,this.endss_,this.stride,Z)):ee=this.flatCoordinates,inflateMultiCoordinatesArray(ee,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const Z=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,Z),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint$1(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const Z=this.flatCoordinates;linearRingssAreOriented(Z,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=Z:(this.orientedFlatCoordinates_=Z.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(Z){const ee=[],ae=[];return ee.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(Z),ee,0,ae),new MultiPolygon(ee,"XY",ae)}getPolygon(Z){if(Z<0||this.endss_.length<=Z)return null;let ee;if(Z===0)ee=0;else{const ve=this.endss_[Z-1];ee=ve[ve.length-1]}const ae=this.endss_[Z].slice(),ye=ae[ae.length-1];if(ee!==0)for(let ve=0,be=ae.length;ve<be;++ve)ae[ve]-=ee;return new Polygon$1(this.flatCoordinates.slice(ee,ye),this.layout,ae)}getPolygons(){const Z=this.layout,ee=this.flatCoordinates,ae=this.endss_,ye=[];let ve=0;for(let be=0,Qe=ae.length;be<Qe;++be){const Xe=ae[be].slice(),Je=Xe[Xe.length-1];if(ve!==0)for(let it=0,st=Xe.length;it<st;++it)Xe[it]-=ve;const tt=new Polygon$1(ee.slice(ve,Je),Z,Xe);ye.push(tt),ve=Je}return ye}getType(){return"MultiPolygon"}intersectsExtent(Z){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,Z)}setCoordinates(Z,ee){this.setLayout(ee,Z,3),this.flatCoordinates||(this.flatCoordinates=[]);const ae=deflateMultiCoordinatesArray(this.flatCoordinates,0,Z,this.stride,this.endss_);if(ae.length===0)this.flatCoordinates.length=0;else{const ye=ae[ae.length-1];this.flatCoordinates.length=ye.length===0?0:ye[ye.length-1]}this.changed()}}const MultiPolygon$1=MultiPolygon;class GeoJSON extends JSONFeature{constructor(Z){Z=Z||{},super(),this.dataProjection=get$1(Z.dataProjection?Z.dataProjection:"EPSG:4326"),Z.featureProjection&&(this.defaultFeatureProjection=get$1(Z.featureProjection)),this.geometryName_=Z.geometryName,this.extractGeometryName_=Z.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(Z,ee){let ae=null;Z.type==="Feature"?ae=Z:ae={type:"Feature",geometry:Z,properties:null};const ye=readGeometry(ae.geometry,ee),ve=new Feature;return this.geometryName_?ve.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in ae!==void 0&&ve.setGeometryName(ae.geometry_name),ve.setGeometry(ye),"id"in ae&&ve.setId(ae.id),ae.properties&&ve.setProperties(ae.properties,!0),ve}readFeaturesFromObject(Z,ee){const ae=Z;let ye=null;if(ae.type==="FeatureCollection"){const ve=Z;ye=[];const be=ve.features;for(let Qe=0,Xe=be.length;Qe<Xe;++Qe)ye.push(this.readFeatureFromObject(be[Qe],ee))}else ye=[this.readFeatureFromObject(Z,ee)];return ye}readGeometryFromObject(Z,ee){return readGeometry(Z,ee)}readProjectionFromObject(Z){const ee=Z.crs;let ae;if(ee)if(ee.type=="name")ae=get$1(ee.properties.name);else if(ee.type==="EPSG")ae=get$1("EPSG:"+ee.properties.code);else throw new Error("Unknown SRS type");else ae=this.dataProjection;return ae}writeFeatureObject(Z,ee){ee=this.adaptOptions(ee);const ae={type:"Feature",geometry:null,properties:null},ye=Z.getId();if(ye!==void 0&&(ae.id=ye),!Z.hasProperties())return ae;const ve=Z.getProperties(),be=Z.getGeometry();return be&&(ae.geometry=writeGeometry(be,ee),delete ve[Z.getGeometryName()]),isEmpty$1(ve)||(ae.properties=ve),ae}writeFeaturesObject(Z,ee){ee=this.adaptOptions(ee);const ae=[];for(let ye=0,ve=Z.length;ye<ve;++ye)ae.push(this.writeFeatureObject(Z[ye],ee));return{type:"FeatureCollection",features:ae}}writeGeometryObject(Z,ee){return writeGeometry(Z,this.adaptOptions(ee))}}function readGeometry(ie,Z){if(!ie)return null;let ee;switch(ie.type){case"Point":{ee=readPointGeometry(ie);break}case"LineString":{ee=readLineStringGeometry(ie);break}case"Polygon":{ee=readPolygonGeometry(ie);break}case"MultiPoint":{ee=readMultiPointGeometry(ie);break}case"MultiLineString":{ee=readMultiLineStringGeometry(ie);break}case"MultiPolygon":{ee=readMultiPolygonGeometry(ie);break}case"GeometryCollection":{ee=readGeometryCollectionGeometry(ie);break}default:throw new Error("Unsupported GeoJSON type: "+ie.type)}return transformGeometryWithOptions(ee,!1,Z)}function readGeometryCollectionGeometry(ie,Z){const ee=ie.geometries.map(function(ae){return readGeometry(ae,Z)});return new GeometryCollection$1(ee)}function readPointGeometry(ie){return new Point$1(ie.coordinates)}function readLineStringGeometry(ie){return new LineString$1(ie.coordinates)}function readMultiLineStringGeometry(ie){return new MultiLineString$1(ie.coordinates)}function readMultiPointGeometry(ie){return new MultiPoint$1(ie.coordinates)}function readMultiPolygonGeometry(ie){return new MultiPolygon$1(ie.coordinates)}function readPolygonGeometry(ie){return new Polygon$1(ie.coordinates)}function writeGeometry(ie,Z){ie=transformGeometryWithOptions(ie,!0,Z);const ee=ie.getType();let ae;switch(ee){case"Point":{ae=writePointGeometry(ie);break}case"LineString":{ae=writeLineStringGeometry(ie);break}case"Polygon":{ae=writePolygonGeometry(ie,Z);break}case"MultiPoint":{ae=writeMultiPointGeometry(ie);break}case"MultiLineString":{ae=writeMultiLineStringGeometry(ie);break}case"MultiPolygon":{ae=writeMultiPolygonGeometry(ie,Z);break}case"GeometryCollection":{ae=writeGeometryCollectionGeometry(ie,Z);break}case"Circle":{ae={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+ee)}return ae}function writeGeometryCollectionGeometry(ie,Z){return Z=Object.assign({},Z),delete Z.featureProjection,{type:"GeometryCollection",geometries:ie.getGeometriesArray().map(function(ae){return writeGeometry(ae,Z)})}}function writeLineStringGeometry(ie,Z){return{type:"LineString",coordinates:ie.getCoordinates()}}function writeMultiLineStringGeometry(ie,Z){return{type:"MultiLineString",coordinates:ie.getCoordinates()}}function writeMultiPointGeometry(ie,Z){return{type:"MultiPoint",coordinates:ie.getCoordinates()}}function writeMultiPolygonGeometry(ie,Z){let ee;return Z&&(ee=Z.rightHanded),{type:"MultiPolygon",coordinates:ie.getCoordinates(ee)}}function writePointGeometry(ie,Z){return{type:"Point",coordinates:ie.getCoordinates()}}function writePolygonGeometry(ie,Z){let ee;return Z&&(ee=Z.rightHanded),{type:"Polygon",coordinates:ie.getCoordinates(ee)}}function asImageLike(ie){return ie instanceof Image||ie instanceof HTMLCanvasElement||ie instanceof HTMLVideoElement||ie instanceof ImageBitmap?ie:null}function asArrayLike(ie){return ie instanceof Uint8Array||ie instanceof Uint8ClampedArray||ie instanceof Float32Array||ie instanceof DataView?ie:null}let sharedContext=null;function toArray(ie){sharedContext||(sharedContext=createCanvasContext2D(ie.width,ie.height,void 0,{willReadFrequently:!0}));const Z=sharedContext.canvas,ee=ie.width;Z.width!==ee&&(Z.width=ee);const ae=ie.height;return Z.height!==ae&&(Z.height=ae),sharedContext.clearRect(0,0,ee,ae),sharedContext.drawImage(ie,0,0),sharedContext.getImageData(0,0,ee,ae).data}const defaultSize=[256,256];class DataTile extends Tile{constructor(Z){const ee=TileState.IDLE;super(Z.tileCoord,ee,{transition:Z.transition,interpolate:Z.interpolate}),this.loader_=Z.loader,this.data_=null,this.error_=null,this.size_=Z.size||null}getSize(){if(this.size_)return this.size_;const Z=asImageLike(this.data_);return Z?[Z.width,Z.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const Z=this;this.loader_().then(function(ee){Z.data_=ee,Z.state=TileState.LOADED,Z.changed()}).catch(function(ee){Z.error_=ee,Z.state=TileState.ERROR,Z.changed()})}}class ReprojDataTile extends DataTile{constructor(Z){super({tileCoord:Z.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:Z.interpolate,transition:Z.transition}),this.pixelRatio_=Z.pixelRatio,this.gutter_=Z.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=Z.sourceTileGrid,this.targetTileGrid_=Z.targetTileGrid,this.wrappedTileCoord_=Z.wrappedTileCoord||Z.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const ee=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),ae=this.targetTileGrid_.getExtent();let ye=this.sourceTileGrid_.getExtent();const ve=ae?getIntersection(ee,ae):ee;if(getArea(ve)===0){this.state=TileState.EMPTY;return}const be=Z.sourceProj,Qe=be.getExtent();Qe&&(ye?ye=getIntersection(ye,Qe):ye=Qe);const Xe=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),Je=Z.targetProj,tt=calculateSourceExtentResolution(be,Je,ve,Xe);if(!isFinite(tt)||tt<=0){this.state=TileState.EMPTY;return}const it=Z.errorThreshold!==void 0?Z.errorThreshold:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(be,Je,ve,ye,tt*it,Xe),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(tt);let st=this.triangulation_.calculateSourceExtent();if(ye&&(be.canWrapX()?(st[1]=clamp$1(st[1],ye[1],ye[3]),st[3]=clamp$1(st[3],ye[1],ye[3])):st=getIntersection(st,ye)),!getArea(st))this.state=TileState.EMPTY;else{const lt=this.sourceTileGrid_.getTileRangeForExtentAndZ(st,this.sourceZ_),ct=Z.getTileFunction;for(let gt=lt.minX;gt<=lt.maxX;gt++)for(let ut=lt.minY;ut<=lt.maxY;ut++){const mt=ct(this.sourceZ_,gt,ut,this.pixelRatio_);mt&&this.sourceTiles_.push(mt)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const Z=[];if(this.sourceTiles_.forEach(ee=>{if(!ee||ee.getState()!==TileState.LOADED)return;const ae=ee.getSize(),ye=this.gutter_;let ve;const be=asArrayLike(ee.getData());be?ve=be:ve=toArray(asImageLike(ee.getData()));const Qe=[ae[0]+2*ye,ae[1]+2*ye],Xe=ve instanceof Float32Array,Je=Qe[0]*Qe[1],tt=Xe?Float32Array:Uint8Array,it=new tt(ve.buffer),st=tt.BYTES_PER_ELEMENT,lt=st*it.length/Je,ct=it.byteLength/Qe[1],gt=Math.floor(ct/st/Qe[0]),ut=Je*gt;let mt=it;if(it.length!==ut){mt=new tt(ut);let ei=0,ni=0;const ri=Qe[0]*gt;for(let si=0;si<Qe[1];++si){for(let li=0;li<ri;++li)mt[ei++]=it[ni+li];ni+=ct/st}}Z.push({extent:this.sourceTileGrid_.getTileCoordExtent(ee.tileCoord),data:new Uint8Array(mt.buffer),dataType:tt,bytesPerPixel:lt,pixelSize:Qe})}),this.sourceTiles_.length=0,Z.length===0)this.state=TileState.ERROR;else{const ee=this.wrappedTileCoord_[0],ae=this.targetTileGrid_.getTileSize(ee),ye=typeof ae=="number"?ae:ae[0],ve=typeof ae=="number"?ae:ae[1],be=this.targetTileGrid_.getResolution(ee),Qe=this.sourceTileGrid_.getResolution(this.sourceZ_),Xe=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let Je,tt;const it=Z[0].bytesPerPixel,st=Math.ceil(it/3);for(let lt=st-1;lt>=0;--lt){const ct=[];for(let ri=0,si=Z.length;ri<si;++ri){const li=Z[ri],ai=li.data,ci=li.pixelSize,Ci=ci[0],pi=ci[1],gi=createCanvasContext2D(Ci,pi,canvasPool),_i=gi.createImageData(Ci,pi),bi=_i.data;let Mi=lt*3;for(let yi=0,Ti=bi.length;yi<Ti;yi+=4)bi[yi]=ai[Mi],bi[yi+1]=ai[Mi+1],bi[yi+2]=ai[Mi+2],bi[yi+3]=255,Mi+=it;gi.putImageData(_i,0,0),ct.push({extent:li.extent,image:gi.canvas})}const gt=render$1(ye,ve,this.pixelRatio_,Qe,this.sourceTileGrid_.getExtent(),be,Xe,this.triangulation_,ct,this.gutter_,!1,!1);for(let ri=0,si=ct.length;ri<si;++ri){const ai=ct[ri].image.getContext("2d");releaseCanvas$1(ai),canvasPool.push(ai.canvas)}const ut=gt.getContext("2d"),mt=ut.getImageData(0,0,gt.width,gt.height);releaseCanvas$1(ut),canvasPool.push(gt),Je||(tt=new Uint8Array(it*mt.width*mt.height),Je=new Z[0].dataType(tt.buffer));const ei=mt.data;let ni=lt*3;for(let ri=0,si=ei.length;ri<si;ri+=4)ei[ri+3]===255?(tt[ni]=ei[ri],tt[ni+1]=ei[ri+1],tt[ni+2]=ei[ri+2]):(tt[ni]=0,tt[ni+1]=0,tt[ni+2]=0),ni+=it}this.reprojData_=Je,this.reprojSize_=[Math.round(ye*this.pixelRatio_),Math.round(ve*this.pixelRatio_)],this.state=TileState.LOADED}this.changed()}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();let Z=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(ee=>{const ae=ee.getState();if(ae!==TileState.IDLE&&ae!==TileState.LOADING)return;Z++;const ye=listen(ee,EventType.CHANGE,function(){const ve=ee.getState();(ve==TileState.LOADED||ve==TileState.ERROR||ve==TileState.EMPTY)&&(unlistenByKey(ye),Z--,Z===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(ye)}),Z===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(ee){ee.getState()==TileState.IDLE&&ee.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}}class DataTileSource extends TileSource{constructor(Z){const ee=Z.projection===void 0?"EPSG:3857":Z.projection;let ae=Z.tileGrid;ae===void 0&&ee&&(ae=createXYZ({extent:extentFromProjection(ee),maxResolution:Z.maxResolution,maxZoom:Z.maxZoom,minZoom:Z.minZoom,tileSize:Z.tileSize})),super({cacheSize:.1,attributions:Z.attributions,attributionsCollapsible:Z.attributionsCollapsible,projection:ee,tileGrid:ae,opaque:Z.opaque,state:Z.state,wrapX:Z.wrapX,transition:Z.transition,interpolate:Z.interpolate}),this.gutter_=Z.gutter!==void 0?Z.gutter:0,this.tileSize_=Z.tileSize?toSize(Z.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=Z.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=Z.bandCount===void 0?4:Z.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(Z){this.tileSizes_=Z}getTileSize(Z){if(this.tileSizes_)return this.tileSizes_[Z];if(this.tileSize_)return this.tileSize_;const ee=this.getTileGrid();return ee?toSize(ee.getTileSize(Z)):[256,256]}getGutterForProjection(Z){const ee=this.getProjection();return!ee||equivalent(ee,Z)?this.gutter_:0}setLoader(Z){this.loader_=Z}getReprojTile_(Z,ee,ae,ye,ve){const be=this.getTileCacheForProjection(ye),Qe=getKeyZXY(Z,ee,ae);if(be.containsKey(Qe)){const ut=be.get(Qe);if(ut&&ut.key==this.getKey())return ut}const Xe=this.getTileGrid(),Je=Math.max.apply(null,Xe.getResolutions().map((ut,mt)=>{const ei=toSize(Xe.getTileSize(mt)),ni=this.getTileSize(mt);return Math.max(ni[0]/ei[0],ni[1]/ei[1])})),tt=this.getTileGridForProjection(ve),it=this.getTileGridForProjection(ye),st=[Z,ee,ae],lt=this.getTileCoordForTileUrlFunction(st,ye),ct=Object.assign({sourceProj:ve,sourceTileGrid:tt,targetProj:ye,targetTileGrid:it,tileCoord:st,wrappedTileCoord:lt,pixelRatio:Je,gutter:this.getGutterForProjection(ve),getTileFunction:(ut,mt,ei,ni)=>this.getTile(ut,mt,ei,ni,ve)},this.tileOptions),gt=new ReprojDataTile(ct);return gt.key=this.getKey(),gt}getTile(Z,ee,ae,ye,ve){const be=this.getProjection();if(be&&ve&&!equivalent(be,ve))return this.getReprojTile_(Z,ee,ae,ve,be);const Qe=this.getTileSize(Z),Xe=getKeyZXY(Z,ee,ae);if(this.tileCache.containsKey(Xe))return this.tileCache.get(Xe);const Je=this.loader_;function tt(){return toPromise(function(){return Je(Z,ee,ae)})}const it=Object.assign({tileCoord:[Z,ee,ae],loader:tt,size:Qe},this.tileOptions),st=new DataTile(it);return st.key=this.getKey(),st.addEventListener(EventType.CHANGE,this.handleTileChange_),this.tileCache.set(Xe,st),st}handleTileChange_(Z){const ee=Z.target,ae=getUid(ee),ye=ee.getState();let ve;ye==TileState.LOADING?(this.tileLoadingKeys_[ae]=!0,ve=TileEventType.TILELOADSTART):ae in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[ae],ve=ye==TileState.ERROR?TileEventType.TILELOADERROR:ye==TileState.LOADED?TileEventType.TILELOADEND:void 0),ve&&this.dispatchEvent(new TileSourceEvent(ve,ee))}getTileGridForProjection(Z){const ee=this.getProjection();if(this.tileGrid&&(!ee||equivalent(ee,Z)))return this.tileGrid;const ae=getUid(Z);return ae in this.tileGridForProjection_||(this.tileGridForProjection_[ae]=getForProjection(Z)),this.tileGridForProjection_[ae]}setTileGridForProjection(Z,ee){const ae=get$1(Z);if(ae){const ye=getUid(ae);ye in this.tileGridForProjection_||(this.tileGridForProjection_[ye]=ee)}}getTileCacheForProjection(Z){const ee=this.getProjection();if(!ee||equivalent(ee,Z))return this.tileCache;const ae=getUid(Z);return ae in this.tileCacheForProjection_||(this.tileCacheForProjection_[ae]=new TileCache(.1)),this.tileCacheForProjection_[ae]}expireCache(Z,ee){const ae=this.getTileCacheForProjection(Z);this.tileCache.expireCache(this.tileCache==ae?ee:{});for(const ye in this.tileCacheForProjection_){const ve=this.tileCacheForProjection_[ye];ve.expireCache(ve==ae?ee:{})}}clear(){super.clear();for(const Z in this.tileCacheForProjection_)this.tileCacheForProjection_[Z].clear()}}function uncurryThis(ie){return(Z,...ee)=>ReflectApply(ie,Z,ee)}function uncurryThisGetter(ie,Z){return uncurryThis(ReflectGetOwnPropertyDescriptor(ie,Z).get)}const{apply:ReflectApply,construct:ReflectConstruct,defineProperty:ReflectDefineProperty,get:ReflectGet,getOwnPropertyDescriptor:ReflectGetOwnPropertyDescriptor,getPrototypeOf:ReflectGetPrototypeOf,has:ReflectHas,ownKeys:ReflectOwnKeys,set:ReflectSet,setPrototypeOf:ReflectSetPrototypeOf}=Reflect,{iterator:SymbolIterator,species:SymbolSpecies,toStringTag:SymbolToStringTag,for:SymbolFor}=Symbol,NativeObject=Object,{create:ObjectCreate,defineProperty:ObjectDefineProperty,freeze:ObjectFreeze,is:ObjectIs}=NativeObject,NativeArray=Array,ArrayPrototype=NativeArray.prototype,NativeArrayPrototypeSymbolIterator=ArrayPrototype[SymbolIterator],ArrayPrototypeSymbolIterator=uncurryThis(NativeArrayPrototypeSymbolIterator),NativeArrayBuffer=ArrayBuffer,ArrayBufferPrototype=NativeArrayBuffer.prototype;uncurryThisGetter(ArrayBufferPrototype,"byteLength");const NativeSharedArrayBuffer=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;NativeSharedArrayBuffer&&uncurryThisGetter(NativeSharedArrayBuffer.prototype,"byteLength");const TypedArray=ReflectGetPrototypeOf(Uint8Array);TypedArray.from;const TypedArrayPrototype=TypedArray.prototype;TypedArrayPrototype[SymbolIterator],uncurryThis(TypedArrayPrototype.keys),uncurryThis(TypedArrayPrototype.values),uncurryThis(TypedArrayPrototype.entries),uncurryThis(TypedArrayPrototype.set),uncurryThis(TypedArrayPrototype.reverse),uncurryThis(TypedArrayPrototype.fill),uncurryThis(TypedArrayPrototype.copyWithin),uncurryThis(TypedArrayPrototype.sort),uncurryThis(TypedArrayPrototype.slice),uncurryThis(TypedArrayPrototype.subarray),uncurryThisGetter(TypedArrayPrototype,"buffer"),uncurryThisGetter(TypedArrayPrototype,"byteOffset"),uncurryThisGetter(TypedArrayPrototype,"length"),uncurryThisGetter(TypedArrayPrototype,SymbolToStringTag);const NativeUint8Array=Uint8Array,NativeUint16Array=Uint16Array,NativeUint32Array=Uint32Array,NativeFloat32Array=Float32Array,ArrayIteratorPrototype=ReflectGetPrototypeOf([][SymbolIterator]()),ArrayIteratorPrototypeNext=uncurryThis(ArrayIteratorPrototype.next),GeneratorPrototypeNext=uncurryThis(function*(){}().next),IteratorPrototype=ReflectGetPrototypeOf(ArrayIteratorPrototype),DataViewPrototype=DataView.prototype,DataViewPrototypeGetUint16=uncurryThis(DataViewPrototype.getUint16),NativeWeakMap=WeakMap,WeakMapPrototype=NativeWeakMap.prototype,WeakMapPrototypeGet=uncurryThis(WeakMapPrototype.get),WeakMapPrototypeSet=uncurryThis(WeakMapPrototype.set),arrayIterators=new NativeWeakMap,SafeIteratorPrototype=ObjectCreate(null,{next:{value:function(){const Z=WeakMapPrototypeGet(arrayIterators,this);return ArrayIteratorPrototypeNext(Z)}},[SymbolIterator]:{value:function(){return this}}});function safeIfNeeded(ie){if(ie[SymbolIterator]===NativeArrayPrototypeSymbolIterator&&ArrayIteratorPrototype.next===ArrayIteratorPrototypeNext)return ie;const Z=ObjectCreate(SafeIteratorPrototype);return WeakMapPrototypeSet(arrayIterators,Z,ArrayPrototypeSymbolIterator(ie)),Z}const generators=new NativeWeakMap,DummyArrayIteratorPrototype=ObjectCreate(IteratorPrototype,{next:{value:function(){const Z=WeakMapPrototypeGet(generators,this);return GeneratorPrototypeNext(Z)},writable:!0,configurable:!0}});for(const ie of ReflectOwnKeys(ArrayIteratorPrototype))ie!=="next"&&ObjectDefineProperty(DummyArrayIteratorPrototype,ie,ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype,ie));const buffer=new NativeArrayBuffer(4),floatView=new NativeFloat32Array(buffer),uint32View=new NativeUint32Array(buffer),baseTable=new NativeUint16Array(512),shiftTable=new NativeUint8Array(512);for(let ie=0;ie<256;++ie){const Z=ie-127;Z<-27?(baseTable[ie]=0,baseTable[ie|256]=32768,shiftTable[ie]=24,shiftTable[ie|256]=24):Z<-14?(baseTable[ie]=1024>>-Z-14,baseTable[ie|256]=1024>>-Z-14|32768,shiftTable[ie]=-Z-1,shiftTable[ie|256]=-Z-1):Z<=15?(baseTable[ie]=Z+15<<10,baseTable[ie|256]=Z+15<<10|32768,shiftTable[ie]=13,shiftTable[ie|256]=13):Z<128?(baseTable[ie]=31744,baseTable[ie|256]=64512,shiftTable[ie]=24,shiftTable[ie|256]=24):(baseTable[ie]=31744,baseTable[ie|256]=64512,shiftTable[ie]=13,shiftTable[ie|256]=13)}const mantissaTable=new NativeUint32Array(2048);for(let ie=1;ie<1024;++ie){let Z=ie<<13,ee=0;for(;!(Z&8388608);)Z<<=1,ee-=8388608;Z&=-8388609,ee+=947912704,mantissaTable[ie]=Z|ee}for(let ie=1024;ie<2048;++ie)mantissaTable[ie]=939524096+(ie-1024<<13);const exponentTable=new NativeUint32Array(64);for(let ie=1;ie<31;++ie)exponentTable[ie]=ie<<23;exponentTable[31]=1199570944,exponentTable[32]=2147483648;for(let ie=33;ie<63;++ie)exponentTable[ie]=2147483648+(ie-32<<23);exponentTable[63]=3347054592;const offsetTable=new NativeUint16Array(64);for(let ie=1;ie<64;++ie)ie!==32&&(offsetTable[ie]=1024);function convertToNumber(ie){const Z=ie>>10;return uint32View[0]=mantissaTable[offsetTable[Z]+(ie&1023)]+exponentTable[Z],floatView[0]}function getFloat16(ie,Z,...ee){return convertToNumber(DataViewPrototypeGetUint16(ie,Z,...safeIfNeeded(ee)))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}function getAugmentedNamespace(ie){if(ie.__esModule)return ie;var Z=ie.default;if(typeof Z=="function"){var ee=function ae(){return this instanceof ae?Reflect.construct(Z,arguments,this.constructor):Z.apply(this,arguments)};ee.prototype=Z.prototype}else ee={};return Object.defineProperty(ee,"__esModule",{value:!0}),Object.keys(ie).forEach(function(ae){var ye=Object.getOwnPropertyDescriptor(ie,ae);Object.defineProperty(ee,ae,ye.get?ye:{enumerable:!0,get:function(){return ie[ae]}})}),ee}var getAttribute$2={exports:{}};function getAttribute(ie,Z,ee){const ae=ee&&ee.debug||!1;ae&&console.log("[xml-utils] getting "+Z+" in "+ie);const ye=typeof ie=="object"?ie.outer:ie,ve=ye.slice(0,ye.indexOf(">")+1),be=['"',"'"];for(let Qe=0;Qe<be.length;Qe++){const Xe=be[Qe],Je=Z+"\\="+Xe+"([^"+Xe+"]*)"+Xe;ae&&console.log("[xml-utils] pattern:",Je);const it=new RegExp(Je).exec(ve);if(ae&&console.log("[xml-utils] match:",it),it)return it[1]}}getAttribute$2.exports=getAttribute,getAttribute$2.exports.default=getAttribute;var getAttributeExports=getAttribute$2.exports;const getAttribute$1=getDefaultExportFromCjs$1(getAttributeExports);var findTagsByName$2={exports:{}},findTagByName$2={exports:{}},indexOfMatch$2={exports:{}};function indexOfMatch$1(ie,Z,ee){const ye=new RegExp(Z).exec(ie.slice(ee));return ye?ee+ye.index:-1}indexOfMatch$2.exports=indexOfMatch$1,indexOfMatch$2.exports.default=indexOfMatch$1;var indexOfMatchExports=indexOfMatch$2.exports,indexOfMatchEnd$2={exports:{}};function indexOfMatchEnd$1(ie,Z,ee){const ye=new RegExp(Z).exec(ie.slice(ee));return ye?ee+ye.index+ye[0].length-1:-1}indexOfMatchEnd$2.exports=indexOfMatchEnd$1,indexOfMatchEnd$2.exports.default=indexOfMatchEnd$1;var indexOfMatchEndExports=indexOfMatchEnd$2.exports,countSubstring$2={exports:{}};function countSubstring$1(ie,Z){const ee=new RegExp(Z,"g"),ae=ie.match(ee);return ae?ae.length:0}countSubstring$2.exports=countSubstring$1,countSubstring$2.exports.default=countSubstring$1;var countSubstringExports=countSubstring$2.exports;const indexOfMatch=indexOfMatchExports,indexOfMatchEnd=indexOfMatchEndExports,countSubstring=countSubstringExports;function findTagByName$1(ie,Z,ee){const ae=ee&&ee.debug||!1,ye=!(ee&&typeof ee.nested===!1),ve=ee&&ee.startIndex||0;ae&&console.log("[xml-utils] starting findTagByName with",Z," and ",ee);const be=indexOfMatch(ie,`<${Z}[ 
>/]`,ve);if(ae&&console.log("[xml-utils] start:",be),be===-1)return;const Qe=ie.slice(be+Z.length);let Xe=indexOfMatchEnd(Qe,"^[^<]*[ /]>",0);const Je=Xe!==-1&&Qe[Xe-1]==="/";if(ae&&console.log("[xml-utils] selfClosing:",Je),Je===!1)if(ye){let lt=0,ct=1,gt=0;for(;(Xe=indexOfMatchEnd(Qe,"[ /]"+Z+">",lt))!==-1;){const ut=Qe.substring(lt,Xe+1);if(ct+=countSubstring(ut,"<"+Z+`[ 
	>]`),gt+=countSubstring(ut,"</"+Z+">"),gt>=ct)break;lt=Xe}}else Xe=indexOfMatchEnd(Qe,"[ /]"+Z+">",0);const tt=be+Z.length+Xe+1;if(ae&&console.log("[xml-utils] end:",tt),tt===-1)return;const it=ie.slice(be,tt);let st;return Je?st=null:st=it.slice(it.indexOf(">")+1,it.lastIndexOf("<")),{inner:st,outer:it,start:be,end:tt}}findTagByName$2.exports=findTagByName$1,findTagByName$2.exports.default=findTagByName$1;var findTagByNameExports=findTagByName$2.exports;const findTagByName=findTagByNameExports;function findTagsByName(ie,Z,ee){const ae=[],ye=ee&&ee.debug||!1,ve=ee&&typeof ee.nested=="boolean"?ee.nested:!0;let be=ee&&ee.startIndex||0,Qe;for(;Qe=findTagByName(ie,Z,{debug:ye,startIndex:be});)ve?be=Qe.start+1+Z.length:be=Qe.end,ae.push(Qe);return ye&&console.log("findTagsByName found",ae.length,"tags"),ae}findTagsByName$2.exports=findTagsByName,findTagsByName$2.exports.default=findTagsByName;var findTagsByNameExports=findTagsByName$2.exports;const findTagsByName$1=getDefaultExportFromCjs$1(findTagsByNameExports),fieldTagNames={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},fieldTags={};for(const ie in fieldTagNames)fieldTagNames.hasOwnProperty(ie)&&(fieldTags[fieldTagNames[ie]]=parseInt(ie,10));const arrayFields=[fieldTags.BitsPerSample,fieldTags.ExtraSamples,fieldTags.SampleFormat,fieldTags.StripByteCounts,fieldTags.StripOffsets,fieldTags.StripRowCounts,fieldTags.TileByteCounts,fieldTags.TileOffsets,fieldTags.SubIFDs],fieldTypeNames={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fieldTypes={};for(const ie in fieldTypeNames)fieldTypeNames.hasOwnProperty(ie)&&(fieldTypes[fieldTypeNames[ie]]=parseInt(ie,10));const photometricInterpretations={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},ExtraSamplesValues={Unspecified:0,Assocalpha:1,Unassalpha:2},LercParameters={Version:0,AddCompression:1},LercAddCompression={None:0,Deflate:1,Zstandard:2},geoKeyNames={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function fromWhiteIsZero(ie,Z){const{width:ee,height:ae}=ie,ye=new Uint8Array(ee*ae*3);let ve;for(let be=0,Qe=0;be<ie.length;++be,Qe+=3)ve=256-ie[be]/Z*256,ye[Qe]=ve,ye[Qe+1]=ve,ye[Qe+2]=ve;return ye}function fromBlackIsZero(ie,Z){const{width:ee,height:ae}=ie,ye=new Uint8Array(ee*ae*3);let ve;for(let be=0,Qe=0;be<ie.length;++be,Qe+=3)ve=ie[be]/Z*256,ye[Qe]=ve,ye[Qe+1]=ve,ye[Qe+2]=ve;return ye}function fromPalette(ie,Z){const{width:ee,height:ae}=ie,ye=new Uint8Array(ee*ae*3),ve=Z.length/3,be=Z.length/3*2;for(let Qe=0,Xe=0;Qe<ie.length;++Qe,Xe+=3){const Je=ie[Qe];ye[Xe]=Z[Je]/65536*256,ye[Xe+1]=Z[Je+ve]/65536*256,ye[Xe+2]=Z[Je+be]/65536*256}return ye}function fromCMYK(ie){const{width:Z,height:ee}=ie,ae=new Uint8Array(Z*ee*3);for(let ye=0,ve=0;ye<ie.length;ye+=4,ve+=3){const be=ie[ye],Qe=ie[ye+1],Xe=ie[ye+2],Je=ie[ye+3];ae[ve]=255*((255-be)/256)*((255-Je)/256),ae[ve+1]=255*((255-Qe)/256)*((255-Je)/256),ae[ve+2]=255*((255-Xe)/256)*((255-Je)/256)}return ae}function fromYCbCr(ie){const{width:Z,height:ee}=ie,ae=new Uint8ClampedArray(Z*ee*3);for(let ye=0,ve=0;ye<ie.length;ye+=3,ve+=3){const be=ie[ye],Qe=ie[ye+1],Xe=ie[ye+2];ae[ve]=be+1.402*(Xe-128),ae[ve+1]=be-.34414*(Qe-128)-.71414*(Xe-128),ae[ve+2]=be+1.772*(Qe-128)}return ae}const Xn$1=.95047,Yn$1=1,Zn$1=1.08883;function fromCIELab(ie){const{width:Z,height:ee}=ie,ae=new Uint8Array(Z*ee*3);for(let ye=0,ve=0;ye<ie.length;ye+=3,ve+=3){const be=ie[ye+0],Qe=ie[ye+1]<<24>>24,Xe=ie[ye+2]<<24>>24;let Je=(be+16)/116,tt=Qe/500+Je,it=Je-Xe/200,st,lt,ct;tt=Xn$1*(tt*tt*tt>.008856?tt*tt*tt:(tt-16/116)/7.787),Je=Yn$1*(Je*Je*Je>.008856?Je*Je*Je:(Je-16/116)/7.787),it=Zn$1*(it*it*it>.008856?it*it*it:(it-16/116)/7.787),st=tt*3.2406+Je*-1.5372+it*-.4986,lt=tt*-.9689+Je*1.8758+it*.0415,ct=tt*.0557+Je*-.204+it*1.057,st=st>.0031308?1.055*st**(1/2.4)-.055:12.92*st,lt=lt>.0031308?1.055*lt**(1/2.4)-.055:12.92*lt,ct=ct>.0031308?1.055*ct**(1/2.4)-.055:12.92*ct,ae[ve]=Math.max(0,Math.min(1,st))*255,ae[ve+1]=Math.max(0,Math.min(1,lt))*255,ae[ve+2]=Math.max(0,Math.min(1,ct))*255}return ae}const registry=new Map;function addDecoder(ie,Z){Array.isArray(ie)||(ie=[ie]),ie.forEach(ee=>registry.set(ee,Z))}async function getDecoder(ie){const Z=registry.get(ie.Compression);if(!Z)throw new Error(`Unknown compression method identifier: ${ie.Compression}`);const ee=await Z();return new ee(ie)}addDecoder([void 0,1],()=>Promise.resolve().then(()=>raw).then(ie=>ie.default)),addDecoder(5,()=>Promise.resolve().then(()=>lzw).then(ie=>ie.default)),addDecoder(6,()=>{throw new Error("old style JPEG compression is not supported.")}),addDecoder(7,()=>Promise.resolve().then(()=>jpeg).then(ie=>ie.default)),addDecoder([8,32946],()=>Promise.resolve().then(()=>deflate).then(ie=>ie.default)),addDecoder(32773,()=>Promise.resolve().then(()=>packbits).then(ie=>ie.default)),addDecoder(34887,()=>Promise.resolve().then(()=>lerc).then(async ie=>(await ie.zstd.init(),ie)).then(ie=>ie.default)),addDecoder(50001,()=>Promise.resolve().then(()=>webimage).then(ie=>ie.default));function copyNewSize(ie,Z,ee,ae=1){return new(Object.getPrototypeOf(ie)).constructor(Z*ee*ae)}function resampleNearest(ie,Z,ee,ae,ye){const ve=Z/ae,be=ee/ye;return ie.map(Qe=>{const Xe=copyNewSize(Qe,ae,ye);for(let Je=0;Je<ye;++Je){const tt=Math.min(Math.round(be*Je),ee-1);for(let it=0;it<ae;++it){const st=Math.min(Math.round(ve*it),Z-1),lt=Qe[tt*Z+st];Xe[Je*ae+it]=lt}}return Xe})}function lerp(ie,Z,ee){return(1-ee)*ie+ee*Z}function resampleBilinear(ie,Z,ee,ae,ye){const ve=Z/ae,be=ee/ye;return ie.map(Qe=>{const Xe=copyNewSize(Qe,ae,ye);for(let Je=0;Je<ye;++Je){const tt=be*Je,it=Math.floor(tt),st=Math.min(Math.ceil(tt),ee-1);for(let lt=0;lt<ae;++lt){const ct=ve*lt,gt=ct%1,ut=Math.floor(ct),mt=Math.min(Math.ceil(ct),Z-1),ei=Qe[it*Z+ut],ni=Qe[it*Z+mt],ri=Qe[st*Z+ut],si=Qe[st*Z+mt],li=lerp(lerp(ei,ni,gt),lerp(ri,si,gt),tt%1);Xe[Je*ae+lt]=li}}return Xe})}function resample(ie,Z,ee,ae,ye,ve="nearest"){switch(ve.toLowerCase()){case"nearest":return resampleNearest(ie,Z,ee,ae,ye);case"bilinear":case"linear":return resampleBilinear(ie,Z,ee,ae,ye);default:throw new Error(`Unsupported resampling method: '${ve}'`)}}function resampleNearestInterleaved(ie,Z,ee,ae,ye,ve){const be=Z/ae,Qe=ee/ye,Xe=copyNewSize(ie,ae,ye,ve);for(let Je=0;Je<ye;++Je){const tt=Math.min(Math.round(Qe*Je),ee-1);for(let it=0;it<ae;++it){const st=Math.min(Math.round(be*it),Z-1);for(let lt=0;lt<ve;++lt){const ct=ie[tt*Z*ve+st*ve+lt];Xe[Je*ae*ve+it*ve+lt]=ct}}}return Xe}function resampleBilinearInterleaved(ie,Z,ee,ae,ye,ve){const be=Z/ae,Qe=ee/ye,Xe=copyNewSize(ie,ae,ye,ve);for(let Je=0;Je<ye;++Je){const tt=Qe*Je,it=Math.floor(tt),st=Math.min(Math.ceil(tt),ee-1);for(let lt=0;lt<ae;++lt){const ct=be*lt,gt=ct%1,ut=Math.floor(ct),mt=Math.min(Math.ceil(ct),Z-1);for(let ei=0;ei<ve;++ei){const ni=ie[it*Z*ve+ut*ve+ei],ri=ie[it*Z*ve+mt*ve+ei],si=ie[st*Z*ve+ut*ve+ei],li=ie[st*Z*ve+mt*ve+ei],ai=lerp(lerp(ni,ri,gt),lerp(si,li,gt),tt%1);Xe[Je*ae*ve+lt*ve+ei]=ai}}}return Xe}function resampleInterleaved(ie,Z,ee,ae,ye,ve,be="nearest"){switch(be.toLowerCase()){case"nearest":return resampleNearestInterleaved(ie,Z,ee,ae,ye,ve);case"bilinear":case"linear":return resampleBilinearInterleaved(ie,Z,ee,ae,ye,ve);default:throw new Error(`Unsupported resampling method: '${be}'`)}}function sum(ie,Z,ee){let ae=0;for(let ye=Z;ye<ee;++ye)ae+=ie[ye];return ae}function arrayForType(ie,Z,ee){switch(ie){case 1:if(Z<=8)return new Uint8Array(ee);if(Z<=16)return new Uint16Array(ee);if(Z<=32)return new Uint32Array(ee);break;case 2:if(Z===8)return new Int8Array(ee);if(Z===16)return new Int16Array(ee);if(Z===32)return new Int32Array(ee);break;case 3:switch(Z){case 16:case 32:return new Float32Array(ee);case 64:return new Float64Array(ee)}break}throw Error("Unsupported data format/bitsPerSample")}function needsNormalization(ie,Z){return(ie===1||ie===2)&&Z<=32&&Z%8===0?!1:!(ie===3&&(Z===16||Z===32||Z===64))}function normalizeArray(ie,Z,ee,ae,ye,ve,be){const Qe=new DataView(ie),Xe=ee===2?be*ve:be*ve*ae,Je=ee===2?1:ae,tt=arrayForType(Z,ye,Xe),it=parseInt("1".repeat(ye),2);if(Z===1){let st;ee===1?st=ae*ye:st=ye;let lt=ve*st;lt&7&&(lt=lt+7&-8);for(let ct=0;ct<be;++ct){const gt=ct*lt;for(let ut=0;ut<ve;++ut){const mt=gt+ut*Je*ye;for(let ei=0;ei<Je;++ei){const ni=mt+ei*ye,ri=(ct*ve+ut)*Je+ei,si=Math.floor(ni/8),li=ni%8;if(li+ye<=8)tt[ri]=Qe.getUint8(si)>>8-ye-li&it;else if(li+ye<=16)tt[ri]=Qe.getUint16(si)>>16-ye-li&it;else if(li+ye<=24){const ai=Qe.getUint16(si)<<8|Qe.getUint8(si+2);tt[ri]=ai>>24-ye-li&it}else tt[ri]=Qe.getUint32(si)>>32-ye-li&it}}}}return tt.buffer}class GeoTIFFImage{constructor(Z,ee,ae,ye,ve,be){this.fileDirectory=Z,this.geoKeys=ee,this.dataView=ae,this.littleEndian=ye,this.tiles=ve?{}:null,this.isTiled=!Z.StripOffsets;const Qe=Z.PlanarConfiguration;if(this.planarConfiguration=typeof Qe>"u"?1:Qe,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=be}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(Z){return this.isTiled||(Z+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-Z*this.getTileHeight()}getBytesPerPixel(){let Z=0;for(let ee=0;ee<this.fileDirectory.BitsPerSample.length;++ee)Z+=this.getSampleByteSize(ee);return Z}getSampleByteSize(Z){if(Z>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${Z} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[Z]/8)}getReaderForSample(Z){const ee=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[Z]:1,ae=this.fileDirectory.BitsPerSample[Z];switch(ee){case 1:if(ae<=8)return DataView.prototype.getUint8;if(ae<=16)return DataView.prototype.getUint16;if(ae<=32)return DataView.prototype.getUint32;break;case 2:if(ae<=8)return DataView.prototype.getInt8;if(ae<=16)return DataView.prototype.getInt16;if(ae<=32)return DataView.prototype.getInt32;break;case 3:switch(ae){case 16:return function(ye,ve){return getFloat16(this,ye,ve)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(Z=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[Z]:1}getBitsPerSample(Z=0){return this.fileDirectory.BitsPerSample[Z]}getArrayForSample(Z,ee){const ae=this.getSampleFormat(Z),ye=this.getBitsPerSample(Z);return arrayForType(ae,ye,ee)}async getTileOrStrip(Z,ee,ae,ye,ve){const be=Math.ceil(this.getWidth()/this.getTileWidth()),Qe=Math.ceil(this.getHeight()/this.getTileHeight());let Xe;const{tiles:Je}=this;this.planarConfiguration===1?Xe=ee*be+Z:this.planarConfiguration===2&&(Xe=ae*be*Qe+ee*be+Z);let tt,it;this.isTiled?(tt=this.fileDirectory.TileOffsets[Xe],it=this.fileDirectory.TileByteCounts[Xe]):(tt=this.fileDirectory.StripOffsets[Xe],it=this.fileDirectory.StripByteCounts[Xe]);const st=(await this.source.fetch([{offset:tt,length:it}],ve))[0];let lt;return Je===null||!Je[Xe]?(lt=(async()=>{let ct=await ye.decode(this.fileDirectory,st);const gt=this.getSampleFormat(),ut=this.getBitsPerSample();return needsNormalization(gt,ut)&&(ct=normalizeArray(ct,gt,this.planarConfiguration,this.getSamplesPerPixel(),ut,this.getTileWidth(),this.getBlockHeight(ee))),ct})(),Je!==null&&(Je[Xe]=lt)):lt=Je[Xe],{x:Z,y:ee,sample:ae,data:await lt}}async _readRaster(Z,ee,ae,ye,ve,be,Qe,Xe,Je){const tt=this.getTileWidth(),it=this.getTileHeight(),st=this.getWidth(),lt=this.getHeight(),ct=Math.max(Math.floor(Z[0]/tt),0),gt=Math.min(Math.ceil(Z[2]/tt),Math.ceil(st/tt)),ut=Math.max(Math.floor(Z[1]/it),0),mt=Math.min(Math.ceil(Z[3]/it),Math.ceil(lt/it)),ei=Z[2]-Z[0];let ni=this.getBytesPerPixel();const ri=[],si=[];for(let ci=0;ci<ee.length;++ci)this.planarConfiguration===1?ri.push(sum(this.fileDirectory.BitsPerSample,0,ee[ci])/8):ri.push(0),si.push(this.getReaderForSample(ee[ci]));const li=[],{littleEndian:ai}=this;for(let ci=ut;ci<mt;++ci)for(let Ci=ct;Ci<gt;++Ci){let pi;this.planarConfiguration===1&&(pi=this.getTileOrStrip(Ci,ci,0,ve,Je));for(let gi=0;gi<ee.length;++gi){const _i=gi,bi=ee[gi];this.planarConfiguration===2&&(ni=this.getSampleByteSize(bi),pi=this.getTileOrStrip(Ci,ci,bi,ve,Je));const Mi=pi.then(yi=>{const Ti=yi.data,Ii=new DataView(Ti),Ri=this.getBlockHeight(yi.y),Pi=yi.y*it,xi=yi.x*tt,ki=Pi+Ri,Li=(yi.x+1)*tt,Yr=si[_i],Ui=Math.min(Ri,Ri-(ki-Z[3]),lt-Pi),Vi=Math.min(tt,tt-(Li-Z[2]),st-xi);for(let Kr=Math.max(0,Z[1]-Pi);Kr<Ui;++Kr)for(let Wi=Math.max(0,Z[0]-xi);Wi<Vi;++Wi){const Zr=(Kr*tt+Wi)*ni,ps=Yr.call(Ii,Zr+ri[_i],ai);let Is;ye?(Is=(Kr+Pi-Z[1])*ei*ee.length+(Wi+xi-Z[0])*ee.length+_i,ae[Is]=ps):(Is=(Kr+Pi-Z[1])*ei+Wi+xi-Z[0],ae[_i][Is]=ps)}});li.push(Mi)}}if(await Promise.all(li),be&&Z[2]-Z[0]!==be||Qe&&Z[3]-Z[1]!==Qe){let ci;return ye?ci=resampleInterleaved(ae,Z[2]-Z[0],Z[3]-Z[1],be,Qe,ee.length,Xe):ci=resample(ae,Z[2]-Z[0],Z[3]-Z[1],be,Qe,Xe),ci.width=be,ci.height=Qe,ci}return ae.width=be||Z[2]-Z[0],ae.height=Qe||Z[3]-Z[1],ae}async readRasters({window:Z,samples:ee=[],interleave:ae,pool:ye=null,width:ve,height:be,resampleMethod:Qe,fillValue:Xe,signal:Je}={}){const tt=Z||[0,0,this.getWidth(),this.getHeight()];if(tt[0]>tt[2]||tt[1]>tt[3])throw new Error("Invalid subsets");const it=tt[2]-tt[0],st=tt[3]-tt[1],lt=it*st,ct=this.getSamplesPerPixel();if(!ee||!ee.length)for(let ei=0;ei<ct;++ei)ee.push(ei);else for(let ei=0;ei<ee.length;++ei)if(ee[ei]>=ct)return Promise.reject(new RangeError(`Invalid sample index '${ee[ei]}'.`));let gt;if(ae){const ei=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,ni=Math.max.apply(null,this.fileDirectory.BitsPerSample);gt=arrayForType(ei,ni,lt*ee.length),Xe&&gt.fill(Xe)}else{gt=[];for(let ei=0;ei<ee.length;++ei){const ni=this.getArrayForSample(ee[ei],lt);Array.isArray(Xe)&&ei<Xe.length?ni.fill(Xe[ei]):Xe&&!Array.isArray(Xe)&&ni.fill(Xe),gt.push(ni)}}const ut=ye||await getDecoder(this.fileDirectory);return await this._readRaster(tt,ee,gt,ae,ut,ve,be,Qe,Je)}async readRGB({window:Z,interleave:ee=!0,pool:ae=null,width:ye,height:ve,resampleMethod:be,enableAlpha:Qe=!1,signal:Xe}={}){const Je=Z||[0,0,this.getWidth(),this.getHeight()];if(Je[0]>Je[2]||Je[1]>Je[3])throw new Error("Invalid subsets");const tt=this.fileDirectory.PhotometricInterpretation;if(tt===photometricInterpretations.RGB){let mt=[0,1,2];if(this.fileDirectory.ExtraSamples!==ExtraSamplesValues.Unspecified&&Qe){mt=[];for(let ei=0;ei<this.fileDirectory.BitsPerSample.length;ei+=1)mt.push(ei)}return this.readRasters({window:Z,interleave:ee,samples:mt,pool:ae,width:ye,height:ve,resampleMethod:be,signal:Xe})}let it;switch(tt){case photometricInterpretations.WhiteIsZero:case photometricInterpretations.BlackIsZero:case photometricInterpretations.Palette:it=[0];break;case photometricInterpretations.CMYK:it=[0,1,2,3];break;case photometricInterpretations.YCbCr:case photometricInterpretations.CIELab:it=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const st={window:Je,interleave:!0,samples:it,pool:ae,width:ye,height:ve,resampleMethod:be,signal:Xe},{fileDirectory:lt}=this,ct=await this.readRasters(st),gt=2**this.fileDirectory.BitsPerSample[0];let ut;switch(tt){case photometricInterpretations.WhiteIsZero:ut=fromWhiteIsZero(ct,gt);break;case photometricInterpretations.BlackIsZero:ut=fromBlackIsZero(ct,gt);break;case photometricInterpretations.Palette:ut=fromPalette(ct,lt.ColorMap);break;case photometricInterpretations.CMYK:ut=fromCMYK(ct);break;case photometricInterpretations.YCbCr:ut=fromYCbCr(ct);break;case photometricInterpretations.CIELab:ut=fromCIELab(ct);break;default:throw new Error("Unsupported photometric interpretation.")}if(!ee){const mt=new Uint8Array(ut.length/3),ei=new Uint8Array(ut.length/3),ni=new Uint8Array(ut.length/3);for(let ri=0,si=0;ri<ut.length;ri+=3,++si)mt[si]=ut[ri],ei[si]=ut[ri+1],ni[si]=ut[ri+2];ut=[mt,ei,ni]}return ut.width=ct.width,ut.height=ct.height,ut}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const Z=[];for(let ee=0;ee<this.fileDirectory.ModelTiepoint.length;ee+=6)Z.push({i:this.fileDirectory.ModelTiepoint[ee],j:this.fileDirectory.ModelTiepoint[ee+1],k:this.fileDirectory.ModelTiepoint[ee+2],x:this.fileDirectory.ModelTiepoint[ee+3],y:this.fileDirectory.ModelTiepoint[ee+4],z:this.fileDirectory.ModelTiepoint[ee+5]});return Z}getGDALMetadata(Z=null){const ee={};if(!this.fileDirectory.GDAL_METADATA)return null;const ae=this.fileDirectory.GDAL_METADATA;let ye=findTagsByName$1(ae,"Item");Z===null?ye=ye.filter(ve=>getAttribute$1(ve,"sample")===void 0):ye=ye.filter(ve=>Number(getAttribute$1(ve,"sample"))===Z);for(let ve=0;ve<ye.length;++ve){const be=ye[ve];ee[getAttribute$1(be,"name")]=be.inner}return ee}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const Z=this.fileDirectory.GDAL_NODATA;return Number(Z.substring(0,Z.length-1))}getOrigin(){const Z=this.fileDirectory.ModelTiepoint,ee=this.fileDirectory.ModelTransformation;if(Z&&Z.length===6)return[Z[3],Z[4],Z[5]];if(ee)return[ee[3],ee[7],ee[11]];throw new Error("The image does not have an affine transformation.")}getResolution(Z=null){const ee=this.fileDirectory.ModelPixelScale,ae=this.fileDirectory.ModelTransformation;if(ee)return[ee[0],-ee[1],ee[2]];if(ae)return[ae[0],-ae[5],ae[10]];if(Z){const[ye,ve,be]=Z.getResolution();return[ye*Z.getWidth()/this.getWidth(),ve*Z.getHeight()/this.getHeight(),be*Z.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(Z=!1){const ee=this.getHeight(),ae=this.getWidth();if(this.fileDirectory.ModelTransformation&&!Z){const[ye,ve,be,Qe,Xe,Je,tt,it]=this.fileDirectory.ModelTransformation,lt=[[0,0],[0,ee],[ae,0],[ae,ee]].map(([ut,mt])=>[Qe+ye*ut+ve*mt,it+Xe*ut+Je*mt]),ct=lt.map(ut=>ut[0]),gt=lt.map(ut=>ut[1]);return[Math.min(...ct),Math.min(...gt),Math.max(...ct),Math.max(...gt)]}else{const ye=this.getOrigin(),ve=this.getResolution(),be=ye[0],Qe=ye[1],Xe=be+ve[0]*ae,Je=Qe+ve[1]*ee;return[Math.min(be,Xe),Math.min(Qe,Je),Math.max(be,Xe),Math.max(Qe,Je)]}}}class DataView64{constructor(Z){this._dataView=new DataView(Z)}get buffer(){return this._dataView.buffer}getUint64(Z,ee){const ae=this.getUint32(Z,ee),ye=this.getUint32(Z+4,ee);let ve;if(ee){if(ve=ae+2**32*ye,!Number.isSafeInteger(ve))throw new Error(`${ve} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return ve}if(ve=2**32*ae+ye,!Number.isSafeInteger(ve))throw new Error(`${ve} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return ve}getInt64(Z,ee){let ae=0;const ye=(this._dataView.getUint8(Z+(ee?7:0))&128)>0;let ve=!0;for(let be=0;be<8;be++){let Qe=this._dataView.getUint8(Z+(ee?be:7-be));ye&&(ve?Qe!==0&&(Qe=~(Qe-1)&255,ve=!1):Qe=~Qe&255),ae+=Qe*256**be}return ye&&(ae=-ae),ae}getUint8(Z,ee){return this._dataView.getUint8(Z,ee)}getInt8(Z,ee){return this._dataView.getInt8(Z,ee)}getUint16(Z,ee){return this._dataView.getUint16(Z,ee)}getInt16(Z,ee){return this._dataView.getInt16(Z,ee)}getUint32(Z,ee){return this._dataView.getUint32(Z,ee)}getInt32(Z,ee){return this._dataView.getInt32(Z,ee)}getFloat16(Z,ee){return getFloat16(this._dataView,Z,ee)}getFloat32(Z,ee){return this._dataView.getFloat32(Z,ee)}getFloat64(Z,ee){return this._dataView.getFloat64(Z,ee)}}class DataSlice{constructor(Z,ee,ae,ye){this._dataView=new DataView(Z),this._sliceOffset=ee,this._littleEndian=ae,this._bigTiff=ye}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(Z,ee){return this.sliceOffset<=Z&&this.sliceTop>=Z+ee}readUint8(Z){return this._dataView.getUint8(Z-this._sliceOffset,this._littleEndian)}readInt8(Z){return this._dataView.getInt8(Z-this._sliceOffset,this._littleEndian)}readUint16(Z){return this._dataView.getUint16(Z-this._sliceOffset,this._littleEndian)}readInt16(Z){return this._dataView.getInt16(Z-this._sliceOffset,this._littleEndian)}readUint32(Z){return this._dataView.getUint32(Z-this._sliceOffset,this._littleEndian)}readInt32(Z){return this._dataView.getInt32(Z-this._sliceOffset,this._littleEndian)}readFloat32(Z){return this._dataView.getFloat32(Z-this._sliceOffset,this._littleEndian)}readFloat64(Z){return this._dataView.getFloat64(Z-this._sliceOffset,this._littleEndian)}readUint64(Z){const ee=this.readUint32(Z),ae=this.readUint32(Z+4);let ye;if(this._littleEndian){if(ye=ee+2**32*ae,!Number.isSafeInteger(ye))throw new Error(`${ye} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return ye}if(ye=2**32*ee+ae,!Number.isSafeInteger(ye))throw new Error(`${ye} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return ye}readInt64(Z){let ee=0;const ae=(this._dataView.getUint8(Z+(this._littleEndian?7:0))&128)>0;let ye=!0;for(let ve=0;ve<8;ve++){let be=this._dataView.getUint8(Z+(this._littleEndian?ve:7-ve));ae&&(ye?be!==0&&(be=~(be-1)&255,ye=!1):be=~be&255),ee+=be*256**ve}return ae&&(ee=-ee),ee}readOffset(Z){return this._bigTiff?this.readUint64(Z):this.readUint32(Z)}}const defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class Pool{constructor(Z=defaultPoolSize,ee){this.workers=null,this._awaitingDecoder=null,this.size=Z,this.messageId=0,Z&&(this._awaitingDecoder=ee?Promise.resolve(ee):new Promise(ae=>{Promise.resolve().then(()=>decoder).then(ye=>{ae(ye.create)})}),this._awaitingDecoder.then(ae=>{this._awaitingDecoder=null,this.workers=[];for(let ye=0;ye<Z;ye++)this.workers.push({worker:ae(),idle:!0})}))}async decode(Z,ee){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?getDecoder(Z).then(ae=>ae.decode(Z,ee)):new Promise(ae=>{const ye=this.workers.find(Qe=>Qe.idle)||this.workers[Math.floor(Math.random()*this.size)];ye.idle=!1;const ve=this.messageId++,be=Qe=>{Qe.data.id===ve&&(ye.idle=!0,ae(Qe.data.decoded),ye.worker.removeEventListener("message",be))};ye.worker.addEventListener("message",be),ye.worker.postMessage({fileDirectory:Z,buffer:ee,id:ve},[ee])})}destroy(){this.workers&&(this.workers.forEach(Z=>{Z.worker.terminate()}),this.workers=null)}}const CRLFCRLF=`\r
\r
`;function itemsToObject(ie){if(typeof Object.fromEntries<"u")return Object.fromEntries(ie);const Z={};for(const[ee,ae]of ie)Z[ee.toLowerCase()]=ae;return Z}function parseHeaders(ie){const Z=ie.split(`\r
`).map(ee=>{const ae=ee.split(":").map(ye=>ye.trim());return ae[0]=ae[0].toLowerCase(),ae});return itemsToObject(Z)}function parseContentType(ie){const[Z,...ee]=ie.split(";").map(ye=>ye.trim()),ae=ee.map(ye=>ye.split("="));return{type:Z,params:itemsToObject(ae)}}function parseContentRange(ie){let Z,ee,ae;return ie&&([,Z,ee,ae]=ie.match(/bytes (\d+)-(\d+)\/(\d+)/),Z=parseInt(Z,10),ee=parseInt(ee,10),ae=parseInt(ae,10)),{start:Z,end:ee,total:ae}}function parseByteRanges(ie,Z){let ee=null;const ae=new TextDecoder("ascii"),ye=[],ve=`--${Z}`,be=`${ve}--`;for(let Qe=0;Qe<10;++Qe)ae.decode(new Uint8Array(ie,Qe,ve.length))===ve&&(ee=Qe);if(ee===null)throw new Error("Could not find initial boundary");for(;ee<ie.byteLength;){const Qe=ae.decode(new Uint8Array(ie,ee,Math.min(ve.length+1024,ie.byteLength-ee)));if(Qe.length===0||Qe.startsWith(be))break;if(!Qe.startsWith(ve))throw new Error("Part does not start with boundary");const Xe=Qe.substr(ve.length+2);if(Xe.length===0)break;const Je=Xe.indexOf(CRLFCRLF),tt=parseHeaders(Xe.substr(0,Je)),{start:it,end:st,total:lt}=parseContentRange(tt["content-range"]),ct=ee+ve.length+Je+CRLFCRLF.length,gt=parseInt(st,10)+1-parseInt(it,10);ye.push({headers:tt,data:ie.slice(ct,ct+gt),offset:it,length:gt,fileSize:lt}),ee=ct+gt+4}return ye}class BaseSource{async fetch(Z,ee=void 0){return Promise.all(Z.map(ae=>this.fetchSlice(ae,ee)))}async fetchSlice(Z){throw new Error(`fetching of slice ${Z} not possible, not implemented`)}get fileSize(){return null}async close(){}}class QuickLRU extends Map{constructor(Z={}){if(super(),!(Z.maxSize&&Z.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof Z.maxAge=="number"&&Z.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=Z.maxSize,this.maxAge=Z.maxAge||Number.POSITIVE_INFINITY,this.onEviction=Z.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(Z){if(typeof this.onEviction=="function")for(const[ee,ae]of Z)this.onEviction(ee,ae.value)}_deleteIfExpired(Z,ee){return typeof ee.expiry=="number"&&ee.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(Z,ee.value),this.delete(Z)):!1}_getOrDeleteIfExpired(Z,ee){if(this._deleteIfExpired(Z,ee)===!1)return ee.value}_getItemValue(Z,ee){return ee.expiry?this._getOrDeleteIfExpired(Z,ee):ee.value}_peek(Z,ee){const ae=ee.get(Z);return this._getItemValue(Z,ae)}_set(Z,ee){this.cache.set(Z,ee),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(Z,ee){this.oldCache.delete(Z),this._set(Z,ee)}*_entriesAscending(){for(const Z of this.oldCache){const[ee,ae]=Z;this.cache.has(ee)||this._deleteIfExpired(ee,ae)===!1&&(yield Z)}for(const Z of this.cache){const[ee,ae]=Z;this._deleteIfExpired(ee,ae)===!1&&(yield Z)}}get(Z){if(this.cache.has(Z)){const ee=this.cache.get(Z);return this._getItemValue(Z,ee)}if(this.oldCache.has(Z)){const ee=this.oldCache.get(Z);if(this._deleteIfExpired(Z,ee)===!1)return this._moveToRecent(Z,ee),ee.value}}set(Z,ee,{maxAge:ae=this.maxAge}={}){const ye=typeof ae=="number"&&ae!==Number.POSITIVE_INFINITY?Date.now()+ae:void 0;return this.cache.has(Z)?this.cache.set(Z,{value:ee,expiry:ye}):this._set(Z,{value:ee,expiry:ye}),this}has(Z){return this.cache.has(Z)?!this._deleteIfExpired(Z,this.cache.get(Z)):this.oldCache.has(Z)?!this._deleteIfExpired(Z,this.oldCache.get(Z)):!1}peek(Z){if(this.cache.has(Z))return this._peek(Z,this.cache);if(this.oldCache.has(Z))return this._peek(Z,this.oldCache)}delete(Z){const ee=this.cache.delete(Z);return ee&&this._size--,this.oldCache.delete(Z)||ee}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(Z){if(!(Z&&Z>0))throw new TypeError("`maxSize` must be a number greater than 0");const ee=[...this._entriesAscending()],ae=ee.length-Z;ae<0?(this.cache=new Map(ee),this.oldCache=new Map,this._size=ee.length):(ae>0&&this._emitEvictions(ee.slice(0,ae)),this.oldCache=new Map(ee.slice(ae)),this.cache=new Map,this._size=0),this.maxSize=Z}*keys(){for(const[Z]of this)yield Z}*values(){for(const[,Z]of this)yield Z}*[Symbol.iterator](){for(const Z of this.cache){const[ee,ae]=Z;this._deleteIfExpired(ee,ae)===!1&&(yield[ee,ae.value])}for(const Z of this.oldCache){const[ee,ae]=Z;this.cache.has(ee)||this._deleteIfExpired(ee,ae)===!1&&(yield[ee,ae.value])}}*entriesDescending(){let Z=[...this.cache];for(let ee=Z.length-1;ee>=0;--ee){const ae=Z[ee],[ye,ve]=ae;this._deleteIfExpired(ye,ve)===!1&&(yield[ye,ve.value])}Z=[...this.oldCache];for(let ee=Z.length-1;ee>=0;--ee){const ae=Z[ee],[ye,ve]=ae;this.cache.has(ye)||this._deleteIfExpired(ye,ve)===!1&&(yield[ye,ve.value])}}*entriesAscending(){for(const[Z,ee]of this._entriesAscending())yield[Z,ee.value]}get size(){if(!this._size)return this.oldCache.size;let Z=0;for(const ee of this.oldCache.keys())this.cache.has(ee)||Z++;return Math.min(this._size+Z,this.maxSize)}entries(){return this.entriesAscending()}forEach(Z,ee=this){for(const[ae,ye]of this.entriesAscending())Z.call(ee,ye,ae,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function wait(ie){return new Promise(Z=>setTimeout(Z,ie))}function zip(ie,Z){const ee=Array.isArray(ie)?ie:Array.from(ie),ae=Array.isArray(Z)?Z:Array.from(Z);return ee.map((ye,ve)=>[ye,ae[ve]])}class AbortError extends Error{constructor(Z){super(Z),Error.captureStackTrace&&Error.captureStackTrace(this,AbortError),this.name="AbortError"}}class CustomAggregateError extends Error{constructor(Z,ee){super(ee),this.errors=Z,this.message=ee,this.name="AggregateError"}}const AggregateError=CustomAggregateError;class Block{constructor(Z,ee,ae=null){this.offset=Z,this.length=ee,this.data=ae}get top(){return this.offset+this.length}}class BlockGroup{constructor(Z,ee,ae){this.offset=Z,this.length=ee,this.blockIds=ae}}class BlockedSource extends BaseSource{constructor(Z,{blockSize:ee=65536,cacheSize:ae=100}={}){super(),this.source=Z,this.blockSize=ee,this.blockCache=new QuickLRU({maxSize:ae,onEviction:(ye,ve)=>{this.evictedBlocks.set(ye,ve)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(Z,ee){const ae=[],ye=[],ve=[];this.evictedBlocks.clear();for(const{offset:st,length:lt}of Z){let ct=st+lt;const{fileSize:gt}=this;gt!==null&&(ct=Math.min(ct,gt));const ut=Math.floor(st/this.blockSize)*this.blockSize;for(let mt=ut;mt<ct;mt+=this.blockSize){const ei=Math.floor(mt/this.blockSize);!this.blockCache.has(ei)&&!this.blockRequests.has(ei)&&(this.blockIdsToFetch.add(ei),ye.push(ei)),this.blockRequests.has(ei)&&ae.push(this.blockRequests.get(ei)),ve.push(ei)}}await wait(),this.fetchBlocks(ee);const be=[];for(const st of ye)this.blockRequests.has(st)&&be.push(this.blockRequests.get(st));await Promise.allSettled(ae),await Promise.allSettled(be);const Qe=[],Xe=ve.filter(st=>this.abortedBlockIds.has(st)||!this.blockCache.has(st));if(Xe.forEach(st=>this.blockIdsToFetch.add(st)),Xe.length>0&&ee&&!ee.aborted){this.fetchBlocks(null);for(const st of Xe){const lt=this.blockRequests.get(st);if(!lt)throw new Error(`Block ${st} is not in the block requests`);Qe.push(lt)}await Promise.allSettled(Qe)}if(ee&&ee.aborted)throw new AbortError("Request was aborted");const Je=ve.map(st=>this.blockCache.get(st)||this.evictedBlocks.get(st)),tt=Je.filter(st=>!st);if(tt.length)throw new AggregateError(tt,"Request failed");const it=new Map(zip(ve,Je));return this.readSliceData(Z,it)}fetchBlocks(Z){if(this.blockIdsToFetch.size>0){const ee=this.groupBlocks(this.blockIdsToFetch),ae=this.source.fetch(ee,Z);for(let ye=0;ye<ee.length;++ye){const ve=ee[ye];for(const be of ve.blockIds)this.blockRequests.set(be,(async()=>{try{const Qe=(await ae)[ye],Xe=be*this.blockSize,Je=Xe-Qe.offset,tt=Math.min(Je+this.blockSize,Qe.data.byteLength),it=Qe.data.slice(Je,tt),st=new Block(Xe,it.byteLength,it,be);this.blockCache.set(be,st),this.abortedBlockIds.delete(be)}catch(Qe){if(Qe.name==="AbortError")Qe.signal=Z,this.blockCache.delete(be),this.abortedBlockIds.add(be);else throw Qe}finally{this.blockRequests.delete(be)}})())}this.blockIdsToFetch.clear()}}groupBlocks(Z){const ee=Array.from(Z).sort((be,Qe)=>be-Qe);if(ee.length===0)return[];let ae=[],ye=null;const ve=[];for(const be of ee)ye===null||ye+1===be?(ae.push(be),ye=be):(ve.push(new BlockGroup(ae[0]*this.blockSize,ae.length*this.blockSize,ae)),ae=[be],ye=be);return ve.push(new BlockGroup(ae[0]*this.blockSize,ae.length*this.blockSize,ae)),ve}readSliceData(Z,ee){return Z.map(ae=>{let ye=ae.offset+ae.length;this.fileSize!==null&&(ye=Math.min(this.fileSize,ye));const ve=Math.floor(ae.offset/this.blockSize),be=Math.floor(ye/this.blockSize),Qe=new ArrayBuffer(ae.length),Xe=new Uint8Array(Qe);for(let Je=ve;Je<=be;++Je){const tt=ee.get(Je),it=tt.offset-ae.offset,st=tt.top-ye;let lt=0,ct=0,gt;it<0?lt=-it:it>0&&(ct=it),st<0?gt=tt.length-lt:gt=ye-tt.offset-lt;const ut=new Uint8Array(tt.data,lt,gt);Xe.set(ut,ct)}return Qe})}}class BaseResponse{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(Z){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class BaseClient{constructor(Z){this.url=Z}async request({headers:Z,signal:ee}={}){throw new Error("request is not implemented")}}class FetchResponse extends BaseResponse{constructor(Z){super(),this.response=Z}get status(){return this.response.status}getHeader(Z){return this.response.headers.get(Z)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class FetchClient extends BaseClient{constructor(Z,ee){super(Z),this.credentials=ee}async request({headers:Z,signal:ee}={}){const ae=await fetch(this.url,{headers:Z,credentials:this.credentials,signal:ee});return new FetchResponse(ae)}}class XHRResponse extends BaseResponse{constructor(Z,ee){super(),this.xhr=Z,this.data=ee}get status(){return this.xhr.status}getHeader(Z){return this.xhr.getResponseHeader(Z)}async getData(){return this.data}}class XHRClient extends BaseClient{constructRequest(Z,ee){return new Promise((ae,ye)=>{const ve=new XMLHttpRequest;ve.open("GET",this.url),ve.responseType="arraybuffer";for(const[be,Qe]of Object.entries(Z))ve.setRequestHeader(be,Qe);ve.onload=()=>{const be=ve.response;ae(new XHRResponse(ve,be))},ve.onerror=ye,ve.onabort=()=>ye(new AbortError("Request aborted")),ve.send(),ee&&(ee.aborted&&ve.abort(),ee.addEventListener("abort",()=>ve.abort()))})}async request({headers:Z,signal:ee}={}){return await this.constructRequest(Z,ee)}}const fs={},__viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:fs},Symbol.toStringTag,{value:"Module"}));class HttpResponse extends BaseResponse{constructor(Z,ee){super(),this.response=Z,this.dataPromise=ee}get status(){return this.response.statusCode}getHeader(Z){return this.response.headers[Z]}async getData(){return await this.dataPromise}}class HttpClient extends BaseClient{constructor(Z){super(Z),this.parsedUrl=fs.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",fs)}constructRequest(Z,ee){return new Promise((ae,ye)=>{const ve=this.httpApi.get({...this.parsedUrl,headers:Z},be=>{const Qe=new Promise(Xe=>{const Je=[];be.on("data",tt=>{Je.push(tt)}),be.on("end",()=>{const tt=Buffer.concat(Je).buffer;Xe(tt)}),be.on("error",ye)});ae(new HttpResponse(be,Qe))});ve.on("error",ye),ee&&(ee.aborted&&ve.destroy(new AbortError("Request aborted")),ee.addEventListener("abort",()=>ve.destroy(new AbortError("Request aborted"))))})}async request({headers:Z,signal:ee}={}){return await this.constructRequest(Z,ee)}}class RemoteSource extends BaseSource{constructor(Z,ee,ae,ye){super(),this.client=Z,this.headers=ee,this.maxRanges=ae,this.allowFullFile=ye,this._fileSize=null}async fetch(Z,ee){return this.maxRanges>=Z.length?this.fetchSlices(Z,ee):(this.maxRanges>0&&Z.length>1,Promise.all(Z.map(ae=>this.fetchSlice(ae,ee))))}async fetchSlices(Z,ee){const ae=await this.client.request({headers:{...this.headers,Range:`bytes=${Z.map(({offset:ye,length:ve})=>`${ye}-${ye+ve}`).join(",")}`},signal:ee});if(ae.ok)if(ae.status===206){const{type:ye,params:ve}=parseContentType(ae.getHeader("content-type"));if(ye==="multipart/byteranges"){const it=parseByteRanges(await ae.getData(),ve.boundary);return this._fileSize=it[0].fileSize||null,it}const be=await ae.getData(),{start:Qe,end:Xe,total:Je}=parseContentRange(ae.getHeader("content-range"));this._fileSize=Je||null;const tt=[{data:be,offset:Qe,length:Xe-Qe}];if(Z.length>1){const it=await Promise.all(Z.slice(1).map(st=>this.fetchSlice(st,ee)));return tt.concat(it)}return tt}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const ye=await ae.getData();return this._fileSize=ye.byteLength,[{data:ye,offset:0,length:ye.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(Z,ee){const{offset:ae,length:ye}=Z,ve=await this.client.request({headers:{...this.headers,Range:`bytes=${ae}-${ae+ye}`},signal:ee});if(ve.ok)if(ve.status===206){const be=await ve.getData(),{total:Qe}=parseContentRange(ve.getHeader("content-range"));return this._fileSize=Qe||null,{data:be,offset:ae,length:ye}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const be=await ve.getData();return this._fileSize=be.byteLength,{data:be,offset:0,length:be.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function maybeWrapInBlockedSource(ie,{blockSize:Z,cacheSize:ee}){return Z===null?ie:new BlockedSource(ie,{blockSize:Z,cacheSize:ee})}function makeFetchSource(ie,{headers:Z={},credentials:ee,maxRanges:ae=0,allowFullFile:ye=!1,...ve}={}){const be=new FetchClient(ie,ee),Qe=new RemoteSource(be,Z,ae,ye);return maybeWrapInBlockedSource(Qe,ve)}function makeXHRSource(ie,{headers:Z={},maxRanges:ee=0,allowFullFile:ae=!1,...ye}={}){const ve=new XHRClient(ie),be=new RemoteSource(ve,Z,ee,ae);return maybeWrapInBlockedSource(be,ye)}function makeHttpSource(ie,{headers:Z={},maxRanges:ee=0,allowFullFile:ae=!1,...ye}={}){const ve=new HttpClient(ie),be=new RemoteSource(ve,Z,ee,ae);return maybeWrapInBlockedSource(be,ye)}function makeRemoteSource(ie,{forceXHR:Z=!1,...ee}={}){return typeof fetch=="function"&&!Z?makeFetchSource(ie,ee):typeof XMLHttpRequest<"u"?makeXHRSource(ie,ee):makeHttpSource(ie,ee)}class FileReaderSource extends BaseSource{constructor(Z){super(),this.file=Z}async fetchSlice(Z,ee){return new Promise((ae,ye)=>{const ve=this.file.slice(Z.offset,Z.offset+Z.length),be=new FileReader;be.onload=Qe=>ae(Qe.target.result),be.onerror=ye,be.onabort=ye,be.readAsArrayBuffer(ve),ee&&ee.addEventListener("abort",()=>be.abort())})}}function makeFileReaderSource(ie){return new FileReaderSource(ie)}function decodeRowAcc(ie,Z){let ee=ie.length-Z,ae=0;do{for(let ye=Z;ye>0;ye--)ie[ae+Z]+=ie[ae],ae++;ee-=Z}while(ee>0)}function decodeRowFloatingPoint(ie,Z,ee){let ae=0,ye=ie.length;const ve=ye/ee;for(;ye>Z;){for(let Qe=Z;Qe>0;--Qe)ie[ae+Z]+=ie[ae],++ae;ye-=Z}const be=ie.slice();for(let Qe=0;Qe<ve;++Qe)for(let Xe=0;Xe<ee;++Xe)ie[ee*Qe+Xe]=be[(ee-Xe-1)*ve+Qe]}function applyPredictor(ie,Z,ee,ae,ye,ve){if(!Z||Z===1)return ie;for(let Xe=0;Xe<ye.length;++Xe){if(ye[Xe]%8!==0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(ye[Xe]!==ye[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const be=ye[0]/8,Qe=ve===2?1:ye.length;for(let Xe=0;Xe<ae&&!(Xe*Qe*ee*be>=ie.byteLength);++Xe){let Je;if(Z===2){switch(ye[0]){case 8:Je=new Uint8Array(ie,Xe*Qe*ee*be,Qe*ee*be);break;case 16:Je=new Uint16Array(ie,Xe*Qe*ee*be,Qe*ee*be/2);break;case 32:Je=new Uint32Array(ie,Xe*Qe*ee*be,Qe*ee*be/4);break;default:throw new Error(`Predictor 2 not allowed with ${ye[0]} bits per sample.`)}decodeRowAcc(Je,Qe)}else Z===3&&(Je=new Uint8Array(ie,Xe*Qe*ee*be,Qe*ee*be),decodeRowFloatingPoint(Je,Qe,be))}return ie}class BaseDecoder{async decode(Z,ee){const ae=await this.decodeBlock(ee),ye=Z.Predictor||1;if(ye!==1){const ve=!Z.StripOffsets,be=ve?Z.TileWidth:Z.ImageWidth,Qe=ve?Z.TileLength:Z.RowsPerStrip||Z.ImageLength;return applyPredictor(ae,ye,be,Qe,Z.BitsPerSample,Z.PlanarConfiguration)}return ae}}function getFieldTypeLength(ie){switch(ie){case fieldTypes.BYTE:case fieldTypes.ASCII:case fieldTypes.SBYTE:case fieldTypes.UNDEFINED:return 1;case fieldTypes.SHORT:case fieldTypes.SSHORT:return 2;case fieldTypes.LONG:case fieldTypes.SLONG:case fieldTypes.FLOAT:case fieldTypes.IFD:return 4;case fieldTypes.RATIONAL:case fieldTypes.SRATIONAL:case fieldTypes.DOUBLE:case fieldTypes.LONG8:case fieldTypes.SLONG8:case fieldTypes.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${ie}`)}}function parseGeoKeyDirectory(ie){const Z=ie.GeoKeyDirectory;if(!Z)return null;const ee={};for(let ae=4;ae<=Z[3]*4;ae+=4){const ye=geoKeyNames[Z[ae]],ve=Z[ae+1]?fieldTagNames[Z[ae+1]]:null,be=Z[ae+2],Qe=Z[ae+3];let Xe=null;if(!ve)Xe=Qe;else{if(Xe=ie[ve],typeof Xe>"u"||Xe===null)throw new Error(`Could not get value of geoKey '${ye}'.`);typeof Xe=="string"?Xe=Xe.substring(Qe,Qe+be-1):Xe.subarray&&(Xe=Xe.subarray(Qe,Qe+be),be===1&&(Xe=Xe[0]))}ee[ye]=Xe}return ee}function getValues(ie,Z,ee,ae){let ye=null,ve=null;const be=getFieldTypeLength(Z);switch(Z){case fieldTypes.BYTE:case fieldTypes.ASCII:case fieldTypes.UNDEFINED:ye=new Uint8Array(ee),ve=ie.readUint8;break;case fieldTypes.SBYTE:ye=new Int8Array(ee),ve=ie.readInt8;break;case fieldTypes.SHORT:ye=new Uint16Array(ee),ve=ie.readUint16;break;case fieldTypes.SSHORT:ye=new Int16Array(ee),ve=ie.readInt16;break;case fieldTypes.LONG:case fieldTypes.IFD:ye=new Uint32Array(ee),ve=ie.readUint32;break;case fieldTypes.SLONG:ye=new Int32Array(ee),ve=ie.readInt32;break;case fieldTypes.LONG8:case fieldTypes.IFD8:ye=new Array(ee),ve=ie.readUint64;break;case fieldTypes.SLONG8:ye=new Array(ee),ve=ie.readInt64;break;case fieldTypes.RATIONAL:ye=new Uint32Array(ee*2),ve=ie.readUint32;break;case fieldTypes.SRATIONAL:ye=new Int32Array(ee*2),ve=ie.readInt32;break;case fieldTypes.FLOAT:ye=new Float32Array(ee),ve=ie.readFloat32;break;case fieldTypes.DOUBLE:ye=new Float64Array(ee),ve=ie.readFloat64;break;default:throw new RangeError(`Invalid field type: ${Z}`)}if(Z===fieldTypes.RATIONAL||Z===fieldTypes.SRATIONAL)for(let Qe=0;Qe<ee;Qe+=2)ye[Qe]=ve.call(ie,ae+Qe*be),ye[Qe+1]=ve.call(ie,ae+(Qe*be+4));else for(let Qe=0;Qe<ee;++Qe)ye[Qe]=ve.call(ie,ae+Qe*be);return Z===fieldTypes.ASCII?new TextDecoder("utf-8").decode(ye):ye}class ImageFileDirectory{constructor(Z,ee,ae){this.fileDirectory=Z,this.geoKeyDirectory=ee,this.nextIFDByteOffset=ae}}class GeoTIFFImageIndexError extends Error{constructor(Z){super(`No image at index ${Z}`),this.index=Z}}class GeoTIFFBase{async readRasters(Z={}){const{window:ee,width:ae,height:ye}=Z;let{resX:ve,resY:be,bbox:Qe}=Z;const Xe=await this.getImage();let Je=Xe;const tt=await this.getImageCount(),it=Xe.getBoundingBox();if(ee&&Qe)throw new Error('Both "bbox" and "window" passed.');if(ae||ye){if(ee){const[ct,gt]=Xe.getOrigin(),[ut,mt]=Xe.getResolution();Qe=[ct+ee[0]*ut,gt+ee[1]*mt,ct+ee[2]*ut,gt+ee[3]*mt]}const lt=Qe||it;if(ae){if(ve)throw new Error("Both width and resX passed");ve=(lt[2]-lt[0])/ae}if(ye){if(be)throw new Error("Both width and resY passed");be=(lt[3]-lt[1])/ye}}if(ve||be){const lt=[];for(let ct=0;ct<tt;++ct){const gt=await this.getImage(ct),{SubfileType:ut,NewSubfileType:mt}=gt.fileDirectory;(ct===0||ut===2||mt&1)&&lt.push(gt)}lt.sort((ct,gt)=>ct.getWidth()-gt.getWidth());for(let ct=0;ct<lt.length;++ct){const gt=lt[ct],ut=(it[2]-it[0])/gt.getWidth(),mt=(it[3]-it[1])/gt.getHeight();if(Je=gt,ve&&ve>ut||be&&be>mt)break}}let st=ee;if(Qe){const[lt,ct]=Xe.getOrigin(),[gt,ut]=Je.getResolution(Xe);st=[Math.round((Qe[0]-lt)/gt),Math.round((Qe[1]-ct)/ut),Math.round((Qe[2]-lt)/gt),Math.round((Qe[3]-ct)/ut)],st=[Math.min(st[0],st[2]),Math.min(st[1],st[3]),Math.max(st[0],st[2]),Math.max(st[1],st[3])]}return Je.readRasters({...Z,window:st})}}class GeoTIFF extends GeoTIFFBase{constructor(Z,ee,ae,ye,ve={}){super(),this.source=Z,this.littleEndian=ee,this.bigTiff=ae,this.firstIFDOffset=ye,this.cache=ve.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(Z,ee){const ae=this.bigTiff?4048:1024;return new DataSlice((await this.source.fetch([{offset:Z,length:typeof ee<"u"?ee:ae}]))[0],Z,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(Z){const ee=this.bigTiff?20:12,ae=this.bigTiff?8:2;let ye=await this.getSlice(Z);const ve=this.bigTiff?ye.readUint64(Z):ye.readUint16(Z),be=ve*ee+(this.bigTiff?16:6);ye.covers(Z,be)||(ye=await this.getSlice(Z,be));const Qe={};let Xe=Z+(this.bigTiff?8:2);for(let it=0;it<ve;Xe+=ee,++it){const st=ye.readUint16(Xe),lt=ye.readUint16(Xe+2),ct=this.bigTiff?ye.readUint64(Xe+4):ye.readUint32(Xe+4);let gt,ut;const mt=getFieldTypeLength(lt),ei=Xe+(this.bigTiff?12:8);if(mt*ct<=(this.bigTiff?8:4))gt=getValues(ye,lt,ct,ei);else{const ni=ye.readOffset(ei),ri=getFieldTypeLength(lt)*ct;if(ye.covers(ni,ri))gt=getValues(ye,lt,ct,ni);else{const si=await this.getSlice(ni,ri);gt=getValues(si,lt,ct,ni)}}ct===1&&arrayFields.indexOf(st)===-1&&!(lt===fieldTypes.RATIONAL||lt===fieldTypes.SRATIONAL)?ut=gt[0]:ut=gt,Qe[fieldTagNames[st]]=ut}const Je=parseGeoKeyDirectory(Qe),tt=ye.readOffset(Z+ae+ee*ve);return new ImageFileDirectory(Qe,Je,tt)}async requestIFD(Z){if(this.ifdRequests[Z])return this.ifdRequests[Z];if(Z===0)return this.ifdRequests[Z]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[Z];if(!this.ifdRequests[Z-1])try{this.ifdRequests[Z-1]=this.requestIFD(Z-1)}catch(ee){throw ee instanceof GeoTIFFImageIndexError?new GeoTIFFImageIndexError(Z):ee}return this.ifdRequests[Z]=(async()=>{const ee=await this.ifdRequests[Z-1];if(ee.nextIFDByteOffset===0)throw new GeoTIFFImageIndexError(Z);return this.parseFileDirectoryAt(ee.nextIFDByteOffset)})(),this.ifdRequests[Z]}async getImage(Z=0){const ee=await this.requestIFD(Z);return new GeoTIFFImage(ee.fileDirectory,ee.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let Z=0,ee=!0;for(;ee;)try{await this.requestIFD(Z),++Z}catch(ae){if(ae instanceof GeoTIFFImageIndexError)ee=!1;else throw ae}return Z}async getGhostValues(){const Z=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const ee="GDAL_STRUCTURAL_METADATA_SIZE=",ae=ee.length+100;let ye=await this.getSlice(Z,ae);if(ee===getValues(ye,fieldTypes.ASCII,ee.length,Z)){const be=getValues(ye,fieldTypes.ASCII,ae,Z).split(`
`)[0],Qe=Number(be.split("=")[1].split(" ")[0])+be.length;Qe>ae&&(ye=await this.getSlice(Z,Qe));const Xe=getValues(ye,fieldTypes.ASCII,Qe,Z);this.ghostValues={},Xe.split(`
`).filter(Je=>Je.length>0).map(Je=>Je.split("=")).forEach(([Je,tt])=>{this.ghostValues[Je]=tt})}return this.ghostValues}static async fromSource(Z,ee,ae){const ye=(await Z.fetch([{offset:0,length:1024}],ae))[0],ve=new DataView64(ye),be=ve.getUint16(0,0);let Qe;if(be===18761)Qe=!0;else if(be===19789)Qe=!1;else throw new TypeError("Invalid byte order value.");const Xe=ve.getUint16(2,Qe);let Je;if(Xe===42)Je=!1;else if(Xe===43){if(Je=!0,ve.getUint16(4,Qe)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const tt=Je?ve.getUint64(8,Qe):ve.getUint32(4,Qe);return new GeoTIFF(Z,Qe,Je,tt,ee)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class MultiGeoTIFF extends GeoTIFFBase{constructor(Z,ee){super(),this.mainFile=Z,this.overviewFiles=ee,this.imageFiles=[Z].concat(ee),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const Z=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(ee=>ee.parseFileDirectoryAt(ee.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(Z),this.fileDirectoriesPerFile}async getImage(Z=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let ee=0,ae=0;for(let ye=0;ye<this.imageFiles.length;ye++){const ve=this.imageFiles[ye];for(let be=0;be<this.imageCounts[ye];be++){if(Z===ee){const Qe=await ve.requestIFD(ae);return new GeoTIFFImage(Qe.fileDirectory,Qe.geoKeyDirectory,ve.dataView,ve.littleEndian,ve.cache,ve.source)}ee++,ae++}ae=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const Z=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(ee=>ee.getImageCount()));return this.imageCounts=await Promise.all(Z),this.imageCount=this.imageCounts.reduce((ee,ae)=>ee+ae,0),this.imageCount}}async function fromUrl(ie,Z={},ee){return GeoTIFF.fromSource(makeRemoteSource(ie,Z),ee)}async function fromBlob(ie,Z){return GeoTIFF.fromSource(makeFileReaderSource(ie),Z)}async function fromUrls(ie,Z=[],ee={},ae){const ye=await GeoTIFF.fromSource(makeRemoteSource(ie,ee),ae),ve=await Promise.all(Z.map(be=>GeoTIFF.fromSource(makeRemoteSource(be,ee))));return new MultiGeoTIFF(ye,ve)}function isMask(ie){return((ie.fileDirectory.NewSubfileType||0)&4)===4}function readRGB(ie,Z){if(!ie)return!1;if(ie===!0)return!0;if(Z.getSamplesPerPixel()!==3)return!1;const ee=Z.fileDirectory.PhotometricInterpretation,ae=photometricInterpretations;return ee===ae.CMYK||ee===ae.YCbCr||ee===ae.CIELab||ee===ae.ICCLab}const STATISTICS_MAXIMUM="STATISTICS_MAXIMUM",STATISTICS_MINIMUM="STATISTICS_MINIMUM",defaultTileSize=256;let workerPool;function getWorkerPool(){return workerPool||(workerPool=new Pool),workerPool}function getBoundingBox(ie){try{return ie.getBoundingBox()}catch{return[0,0,ie.getWidth(),ie.getHeight()]}}function getOrigin(ie){try{return ie.getOrigin().slice(0,2)}catch{return[0,ie.getHeight()]}}function getResolutions(ie,Z){try{return ie.getResolution(Z)}catch{return[Z.getWidth()/ie.getWidth(),Z.getHeight()/ie.getHeight()]}}function getProjection(ie){const Z=ie.geoKeys;if(!Z)return null;if(Z.ProjectedCSTypeGeoKey&&Z.ProjectedCSTypeGeoKey!==32767){const ee="EPSG:"+Z.ProjectedCSTypeGeoKey;let ae=get$1(ee);if(!ae){const ye=fromCode(Z.ProjLinearUnitsGeoKey);ye&&(ae=new Projection({code:ee,units:ye}))}return ae}if(Z.GeographicTypeGeoKey&&Z.GeographicTypeGeoKey!==32767){const ee="EPSG:"+Z.GeographicTypeGeoKey;let ae=get$1(ee);if(!ae){const ye=fromCode(Z.GeogAngularUnitsGeoKey);ye&&(ae=new Projection({code:ee,units:ye}))}return ae}return null}function getImagesForTIFF(ie){return ie.getImageCount().then(function(Z){const ee=new Array(Z);for(let ae=0;ae<Z;++ae)ee[ae]=ie.getImage(ae);return Promise.all(ee)})}function getImagesForSource(ie,Z){let ee;return ie.blob?ee=fromBlob(ie.blob):ie.overviews?ee=fromUrls(ie.url,ie.overviews,Z):ee=fromUrl(ie.url,Z),ee.then(getImagesForTIFF)}function assertEqual(ie,Z,ee,ae,ye){if(Array.isArray(ie)){const ve=ie.length;if(!Array.isArray(Z)||ve!=Z.length){const be=new Error(ae);throw ye(be),be}for(let be=0;be<ve;++be)assertEqual(ie[be],Z[be],ee,ae,ye);return}if(Z=Z,Math.abs(ie-Z)>ee*ie)throw new Error(ae)}function getMinForDataType(ie){return ie instanceof Int8Array?-128:ie instanceof Int16Array?-32768:ie instanceof Int32Array?-2147483648:ie instanceof Float32Array?12e-39:0}function getMaxForDataType(ie){return ie instanceof Int8Array?127:ie instanceof Uint8Array||ie instanceof Uint8ClampedArray?255:ie instanceof Int16Array?32767:ie instanceof Uint16Array?65535:ie instanceof Int32Array?2147483647:ie instanceof Uint32Array?4294967295:ie instanceof Float32Array?34e37:255}class GeoTIFFSource extends DataTileSource{constructor(Z){super({state:"loading",tileGrid:null,projection:Z.projection||null,opaque:Z.opaque,transition:Z.transition,interpolate:Z.interpolate!==!1,wrapX:Z.wrapX}),this.sourceInfo_=Z.sources;const ee=this.sourceInfo_.length;this.sourceOptions_=Z.sourceOptions,this.sourceImagery_=new Array(ee),this.sourceMasks_=new Array(ee),this.resolutionFactors_=new Array(ee),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=Z.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=Z.convertToRGB||!1,this.setKey(this.sourceInfo_.map(ve=>ve.url).join(","));const ae=this,ye=new Array(ee);for(let ve=0;ve<ee;++ve)ye[ve]=getImagesForSource(this.sourceInfo_[ve],this.sourceOptions_);Promise.all(ye).then(function(ve){ae.configure_(ve)}).catch(function(ve){error(ve),ae.error_=ve,ae.setState("error")})}getError(){return this.error_}determineProjection(Z){const ee=Z[0];for(let ae=ee.length-1;ae>=0;--ae){const ye=ee[ae],ve=getProjection(ye);if(ve){this.projection=ve;break}}}configure_(Z){let ee,ae,ye,ve,be;const Qe=new Array(Z.length),Xe=new Array(Z.length),Je=new Array(Z.length);let tt=0;const it=Z.length;for(let gt=0;gt<it;++gt){const ut=[],mt=[];Z[gt].forEach(ci=>{isMask(ci)?mt.push(ci):ut.push(ci)});const ei=ut.length;if(mt.length>0&&mt.length!==ei)throw new Error(`Expected one mask per image found ${mt.length} masks and ${ei} images`);let ni,ri;const si=new Array(ei),li=new Array(ei),ai=new Array(ei);Xe[gt]=new Array(ei),Je[gt]=new Array(ei);for(let ci=0;ci<ei;++ci){const Ci=ut[ci],pi=Ci.getGDALNoData();Je[gt][ci]=Ci.getGDALMetadata(0),Xe[gt][ci]=pi;const gi=this.sourceInfo_[gt].bands;Qe[gt]=gi?gi.length:Ci.getSamplesPerPixel();const _i=ei-(ci+1);ni||(ni=getBoundingBox(Ci)),ri||(ri=getOrigin(Ci));const bi=getResolutions(Ci,ut[0]);ai[_i]=bi[0];const Mi=[Ci.getTileWidth(),Ci.getTileHeight()];Mi[0]!==Mi[1]&&Mi[1]<defaultTileSize&&(Mi[0]=defaultTileSize,Mi[1]=defaultTileSize),si[_i]=Mi;const yi=bi[0]/Math.abs(bi[1]);li[_i]=[Mi[0],Mi[1]/yi]}if(ee?getIntersection(ee,ni,ee):ee=ni,!ae)ae=ri;else{const ci=`Origin mismatch for source ${gt}, got [${ri}] but expected [${ae}]`;assertEqual(ae,ri,0,ci,this.viewRejector)}if(!be)be=ai,this.resolutionFactors_[gt]=1;else{be.length-tt>ai.length&&(tt=be.length-ai.length);const ci=be[be.length-1]/ai[ai.length-1];this.resolutionFactors_[gt]=ci;const Ci=ai.map(gi=>gi*=ci),pi=`Resolution mismatch for source ${gt}, got [${Ci}] but expected [${be}]`;assertEqual(be.slice(tt,be.length),Ci,.02,pi,this.viewRejector)}ye?assertEqual(ye.slice(tt,ye.length),li,.01,`Tile size mismatch for source ${gt}`,this.viewRejector):ye=li,ve?assertEqual(ve.slice(tt,ve.length),si,0,`Tile size mismatch for source ${gt}`,this.viewRejector):ve=si,this.sourceImagery_[gt]=ut.reverse(),this.sourceMasks_[gt]=mt.reverse()}for(let gt=0,ut=this.sourceImagery_.length;gt<ut;++gt){const mt=this.sourceImagery_[gt];for(;mt.length<be.length;)mt.unshift(void 0)}this.getProjection()||this.determineProjection(Z),this.samplesPerPixel_=Qe,this.nodataValues_=Xe,this.metadata_=Je;e:for(let gt=0;gt<it;++gt){if(this.sourceInfo_[gt].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[gt].length){this.addAlpha_=!0;break}const ut=Xe[gt],mt=this.sourceInfo_[gt].bands;if(mt){for(let ei=0;ei<mt.length;++ei)if(ut[mt[ei]-1]!==null){this.addAlpha_=!0;break e}continue}for(let ei=0;ei<ut.length;++ei)if(ut[ei]!==null){this.addAlpha_=!0;break e}}let st=this.addAlpha_?1:0;for(let gt=0;gt<it;++gt)st+=Qe[gt];this.bandCount=st;const lt=new TileGrid({extent:ee,minZoom:tt,origin:ae,resolutions:be,tileSizes:ye});this.tileGrid=lt,this.setTileSizes(ve),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const ct=1;be.length===2?be=[be[0],be[1],be[1]/2]:be.length===1&&(be=[be[0]*2,be[0],be[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:be,center:toUserCoordinate(getCenter(ee),this.projection),extent:toUserExtent(ee,this.projection),zoom:ct})}loadTile_(Z,ee,ae){const ye=this.getTileSize(Z),ve=this.sourceImagery_.length,be=new Array(ve*2),Qe=this.nodataValues_,Xe=this.sourceInfo_,Je=getWorkerPool();for(let tt=0;tt<ve;++tt){const it=Xe[tt],st=this.resolutionFactors_[tt],lt=[Math.round(ee*(ye[0]*st)),Math.round(ae*(ye[1]*st)),Math.round((ee+1)*(ye[0]*st)),Math.round((ae+1)*(ye[1]*st))],ct=this.sourceImagery_[tt][Z];let gt;it.bands&&(gt=it.bands.map(function(ri){return ri-1}));let ut;"nodata"in it&&it.nodata!==null?ut=it.nodata:gt?ut=gt.map(function(ri){return Qe[tt][ri]}):ut=Qe[tt];const mt={window:lt,width:ye[0],height:ye[1],samples:gt,fillValue:ut,pool:Je,interleave:!1};readRGB(this.convertToRGB_,ct)?be[tt]=ct.readRGB(mt):be[tt]=ct.readRasters(mt);const ei=ve+tt,ni=this.sourceMasks_[tt][Z];if(!ni){be[ei]=Promise.resolve(null);continue}be[ei]=ni.readRasters({window:lt,width:ye[0],height:ye[1],samples:[0],pool:Je,interleave:!1})}return Promise.all(be).then(this.composeTile_.bind(this,ye)).catch(function(tt){throw error(tt),tt})}composeTile_(Z,ee){const ae=this.metadata_,ye=this.sourceInfo_,ve=this.sourceImagery_.length,be=this.bandCount,Qe=this.samplesPerPixel_,Xe=this.nodataValues_,Je=this.normalize_,tt=this.addAlpha_,it=Z[0]*Z[1],st=it*be;let lt;Je?lt=new Uint8Array(st):lt=new Float32Array(st);let ct=0;for(let gt=0;gt<it;++gt){let ut=tt;for(let mt=0;mt<ve;++mt){const ei=ye[mt];let ni=ei.min,ri=ei.max,si,li;if(Je){const ai=ae[mt][0];ni===void 0&&(ai&&STATISTICS_MINIMUM in ai?ni=parseFloat(ai[STATISTICS_MINIMUM]):ni=getMinForDataType(ee[mt][0])),ri===void 0&&(ai&&STATISTICS_MAXIMUM in ai?ri=parseFloat(ai[STATISTICS_MAXIMUM]):ri=getMaxForDataType(ee[mt][0])),si=255/(ri-ni),li=-ni*si}for(let ai=0;ai<Qe[mt];++ai){const ci=ee[mt][ai][gt];let Ci;if(Je?Ci=clamp$1(si*ci+li,0,255):Ci=ci,!tt)lt[ct]=Ci;else{let pi=ei.nodata;if(pi===void 0){let _i;ei.bands?_i=ei.bands[ai]-1:_i=ai,pi=Xe[mt][_i]}const gi=isNaN(pi);(!gi&&ci!==pi||gi&&!isNaN(ci))&&(ut=!1,lt[ct]=Ci)}ct++}if(!ut){const ai=ve+mt,ci=ee[ai];ci&&!ci[0][gt]&&(ut=!0)}}tt&&(ut||(lt[ct]=255),ct++)}return lt}}class BaseTileRepresentation extends Target{constructor(Z){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=Z.gutter||0,this.helper_=Z.helper,this.loaded=!1,this.ready=!1}setTile(Z){if(Z!==this.tile)if(this.tile&&this.tile.removeEventListener(EventType.CHANGE,this.handleTileChange_),this.tile=Z,this.loaded=Z.getState()===TileState.LOADED,this.loaded)this.uploadTile();else{if(Z instanceof ImageTile){const ee=Z.getImage();ee instanceof Image&&!ee.crossOrigin&&(ee.crossOrigin="anonymous")}Z.addEventListener(EventType.CHANGE,this.handleTileChange_)}}uploadTile(){abstract()}setReady(){this.ready=!0,this.dispatchEvent(EventType.CHANGE)}handleTileChange_(){this.tile.getState()===TileState.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(EventType.CHANGE,this.handleTileChange_)}}const ARRAY_BUFFER=34962,ELEMENT_ARRAY_BUFFER=34963,STREAM_DRAW=35040,STATIC_DRAW=35044,DYNAMIC_DRAW=35048,UNSIGNED_BYTE=5121,UNSIGNED_SHORT=5123,UNSIGNED_INT=5125,FLOAT=5126,CONTEXT_IDS=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function getContext(ie,Z){Z=Object.assign({preserveDrawingBuffer:!0,antialias:!SAFARI_BUG_237906},Z);const ee=CONTEXT_IDS.length;for(let ae=0;ae<ee;++ae)try{const ye=ie.getContext(CONTEXT_IDS[ae],Z);if(ye)return ye}catch{}return null}const BufferUsage={STATIC_DRAW,STREAM_DRAW,DYNAMIC_DRAW};class WebGLArrayBuffer{constructor(Z,ee){this.array=null,this.type=Z,assert(Z===ARRAY_BUFFER||Z===ELEMENT_ARRAY_BUFFER,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage=ee!==void 0?ee:BufferUsage.STATIC_DRAW}ofSize(Z){return this.array=new(getArrayClassForType(this.type))(Z),this}fromArray(Z){return this.array=getArrayClassForType(this.type).from(Z),this}fromArrayBuffer(Z){return this.array=new(getArrayClassForType(this.type))(Z),this}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}}function getArrayClassForType(ie){switch(ie){case ARRAY_BUFFER:return Float32Array;case ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}function bindAndConfigure(ie,Z,ee){const ae=ee?ie.LINEAR:ie.NEAREST;ie.bindTexture(ie.TEXTURE_2D,Z),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,ae),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,ae)}function uploadImageTexture(ie,Z,ee,ae){bindAndConfigure(ie,Z,ae),ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,ie.RGBA,ie.UNSIGNED_BYTE,ee)}function uploadDataTexture(ie,Z,ee,ae,ye,ve){const be=ie.getGL();let Qe,Xe;ee instanceof Float32Array?(Qe=be.FLOAT,ie.getExtension("OES_texture_float"),Xe=ie.getExtension("OES_texture_float_linear")!==null):(Qe=be.UNSIGNED_BYTE,Xe=!0),bindAndConfigure(be,Z,ve&&Xe);const Je=ee.byteLength/ae[1];let tt=1;Je%8===0?tt=8:Je%4===0?tt=4:Je%2===0&&(tt=2);let it;switch(ye){case 1:{it=be.LUMINANCE;break}case 2:{it=be.LUMINANCE_ALPHA;break}case 3:{it=be.RGB;break}case 4:{it=be.RGBA;break}default:throw new Error(`Unsupported number of bands: ${ye}`)}const st=be.getParameter(be.UNPACK_ALIGNMENT);be.pixelStorei(be.UNPACK_ALIGNMENT,tt),be.texImage2D(be.TEXTURE_2D,0,it,ae[0],ae[1],0,it,Qe,ee),be.pixelStorei(be.UNPACK_ALIGNMENT,st)}let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class TileTexture extends BaseTileRepresentation{constructor(Z){super(Z),this.textures=[],this.renderSize_=toSize(Z.grid.getTileSize(Z.tile.tileCoord[0])),this.bandCount=NaN;const ee=new WebGLArrayBuffer(ARRAY_BUFFER,STATIC_DRAW);ee.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(ee),this.coords=ee,this.setTile(Z.tile)}uploadTile(){const Z=this.helper_,ee=Z.getGL(),ae=this.tile;this.textures.length=0;let ye;ae instanceof ImageTile||ae instanceof ReprojTile?ye=ae.getImage():ye=ae.getData();const ve=asImageLike(ye);if(ve){const ei=ee.createTexture();this.textures.push(ei),this.bandCount=4,uploadImageTexture(ee,ei,ve,ae.interpolate),this.setReady();return}ye=asArrayLike(ye);const be=ae.getSize(),Qe=[be[0]+2*this.gutter_,be[1]+2*this.gutter_],Xe=ye instanceof Float32Array,Je=Qe[0]*Qe[1],tt=Xe?Float32Array:Uint8Array,it=tt.BYTES_PER_ELEMENT,st=ye.byteLength/Qe[1];this.bandCount=Math.floor(st/it/Qe[0]);const lt=Math.ceil(this.bandCount/4);if(lt===1){const ei=ee.createTexture();this.textures.push(ei),uploadDataTexture(Z,ei,ye,Qe,this.bandCount,ae.interpolate),this.setReady();return}const ct=new Array(lt);for(let ei=0;ei<lt;++ei){const ni=ee.createTexture();this.textures.push(ni);const ri=ei<lt-1?4:(this.bandCount-1)%4+1;ct[ei]=new tt(Je*ri)}let gt=0,ut=0;const mt=Qe[0]*this.bandCount;for(let ei=0;ei<Qe[1];++ei){for(let ni=0;ni<mt;++ni){const ri=ye[ut+ni],si=Math.floor(gt/this.bandCount),li=ni%this.bandCount,ai=Math.floor(li/4),ci=ct[ai],Ci=ci.length/Je,pi=li%4;ci[si*Ci+pi]=ri,++gt}ut+=st/it}for(let ei=0;ei<lt;++ei){const ni=this.textures[ei],ri=ct[ei],si=ri.length/Je;uploadDataTexture(Z,ni,ri,Qe,si,ae.interpolate)}this.setReady()}disposeInternal(){const Z=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let ee=0;ee<this.textures.length;++ee)Z.deleteTexture(this.textures[ee]);this.tile.removeEventListener(EventType.CHANGE,this.handleTileChange_)}getImagePixelData_(Z,ee,ae){const ye=this.gutter_,ve=this.renderSize_[0],be=this.renderSize_[1];pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);const Qe=Z.width,Xe=Z.height,Je=Qe-2*ye,tt=Xe-2*ye,it=ye+Math.floor(Je*(ee/ve)),st=ye+Math.floor(tt*(ae/be));let lt;try{pixelContext.drawImage(Z,it,st,1,1,0,0,1,1),lt=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return lt}getArrayPixelData_(Z,ee,ae,ye){const ve=this.gutter_,be=this.renderSize_[0],Qe=this.renderSize_[1],Xe=ee[0],Je=ee[1],tt=Xe+2*ve,it=Je+2*ve,st=ve+Math.floor(Xe*(ae/be)),lt=ve+Math.floor(Je*(ye/Qe));if(Z instanceof DataView){const gt=Z.byteLength/(tt*it),ut=gt*(lt*tt+st),mt=Z.buffer.slice(ut,ut+gt);return new DataView(mt)}const ct=this.bandCount*(lt*tt+st);return Z.slice(ct,ct+this.bandCount)}getPixelData(Z,ee){if(!this.loaded)return null;if(this.tile instanceof DataTile){const ae=this.tile.getData(),ye=asArrayLike(ae);if(ye){const ve=this.tile.getSize();return this.getArrayPixelData_(ye,ve,Z,ee)}return this.getImagePixelData_(asImageLike(ae),Z,ee)}return this.getImagePixelData_(this.tile.getImage(),Z,ee)}}const ContextEventType={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},DEFAULT_VERTEX_SHADER=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,DEFAULT_FRAGMENT_SHADER=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class WebGLPostProcessingPass{constructor(Z){this.gl_=Z.webGlContext;const ee=this.gl_;this.scaleRatio_=Z.scaleRatio||1,this.renderTargetTexture_=ee.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=ee.createFramebuffer(),this.depthBuffer_=ee.createRenderbuffer();const ae=ee.createShader(ee.VERTEX_SHADER);ee.shaderSource(ae,Z.vertexShader||DEFAULT_VERTEX_SHADER),ee.compileShader(ae);const ye=ee.createShader(ee.FRAGMENT_SHADER);ee.shaderSource(ye,Z.fragmentShader||DEFAULT_FRAGMENT_SHADER),ee.compileShader(ye),this.renderTargetProgram_=ee.createProgram(),ee.attachShader(this.renderTargetProgram_,ae),ee.attachShader(this.renderTargetProgram_,ye),ee.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=ee.createBuffer();const ve=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];ee.bindBuffer(ee.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),ee.bufferData(ee.ARRAY_BUFFER,new Float32Array(ve),ee.STATIC_DRAW),this.renderTargetAttribLocation_=ee.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=ee.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=ee.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=ee.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],Z.uniforms&&Object.keys(Z.uniforms).forEach(be=>{this.uniforms_.push({value:Z.uniforms[be],location:ee.getUniformLocation(this.renderTargetProgram_,be)})})}getGL(){return this.gl_}init(Z){const ee=this.getGL(),ae=[ee.drawingBufferWidth*this.scaleRatio_,ee.drawingBufferHeight*this.scaleRatio_];if(ee.bindFramebuffer(ee.FRAMEBUFFER,this.getFrameBuffer()),ee.bindRenderbuffer(ee.RENDERBUFFER,this.getDepthBuffer()),ee.viewport(0,0,ae[0],ae[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==ae[0]||this.renderTargetTextureSize_[1]!==ae[1]){this.renderTargetTextureSize_=ae;const ye=0,ve=ee.RGBA,be=0,Qe=ee.RGBA,Xe=ee.UNSIGNED_BYTE,Je=null;ee.bindTexture(ee.TEXTURE_2D,this.renderTargetTexture_),ee.texImage2D(ee.TEXTURE_2D,ye,ve,ae[0],ae[1],be,Qe,Xe,Je),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,this.renderTargetTexture_,0),ee.renderbufferStorage(ee.RENDERBUFFER,ee.DEPTH_COMPONENT16,ae[0],ae[1]),ee.framebufferRenderbuffer(ee.FRAMEBUFFER,ee.DEPTH_ATTACHMENT,ee.RENDERBUFFER,this.depthBuffer_)}}apply(Z,ee,ae,ye){const ve=this.getGL(),be=Z.size;if(ve.bindFramebuffer(ve.FRAMEBUFFER,ee?ee.getFrameBuffer():null),ve.activeTexture(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_2D,this.renderTargetTexture_),!ee){const Xe=getUid(ve.canvas);if(!Z.renderTargets[Xe]){const Je=ve.getContextAttributes();Je&&Je.preserveDrawingBuffer&&(ve.clearColor(0,0,0,0),ve.clearDepth(1),ve.clear(ve.COLOR_BUFFER_BIT|ve.DEPTH_BUFFER_BIT)),Z.renderTargets[Xe]=!0}}ve.disable(ve.DEPTH_TEST),ve.enable(ve.BLEND),ve.blendFunc(ve.ONE,ve.ONE_MINUS_SRC_ALPHA),ve.viewport(0,0,ve.drawingBufferWidth,ve.drawingBufferHeight),ve.bindBuffer(ve.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),ve.useProgram(this.renderTargetProgram_),ve.enableVertexAttribArray(this.renderTargetAttribLocation_),ve.vertexAttribPointer(this.renderTargetAttribLocation_,2,ve.FLOAT,!1,0,0),ve.uniform2f(this.renderTargetUniformLocation_,be[0],be[1]),ve.uniform1i(this.renderTargetTextureLocation_,0);const Qe=Z.layerStatesArray[Z.layerIndex].opacity;ve.uniform1f(this.renderTargetOpacityLocation_,Qe),this.applyUniforms(Z),ae&&ae(ve,Z),ve.drawArrays(ve.TRIANGLES,0,6),ye&&ye(ve,Z)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(Z){const ee=this.getGL();let ae,ye=1;this.uniforms_.forEach(function(ve){if(ae=typeof ve.value=="function"?ve.value(Z):ve.value,ae instanceof HTMLCanvasElement||ae instanceof ImageData)ve.texture||(ve.texture=ee.createTexture()),ee.activeTexture(ee[`TEXTURE${ye}`]),ee.bindTexture(ee.TEXTURE_2D,ve.texture),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ae instanceof ImageData?ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,ee.RGBA,ae.width,ae.height,0,ee.UNSIGNED_BYTE,new Uint8Array(ae.data)):ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,ee.RGBA,ee.UNSIGNED_BYTE,ae),ee.uniform1i(ve.location,ye++);else if(Array.isArray(ae))switch(ae.length){case 2:ee.uniform2f(ve.location,ae[0],ae[1]);return;case 3:ee.uniform3f(ve.location,ae[0],ae[1],ae[2]);return;case 4:ee.uniform4f(ve.location,ae[0],ae[1],ae[2],ae[3]);return;default:return}else typeof ae=="number"&&ee.uniform1f(ve.location,ae)})}}function create$2(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function fromTransform(ie,Z){return ie[0]=Z[0],ie[1]=Z[1],ie[4]=Z[2],ie[5]=Z[3],ie[12]=Z[4],ie[13]=Z[5],ie}const DefaultUniform={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},AttributeType={UNSIGNED_BYTE,UNSIGNED_SHORT,UNSIGNED_INT,FLOAT},canvasCache={};function getSharedCanvasCacheKey(ie){return"shared/"+ie}let uniqueCanvasCacheKeyCount=0;function getUniqueCanvasCacheKey(){const ie="unique/"+uniqueCanvasCacheKeyCount;return uniqueCanvasCacheKeyCount+=1,ie}function getOrCreateContext(ie){let Z=canvasCache[ie];if(!Z){const ee=document.createElement("canvas");ee.width=1,ee.height=1,ee.style.position="absolute",ee.style.left="0",Z={users:0,context:getContext(ee)},canvasCache[ie]=Z}return Z.users+=1,Z.context}function releaseCanvas(ie){const Z=canvasCache[ie];if(!Z||(Z.users-=1,Z.users>0))return;const ee=Z.context,ae=ee.getExtension("WEBGL_lose_context");ae&&ae.loseContext();const ye=ee.canvas;ye.width=1,ye.height=1,delete canvasCache[ie]}class WebGLHelper extends Disposable{constructor(Z){super(),Z=Z||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=Z.canvasCacheKey?getSharedCanvasCacheKey(Z.canvasCacheKey):getUniqueCanvasCacheKey(),this.gl_=getOrCreateContext(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const ee=this.gl_.canvas;ee.addEventListener(ContextEventType.LOST,this.boundHandleWebGLContextLost_),ee.addEventListener(ContextEventType.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=create$3(),this.offsetScaleMatrix_=create$3(),this.tmpMat4_=create$2(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],Z.uniforms&&this.setUniforms(Z.uniforms),this.postProcessPasses_=Z.postProcesses?Z.postProcesses.map(ae=>new WebGLPostProcessingPass({webGlContext:this.gl_,scaleRatio:ae.scaleRatio,vertexShader:ae.vertexShader,fragmentShader:ae.fragmentShader,uniforms:ae.uniforms})):[new WebGLPostProcessingPass({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(Z){this.uniforms_=[],this.addUniforms(Z)}addUniforms(Z){for(const ee in Z)this.uniforms_.push({name:ee,value:Z[ee]})}canvasCacheKeyMatches(Z){return this.canvasCacheKey_===getSharedCanvasCacheKey(Z)}getExtension(Z){if(Z in this.extensionCache_)return this.extensionCache_[Z];const ee=this.gl_.getExtension(Z);return this.extensionCache_[Z]=ee,ee}bindBuffer(Z){const ee=this.gl_,ae=getUid(Z);let ye=this.bufferCache_[ae];if(!ye){const ve=ee.createBuffer();ye={buffer:Z,webGlBuffer:ve},this.bufferCache_[ae]=ye}ee.bindBuffer(Z.getType(),ye.webGlBuffer)}flushBufferData(Z){const ee=this.gl_;this.bindBuffer(Z),ee.bufferData(Z.getType(),Z.getArray(),Z.getUsage())}deleteBuffer(Z){const ee=this.gl_,ae=getUid(Z),ye=this.bufferCache_[ae];ye&&!ee.isContextLost()&&ee.deleteBuffer(ye.webGlBuffer),delete this.bufferCache_[ae]}disposeInternal(){const Z=this.gl_.canvas;Z.removeEventListener(ContextEventType.LOST,this.boundHandleWebGLContextLost_),Z.removeEventListener(ContextEventType.RESTORED,this.boundHandleWebGLContextRestored_),releaseCanvas(this.canvasCacheKey_),delete this.gl_}prepareDraw(Z,ee,ae){const ye=this.gl_,ve=this.getCanvas(),be=Z.size,Qe=Z.pixelRatio;(ve.width!==be[0]*Qe||ve.height!==be[1]*Qe)&&(ve.width=be[0]*Qe,ve.height=be[1]*Qe,ve.style.width=be[0]+"px",ve.style.height=be[1]+"px");for(let Xe=this.postProcessPasses_.length-1;Xe>=0;Xe--)this.postProcessPasses_[Xe].init(Z);ye.bindTexture(ye.TEXTURE_2D,null),ye.clearColor(0,0,0,0),ye.depthRange(0,1),ye.clearDepth(1),ye.clear(ye.COLOR_BUFFER_BIT|ye.DEPTH_BUFFER_BIT),ye.enable(ye.BLEND),ye.blendFunc(ye.ONE,ee?ye.ZERO:ye.ONE_MINUS_SRC_ALPHA),ae?(ye.enable(ye.DEPTH_TEST),ye.depthFunc(ye.LEQUAL)):ye.disable(ye.DEPTH_TEST)}bindTexture(Z,ee,ae){const ye=this.gl_;ye.activeTexture(ye.TEXTURE0+ee),ye.bindTexture(ye.TEXTURE_2D,Z),ye.uniform1i(this.getUniformLocation(ae),ee)}prepareDrawToRenderTarget(Z,ee,ae,ye){const ve=this.gl_,be=ee.getSize();ve.bindFramebuffer(ve.FRAMEBUFFER,ee.getFramebuffer()),ve.bindRenderbuffer(ve.RENDERBUFFER,ee.getDepthbuffer()),ve.viewport(0,0,be[0],be[1]),ve.bindTexture(ve.TEXTURE_2D,ee.getTexture()),ve.clearColor(0,0,0,0),ve.depthRange(0,1),ve.clearDepth(1),ve.clear(ve.COLOR_BUFFER_BIT|ve.DEPTH_BUFFER_BIT),ve.enable(ve.BLEND),ve.blendFunc(ve.ONE,ae?ve.ZERO:ve.ONE_MINUS_SRC_ALPHA),ye?(ve.enable(ve.DEPTH_TEST),ve.depthFunc(ve.LEQUAL)):ve.disable(ve.DEPTH_TEST)}drawElements(Z,ee){const ae=this.gl_;this.getExtension("OES_element_index_uint");const ye=ae.UNSIGNED_INT,ve=4,be=ee-Z,Qe=Z*ve;ae.drawElements(ae.TRIANGLES,be,ye,Qe)}finalizeDraw(Z,ee,ae){for(let ye=0,ve=this.postProcessPasses_.length;ye<ve;ye++)ye===ve-1?this.postProcessPasses_[ye].apply(Z,null,ee,ae):this.postProcessPasses_[ye].apply(Z,this.postProcessPasses_[ye+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(Z){const ee=Z.size,ae=Z.viewState.rotation,ye=Z.pixelRatio;this.setUniformFloatValue(DefaultUniform.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(DefaultUniform.ZOOM,Z.viewState.zoom),this.setUniformFloatValue(DefaultUniform.RESOLUTION,Z.viewState.resolution),this.setUniformFloatValue(DefaultUniform.PIXEL_RATIO,ye),this.setUniformFloatVec2(DefaultUniform.VIEWPORT_SIZE_PX,[ee[0],ee[1]]),this.setUniformFloatValue(DefaultUniform.ROTATION,ae)}applyHitDetectionUniform(Z){const ee=this.getUniformLocation(DefaultUniform.HIT_DETECTION);this.getGL().uniform1i(ee,Z?1:0),Z&&this.setUniformFloatValue(DefaultUniform.PIXEL_RATIO,.5)}applyUniforms(Z){const ee=this.gl_;let ae,ye=0;this.uniforms_.forEach(ve=>{if(ae=typeof ve.value=="function"?ve.value(Z):ve.value,ae instanceof HTMLCanvasElement||ae instanceof HTMLImageElement||ae instanceof ImageData)ve.texture||(ve.prevValue=void 0,ve.texture=ee.createTexture()),this.bindTexture(ve.texture,ye,ve.name),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),(!(ae instanceof HTMLImageElement)||ae.complete)&&ve.prevValue!==ae&&(ve.prevValue=ae,ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,ee.RGBA,ee.UNSIGNED_BYTE,ae)),ye++;else if(Array.isArray(ae)&&ae.length===6)this.setUniformMatrixValue(ve.name,fromTransform(this.tmpMat4_,ae));else if(Array.isArray(ae)&&ae.length<=4)switch(ae.length){case 2:ee.uniform2f(this.getUniformLocation(ve.name),ae[0],ae[1]);return;case 3:ee.uniform3f(this.getUniformLocation(ve.name),ae[0],ae[1],ae[2]);return;case 4:ee.uniform4f(this.getUniformLocation(ve.name),ae[0],ae[1],ae[2],ae[3]);return;default:return}else typeof ae=="number"&&ee.uniform1f(this.getUniformLocation(ve.name),ae)})}useProgram(Z,ee){this.gl_.useProgram(Z),this.currentProgram_=Z,this.applyFrameState(ee),this.applyUniforms(ee)}compileShader(Z,ee){const ae=this.gl_,ye=ae.createShader(ee);return ae.shaderSource(ye,Z),ae.compileShader(ye),ye}getProgram(Z,ee){const ae=this.gl_,ye=this.compileShader(Z,ae.FRAGMENT_SHADER),ve=this.compileShader(ee,ae.VERTEX_SHADER),be=ae.createProgram();if(ae.attachShader(be,ye),ae.attachShader(be,ve),ae.linkProgram(be),!ae.getShaderParameter(ye,ae.COMPILE_STATUS)){const Qe=`Fragment shader compilation failed: ${ae.getShaderInfoLog(ye)}`;throw new Error(Qe)}if(ae.deleteShader(ye),!ae.getShaderParameter(ve,ae.COMPILE_STATUS)){const Qe=`Vertex shader compilation failed: ${ae.getShaderInfoLog(ve)}`;throw new Error(Qe)}if(ae.deleteShader(ve),!ae.getProgramParameter(be,ae.LINK_STATUS)){const Qe=`GL program linking failed: ${ae.getProgramInfoLog(be)}`;throw new Error(Qe)}return be}getUniformLocation(Z){const ee=getUid(this.currentProgram_);return this.uniformLocationsByProgram_[ee]===void 0&&(this.uniformLocationsByProgram_[ee]={}),this.uniformLocationsByProgram_[ee][Z]===void 0&&(this.uniformLocationsByProgram_[ee][Z]=this.gl_.getUniformLocation(this.currentProgram_,Z)),this.uniformLocationsByProgram_[ee][Z]}getAttributeLocation(Z){const ee=getUid(this.currentProgram_);return this.attribLocationsByProgram_[ee]===void 0&&(this.attribLocationsByProgram_[ee]={}),this.attribLocationsByProgram_[ee][Z]===void 0&&(this.attribLocationsByProgram_[ee][Z]=this.gl_.getAttribLocation(this.currentProgram_,Z)),this.attribLocationsByProgram_[ee][Z]}makeProjectionTransform(Z,ee){const ae=Z.size,ye=Z.viewState.rotation,ve=Z.viewState.resolution,be=Z.viewState.center;return compose$1(ee,0,0,2/(ve*ae[0]),2/(ve*ae[1]),-ye,-be[0],-be[1]),ee}setUniformFloatValue(Z,ee){this.gl_.uniform1f(this.getUniformLocation(Z),ee)}setUniformFloatVec2(Z,ee){this.gl_.uniform2fv(this.getUniformLocation(Z),ee)}setUniformFloatVec4(Z,ee){this.gl_.uniform4fv(this.getUniformLocation(Z),ee)}setUniformMatrixValue(Z,ee){this.gl_.uniformMatrix4fv(this.getUniformLocation(Z),!1,ee)}enableAttributeArray_(Z,ee,ae,ye,ve){const be=this.getAttributeLocation(Z);be<0||(this.gl_.enableVertexAttribArray(be),this.gl_.vertexAttribPointer(be,ee,ae,!1,ye,ve))}enableAttributes(Z){const ee=computeAttributesStride(Z);let ae=0;for(let ye=0;ye<Z.length;ye++){const ve=Z[ye];this.enableAttributeArray_(ve.name,ve.size,ve.type||FLOAT,ee,ae),ae+=ve.size*getByteSizeFromType(ve.type)}}handleWebGLContextLost(Z){clear(this.bufferCache_),this.currentProgram_=null,Z.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(Z,ee,ae){const ye=this.gl_;ae=ae||ye.createTexture();const ve=0,be=ye.RGBA,Qe=0,Xe=ye.RGBA,Je=ye.UNSIGNED_BYTE;return ye.bindTexture(ye.TEXTURE_2D,ae),ee?ye.texImage2D(ye.TEXTURE_2D,ve,be,Xe,Je,ee):ye.texImage2D(ye.TEXTURE_2D,ve,be,Z[0],Z[1],Qe,Xe,Je,null),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MIN_FILTER,ye.LINEAR),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_S,ye.CLAMP_TO_EDGE),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_T,ye.CLAMP_TO_EDGE),ae}}function computeAttributesStride(ie){let Z=0;for(let ee=0;ee<ie.length;ee++){const ae=ie[ee];Z+=ae.size*getByteSizeFromType(ae.type)}return Z}function getByteSizeFromType(ie){switch(ie){case AttributeType.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case AttributeType.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case AttributeType.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case AttributeType.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class WebGLLayerRenderer extends LayerRenderer{constructor(Z,ee){super(Z),ee=ee||{},this.inversePixelTransform_=create$3(),this.pixelContext_=null,this.postProcesses_=ee.postProcesses,this.uniforms_=ee.uniforms,this.helper,Z.addChangeListener(LayerProperty.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(Z,ee){const ae=this.getLayer();if(ae.hasListener(RenderEventType.PRECOMPOSE)){const ye=new RenderEvent(RenderEventType.PRECOMPOSE,void 0,ee,Z);ae.dispatchEvent(ye)}}dispatchPostComposeEvent(Z,ee){const ae=this.getLayer();if(ae.hasListener(RenderEventType.POSTCOMPOSE)){const ye=new RenderEvent(RenderEventType.POSTCOMPOSE,void 0,ee,Z);ae.dispatchEvent(ye)}}reset(Z){this.uniforms_=Z.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(Z){if(this.getLayer().getRenderSource()){let ee=!0,ae=-1,ye;for(let be=0,Qe=Z.layerStatesArray.length;be<Qe;be++){const Xe=Z.layerStatesArray[be].layer,Je=Xe.getRenderer();if(!(Je instanceof WebGLLayerRenderer)){ee=!0;continue}const tt=Xe.getClassName();if((ee||tt!==ye)&&(ae+=1,ee=!1),ye=tt,Je===this)break}const ve="map/"+Z.mapId+"/group/"+ae;(!this.helper||!this.helper.canvasCacheKeyMatches(ve)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new WebGLHelper({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:ve}),ye&&(this.helper.getCanvas().className=ye),this.afterHelperCreated())}return this.prepareFrameInternal(Z)}afterHelperCreated(){}prepareFrameInternal(Z){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(Z,ee,ae){const ye=this.getLayer();if(ye.hasListener(Z)){compose$1(this.inversePixelTransform_,0,0,ae.pixelRatio,-ae.pixelRatio,0,0,-ae.size[1]);const ve=new RenderEvent(Z,this.inversePixelTransform_,ae,ee);ye.dispatchEvent(ve)}}preRender(Z,ee){this.dispatchRenderEvent_(RenderEventType.PRERENDER,Z,ee)}postRender(Z,ee){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,Z,ee)}}const Uniforms$1={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},empty={};function depthForZ(ie){return 1/(ie+2)}function newTileRepresentationLookup(){return{tileIds:new Set,representationsByZ:{}}}function lookupHasTile(ie,Z){return ie.tileIds.has(getUid(Z))}function addTileRepresentationToLookup(ie,Z,ee){const ae=ie.representationsByZ;ee in ae||(ae[ee]=new Set),ae[ee].add(Z),ie.tileIds.add(getUid(Z.tile))}function getRenderExtent(ie,Z){const ee=ie.layerStatesArray[ie.layerIndex];ee.extent&&(Z=getIntersection(Z,fromUserExtent(ee.extent,ie.viewState.projection)));const ae=ee.layer.getRenderSource();if(!ae.getWrapX()){const ye=ae.getTileGridForProjection(ie.viewState.projection).getExtent();ye&&(Z=getIntersection(Z,ye))}return Z}function getCacheKey(ie,Z){return`${ie.getKey()},${getKey(Z)}`}class WebGLBaseTileLayerRenderer extends WebGLLayerRenderer{constructor(Z,ee){super(Z,{uniforms:ee.uniforms,postProcesses:ee.postProcesses}),this.renderComplete=!1,this.tileTransform_=create$3(),this.tempMat4=create$2(),this.tempTileRange_=new TileRange(0,0,0,0),this.tempTileCoord_=createOrUpdate$1(0,0,0),this.tempSize_=[0,0];const ae=ee.cacheSize!==void 0?ee.cacheSize:512;this.tileRepresentationCache=new LRUCache(ae),this.frameState=null,this.projection_=void 0}reset(Z){super.reset({uniforms:Z.uniforms})}isDrawableTile_(Z){const ee=this.getLayer(),ae=Z.getState(),ye=ee.getUseInterimTilesOnError();return ae==TileState.LOADED||ae==TileState.EMPTY||ae==TileState.ERROR&&!ye}prepareFrameInternal(Z){this.projection_?Z.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=Z.viewState.projection):this.projection_=Z.viewState.projection;const ae=this.getLayer().getRenderSource();return!ae||isEmpty(getRenderExtent(Z,Z.extent))?!1:ae.getState()==="ready"}createTileRepresentation(Z){return abstract()}enqueueTiles(Z,ee,ae,ye,ve){const be=Z.viewState,Qe=this.getLayer(),Xe=Qe.getRenderSource(),Je=Xe.getTileGridForProjection(be.projection),tt=Xe.getGutterForProjection(be.projection),it=getUid(Xe);it in Z.wantedTiles||(Z.wantedTiles[it]={});const st=Z.wantedTiles[it],lt=this.tileRepresentationCache,ct=Qe.getMapInternal(),gt=Math.max(ae-ve,Je.getMinZoom(),Je.getZForResolution(Math.min(Qe.getMaxResolution(),ct?ct.getView().getResolutionForZoom(Math.max(Qe.getMinZoom(),0)):Je.getResolution(0)),Xe.zDirection));for(let ut=ae;ut>=gt;--ut){const mt=Je.getTileRangeForExtentAndZ(ee,ut,this.tempTileRange_),ei=Je.getResolution(ut);for(let ni=mt.minX;ni<=mt.maxX;++ni)for(let ri=mt.minY;ri<=mt.maxY;++ri){const si=createOrUpdate$1(ut,ni,ri,this.tempTileCoord_),li=getCacheKey(Xe,si);let ai,ci;if(lt.containsKey(li)&&(ai=lt.get(li),ci=ai.tile),(!ai||ai.tile.key!==Xe.getKey())&&(ci=Xe.getTile(ut,ni,ri,Z.pixelRatio,be.projection)),lookupHasTile(ye,ci))continue;if(!ai)ai=this.createTileRepresentation({tile:ci,grid:Je,helper:this.helper,gutter:tt}),lt.set(li,ai);else if(this.isDrawableTile_(ci))ai.setTile(ci);else{const pi=ci.getInterimTile();ai.setTile(pi)}addTileRepresentationToLookup(ye,ai,ut);const Ci=ci.getKey();st[Ci]=!0,ci.getState()===TileState.IDLE&&(Z.tileQueue.isKeyQueued(Ci)||Z.tileQueue.enqueue([ci,it,Je.getTileCoordCenter(si),ei]))}}}beforeTilesRender(Z,ee){this.helper.prepareDraw(this.frameState,!ee,!0)}renderTile(Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt,it){}drawTile_(Z,ee,ae,ye,ve,be,Qe){if(!ee.loaded)return;const Je=ee.tile.tileCoord,tt=getKey(Je),it=tt in be?be[tt]:1,st=Qe.getResolution(ae),lt=toSize(Qe.getTileSize(ae),this.tempSize_),ct=Qe.getOrigin(ae),gt=Qe.getTileCoordExtent(Je),ut=it<1?-1:depthForZ(ae);it<1&&(Z.animate=!0);const mt=Z.viewState,ei=mt.center[0],ni=mt.center[1],ri=lt[0]+2*ye,si=lt[1]+2*ye,li=ri/si,ai=(ei-ct[0])/(lt[0]*st),ci=(ct[1]-ni)/(lt[1]*st),Ci=mt.resolution/st,pi=Je[1],gi=Je[2];reset(this.tileTransform_),scale$3(this.tileTransform_,2/(Z.size[0]*Ci/ri),-2/(Z.size[1]*Ci/ri)),rotate$3(this.tileTransform_,mt.rotation),scale$3(this.tileTransform_,1,1/li),translate$1(this.tileTransform_,(lt[0]*(pi-ai)-ye)/ri,(lt[1]*(gi-ci)-ye)/si),this.renderTile(ee,this.tileTransform_,Z,ve,st,lt,ct,gt,ut,ye,it)}renderFrame(Z){this.frameState=Z,this.renderComplete=!0;const ee=this.helper.getGL();this.preRender(ee,Z);const ae=Z.viewState,ye=this.getLayer(),ve=ye.getRenderSource(),be=ve.getTileGridForProjection(ae.projection),Qe=ve.getGutterForProjection(ae.projection),Xe=getRenderExtent(Z,Z.extent),Je=be.getZForResolution(ae.resolution,ve.zDirection),tt=newTileRepresentationLookup(),it=ye.getPreload();if(Z.nextExtent){const si=be.getZForResolution(ae.nextResolution,ve.zDirection),li=getRenderExtent(Z,Z.nextExtent);this.enqueueTiles(Z,li,si,tt,it)}this.enqueueTiles(Z,Xe,Je,tt,0),it>0&&setTimeout(()=>{this.enqueueTiles(Z,Xe,Je-1,tt,it-1)},0);const st={},lt=getUid(this),ct=Z.time;let gt=!1;for(const si of tt.representationsByZ[Je]){const li=si.tile;if((li instanceof ReprojTile||li instanceof ReprojDataTile)&&li.getState()===TileState.EMPTY)continue;const ai=li.tileCoord;if(si.loaded){const pi=li.getAlpha(lt,ct);if(pi===1){li.endTransition(lt);continue}gt=!0;const gi=getKey(ai);st[gi]=pi}if(this.renderComplete=!1,this.findAltTiles_(be,ai,Je+1,tt))continue;const Ci=be.getMinZoom();for(let pi=Je-1;pi>=Ci&&!this.findAltTiles_(be,ai,pi,tt);--pi);}this.beforeTilesRender(Z,gt);const ut=tt.representationsByZ,mt=Object.keys(ut).map(Number).sort(descending);for(let si=0,li=mt.length;si<li;++si){const ai=mt[si];for(const ci of ut[ai]){const Ci=ci.tile.tileCoord;getKey(Ci)in st||this.drawTile_(Z,ci,ai,Qe,Xe,st,be)}}for(const si of ut[Je]){const li=si.tile.tileCoord;getKey(li)in st&&this.drawTile_(Z,si,Je,Qe,Xe,st,be)}this.helper.finalizeDraw(Z,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const ei=this.helper.getCanvas(),ni=this.tileRepresentationCache;for(;ni.canExpireCache();)ni.pop().dispose();const ri=function(si,li){ve.updateCacheSize(.1,li.viewState.projection),ve.expireCache(li.viewState.projection,empty)};return Z.postRenderFunctions.push(ri),this.postRender(ee,Z),ei}findAltTiles_(Z,ee,ae,ye){const ve=Z.getTileRangeForTileCoordAndZ(ee,ae,this.tempTileRange_);if(!ve)return!1;let be=!0;const Qe=this.tileRepresentationCache,Xe=this.getLayer().getRenderSource();for(let Je=ve.minX;Je<=ve.maxX;++Je)for(let tt=ve.minY;tt<=ve.maxY;++tt){const it=getCacheKey(Xe,[ae,Je,tt]);let st=!1;if(Qe.containsKey(it)){const lt=Qe.get(it);lt.loaded&&!lookupHasTile(ye,lt.tile)&&(addTileRepresentationToLookup(ye,lt,ae),st=!0)}st||(be=!1)}return be}clearCache(){const Z=this.tileRepresentationCache;Z.forEach(ee=>ee.dispose()),Z.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}const Uniforms={...Uniforms$1,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},Attributes={TEXTURE_COORD:"a_textureCoord"},attributeDescriptions=[{name:Attributes.TEXTURE_COORD,size:2,type:AttributeType.FLOAT}];class WebGLTileLayerRenderer extends WebGLBaseTileLayerRenderer{constructor(Z,ee){super(Z,ee),this.program_,this.vertexShader_=ee.vertexShader,this.fragmentShader_=ee.fragmentShader,this.indices_=new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER,STATIC_DRAW),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=ee.paletteTextures||[]}reset(Z){super.reset(Z),this.vertexShader_=Z.vertexShader,this.fragmentShader_=Z.fragmentShader,this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(Z){return new TileTexture(Z)}beforeTilesRender(Z,ee){super.beforeTilesRender(Z,ee),this.helper.useProgram(this.program_,Z)}renderTile(Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt,it){const st=this.helper.getGL();this.helper.bindBuffer(Z.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(attributeDescriptions);let lt=0;for(;lt<Z.textures.length;){const li=`${Uniforms.TILE_TEXTURE_ARRAY}[${lt}]`;this.helper.bindTexture(Z.textures[lt],lt,li),++lt}for(let li=0;li<this.paletteTextures_.length;++li){const ai=this.paletteTextures_[li],ci=ai.getTexture(st);this.helper.bindTexture(ci,lt,ai.name),++lt}const ct=ae.viewState,gt=be[0]+2*tt,ut=be[1]+2*tt,ei=Z.tile.tileCoord,ni=ei[1],ri=ei[2];this.helper.setUniformMatrixValue(Uniforms.TILE_TRANSFORM,fromTransform(this.tempMat4,ee)),this.helper.setUniformFloatValue(Uniforms.TRANSITION_ALPHA,it),this.helper.setUniformFloatValue(Uniforms.DEPTH,Je);let si=ye;tt>0&&(si=Xe,getIntersection(si,ye,si)),this.helper.setUniformFloatVec4(Uniforms.RENDER_EXTENT,si),this.helper.setUniformFloatValue(Uniforms.RESOLUTION,ct.resolution),this.helper.setUniformFloatValue(Uniforms.ZOOM,ct.zoom),this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_WIDTH,gt),this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_HEIGHT,ut),this.helper.setUniformFloatValue(Uniforms.TEXTURE_RESOLUTION,ve),this.helper.setUniformFloatValue(Uniforms.TEXTURE_ORIGIN_X,Qe[0]+ni*be[0]*ve-tt*ve),this.helper.setUniformFloatValue(Uniforms.TEXTURE_ORIGIN_Y,Qe[1]-ri*be[1]*ve+tt*ve),this.helper.drawElements(0,this.indices_.getSize())}getData(Z){if(!this.helper.getGL())return null;const ae=this.frameState;if(!ae)return null;const ye=this.getLayer(),ve=apply(ae.pixelToCoordinateTransform,Z.slice()),be=ae.viewState,Qe=ye.getExtent();if(Qe&&!containsCoordinate(fromUserExtent(Qe,be.projection),ve))return null;const Xe=ye.getSources(boundingExtent([ve]),be.resolution);let Je,tt,it;for(Je=Xe.length-1;Je>=0;--Je)if(tt=Xe[Je],tt.getState()==="ready"){if(it=tt.getTileGridForProjection(be.projection),tt.getWrapX())break;const lt=it.getExtent();if(!lt||containsCoordinate(lt,ve))break}if(Je<0)return null;const st=this.tileRepresentationCache;for(let lt=it.getZForResolution(be.resolution);lt>=it.getMinZoom();--lt){const ct=it.getTileCoordForCoordAndZ(ve,lt),gt=getCacheKey(tt,ct);if(!st.containsKey(gt))continue;const ut=st.get(gt),mt=ut.tile;if((mt instanceof ReprojTile||mt instanceof ReprojDataTile)&&mt.getState()===TileState.EMPTY)return null;if(!ut.loaded)continue;const ei=it.getOrigin(lt),ni=toSize(it.getTileSize(lt)),ri=it.getResolution(lt),si=(ve[0]-ei[0])/ri-ct[1]*ni[0],li=(ei[1]-ve[1])/ri-ct[2]*ni[1];return ut.getPixelData(si,li)}return null}disposeInternal(){const Z=this.helper;Z&&(Z.getGL().deleteProgram(this.program_),delete this.program_,Z.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_}}class PaletteTexture{constructor(Z,ee){this.name=Z,this.data=ee,this.texture_=null}getTexture(Z){if(!this.texture_){const ee=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,ee),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.NEAREST),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.NEAREST),Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,this.data.length/4,1,0,Z.RGBA,Z.UNSIGNED_BYTE,this.data),this.texture_=ee}return this.texture_}}const ValueTypes={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0};function getTypeFromHint(ie){switch(ie){case"string":return ValueTypes.STRING;case"color":return ValueTypes.COLOR;case"number":return ValueTypes.NUMBER;case"boolean":return ValueTypes.BOOLEAN;case"number[]":return ValueTypes.NUMBER_ARRAY;default:throw new Error(`Unrecognized type hint: ${ie}`)}}const Operators={};function getValueType(ie){if(typeof ie=="number")return ValueTypes.NUMBER;if(typeof ie=="boolean")return ValueTypes.BOOLEAN;if(typeof ie=="string")return isStringColor(ie)?ValueTypes.COLOR|ValueTypes.STRING:ValueTypes.STRING;if(!Array.isArray(ie))throw new Error(`Unhandled value type: ${JSON.stringify(ie)}`);const Z=ie;if(Z.every(function(ye){return typeof ye=="number"}))return Z.length===3||Z.length===4?ValueTypes.COLOR|ValueTypes.NUMBER_ARRAY:ValueTypes.NUMBER_ARRAY;if(typeof Z[0]!="string")throw new Error(`Expected an expression operator but received: ${JSON.stringify(Z)}`);const ae=Operators[Z[0]];if(ae===void 0)throw new Error(`Unrecognized expression operator: ${JSON.stringify(Z)}`);return ae.getReturnType(Z.slice(1))}function isTypeUnique(ie){return Math.log2(ie)%1===0}function printTypes(ie){const Z=[];return(ie&ValueTypes.NUMBER)>0&&Z.push("number"),(ie&ValueTypes.COLOR)>0&&Z.push("color"),(ie&ValueTypes.BOOLEAN)>0&&Z.push("boolean"),(ie&ValueTypes.NUMBER_ARRAY)>0&&Z.push("number[]"),(ie&ValueTypes.STRING)>0&&Z.push("string"),Z.length>0?Z.join(", "):"(no type)"}function computeOperatorFunctionName(ie,Z){return`operator_${ie}_${Object.keys(Z.functions).length}`}function numberToGlsl(ie){const Z=ie.toString();return Z.includes(".")?Z:Z+".0"}function arrayToGlsl(ie){if(ie.length<2||ie.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${ie.length}(${ie.map(numberToGlsl).join(", ")})`}function colorToGlsl(ie){const Z=asArray(ie),ee=Z.length>3?Z[3]:1;return arrayToGlsl([Z[0]/255*ee,Z[1]/255*ee,Z[2]/255*ee,ee])}const stringToFloatMap={};let stringToFloatCounter=0;function getStringNumberEquivalent(ie){return ie in stringToFloatMap||(stringToFloatMap[ie]=stringToFloatCounter++),stringToFloatMap[ie]}function stringToGlsl(ie){return numberToGlsl(getStringNumberEquivalent(ie))}function expressionToGlsl(ie,Z,ee){const ae=ee!==void 0?ee:ValueTypes.NUMBER;if(Array.isArray(Z)&&typeof Z[0]=="string"){const ve=Operators[Z[0]];if(ve===void 0)throw new Error(`Unrecognized expression operator: ${JSON.stringify(Z)}`);return ve.toGlsl(ie,Z.slice(1),ae)}const ye=getValueType(Z)&ae;if(assertNotEmptyType(Z,ye,""),(ye&ValueTypes.NUMBER)>0)return numberToGlsl(Z);if((ye&ValueTypes.BOOLEAN)>0)return Z.toString();if((ye&ValueTypes.STRING)>0)return stringToGlsl(Z.toString());if((ye&ValueTypes.COLOR)>0)return colorToGlsl(Z);if((ye&ValueTypes.NUMBER_ARRAY)>0)return arrayToGlsl(Z);throw new Error(`Unexpected expression ${Z} (expected type ${printTypes(ae)})`)}function assertNumber(ie){if(!(getValueType(ie)&ValueTypes.NUMBER))throw new Error(`A numeric value was expected, got ${JSON.stringify(ie)} instead`)}function assertNumbers(ie){for(let Z=0;Z<ie.length;Z++)assertNumber(ie[Z])}function assertString(ie){if(!(getValueType(ie)&ValueTypes.STRING))throw new Error(`A string value was expected, got ${JSON.stringify(ie)} instead`)}function assertBoolean(ie){if(!(getValueType(ie)&ValueTypes.BOOLEAN))throw new Error(`A boolean value was expected, got ${JSON.stringify(ie)} instead`)}function assertArgsCount(ie,Z){if(ie.length!==Z)throw new Error(`Exactly ${Z} arguments were expected, got ${ie.length} instead`)}function assertArgsMinCount(ie,Z){if(ie.length<Z)throw new Error(`At least ${Z} arguments were expected, got ${ie.length} instead`)}function assertArgsMaxCount(ie,Z){if(ie.length>Z)throw new Error(`At most ${Z} arguments were expected, got ${ie.length} instead`)}function assertArgsEven(ie){if(ie.length%2!==0)throw new Error(`An even amount of arguments was expected, got ${JSON.stringify(ie)} instead`)}function assertArgsOdd(ie){if(ie.length%2===0)throw new Error(`An odd amount of arguments was expected, got ${JSON.stringify(ie)} instead`)}function assertNotEmptyType(ie,Z,ee){if(Z===ValueTypes.NONE)throw new Error(`No matching type was found for the following expression ${ee}: ${JSON.stringify(ie)}`)}function assertSingleType(ie,Z,ee){if(assertNotEmptyType(ie,Z,ee),!isTypeUnique(Z))throw new Error(`Expected to have a unique type for the following expression ${ee}: ${JSON.stringify(ie)}
Got the following types instead: ${printTypes(Z)}`)}function assertOfType(ie,Z,ee,ae){if((Z&ee)===ValueTypes.NONE)throw new Error(`Expected the ${ae} type of the following expression: ${JSON.stringify(ie)} to be of the following types: ${printTypes(ee)}
Got these types instead: ${printTypes(Z)}`)}Operators.get={getReturnType:function(ie){if(ie.length===2){const Z=ie[1];return getTypeFromHint(Z)}return ValueTypes.ANY},toGlsl:function(ie,Z,ee){assertArgsMinCount(Z,1),assertArgsMaxCount(Z,2),assertString(Z[0]);const ae=ee&Operators.get.getReturnType(Z);assertSingleType(["get",...Z],ae,"");const ye=Z[0].toString(),ve=ie.attributes.find(Qe=>Qe.name===ye);if(!ve)ie.attributes.push({name:ye,type:ae});else if(ae!==ve.type)throw new Error(`The following attribute was used in different places with incompatible types: ${ye}
Types were: ${printTypes(ve.type)} and ${printTypes(ae)}`);return(ie.inFragmentShader?"v_":"a_")+ye}};function uniformNameForVariable(ie){return"u_var_"+ie}Operators.var={getReturnType:function(){return ValueTypes.ANY},toGlsl:function(ie,Z,ee){assertArgsCount(Z,1),assertString(Z[0]);const ae=Z[0].toString();if(!ie.style.variables||ie.style.variables[ae]===void 0)throw new Error(`The following variable is missing from the style: ${ae}`);const ye=ie.style.variables[ae],ve=ee&getValueType(ye);assertSingleType(["var",...Z],ve,"");const be=ie.variables.find(Qe=>Qe.name===ae);if(!be)ie.variables.push({name:ae,type:ve});else if(ve!==be.type)throw new Error(`The following variable was used in different places with incompatible types: ${ae}
Types were: ${printTypes(be.type)} and ${printTypes(ve)}`);return uniformNameForVariable(ae)}};const PALETTE_TEXTURE_ARRAY="u_paletteTextures";Operators.palette={getReturnType:function(){return ValueTypes.COLOR},toGlsl:function(ie,Z){assertArgsCount(Z,2),assertNumber(Z[0]);const ee=expressionToGlsl(ie,Z[0]),ae=Z[1];if(!Array.isArray(ae))throw new Error("The second argument of palette must be an array");const ye=ae.length,ve=new Uint8Array(ye*4);for(let Xe=0;Xe<ye;Xe++){const Je=ae[Xe];let tt;if(typeof Je=="string")tt=fromString(Je);else{if(!Array.isArray(Je))throw new Error("The second argument of palette must be an array of strings or colors");const st=Je.length;if(st===4)tt=Je;else{if(st!==3)throw new Error(`Expected palette color to have 3 or 4 values, got ${st}`);tt=[Je[0],Je[1],Je[2],1]}}const it=Xe*4;ve[it]=tt[0],ve[it+1]=tt[1],ve[it+2]=tt[2],ve[it+3]=tt[3]*255}ie.paletteTextures||(ie.paletteTextures=[]);const be=`${PALETTE_TEXTURE_ARRAY}[${ie.paletteTextures.length}]`,Qe=new PaletteTexture(be,ve);return ie.paletteTextures.push(Qe),`texture2D(${be}, vec2((${ee} + 0.5) / ${ye}.0, 0.5))`}};const GET_BAND_VALUE_FUNC="getBandValue";Operators.band={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){assertArgsMinCount(Z,1),assertArgsMaxCount(Z,3);const ee=Z[0];if(!(GET_BAND_VALUE_FUNC in ie.functions)){let be="";const Qe=ie.bandCount||1;for(let Xe=0;Xe<Qe;Xe++){const Je=Math.floor(Xe/4);let tt=Xe%4;Xe===Qe-1&&tt===1&&(tt=3);const it=`${Uniforms.TILE_TEXTURE_ARRAY}[${Je}]`;be+=`
          if (band == ${Xe+1}.0) {
            return texture2D(${it}, v_textureCoord + vec2(dx, dy))[${tt}];
          }
        `}ie.functions[GET_BAND_VALUE_FUNC]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / ${Uniforms.TEXTURE_PIXEL_WIDTH};
          float dy = yOffset / ${Uniforms.TEXTURE_PIXEL_HEIGHT};
          ${be}
        }
      `}const ae=expressionToGlsl(ie,ee),ye=expressionToGlsl(ie,Z[1]||0),ve=expressionToGlsl(ie,Z[2]||0);return`${GET_BAND_VALUE_FUNC}(${ae}, ${ye}, ${ve})`}},Operators.time={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,0),"u_time"}},Operators.zoom={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,0),"u_zoom"}},Operators.resolution={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,0),"u_resolution"}},Operators["geometry-type"]={getReturnType:function(){return ValueTypes.STRING},toGlsl:function(ie,Z){assertArgsCount(Z,0);const ee="geometryType",ae=be=>{const Qe=be.getType();switch(Qe){case"Point":case"LineString":case"Polygon":return Qe;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return Qe.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return ae(be.getGeometries()[0])}};return ie.attributes.find(be=>be.name===ee)||ie.attributes.push({name:ee,type:ValueTypes.STRING,callback:be=>ae(be.getGeometry())}),(ie.inFragmentShader?"v_":"a_")+ee}},Operators["*"]={getReturnType:function(ie){let Z=ValueTypes.NUMBER|ValueTypes.COLOR;for(let ee=0;ee<ie.length;ee++)Z=Z&getValueType(ie[ee]);return Z},toGlsl:function(ie,Z,ee){assertArgsMinCount(Z,2);let ae=ee;for(let ye=0;ye<Z.length;ye++)ae=ae&getValueType(Z[ye]);return assertOfType(Z,ae,ValueTypes.NUMBER|ValueTypes.COLOR,"output"),`(${Z.map(ye=>expressionToGlsl(ie,ye,ae)).join(" * ")})`}},Operators["/"]={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`(${expressionToGlsl(ie,Z[0])} / ${expressionToGlsl(ie,Z[1])})`}},Operators["+"]={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsMinCount(Z,2),assertNumbers(Z),`(${Z.map(ee=>expressionToGlsl(ie,ee)).join(" + ")})`}},Operators["-"]={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`(${expressionToGlsl(ie,Z[0])} - ${expressionToGlsl(ie,Z[1])})`}},Operators.clamp={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){assertArgsCount(Z,3),assertNumbers(Z);const ee=expressionToGlsl(ie,Z[1]),ae=expressionToGlsl(ie,Z[2]);return`clamp(${expressionToGlsl(ie,Z[0])}, ${ee}, ${ae})`}},Operators["%"]={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`mod(${expressionToGlsl(ie,Z[0])}, ${expressionToGlsl(ie,Z[1])})`}},Operators["^"]={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`pow(${expressionToGlsl(ie,Z[0])}, ${expressionToGlsl(ie,Z[1])})`}},Operators.abs={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertNumbers(Z),`abs(${expressionToGlsl(ie,Z[0])})`}},Operators.floor={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertNumbers(Z),`floor(${expressionToGlsl(ie,Z[0])})`}},Operators.round={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertNumbers(Z),`floor(${expressionToGlsl(ie,Z[0])} + 0.5)`}},Operators.ceil={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertNumbers(Z),`ceil(${expressionToGlsl(ie,Z[0])})`}},Operators.sin={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertNumbers(Z),`sin(${expressionToGlsl(ie,Z[0])})`}},Operators.cos={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertNumbers(Z),`cos(${expressionToGlsl(ie,Z[0])})`}},Operators.atan={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsMinCount(Z,1),assertArgsMaxCount(Z,2),assertNumbers(Z),Z.length===2?`atan(${expressionToGlsl(ie,Z[0])}, ${expressionToGlsl(ie,Z[1])})`:`atan(${expressionToGlsl(ie,Z[0])})`}},Operators.sqrt={getReturnType:function(){return ValueTypes.NUMBER},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertNumbers(Z),`sqrt(${expressionToGlsl(ie,Z[0])})`}},Operators[">"]={getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`(${expressionToGlsl(ie,Z[0])} > ${expressionToGlsl(ie,Z[1])})`}},Operators[">="]={getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`(${expressionToGlsl(ie,Z[0])} >= ${expressionToGlsl(ie,Z[1])})`}},Operators["<"]={getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`(${expressionToGlsl(ie,Z[0])} < ${expressionToGlsl(ie,Z[1])})`}},Operators["<="]={getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(ie,Z){return assertArgsCount(Z,2),assertNumbers(Z),`(${expressionToGlsl(ie,Z[0])} <= ${expressionToGlsl(ie,Z[1])})`}};function getEqualOperator(ie){return{getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(Z,ee){assertArgsCount(ee,2);let ae=ValueTypes.ANY;for(let ye=0;ye<ee.length;ye++)ae&=getValueType(ee[ye]);if(ae===ValueTypes.NONE)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(ee)} instead`);return ae&=~ValueTypes.COLOR,`(${expressionToGlsl(Z,ee[0],ae)} ${ie} ${expressionToGlsl(Z,ee[1],ae)})`}}}Operators["=="]=getEqualOperator("=="),Operators["!="]=getEqualOperator("!="),Operators["!"]={getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(ie,Z){return assertArgsCount(Z,1),assertBoolean(Z[0]),`(!${expressionToGlsl(ie,Z[0],ValueTypes.BOOLEAN)})`}};function getDecisionOperator(ie){return{getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(Z,ee){assertArgsMinCount(ee,2);for(let ye=0;ye<ee.length;ye++)assertBoolean(ee[ye]);let ae=ee.map(ye=>expressionToGlsl(Z,ye,ValueTypes.BOOLEAN)).join(` ${ie} `);return ae=`(${ae})`,ae}}}Operators.all=getDecisionOperator("&&"),Operators.any=getDecisionOperator("||"),Operators.between={getReturnType:function(){return ValueTypes.BOOLEAN},toGlsl:function(ie,Z){assertArgsCount(Z,3),assertNumbers(Z);const ee=expressionToGlsl(ie,Z[1]),ae=expressionToGlsl(ie,Z[2]),ye=expressionToGlsl(ie,Z[0]);return`(${ye} >= ${ee} && ${ye} <= ${ae})`}},Operators.array={getReturnType:function(){return ValueTypes.NUMBER_ARRAY},toGlsl:function(ie,Z){assertArgsMinCount(Z,2),assertArgsMaxCount(Z,4),assertNumbers(Z);const ee=Z.map(function(ae){return expressionToGlsl(ie,ae)});return`vec${Z.length}(${ee.join(", ")})`}},Operators.color={getReturnType:function(){return ValueTypes.COLOR},toGlsl:function(ie,Z){assertArgsMinCount(Z,3),assertArgsMaxCount(Z,4),assertNumbers(Z);const ee=Z.slice(0,3).map(ye=>`${expressionToGlsl(ie,ye)} / 255.0`);return Z.length===3?`vec4(${ee.join(", ")}, 1.0)`:`(${expressionToGlsl(ie,Z[3])} * vec4(${ee.join(", ")}, 1.0))`}},Operators.interpolate={getReturnType:function(ie){let Z=ValueTypes.COLOR|ValueTypes.NUMBER;for(let ee=3;ee<ie.length;ee+=2)Z=Z&getValueType(ie[ee]);return Z},toGlsl:function(ie,Z,ee){assertArgsEven(Z),assertArgsMinCount(Z,6);const ae=Z[0];let ye;switch(ae[0]){case"linear":ye=1;break;case"exponential":ye=ae[1];break;default:ye=null}if(!ye)throw new Error(`Invalid interpolation type for "interpolate" operator, received: ${JSON.stringify(ae)}`);const ve=ValueTypes.NUMBER,be=Operators.interpolate.getReturnType(Z)&ee;assertSingleType(["interpolate",...Z],be,"output");const Qe=expressionToGlsl(ie,Z[1],ve),Xe=numberToGlsl(ye);let Je="";for(let tt=2;tt<Z.length-2;tt+=2){const it=expressionToGlsl(ie,Z[tt],ve),st=Je||expressionToGlsl(ie,Z[tt+1],be),lt=expressionToGlsl(ie,Z[tt+2],ve),ct=expressionToGlsl(ie,Z[tt+3],be);let gt;ye===1?gt=`(${Qe} - ${it}) / (${lt} - ${it})`:gt=`(pow(${Xe}, (${Qe} - ${it})) - 1.0) / (pow(${Xe}, (${lt} - ${it})) - 1.0)`,Je=`mix(${st}, ${ct}, clamp(${gt}, 0.0, 1.0))`}return Je}},Operators.match={getReturnType:function(ie){let Z=ValueTypes.ANY;for(let ee=2;ee<ie.length;ee+=2)Z=Z&getValueType(ie[ee]);return Z=Z&getValueType(ie[ie.length-1]),Z},toGlsl:function(ie,Z,ee){assertArgsEven(Z),assertArgsMinCount(Z,4);let ae=getValueType(Z[0]);for(let Xe=1;Xe<Z.length-1;Xe+=2)ae=ae&getValueType(Z[Xe]);assertOfType(["match",...Z],ae,ValueTypes.STRING|ValueTypes.NUMBER|ValueTypes.BOOLEAN,"input"),ae=(ValueTypes.STRING|ValueTypes.NUMBER|ValueTypes.BOOLEAN)&ae;const ye=Operators.match.getReturnType(Z)&ee;assertSingleType(["match",...Z],ye,"output");const ve=expressionToGlsl(ie,Z[0],ae),be=expressionToGlsl(ie,Z[Z.length-1],ye);let Qe=null;for(let Xe=Z.length-3;Xe>=1;Xe-=2){const Je=expressionToGlsl(ie,Z[Xe],ae),tt=expressionToGlsl(ie,Z[Xe+1],ye);Qe=`(${ve} == ${Je} ? ${tt} : ${Qe||be})`}return Qe}},Operators.case={getReturnType:function(ie){let Z=ValueTypes.ANY;for(let ee=1;ee<ie.length;ee+=2)Z=Z&getValueType(ie[ee]);return Z=Z&getValueType(ie[ie.length-1]),Z},toGlsl:function(ie,Z,ee){assertArgsOdd(Z),assertArgsMinCount(Z,3);const ae=Operators.case.getReturnType(Z)&ee;assertSingleType(["case",...Z],ae,"output");for(let be=0;be<Z.length-1;be+=2)assertBoolean(Z[be]);const ye=expressionToGlsl(ie,Z[Z.length-1],ae);let ve=null;for(let be=Z.length-3;be>=0;be-=2){const Qe=expressionToGlsl(ie,Z[be],ValueTypes.BOOLEAN),Xe=expressionToGlsl(ie,Z[be+1],ae);ve=`(${Qe} ? ${Xe} : ${ve||ye})`}return ve}},Operators.in={getReturnType:function(ie){return ValueTypes.BOOLEAN},toGlsl:function(ie,Z){assertArgsCount(Z,2);const ee=Z[0];let ae=Z[1];if(!Array.isArray(ae))throw new Error('The "in" operator expects an array literal as its second argument.');if(typeof ae[0]=="string"){if(ae[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(ae[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');ae=ae[1]}let ye=getValueType(ee);for(let Qe=0;Qe<ae.length-1;Qe+=1)ye=ye&getValueType(ae[Qe]);assertOfType(["match",...Z],ye,ValueTypes.STRING|ValueTypes.NUMBER|ValueTypes.BOOLEAN,"input"),ye=(ValueTypes.STRING|ValueTypes.NUMBER|ValueTypes.BOOLEAN)&ye;const ve=computeOperatorFunctionName("in",ie),be=[];for(let Qe=0;Qe<ae.length;Qe+=1)be.push(`  if (inputValue == ${expressionToGlsl(ie,ae[Qe],ye)}) { return true; }`);return ie.functions[ve]=`bool ${ve}(float inputValue) {
${be.join(`
`)}
  return false;
}`,`${ve}(${expressionToGlsl(ie,ee,ye)})`}};function parseStyle(ie,Z){const ee=`
    attribute vec2 ${Attributes.TEXTURE_COORD};
    uniform mat4 ${Uniforms.TILE_TRANSFORM};
    uniform float ${Uniforms.TEXTURE_PIXEL_WIDTH};
    uniform float ${Uniforms.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Uniforms.TEXTURE_RESOLUTION};
    uniform float ${Uniforms.TEXTURE_ORIGIN_X};
    uniform float ${Uniforms.TEXTURE_ORIGIN_Y};
    uniform float ${Uniforms.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${Attributes.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Uniforms.TEXTURE_ORIGIN_X} + ${Uniforms.TEXTURE_RESOLUTION} * ${Uniforms.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Uniforms.TEXTURE_ORIGIN_Y} - ${Uniforms.TEXTURE_RESOLUTION} * ${Uniforms.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Uniforms.TILE_TRANSFORM} * vec4(${Attributes.TEXTURE_COORD}, ${Uniforms.DEPTH}, 1.0);
    }
  `,ae={inFragmentShader:!0,variables:[],attributes:[],functions:{},bandCount:Z,style:ie},ye=[];if(ie.color!==void 0){const it=expressionToGlsl(ae,ie.color,ValueTypes.COLOR);ye.push(`color = ${it};`)}if(ie.contrast!==void 0){const it=expressionToGlsl(ae,ie.contrast,ValueTypes.NUMBER);ye.push(`color.rgb = clamp((${it} + 1.0) * color.rgb - (${it} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(ie.exposure!==void 0){const it=expressionToGlsl(ae,ie.exposure,ValueTypes.NUMBER);ye.push(`color.rgb = clamp((${it} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(ie.saturation!==void 0){const it=expressionToGlsl(ae,ie.saturation,ValueTypes.NUMBER);ye.push(`
      float saturation = ${it} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(ie.gamma!==void 0){const it=expressionToGlsl(ae,ie.gamma,ValueTypes.NUMBER);ye.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${it}));`)}if(ie.brightness!==void 0){const it=expressionToGlsl(ae,ie.brightness,ValueTypes.NUMBER);ye.push(`color.rgb = clamp(color.rgb + ${it}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const ve={},be=ae.variables.length;if(be>1&&!ie.variables)throw new Error(`Missing variables in style (expected ${ae.variables})`);for(let it=0;it<be;++it){const st=ae.variables[it];if(!(st.name in ie.variables))throw new Error(`Missing '${st.name}' in style variables`);const lt=uniformNameForVariable(st.name);ve[lt]=function(){let ct=ie.variables[st.name];return typeof ct=="string"&&(ct=getStringNumberEquivalent(ct)),ct!==void 0?ct:-9999999}}const Qe=Object.keys(ve).map(function(it){return`uniform float ${it};`}),Xe=Math.ceil(Z/4);Qe.push(`uniform sampler2D ${Uniforms.TILE_TEXTURE_ARRAY}[${Xe}];`),ae.paletteTextures&&Qe.push(`uniform sampler2D ${PALETTE_TEXTURE_ARRAY}[${ae.paletteTextures.length}];`);const Je=Object.keys(ae.functions).map(function(it){return ae.functions[it]}),tt=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Uniforms.RENDER_EXTENT};
    uniform float ${Uniforms.TRANSITION_ALPHA};
    uniform float ${Uniforms.TEXTURE_PIXEL_WIDTH};
    uniform float ${Uniforms.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Uniforms.RESOLUTION};
    uniform float ${Uniforms.ZOOM};

    ${Qe.join(`
`)}

    ${Je.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Uniforms.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Uniforms.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Uniforms.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Uniforms.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Uniforms.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${ye.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Uniforms.TRANSITION_ALPHA};
    }`;return{vertexShader:ee,fragmentShader:tt,uniforms:ve,paletteTextures:ae.paletteTextures}}class WebGLTileLayer extends BaseTileLayer{constructor(Z){Z=Z?Object.assign({},Z):{};const ee=Z.style||{};delete Z.style;const ae=Z.cacheSize;delete Z.cacheSize,super(Z),this.sources_=Z.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=ee,this.cacheSize_=ae,this.styleVariables_=this.style_.variables||{},this.addChangeListener(LayerProperty.SOURCE,this.handleSourceUpdate_)}getSources(Z,ee){const ae=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(Z,ee):this.sources_:ae?[ae]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const Z=this.getRenderSource();return Z?Z.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const Z=Number.MAX_SAFE_INTEGER,ee=this.getSources([-Z,-Z,Z,Z],Z);return ee&&ee.length&&"bandCount"in ee[0]?ee[0].bandCount:4}createRenderer(){const Z=parseStyle(this.style_,this.getSourceBandCount_());return new WebGLTileLayerRenderer(this,{vertexShader:Z.vertexShader,fragmentShader:Z.fragmentShader,uniforms:Z.uniforms,cacheSize:this.cacheSize_,paletteTextures:Z.paletteTextures})}renderSources(Z,ee){const ae=this.getRenderer();let ye;for(let ve=0,be=ee.length;ve<be;++ve)this.renderedSource_=ee[ve],ae.prepareFrame(Z)&&(ye=ae.renderFrame(Z));return ye}render(Z,ee){this.rendered=!0;const ae=Z.viewState,ye=this.getSources(Z.extent,ae.resolution);let ve=!0;for(let Qe=0,Xe=ye.length;Qe<Xe;++Qe){const Je=ye[Qe],tt=Je.getState();if(tt=="loading"){const it=()=>{Je.getState()=="ready"&&(Je.removeEventListener("change",it),this.changed())};Je.addEventListener("change",it)}ve=ve&&tt=="ready"}const be=this.renderSources(Z,ye);if(this.getRenderer().renderComplete&&ve)return this.renderedResolution_=ae.resolution,be;if(this.renderedResolution_>.5*ae.resolution){const Qe=this.getSources(Z.extent,this.renderedResolution_).filter(Xe=>!ye.includes(Xe));if(Qe.length>0)return this.renderSources(Z,Qe)}return be}setStyle(Z){this.styleVariables_=Z.variables||{},this.style_=Z;const ee=parseStyle(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:ee.vertexShader,fragmentShader:ee.fragmentShader,uniforms:ee.uniforms}),this.changed()}updateStyleVariables(Z){Object.assign(this.styleVariables_,Z),this.changed()}}WebGLTileLayer.prototype.dispose;const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(Z){Z=Z||{},super({element:document.createElement("div"),target:Z.target}),this.on,this.once,this.un,this.keys_=Z.keys!==void 0?Z.keys:!1,this.source_=Z.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=Z.className!==void 0?Z.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=Z.activeClassName!==void 0?Z.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=Z.inactiveClassName!==void 0?Z.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const ee=Z.label!==void 0?Z.label:"";this.labelNode_=typeof ee=="string"?document.createTextNode(ee):ee;const ae=Z.labelActive!==void 0?Z.labelActive:"";this.labelActiveNode_=typeof ae=="string"?document.createTextNode(ae):ae;const ye=Z.tipLabel?Z.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=ye,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(Z){Z.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const Z=this.getMap();if(!Z)return;const ee=Z.getOwnerDocument();if(isFullScreenSupported(ee))if(isFullScreen(ee))exitFullScreen(ee);else{let ae;this.source_?ae=typeof this.source_=="string"?ee.getElementById(this.source_):this.source_:ae=Z.getTargetElement(),this.keys_?requestFullScreenWithKeys(ae):requestFullScreen(ae)}}handleFullScreenChange_(){const Z=this.getMap();if(!Z)return;const ee=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(Z.getOwnerDocument()),ee!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),Z.updateSize())}setClassName_(Z,ee){ee?(Z.classList.remove(...this.inactiveClassName_),Z.classList.add(...this.activeClassName_)):(Z.classList.remove(...this.activeClassName_),Z.classList.add(...this.inactiveClassName_))}setMap(Z){const ee=this.getMap();ee&&ee.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(Z),this.handleMapTargetChange_(),Z&&Z.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const Z=this.documentListeners_;for(let ae=0,ye=Z.length;ae<ye;++ae)unlistenByKey(Z[ae]);Z.length=0;const ee=this.getMap();if(ee){const ae=ee.getOwnerDocument();isFullScreenSupported(ae)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let ye=0,ve=events.length;ye<ve;++ye)Z.push(listen(ae,events[ye],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(ie){const Z=ie.body;return!!(Z.webkitRequestFullscreen||Z.requestFullscreen&&ie.fullscreenEnabled)}function isFullScreen(ie){return!!(ie.webkitIsFullScreen||ie.fullscreenElement)}function requestFullScreen(ie){ie.requestFullscreen?ie.requestFullscreen():ie.webkitRequestFullscreen&&ie.webkitRequestFullscreen()}function requestFullScreenWithKeys(ie){ie.webkitRequestFullscreen?ie.webkitRequestFullscreen():requestFullScreen(ie)}function exitFullScreen(ie){ie.exitFullscreen?ie.exitFullscreen():ie.webkitExitFullscreen&&ie.webkitExitFullscreen()}class VectorTile extends UrlTile{constructor(Z){const ee=Z.projection||"EPSG:3857",ae=Z.extent||extentFromProjection(ee),ye=Z.tileGrid||createXYZ({extent:ae,maxResolution:Z.maxResolution,maxZoom:Z.maxZoom!==void 0?Z.maxZoom:22,minZoom:Z.minZoom,tileSize:Z.tileSize||512});super({attributions:Z.attributions,attributionsCollapsible:Z.attributionsCollapsible,cacheSize:Z.cacheSize,interpolate:!0,opaque:!1,projection:ee,state:Z.state,tileGrid:ye,tileLoadFunction:Z.tileLoadFunction?Z.tileLoadFunction:defaultLoadFunction,tileUrlFunction:Z.tileUrlFunction,url:Z.url,urls:Z.urls,wrapX:Z.wrapX===void 0?!0:Z.wrapX,transition:Z.transition,zDirection:Z.zDirection===void 0?1:Z.zDirection}),this.format_=Z.format?Z.format:null,this.sourceTileCache=new TileCache(this.tileCache.highWaterMark),this.overlaps_=Z.overlaps==null?!0:Z.overlaps,this.tileClass=Z.tileClass?Z.tileClass:VectorTile$1,this.tileGrids_={}}getFeaturesInExtent(Z){const ee=[],ae=this.tileCache;if(ae.getCount()===0)return ee;const ye=fromKey(ae.peekFirstKey())[0],ve=this.tileGrid;return ae.forEach(function(be){if(be.tileCoord[0]!==ye||be.getState()!==TileState.LOADED)return;const Qe=be.getSourceTiles();for(let Xe=0,Je=Qe.length;Xe<Je;++Xe){const tt=Qe[Xe],it=tt.tileCoord;if(intersects$1(Z,ve.getTileCoordExtent(it))){const st=tt.getFeatures();if(st)for(let lt=0,ct=st.length;lt<ct;++lt){const gt=st[lt],ut=gt.getGeometry();intersects$1(Z,ut.getExtent())&&ee.push(gt)}}}}),ee}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(Z,ee){const ae=this.getTileCacheForProjection(Z),ye=Object.keys(ee).reduce((ve,be)=>{const Qe=getCacheKeyForTileKey(be),Xe=ae.peek(Qe);if(Xe){const Je=Xe.sourceTiles;for(let tt=0,it=Je.length;tt<it;++tt)ve[Je[tt].getKey()]=!0}return ve},{});super.expireCache(Z,ee),this.sourceTileCache.expireCache(ye)}getSourceTiles(Z,ee,ae){if(ae.getState()===TileState.IDLE){ae.setState(TileState.LOADING);const ye=ae.wrappedTileCoord,ve=this.getTileGridForProjection(ee),be=ve.getTileCoordExtent(ye),Qe=ye[0],Xe=ve.getResolution(Qe);buffer$1(be,-Xe,be);const Je=this.tileGrid,tt=Je.getExtent();tt&&getIntersection(be,tt,be);const it=Je.getZForResolution(Xe,this.zDirection);Je.forEachTileCoord(be,it,st=>{const lt=this.tileUrlFunction(st,Z,ee),ct=this.sourceTileCache.containsKey(lt)?this.sourceTileCache.get(lt):new this.tileClass(st,lt?TileState.IDLE:TileState.EMPTY,lt,this.format_,this.tileLoadFunction);ae.sourceTiles.push(ct);const gt=ct.getState();if(gt<TileState.LOADED){const ut=mt=>{this.handleTileChange(mt);const ei=ct.getState();if(ei===TileState.LOADED||ei===TileState.ERROR){const ni=ct.getKey();ni in ae.errorTileKeys?ct.getState()===TileState.LOADED&&delete ae.errorTileKeys[ni]:ae.loadingSourceTiles--,ei===TileState.ERROR?ae.errorTileKeys[ni]=!0:ct.removeEventListener(EventType.CHANGE,ut),ae.loadingSourceTiles===0&&ae.setState(isEmpty$1(ae.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};ct.addEventListener(EventType.CHANGE,ut),ae.loadingSourceTiles++}gt===TileState.IDLE&&(ct.extent=Je.getTileCoordExtent(st),ct.projection=ee,ct.resolution=Je.getResolution(st[0]),this.sourceTileCache.set(lt,ct),ct.load())}),ae.loadingSourceTiles||ae.setState(ae.sourceTiles.some(st=>st.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return ae.sourceTiles}getTile(Z,ee,ae,ye,ve){const be=getKeyZXY(Z,ee,ae),Qe=this.getKey();let Xe;if(this.tileCache.containsKey(be)&&(Xe=this.tileCache.get(be),Xe.key===Qe))return Xe;const Je=[Z,ee,ae];let tt=this.getTileCoordForTileUrlFunction(Je,ve);const it=this.getTileGrid().getExtent(),st=this.getTileGridForProjection(ve);if(tt&&it){const gt=st.getTileCoordExtent(tt);buffer$1(gt,-st.getResolution(Z),gt),intersects$1(it,gt)||(tt=null)}let lt=!0;if(tt!==null){const gt=this.tileGrid,ut=st.getResolution(Z),mt=gt.getZForResolution(ut,1),ei=st.getTileCoordExtent(tt);buffer$1(ei,-ut,ei),gt.forEachTileCoord(ei,mt,ni=>{lt=lt&&!this.tileUrlFunction(ni,ye,ve)})}const ct=new VectorRenderTile(Je,lt?TileState.EMPTY:TileState.IDLE,tt,this.getSourceTiles.bind(this,ye,ve));return ct.key=Qe,Xe?(ct.interimTile=Xe,ct.refreshInterimChain(),this.tileCache.replace(be,ct)):this.tileCache.set(be,ct),ct}getTileGridForProjection(Z){const ee=Z.getCode();let ae=this.tileGrids_[ee];if(!ae){const ye=this.tileGrid,ve=ye.getResolutions().slice(),be=ve.map(function(Je,tt){return ye.getOrigin(tt)}),Qe=ve.map(function(Je,tt){return ye.getTileSize(tt)}),Xe=DEFAULT_MAX_ZOOM+1;for(let Je=ve.length;Je<Xe;++Je)ve.push(ve[Je-1]/2),be.push(be[Je-1]),Qe.push(Qe[Je-1]);ae=new TileGrid({extent:ye.getExtent(),origins:be,resolutions:ve,tileSizes:Qe}),this.tileGrids_[ee]=ae}return ae}getTilePixelRatio(Z){return Z}getTilePixelSize(Z,ee,ae){const ye=this.getTileGridForProjection(ae),ve=toSize(ye.getTileSize(Z),this.tmpSize);return[Math.round(ve[0]*ee),Math.round(ve[1]*ee)]}updateCacheSize(Z,ee){super.updateCacheSize(Z*2,ee),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(ee).highWaterMark}}function defaultLoadFunction(ie,Z){ie.setLoader(function(ee,ae,ye){loadFeaturesXhr(Z,ie.getFormat(),ee,ae,ye,ie.onLoad.bind(ie),ie.onError.bind(ie))})}var ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$1.read=function(ie,Z,ee,ae,ye){var ve,be,Qe=ye*8-ae-1,Xe=(1<<Qe)-1,Je=Xe>>1,tt=-7,it=ee?ye-1:0,st=ee?-1:1,lt=ie[Z+it];for(it+=st,ve=lt&(1<<-tt)-1,lt>>=-tt,tt+=Qe;tt>0;ve=ve*256+ie[Z+it],it+=st,tt-=8);for(be=ve&(1<<-tt)-1,ve>>=-tt,tt+=ae;tt>0;be=be*256+ie[Z+it],it+=st,tt-=8);if(ve===0)ve=1-Je;else{if(ve===Xe)return be?NaN:(lt?-1:1)*(1/0);be=be+Math.pow(2,ae),ve=ve-Je}return(lt?-1:1)*be*Math.pow(2,ve-ae)},ieee754$1.write=function(ie,Z,ee,ae,ye,ve){var be,Qe,Xe,Je=ve*8-ye-1,tt=(1<<Je)-1,it=tt>>1,st=ye===23?Math.pow(2,-24)-Math.pow(2,-77):0,lt=ae?0:ve-1,ct=ae?1:-1,gt=Z<0||Z===0&&1/Z<0?1:0;for(Z=Math.abs(Z),isNaN(Z)||Z===1/0?(Qe=isNaN(Z)?1:0,be=tt):(be=Math.floor(Math.log(Z)/Math.LN2),Z*(Xe=Math.pow(2,-be))<1&&(be--,Xe*=2),be+it>=1?Z+=st/Xe:Z+=st*Math.pow(2,1-it),Z*Xe>=2&&(be++,Xe/=2),be+it>=tt?(Qe=0,be=tt):be+it>=1?(Qe=(Z*Xe-1)*Math.pow(2,ye),be=be+it):(Qe=Z*Math.pow(2,it-1)*Math.pow(2,ye),be=0));ye>=8;ie[ee+lt]=Qe&255,lt+=ct,Qe/=256,ye-=8);for(be=be<<ye|Qe,Je+=ye;Je>0;ie[ee+lt]=be&255,lt+=ct,be/=256,Je-=8);ie[ee+lt-ct]|=gt*128};var pbf=Pbf,ieee754=ieee754$1;function Pbf(ie){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ie)?ie:new Uint8Array(ie||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Pbf.prototype={destroy:function(){this.buf=null},readFields:function(ie,Z,ee){for(ee=ee||this.length;this.pos<ee;){var ae=this.readVarint(),ye=ae>>3,ve=this.pos;this.type=ae&7,ie(ye,Z,this),this.pos===ve&&this.skip(ae)}return Z},readMessage:function(ie,Z){return this.readFields(ie,Z,this.readVarint()+this.pos)},readFixed32:function(){var ie=readUInt32(this.buf,this.pos);return this.pos+=4,ie},readSFixed32:function(){var ie=readInt32(this.buf,this.pos);return this.pos+=4,ie},readFixed64:function(){var ie=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,ie},readSFixed64:function(){var ie=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,ie},readFloat:function(){var ie=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ie},readDouble:function(){var ie=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ie},readVarint:function(ie){var Z=this.buf,ee,ae;return ae=Z[this.pos++],ee=ae&127,ae<128||(ae=Z[this.pos++],ee|=(ae&127)<<7,ae<128)||(ae=Z[this.pos++],ee|=(ae&127)<<14,ae<128)||(ae=Z[this.pos++],ee|=(ae&127)<<21,ae<128)?ee:(ae=Z[this.pos],ee|=(ae&15)<<28,readVarintRemainder$1(ee,ie,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ie=this.readVarint();return ie%2===1?(ie+1)/-2:ie/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ie=this.readVarint()+this.pos,Z=this.pos;return this.pos=ie,ie-Z>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?readUtf8TextDecoder(this.buf,Z,ie):readUtf8(this.buf,Z,ie)},readBytes:function(){var ie=this.readVarint()+this.pos,Z=this.buf.subarray(this.pos,ie);return this.pos=ie,Z},readPackedVarint:function(ie,Z){if(this.type!==Pbf.Bytes)return ie.push(this.readVarint(Z));var ee=readPackedEnd(this);for(ie=ie||[];this.pos<ee;)ie.push(this.readVarint(Z));return ie},readPackedSVarint:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readSVarint());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readSVarint());return ie},readPackedBoolean:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readBoolean());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readBoolean());return ie},readPackedFloat:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readFloat());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readFloat());return ie},readPackedDouble:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readDouble());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readDouble());return ie},readPackedFixed32:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readFixed32());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readFixed32());return ie},readPackedSFixed32:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readSFixed32());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readSFixed32());return ie},readPackedFixed64:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readFixed64());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readFixed64());return ie},readPackedSFixed64:function(ie){if(this.type!==Pbf.Bytes)return ie.push(this.readSFixed64());var Z=readPackedEnd(this);for(ie=ie||[];this.pos<Z;)ie.push(this.readSFixed64());return ie},skip:function(ie){var Z=ie&7;if(Z===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(Z===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(Z===Pbf.Fixed32)this.pos+=4;else if(Z===Pbf.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+Z)},writeTag:function(ie,Z){this.writeVarint(ie<<3|Z)},realloc:function(ie){for(var Z=this.length||16;Z<this.pos+ie;)Z*=2;if(Z!==this.length){var ee=new Uint8Array(Z);ee.set(this.buf),this.buf=ee,this.length=Z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ie){this.realloc(4),writeInt32(this.buf,ie,this.pos),this.pos+=4},writeSFixed32:function(ie){this.realloc(4),writeInt32(this.buf,ie,this.pos),this.pos+=4},writeFixed64:function(ie){this.realloc(8),writeInt32(this.buf,ie&-1,this.pos),writeInt32(this.buf,Math.floor(ie*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(ie){this.realloc(8),writeInt32(this.buf,ie&-1,this.pos),writeInt32(this.buf,Math.floor(ie*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(ie){if(ie=+ie||0,ie>268435455||ie<0){writeBigVarint(ie,this);return}this.realloc(4),this.buf[this.pos++]=ie&127|(ie>127?128:0),!(ie<=127)&&(this.buf[this.pos++]=(ie>>>=7)&127|(ie>127?128:0),!(ie<=127)&&(this.buf[this.pos++]=(ie>>>=7)&127|(ie>127?128:0),!(ie<=127)&&(this.buf[this.pos++]=ie>>>7&127)))},writeSVarint:function(ie){this.writeVarint(ie<0?-ie*2-1:ie*2)},writeBoolean:function(ie){this.writeVarint(!!ie)},writeString:function(ie){ie=String(ie),this.realloc(ie.length*4),this.pos++;var Z=this.pos;this.pos=writeUtf8(this.buf,ie,this.pos);var ee=this.pos-Z;ee>=128&&makeRoomForExtraLength(Z,ee,this),this.pos=Z-1,this.writeVarint(ee),this.pos+=ee},writeFloat:function(ie){this.realloc(4),ieee754.write(this.buf,ie,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ie){this.realloc(8),ieee754.write(this.buf,ie,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ie){var Z=ie.length;this.writeVarint(Z),this.realloc(Z);for(var ee=0;ee<Z;ee++)this.buf[this.pos++]=ie[ee]},writeRawMessage:function(ie,Z){this.pos++;var ee=this.pos;ie(Z,this);var ae=this.pos-ee;ae>=128&&makeRoomForExtraLength(ee,ae,this),this.pos=ee-1,this.writeVarint(ae),this.pos+=ae},writeMessage:function(ie,Z,ee){this.writeTag(ie,Pbf.Bytes),this.writeRawMessage(Z,ee)},writePackedVarint:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedVarint,Z)},writePackedSVarint:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedSVarint,Z)},writePackedBoolean:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedBoolean,Z)},writePackedFloat:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedFloat,Z)},writePackedDouble:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedDouble,Z)},writePackedFixed32:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedFixed32,Z)},writePackedSFixed32:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedSFixed32,Z)},writePackedFixed64:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedFixed64,Z)},writePackedSFixed64:function(ie,Z){Z.length&&this.writeMessage(ie,writePackedSFixed64,Z)},writeBytesField:function(ie,Z){this.writeTag(ie,Pbf.Bytes),this.writeBytes(Z)},writeFixed32Field:function(ie,Z){this.writeTag(ie,Pbf.Fixed32),this.writeFixed32(Z)},writeSFixed32Field:function(ie,Z){this.writeTag(ie,Pbf.Fixed32),this.writeSFixed32(Z)},writeFixed64Field:function(ie,Z){this.writeTag(ie,Pbf.Fixed64),this.writeFixed64(Z)},writeSFixed64Field:function(ie,Z){this.writeTag(ie,Pbf.Fixed64),this.writeSFixed64(Z)},writeVarintField:function(ie,Z){this.writeTag(ie,Pbf.Varint),this.writeVarint(Z)},writeSVarintField:function(ie,Z){this.writeTag(ie,Pbf.Varint),this.writeSVarint(Z)},writeStringField:function(ie,Z){this.writeTag(ie,Pbf.Bytes),this.writeString(Z)},writeFloatField:function(ie,Z){this.writeTag(ie,Pbf.Fixed32),this.writeFloat(Z)},writeDoubleField:function(ie,Z){this.writeTag(ie,Pbf.Fixed64),this.writeDouble(Z)},writeBooleanField:function(ie,Z){this.writeVarintField(ie,!!Z)}};function readVarintRemainder$1(ie,Z,ee){var ae=ee.buf,ye,ve;if(ve=ae[ee.pos++],ye=(ve&112)>>4,ve<128||(ve=ae[ee.pos++],ye|=(ve&127)<<3,ve<128)||(ve=ae[ee.pos++],ye|=(ve&127)<<10,ve<128)||(ve=ae[ee.pos++],ye|=(ve&127)<<17,ve<128)||(ve=ae[ee.pos++],ye|=(ve&127)<<24,ve<128)||(ve=ae[ee.pos++],ye|=(ve&1)<<31,ve<128))return toNum$1(ie,ye,Z);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(ie){return ie.type===Pbf.Bytes?ie.readVarint()+ie.pos:ie.pos+1}function toNum$1(ie,Z,ee){return ee?Z*4294967296+(ie>>>0):(Z>>>0)*4294967296+(ie>>>0)}function writeBigVarint(ie,Z){var ee,ae;if(ie>=0?(ee=ie%4294967296|0,ae=ie/4294967296|0):(ee=~(-ie%4294967296),ae=~(-ie/4294967296),ee^4294967295?ee=ee+1|0:(ee=0,ae=ae+1|0)),ie>=18446744073709552e3||ie<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),writeBigVarintLow(ee,ae,Z),writeBigVarintHigh(ae,Z)}function writeBigVarintLow(ie,Z,ee){ee.buf[ee.pos++]=ie&127|128,ie>>>=7,ee.buf[ee.pos++]=ie&127|128,ie>>>=7,ee.buf[ee.pos++]=ie&127|128,ie>>>=7,ee.buf[ee.pos++]=ie&127|128,ie>>>=7,ee.buf[ee.pos]=ie&127}function writeBigVarintHigh(ie,Z){var ee=(ie&7)<<4;Z.buf[Z.pos++]|=ee|((ie>>>=3)?128:0),ie&&(Z.buf[Z.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(Z.buf[Z.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(Z.buf[Z.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(Z.buf[Z.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(Z.buf[Z.pos++]=ie&127)))))}function makeRoomForExtraLength(ie,Z,ee){var ae=Z<=16383?1:Z<=2097151?2:Z<=268435455?3:Math.floor(Math.log(Z)/(Math.LN2*7));ee.realloc(ae);for(var ye=ee.pos-1;ye>=ie;ye--)ee.buf[ye+ae]=ee.buf[ye]}function writePackedVarint(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeVarint(ie[ee])}function writePackedSVarint(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeSVarint(ie[ee])}function writePackedFloat(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeFloat(ie[ee])}function writePackedDouble(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeDouble(ie[ee])}function writePackedBoolean(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeBoolean(ie[ee])}function writePackedFixed32(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeFixed32(ie[ee])}function writePackedSFixed32(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeSFixed32(ie[ee])}function writePackedFixed64(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeFixed64(ie[ee])}function writePackedSFixed64(ie,Z){for(var ee=0;ee<ie.length;ee++)Z.writeSFixed64(ie[ee])}function readUInt32(ie,Z){return(ie[Z]|ie[Z+1]<<8|ie[Z+2]<<16)+ie[Z+3]*16777216}function writeInt32(ie,Z,ee){ie[ee]=Z,ie[ee+1]=Z>>>8,ie[ee+2]=Z>>>16,ie[ee+3]=Z>>>24}function readInt32(ie,Z){return(ie[Z]|ie[Z+1]<<8|ie[Z+2]<<16)+(ie[Z+3]<<24)}function readUtf8(ie,Z,ee){for(var ae="",ye=Z;ye<ee;){var ve=ie[ye],be=null,Qe=ve>239?4:ve>223?3:ve>191?2:1;if(ye+Qe>ee)break;var Xe,Je,tt;Qe===1?ve<128&&(be=ve):Qe===2?(Xe=ie[ye+1],(Xe&192)===128&&(be=(ve&31)<<6|Xe&63,be<=127&&(be=null))):Qe===3?(Xe=ie[ye+1],Je=ie[ye+2],(Xe&192)===128&&(Je&192)===128&&(be=(ve&15)<<12|(Xe&63)<<6|Je&63,(be<=2047||be>=55296&&be<=57343)&&(be=null))):Qe===4&&(Xe=ie[ye+1],Je=ie[ye+2],tt=ie[ye+3],(Xe&192)===128&&(Je&192)===128&&(tt&192)===128&&(be=(ve&15)<<18|(Xe&63)<<12|(Je&63)<<6|tt&63,(be<=65535||be>=1114112)&&(be=null))),be===null?(be=65533,Qe=1):be>65535&&(be-=65536,ae+=String.fromCharCode(be>>>10&1023|55296),be=56320|be&1023),ae+=String.fromCharCode(be),ye+=Qe}return ae}function readUtf8TextDecoder(ie,Z,ee){return utf8TextDecoder.decode(ie.subarray(Z,ee))}function writeUtf8(ie,Z,ee){for(var ae=0,ye,ve;ae<Z.length;ae++){if(ye=Z.charCodeAt(ae),ye>55295&&ye<57344)if(ve)if(ye<56320){ie[ee++]=239,ie[ee++]=191,ie[ee++]=189,ve=ye;continue}else ye=ve-55296<<10|ye-56320|65536,ve=null;else{ye>56319||ae+1===Z.length?(ie[ee++]=239,ie[ee++]=191,ie[ee++]=189):ve=ye;continue}else ve&&(ie[ee++]=239,ie[ee++]=191,ie[ee++]=189,ve=null);ye<128?ie[ee++]=ye:(ye<2048?ie[ee++]=ye>>6|192:(ye<65536?ie[ee++]=ye>>12|224:(ie[ee++]=ye>>18|240,ie[ee++]=ye>>12&63|128),ie[ee++]=ye>>6&63|128),ie[ee++]=ye&63|128)}return ee}const PBF=getDefaultExportFromCjs$1(pbf),tmpTransform=create$3();class RenderFeature{constructor(Z,ee,ae,ye,ve){this.styleFunction,this.extent_,this.id_=ve,this.type_=Z,this.flatCoordinates_=ee,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=ae,this.properties_=ye}get(Z){return this.properties_[Z]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const Z=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,Z,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const Z=linearRingss(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,this.ends_,2,Z)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const Z=this.flatCoordinates_;let ee=0;const ae=this.ends_;for(let ye=0,ve=ae.length;ye<ve;++ye){const be=ae[ye],Qe=interpolatePoint(Z,ee,be,2,.5);extend$2(this.flatMidpoints_,Qe),ee=be}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(Z){return this}simplifyTransformed(Z,ee){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(Z){Z=get$1(Z);const ee=Z.getExtent(),ae=Z.getWorldExtent();if(ee&&ae){const ye=getHeight(ae)/getHeight(ee);compose$1(tmpTransform,ae[0],ae[3],ye,-ye,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}getEnds(){return this.ends_}}RenderFeature.prototype.getEndss=RenderFeature.prototype.getEnds,RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;class MVT extends FeatureFormat{constructor(Z){super(),Z=Z||{},this.dataProjection=new Projection({code:"",units:"tile-pixels"}),this.featureClass_=Z.featureClass?Z.featureClass:RenderFeature,this.geometryName_=Z.geometryName,this.layerName_=Z.layerName?Z.layerName:"layer",this.layers_=Z.layers?Z.layers:null,this.idProperty_=Z.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(Z,ee,ae,ye){Z.pos=ee.geometry;const ve=Z.readVarint()+Z.pos;let be=1,Qe=0,Xe=0,Je=0,tt=0,it=0;for(;Z.pos<ve;){if(!Qe){const st=Z.readVarint();be=st&7,Qe=st>>3}if(Qe--,be===1||be===2)Xe+=Z.readSVarint(),Je+=Z.readSVarint(),be===1&&tt>it&&(ye.push(tt),it=tt),ae.push(Xe,Je),tt+=2;else if(be===7)tt>it&&(ae.push(ae[it],ae[it+1]),tt+=2);else throw new Error("Invalid command found in the PBF")}tt>it&&(ye.push(tt),it=tt)}createFeature_(Z,ee,ae){const ye=ee.type;if(ye===0)return null;let ve;const be=ee.properties;let Qe;this.idProperty_?(Qe=be[this.idProperty_],delete be[this.idProperty_]):Qe=ee.id,be[this.layerName_]=ee.layer.name;const Xe=[],Je=[];this.readRawGeometry_(Z,ee,Xe,Je);const tt=getGeometryType(ye,Je.length);if(this.featureClass_===RenderFeature)ve=new this.featureClass_(tt,Xe,Je,be,Qe),ve.transform(ae.dataProjection);else{let it;if(tt=="Polygon"){const ct=inflateEnds(Xe,Je);it=ct.length>1?new MultiPolygon$1(Xe,"XY",ct):new Polygon$1(Xe,"XY",Je)}else it=tt==="Point"?new Point$1(Xe,"XY"):tt==="LineString"?new LineString$1(Xe,"XY"):tt==="MultiPoint"?new MultiPoint$1(Xe,"XY"):tt==="MultiLineString"?new MultiLineString$1(Xe,"XY",Je):null;const st=this.featureClass_;ve=new st,this.geometryName_&&ve.setGeometryName(this.geometryName_);const lt=transformGeometryWithOptions(it,!1,ae);ve.setGeometry(lt),Qe!==void 0&&ve.setId(Qe),ve.setProperties(be,!0)}return ve}getType(){return"arraybuffer"}readFeatures(Z,ee){const ae=this.layers_;ee=this.adaptOptions(ee);const ye=get$1(ee.dataProjection);ye.setWorldExtent(ee.extent),ee.dataProjection=ye;const ve=new PBF(Z),be=ve.readFields(layersPBFReader,{}),Qe=[];for(const Xe in be){if(ae&&!ae.includes(Xe))continue;const Je=be[Xe],tt=Je?[0,0,Je.extent,Je.extent]:null;ye.setExtent(tt);for(let it=0,st=Je.length;it<st;++it){const lt=readRawFeature(ve,Je,it),ct=this.createFeature_(ve,lt,ee);ct!==null&&Qe.push(ct)}}return Qe}readProjection(Z){return this.dataProjection}setLayers(Z){this.layers_=Z}}function layersPBFReader(ie,Z,ee){if(ie===3){const ae={keys:[],values:[],features:[]},ye=ee.readVarint()+ee.pos;ee.readFields(layerPBFReader,ae,ye),ae.length=ae.features.length,ae.length&&(Z[ae.name]=ae)}}function layerPBFReader(ie,Z,ee){if(ie===15)Z.version=ee.readVarint();else if(ie===1)Z.name=ee.readString();else if(ie===5)Z.extent=ee.readVarint();else if(ie===2)Z.features.push(ee.pos);else if(ie===3)Z.keys.push(ee.readString());else if(ie===4){let ae=null;const ye=ee.readVarint()+ee.pos;for(;ee.pos<ye;)ie=ee.readVarint()>>3,ae=ie===1?ee.readString():ie===2?ee.readFloat():ie===3?ee.readDouble():ie===4?ee.readVarint64():ie===5?ee.readVarint():ie===6?ee.readSVarint():ie===7?ee.readBoolean():null;Z.values.push(ae)}}function featurePBFReader(ie,Z,ee){if(ie==1)Z.id=ee.readVarint();else if(ie==2){const ae=ee.readVarint()+ee.pos;for(;ee.pos<ae;){const ye=Z.layer.keys[ee.readVarint()],ve=Z.layer.values[ee.readVarint()];Z.properties[ye]=ve}}else ie==3?Z.type=ee.readVarint():ie==4&&(Z.geometry=ee.pos)}function readRawFeature(ie,Z,ee){ie.pos=Z.features[ee];const ae=ie.readVarint()+ie.pos,ye={layer:Z,type:0,properties:{}};return ie.readFields(featurePBFReader,ye,ae),ye}function getGeometryType(ie,Z){let ee;return ie===1?ee=Z===1?"Point":"MultiPoint":ie===2?ee=Z===1?"LineString":"MultiLineString":ie===3&&(ee="Polygon"),ee}var __async=(ie,Z,ee)=>new Promise((ae,ye)=>{var ve=Xe=>{try{Qe(ee.next(Xe))}catch(Je){ye(Je)}},be=Xe=>{try{Qe(ee.throw(Xe))}catch(Je){ye(Je)}},Qe=Xe=>Xe.done?ae(Xe.value):Promise.resolve(Xe.value).then(ve,be);Qe((ee=ee.apply(ie,Z)).next())}),u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(ie,Z){for(var ee=new u16(31),ae=0;ae<31;++ae)ee[ae]=Z+=1<<ie[ae-1];for(var ye=new i32(ee[30]),ae=1;ae<30;++ae)for(var ve=ee[ae];ve<ee[ae+1];++ve)ye[ve]=ve-ee[ae]<<5|ae;return{b:ee,r:ye}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,rev=new u16(32768);for(i$2=0;i$2<32768;++i$2)x$2=(i$2&43690)>>1|(i$2&21845)<<1,x$2=(x$2&52428)>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>4|(x$2&3855)<<4,rev[i$2]=((x$2&65280)>>8|(x$2&255)<<8)>>1;var x$2,i$2,hMap=function(ie,Z,ee){for(var ae=ie.length,ye=0,ve=new u16(Z);ye<ae;++ye)ie[ye]&&++ve[ie[ye]-1];var be=new u16(Z);for(ye=1;ye<Z;++ye)be[ye]=be[ye-1]+ve[ye-1]<<1;var Qe;if(ee){Qe=new u16(1<<Z);var Xe=15-Z;for(ye=0;ye<ae;++ye)if(ie[ye])for(var Je=ye<<4|ie[ye],tt=Z-ie[ye],it=be[ie[ye]-1]++<<tt,st=it|(1<<tt)-1;it<=st;++it)Qe[rev[it]>>Xe]=Je}else for(Qe=new u16(ae),ye=0;ye<ae;++ye)ie[ye]&&(Qe[ye]=rev[be[ie[ye]-1]++]>>15-ie[ye]);return Qe},flt=new u8(288);for(i$2=0;i$2<144;++i$2)flt[i$2]=8;var i$2;for(i$2=144;i$2<256;++i$2)flt[i$2]=9;var i$2;for(i$2=256;i$2<280;++i$2)flt[i$2]=7;var i$2;for(i$2=280;i$2<288;++i$2)flt[i$2]=8;var i$2,fdt=new u8(32);for(i$2=0;i$2<32;++i$2)fdt[i$2]=5;var i$2,flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max$1=function(ie){for(var Z=ie[0],ee=1;ee<ie.length;++ee)ie[ee]>Z&&(Z=ie[ee]);return Z},bits=function(ie,Z,ee){var ae=Z/8|0;return(ie[ae]|ie[ae+1]<<8)>>(Z&7)&ee},bits16=function(ie,Z){var ee=Z/8|0;return(ie[ee]|ie[ee+1]<<8|ie[ee+2]<<16)>>(Z&7)},shft=function(ie){return(ie+7)/8|0},slc=function(ie,Z,ee){(Z==null||Z<0)&&(Z=0),(ee==null||ee>ie.length)&&(ee=ie.length);var ae=new u8(ee-Z);return ae.set(ie.subarray(Z,ee)),ae},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err$1=function(ie,Z,ee){var ae=new Error(Z||ec[ie]);if(ae.code=ie,Error.captureStackTrace&&Error.captureStackTrace(ae,err$1),!ee)throw ae;return ae},inflt=function(ie,Z,ee,ae){var ye=ie.length,ve=ae?ae.length:0;if(!ye||Z.f&&!Z.l)return ee||new u8(0);var be=!ee||Z.i!=2,Qe=Z.i;ee||(ee=new u8(ye*3));var Xe=function(Is){var _s=ee.length;if(Is>_s){var ws=new u8(Math.max(_s*2,Is));ws.set(ee),ee=ws}},Je=Z.f||0,tt=Z.p||0,it=Z.b||0,st=Z.l,lt=Z.d,ct=Z.m,gt=Z.n,ut=ye*8;do{if(!st){Je=bits(ie,tt,1);var mt=bits(ie,tt+1,3);if(tt+=3,mt)if(mt==1)st=flrm,lt=fdrm,ct=9,gt=5;else if(mt==2){var si=bits(ie,tt,31)+257,li=bits(ie,tt+10,15)+4,ai=si+bits(ie,tt+5,31)+1;tt+=14;for(var ci=new u8(ai),Ci=new u8(19),pi=0;pi<li;++pi)Ci[clim[pi]]=bits(ie,tt+pi*3,7);tt+=li*3;for(var gi=max$1(Ci),_i=(1<<gi)-1,bi=hMap(Ci,gi,1),pi=0;pi<ai;){var Mi=bi[bits(ie,tt,_i)];tt+=Mi&15;var ei=Mi>>4;if(ei<16)ci[pi++]=ei;else{var yi=0,Ti=0;for(ei==16?(Ti=3+bits(ie,tt,3),tt+=2,yi=ci[pi-1]):ei==17?(Ti=3+bits(ie,tt,7),tt+=3):ei==18&&(Ti=11+bits(ie,tt,127),tt+=7);Ti--;)ci[pi++]=yi}}var Ii=ci.subarray(0,si),Ri=ci.subarray(si);ct=max$1(Ii),gt=max$1(Ri),st=hMap(Ii,ct,1),lt=hMap(Ri,gt,1)}else err$1(1);else{var ei=shft(tt)+4,ni=ie[ei-4]|ie[ei-3]<<8,ri=ei+ni;if(ri>ye){Qe&&err$1(0);break}be&&Xe(it+ni),ee.set(ie.subarray(ei,ri),it),Z.b=it+=ni,Z.p=tt=ri*8,Z.f=Je;continue}if(tt>ut){Qe&&err$1(0);break}}be&&Xe(it+131072);for(var Pi=(1<<ct)-1,xi=(1<<gt)-1,ki=tt;;ki=tt){var yi=st[bits16(ie,tt)&Pi],Li=yi>>4;if(tt+=yi&15,tt>ut){Qe&&err$1(0);break}if(yi||err$1(2),Li<256)ee[it++]=Li;else if(Li==256){ki=tt,st=null;break}else{var Yr=Li-254;if(Li>264){var pi=Li-257,Ui=fleb[pi];Yr=bits(ie,tt,(1<<Ui)-1)+fl[pi],tt+=Ui}var Vi=lt[bits16(ie,tt)&xi],Kr=Vi>>4;Vi||err$1(3),tt+=Vi&15;var Ri=fd[Kr];if(Kr>3){var Ui=fdeb[Kr];Ri+=bits16(ie,tt)&(1<<Ui)-1,tt+=Ui}if(tt>ut){Qe&&err$1(0);break}be&&Xe(it+131072);var Wi=it+Yr;if(it<Ri){var Zr=ve-Ri,ps=Math.min(Ri,Wi);for(Zr+it<0&&err$1(3);it<ps;++it)ee[it]=ae[Zr+it]}for(;it<Wi;it+=4)ee[it]=ee[it-Ri],ee[it+1]=ee[it+1-Ri],ee[it+2]=ee[it+2-Ri],ee[it+3]=ee[it+3-Ri];it=Wi}}Z.l=st,Z.p=ki,Z.b=it,Z.f=Je,st&&(Je=1,Z.m=ct,Z.d=lt,Z.n=gt)}while(!Je);return it==ee.length?ee:slc(ee,0,it)},et=new u8(0),gzs=function(ie){(ie[0]!=31||ie[1]!=139||ie[2]!=8)&&err$1(6,"invalid gzip data");var Z=ie[3],ee=10;Z&4&&(ee+=(ie[10]|ie[11]<<8)+2);for(var ae=(Z>>3&1)+(Z>>4&1);ae>0;ae-=!ie[ee++]);return ee+(Z&2)},gzl=function(ie){var Z=ie.length;return(ie[Z-4]|ie[Z-3]<<8|ie[Z-2]<<16|ie[Z-1]<<24)>>>0},zls=function(ie,Z){return((ie[0]&15)!=8||ie[0]>>4>7||(ie[0]<<8|ie[1])%31)&&err$1(6,"invalid zlib data"),(ie[1]>>5&1)==+!Z&&err$1(6,"invalid zlib data: "+(ie[1]&32?"need":"unexpected")+" dictionary"),(ie[1]>>3&4)+2};function inflateSync(ie,Z){return inflt(ie,{i:2},Z&&Z.out,Z&&Z.dictionary)}function gunzipSync(ie,Z){var ee=gzs(ie);return ee+8>ie.length&&err$1(6,"invalid gzip data"),inflt(ie.subarray(ee,-8),{i:2},Z&&Z.out||new u8(gzl(ie)),Z&&Z.dictionary)}function unzlibSync(ie,Z){return inflt(ie.subarray(zls(ie,Z&&Z.dictionary),-4),{i:2},Z&&Z.out,Z&&Z.dictionary)}function decompressSync(ie,Z){return ie[0]==31&&ie[1]==139&&ie[2]==8?gunzipSync(ie,Z):(ie[0]&15)!=8||ie[0]>>4>7||(ie[0]<<8|ie[1])%31?inflateSync(ie,Z):unzlibSync(ie,Z)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(ie){}var shift$2=(ie,Z)=>ie*Math.pow(2,Z),unshift=(ie,Z)=>Math.floor(ie/Math.pow(2,Z)),getUint24=(ie,Z)=>shift$2(ie.getUint16(Z+1,!0),8)+ie.getUint8(Z),getUint48=(ie,Z)=>shift$2(ie.getUint32(Z+2,!0),16)+ie.getUint16(Z,!0),compare=(ie,Z,ee,ae,ye)=>{if(ie!=ae.getUint8(ye))return ie-ae.getUint8(ye);const ve=getUint24(ae,ye+1);if(Z!=ve)return Z-ve;const be=getUint24(ae,ye+4);return ee!=be?ee-be:0},queryLeafdir=(ie,Z,ee,ae)=>{const ye=queryView(ie,Z|128,ee,ae);return ye?{z:Z,x:ee,y:ae,offset:ye[0],length:ye[1],is_dir:!0}:null},queryTile=(ie,Z,ee,ae)=>{const ye=queryView(ie,Z,ee,ae);return ye?{z:Z,x:ee,y:ae,offset:ye[0],length:ye[1],is_dir:!1}:null},queryView=(ie,Z,ee,ae)=>{let ye=0,ve=ie.byteLength/17-1;for(;ye<=ve;){const be=ve+ye>>1,Qe=compare(Z,ee,ae,ie,be*17);if(Qe>0)ye=be+1;else if(Qe<0)ve=be-1;else return[getUint48(ie,be*17+7),ie.getUint32(be*17+13,!0)]}return null},entrySort=(ie,Z)=>ie.is_dir&&!Z.is_dir?1:!ie.is_dir&&Z.is_dir?-1:ie.z!==Z.z?ie.z-Z.z:ie.x!==Z.x?ie.x-Z.x:ie.y-Z.y,parseEntry=(ie,Z)=>{const ee=ie.getUint8(Z*17);return{z:ee&127,x:getUint24(ie,Z*17+1),y:getUint24(ie,Z*17+4),offset:getUint48(ie,Z*17+7),length:ie.getUint32(Z*17+13,!0),is_dir:ee>>7===1}},sortDir=ie=>{const Z=[],ee=new DataView(ie);for(let ae=0;ae<ee.byteLength/17;ae++)Z.push(parseEntry(ee,ae));return createDirectory(Z)},createDirectory=ie=>{ie.sort(entrySort);const Z=new ArrayBuffer(17*ie.length),ee=new Uint8Array(Z);for(let ae=0;ae<ie.length;ae++){const ye=ie[ae];let ve=ye.z;ye.is_dir&&(ve=ve|128),ee[ae*17]=ve,ee[ae*17+1]=ye.x&255,ee[ae*17+2]=ye.x>>8&255,ee[ae*17+3]=ye.x>>16&255,ee[ae*17+4]=ye.y&255,ee[ae*17+5]=ye.y>>8&255,ee[ae*17+6]=ye.y>>16&255,ee[ae*17+7]=ye.offset&255,ee[ae*17+8]=unshift(ye.offset,8)&255,ee[ae*17+9]=unshift(ye.offset,16)&255,ee[ae*17+10]=unshift(ye.offset,24)&255,ee[ae*17+11]=unshift(ye.offset,32)&255,ee[ae*17+12]=unshift(ye.offset,48)&255,ee[ae*17+13]=ye.length&255,ee[ae*17+14]=ye.length>>8&255,ee[ae*17+15]=ye.length>>16&255,ee[ae*17+16]=ye.length>>24&255}return Z},deriveLeaf=(ie,Z)=>{if(ie.byteLength<17)return null;const ee=ie.byteLength/17,ae=parseEntry(ie,ee-1);if(ae.is_dir){const ye=ae.z,ve=Z.z-ye,be=Math.trunc(Z.x/(1<<ve)),Qe=Math.trunc(Z.y/(1<<ve));return{z:ye,x:be,y:Qe}}return null};function getHeader(ie){return __async(this,null,function*(){const Z=yield ie.getBytes(0,512e3),ee=new DataView(Z.data),ae=ee.getUint32(4,!0),ye=ee.getUint16(8,!0),ve=new TextDecoder("utf-8"),be=JSON.parse(ve.decode(new DataView(Z.data,10,ae)));let Qe=0;be.compression==="gzip"&&(Qe=2);let Xe=0;"minzoom"in be&&(Xe=+be.minzoom);let Je=0;"maxzoom"in be&&(Je=+be.maxzoom);let tt=0,it=0,st=0,lt=-180,ct=-85,gt=180,ut=85;if(be.bounds){const ei=be.bounds.split(",");lt=+ei[0],ct=+ei[1],gt=+ei[2],ut=+ei[3]}if(be.center){const ei=be.center.split(",");tt=+ei[0],it=+ei[1],st=+ei[2]}return{specVersion:ee.getUint16(2,!0),rootDirectoryOffset:10+ae,rootDirectoryLength:ye*17,jsonMetadataOffset:10,jsonMetadataLength:ae,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:Qe,tileType:1,minZoom:Xe,maxZoom:Je,minLon:lt,minLat:ct,maxLon:gt,maxLat:ut,centerZoom:st,centerLon:tt,centerLat:it,etag:Z.etag}})}function getZxy(ie,Z,ee,ae,ye,ve,be){return __async(this,null,function*(){let Qe=yield ee.getArrayBuffer(Z,ie.rootDirectoryOffset,ie.rootDirectoryLength,ie);ie.specVersion===1&&(Qe=sortDir(Qe));const Xe=queryTile(new DataView(Qe),ae,ye,ve);if(Xe){let it=(yield Z.getBytes(Xe.offset,Xe.length,be)).data;const st=new DataView(it);return st.getUint8(0)==31&&st.getUint8(1)==139&&(it=decompressSync(new Uint8Array(it))),{data:it}}const Je=deriveLeaf(new DataView(Qe),{z:ae,x:ye,y:ve});if(Je){const tt=queryLeafdir(new DataView(Qe),Je.z,Je.x,Je.y);if(tt){let it=yield ee.getArrayBuffer(Z,tt.offset,tt.length,ie);ie.specVersion===1&&(it=sortDir(it));const st=queryTile(new DataView(it),ae,ye,ve);if(st){let ct=(yield Z.getBytes(st.offset,st.length,be)).data;const gt=new DataView(ct);return gt.getUint8(0)==31&&gt.getUint8(1)==139&&(ct=decompressSync(new Uint8Array(ct))),{data:ct}}}}})}var v2_default={getHeader,getZxy};function toNum(ie,Z){return(Z>>>0)*4294967296+(ie>>>0)}function readVarintRemainder(ie,Z){const ee=Z.buf;let ae,ye;if(ye=ee[Z.pos++],ae=(ye&112)>>4,ye<128||(ye=ee[Z.pos++],ae|=(ye&127)<<3,ye<128)||(ye=ee[Z.pos++],ae|=(ye&127)<<10,ye<128)||(ye=ee[Z.pos++],ae|=(ye&127)<<17,ye<128)||(ye=ee[Z.pos++],ae|=(ye&127)<<24,ye<128)||(ye=ee[Z.pos++],ae|=(ye&1)<<31,ye<128))return toNum(ie,ae);throw new Error("Expected varint not more than 10 bytes")}function readVarint(ie){const Z=ie.buf;let ee,ae;return ae=Z[ie.pos++],ee=ae&127,ae<128||(ae=Z[ie.pos++],ee|=(ae&127)<<7,ae<128)||(ae=Z[ie.pos++],ee|=(ae&127)<<14,ae<128)||(ae=Z[ie.pos++],ee|=(ae&127)<<21,ae<128)?ee:(ae=Z[ie.pos],ee|=(ae&15)<<28,readVarintRemainder(ee,ie))}function rotate(ie,Z,ee,ae){if(ae==0){ee==1&&(Z[0]=ie-1-Z[0],Z[1]=ie-1-Z[1]);const ye=Z[0];Z[0]=Z[1],Z[1]=ye}}var tzValues=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function zxyToTileId(ie,Z,ee){if(ie>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(Z>Math.pow(2,ie)-1||ee>Math.pow(2,ie)-1)throw Error("tile x/y outside zoom level bounds");const ae=tzValues[ie],ye=Math.pow(2,ie);let ve=0,be=0,Qe=0;const Xe=[Z,ee];let Je=ye/2;for(;Je>0;)ve=(Xe[0]&Je)>0?1:0,be=(Xe[1]&Je)>0?1:0,Qe+=Je*Je*(3*ve^be),rotate(Je,Xe,ve,be),Je=Je/2;return ae+Qe}function defaultDecompress(ie,Z){return __async(this,null,function*(){if(Z===1||Z===0)return ie;if(Z===2){if(typeof globalThis.DecompressionStream>"u")return decompressSync(new Uint8Array(ie));{let ae=new Response(ie).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(ae).arrayBuffer()}}else throw Error("Compression method not supported")})}var HEADER_SIZE_BYTES=127;function findTile(ie,Z){let ee=0,ae=ie.length-1;for(;ee<=ae;){const ye=ae+ee>>1,ve=Z-ie[ye].tileId;if(ve>0)ee=ye+1;else if(ve<0)ae=ye-1;else return ie[ye]}return ae>=0&&(ie[ae].runLength===0||Z-ie[ae].tileId<ie[ae].runLength)?ie[ae]:null}var FetchSource=class{constructor(ie,Z=new Headers){this.url=ie,this.customHeaders=Z}getKey(){return this.url}setHeaders(ie){this.customHeaders=ie}getBytes(ie,Z,ee){return __async(this,null,function*(){let ae;ee||(ae=new AbortController,ee=ae.signal);const ye=new Headers(this.customHeaders);ye.set("Range","bytes="+ie+"-"+(ie+Z-1));let ve=yield fetch(this.url,{signal:ee,headers:ye});if(ve.status===416&&ie===0){const Xe=ve.headers.get("Content-Range");if(!Xe||!Xe.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const Je=+Xe.substr(8);ve=yield fetch(this.url,{signal:ee,headers:{Range:"bytes=0-"+(Je-1)}})}if(ve.status>=300)throw Error("Bad response code: "+ve.status);const be=ve.headers.get("Content-Length");if(ve.status===200&&(!be||+be>Z))throw ae&&ae.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield ve.arrayBuffer(),etag:ve.headers.get("ETag")||void 0,cacheControl:ve.headers.get("Cache-Control")||void 0,expires:ve.headers.get("Expires")||void 0}})}};function getUint64(ie,Z){const ee=ie.getUint32(Z+4,!0),ae=ie.getUint32(Z+0,!0);return ee*Math.pow(2,32)+ae}function bytesToHeader(ie,Z){const ee=new DataView(ie),ae=ee.getUint8(7);if(ae>3)throw Error(`Archive is spec version ${ae} but this library supports up to spec version 3`);return{specVersion:ae,rootDirectoryOffset:getUint64(ee,8),rootDirectoryLength:getUint64(ee,16),jsonMetadataOffset:getUint64(ee,24),jsonMetadataLength:getUint64(ee,32),leafDirectoryOffset:getUint64(ee,40),leafDirectoryLength:getUint64(ee,48),tileDataOffset:getUint64(ee,56),tileDataLength:getUint64(ee,64),numAddressedTiles:getUint64(ee,72),numTileEntries:getUint64(ee,80),numTileContents:getUint64(ee,88),clustered:ee.getUint8(96)===1,internalCompression:ee.getUint8(97),tileCompression:ee.getUint8(98),tileType:ee.getUint8(99),minZoom:ee.getUint8(100),maxZoom:ee.getUint8(101),minLon:ee.getInt32(102,!0)/1e7,minLat:ee.getInt32(106,!0)/1e7,maxLon:ee.getInt32(110,!0)/1e7,maxLat:ee.getInt32(114,!0)/1e7,centerZoom:ee.getUint8(118),centerLon:ee.getInt32(119,!0)/1e7,centerLat:ee.getInt32(123,!0)/1e7,etag:Z}}function deserializeIndex(ie){const Z={buf:new Uint8Array(ie),pos:0},ee=readVarint(Z),ae=[];let ye=0;for(let ve=0;ve<ee;ve++){const be=readVarint(Z);ae.push({tileId:ye+be,offset:0,length:0,runLength:1}),ye+=be}for(let ve=0;ve<ee;ve++)ae[ve].runLength=readVarint(Z);for(let ve=0;ve<ee;ve++)ae[ve].length=readVarint(Z);for(let ve=0;ve<ee;ve++){const be=readVarint(Z);be===0&&ve>0?ae[ve].offset=ae[ve-1].offset+ae[ve-1].length:ae[ve].offset=be-1}return ae}function detectVersion(ie){const Z=new DataView(ie);return Z.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):Z.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var EtagMismatch=class extends Error{};function getHeaderAndRoot(ie,Z,ee,ae){return __async(this,null,function*(){const ye=yield ie.getBytes(0,16384);if(new DataView(ye.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(detectVersion(ye.data)<3)return[yield v2_default.getHeader(ie)];const be=ye.data.slice(0,HEADER_SIZE_BYTES);let Qe=ye.etag;ae&&ye.etag!=ae&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+ie.getKey()),Qe=void 0);const Xe=bytesToHeader(be,Qe);if(ee){const Je=ye.data.slice(Xe.rootDirectoryOffset,Xe.rootDirectoryOffset+Xe.rootDirectoryLength),tt=ie.getKey()+"|"+(Xe.etag||"")+"|"+Xe.rootDirectoryOffset+"|"+Xe.rootDirectoryLength,it=deserializeIndex(yield Z(Je,Xe.internalCompression));return[Xe,[tt,it.length,it]]}return[Xe,void 0]})}function getDirectory(ie,Z,ee,ae,ye){return __async(this,null,function*(){const ve=yield ie.getBytes(ee,ae);if(ye.etag&&ye.etag!==ve.etag)throw new EtagMismatch(ve.etag);const be=yield Z(ve.data,ye.internalCompression),Qe=deserializeIndex(be);if(Qe.length===0)throw new Error("Empty directory is invalid");return Qe})}var SharedPromiseCache=class{constructor(ie=100,Z=!0,ee=defaultDecompress){this.cache=new Map,this.maxCacheEntries=ie,this.counter=1,this.prefetch=Z,this.decompress=ee}getHeader(ie,Z){return __async(this,null,function*(){const ee=ie.getKey();if(this.cache.has(ee))return this.cache.get(ee).lastUsed=this.counter++,yield this.cache.get(ee).data;const ae=new Promise((ye,ve)=>{getHeaderAndRoot(ie,this.decompress,this.prefetch,Z).then(be=>{be[1]&&this.cache.set(be[1][0],{lastUsed:this.counter++,data:Promise.resolve(be[1][2])}),ye(be[0]),this.prune()}).catch(be=>{ve(be)})});return this.cache.set(ee,{lastUsed:this.counter++,data:ae}),ae})}getDirectory(ie,Z,ee,ae){return __async(this,null,function*(){const ye=ie.getKey()+"|"+(ae.etag||"")+"|"+Z+"|"+ee;if(this.cache.has(ye))return this.cache.get(ye).lastUsed=this.counter++,yield this.cache.get(ye).data;const ve=new Promise((be,Qe)=>{getDirectory(ie,this.decompress,Z,ee,ae).then(Xe=>{be(Xe),this.prune()}).catch(Xe=>{Qe(Xe)})});return this.cache.set(ye,{lastUsed:this.counter++,data:ve}),ve})}getArrayBuffer(ie,Z,ee,ae){return __async(this,null,function*(){const ye=ie.getKey()+"|"+(ae.etag||"")+"|"+Z+"|"+ee;if(this.cache.has(ye))return this.cache.get(ye).lastUsed=this.counter++,yield this.cache.get(ye).data;const ve=new Promise((be,Qe)=>{ie.getBytes(Z,ee).then(Xe=>{if(ae.etag&&ae.etag!==Xe.etag)throw new EtagMismatch(Xe.etag);be(Xe.data),this.cache.has(ye),this.prune()}).catch(Xe=>{Qe(Xe)})});return this.cache.set(ye,{lastUsed:this.counter++,data:ve}),ve})}prune(){if(this.cache.size>=this.maxCacheEntries){let ie=1/0,Z;this.cache.forEach((ee,ae)=>{ee.lastUsed<ie&&(ie=ee.lastUsed,Z=ae)}),Z&&this.cache.delete(Z)}}invalidate(ie,Z){return __async(this,null,function*(){this.cache.delete(ie.getKey()),yield this.getHeader(ie,Z)})}},PMTiles=class{constructor(ie,Z,ee){typeof ie=="string"?this.source=new FetchSource(ie):this.source=ie,ee?this.decompress=ee:this.decompress=defaultDecompress,Z?this.cache=Z:this.cache=new SharedPromiseCache}getHeader(){return __async(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(ie,Z,ee,ae){return __async(this,null,function*(){const ye=zxyToTileId(ie,Z,ee),ve=yield this.cache.getHeader(this.source);if(ve.specVersion<3)return v2_default.getZxy(ve,this.source,this.cache,ie,Z,ee,ae);if(ie<ve.minZoom||ie>ve.maxZoom)return;let be=ve.rootDirectoryOffset,Qe=ve.rootDirectoryLength;for(let Xe=0;Xe<=3;Xe++){const Je=yield this.cache.getDirectory(this.source,be,Qe,ve),tt=findTile(Je,ye);if(tt)if(tt.runLength>0){const it=yield this.source.getBytes(ve.tileDataOffset+tt.offset,tt.length,ae);if(ve.etag&&ve.etag!==it.etag)throw new EtagMismatch(it.etag);return{data:yield this.decompress(it.data,ve.tileCompression),cacheControl:it.cacheControl,expires:it.expires}}else be=ve.leafDirectoryOffset+tt.offset,Qe=tt.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(ie,Z,ee,ae){return __async(this,null,function*(){try{return yield this.getZxyAttempt(ie,Z,ee,ae)}catch(ye){if(ye instanceof EtagMismatch)return this.cache.invalidate(this.source,ye.message),yield this.getZxyAttempt(ie,Z,ee,ae);throw ye}})}getMetadataAttempt(){return __async(this,null,function*(){const ie=yield this.cache.getHeader(this.source),Z=yield this.source.getBytes(ie.jsonMetadataOffset,ie.jsonMetadataLength);if(ie.etag&&ie.etag!==Z.etag)throw new EtagMismatch(Z.etag);const ee=yield this.decompress(Z.data,ie.internalCompression),ae=new TextDecoder("utf-8");return JSON.parse(ae.decode(ee))})}getMetadata(){return __async(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(ie){if(ie instanceof EtagMismatch)return this.cache.invalidate(this.source,ie.message),yield this.getMetadataAttempt();throw ie}})}};class PMTilesVectorSource extends VectorTile{constructor(ee){super({...ee,state:"loading",url:"pmtiles://"+ee.url+"/{z}/{x}/{y}",format:new MVT});xc(this,"tileLoadFunction",(ee,ae)=>{const ye=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),ve=ae.match(ye),be=+ve[2],Qe=+ve[3],Xe=+ve[4];ee.setLoader((Je,tt,it)=>{ee.setState(TileState.LOADING),this.pmtiles_.getZxy(be,Qe,Xe).then(st=>{if(st){const lt=ee.getFormat();ee.setFeatures(lt.readFeatures(st.data,{extent:Je,featureProjection:it})),ee.setState(TileState.LOADED)}else ee.setFeatures([]),ee.setState(TileState.EMPTY)}).catch(st=>{ee.setFeatures([]),ee.setState(TileState.ERROR)})})});const ae=new FetchSource(ee.url,new Headers(ee.headers));this.pmtiles_=new PMTiles(ae),this.pmtiles_.getHeader().then(ye=>{this.tileGrid.minZoom=ye.minZoom,this.tileGrid.maxZoom=ye.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}const openLayersBasemaps={darkMatter:{url:"https://{a-d}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://carto.com/attributions">Carto</a>',maxZoom:18},positron:{url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://carto.com/attributions">Carto</a>',maxZoom:18},positronLite:{url:"https://{a-d}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://carto.com/attributions">Carto</a>',maxZoom:18},worldAntique:{url:"https://cartocdn_{a-d}.global.ssl.fastly.net/base-antique/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://carto.com/attributions">Carto</a>',maxZoom:18},worldEco:{url:"https://cartocdn_{a-d}.global.ssl.fastly.net/base-eco/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://carto.com/attributions">Carto</a>',maxZoom:18},flatBlue:{url:"https://cartocdn_{a-d}.global.ssl.fastly.net/base-flatblue/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://carto.com/attributions">Carto</a>',maxZoom:18},midnightCommander:{url:"https://cartocdn_{a-d}.global.ssl.fastly.net/base-midnight/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://carto.com/attributions">Carto</a>',maxZoom:18},openstreetmapHot:{url:"https://{a-c}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>',maxZoom:19},openstreetmapStandard:{url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}};class OlInitializer{constructor(){this.element=document.getElementById("ol-map"),this.element&&(this.data=this.element.dataset,this.extent=new GeoJSON().readFeatures(this.data.mapGeom)[0].getGeometry().getExtent())}run(){if(!this.element)return!1;this.data.protocol==="Pmtiles"?this.initializePmtiles():this.data.protocol==="Cog"&&this.initializeCog()}baseLayer(){const Z=openLayersBasemaps[this.data.basemap];return new TileLayer({source:new XYZ({attributions:Z.attribution,url:Z.url,maxZoom:Z.maxZoom})})}initializePmtiles(){const Z=new VectorTileLayer({declutter:!0,source:new PMTilesVectorSource({url:this.data.url}),style:new Style$1({stroke:new Stroke({color:"#7070B3",width:1}),fill:new Fill({color:"#FFFFFF"}),image:new CircleStyle({radius:7,fill:new Fill({color:"#7070B3"}),stroke:new Stroke({color:"#FFFFFF",width:2})})})});useGeographic();const ee=new Map$1({controls:defaults$2().extend([new FullScreen]),layers:[this.baseLayer(),Z],target:"ol-map"});ee.getView().fit(this.extent,ee.getSize())}initializeCog(){const Z=new GeoTIFFSource({sources:[{url:this.data.url}]});Z.getView().then(ee=>{const ae=new Map$1({controls:defaults$2().extend([new FullScreen]),target:"ol-map",layers:[this.baseLayer(),new WebGLTileLayer({source:Z})],view:new View({center:ee.center})});ae.getView().fit(ee.extent,ae.getSize())})}}var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var ie=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),ae=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),be=Symbol.for("react.context"),Qe=Symbol.for("react.forward_ref"),Xe=Symbol.for("react.suspense"),Je=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),it=Symbol.iterator;function st(xi){return xi===null||typeof xi!="object"?null:(xi=it&&xi[it]||xi["@@iterator"],typeof xi=="function"?xi:null)}var lt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ct=Object.assign,gt={};function ut(xi,ki,Li){this.props=xi,this.context=ki,this.refs=gt,this.updater=Li||lt}ut.prototype.isReactComponent={},ut.prototype.setState=function(xi,ki){if(typeof xi!="object"&&typeof xi!="function"&&xi!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xi,ki,"setState")},ut.prototype.forceUpdate=function(xi){this.updater.enqueueForceUpdate(this,xi,"forceUpdate")};function mt(){}mt.prototype=ut.prototype;function ei(xi,ki,Li){this.props=xi,this.context=ki,this.refs=gt,this.updater=Li||lt}var ni=ei.prototype=new mt;ni.constructor=ei,ct(ni,ut.prototype),ni.isPureReactComponent=!0;var ri=Array.isArray,si=Object.prototype.hasOwnProperty,li={current:null},ai={key:!0,ref:!0,__self:!0,__source:!0};function ci(xi,ki,Li){var Yr,Ui={},Vi=null,Kr=null;if(ki!=null)for(Yr in ki.ref!==void 0&&(Kr=ki.ref),ki.key!==void 0&&(Vi=""+ki.key),ki)si.call(ki,Yr)&&!ai.hasOwnProperty(Yr)&&(Ui[Yr]=ki[Yr]);var Wi=arguments.length-2;if(Wi===1)Ui.children=Li;else if(1<Wi){for(var Zr=Array(Wi),ps=0;ps<Wi;ps++)Zr[ps]=arguments[ps+2];Ui.children=Zr}if(xi&&xi.defaultProps)for(Yr in Wi=xi.defaultProps,Wi)Ui[Yr]===void 0&&(Ui[Yr]=Wi[Yr]);return{$$typeof:ie,type:xi,key:Vi,ref:Kr,props:Ui,_owner:li.current}}function Ci(xi,ki){return{$$typeof:ie,type:xi.type,key:ki,ref:xi.ref,props:xi.props,_owner:xi._owner}}function pi(xi){return typeof xi=="object"&&xi!==null&&xi.$$typeof===ie}function gi(xi){var ki={"=":"=0",":":"=2"};return"$"+xi.replace(/[=:]/g,function(Li){return ki[Li]})}var _i=/\/+/g;function bi(xi,ki){return typeof xi=="object"&&xi!==null&&xi.key!=null?gi(""+xi.key):ki.toString(36)}function Mi(xi,ki,Li,Yr,Ui){var Vi=typeof xi;(Vi==="undefined"||Vi==="boolean")&&(xi=null);var Kr=!1;if(xi===null)Kr=!0;else switch(Vi){case"string":case"number":Kr=!0;break;case"object":switch(xi.$$typeof){case ie:case Z:Kr=!0}}if(Kr)return Kr=xi,Ui=Ui(Kr),xi=Yr===""?"."+bi(Kr,0):Yr,ri(Ui)?(Li="",xi!=null&&(Li=xi.replace(_i,"$&/")+"/"),Mi(Ui,ki,Li,"",function(ps){return ps})):Ui!=null&&(pi(Ui)&&(Ui=Ci(Ui,Li+(!Ui.key||Kr&&Kr.key===Ui.key?"":(""+Ui.key).replace(_i,"$&/")+"/")+xi)),ki.push(Ui)),1;if(Kr=0,Yr=Yr===""?".":Yr+":",ri(xi))for(var Wi=0;Wi<xi.length;Wi++){Vi=xi[Wi];var Zr=Yr+bi(Vi,Wi);Kr+=Mi(Vi,ki,Li,Zr,Ui)}else if(Zr=st(xi),typeof Zr=="function")for(xi=Zr.call(xi),Wi=0;!(Vi=xi.next()).done;)Vi=Vi.value,Zr=Yr+bi(Vi,Wi++),Kr+=Mi(Vi,ki,Li,Zr,Ui);else if(Vi==="object")throw ki=String(xi),Error("Objects are not valid as a React child (found: "+(ki==="[object Object]"?"object with keys {"+Object.keys(xi).join(", ")+"}":ki)+"). If you meant to render a collection of children, use an array instead.");return Kr}function yi(xi,ki,Li){if(xi==null)return xi;var Yr=[],Ui=0;return Mi(xi,Yr,"","",function(Vi){return ki.call(Li,Vi,Ui++)}),Yr}function Ti(xi){if(xi._status===-1){var ki=xi._result;ki=ki(),ki.then(function(Li){(xi._status===0||xi._status===-1)&&(xi._status=1,xi._result=Li)},function(Li){(xi._status===0||xi._status===-1)&&(xi._status=2,xi._result=Li)}),xi._status===-1&&(xi._status=0,xi._result=ki)}if(xi._status===1)return xi._result.default;throw xi._result}var Ii={current:null},Ri={transition:null},Pi={ReactCurrentDispatcher:Ii,ReactCurrentBatchConfig:Ri,ReactCurrentOwner:li};return react_production_min.Children={map:yi,forEach:function(xi,ki,Li){yi(xi,function(){ki.apply(this,arguments)},Li)},count:function(xi){var ki=0;return yi(xi,function(){ki++}),ki},toArray:function(xi){return yi(xi,function(ki){return ki})||[]},only:function(xi){if(!pi(xi))throw Error("React.Children.only expected to receive a single React element child.");return xi}},react_production_min.Component=ut,react_production_min.Fragment=ee,react_production_min.Profiler=ye,react_production_min.PureComponent=ei,react_production_min.StrictMode=ae,react_production_min.Suspense=Xe,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pi,react_production_min.cloneElement=function(xi,ki,Li){if(xi==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+xi+".");var Yr=ct({},xi.props),Ui=xi.key,Vi=xi.ref,Kr=xi._owner;if(ki!=null){if(ki.ref!==void 0&&(Vi=ki.ref,Kr=li.current),ki.key!==void 0&&(Ui=""+ki.key),xi.type&&xi.type.defaultProps)var Wi=xi.type.defaultProps;for(Zr in ki)si.call(ki,Zr)&&!ai.hasOwnProperty(Zr)&&(Yr[Zr]=ki[Zr]===void 0&&Wi!==void 0?Wi[Zr]:ki[Zr])}var Zr=arguments.length-2;if(Zr===1)Yr.children=Li;else if(1<Zr){Wi=Array(Zr);for(var ps=0;ps<Zr;ps++)Wi[ps]=arguments[ps+2];Yr.children=Wi}return{$$typeof:ie,type:xi.type,key:Ui,ref:Vi,props:Yr,_owner:Kr}},react_production_min.createContext=function(xi){return xi={$$typeof:be,_currentValue:xi,_currentValue2:xi,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},xi.Provider={$$typeof:ve,_context:xi},xi.Consumer=xi},react_production_min.createElement=ci,react_production_min.createFactory=function(xi){var ki=ci.bind(null,xi);return ki.type=xi,ki},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(xi){return{$$typeof:Qe,render:xi}},react_production_min.isValidElement=pi,react_production_min.lazy=function(xi){return{$$typeof:tt,_payload:{_status:-1,_result:xi},_init:Ti}},react_production_min.memo=function(xi,ki){return{$$typeof:Je,type:xi,compare:ki===void 0?null:ki}},react_production_min.startTransition=function(xi){var ki=Ri.transition;Ri.transition={};try{xi()}finally{Ri.transition=ki}},react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production_min.useCallback=function(xi,ki){return Ii.current.useCallback(xi,ki)},react_production_min.useContext=function(xi){return Ii.current.useContext(xi)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(xi){return Ii.current.useDeferredValue(xi)},react_production_min.useEffect=function(xi,ki){return Ii.current.useEffect(xi,ki)},react_production_min.useId=function(){return Ii.current.useId()},react_production_min.useImperativeHandle=function(xi,ki,Li){return Ii.current.useImperativeHandle(xi,ki,Li)},react_production_min.useInsertionEffect=function(xi,ki){return Ii.current.useInsertionEffect(xi,ki)},react_production_min.useLayoutEffect=function(xi,ki){return Ii.current.useLayoutEffect(xi,ki)},react_production_min.useMemo=function(xi,ki){return Ii.current.useMemo(xi,ki)},react_production_min.useReducer=function(xi,ki,Li){return Ii.current.useReducer(xi,ki,Li)},react_production_min.useRef=function(xi){return Ii.current.useRef(xi)},react_production_min.useState=function(xi){return Ii.current.useState(xi)},react_production_min.useSyncExternalStore=function(xi,ki,Li){return Ii.current.useSyncExternalStore(xi,ki,Li)},react_production_min.useTransition=function(){return Ii.current.useTransition()},react_production_min.version="18.2.0",react_production_min}var react_development={exports:{}};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */react_development.exports;var hasRequiredReact_development;function requireReact_development(){return hasRequiredReact_development||(hasRequiredReact_development=1,function(ie,Z){process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var ee="18.2.0",ae=Symbol.for("react.element"),ye=Symbol.for("react.portal"),ve=Symbol.for("react.fragment"),be=Symbol.for("react.strict_mode"),Qe=Symbol.for("react.profiler"),Xe=Symbol.for("react.provider"),Je=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),it=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),ct=Symbol.for("react.lazy"),gt=Symbol.for("react.offscreen"),ut=Symbol.iterator,mt="@@iterator";function ei(Ei){if(Ei===null||typeof Ei!="object")return null;var $i=ut&&Ei[ut]||Ei[mt];return typeof $i=="function"?$i:null}var ni={current:null},ri={transition:null},si={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},li={current:null},ai={},ci=null;function Ci(Ei){ci=Ei}ai.setExtraStackFrame=function(Ei){ci=Ei},ai.getCurrentStack=null,ai.getStackAddendum=function(){var Ei="";ci&&(Ei+=ci);var $i=ai.getCurrentStack;return $i&&(Ei+=$i()||""),Ei};var pi=!1,gi=!1,_i=!1,bi=!1,Mi=!1,yi={ReactCurrentDispatcher:ni,ReactCurrentBatchConfig:ri,ReactCurrentOwner:li};yi.ReactDebugCurrentFrame=ai,yi.ReactCurrentActQueue=si;function Ti(Ei){{for(var $i=arguments.length,Ji=new Array($i>1?$i-1:0),Jr=1;Jr<$i;Jr++)Ji[Jr-1]=arguments[Jr];Ri("warn",Ei,Ji)}}function Ii(Ei){{for(var $i=arguments.length,Ji=new Array($i>1?$i-1:0),Jr=1;Jr<$i;Jr++)Ji[Jr-1]=arguments[Jr];Ri("error",Ei,Ji)}}function Ri(Ei,$i,Ji){{var Jr=yi.ReactDebugCurrentFrame,As=Jr.getStackAddendum();As!==""&&($i+="%s",Ji=Ji.concat([As]));var Zs=Ji.map(function(Cs){return String(Cs)});Zs.unshift("Warning: "+$i),Function.prototype.apply.call(console[Ei],console,Zs)}}var Pi={};function xi(Ei,$i){{var Ji=Ei.constructor,Jr=Ji&&(Ji.displayName||Ji.name)||"ReactClass",As=Jr+"."+$i;if(Pi[As])return;Ii("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",$i,Jr),Pi[As]=!0}}var ki={isMounted:function(Ei){return!1},enqueueForceUpdate:function(Ei,$i,Ji){xi(Ei,"forceUpdate")},enqueueReplaceState:function(Ei,$i,Ji,Jr){xi(Ei,"replaceState")},enqueueSetState:function(Ei,$i,Ji,Jr){xi(Ei,"setState")}},Li=Object.assign,Yr={};Object.freeze(Yr);function Ui(Ei,$i,Ji){this.props=Ei,this.context=$i,this.refs=Yr,this.updater=Ji||ki}Ui.prototype.isReactComponent={},Ui.prototype.setState=function(Ei,$i){if(typeof Ei!="object"&&typeof Ei!="function"&&Ei!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ei,$i,"setState")},Ui.prototype.forceUpdate=function(Ei){this.updater.enqueueForceUpdate(this,Ei,"forceUpdate")};{var Vi={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},Kr=function(Ei,$i){Object.defineProperty(Ui.prototype,Ei,{get:function(){Ti("%s(...) is deprecated in plain JavaScript React classes. %s",$i[0],$i[1])}})};for(var Wi in Vi)Vi.hasOwnProperty(Wi)&&Kr(Wi,Vi[Wi])}function Zr(){}Zr.prototype=Ui.prototype;function ps(Ei,$i,Ji){this.props=Ei,this.context=$i,this.refs=Yr,this.updater=Ji||ki}var Is=ps.prototype=new Zr;Is.constructor=ps,Li(Is,Ui.prototype),Is.isPureReactComponent=!0;function _s(){var Ei={current:null};return Object.seal(Ei),Ei}var ws=Array.isArray;function hi(Ei){return ws(Ei)}function Bi(Ei){{var $i=typeof Symbol=="function"&&Symbol.toStringTag,Ji=$i&&Ei[Symbol.toStringTag]||Ei.constructor.name||"Object";return Ji}}function qi(Ei){try{return Xr(Ei),!1}catch{return!0}}function Xr(Ei){return""+Ei}function rs(Ei){if(qi(Ei))return Ii("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Bi(Ei)),Xr(Ei)}function Os(Ei,$i,Ji){var Jr=Ei.displayName;if(Jr)return Jr;var As=$i.displayName||$i.name||"";return As!==""?Ji+"("+As+")":Ji}function gs(Ei){return Ei.displayName||"Context"}function zs(Ei){if(Ei==null)return null;if(typeof Ei.tag=="number"&&Ii("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof Ei=="function")return Ei.displayName||Ei.name||null;if(typeof Ei=="string")return Ei;switch(Ei){case ve:return"Fragment";case ye:return"Portal";case Qe:return"Profiler";case be:return"StrictMode";case it:return"Suspense";case st:return"SuspenseList"}if(typeof Ei=="object")switch(Ei.$$typeof){case Je:var $i=Ei;return gs($i)+".Consumer";case Xe:var Ji=Ei;return gs(Ji._context)+".Provider";case tt:return Os(Ei,Ei.render,"ForwardRef");case lt:var Jr=Ei.displayName||null;return Jr!==null?Jr:zs(Ei.type)||"Memo";case ct:{var As=Ei,Zs=As._payload,Cs=As._init;try{return zs(Cs(Zs))}catch{return null}}}return null}var $s=Object.prototype.hasOwnProperty,Us={key:!0,ref:!0,__self:!0,__source:!0},xs,sa,Gs;Gs={};function ma(Ei){if($s.call(Ei,"ref")){var $i=Object.getOwnPropertyDescriptor(Ei,"ref").get;if($i&&$i.isReactWarning)return!1}return Ei.ref!==void 0}function ha(Ei){if($s.call(Ei,"key")){var $i=Object.getOwnPropertyDescriptor(Ei,"key").get;if($i&&$i.isReactWarning)return!1}return Ei.key!==void 0}function za(Ei,$i){var Ji=function(){xs||(xs=!0,Ii("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",$i))};Ji.isReactWarning=!0,Object.defineProperty(Ei,"key",{get:Ji,configurable:!0})}function Io(Ei,$i){var Ji=function(){sa||(sa=!0,Ii("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",$i))};Ji.isReactWarning=!0,Object.defineProperty(Ei,"ref",{get:Ji,configurable:!0})}function wo(Ei){if(typeof Ei.ref=="string"&&li.current&&Ei.__self&&li.current.stateNode!==Ei.__self){var $i=zs(li.current.type);Gs[$i]||(Ii('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',$i,Ei.ref),Gs[$i]=!0)}}var hs=function(Ei,$i,Ji,Jr,As,Zs,Cs){var Ws={$$typeof:ae,type:Ei,key:$i,ref:Ji,props:Cs,_owner:Zs};return Ws._store={},Object.defineProperty(Ws._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ws,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Jr}),Object.defineProperty(Ws,"_source",{configurable:!1,enumerable:!1,writable:!1,value:As}),Object.freeze&&(Object.freeze(Ws.props),Object.freeze(Ws)),Ws};function Fs(Ei,$i,Ji){var Jr,As={},Zs=null,Cs=null,Ws=null,Aa=null;if($i!=null){ma($i)&&(Cs=$i.ref,wo($i)),ha($i)&&(rs($i.key),Zs=""+$i.key),Ws=$i.__self===void 0?null:$i.__self,Aa=$i.__source===void 0?null:$i.__source;for(Jr in $i)$s.call($i,Jr)&&!Us.hasOwnProperty(Jr)&&(As[Jr]=$i[Jr])}var wa=arguments.length-2;if(wa===1)As.children=Ji;else if(wa>1){for(var Qa=Array(wa),Fa=0;Fa<wa;Fa++)Qa[Fa]=arguments[Fa+2];Object.freeze&&Object.freeze(Qa),As.children=Qa}if(Ei&&Ei.defaultProps){var Ua=Ei.defaultProps;for(Jr in Ua)As[Jr]===void 0&&(As[Jr]=Ua[Jr])}if(Zs||Cs){var Va=typeof Ei=="function"?Ei.displayName||Ei.name||"Unknown":Ei;Zs&&za(As,Va),Cs&&Io(As,Va)}return hs(Ei,Zs,Cs,Ws,Aa,li.current,As)}function ca(Ei,$i){var Ji=hs(Ei.type,$i,Ei.ref,Ei._self,Ei._source,Ei._owner,Ei.props);return Ji}function Ta(Ei,$i,Ji){if(Ei==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ei+".");var Jr,As=Li({},Ei.props),Zs=Ei.key,Cs=Ei.ref,Ws=Ei._self,Aa=Ei._source,wa=Ei._owner;if($i!=null){ma($i)&&(Cs=$i.ref,wa=li.current),ha($i)&&(rs($i.key),Zs=""+$i.key);var Qa;Ei.type&&Ei.type.defaultProps&&(Qa=Ei.type.defaultProps);for(Jr in $i)$s.call($i,Jr)&&!Us.hasOwnProperty(Jr)&&($i[Jr]===void 0&&Qa!==void 0?As[Jr]=Qa[Jr]:As[Jr]=$i[Jr])}var Fa=arguments.length-2;if(Fa===1)As.children=Ji;else if(Fa>1){for(var Ua=Array(Fa),Va=0;Va<Fa;Va++)Ua[Va]=arguments[Va+2];As.children=Ua}return hs(Ei.type,Zs,Cs,Ws,Aa,wa,As)}function vi(Ei){return typeof Ei=="object"&&Ei!==null&&Ei.$$typeof===ae}var mi=".",Fi=":";function Ni(Ei){var $i=/[=:]/g,Ji={"=":"=0",":":"=2"},Jr=Ei.replace($i,function(As){return Ji[As]});return"$"+Jr}var is=!1,vs=/\/+/g;function us(Ei){return Ei.replace(vs,"$&/")}function as(Ei,$i){return typeof Ei=="object"&&Ei!==null&&Ei.key!=null?(rs(Ei.key),Ni(""+Ei.key)):$i.toString(36)}function js(Ei,$i,Ji,Jr,As){var Zs=typeof Ei;(Zs==="undefined"||Zs==="boolean")&&(Ei=null);var Cs=!1;if(Ei===null)Cs=!0;else switch(Zs){case"string":case"number":Cs=!0;break;case"object":switch(Ei.$$typeof){case ae:case ye:Cs=!0}}if(Cs){var Ws=Ei,Aa=As(Ws),wa=Jr===""?mi+as(Ws,0):Jr;if(hi(Aa)){var Qa="";wa!=null&&(Qa=us(wa)+"/"),js(Aa,$i,Qa,"",function(hp){return hp})}else Aa!=null&&(vi(Aa)&&(Aa.key&&(!Ws||Ws.key!==Aa.key)&&rs(Aa.key),Aa=ca(Aa,Ji+(Aa.key&&(!Ws||Ws.key!==Aa.key)?us(""+Aa.key)+"/":"")+wa)),$i.push(Aa));return 1}var Fa,Ua,Va=0,Ca=Jr===""?mi:Jr+Fi;if(hi(Ei))for(var Yu=0;Yu<Ei.length;Yu++)Fa=Ei[Yu],Ua=Ca+as(Fa,Yu),Va+=js(Fa,$i,Ji,Ua,As);else{var Ed=ei(Ei);if(typeof Ed=="function"){var Eh=Ei;Ed===Eh.entries&&(is||Ti("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),is=!0);for(var dp=Ed.call(Eh),Cu,vh=0;!(Cu=dp.next()).done;)Fa=Cu.value,Ua=Ca+as(Fa,vh++),Va+=js(Fa,$i,Ji,Ua,As)}else if(Zs==="object"){var Ch=String(Ei);throw new Error("Objects are not valid as a React child (found: "+(Ch==="[object Object]"?"object with keys {"+Object.keys(Ei).join(", ")+"}":Ch)+"). If you meant to render a collection of children, use an array instead.")}}return Va}function ea(Ei,$i,Ji){if(Ei==null)return Ei;var Jr=[],As=0;return js(Ei,Jr,"","",function(Zs){return $i.call(Ji,Zs,As++)}),Jr}function Vs(Ei){var $i=0;return ea(Ei,function(){$i++}),$i}function ya(Ei,$i,Ji){ea(Ei,function(){$i.apply(this,arguments)},Ji)}function Ns(Ei){return ea(Ei,function($i){return $i})||[]}function fo(Ei){if(!vi(Ei))throw new Error("React.Children.only expected to receive a single React element child.");return Ei}function ja(Ei){var $i={$$typeof:Je,_currentValue:Ei,_currentValue2:Ei,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};$i.Provider={$$typeof:Xe,_context:$i};var Ji=!1,Jr=!1,As=!1;{var Zs={$$typeof:Je,_context:$i};Object.defineProperties(Zs,{Provider:{get:function(){return Jr||(Jr=!0,Ii("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),$i.Provider},set:function(Cs){$i.Provider=Cs}},_currentValue:{get:function(){return $i._currentValue},set:function(Cs){$i._currentValue=Cs}},_currentValue2:{get:function(){return $i._currentValue2},set:function(Cs){$i._currentValue2=Cs}},_threadCount:{get:function(){return $i._threadCount},set:function(Cs){$i._threadCount=Cs}},Consumer:{get:function(){return Ji||(Ji=!0,Ii("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),$i.Consumer}},displayName:{get:function(){return $i.displayName},set:function(Cs){As||(Ti("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Cs),As=!0)}}}),$i.Consumer=Zs}return $i._currentRenderer=null,$i._currentRenderer2=null,$i}var xo=-1,ll=0,qa=1,yo=2;function no(Ei){if(Ei._status===xo){var $i=Ei._result,Ji=$i();if(Ji.then(function(Zs){if(Ei._status===ll||Ei._status===xo){var Cs=Ei;Cs._status=qa,Cs._result=Zs}},function(Zs){if(Ei._status===ll||Ei._status===xo){var Cs=Ei;Cs._status=yo,Cs._result=Zs}}),Ei._status===xo){var Jr=Ei;Jr._status=ll,Jr._result=Ji}}if(Ei._status===qa){var As=Ei._result;return As===void 0&&Ii(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,As),"default"in As||Ii(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,As),As.default}else throw Ei._result}function Ql(Ei){var $i={_status:xo,_result:Ei},Ji={$$typeof:ct,_payload:$i,_init:no};{var Jr,As;Object.defineProperties(Ji,{defaultProps:{configurable:!0,get:function(){return Jr},set:function(Zs){Ii("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Jr=Zs,Object.defineProperty(Ji,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return As},set:function(Zs){Ii("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),As=Zs,Object.defineProperty(Ji,"propTypes",{enumerable:!0})}}})}return Ji}function Sc(Ei){Ei!=null&&Ei.$$typeof===lt?Ii("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof Ei!="function"?Ii("forwardRef requires a render function but was given %s.",Ei===null?"null":typeof Ei):Ei.length!==0&&Ei.length!==2&&Ii("forwardRef render functions accept exactly two parameters: props and ref. %s",Ei.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),Ei!=null&&(Ei.defaultProps!=null||Ei.propTypes!=null)&&Ii("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var $i={$$typeof:tt,render:Ei};{var Ji;Object.defineProperty($i,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ji},set:function(Jr){Ji=Jr,!Ei.name&&!Ei.displayName&&(Ei.displayName=Jr)}})}return $i}var Tc;Tc=Symbol.for("react.module.reference");function od(Ei){return!!(typeof Ei=="string"||typeof Ei=="function"||Ei===ve||Ei===Qe||Mi||Ei===be||Ei===it||Ei===st||bi||Ei===gt||pi||gi||_i||typeof Ei=="object"&&Ei!==null&&(Ei.$$typeof===ct||Ei.$$typeof===lt||Ei.$$typeof===Xe||Ei.$$typeof===Je||Ei.$$typeof===tt||Ei.$$typeof===Tc||Ei.getModuleId!==void 0))}function hh(Ei,$i){od(Ei)||Ii("memo: The first argument must be a component. Instead received: %s",Ei===null?"null":typeof Ei);var Ji={$$typeof:lt,type:Ei,compare:$i===void 0?null:$i};{var Jr;Object.defineProperty(Ji,"displayName",{enumerable:!1,configurable:!0,get:function(){return Jr},set:function(As){Jr=As,!Ei.name&&!Ei.displayName&&(Ei.displayName=As)}})}return Ji}function ho(){var Ei=ni.current;return Ei===null&&Ii(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),Ei}function Zl(Ei){var $i=ho();if(Ei._context!==void 0){var Ji=Ei._context;Ji.Consumer===Ei?Ii("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):Ji.Provider===Ei&&Ii("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return $i.useContext(Ei)}function pf(Ei){var $i=ho();return $i.useState(Ei)}function bc(Ei,$i,Ji){var Jr=ho();return Jr.useReducer(Ei,$i,Ji)}function Ho(Ei){var $i=ho();return $i.useRef(Ei)}function Eg(Ei,$i){var Ji=ho();return Ji.useEffect(Ei,$i)}function vg(Ei,$i){var Ji=ho();return Ji.useInsertionEffect(Ei,$i)}function gh(Ei,$i){var Ji=ho();return Ji.useLayoutEffect(Ei,$i)}function Cg(Ei,$i){var Ji=ho();return Ji.useCallback(Ei,$i)}function lp(Ei,$i){var Ji=ho();return Ji.useMemo(Ei,$i)}function up(Ei,$i,Ji){var Jr=ho();return Jr.useImperativeHandle(Ei,$i,Ji)}function Ja(Ei,$i){{var Ji=ho();return Ji.useDebugValue(Ei,$i)}}function cp(){var Ei=ho();return Ei.useTransition()}function yu(Ei){var $i=ho();return $i.useDeferredValue(Ei)}function ga(){var Ei=ho();return Ei.useId()}function Bu(Ei,$i,Ji){var Jr=ho();return Jr.useSyncExternalStore(Ei,$i,Ji)}var _c=0,ld,wc,xl,Ah,ul,ph,mh;function Ig(){}Ig.__reactDisabledLog=!0;function ud(){{if(_c===0){ld=console.log,wc=console.info,xl=console.warn,Ah=console.error,ul=console.group,ph=console.groupCollapsed,mh=console.groupEnd;var Ei={configurable:!0,enumerable:!0,value:Ig,writable:!0};Object.defineProperties(console,{info:Ei,log:Ei,warn:Ei,error:Ei,group:Ei,groupCollapsed:Ei,groupEnd:Ei})}_c++}}function Rc(){{if(_c--,_c===0){var Ei={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Li({},Ei,{value:ld}),info:Li({},Ei,{value:wc}),warn:Li({},Ei,{value:xl}),error:Li({},Ei,{value:Ah}),group:Li({},Ei,{value:ul}),groupCollapsed:Li({},Ei,{value:ph}),groupEnd:Li({},Ei,{value:mh})})}_c<0&&Ii("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Eu=yi.ReactCurrentDispatcher,cl;function Bc(Ei,$i,Ji){{if(cl===void 0)try{throw Error()}catch(As){var Jr=As.stack.trim().match(/\n( *(at )?)/);cl=Jr&&Jr[1]||""}return`
`+cl+Ei}}var Dc=!1,Lc;{var cd=typeof WeakMap=="function"?WeakMap:Map;Lc=new cd}function dd(Ei,$i){if(!Ei||Dc)return"";{var Ji=Lc.get(Ei);if(Ji!==void 0)return Ji}var Jr;Dc=!0;var As=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Zs;Zs=Eu.current,Eu.current=null,ud();try{if($i){var Cs=function(){throw Error()};if(Object.defineProperty(Cs.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Cs,[])}catch(Ca){Jr=Ca}Reflect.construct(Ei,[],Cs)}else{try{Cs.call()}catch(Ca){Jr=Ca}Ei.call(Cs.prototype)}}else{try{throw Error()}catch(Ca){Jr=Ca}Ei()}}catch(Ca){if(Ca&&Jr&&typeof Ca.stack=="string"){for(var Ws=Ca.stack.split(`
`),Aa=Jr.stack.split(`
`),wa=Ws.length-1,Qa=Aa.length-1;wa>=1&&Qa>=0&&Ws[wa]!==Aa[Qa];)Qa--;for(;wa>=1&&Qa>=0;wa--,Qa--)if(Ws[wa]!==Aa[Qa]){if(wa!==1||Qa!==1)do if(wa--,Qa--,Qa<0||Ws[wa]!==Aa[Qa]){var Fa=`
`+Ws[wa].replace(" at new "," at ");return Ei.displayName&&Fa.includes("<anonymous>")&&(Fa=Fa.replace("<anonymous>",Ei.displayName)),typeof Ei=="function"&&Lc.set(Ei,Fa),Fa}while(wa>=1&&Qa>=0);break}}}finally{Dc=!1,Eu.current=Zs,Rc(),Error.prepareStackTrace=As}var Ua=Ei?Ei.displayName||Ei.name:"",Va=Ua?Bc(Ua):"";return typeof Ei=="function"&&Lc.set(Ei,Va),Va}function qu(Ei,$i,Ji){return dd(Ei,!1)}function fp(Ei){var $i=Ei.prototype;return!!($i&&$i.isReactComponent)}function Du(Ei,$i,Ji){if(Ei==null)return"";if(typeof Ei=="function")return dd(Ei,fp(Ei));if(typeof Ei=="string")return Bc(Ei);switch(Ei){case it:return Bc("Suspense");case st:return Bc("SuspenseList")}if(typeof Ei=="object")switch(Ei.$$typeof){case tt:return qu(Ei.render);case lt:return Du(Ei.type,$i,Ji);case ct:{var Jr=Ei,As=Jr._payload,Zs=Jr._init;try{return Du(Zs(As),$i,Ji)}catch{}}}return""}var Ba={},hd=yi.ReactDebugCurrentFrame;function mf(Ei){if(Ei){var $i=Ei._owner,Ji=Du(Ei.type,Ei._source,$i?$i.type:null);hd.setExtraStackFrame(Ji)}else hd.setExtraStackFrame(null)}function gd(Ei,$i,Ji,Jr,As){{var Zs=Function.call.bind($s);for(var Cs in Ei)if(Zs(Ei,Cs)){var Ws=void 0;try{if(typeof Ei[Cs]!="function"){var Aa=Error((Jr||"React class")+": "+Ji+" type `"+Cs+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof Ei[Cs]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Aa.name="Invariant Violation",Aa}Ws=Ei[Cs]($i,Cs,Jr,Ji,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(wa){Ws=wa}Ws&&!(Ws instanceof Error)&&(mf(As),Ii("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Jr||"React class",Ji,Cs,typeof Ws),mf(null)),Ws instanceof Error&&!(Ws.message in Ba)&&(Ba[Ws.message]=!0,mf(As),Ii("Failed %s type: %s",Ji,Ws.message),mf(null))}}}function ba(Ei){if(Ei){var $i=Ei._owner,Ji=Du(Ei.type,Ei._source,$i?$i.type:null);Ci(Ji)}else Ci(null)}var Ad;Ad=!1;function pd(){if(li.current){var Ei=zs(li.current.type);if(Ei)return`

Check the render method of \``+Ei+"`."}return""}function aa(Ei){if(Ei!==void 0){var $i=Ei.fileName.replace(/^.*[\\\/]/,""),Ji=Ei.lineNumber;return`

Check your code at `+$i+":"+Ji+"."}return""}function yf(Ei){return Ei!=null?aa(Ei.__source):""}var io={};function Sl(Ei){var $i=pd();if(!$i){var Ji=typeof Ei=="string"?Ei:Ei.displayName||Ei.name;Ji&&($i=`

Check the top-level render call using <`+Ji+">.")}return $i}function dl(Ei,$i){if(!(!Ei._store||Ei._store.validated||Ei.key!=null)){Ei._store.validated=!0;var Ji=Sl($i);if(!io[Ji]){io[Ji]=!0;var Jr="";Ei&&Ei._owner&&Ei._owner!==li.current&&(Jr=" It was passed a child from "+zs(Ei._owner.type)+"."),ba(Ei),Ii('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Ji,Jr),ba(null)}}}function Mc(Ei,$i){if(typeof Ei=="object"){if(hi(Ei))for(var Ji=0;Ji<Ei.length;Ji++){var Jr=Ei[Ji];vi(Jr)&&dl(Jr,$i)}else if(vi(Ei))Ei._store&&(Ei._store.validated=!0);else if(Ei){var As=ei(Ei);if(typeof As=="function"&&As!==Ei.entries)for(var Zs=As.call(Ei),Cs;!(Cs=Zs.next()).done;)vi(Cs.value)&&dl(Cs.value,$i)}}}function go(Ei){{var $i=Ei.type;if($i==null||typeof $i=="string")return;var Ji;if(typeof $i=="function")Ji=$i.propTypes;else if(typeof $i=="object"&&($i.$$typeof===tt||$i.$$typeof===lt))Ji=$i.propTypes;else return;if(Ji){var Jr=zs($i);gd(Ji,Ei.props,"prop",Jr,Ei)}else if($i.PropTypes!==void 0&&!Ad){Ad=!0;var As=zs($i);Ii("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",As||"Unknown")}typeof $i.getDefaultProps=="function"&&!$i.getDefaultProps.isReactClassApproved&&Ii("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Pa(Ei){{for(var $i=Object.keys(Ei.props),Ji=0;Ji<$i.length;Ji++){var Jr=$i[Ji];if(Jr!=="children"&&Jr!=="key"){ba(Ei),Ii("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Jr),ba(null);break}}Ei.ref!==null&&(ba(Ei),Ii("Invalid attribute `ref` supplied to `React.Fragment`."),ba(null))}}function xg(Ei,$i,Ji){var Jr=od(Ei);if(!Jr){var As="";(Ei===void 0||typeof Ei=="object"&&Ei!==null&&Object.keys(Ei).length===0)&&(As+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Zs=yf($i);Zs?As+=Zs:As+=pd();var Cs;Ei===null?Cs="null":hi(Ei)?Cs="array":Ei!==void 0&&Ei.$$typeof===ae?(Cs="<"+(zs(Ei.type)||"Unknown")+" />",As=" Did you accidentally export a JSX literal instead of a component?"):Cs=typeof Ei,Ii("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Cs,As)}var Ws=Fs.apply(this,arguments);if(Ws==null)return Ws;if(Jr)for(var Aa=2;Aa<arguments.length;Aa++)Mc(arguments[Aa],Ei);return Ei===ve?Pa(Ws):go(Ws),Ws}var Tl=!1;function ko(Ei){var $i=xg.bind(null,Ei);return $i.type=Ei,Tl||(Tl=!0,Ti("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty($i,"type",{enumerable:!1,get:function(){return Ti("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:Ei}),Ei}}),$i}function Lu(Ei,$i,Ji){for(var Jr=Ta.apply(this,arguments),As=2;As<arguments.length;As++)Mc(arguments[As],Jr.type);return go(Jr),Jr}function Sg(Ei,$i){var Ji=ri.transition;ri.transition={};var Jr=ri.transition;ri.transition._updatedFibers=new Set;try{Ei()}finally{if(ri.transition=Ji,Ji===null&&Jr._updatedFibers){var As=Jr._updatedFibers.size;As>10&&Ti("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),Jr._updatedFibers.clear()}}}var Ku=!1,Pc=null;function Tg(Ei){if(Pc===null)try{var $i=("require"+Math.random()).slice(0,7),Ji=ie&&ie[$i];Pc=Ji.call(ie,"timers").setImmediate}catch{Pc=function(As){Ku===!1&&(Ku=!0,typeof MessageChannel>"u"&&Ii("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var Zs=new MessageChannel;Zs.port1.onmessage=As,Zs.port2.postMessage(void 0)}}return Pc(Ei)}var Jl=0,kc=!1;function Oc(Ei){{var $i=Jl;Jl++,si.current===null&&(si.current=[]);var Ji=si.isBatchingLegacy,Jr;try{if(si.isBatchingLegacy=!0,Jr=Ei(),!Ji&&si.didScheduleLegacyUpdate){var As=si.current;As!==null&&(si.didScheduleLegacyUpdate=!1,Nc(As))}}catch(Ua){throw eu($i),Ua}finally{si.isBatchingLegacy=Ji}if(Jr!==null&&typeof Jr=="object"&&typeof Jr.then=="function"){var Zs=Jr,Cs=!1,Ws={then:function(Ua,Va){Cs=!0,Zs.then(function(Ca){eu($i),Jl===0?md(Ca,Ua,Va):Ua(Ca)},function(Ca){eu($i),Va(Ca)})}};return!kc&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Cs||(kc=!0,Ii("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),Ws}else{var Aa=Jr;if(eu($i),Jl===0){var wa=si.current;wa!==null&&(Nc(wa),si.current=null);var Qa={then:function(Ua,Va){si.current===null?(si.current=[],md(Aa,Ua,Va)):Ua(Aa)}};return Qa}else{var Fa={then:function(Ua,Va){Ua(Aa)}};return Fa}}}}function eu(Ei){Ei!==Jl-1&&Ii("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Jl=Ei}function md(Ei,$i,Ji){{var Jr=si.current;if(Jr!==null)try{Nc(Jr),Tg(function(){Jr.length===0?(si.current=null,$i(Ei)):md(Ei,$i,Ji)})}catch(As){Ji(As)}else $i(Ei)}}var Fc=!1;function Nc(Ei){if(!Fc){Fc=!0;var $i=0;try{for(;$i<Ei.length;$i++){var Ji=Ei[$i];do Ji=Ji(!0);while(Ji!==null)}Ei.length=0}catch(Jr){throw Ei=Ei.slice($i+1),Jr}finally{Fc=!1}}}var Ef=xg,yd=Lu,yh=ko,vu={map:ea,forEach:ya,count:Vs,toArray:Ns,only:fo};Z.Children=vu,Z.Component=Ui,Z.Fragment=ve,Z.Profiler=Qe,Z.PureComponent=ps,Z.StrictMode=be,Z.Suspense=it,Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yi,Z.cloneElement=yd,Z.createContext=ja,Z.createElement=Ef,Z.createFactory=yh,Z.createRef=_s,Z.forwardRef=Sc,Z.isValidElement=vi,Z.lazy=Ql,Z.memo=hh,Z.startTransition=Sg,Z.unstable_act=Oc,Z.useCallback=Cg,Z.useContext=Zl,Z.useDebugValue=Ja,Z.useDeferredValue=yu,Z.useEffect=Eg,Z.useId=ga,Z.useImperativeHandle=up,Z.useInsertionEffect=vg,Z.useLayoutEffect=gh,Z.useMemo=lp,Z.useReducer=bc,Z.useRef=Ho,Z.useState=pf,Z.useSyncExternalStore=Bu,Z.useTransition=cp,Z.version=ee,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(react_development,react_development.exports)),react_development.exports}process.env.NODE_ENV==="production"?react.exports=requireReact_production_min():react.exports=requireReact_development();var reactExports=react.exports;const e$1=getDefaultExportFromCjs$1(reactExports),$2AODx$react=_mergeNamespaces({__proto__:null,default:e$1},[reactExports]);var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(ie){function Z(Ri,Pi){var xi=Ri.length;Ri.push(Pi);e:for(;0<xi;){var ki=xi-1>>>1,Li=Ri[ki];if(0<ye(Li,Pi))Ri[ki]=Pi,Ri[xi]=Li,xi=ki;else break e}}function ee(Ri){return Ri.length===0?null:Ri[0]}function ae(Ri){if(Ri.length===0)return null;var Pi=Ri[0],xi=Ri.pop();if(xi!==Pi){Ri[0]=xi;e:for(var ki=0,Li=Ri.length,Yr=Li>>>1;ki<Yr;){var Ui=2*(ki+1)-1,Vi=Ri[Ui],Kr=Ui+1,Wi=Ri[Kr];if(0>ye(Vi,xi))Kr<Li&&0>ye(Wi,Vi)?(Ri[ki]=Wi,Ri[Kr]=xi,ki=Kr):(Ri[ki]=Vi,Ri[Ui]=xi,ki=Ui);else if(Kr<Li&&0>ye(Wi,xi))Ri[ki]=Wi,Ri[Kr]=xi,ki=Kr;else break e}}return Pi}function ye(Ri,Pi){var xi=Ri.sortIndex-Pi.sortIndex;return xi!==0?xi:Ri.id-Pi.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ve=performance;ie.unstable_now=function(){return ve.now()}}else{var be=Date,Qe=be.now();ie.unstable_now=function(){return be.now()-Qe}}var Xe=[],Je=[],tt=1,it=null,st=3,lt=!1,ct=!1,gt=!1,ut=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,ei=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ni(Ri){for(var Pi=ee(Je);Pi!==null;){if(Pi.callback===null)ae(Je);else if(Pi.startTime<=Ri)ae(Je),Pi.sortIndex=Pi.expirationTime,Z(Xe,Pi);else break;Pi=ee(Je)}}function ri(Ri){if(gt=!1,ni(Ri),!ct)if(ee(Xe)!==null)ct=!0,Ti(si);else{var Pi=ee(Je);Pi!==null&&Ii(ri,Pi.startTime-Ri)}}function si(Ri,Pi){ct=!1,gt&&(gt=!1,mt(ci),ci=-1),lt=!0;var xi=st;try{for(ni(Pi),it=ee(Xe);it!==null&&(!(it.expirationTime>Pi)||Ri&&!gi());){var ki=it.callback;if(typeof ki=="function"){it.callback=null,st=it.priorityLevel;var Li=ki(it.expirationTime<=Pi);Pi=ie.unstable_now(),typeof Li=="function"?it.callback=Li:it===ee(Xe)&&ae(Xe),ni(Pi)}else ae(Xe);it=ee(Xe)}if(it!==null)var Yr=!0;else{var Ui=ee(Je);Ui!==null&&Ii(ri,Ui.startTime-Pi),Yr=!1}return Yr}finally{it=null,st=xi,lt=!1}}var li=!1,ai=null,ci=-1,Ci=5,pi=-1;function gi(){return!(ie.unstable_now()-pi<Ci)}function _i(){if(ai!==null){var Ri=ie.unstable_now();pi=Ri;var Pi=!0;try{Pi=ai(!0,Ri)}finally{Pi?bi():(li=!1,ai=null)}}else li=!1}var bi;if(typeof ei=="function")bi=function(){ei(_i)};else if(typeof MessageChannel<"u"){var Mi=new MessageChannel,yi=Mi.port2;Mi.port1.onmessage=_i,bi=function(){yi.postMessage(null)}}else bi=function(){ut(_i,0)};function Ti(Ri){ai=Ri,li||(li=!0,bi())}function Ii(Ri,Pi){ci=ut(function(){Ri(ie.unstable_now())},Pi)}ie.unstable_IdlePriority=5,ie.unstable_ImmediatePriority=1,ie.unstable_LowPriority=4,ie.unstable_NormalPriority=3,ie.unstable_Profiling=null,ie.unstable_UserBlockingPriority=2,ie.unstable_cancelCallback=function(Ri){Ri.callback=null},ie.unstable_continueExecution=function(){ct||lt||(ct=!0,Ti(si))},ie.unstable_forceFrameRate=function(Ri){0>Ri||125<Ri?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ci=0<Ri?Math.floor(1e3/Ri):5},ie.unstable_getCurrentPriorityLevel=function(){return st},ie.unstable_getFirstCallbackNode=function(){return ee(Xe)},ie.unstable_next=function(Ri){switch(st){case 1:case 2:case 3:var Pi=3;break;default:Pi=st}var xi=st;st=Pi;try{return Ri()}finally{st=xi}},ie.unstable_pauseExecution=function(){},ie.unstable_requestPaint=function(){},ie.unstable_runWithPriority=function(Ri,Pi){switch(Ri){case 1:case 2:case 3:case 4:case 5:break;default:Ri=3}var xi=st;st=Ri;try{return Pi()}finally{st=xi}},ie.unstable_scheduleCallback=function(Ri,Pi,xi){var ki=ie.unstable_now();switch(typeof xi=="object"&&xi!==null?(xi=xi.delay,xi=typeof xi=="number"&&0<xi?ki+xi:ki):xi=ki,Ri){case 1:var Li=-1;break;case 2:Li=250;break;case 5:Li=1073741823;break;case 4:Li=1e4;break;default:Li=5e3}return Li=xi+Li,Ri={id:tt++,callback:Pi,priorityLevel:Ri,startTime:xi,expirationTime:Li,sortIndex:-1},xi>ki?(Ri.sortIndex=xi,Z(Je,Ri),ee(Xe)===null&&Ri===ee(Je)&&(gt?(mt(ci),ci=-1):gt=!0,Ii(ri,xi-ki))):(Ri.sortIndex=Li,Z(Xe,Ri),ct||lt||(ct=!0,Ti(si))),Ri},ie.unstable_shouldYield=gi,ie.unstable_wrapCallback=function(Ri){var Pi=st;return function(){var xi=st;st=Pi;try{return Ri.apply(this,arguments)}finally{st=xi}}}}(scheduler_production_min)),scheduler_production_min}var scheduler_development={};/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_development;function requireScheduler_development(){return hasRequiredScheduler_development||(hasRequiredScheduler_development=1,function(ie){process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var Z=!1,ee=!1,ae=5;function ye(hs,Fs){var ca=hs.length;hs.push(Fs),Qe(hs,Fs,ca)}function ve(hs){return hs.length===0?null:hs[0]}function be(hs){if(hs.length===0)return null;var Fs=hs[0],ca=hs.pop();return ca!==Fs&&(hs[0]=ca,Xe(hs,ca,0)),Fs}function Qe(hs,Fs,ca){for(var Ta=ca;Ta>0;){var vi=Ta-1>>>1,mi=hs[vi];if(Je(mi,Fs)>0)hs[vi]=Fs,hs[Ta]=mi,Ta=vi;else return}}function Xe(hs,Fs,ca){for(var Ta=ca,vi=hs.length,mi=vi>>>1;Ta<mi;){var Fi=(Ta+1)*2-1,Ni=hs[Fi],is=Fi+1,vs=hs[is];if(Je(Ni,Fs)<0)is<vi&&Je(vs,Ni)<0?(hs[Ta]=vs,hs[is]=Fs,Ta=is):(hs[Ta]=Ni,hs[Fi]=Fs,Ta=Fi);else if(is<vi&&Je(vs,Fs)<0)hs[Ta]=vs,hs[is]=Fs,Ta=is;else return}}function Je(hs,Fs){var ca=hs.sortIndex-Fs.sortIndex;return ca!==0?ca:hs.id-Fs.id}var tt=1,it=2,st=3,lt=4,ct=5;function gt(hs,Fs){}var ut=typeof performance=="object"&&typeof performance.now=="function";if(ut){var mt=performance;ie.unstable_now=function(){return mt.now()}}else{var ei=Date,ni=ei.now();ie.unstable_now=function(){return ei.now()-ni}}var ri=1073741823,si=-1,li=250,ai=5e3,ci=1e4,Ci=ri,pi=[],gi=[],_i=1,bi=null,Mi=st,yi=!1,Ti=!1,Ii=!1,Ri=typeof setTimeout=="function"?setTimeout:null,Pi=typeof clearTimeout=="function"?clearTimeout:null,xi=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ki(hs){for(var Fs=ve(gi);Fs!==null;){if(Fs.callback===null)be(gi);else if(Fs.startTime<=hs)be(gi),Fs.sortIndex=Fs.expirationTime,ye(pi,Fs);else return;Fs=ve(gi)}}function Li(hs){if(Ii=!1,ki(hs),!Ti)if(ve(pi)!==null)Ti=!0,ma(Yr);else{var Fs=ve(gi);Fs!==null&&ha(Li,Fs.startTime-hs)}}function Yr(hs,Fs){Ti=!1,Ii&&(Ii=!1,za()),yi=!0;var ca=Mi;try{var Ta;if(!ee)return Ui(hs,Fs)}finally{bi=null,Mi=ca,yi=!1}}function Ui(hs,Fs){var ca=Fs;for(ki(ca),bi=ve(pi);bi!==null&&!Z&&!(bi.expirationTime>ca&&(!hs||gs()));){var Ta=bi.callback;if(typeof Ta=="function"){bi.callback=null,Mi=bi.priorityLevel;var vi=bi.expirationTime<=ca,mi=Ta(vi);ca=ie.unstable_now(),typeof mi=="function"?bi.callback=mi:bi===ve(pi)&&be(pi),ki(ca)}else be(pi);bi=ve(pi)}if(bi!==null)return!0;var Fi=ve(gi);return Fi!==null&&ha(Li,Fi.startTime-ca),!1}function Vi(hs,Fs){switch(hs){case tt:case it:case st:case lt:case ct:break;default:hs=st}var ca=Mi;Mi=hs;try{return Fs()}finally{Mi=ca}}function Kr(hs){var Fs;switch(Mi){case tt:case it:case st:Fs=st;break;default:Fs=Mi;break}var ca=Mi;Mi=Fs;try{return hs()}finally{Mi=ca}}function Wi(hs){var Fs=Mi;return function(){var ca=Mi;Mi=Fs;try{return hs.apply(this,arguments)}finally{Mi=ca}}}function Zr(hs,Fs,ca){var Ta=ie.unstable_now(),vi;if(typeof ca=="object"&&ca!==null){var mi=ca.delay;typeof mi=="number"&&mi>0?vi=Ta+mi:vi=Ta}else vi=Ta;var Fi;switch(hs){case tt:Fi=si;break;case it:Fi=li;break;case ct:Fi=Ci;break;case lt:Fi=ci;break;case st:default:Fi=ai;break}var Ni=vi+Fi,is={id:_i++,callback:Fs,priorityLevel:hs,startTime:vi,expirationTime:Ni,sortIndex:-1};return vi>Ta?(is.sortIndex=vi,ye(gi,is),ve(pi)===null&&is===ve(gi)&&(Ii?za():Ii=!0,ha(Li,vi-Ta))):(is.sortIndex=Ni,ye(pi,is),!Ti&&!yi&&(Ti=!0,ma(Yr))),is}function ps(){}function Is(){!Ti&&!yi&&(Ti=!0,ma(Yr))}function _s(){return ve(pi)}function ws(hs){hs.callback=null}function hi(){return Mi}var Bi=!1,qi=null,Xr=-1,rs=ae,Os=-1;function gs(){var hs=ie.unstable_now()-Os;return!(hs<rs)}function zs(){}function $s(hs){if(hs<0||hs>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}hs>0?rs=Math.floor(1e3/hs):rs=ae}var Us=function(){if(qi!==null){var hs=ie.unstable_now();Os=hs;var Fs=!0,ca=!0;try{ca=qi(Fs,hs)}finally{ca?xs():(Bi=!1,qi=null)}}else Bi=!1},xs;if(typeof xi=="function")xs=function(){xi(Us)};else if(typeof MessageChannel<"u"){var sa=new MessageChannel,Gs=sa.port2;sa.port1.onmessage=Us,xs=function(){Gs.postMessage(null)}}else xs=function(){Ri(Us,0)};function ma(hs){qi=hs,Bi||(Bi=!0,xs())}function ha(hs,Fs){Xr=Ri(function(){hs(ie.unstable_now())},Fs)}function za(){Pi(Xr),Xr=-1}var Io=zs,wo=null;ie.unstable_IdlePriority=ct,ie.unstable_ImmediatePriority=tt,ie.unstable_LowPriority=lt,ie.unstable_NormalPriority=st,ie.unstable_Profiling=wo,ie.unstable_UserBlockingPriority=it,ie.unstable_cancelCallback=ws,ie.unstable_continueExecution=Is,ie.unstable_forceFrameRate=$s,ie.unstable_getCurrentPriorityLevel=hi,ie.unstable_getFirstCallbackNode=_s,ie.unstable_next=Kr,ie.unstable_pauseExecution=ps,ie.unstable_requestPaint=Io,ie.unstable_runWithPriority=Vi,ie.unstable_scheduleCallback=Zr,ie.unstable_shouldYield=gs,ie.unstable_wrapCallback=Wi,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(scheduler_development)),scheduler_development}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,process.env.NODE_ENV==="production"?scheduler.exports=requireScheduler_production_min():scheduler.exports=requireScheduler_development()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var ie=reactExports,Z=requireScheduler();function ee(nt){for(var rt="https://reactjs.org/docs/error-decoder.html?invariant="+nt,dt=1;dt<arguments.length;dt++)rt+="&args[]="+encodeURIComponent(arguments[dt]);return"Minified React error #"+nt+"; visit "+rt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ae=new Set,ye={};function ve(nt,rt){be(nt,rt),be(nt+"Capture",rt)}function be(nt,rt){for(ye[nt]=rt,nt=0;nt<rt.length;nt++)ae.add(rt[nt])}var Qe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xe=Object.prototype.hasOwnProperty,Je=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tt={},it={};function st(nt){return Xe.call(it,nt)?!0:Xe.call(tt,nt)?!1:Je.test(nt)?it[nt]=!0:(tt[nt]=!0,!1)}function lt(nt,rt,dt,ti){if(dt!==null&&dt.type===0)return!1;switch(typeof rt){case"function":case"symbol":return!0;case"boolean":return ti?!1:dt!==null?!dt.acceptsBooleans:(nt=nt.toLowerCase().slice(0,5),nt!=="data-"&&nt!=="aria-");default:return!1}}function ct(nt,rt,dt,ti){if(rt===null||typeof rt>"u"||lt(nt,rt,dt,ti))return!0;if(ti)return!1;if(dt!==null)switch(dt.type){case 3:return!rt;case 4:return rt===!1;case 5:return isNaN(rt);case 6:return isNaN(rt)||1>rt}return!1}function gt(nt,rt,dt,ti,oi,fi,Si){this.acceptsBooleans=rt===2||rt===3||rt===4,this.attributeName=ti,this.attributeNamespace=oi,this.mustUseProperty=dt,this.propertyName=nt,this.type=rt,this.sanitizeURL=fi,this.removeEmptyString=Si}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(nt){ut[nt]=new gt(nt,0,!1,nt,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(nt){var rt=nt[0];ut[rt]=new gt(rt,1,!1,nt[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(nt){ut[nt]=new gt(nt,2,!1,nt.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(nt){ut[nt]=new gt(nt,2,!1,nt,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(nt){ut[nt]=new gt(nt,3,!1,nt.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(nt){ut[nt]=new gt(nt,3,!0,nt,null,!1,!1)}),["capture","download"].forEach(function(nt){ut[nt]=new gt(nt,4,!1,nt,null,!1,!1)}),["cols","rows","size","span"].forEach(function(nt){ut[nt]=new gt(nt,6,!1,nt,null,!1,!1)}),["rowSpan","start"].forEach(function(nt){ut[nt]=new gt(nt,5,!1,nt.toLowerCase(),null,!1,!1)});var mt=/[\-:]([a-z])/g;function ei(nt){return nt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(nt){var rt=nt.replace(mt,ei);ut[rt]=new gt(rt,1,!1,nt,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(nt){var rt=nt.replace(mt,ei);ut[rt]=new gt(rt,1,!1,nt,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(nt){var rt=nt.replace(mt,ei);ut[rt]=new gt(rt,1,!1,nt,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(nt){ut[nt]=new gt(nt,1,!1,nt.toLowerCase(),null,!1,!1)}),ut.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(nt){ut[nt]=new gt(nt,1,!1,nt.toLowerCase(),null,!0,!0)});function ni(nt,rt,dt,ti){var oi=ut.hasOwnProperty(rt)?ut[rt]:null;(oi!==null?oi.type!==0:ti||!(2<rt.length)||rt[0]!=="o"&&rt[0]!=="O"||rt[1]!=="n"&&rt[1]!=="N")&&(ct(rt,dt,oi,ti)&&(dt=null),ti||oi===null?st(rt)&&(dt===null?nt.removeAttribute(rt):nt.setAttribute(rt,""+dt)):oi.mustUseProperty?nt[oi.propertyName]=dt===null?oi.type===3?!1:"":dt:(rt=oi.attributeName,ti=oi.attributeNamespace,dt===null?nt.removeAttribute(rt):(oi=oi.type,dt=oi===3||oi===4&&dt===!0?"":""+dt,ti?nt.setAttributeNS(ti,rt,dt):nt.setAttribute(rt,dt))))}var ri=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,si=Symbol.for("react.element"),li=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),ci=Symbol.for("react.strict_mode"),Ci=Symbol.for("react.profiler"),pi=Symbol.for("react.provider"),gi=Symbol.for("react.context"),_i=Symbol.for("react.forward_ref"),bi=Symbol.for("react.suspense"),Mi=Symbol.for("react.suspense_list"),yi=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),Ii=Symbol.for("react.offscreen"),Ri=Symbol.iterator;function Pi(nt){return nt===null||typeof nt!="object"?null:(nt=Ri&&nt[Ri]||nt["@@iterator"],typeof nt=="function"?nt:null)}var xi=Object.assign,ki;function Li(nt){if(ki===void 0)try{throw Error()}catch(dt){var rt=dt.stack.trim().match(/\n( *(at )?)/);ki=rt&&rt[1]||""}return`
`+ki+nt}var Yr=!1;function Ui(nt,rt){if(!nt||Yr)return"";Yr=!0;var dt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(rt)if(rt=function(){throw Error()},Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(Qr){var ti=Qr}Reflect.construct(nt,[],rt)}else{try{rt.call()}catch(Qr){ti=Qr}nt.call(rt.prototype)}else{try{throw Error()}catch(Qr){ti=Qr}nt()}}catch(Qr){if(Qr&&ti&&typeof Qr.stack=="string"){for(var oi=Qr.stack.split(`
`),fi=ti.stack.split(`
`),Si=oi.length-1,Oi=fi.length-1;1<=Si&&0<=Oi&&oi[Si]!==fi[Oi];)Oi--;for(;1<=Si&&0<=Oi;Si--,Oi--)if(oi[Si]!==fi[Oi]){if(Si!==1||Oi!==1)do if(Si--,Oi--,0>Oi||oi[Si]!==fi[Oi]){var Qi=`
`+oi[Si].replace(" at new "," at ");return nt.displayName&&Qi.includes("<anonymous>")&&(Qi=Qi.replace("<anonymous>",nt.displayName)),Qi}while(1<=Si&&0<=Oi);break}}}finally{Yr=!1,Error.prepareStackTrace=dt}return(nt=nt?nt.displayName||nt.name:"")?Li(nt):""}function Vi(nt){switch(nt.tag){case 5:return Li(nt.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return nt=Ui(nt.type,!1),nt;case 11:return nt=Ui(nt.type.render,!1),nt;case 1:return nt=Ui(nt.type,!0),nt;default:return""}}function Kr(nt){if(nt==null)return null;if(typeof nt=="function")return nt.displayName||nt.name||null;if(typeof nt=="string")return nt;switch(nt){case ai:return"Fragment";case li:return"Portal";case Ci:return"Profiler";case ci:return"StrictMode";case bi:return"Suspense";case Mi:return"SuspenseList"}if(typeof nt=="object")switch(nt.$$typeof){case gi:return(nt.displayName||"Context")+".Consumer";case pi:return(nt._context.displayName||"Context")+".Provider";case _i:var rt=nt.render;return nt=nt.displayName,nt||(nt=rt.displayName||rt.name||"",nt=nt!==""?"ForwardRef("+nt+")":"ForwardRef"),nt;case yi:return rt=nt.displayName||null,rt!==null?rt:Kr(nt.type)||"Memo";case Ti:rt=nt._payload,nt=nt._init;try{return Kr(nt(rt))}catch{}}return null}function Wi(nt){var rt=nt.type;switch(nt.tag){case 24:return"Cache";case 9:return(rt.displayName||"Context")+".Consumer";case 10:return(rt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return nt=rt.render,nt=nt.displayName||nt.name||"",rt.displayName||(nt!==""?"ForwardRef("+nt+")":"ForwardRef");case 7:return"Fragment";case 5:return rt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kr(rt);case 8:return rt===ci?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof rt=="function")return rt.displayName||rt.name||null;if(typeof rt=="string")return rt}return null}function Zr(nt){switch(typeof nt){case"boolean":case"number":case"string":case"undefined":return nt;case"object":return nt;default:return""}}function ps(nt){var rt=nt.type;return(nt=nt.nodeName)&&nt.toLowerCase()==="input"&&(rt==="checkbox"||rt==="radio")}function Is(nt){var rt=ps(nt)?"checked":"value",dt=Object.getOwnPropertyDescriptor(nt.constructor.prototype,rt),ti=""+nt[rt];if(!nt.hasOwnProperty(rt)&&typeof dt<"u"&&typeof dt.get=="function"&&typeof dt.set=="function"){var oi=dt.get,fi=dt.set;return Object.defineProperty(nt,rt,{configurable:!0,get:function(){return oi.call(this)},set:function(Si){ti=""+Si,fi.call(this,Si)}}),Object.defineProperty(nt,rt,{enumerable:dt.enumerable}),{getValue:function(){return ti},setValue:function(Si){ti=""+Si},stopTracking:function(){nt._valueTracker=null,delete nt[rt]}}}}function _s(nt){nt._valueTracker||(nt._valueTracker=Is(nt))}function ws(nt){if(!nt)return!1;var rt=nt._valueTracker;if(!rt)return!0;var dt=rt.getValue(),ti="";return nt&&(ti=ps(nt)?nt.checked?"true":"false":nt.value),nt=ti,nt!==dt?(rt.setValue(nt),!0):!1}function hi(nt){if(nt=nt||(typeof document<"u"?document:void 0),typeof nt>"u")return null;try{return nt.activeElement||nt.body}catch{return nt.body}}function Bi(nt,rt){var dt=rt.checked;return xi({},rt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:dt??nt._wrapperState.initialChecked})}function qi(nt,rt){var dt=rt.defaultValue==null?"":rt.defaultValue,ti=rt.checked!=null?rt.checked:rt.defaultChecked;dt=Zr(rt.value!=null?rt.value:dt),nt._wrapperState={initialChecked:ti,initialValue:dt,controlled:rt.type==="checkbox"||rt.type==="radio"?rt.checked!=null:rt.value!=null}}function Xr(nt,rt){rt=rt.checked,rt!=null&&ni(nt,"checked",rt,!1)}function rs(nt,rt){Xr(nt,rt);var dt=Zr(rt.value),ti=rt.type;if(dt!=null)ti==="number"?(dt===0&&nt.value===""||nt.value!=dt)&&(nt.value=""+dt):nt.value!==""+dt&&(nt.value=""+dt);else if(ti==="submit"||ti==="reset"){nt.removeAttribute("value");return}rt.hasOwnProperty("value")?gs(nt,rt.type,dt):rt.hasOwnProperty("defaultValue")&&gs(nt,rt.type,Zr(rt.defaultValue)),rt.checked==null&&rt.defaultChecked!=null&&(nt.defaultChecked=!!rt.defaultChecked)}function Os(nt,rt,dt){if(rt.hasOwnProperty("value")||rt.hasOwnProperty("defaultValue")){var ti=rt.type;if(!(ti!=="submit"&&ti!=="reset"||rt.value!==void 0&&rt.value!==null))return;rt=""+nt._wrapperState.initialValue,dt||rt===nt.value||(nt.value=rt),nt.defaultValue=rt}dt=nt.name,dt!==""&&(nt.name=""),nt.defaultChecked=!!nt._wrapperState.initialChecked,dt!==""&&(nt.name=dt)}function gs(nt,rt,dt){(rt!=="number"||hi(nt.ownerDocument)!==nt)&&(dt==null?nt.defaultValue=""+nt._wrapperState.initialValue:nt.defaultValue!==""+dt&&(nt.defaultValue=""+dt))}var zs=Array.isArray;function $s(nt,rt,dt,ti){if(nt=nt.options,rt){rt={};for(var oi=0;oi<dt.length;oi++)rt["$"+dt[oi]]=!0;for(dt=0;dt<nt.length;dt++)oi=rt.hasOwnProperty("$"+nt[dt].value),nt[dt].selected!==oi&&(nt[dt].selected=oi),oi&&ti&&(nt[dt].defaultSelected=!0)}else{for(dt=""+Zr(dt),rt=null,oi=0;oi<nt.length;oi++){if(nt[oi].value===dt){nt[oi].selected=!0,ti&&(nt[oi].defaultSelected=!0);return}rt!==null||nt[oi].disabled||(rt=nt[oi])}rt!==null&&(rt.selected=!0)}}function Us(nt,rt){if(rt.dangerouslySetInnerHTML!=null)throw Error(ee(91));return xi({},rt,{value:void 0,defaultValue:void 0,children:""+nt._wrapperState.initialValue})}function xs(nt,rt){var dt=rt.value;if(dt==null){if(dt=rt.children,rt=rt.defaultValue,dt!=null){if(rt!=null)throw Error(ee(92));if(zs(dt)){if(1<dt.length)throw Error(ee(93));dt=dt[0]}rt=dt}rt==null&&(rt=""),dt=rt}nt._wrapperState={initialValue:Zr(dt)}}function sa(nt,rt){var dt=Zr(rt.value),ti=Zr(rt.defaultValue);dt!=null&&(dt=""+dt,dt!==nt.value&&(nt.value=dt),rt.defaultValue==null&&nt.defaultValue!==dt&&(nt.defaultValue=dt)),ti!=null&&(nt.defaultValue=""+ti)}function Gs(nt){var rt=nt.textContent;rt===nt._wrapperState.initialValue&&rt!==""&&rt!==null&&(nt.value=rt)}function ma(nt){switch(nt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ha(nt,rt){return nt==null||nt==="http://www.w3.org/1999/xhtml"?ma(rt):nt==="http://www.w3.org/2000/svg"&&rt==="foreignObject"?"http://www.w3.org/1999/xhtml":nt}var za,Io=function(nt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(rt,dt,ti,oi){MSApp.execUnsafeLocalFunction(function(){return nt(rt,dt,ti,oi)})}:nt}(function(nt,rt){if(nt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in nt)nt.innerHTML=rt;else{for(za=za||document.createElement("div"),za.innerHTML="<svg>"+rt.valueOf().toString()+"</svg>",rt=za.firstChild;nt.firstChild;)nt.removeChild(nt.firstChild);for(;rt.firstChild;)nt.appendChild(rt.firstChild)}});function wo(nt,rt){if(rt){var dt=nt.firstChild;if(dt&&dt===nt.lastChild&&dt.nodeType===3){dt.nodeValue=rt;return}}nt.textContent=rt}var hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fs=["Webkit","ms","Moz","O"];Object.keys(hs).forEach(function(nt){Fs.forEach(function(rt){rt=rt+nt.charAt(0).toUpperCase()+nt.substring(1),hs[rt]=hs[nt]})});function ca(nt,rt,dt){return rt==null||typeof rt=="boolean"||rt===""?"":dt||typeof rt!="number"||rt===0||hs.hasOwnProperty(nt)&&hs[nt]?(""+rt).trim():rt+"px"}function Ta(nt,rt){nt=nt.style;for(var dt in rt)if(rt.hasOwnProperty(dt)){var ti=dt.indexOf("--")===0,oi=ca(dt,rt[dt],ti);dt==="float"&&(dt="cssFloat"),ti?nt.setProperty(dt,oi):nt[dt]=oi}}var vi=xi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mi(nt,rt){if(rt){if(vi[nt]&&(rt.children!=null||rt.dangerouslySetInnerHTML!=null))throw Error(ee(137,nt));if(rt.dangerouslySetInnerHTML!=null){if(rt.children!=null)throw Error(ee(60));if(typeof rt.dangerouslySetInnerHTML!="object"||!("__html"in rt.dangerouslySetInnerHTML))throw Error(ee(61))}if(rt.style!=null&&typeof rt.style!="object")throw Error(ee(62))}}function Fi(nt,rt){if(nt.indexOf("-")===-1)return typeof rt.is=="string";switch(nt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ni=null;function is(nt){return nt=nt.target||nt.srcElement||window,nt.correspondingUseElement&&(nt=nt.correspondingUseElement),nt.nodeType===3?nt.parentNode:nt}var vs=null,us=null,as=null;function js(nt){if(nt=Lh(nt)){if(typeof vs!="function")throw Error(ee(280));var rt=nt.stateNode;rt&&(rt=Ks(rt),vs(nt.stateNode,nt.type,rt))}}function ea(nt){us?as?as.push(nt):as=[nt]:us=nt}function Vs(){if(us){var nt=us,rt=as;if(as=us=null,js(nt),rt)for(nt=0;nt<rt.length;nt++)js(rt[nt])}}function ya(nt,rt){return nt(rt)}function Ns(){}var fo=!1;function ja(nt,rt,dt){if(fo)return nt(rt,dt);fo=!0;try{return ya(nt,rt,dt)}finally{fo=!1,(us!==null||as!==null)&&(Ns(),Vs())}}function xo(nt,rt){var dt=nt.stateNode;if(dt===null)return null;var ti=Ks(dt);if(ti===null)return null;dt=ti[rt];e:switch(rt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ti=!ti.disabled)||(nt=nt.type,ti=!(nt==="button"||nt==="input"||nt==="select"||nt==="textarea")),nt=!ti;break e;default:nt=!1}if(nt)return null;if(dt&&typeof dt!="function")throw Error(ee(231,rt,typeof dt));return dt}var ll=!1;if(Qe)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){ll=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{ll=!1}function yo(nt,rt,dt,ti,oi,fi,Si,Oi,Qi){var Qr=Array.prototype.slice.call(arguments,3);try{rt.apply(dt,Qr)}catch(ls){this.onError(ls)}}var no=!1,Ql=null,Sc=!1,Tc=null,od={onError:function(nt){no=!0,Ql=nt}};function hh(nt,rt,dt,ti,oi,fi,Si,Oi,Qi){no=!1,Ql=null,yo.apply(od,arguments)}function ho(nt,rt,dt,ti,oi,fi,Si,Oi,Qi){if(hh.apply(this,arguments),no){if(no){var Qr=Ql;no=!1,Ql=null}else throw Error(ee(198));Sc||(Sc=!0,Tc=Qr)}}function Zl(nt){var rt=nt,dt=nt;if(nt.alternate)for(;rt.return;)rt=rt.return;else{nt=rt;do rt=nt,rt.flags&4098&&(dt=rt.return),nt=rt.return;while(nt)}return rt.tag===3?dt:null}function pf(nt){if(nt.tag===13){var rt=nt.memoizedState;if(rt===null&&(nt=nt.alternate,nt!==null&&(rt=nt.memoizedState)),rt!==null)return rt.dehydrated}return null}function bc(nt){if(Zl(nt)!==nt)throw Error(ee(188))}function Ho(nt){var rt=nt.alternate;if(!rt){if(rt=Zl(nt),rt===null)throw Error(ee(188));return rt!==nt?null:nt}for(var dt=nt,ti=rt;;){var oi=dt.return;if(oi===null)break;var fi=oi.alternate;if(fi===null){if(ti=oi.return,ti!==null){dt=ti;continue}break}if(oi.child===fi.child){for(fi=oi.child;fi;){if(fi===dt)return bc(oi),nt;if(fi===ti)return bc(oi),rt;fi=fi.sibling}throw Error(ee(188))}if(dt.return!==ti.return)dt=oi,ti=fi;else{for(var Si=!1,Oi=oi.child;Oi;){if(Oi===dt){Si=!0,dt=oi,ti=fi;break}if(Oi===ti){Si=!0,ti=oi,dt=fi;break}Oi=Oi.sibling}if(!Si){for(Oi=fi.child;Oi;){if(Oi===dt){Si=!0,dt=fi,ti=oi;break}if(Oi===ti){Si=!0,ti=fi,dt=oi;break}Oi=Oi.sibling}if(!Si)throw Error(ee(189))}}if(dt.alternate!==ti)throw Error(ee(190))}if(dt.tag!==3)throw Error(ee(188));return dt.stateNode.current===dt?nt:rt}function Eg(nt){return nt=Ho(nt),nt!==null?vg(nt):null}function vg(nt){if(nt.tag===5||nt.tag===6)return nt;for(nt=nt.child;nt!==null;){var rt=vg(nt);if(rt!==null)return rt;nt=nt.sibling}return null}var gh=Z.unstable_scheduleCallback,Cg=Z.unstable_cancelCallback,lp=Z.unstable_shouldYield,up=Z.unstable_requestPaint,Ja=Z.unstable_now,cp=Z.unstable_getCurrentPriorityLevel,yu=Z.unstable_ImmediatePriority,ga=Z.unstable_UserBlockingPriority,Bu=Z.unstable_NormalPriority,_c=Z.unstable_LowPriority,ld=Z.unstable_IdlePriority,wc=null,xl=null;function Ah(nt){if(xl&&typeof xl.onCommitFiberRoot=="function")try{xl.onCommitFiberRoot(wc,nt,void 0,(nt.current.flags&128)===128)}catch{}}var ul=Math.clz32?Math.clz32:Ig,ph=Math.log,mh=Math.LN2;function Ig(nt){return nt>>>=0,nt===0?32:31-(ph(nt)/mh|0)|0}var ud=64,Rc=4194304;function Eu(nt){switch(nt&-nt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return nt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return nt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return nt}}function cl(nt,rt){var dt=nt.pendingLanes;if(dt===0)return 0;var ti=0,oi=nt.suspendedLanes,fi=nt.pingedLanes,Si=dt&268435455;if(Si!==0){var Oi=Si&~oi;Oi!==0?ti=Eu(Oi):(fi&=Si,fi!==0&&(ti=Eu(fi)))}else Si=dt&~oi,Si!==0?ti=Eu(Si):fi!==0&&(ti=Eu(fi));if(ti===0)return 0;if(rt!==0&&rt!==ti&&!(rt&oi)&&(oi=ti&-ti,fi=rt&-rt,oi>=fi||oi===16&&(fi&4194240)!==0))return rt;if(ti&4&&(ti|=dt&16),rt=nt.entangledLanes,rt!==0)for(nt=nt.entanglements,rt&=ti;0<rt;)dt=31-ul(rt),oi=1<<dt,ti|=nt[dt],rt&=~oi;return ti}function Bc(nt,rt){switch(nt){case 1:case 2:case 4:return rt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return rt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dc(nt,rt){for(var dt=nt.suspendedLanes,ti=nt.pingedLanes,oi=nt.expirationTimes,fi=nt.pendingLanes;0<fi;){var Si=31-ul(fi),Oi=1<<Si,Qi=oi[Si];Qi===-1?(!(Oi&dt)||Oi&ti)&&(oi[Si]=Bc(Oi,rt)):Qi<=rt&&(nt.expiredLanes|=Oi),fi&=~Oi}}function Lc(nt){return nt=nt.pendingLanes&-1073741825,nt!==0?nt:nt&1073741824?1073741824:0}function cd(){var nt=ud;return ud<<=1,!(ud&4194240)&&(ud=64),nt}function dd(nt){for(var rt=[],dt=0;31>dt;dt++)rt.push(nt);return rt}function qu(nt,rt,dt){nt.pendingLanes|=rt,rt!==536870912&&(nt.suspendedLanes=0,nt.pingedLanes=0),nt=nt.eventTimes,rt=31-ul(rt),nt[rt]=dt}function fp(nt,rt){var dt=nt.pendingLanes&~rt;nt.pendingLanes=rt,nt.suspendedLanes=0,nt.pingedLanes=0,nt.expiredLanes&=rt,nt.mutableReadLanes&=rt,nt.entangledLanes&=rt,rt=nt.entanglements;var ti=nt.eventTimes;for(nt=nt.expirationTimes;0<dt;){var oi=31-ul(dt),fi=1<<oi;rt[oi]=0,ti[oi]=-1,nt[oi]=-1,dt&=~fi}}function Du(nt,rt){var dt=nt.entangledLanes|=rt;for(nt=nt.entanglements;dt;){var ti=31-ul(dt),oi=1<<ti;oi&rt|nt[ti]&rt&&(nt[ti]|=rt),dt&=~oi}}var Ba=0;function hd(nt){return nt&=-nt,1<nt?4<nt?nt&268435455?16:536870912:4:1}var mf,gd,ba,Ad,pd,aa=!1,yf=[],io=null,Sl=null,dl=null,Mc=new Map,go=new Map,Pa=[],xg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tl(nt,rt){switch(nt){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":Mc.delete(rt.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(rt.pointerId)}}function ko(nt,rt,dt,ti,oi,fi){return nt===null||nt.nativeEvent!==fi?(nt={blockedOn:rt,domEventName:dt,eventSystemFlags:ti,nativeEvent:fi,targetContainers:[oi]},rt!==null&&(rt=Lh(rt),rt!==null&&gd(rt)),nt):(nt.eventSystemFlags|=ti,rt=nt.targetContainers,oi!==null&&rt.indexOf(oi)===-1&&rt.push(oi),nt)}function Lu(nt,rt,dt,ti,oi){switch(rt){case"focusin":return io=ko(io,nt,rt,dt,ti,oi),!0;case"dragenter":return Sl=ko(Sl,nt,rt,dt,ti,oi),!0;case"mouseover":return dl=ko(dl,nt,rt,dt,ti,oi),!0;case"pointerover":var fi=oi.pointerId;return Mc.set(fi,ko(Mc.get(fi)||null,nt,rt,dt,ti,oi)),!0;case"gotpointercapture":return fi=oi.pointerId,go.set(fi,ko(go.get(fi)||null,nt,rt,dt,ti,oi)),!0}return!1}function Sg(nt){var rt=nu(nt.target);if(rt!==null){var dt=Zl(rt);if(dt!==null){if(rt=dt.tag,rt===13){if(rt=pf(dt),rt!==null){nt.blockedOn=rt,pd(nt.priority,function(){ba(dt)});return}}else if(rt===3&&dt.stateNode.current.memoizedState.isDehydrated){nt.blockedOn=dt.tag===3?dt.stateNode.containerInfo:null;return}}}nt.blockedOn=null}function Ku(nt){if(nt.blockedOn!==null)return!1;for(var rt=nt.targetContainers;0<rt.length;){var dt=yd(nt.domEventName,nt.eventSystemFlags,rt[0],nt.nativeEvent);if(dt===null){dt=nt.nativeEvent;var ti=new dt.constructor(dt.type,dt);Ni=ti,dt.target.dispatchEvent(ti),Ni=null}else return rt=Lh(dt),rt!==null&&gd(rt),nt.blockedOn=dt,!1;rt.shift()}return!0}function Pc(nt,rt,dt){Ku(nt)&&dt.delete(rt)}function Tg(){aa=!1,io!==null&&Ku(io)&&(io=null),Sl!==null&&Ku(Sl)&&(Sl=null),dl!==null&&Ku(dl)&&(dl=null),Mc.forEach(Pc),go.forEach(Pc)}function Jl(nt,rt){nt.blockedOn===rt&&(nt.blockedOn=null,aa||(aa=!0,Z.unstable_scheduleCallback(Z.unstable_NormalPriority,Tg)))}function kc(nt){function rt(oi){return Jl(oi,nt)}if(0<yf.length){Jl(yf[0],nt);for(var dt=1;dt<yf.length;dt++){var ti=yf[dt];ti.blockedOn===nt&&(ti.blockedOn=null)}}for(io!==null&&Jl(io,nt),Sl!==null&&Jl(Sl,nt),dl!==null&&Jl(dl,nt),Mc.forEach(rt),go.forEach(rt),dt=0;dt<Pa.length;dt++)ti=Pa[dt],ti.blockedOn===nt&&(ti.blockedOn=null);for(;0<Pa.length&&(dt=Pa[0],dt.blockedOn===null);)Sg(dt),dt.blockedOn===null&&Pa.shift()}var Oc=ri.ReactCurrentBatchConfig,eu=!0;function md(nt,rt,dt,ti){var oi=Ba,fi=Oc.transition;Oc.transition=null;try{Ba=1,Nc(nt,rt,dt,ti)}finally{Ba=oi,Oc.transition=fi}}function Fc(nt,rt,dt,ti){var oi=Ba,fi=Oc.transition;Oc.transition=null;try{Ba=4,Nc(nt,rt,dt,ti)}finally{Ba=oi,Oc.transition=fi}}function Nc(nt,rt,dt,ti){if(eu){var oi=yd(nt,rt,dt,ti);if(oi===null)Pg(nt,rt,ti,Ef,dt),Tl(nt,ti);else if(Lu(oi,nt,rt,dt,ti))ti.stopPropagation();else if(Tl(nt,ti),rt&4&&-1<xg.indexOf(nt)){for(;oi!==null;){var fi=Lh(oi);if(fi!==null&&mf(fi),fi=yd(nt,rt,dt,ti),fi===null&&Pg(nt,rt,ti,Ef,dt),fi===oi)break;oi=fi}oi!==null&&ti.stopPropagation()}else Pg(nt,rt,ti,null,dt)}}var Ef=null;function yd(nt,rt,dt,ti){if(Ef=null,nt=is(ti),nt=nu(nt),nt!==null)if(rt=Zl(nt),rt===null)nt=null;else if(dt=rt.tag,dt===13){if(nt=pf(rt),nt!==null)return nt;nt=null}else if(dt===3){if(rt.stateNode.current.memoizedState.isDehydrated)return rt.tag===3?rt.stateNode.containerInfo:null;nt=null}else rt!==nt&&(nt=null);return Ef=nt,null}function yh(nt){switch(nt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cp()){case yu:return 1;case ga:return 4;case Bu:case _c:return 16;case ld:return 536870912;default:return 16}default:return 16}}var vu=null,Ei=null,$i=null;function Ji(){if($i)return $i;var nt,rt=Ei,dt=rt.length,ti,oi="value"in vu?vu.value:vu.textContent,fi=oi.length;for(nt=0;nt<dt&&rt[nt]===oi[nt];nt++);var Si=dt-nt;for(ti=1;ti<=Si&&rt[dt-ti]===oi[fi-ti];ti++);return $i=oi.slice(nt,1<ti?1-ti:void 0)}function Jr(nt){var rt=nt.keyCode;return"charCode"in nt?(nt=nt.charCode,nt===0&&rt===13&&(nt=13)):nt=rt,nt===10&&(nt=13),32<=nt||nt===13?nt:0}function As(){return!0}function Zs(){return!1}function Cs(nt){function rt(dt,ti,oi,fi,Si){this._reactName=dt,this._targetInst=oi,this.type=ti,this.nativeEvent=fi,this.target=Si,this.currentTarget=null;for(var Oi in nt)nt.hasOwnProperty(Oi)&&(dt=nt[Oi],this[Oi]=dt?dt(fi):fi[Oi]);return this.isDefaultPrevented=(fi.defaultPrevented!=null?fi.defaultPrevented:fi.returnValue===!1)?As:Zs,this.isPropagationStopped=Zs,this}return xi(rt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var dt=this.nativeEvent;dt&&(dt.preventDefault?dt.preventDefault():typeof dt.returnValue!="unknown"&&(dt.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var dt=this.nativeEvent;dt&&(dt.stopPropagation?dt.stopPropagation():typeof dt.cancelBubble!="unknown"&&(dt.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),rt}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(nt){return nt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=Cs(Ws),wa=xi({},Ws,{view:0,detail:0}),Qa=Cs(wa),Fa,Ua,Va,Ca=xi({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pp,button:0,buttons:0,relatedTarget:function(nt){return nt.relatedTarget===void 0?nt.fromElement===nt.srcElement?nt.toElement:nt.fromElement:nt.relatedTarget},movementX:function(nt){return"movementX"in nt?nt.movementX:(nt!==Va&&(Va&&nt.type==="mousemove"?(Fa=nt.screenX-Va.screenX,Ua=nt.screenY-Va.screenY):Ua=Fa=0,Va=nt),Fa)},movementY:function(nt){return"movementY"in nt?nt.movementY:Ua}}),Yu=Cs(Ca),Ed=xi({},Ca,{dataTransfer:0}),Eh=Cs(Ed),dp=xi({},wa,{relatedTarget:0}),Cu=Cs(dp),vh=xi({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Ch=Cs(vh),hp=xi({},Ws,{clipboardData:function(nt){return"clipboardData"in nt?nt.clipboardData:window.clipboardData}}),sv=Cs(hp),av=xi({},Ws,{data:0}),gp=Cs(av),Ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Em={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cm(nt){var rt=this.nativeEvent;return rt.getModifierState?rt.getModifierState(nt):(nt=vm[nt])?!!rt[nt]:!1}function pp(){return Cm}var Wu=xi({},wa,{key:function(nt){if(nt.key){var rt=Ap[nt.key]||nt.key;if(rt!=="Unidentified")return rt}return nt.type==="keypress"?(nt=Jr(nt),nt===13?"Enter":String.fromCharCode(nt)):nt.type==="keydown"||nt.type==="keyup"?Em[nt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pp,charCode:function(nt){return nt.type==="keypress"?Jr(nt):0},keyCode:function(nt){return nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0},which:function(nt){return nt.type==="keypress"?Jr(nt):nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0}}),ov=Cs(Wu),mp=xi({},Ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bg=Cs(mp),yp=xi({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pp}),lv=Cs(yp),_g=xi({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Im=Cs(_g),bl=xi({},Ca,{deltaX:function(nt){return"deltaX"in nt?nt.deltaX:"wheelDeltaX"in nt?-nt.wheelDeltaX:0},deltaY:function(nt){return"deltaY"in nt?nt.deltaY:"wheelDeltaY"in nt?-nt.wheelDeltaY:"wheelDelta"in nt?-nt.wheelDelta:0},deltaZ:0,deltaMode:0}),Xu=Cs(bl),So=[9,13,27,32],Iu=Qe&&"CompositionEvent"in window,vf=null;Qe&&"documentMode"in document&&(vf=document.documentMode);var wg=Qe&&"TextEvent"in window&&!vf,xm=Qe&&(!Iu||vf&&8<vf&&11>=vf),vd=" ",Sm=!1;function Tm(nt,rt){switch(nt){case"keyup":return So.indexOf(rt.keyCode)!==-1;case"keydown":return rt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(nt){return nt=nt.detail,typeof nt=="object"&&"data"in nt?nt.data:null}var Cd=!1;function uv(nt,rt){switch(nt){case"compositionend":return Rg(rt);case"keypress":return rt.which!==32?null:(Sm=!0,vd);case"textInput":return nt=rt.data,nt===vd&&Sm?null:nt;default:return null}}function cv(nt,rt){if(Cd)return nt==="compositionend"||!Iu&&Tm(nt,rt)?(nt=Ji(),$i=Ei=vu=null,Cd=!1,nt):null;switch(nt){case"paste":return null;case"keypress":if(!(rt.ctrlKey||rt.altKey||rt.metaKey)||rt.ctrlKey&&rt.altKey){if(rt.char&&1<rt.char.length)return rt.char;if(rt.which)return String.fromCharCode(rt.which)}return null;case"compositionend":return xm&&rt.locale!=="ko"?null:rt.data;default:return null}}var bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(nt){var rt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return rt==="input"?!!bm[nt.type]:rt==="textarea"}function wm(nt,rt,dt,ti){ea(ti),rt=Rh(rt,"onChange"),0<rt.length&&(dt=new Aa("onChange","change",null,dt,ti),nt.push({event:dt,listeners:rt}))}var Ih=null,Id=null;function xd(nt){Mg(nt,0)}function Sd(nt){var rt=bd(nt);if(ws(rt))return nt}function Rm(nt,rt){if(nt==="change")return rt}var Ep=!1;if(Qe){var vp;if(Qe){var Cp="oninput"in document;if(!Cp){var Bm=document.createElement("div");Bm.setAttribute("oninput","return;"),Cp=typeof Bm.oninput=="function"}vp=Cp}else vp=!1;Ep=vp&&(!document.documentMode||9<document.documentMode)}function Dm(){Ih&&(Ih.detachEvent("onpropertychange",Lm),Id=Ih=null)}function Lm(nt){if(nt.propertyName==="value"&&Sd(Id)){var rt=[];wm(rt,Id,nt,is(nt)),ja(xd,rt)}}function fv(nt,rt,dt){nt==="focusin"?(Dm(),Ih=rt,Id=dt,Ih.attachEvent("onpropertychange",Lm)):nt==="focusout"&&Dm()}function dv(nt){if(nt==="selectionchange"||nt==="keyup"||nt==="keydown")return Sd(Id)}function hv(nt,rt){if(nt==="click")return Sd(rt)}function Mm(nt,rt){if(nt==="input"||nt==="change")return Sd(rt)}function gv(nt,rt){return nt===rt&&(nt!==0||1/nt===1/rt)||nt!==nt&&rt!==rt}var tu=typeof Object.is=="function"?Object.is:gv;function xh(nt,rt){if(tu(nt,rt))return!0;if(typeof nt!="object"||nt===null||typeof rt!="object"||rt===null)return!1;var dt=Object.keys(nt),ti=Object.keys(rt);if(dt.length!==ti.length)return!1;for(ti=0;ti<dt.length;ti++){var oi=dt[ti];if(!Xe.call(rt,oi)||!tu(nt[oi],rt[oi]))return!1}return!0}function Pm(nt){for(;nt&&nt.firstChild;)nt=nt.firstChild;return nt}function km(nt,rt){var dt=Pm(nt);nt=0;for(var ti;dt;){if(dt.nodeType===3){if(ti=nt+dt.textContent.length,nt<=rt&&ti>=rt)return{node:dt,offset:rt-nt};nt=ti}e:{for(;dt;){if(dt.nextSibling){dt=dt.nextSibling;break e}dt=dt.parentNode}dt=void 0}dt=Pm(dt)}}function Om(nt,rt){return nt&&rt?nt===rt?!0:nt&&nt.nodeType===3?!1:rt&&rt.nodeType===3?Om(nt,rt.parentNode):"contains"in nt?nt.contains(rt):nt.compareDocumentPosition?!!(nt.compareDocumentPosition(rt)&16):!1:!1}function Bg(){for(var nt=window,rt=hi();rt instanceof nt.HTMLIFrameElement;){try{var dt=typeof rt.contentWindow.location.href=="string"}catch{dt=!1}if(dt)nt=rt.contentWindow;else break;rt=hi(nt.document)}return rt}function Zu(nt){var rt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return rt&&(rt==="input"&&(nt.type==="text"||nt.type==="search"||nt.type==="tel"||nt.type==="url"||nt.type==="password")||rt==="textarea"||nt.contentEditable==="true")}function Dg(nt){var rt=Bg(),dt=nt.focusedElem,ti=nt.selectionRange;if(rt!==dt&&dt&&dt.ownerDocument&&Om(dt.ownerDocument.documentElement,dt)){if(ti!==null&&Zu(dt)){if(rt=ti.start,nt=ti.end,nt===void 0&&(nt=rt),"selectionStart"in dt)dt.selectionStart=rt,dt.selectionEnd=Math.min(nt,dt.value.length);else if(nt=(rt=dt.ownerDocument||document)&&rt.defaultView||window,nt.getSelection){nt=nt.getSelection();var oi=dt.textContent.length,fi=Math.min(ti.start,oi);ti=ti.end===void 0?fi:Math.min(ti.end,oi),!nt.extend&&fi>ti&&(oi=ti,ti=fi,fi=oi),oi=km(dt,fi);var Si=km(dt,ti);oi&&Si&&(nt.rangeCount!==1||nt.anchorNode!==oi.node||nt.anchorOffset!==oi.offset||nt.focusNode!==Si.node||nt.focusOffset!==Si.offset)&&(rt=rt.createRange(),rt.setStart(oi.node,oi.offset),nt.removeAllRanges(),fi>ti?(nt.addRange(rt),nt.extend(Si.node,Si.offset)):(rt.setEnd(Si.node,Si.offset),nt.addRange(rt)))}}for(rt=[],nt=dt;nt=nt.parentNode;)nt.nodeType===1&&rt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof dt.focus=="function"&&dt.focus(),dt=0;dt<rt.length;dt++)nt=rt[dt],nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}var Fm=Qe&&"documentMode"in document&&11>=document.documentMode,xu=null,Ip=null,Sh=null,xp=!1;function Nm(nt,rt,dt){var ti=dt.window===dt?dt.document:dt.nodeType===9?dt:dt.ownerDocument;xp||xu==null||xu!==hi(ti)||(ti=xu,"selectionStart"in ti&&Zu(ti)?ti={start:ti.selectionStart,end:ti.selectionEnd}:(ti=(ti.ownerDocument&&ti.ownerDocument.defaultView||window).getSelection(),ti={anchorNode:ti.anchorNode,anchorOffset:ti.anchorOffset,focusNode:ti.focusNode,focusOffset:ti.focusOffset}),Sh&&xh(Sh,ti)||(Sh=ti,ti=Rh(Ip,"onSelect"),0<ti.length&&(rt=new Aa("onSelect","select",null,rt,dt),nt.push({event:rt,listeners:ti}),rt.target=xu)))}function Lg(nt,rt){var dt={};return dt[nt.toLowerCase()]=rt.toLowerCase(),dt["Webkit"+nt]="webkit"+rt,dt["Moz"+nt]="moz"+rt,dt}var Cf={animationend:Lg("Animation","AnimationEnd"),animationiteration:Lg("Animation","AnimationIteration"),animationstart:Lg("Animation","AnimationStart"),transitionend:Lg("Transition","TransitionEnd")},Sp={},Tp={};Qe&&(Tp=document.createElement("div").style,"AnimationEvent"in window||(delete Cf.animationend.animation,delete Cf.animationiteration.animation,delete Cf.animationstart.animation),"TransitionEvent"in window||delete Cf.transitionend.transition);function Oo(nt){if(Sp[nt])return Sp[nt];if(!Cf[nt])return nt;var rt=Cf[nt],dt;for(dt in rt)if(rt.hasOwnProperty(dt)&&dt in Tp)return Sp[nt]=rt[dt];return nt}var bp=Oo("animationend"),$m=Oo("animationiteration"),Qm=Oo("animationstart"),Um=Oo("transitionend"),Gm=new Map,Hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ju(nt,rt){Gm.set(nt,rt),ve(rt,[nt])}for(var Th=0;Th<Hm.length;Th++){var If=Hm[Th],Av=If.toLowerCase(),bh=If[0].toUpperCase()+If.slice(1);Ju(Av,"on"+bh)}Ju(bp,"onAnimationEnd"),Ju($m,"onAnimationIteration"),Ju(Qm,"onAnimationStart"),Ju("dblclick","onDoubleClick"),Ju("focusin","onFocus"),Ju("focusout","onBlur"),Ju(Um,"onTransitionEnd"),be("onMouseEnter",["mouseout","mouseover"]),be("onMouseLeave",["mouseout","mouseover"]),be("onPointerEnter",["pointerout","pointerover"]),be("onPointerLeave",["pointerout","pointerover"]),ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pv=new Set("cancel close invalid load scroll toggle".split(" ").concat(_h));function zm(nt,rt,dt){var ti=nt.type||"unknown-event";nt.currentTarget=dt,ho(ti,rt,void 0,nt),nt.currentTarget=null}function Mg(nt,rt){rt=(rt&4)!==0;for(var dt=0;dt<nt.length;dt++){var ti=nt[dt],oi=ti.event;ti=ti.listeners;e:{var fi=void 0;if(rt)for(var Si=ti.length-1;0<=Si;Si--){var Oi=ti[Si],Qi=Oi.instance,Qr=Oi.currentTarget;if(Oi=Oi.listener,Qi!==fi&&oi.isPropagationStopped())break e;zm(oi,Oi,Qr),fi=Qi}else for(Si=0;Si<ti.length;Si++){if(Oi=ti[Si],Qi=Oi.instance,Qr=Oi.currentTarget,Oi=Oi.listener,Qi!==fi&&oi.isPropagationStopped())break e;zm(oi,Oi,Qr),fi=Qi}}}if(Sc)throw nt=Tc,Sc=!1,Tc=null,nt}function Ga(nt,rt){var dt=rt[Mp];dt===void 0&&(dt=rt[Mp]=new Set);var ti=nt+"__bubble";dt.has(ti)||(Vm(rt,nt,2,!1),dt.add(ti))}function $c(nt,rt,dt){var ti=0;rt&&(ti|=4),Vm(dt,nt,ti,rt)}var tc="_reactListening"+Math.random().toString(36).slice(2);function Td(nt){if(!nt[tc]){nt[tc]=!0,ae.forEach(function(dt){dt!=="selectionchange"&&(pv.has(dt)||$c(dt,!1,nt),$c(dt,!0,nt))});var rt=nt.nodeType===9?nt:nt.ownerDocument;rt===null||rt[tc]||(rt[tc]=!0,$c("selectionchange",!1,rt))}}function Vm(nt,rt,dt,ti){switch(yh(rt)){case 1:var oi=md;break;case 4:oi=Fc;break;default:oi=Nc}dt=oi.bind(null,rt,dt,nt),oi=void 0,!ll||rt!=="touchstart"&&rt!=="touchmove"&&rt!=="wheel"||(oi=!0),ti?oi!==void 0?nt.addEventListener(rt,dt,{capture:!0,passive:oi}):nt.addEventListener(rt,dt,!0):oi!==void 0?nt.addEventListener(rt,dt,{passive:oi}):nt.addEventListener(rt,dt,!1)}function Pg(nt,rt,dt,ti,oi){var fi=ti;if(!(rt&1)&&!(rt&2)&&ti!==null)e:for(;;){if(ti===null)return;var Si=ti.tag;if(Si===3||Si===4){var Oi=ti.stateNode.containerInfo;if(Oi===oi||Oi.nodeType===8&&Oi.parentNode===oi)break;if(Si===4)for(Si=ti.return;Si!==null;){var Qi=Si.tag;if((Qi===3||Qi===4)&&(Qi=Si.stateNode.containerInfo,Qi===oi||Qi.nodeType===8&&Qi.parentNode===oi))return;Si=Si.return}for(;Oi!==null;){if(Si=nu(Oi),Si===null)return;if(Qi=Si.tag,Qi===5||Qi===6){ti=fi=Si;continue e}Oi=Oi.parentNode}}ti=ti.return}ja(function(){var Qr=fi,ls=is(dt),cs=[];e:{var os=Gm.get(nt);if(os!==void 0){var Ts=Aa,Ls=nt;switch(nt){case"keypress":if(Jr(dt)===0)break e;case"keydown":case"keyup":Ts=ov;break;case"focusin":Ls="focus",Ts=Cu;break;case"focusout":Ls="blur",Ts=Cu;break;case"beforeblur":case"afterblur":Ts=Cu;break;case"click":if(dt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ts=Yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ts=Eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ts=lv;break;case bp:case $m:case Qm:Ts=Ch;break;case Um:Ts=Im;break;case"scroll":Ts=Qa;break;case"wheel":Ts=Xu;break;case"copy":case"cut":case"paste":Ts=sv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ts=bg}var ks=(rt&4)!==0,vo=!ks&&nt==="scroll",ji=ks?os!==null?os+"Capture":null:os;ks=[];for(var Hi=Qr,Xi;Hi!==null;){Xi=Hi;var ms=Xi.stateNode;if(Xi.tag===5&&ms!==null&&(Xi=ms,ji!==null&&(ms=xo(Hi,ji),ms!=null&&ks.push(wh(Hi,ms,Xi)))),vo)break;Hi=Hi.return}0<ks.length&&(os=new Ts(os,Ls,null,dt,ls),cs.push({event:os,listeners:ks}))}}if(!(rt&7)){e:{if(os=nt==="mouseover"||nt==="pointerover",Ts=nt==="mouseout"||nt==="pointerout",os&&dt!==Ni&&(Ls=dt.relatedTarget||dt.fromElement)&&(nu(Ls)||Ls[nc]))break e;if((Ts||os)&&(os=ls.window===ls?ls:(os=ls.ownerDocument)?os.defaultView||os.parentWindow:window,Ts?(Ls=dt.relatedTarget||dt.toElement,Ts=Qr,Ls=Ls?nu(Ls):null,Ls!==null&&(vo=Zl(Ls),Ls!==vo||Ls.tag!==5&&Ls.tag!==6)&&(Ls=null)):(Ts=null,Ls=Qr),Ts!==Ls)){if(ks=Yu,ms="onMouseLeave",ji="onMouseEnter",Hi="mouse",(nt==="pointerout"||nt==="pointerover")&&(ks=bg,ms="onPointerLeave",ji="onPointerEnter",Hi="pointer"),vo=Ts==null?os:bd(Ts),Xi=Ls==null?os:bd(Ls),os=new ks(ms,Hi+"leave",Ts,dt,ls),os.target=vo,os.relatedTarget=Xi,ms=null,nu(ls)===Qr&&(ks=new ks(ji,Hi+"enter",Ls,dt,ls),ks.target=Xi,ks.relatedTarget=vo,ms=ks),vo=ms,Ts&&Ls)t:{for(ks=Ts,ji=Ls,Hi=0,Xi=ks;Xi;Xi=xf(Xi))Hi++;for(Xi=0,ms=ji;ms;ms=xf(ms))Xi++;for(;0<Hi-Xi;)ks=xf(ks),Hi--;for(;0<Xi-Hi;)ji=xf(ji),Xi--;for(;Hi--;){if(ks===ji||ji!==null&&ks===ji.alternate)break t;ks=xf(ks),ji=xf(ji)}ks=null}else ks=null;Ts!==null&&_p(cs,os,Ts,ks,!1),Ls!==null&&vo!==null&&_p(cs,vo,Ls,ks,!0)}}e:{if(os=Qr?bd(Qr):window,Ts=os.nodeName&&os.nodeName.toLowerCase(),Ts==="select"||Ts==="input"&&os.type==="file")var Qs=Rm;else if(_m(os))if(Ep)Qs=Mm;else{Qs=dv;var Ms=fv}else(Ts=os.nodeName)&&Ts.toLowerCase()==="input"&&(os.type==="checkbox"||os.type==="radio")&&(Qs=hv);if(Qs&&(Qs=Qs(nt,Qr))){wm(cs,Qs,dt,ls);break e}Ms&&Ms(nt,os,Qr),nt==="focusout"&&(Ms=os._wrapperState)&&Ms.controlled&&os.type==="number"&&gs(os,"number",os.value)}switch(Ms=Qr?bd(Qr):window,nt){case"focusin":(_m(Ms)||Ms.contentEditable==="true")&&(xu=Ms,Ip=Qr,Sh=null);break;case"focusout":Sh=Ip=xu=null;break;case"mousedown":xp=!0;break;case"contextmenu":case"mouseup":case"dragend":xp=!1,Nm(cs,dt,ls);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":Nm(cs,dt,ls)}var qs;if(Iu)e:{switch(nt){case"compositionstart":var ra="onCompositionStart";break e;case"compositionend":ra="onCompositionEnd";break e;case"compositionupdate":ra="onCompositionUpdate";break e}ra=void 0}else Cd?Tm(nt,dt)&&(ra="onCompositionEnd"):nt==="keydown"&&dt.keyCode===229&&(ra="onCompositionStart");ra&&(xm&&dt.locale!=="ko"&&(Cd||ra!=="onCompositionStart"?ra==="onCompositionEnd"&&Cd&&(qs=Ji()):(vu=ls,Ei="value"in vu?vu.value:vu.textContent,Cd=!0)),Ms=Rh(Qr,ra),0<Ms.length&&(ra=new gp(ra,nt,null,dt,ls),cs.push({event:ra,listeners:Ms}),qs?ra.data=qs:(qs=Rg(dt),qs!==null&&(ra.data=qs)))),(qs=wg?uv(nt,dt):cv(nt,dt))&&(Qr=Rh(Qr,"onBeforeInput"),0<Qr.length&&(ls=new gp("onBeforeInput","beforeinput",null,dt,ls),cs.push({event:ls,listeners:Qr}),ls.data=qs))}Mg(cs,rt)})}function wh(nt,rt,dt){return{instance:nt,listener:rt,currentTarget:dt}}function Rh(nt,rt){for(var dt=rt+"Capture",ti=[];nt!==null;){var oi=nt,fi=oi.stateNode;oi.tag===5&&fi!==null&&(oi=fi,fi=xo(nt,dt),fi!=null&&ti.unshift(wh(nt,fi,oi)),fi=xo(nt,rt),fi!=null&&ti.push(wh(nt,fi,oi))),nt=nt.return}return ti}function xf(nt){if(nt===null)return null;do nt=nt.return;while(nt&&nt.tag!==5);return nt||null}function _p(nt,rt,dt,ti,oi){for(var fi=rt._reactName,Si=[];dt!==null&&dt!==ti;){var Oi=dt,Qi=Oi.alternate,Qr=Oi.stateNode;if(Qi!==null&&Qi===ti)break;Oi.tag===5&&Qr!==null&&(Oi=Qr,oi?(Qi=xo(dt,fi),Qi!=null&&Si.unshift(wh(dt,Qi,Oi))):oi||(Qi=xo(dt,fi),Qi!=null&&Si.push(wh(dt,Qi,Oi)))),dt=dt.return}Si.length!==0&&nt.push({event:rt,listeners:Si})}var wp=/\r\n?/g,mv=/\u0000|\uFFFD/g;function Rp(nt){return(typeof nt=="string"?nt:""+nt).replace(wp,`
`).replace(mv,"")}function kg(nt,rt,dt){if(rt=Rp(rt),Rp(nt)!==rt&&dt)throw Error(ee(425))}function Og(){}var Bp=null,Sf=null;function Bh(nt,rt){return nt==="textarea"||nt==="noscript"||typeof rt.children=="string"||typeof rt.children=="number"||typeof rt.dangerouslySetInnerHTML=="object"&&rt.dangerouslySetInnerHTML!==null&&rt.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,jm=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,Lp=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(nt){return Dp.resolve(null).then(nt).catch(yv)}:Tf;function yv(nt){setTimeout(function(){throw nt})}function Qc(nt,rt){var dt=rt,ti=0;do{var oi=dt.nextSibling;if(nt.removeChild(dt),oi&&oi.nodeType===8)if(dt=oi.data,dt==="/$"){if(ti===0){nt.removeChild(oi),kc(rt);return}ti--}else dt!=="$"&&dt!=="$?"&&dt!=="$!"||ti++;dt=oi}while(dt);kc(rt)}function Su(nt){for(;nt!=null;nt=nt.nextSibling){var rt=nt.nodeType;if(rt===1||rt===3)break;if(rt===8){if(rt=nt.data,rt==="$"||rt==="$!"||rt==="$?")break;if(rt==="/$")return null}}return nt}function Dh(nt){nt=nt.previousSibling;for(var rt=0;nt;){if(nt.nodeType===8){var dt=nt.data;if(dt==="$"||dt==="$!"||dt==="$?"){if(rt===0)return nt;rt--}else dt==="/$"&&rt++}nt=nt.previousSibling}return null}var Uc=Math.random().toString(36).slice(2),Mu="__reactFiber$"+Uc,bf="__reactProps$"+Uc,nc="__reactContainer$"+Uc,Mp="__reactEvents$"+Uc,Ev="__reactListeners$"+Uc,Pp="__reactHandles$"+Uc;function nu(nt){var rt=nt[Mu];if(rt)return rt;for(var dt=nt.parentNode;dt;){if(rt=dt[nc]||dt[Mu]){if(dt=rt.alternate,rt.child!==null||dt!==null&&dt.child!==null)for(nt=Dh(nt);nt!==null;){if(dt=nt[Mu])return dt;nt=Dh(nt)}return rt}nt=dt,dt=nt.parentNode}return null}function Lh(nt){return nt=nt[Mu]||nt[nc],!nt||nt.tag!==5&&nt.tag!==6&&nt.tag!==13&&nt.tag!==3?null:nt}function bd(nt){if(nt.tag===5||nt.tag===6)return nt.stateNode;throw Error(ee(33))}function Ks(nt){return nt[bf]||null}var Gc=[],Ka=-1;function fa(nt){return{current:nt}}function Ma(nt){0>Ka||(nt.current=Gc[Ka],Gc[Ka]=null,Ka--)}function ka(nt,rt){Ka++,Gc[Ka]=nt.current,nt.current=rt}var Pu={},ia=fa(Pu),Ao=fa(!1),_l=Pu;function iu(nt,rt){var dt=nt.type.contextTypes;if(!dt)return Pu;var ti=nt.stateNode;if(ti&&ti.__reactInternalMemoizedUnmaskedChildContext===rt)return ti.__reactInternalMemoizedMaskedChildContext;var oi={},fi;for(fi in dt)oi[fi]=rt[fi];return ti&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=rt,nt.__reactInternalMemoizedMaskedChildContext=oi),oi}function eo(nt){return nt=nt.childContextTypes,nt!=null}function ru(){Ma(Ao),Ma(ia)}function Hc(nt,rt,dt){if(ia.current!==Pu)throw Error(ee(168));ka(ia,rt),ka(Ao,dt)}function Mh(nt,rt,dt){var ti=nt.stateNode;if(rt=rt.childContextTypes,typeof ti.getChildContext!="function")return dt;ti=ti.getChildContext();for(var oi in ti)if(!(oi in rt))throw Error(ee(108,Wi(nt)||"Unknown",oi));return xi({},dt,ti)}function Fg(nt){return nt=(nt=nt.stateNode)&&nt.__reactInternalMemoizedMergedChildContext||Pu,_l=ia.current,ka(ia,nt),ka(Ao,Ao.current),!0}function qm(nt,rt,dt){var ti=nt.stateNode;if(!ti)throw Error(ee(169));dt?(nt=Mh(nt,rt,_l),ti.__reactInternalMemoizedMergedChildContext=nt,Ma(Ao),Ma(ia),ka(ia,nt)):Ma(Ao),ka(Ao,dt)}var Ul=null,Fo=!1,Ph=!1;function kp(nt){Ul===null?Ul=[nt]:Ul.push(nt)}function Op(nt){Fo=!0,kp(nt)}function wl(){if(!Ph&&Ul!==null){Ph=!0;var nt=0,rt=Ba;try{var dt=Ul;for(Ba=1;nt<dt.length;nt++){var ti=dt[nt];do ti=ti(!0);while(ti!==null)}Ul=null,Fo=!1}catch(oi){throw Ul!==null&&(Ul=Ul.slice(nt+1)),gh(yu,wl),oi}finally{Ba=rt,Ph=!1}}return null}var zc=[],Rl=0,_f=null,_d=0,Bl=[],tl=0,su=null,zo=1,ic="";function Gl(nt,rt){zc[Rl++]=_d,zc[Rl++]=_f,_f=nt,_d=rt}function Fp(nt,rt,dt){Bl[tl++]=zo,Bl[tl++]=ic,Bl[tl++]=su,su=nt;var ti=zo;nt=ic;var oi=32-ul(ti)-1;ti&=~(1<<oi),dt+=1;var fi=32-ul(rt)+oi;if(30<fi){var Si=oi-oi%5;fi=(ti&(1<<Si)-1).toString(32),ti>>=Si,oi-=Si,zo=1<<32-ul(rt)+oi|dt<<oi|ti,ic=fi+nt}else zo=1<<fi|dt<<oi|ti,ic=nt}function Ng(nt){nt.return!==null&&(Gl(nt,1),Fp(nt,1,0))}function Np(nt){for(;nt===_f;)_f=zc[--Rl],zc[Rl]=null,_d=zc[--Rl],zc[Rl]=null;for(;nt===su;)su=Bl[--tl],Bl[tl]=null,ic=Bl[--tl],Bl[tl]=null,zo=Bl[--tl],Bl[tl]=null}var Hl=null,Dl=null,Ya=!1,au=null;function $p(nt,rt){var dt=du(5,null,null,0);dt.elementType="DELETED",dt.stateNode=rt,dt.return=nt,rt=nt.deletions,rt===null?(nt.deletions=[dt],nt.flags|=16):rt.push(dt)}function Km(nt,rt){switch(nt.tag){case 5:var dt=nt.type;return rt=rt.nodeType!==1||dt.toLowerCase()!==rt.nodeName.toLowerCase()?null:rt,rt!==null?(nt.stateNode=rt,Hl=nt,Dl=Su(rt.firstChild),!0):!1;case 6:return rt=nt.pendingProps===""||rt.nodeType!==3?null:rt,rt!==null?(nt.stateNode=rt,Hl=nt,Dl=null,!0):!1;case 13:return rt=rt.nodeType!==8?null:rt,rt!==null?(dt=su!==null?{id:zo,overflow:ic}:null,nt.memoizedState={dehydrated:rt,treeContext:dt,retryLane:1073741824},dt=du(18,null,null,0),dt.stateNode=rt,dt.return=nt,nt.child=dt,Hl=nt,Dl=null,!0):!1;default:return!1}}function $g(nt){return(nt.mode&1)!==0&&(nt.flags&128)===0}function Qg(nt){if(Ya){var rt=Dl;if(rt){var dt=rt;if(!Km(nt,rt)){if($g(nt))throw Error(ee(418));rt=Su(dt.nextSibling);var ti=Hl;rt&&Km(nt,rt)?$p(ti,dt):(nt.flags=nt.flags&-4097|2,Ya=!1,Hl=nt)}}else{if($g(nt))throw Error(ee(418));nt.flags=nt.flags&-4097|2,Ya=!1,Hl=nt}}}function Ym(nt){for(nt=nt.return;nt!==null&&nt.tag!==5&&nt.tag!==3&&nt.tag!==13;)nt=nt.return;Hl=nt}function Ug(nt){if(nt!==Hl)return!1;if(!Ya)return Ym(nt),Ya=!0,!1;var rt;if((rt=nt.tag!==3)&&!(rt=nt.tag!==5)&&(rt=nt.type,rt=rt!=="head"&&rt!=="body"&&!Bh(nt.type,nt.memoizedProps)),rt&&(rt=Dl)){if($g(nt))throw Wm(),Error(ee(418));for(;rt;)$p(nt,rt),rt=Su(rt.nextSibling)}if(Ym(nt),nt.tag===13){if(nt=nt.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(ee(317));e:{for(nt=nt.nextSibling,rt=0;nt;){if(nt.nodeType===8){var dt=nt.data;if(dt==="/$"){if(rt===0){Dl=Su(nt.nextSibling);break e}rt--}else dt!=="$"&&dt!=="$!"&&dt!=="$?"||rt++}nt=nt.nextSibling}Dl=null}}else Dl=Hl?Su(nt.stateNode.nextSibling):null;return!0}function Wm(){for(var nt=Dl;nt;)nt=Su(nt.nextSibling)}function so(){Dl=Hl=null,Ya=!1}function Qp(nt){au===null?au=[nt]:au.push(nt)}var Gg=ri.ReactCurrentBatchConfig;function zl(nt,rt){if(nt&&nt.defaultProps){rt=xi({},rt),nt=nt.defaultProps;for(var dt in nt)rt[dt]===void 0&&(rt[dt]=nt[dt]);return rt}return rt}var ku=fa(null),Hg=null,Vc=null,Up=null;function Gp(){Up=Vc=Hg=null}function jc(nt){var rt=ku.current;Ma(ku),nt._currentValue=rt}function No(nt,rt,dt){for(;nt!==null;){var ti=nt.alternate;if((nt.childLanes&rt)!==rt?(nt.childLanes|=rt,ti!==null&&(ti.childLanes|=rt)):ti!==null&&(ti.childLanes&rt)!==rt&&(ti.childLanes|=rt),nt===dt)break;nt=nt.return}}function ys(nt,rt){Hg=nt,Up=Vc=null,nt=nt.dependencies,nt!==null&&nt.firstContext!==null&&(nt.lanes&rt&&(To=!0),nt.firstContext=null)}function Eo(nt){var rt=nt._currentValue;if(Up!==nt)if(nt={context:nt,memoizedValue:rt,next:null},Vc===null){if(Hg===null)throw Error(ee(308));Vc=nt,Hg.dependencies={lanes:0,firstContext:nt}}else Vc=Vc.next=nt;return rt}var Vo=null;function Hp(nt){Vo===null?Vo=[nt]:Vo.push(nt)}function Xm(nt,rt,dt,ti){var oi=rt.interleaved;return oi===null?(dt.next=dt,Hp(rt)):(dt.next=oi.next,oi.next=dt),rt.interleaved=dt,rc(nt,ti)}function rc(nt,rt){nt.lanes|=rt;var dt=nt.alternate;for(dt!==null&&(dt.lanes|=rt),dt=nt,nt=nt.return;nt!==null;)nt.childLanes|=rt,dt=nt.alternate,dt!==null&&(dt.childLanes|=rt),dt=nt,nt=nt.return;return dt.tag===3?dt.stateNode:null}var qc=!1;function zp(nt){nt.updateQueue={baseState:nt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ro(nt,rt){nt=nt.updateQueue,rt.updateQueue===nt&&(rt.updateQueue={baseState:nt.baseState,firstBaseUpdate:nt.firstBaseUpdate,lastBaseUpdate:nt.lastBaseUpdate,shared:nt.shared,effects:nt.effects})}function sc(nt,rt){return{eventTime:nt,lane:rt,tag:0,payload:null,callback:null,next:null}}function Kc(nt,rt,dt){var ti=nt.updateQueue;if(ti===null)return null;if(ti=ti.shared,Ea&2){var oi=ti.pending;return oi===null?rt.next=rt:(rt.next=oi.next,oi.next=rt),ti.pending=rt,rc(nt,dt)}return oi=ti.interleaved,oi===null?(rt.next=rt,Hp(ti)):(rt.next=oi.next,oi.next=rt),ti.interleaved=rt,rc(nt,dt)}function zg(nt,rt,dt){if(rt=rt.updateQueue,rt!==null&&(rt=rt.shared,(dt&4194240)!==0)){var ti=rt.lanes;ti&=nt.pendingLanes,dt|=ti,rt.lanes=dt,Du(nt,dt)}}function Vp(nt,rt){var dt=nt.updateQueue,ti=nt.alternate;if(ti!==null&&(ti=ti.updateQueue,dt===ti)){var oi=null,fi=null;if(dt=dt.firstBaseUpdate,dt!==null){do{var Si={eventTime:dt.eventTime,lane:dt.lane,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null};fi===null?oi=fi=Si:fi=fi.next=Si,dt=dt.next}while(dt!==null);fi===null?oi=fi=rt:fi=fi.next=rt}else oi=fi=rt;dt={baseState:ti.baseState,firstBaseUpdate:oi,lastBaseUpdate:fi,shared:ti.shared,effects:ti.effects},nt.updateQueue=dt;return}nt=dt.lastBaseUpdate,nt===null?dt.firstBaseUpdate=rt:nt.next=rt,dt.lastBaseUpdate=rt}function Yc(nt,rt,dt,ti){var oi=nt.updateQueue;qc=!1;var fi=oi.firstBaseUpdate,Si=oi.lastBaseUpdate,Oi=oi.shared.pending;if(Oi!==null){oi.shared.pending=null;var Qi=Oi,Qr=Qi.next;Qi.next=null,Si===null?fi=Qr:Si.next=Qr,Si=Qi;var ls=nt.alternate;ls!==null&&(ls=ls.updateQueue,Oi=ls.lastBaseUpdate,Oi!==Si&&(Oi===null?ls.firstBaseUpdate=Qr:Oi.next=Qr,ls.lastBaseUpdate=Qi))}if(fi!==null){var cs=oi.baseState;Si=0,ls=Qr=Qi=null,Oi=fi;do{var os=Oi.lane,Ts=Oi.eventTime;if((ti&os)===os){ls!==null&&(ls=ls.next={eventTime:Ts,lane:0,tag:Oi.tag,payload:Oi.payload,callback:Oi.callback,next:null});e:{var Ls=nt,ks=Oi;switch(os=rt,Ts=dt,ks.tag){case 1:if(Ls=ks.payload,typeof Ls=="function"){cs=Ls.call(Ts,cs,os);break e}cs=Ls;break e;case 3:Ls.flags=Ls.flags&-65537|128;case 0:if(Ls=ks.payload,os=typeof Ls=="function"?Ls.call(Ts,cs,os):Ls,os==null)break e;cs=xi({},cs,os);break e;case 2:qc=!0}}Oi.callback!==null&&Oi.lane!==0&&(nt.flags|=64,os=oi.effects,os===null?oi.effects=[Oi]:os.push(Oi))}else Ts={eventTime:Ts,lane:os,tag:Oi.tag,payload:Oi.payload,callback:Oi.callback,next:null},ls===null?(Qr=ls=Ts,Qi=cs):ls=ls.next=Ts,Si|=os;if(Oi=Oi.next,Oi===null){if(Oi=oi.shared.pending,Oi===null)break;os=Oi,Oi=os.next,os.next=null,oi.lastBaseUpdate=os,oi.shared.pending=null}}while(!0);if(ls===null&&(Qi=cs),oi.baseState=Qi,oi.firstBaseUpdate=Qr,oi.lastBaseUpdate=ls,rt=oi.shared.interleaved,rt!==null){oi=rt;do Si|=oi.lane,oi=oi.next;while(oi!==rt)}else fi===null&&(oi.shared.lanes=0);uc|=Si,nt.lanes=Si,nt.memoizedState=cs}}function wf(nt,rt,dt){if(nt=rt.effects,rt.effects=null,nt!==null)for(rt=0;rt<nt.length;rt++){var ti=nt[rt],oi=ti.callback;if(oi!==null){if(ti.callback=null,ti=dt,typeof oi!="function")throw Error(ee(191,oi));oi.call(ti)}}}var Zm=new ie.Component().refs;function jp(nt,rt,dt,ti){rt=nt.memoizedState,dt=dt(ti,rt),dt=dt==null?rt:xi({},rt,dt),nt.memoizedState=dt,nt.lanes===0&&(nt.updateQueue.baseState=dt)}var Vg={isMounted:function(nt){return(nt=nt._reactInternals)?Zl(nt)===nt:!1},enqueueSetState:function(nt,rt,dt){nt=nt._reactInternals;var ti=sl(),oi=bo(nt),fi=sc(ti,oi);fi.payload=rt,dt!=null&&(fi.callback=dt),rt=Kc(nt,fi,oi),rt!==null&&(al(rt,nt,oi,ti),zg(rt,nt,oi))},enqueueReplaceState:function(nt,rt,dt){nt=nt._reactInternals;var ti=sl(),oi=bo(nt),fi=sc(ti,oi);fi.tag=1,fi.payload=rt,dt!=null&&(fi.callback=dt),rt=Kc(nt,fi,oi),rt!==null&&(al(rt,nt,oi,ti),zg(rt,nt,oi))},enqueueForceUpdate:function(nt,rt){nt=nt._reactInternals;var dt=sl(),ti=bo(nt),oi=sc(dt,ti);oi.tag=2,rt!=null&&(oi.callback=rt),rt=Kc(nt,oi,ti),rt!==null&&(al(rt,nt,ti,dt),zg(rt,nt,ti))}};function Jm(nt,rt,dt,ti,oi,fi,Si){return nt=nt.stateNode,typeof nt.shouldComponentUpdate=="function"?nt.shouldComponentUpdate(ti,fi,Si):rt.prototype&&rt.prototype.isPureReactComponent?!xh(dt,ti)||!xh(oi,fi):!0}function ey(nt,rt,dt){var ti=!1,oi=Pu,fi=rt.contextType;return typeof fi=="object"&&fi!==null?fi=Eo(fi):(oi=eo(rt)?_l:ia.current,ti=rt.contextTypes,fi=(ti=ti!=null)?iu(nt,oi):Pu),rt=new rt(dt,fi),nt.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,rt.updater=Vg,nt.stateNode=rt,rt._reactInternals=nt,ti&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=oi,nt.__reactInternalMemoizedMaskedChildContext=fi),rt}function ty(nt,rt,dt,ti){nt=rt.state,typeof rt.componentWillReceiveProps=="function"&&rt.componentWillReceiveProps(dt,ti),typeof rt.UNSAFE_componentWillReceiveProps=="function"&&rt.UNSAFE_componentWillReceiveProps(dt,ti),rt.state!==nt&&Vg.enqueueReplaceState(rt,rt.state,null)}function jg(nt,rt,dt,ti){var oi=nt.stateNode;oi.props=dt,oi.state=nt.memoizedState,oi.refs=Zm,zp(nt);var fi=rt.contextType;typeof fi=="object"&&fi!==null?oi.context=Eo(fi):(fi=eo(rt)?_l:ia.current,oi.context=iu(nt,fi)),oi.state=nt.memoizedState,fi=rt.getDerivedStateFromProps,typeof fi=="function"&&(jp(nt,rt,fi,dt),oi.state=nt.memoizedState),typeof rt.getDerivedStateFromProps=="function"||typeof oi.getSnapshotBeforeUpdate=="function"||typeof oi.UNSAFE_componentWillMount!="function"&&typeof oi.componentWillMount!="function"||(rt=oi.state,typeof oi.componentWillMount=="function"&&oi.componentWillMount(),typeof oi.UNSAFE_componentWillMount=="function"&&oi.UNSAFE_componentWillMount(),rt!==oi.state&&Vg.enqueueReplaceState(oi,oi.state,null),Yc(nt,dt,oi,ti),oi.state=nt.memoizedState),typeof oi.componentDidMount=="function"&&(nt.flags|=4194308)}function wd(nt,rt,dt){if(nt=dt.ref,nt!==null&&typeof nt!="function"&&typeof nt!="object"){if(dt._owner){if(dt=dt._owner,dt){if(dt.tag!==1)throw Error(ee(309));var ti=dt.stateNode}if(!ti)throw Error(ee(147,nt));var oi=ti,fi=""+nt;return rt!==null&&rt.ref!==null&&typeof rt.ref=="function"&&rt.ref._stringRef===fi?rt.ref:(rt=function(Si){var Oi=oi.refs;Oi===Zm&&(Oi=oi.refs={}),Si===null?delete Oi[fi]:Oi[fi]=Si},rt._stringRef=fi,rt)}if(typeof nt!="string")throw Error(ee(284));if(!dt._owner)throw Error(ee(290,nt))}return nt}function qg(nt,rt){throw nt=Object.prototype.toString.call(rt),Error(ee(31,nt==="[object Object]"?"object with keys {"+Object.keys(rt).join(", ")+"}":nt))}function ny(nt){var rt=nt._init;return rt(nt._payload)}function iy(nt){function rt(ji,Hi){if(nt){var Xi=ji.deletions;Xi===null?(ji.deletions=[Hi],ji.flags|=16):Xi.push(Hi)}}function dt(ji,Hi){if(!nt)return null;for(;Hi!==null;)rt(ji,Hi),Hi=Hi.sibling;return null}function ti(ji,Hi){for(ji=new Map;Hi!==null;)Hi.key!==null?ji.set(Hi.key,Hi):ji.set(Hi.index,Hi),Hi=Hi.sibling;return ji}function oi(ji,Hi){return ji=rf(ji,Hi),ji.index=0,ji.sibling=null,ji}function fi(ji,Hi,Xi){return ji.index=Xi,nt?(Xi=ji.alternate,Xi!==null?(Xi=Xi.index,Xi<Hi?(ji.flags|=2,Hi):Xi):(ji.flags|=2,Hi)):(ji.flags|=1048576,Hi)}function Si(ji){return nt&&ji.alternate===null&&(ji.flags|=2),ji}function Oi(ji,Hi,Xi,ms){return Hi===null||Hi.tag!==6?(Hi=Jh(Xi,ji.mode,ms),Hi.return=ji,Hi):(Hi=oi(Hi,Xi),Hi.return=ji,Hi)}function Qi(ji,Hi,Xi,ms){var Qs=Xi.type;return Qs===ai?ls(ji,Hi,Xi.props.children,ms,Xi.key):Hi!==null&&(Hi.elementType===Qs||typeof Qs=="object"&&Qs!==null&&Qs.$$typeof===Ti&&ny(Qs)===Hi.type)?(ms=oi(Hi,Xi.props),ms.ref=wd(ji,Hi,Xi),ms.return=ji,ms):(ms=TA(Xi.type,Xi.key,Xi.props,null,ji.mode,ms),ms.ref=wd(ji,Hi,Xi),ms.return=ji,ms)}function Qr(ji,Hi,Xi,ms){return Hi===null||Hi.tag!==4||Hi.stateNode.containerInfo!==Xi.containerInfo||Hi.stateNode.implementation!==Xi.implementation?(Hi=qf(Xi,ji.mode,ms),Hi.return=ji,Hi):(Hi=oi(Hi,Xi.children||[]),Hi.return=ji,Hi)}function ls(ji,Hi,Xi,ms,Qs){return Hi===null||Hi.tag!==7?(Hi=jf(Xi,ji.mode,ms,Qs),Hi.return=ji,Hi):(Hi=oi(Hi,Xi),Hi.return=ji,Hi)}function cs(ji,Hi,Xi){if(typeof Hi=="string"&&Hi!==""||typeof Hi=="number")return Hi=Jh(""+Hi,ji.mode,Xi),Hi.return=ji,Hi;if(typeof Hi=="object"&&Hi!==null){switch(Hi.$$typeof){case si:return Xi=TA(Hi.type,Hi.key,Hi.props,null,ji.mode,Xi),Xi.ref=wd(ji,null,Hi),Xi.return=ji,Xi;case li:return Hi=qf(Hi,ji.mode,Xi),Hi.return=ji,Hi;case Ti:var ms=Hi._init;return cs(ji,ms(Hi._payload),Xi)}if(zs(Hi)||Pi(Hi))return Hi=jf(Hi,ji.mode,Xi,null),Hi.return=ji,Hi;qg(ji,Hi)}return null}function os(ji,Hi,Xi,ms){var Qs=Hi!==null?Hi.key:null;if(typeof Xi=="string"&&Xi!==""||typeof Xi=="number")return Qs!==null?null:Oi(ji,Hi,""+Xi,ms);if(typeof Xi=="object"&&Xi!==null){switch(Xi.$$typeof){case si:return Xi.key===Qs?Qi(ji,Hi,Xi,ms):null;case li:return Xi.key===Qs?Qr(ji,Hi,Xi,ms):null;case Ti:return Qs=Xi._init,os(ji,Hi,Qs(Xi._payload),ms)}if(zs(Xi)||Pi(Xi))return Qs!==null?null:ls(ji,Hi,Xi,ms,null);qg(ji,Xi)}return null}function Ts(ji,Hi,Xi,ms,Qs){if(typeof ms=="string"&&ms!==""||typeof ms=="number")return ji=ji.get(Xi)||null,Oi(Hi,ji,""+ms,Qs);if(typeof ms=="object"&&ms!==null){switch(ms.$$typeof){case si:return ji=ji.get(ms.key===null?Xi:ms.key)||null,Qi(Hi,ji,ms,Qs);case li:return ji=ji.get(ms.key===null?Xi:ms.key)||null,Qr(Hi,ji,ms,Qs);case Ti:var Ms=ms._init;return Ts(ji,Hi,Xi,Ms(ms._payload),Qs)}if(zs(ms)||Pi(ms))return ji=ji.get(Xi)||null,ls(Hi,ji,ms,Qs,null);qg(Hi,ms)}return null}function Ls(ji,Hi,Xi,ms){for(var Qs=null,Ms=null,qs=Hi,ra=Hi=0,Uo=null;qs!==null&&ra<Xi.length;ra++){qs.index>ra?(Uo=qs,qs=null):Uo=qs.sibling;var Ra=os(ji,qs,Xi[ra],ms);if(Ra===null){qs===null&&(qs=Uo);break}nt&&qs&&Ra.alternate===null&&rt(ji,qs),Hi=fi(Ra,Hi,ra),Ms===null?Qs=Ra:Ms.sibling=Ra,Ms=Ra,qs=Uo}if(ra===Xi.length)return dt(ji,qs),Ya&&Gl(ji,ra),Qs;if(qs===null){for(;ra<Xi.length;ra++)qs=cs(ji,Xi[ra],ms),qs!==null&&(Hi=fi(qs,Hi,ra),Ms===null?Qs=qs:Ms.sibling=qs,Ms=qs);return Ya&&Gl(ji,ra),Qs}for(qs=ti(ji,qs);ra<Xi.length;ra++)Uo=Ts(qs,ji,ra,Xi[ra],ms),Uo!==null&&(nt&&Uo.alternate!==null&&qs.delete(Uo.key===null?ra:Uo.key),Hi=fi(Uo,Hi,ra),Ms===null?Qs=Uo:Ms.sibling=Uo,Ms=Uo);return nt&&qs.forEach(function(sf){return rt(ji,sf)}),Ya&&Gl(ji,ra),Qs}function ks(ji,Hi,Xi,ms){var Qs=Pi(Xi);if(typeof Qs!="function")throw Error(ee(150));if(Xi=Qs.call(Xi),Xi==null)throw Error(ee(151));for(var Ms=Qs=null,qs=Hi,ra=Hi=0,Uo=null,Ra=Xi.next();qs!==null&&!Ra.done;ra++,Ra=Xi.next()){qs.index>ra?(Uo=qs,qs=null):Uo=qs.sibling;var sf=os(ji,qs,Ra.value,ms);if(sf===null){qs===null&&(qs=Uo);break}nt&&qs&&sf.alternate===null&&rt(ji,qs),Hi=fi(sf,Hi,ra),Ms===null?Qs=sf:Ms.sibling=sf,Ms=sf,qs=Uo}if(Ra.done)return dt(ji,qs),Ya&&Gl(ji,ra),Qs;if(qs===null){for(;!Ra.done;ra++,Ra=Xi.next())Ra=cs(ji,Ra.value,ms),Ra!==null&&(Hi=fi(Ra,Hi,ra),Ms===null?Qs=Ra:Ms.sibling=Ra,Ms=Ra);return Ya&&Gl(ji,ra),Qs}for(qs=ti(ji,qs);!Ra.done;ra++,Ra=Xi.next())Ra=Ts(qs,ji,ra,Ra.value,ms),Ra!==null&&(nt&&Ra.alternate!==null&&qs.delete(Ra.key===null?ra:Ra.key),Hi=fi(Ra,Hi,ra),Ms===null?Qs=Ra:Ms.sibling=Ra,Ms=Ra);return nt&&qs.forEach(function($v){return rt(ji,$v)}),Ya&&Gl(ji,ra),Qs}function vo(ji,Hi,Xi,ms){if(typeof Xi=="object"&&Xi!==null&&Xi.type===ai&&Xi.key===null&&(Xi=Xi.props.children),typeof Xi=="object"&&Xi!==null){switch(Xi.$$typeof){case si:e:{for(var Qs=Xi.key,Ms=Hi;Ms!==null;){if(Ms.key===Qs){if(Qs=Xi.type,Qs===ai){if(Ms.tag===7){dt(ji,Ms.sibling),Hi=oi(Ms,Xi.props.children),Hi.return=ji,ji=Hi;break e}}else if(Ms.elementType===Qs||typeof Qs=="object"&&Qs!==null&&Qs.$$typeof===Ti&&ny(Qs)===Ms.type){dt(ji,Ms.sibling),Hi=oi(Ms,Xi.props),Hi.ref=wd(ji,Ms,Xi),Hi.return=ji,ji=Hi;break e}dt(ji,Ms);break}else rt(ji,Ms);Ms=Ms.sibling}Xi.type===ai?(Hi=jf(Xi.props.children,ji.mode,ms,Xi.key),Hi.return=ji,ji=Hi):(ms=TA(Xi.type,Xi.key,Xi.props,null,ji.mode,ms),ms.ref=wd(ji,Hi,Xi),ms.return=ji,ji=ms)}return Si(ji);case li:e:{for(Ms=Xi.key;Hi!==null;){if(Hi.key===Ms)if(Hi.tag===4&&Hi.stateNode.containerInfo===Xi.containerInfo&&Hi.stateNode.implementation===Xi.implementation){dt(ji,Hi.sibling),Hi=oi(Hi,Xi.children||[]),Hi.return=ji,ji=Hi;break e}else{dt(ji,Hi);break}else rt(ji,Hi);Hi=Hi.sibling}Hi=qf(Xi,ji.mode,ms),Hi.return=ji,ji=Hi}return Si(ji);case Ti:return Ms=Xi._init,vo(ji,Hi,Ms(Xi._payload),ms)}if(zs(Xi))return Ls(ji,Hi,Xi,ms);if(Pi(Xi))return ks(ji,Hi,Xi,ms);qg(ji,Xi)}return typeof Xi=="string"&&Xi!==""||typeof Xi=="number"?(Xi=""+Xi,Hi!==null&&Hi.tag===6?(dt(ji,Hi.sibling),Hi=oi(Hi,Xi),Hi.return=ji,ji=Hi):(dt(ji,Hi),Hi=Jh(Xi,ji.mode,ms),Hi.return=ji,ji=Hi),Si(ji)):dt(ji,Hi)}return vo}var Rd=iy(!0),ry=iy(!1),kh={},Tu=fa(kh),Oh=fa(kh),Bd=fa(kh);function Rf(nt){if(nt===kh)throw Error(ee(174));return nt}function qp(nt,rt){switch(ka(Bd,rt),ka(Oh,nt),ka(Tu,kh),nt=rt.nodeType,nt){case 9:case 11:rt=(rt=rt.documentElement)?rt.namespaceURI:ha(null,"");break;default:nt=nt===8?rt.parentNode:rt,rt=nt.namespaceURI||null,nt=nt.tagName,rt=ha(rt,nt)}Ma(Tu),ka(Tu,rt)}function Wc(){Ma(Tu),Ma(Oh),Ma(Bd)}function Xs(nt){Rf(Bd.current);var rt=Rf(Tu.current),dt=ha(rt,nt.type);rt!==dt&&(ka(Oh,nt),ka(Tu,dt))}function pa(nt){Oh.current===nt&&(Ma(Tu),Ma(Oh))}var Js=fa(0);function lo(nt){for(var rt=nt;rt!==null;){if(rt.tag===13){var dt=rt.memoizedState;if(dt!==null&&(dt=dt.dehydrated,dt===null||dt.data==="$?"||dt.data==="$!"))return rt}else if(rt.tag===19&&rt.memoizedProps.revealOrder!==void 0){if(rt.flags&128)return rt}else if(rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===nt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===nt)return null;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}return null}var ou=[];function Kg(){for(var nt=0;nt<ou.length;nt++)ou[nt]._workInProgressVersionPrimary=null;ou.length=0}var Yg=ri.ReactCurrentDispatcher,Kp=ri.ReactCurrentBatchConfig,Bf=0,Wa=null,ns=null,Ia=null,ta=!1,Ou=!1,Vl=0,Df=0;function Xa(){throw Error(ee(321))}function Lf(nt,rt){if(rt===null)return!1;for(var dt=0;dt<rt.length&&dt<nt.length;dt++)if(!tu(nt[dt],rt[dt]))return!1;return!0}function Xc(nt,rt,dt,ti,oi,fi){if(Bf=fi,Wa=rt,rt.memoizedState=null,rt.updateQueue=null,rt.lanes=0,Yg.current=nt===null||nt.memoizedState===null?Cv:Iv,nt=dt(ti,oi),Ou){fi=0;do{if(Ou=!1,Vl=0,25<=fi)throw Error(ee(301));fi+=1,Ia=ns=null,rt.updateQueue=null,Yg.current=Wp,nt=dt(ti,oi)}while(Ou)}if(Yg.current=fA,rt=ns!==null&&ns.next!==null,Bf=0,Ia=ns=Wa=null,ta=!1,rt)throw Error(ee(300));return nt}function Mf(){var nt=Vl!==0;return Vl=0,nt}function lu(){var nt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ia===null?Wa.memoizedState=Ia=nt:Ia=Ia.next=nt,Ia}function Ll(){if(ns===null){var nt=Wa.alternate;nt=nt!==null?nt.memoizedState:null}else nt=ns.next;var rt=Ia===null?Wa.memoizedState:Ia.next;if(rt!==null)Ia=rt,ns=nt;else{if(nt===null)throw Error(ee(310));ns=nt,nt={memoizedState:ns.memoizedState,baseState:ns.baseState,baseQueue:ns.baseQueue,queue:ns.queue,next:null},Ia===null?Wa.memoizedState=Ia=nt:Ia=Ia.next=nt}return Ia}function Pf(nt,rt){return typeof rt=="function"?rt(nt):rt}function Fh(nt){var rt=Ll(),dt=rt.queue;if(dt===null)throw Error(ee(311));dt.lastRenderedReducer=nt;var ti=ns,oi=ti.baseQueue,fi=dt.pending;if(fi!==null){if(oi!==null){var Si=oi.next;oi.next=fi.next,fi.next=Si}ti.baseQueue=oi=fi,dt.pending=null}if(oi!==null){fi=oi.next,ti=ti.baseState;var Oi=Si=null,Qi=null,Qr=fi;do{var ls=Qr.lane;if((Bf&ls)===ls)Qi!==null&&(Qi=Qi.next={lane:0,action:Qr.action,hasEagerState:Qr.hasEagerState,eagerState:Qr.eagerState,next:null}),ti=Qr.hasEagerState?Qr.eagerState:nt(ti,Qr.action);else{var cs={lane:ls,action:Qr.action,hasEagerState:Qr.hasEagerState,eagerState:Qr.eagerState,next:null};Qi===null?(Oi=Qi=cs,Si=ti):Qi=Qi.next=cs,Wa.lanes|=ls,uc|=ls}Qr=Qr.next}while(Qr!==null&&Qr!==fi);Qi===null?Si=ti:Qi.next=Oi,tu(ti,rt.memoizedState)||(To=!0),rt.memoizedState=ti,rt.baseState=Si,rt.baseQueue=Qi,dt.lastRenderedState=ti}if(nt=dt.interleaved,nt!==null){oi=nt;do fi=oi.lane,Wa.lanes|=fi,uc|=fi,oi=oi.next;while(oi!==nt)}else oi===null&&(dt.lanes=0);return[rt.memoizedState,dt.dispatch]}function Nh(nt){var rt=Ll(),dt=rt.queue;if(dt===null)throw Error(ee(311));dt.lastRenderedReducer=nt;var ti=dt.dispatch,oi=dt.pending,fi=rt.memoizedState;if(oi!==null){dt.pending=null;var Si=oi=oi.next;do fi=nt(fi,Si.action),Si=Si.next;while(Si!==oi);tu(fi,rt.memoizedState)||(To=!0),rt.memoizedState=fi,rt.baseQueue===null&&(rt.baseState=fi),dt.lastRenderedState=fi}return[fi,ti]}function Wg(){}function Xg(nt,rt){var dt=Wa,ti=Ll(),oi=rt(),fi=!tu(ti.memoizedState,oi);if(fi&&(ti.memoizedState=oi,To=!0),ti=ti.queue,$h(eA.bind(null,dt,ti,nt),[nt]),ti.getSnapshot!==rt||fi||Ia!==null&&Ia.memoizedState.tag&1){if(dt.flags|=2048,kf(9,Jg.bind(null,dt,ti,oi,rt),void 0,null),uo===null)throw Error(ee(349));Bf&30||Zg(dt,rt,oi)}return oi}function Zg(nt,rt,dt){nt.flags|=16384,nt={getSnapshot:rt,value:dt},rt=Wa.updateQueue,rt===null?(rt={lastEffect:null,stores:null},Wa.updateQueue=rt,rt.stores=[nt]):(dt=rt.stores,dt===null?rt.stores=[nt]:dt.push(nt))}function Jg(nt,rt,dt,ti){rt.value=dt,rt.getSnapshot=ti,tA(rt)&&nA(nt)}function eA(nt,rt,dt){return dt(function(){tA(rt)&&nA(nt)})}function tA(nt){var rt=nt.getSnapshot;nt=nt.value;try{var dt=rt();return!tu(nt,dt)}catch{return!0}}function nA(nt){var rt=rc(nt,1);rt!==null&&al(rt,nt,1,-1)}function iA(nt){var rt=lu();return typeof nt=="function"&&(nt=nt()),rt.memoizedState=rt.baseState=nt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pf,lastRenderedState:nt},rt.queue=nt,nt=nt.dispatch=cA.bind(null,Wa,nt),[rt.memoizedState,nt]}function kf(nt,rt,dt,ti){return nt={tag:nt,create:rt,destroy:dt,deps:ti,next:null},rt=Wa.updateQueue,rt===null?(rt={lastEffect:null,stores:null},Wa.updateQueue=rt,rt.lastEffect=nt.next=nt):(dt=rt.lastEffect,dt===null?rt.lastEffect=nt.next=nt:(ti=dt.next,dt.next=nt,nt.next=ti,rt.lastEffect=nt)),nt}function rA(){return Ll().memoizedState}function Of(nt,rt,dt,ti){var oi=lu();Wa.flags|=nt,oi.memoizedState=kf(1|rt,dt,void 0,ti===void 0?null:ti)}function ac(nt,rt,dt,ti){var oi=Ll();ti=ti===void 0?null:ti;var fi=void 0;if(ns!==null){var Si=ns.memoizedState;if(fi=Si.destroy,ti!==null&&Lf(ti,Si.deps)){oi.memoizedState=kf(rt,dt,fi,ti);return}}Wa.flags|=nt,oi.memoizedState=kf(1|rt,dt,fi,ti)}function sA(nt,rt){return Of(8390656,8,nt,rt)}function $h(nt,rt){return ac(2048,8,nt,rt)}function aA(nt,rt){return ac(4,2,nt,rt)}function oA(nt,rt){return ac(4,4,nt,rt)}function Yp(nt,rt){if(typeof rt=="function")return nt=nt(),rt(nt),function(){rt(null)};if(rt!=null)return nt=nt(),rt.current=nt,function(){rt.current=null}}function Dd(nt,rt,dt){return dt=dt!=null?dt.concat([nt]):null,ac(4,4,Yp.bind(null,rt,nt),dt)}function lA(){}function Ld(nt,rt){var dt=Ll();rt=rt===void 0?null:rt;var ti=dt.memoizedState;return ti!==null&&rt!==null&&Lf(rt,ti[1])?ti[0]:(dt.memoizedState=[nt,rt],nt)}function Zc(nt,rt){var dt=Ll();rt=rt===void 0?null:rt;var ti=dt.memoizedState;return ti!==null&&rt!==null&&Lf(rt,ti[1])?ti[0]:(nt=nt(),dt.memoizedState=[nt,rt],nt)}function Ml(nt,rt,dt){return Bf&21?(tu(dt,rt)||(dt=cd(),Wa.lanes|=dt,uc|=dt,nt.baseState=!0),rt):(nt.baseState&&(nt.baseState=!1,To=!0),nt.memoizedState=dt)}function vv(nt,rt){var dt=Ba;Ba=dt!==0&&4>dt?dt:4,nt(!0);var ti=Kp.transition;Kp.transition={};try{nt(!1),rt()}finally{Ba=dt,Kp.transition=ti}}function Ha(){return Ll().memoizedState}function uA(nt,rt,dt){var ti=bo(nt);if(dt={lane:ti,action:dt,hasEagerState:!1,eagerState:null,next:null},Md(nt))Qh(rt,dt);else if(dt=Xm(nt,rt,dt,ti),dt!==null){var oi=sl();al(dt,nt,ti,oi),sy(dt,rt,ti)}}function cA(nt,rt,dt){var ti=bo(nt),oi={lane:ti,action:dt,hasEagerState:!1,eagerState:null,next:null};if(Md(nt))Qh(rt,oi);else{var fi=nt.alternate;if(nt.lanes===0&&(fi===null||fi.lanes===0)&&(fi=rt.lastRenderedReducer,fi!==null))try{var Si=rt.lastRenderedState,Oi=fi(Si,dt);if(oi.hasEagerState=!0,oi.eagerState=Oi,tu(Oi,Si)){var Qi=rt.interleaved;Qi===null?(oi.next=oi,Hp(rt)):(oi.next=Qi.next,Qi.next=oi),rt.interleaved=oi;return}}catch{}finally{}dt=Xm(nt,rt,oi,ti),dt!==null&&(oi=sl(),al(dt,nt,ti,oi),sy(dt,rt,ti))}}function Md(nt){var rt=nt.alternate;return nt===Wa||rt!==null&&rt===Wa}function Qh(nt,rt){Ou=ta=!0;var dt=nt.pending;dt===null?rt.next=rt:(rt.next=dt.next,dt.next=rt),nt.pending=rt}function sy(nt,rt,dt){if(dt&4194240){var ti=rt.lanes;ti&=nt.pendingLanes,dt|=ti,rt.lanes=dt,Du(nt,dt)}}var fA={readContext:Eo,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useInsertionEffect:Xa,useLayoutEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useDeferredValue:Xa,useTransition:Xa,useMutableSource:Xa,useSyncExternalStore:Xa,useId:Xa,unstable_isNewReconciler:!1},Cv={readContext:Eo,useCallback:function(nt,rt){return lu().memoizedState=[nt,rt===void 0?null:rt],nt},useContext:Eo,useEffect:sA,useImperativeHandle:function(nt,rt,dt){return dt=dt!=null?dt.concat([nt]):null,Of(4194308,4,Yp.bind(null,rt,nt),dt)},useLayoutEffect:function(nt,rt){return Of(4194308,4,nt,rt)},useInsertionEffect:function(nt,rt){return Of(4,2,nt,rt)},useMemo:function(nt,rt){var dt=lu();return rt=rt===void 0?null:rt,nt=nt(),dt.memoizedState=[nt,rt],nt},useReducer:function(nt,rt,dt){var ti=lu();return rt=dt!==void 0?dt(rt):rt,ti.memoizedState=ti.baseState=rt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nt,lastRenderedState:rt},ti.queue=nt,nt=nt.dispatch=uA.bind(null,Wa,nt),[ti.memoizedState,nt]},useRef:function(nt){var rt=lu();return nt={current:nt},rt.memoizedState=nt},useState:iA,useDebugValue:lA,useDeferredValue:function(nt){return lu().memoizedState=nt},useTransition:function(){var nt=iA(!1),rt=nt[0];return nt=vv.bind(null,nt[1]),lu().memoizedState=nt,[rt,nt]},useMutableSource:function(){},useSyncExternalStore:function(nt,rt,dt){var ti=Wa,oi=lu();if(Ya){if(dt===void 0)throw Error(ee(407));dt=dt()}else{if(dt=rt(),uo===null)throw Error(ee(349));Bf&30||Zg(ti,rt,dt)}oi.memoizedState=dt;var fi={value:dt,getSnapshot:rt};return oi.queue=fi,sA(eA.bind(null,ti,fi,nt),[nt]),ti.flags|=2048,kf(9,Jg.bind(null,ti,fi,dt,rt),void 0,null),dt},useId:function(){var nt=lu(),rt=uo.identifierPrefix;if(Ya){var dt=ic,ti=zo;dt=(ti&~(1<<32-ul(ti)-1)).toString(32)+dt,rt=":"+rt+"R"+dt,dt=Vl++,0<dt&&(rt+="H"+dt.toString(32)),rt+=":"}else dt=Df++,rt=":"+rt+"r"+dt.toString(32)+":";return nt.memoizedState=rt},unstable_isNewReconciler:!1},Iv={readContext:Eo,useCallback:Ld,useContext:Eo,useEffect:$h,useImperativeHandle:Dd,useInsertionEffect:aA,useLayoutEffect:oA,useMemo:Zc,useReducer:Fh,useRef:rA,useState:function(){return Fh(Pf)},useDebugValue:lA,useDeferredValue:function(nt){var rt=Ll();return Ml(rt,ns.memoizedState,nt)},useTransition:function(){var nt=Fh(Pf)[0],rt=Ll().memoizedState;return[nt,rt]},useMutableSource:Wg,useSyncExternalStore:Xg,useId:Ha,unstable_isNewReconciler:!1},Wp={readContext:Eo,useCallback:Ld,useContext:Eo,useEffect:$h,useImperativeHandle:Dd,useInsertionEffect:aA,useLayoutEffect:oA,useMemo:Zc,useReducer:Nh,useRef:rA,useState:function(){return Nh(Pf)},useDebugValue:lA,useDeferredValue:function(nt){var rt=Ll();return ns===null?rt.memoizedState=nt:Ml(rt,ns.memoizedState,nt)},useTransition:function(){var nt=Nh(Pf)[0],rt=Ll().memoizedState;return[nt,rt]},useMutableSource:Wg,useSyncExternalStore:Xg,useId:Ha,unstable_isNewReconciler:!1};function Pd(nt,rt){try{var dt="",ti=rt;do dt+=Vi(ti),ti=ti.return;while(ti);var oi=dt}catch(fi){oi=`
Error generating stack: `+fi.message+`
`+fi.stack}return{value:nt,source:rt,stack:oi,digest:null}}function Uh(nt,rt,dt){return{value:nt,source:null,stack:dt??null,digest:rt??null}}function dA(nt,rt){try{console.error(rt.value)}catch(dt){setTimeout(function(){throw dt})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function ay(nt,rt,dt){dt=sc(-1,dt),dt.tag=3,dt.payload={element:null};var ti=rt.value;return dt.callback=function(){EA||(EA=!0,Uf=ti),dA(nt,rt)},dt}function Gh(nt,rt,dt){dt=sc(-1,dt),dt.tag=3;var ti=nt.type.getDerivedStateFromError;if(typeof ti=="function"){var oi=rt.value;dt.payload=function(){return ti(oi)},dt.callback=function(){dA(nt,rt)}}var fi=nt.stateNode;return fi!==null&&typeof fi.componentDidCatch=="function"&&(dt.callback=function(){dA(nt,rt),typeof ti!="function"&&($u===null?$u=new Set([this]):$u.add(this));var Si=rt.stack;this.componentDidCatch(rt.value,{componentStack:Si!==null?Si:""})}),dt}function oy(nt,rt,dt){var ti=nt.pingCache;if(ti===null){ti=nt.pingCache=new xv;var oi=new Set;ti.set(rt,oi)}else oi=ti.get(rt),oi===void 0&&(oi=new Set,ti.set(rt,oi));oi.has(dt)||(oi.add(dt),nt=Bv.bind(null,nt,rt,dt),rt.then(nt,nt))}function Xp(nt){do{var rt;if((rt=nt.tag===13)&&(rt=nt.memoizedState,rt=rt!==null?rt.dehydrated!==null:!0),rt)return nt;nt=nt.return}while(nt!==null);return null}function Zp(nt,rt,dt,ti,oi){return nt.mode&1?(nt.flags|=65536,nt.lanes=oi,nt):(nt===rt?nt.flags|=65536:(nt.flags|=128,dt.flags|=131072,dt.flags&=-52805,dt.tag===1&&(dt.alternate===null?dt.tag=17:(rt=sc(-1,1),rt.tag=2,Kc(dt,rt,1))),dt.lanes|=1),nt)}var Sv=ri.ReactCurrentOwner,To=!1;function Bo(nt,rt,dt,ti){rt.child=nt===null?ry(rt,null,dt,ti):Rd(rt,nt.child,dt,ti)}function Jc(nt,rt,dt,ti,oi){dt=dt.render;var fi=rt.ref;return ys(rt,oi),ti=Xc(nt,rt,dt,ti,fi,oi),dt=Mf(),nt!==null&&!To?(rt.updateQueue=nt.updateQueue,rt.flags&=-2053,nt.lanes&=~oi,jo(nt,rt,oi)):(Ya&&dt&&Ng(rt),rt.flags|=1,Bo(nt,rt,ti,oi),rt.child)}function hA(nt,rt,dt,ti,oi){if(nt===null){var fi=dt.type;return typeof fi=="function"&&!m0(fi)&&fi.defaultProps===void 0&&dt.compare===null&&dt.defaultProps===void 0?(rt.tag=15,rt.type=fi,Pl(nt,rt,fi,ti,oi)):(nt=TA(dt.type,null,ti,rt,rt.mode,oi),nt.ref=rt.ref,nt.return=rt,rt.child=nt)}if(fi=nt.child,!(nt.lanes&oi)){var Si=fi.memoizedProps;if(dt=dt.compare,dt=dt!==null?dt:xh,dt(Si,ti)&&nt.ref===rt.ref)return jo(nt,rt,oi)}return rt.flags|=1,nt=rf(fi,ti),nt.ref=rt.ref,nt.return=rt,rt.child=nt}function Pl(nt,rt,dt,ti,oi){if(nt!==null){var fi=nt.memoizedProps;if(xh(fi,ti)&&nt.ref===rt.ref)if(To=!1,rt.pendingProps=ti=fi,(nt.lanes&oi)!==0)nt.flags&131072&&(To=!0);else return rt.lanes=nt.lanes,jo(nt,rt,oi)}return kd(nt,rt,dt,ti,oi)}function Ff(nt,rt,dt){var ti=rt.pendingProps,oi=ti.children,fi=nt!==null?nt.memoizedState:null;if(ti.mode==="hidden")if(!(rt.mode&1))rt.memoizedState={baseLanes:0,cachePool:null,transitions:null},ka(Ud,jl),jl|=dt;else{if(!(dt&1073741824))return nt=fi!==null?fi.baseLanes|dt:dt,rt.lanes=rt.childLanes=1073741824,rt.memoizedState={baseLanes:nt,cachePool:null,transitions:null},rt.updateQueue=null,ka(Ud,jl),jl|=nt,null;rt.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti=fi!==null?fi.baseLanes:dt,ka(Ud,jl),jl|=ti}else fi!==null?(ti=fi.baseLanes|dt,rt.memoizedState=null):ti=dt,ka(Ud,jl),jl|=ti;return Bo(nt,rt,oi,dt),rt.child}function da(nt,rt){var dt=rt.ref;(nt===null&&dt!==null||nt!==null&&nt.ref!==dt)&&(rt.flags|=512,rt.flags|=2097152)}function kd(nt,rt,dt,ti,oi){var fi=eo(dt)?_l:ia.current;return fi=iu(rt,fi),ys(rt,oi),dt=Xc(nt,rt,dt,ti,fi,oi),ti=Mf(),nt!==null&&!To?(rt.updateQueue=nt.updateQueue,rt.flags&=-2053,nt.lanes&=~oi,jo(nt,rt,oi)):(Ya&&ti&&Ng(rt),rt.flags|=1,Bo(nt,rt,dt,oi),rt.child)}function Jp(nt,rt,dt,ti,oi){if(eo(dt)){var fi=!0;Fg(rt)}else fi=!1;if(ys(rt,oi),rt.stateNode===null)nl(nt,rt),ey(rt,dt,ti),jg(rt,dt,ti,oi),ti=!0;else if(nt===null){var Si=rt.stateNode,Oi=rt.memoizedProps;Si.props=Oi;var Qi=Si.context,Qr=dt.contextType;typeof Qr=="object"&&Qr!==null?Qr=Eo(Qr):(Qr=eo(dt)?_l:ia.current,Qr=iu(rt,Qr));var ls=dt.getDerivedStateFromProps,cs=typeof ls=="function"||typeof Si.getSnapshotBeforeUpdate=="function";cs||typeof Si.UNSAFE_componentWillReceiveProps!="function"&&typeof Si.componentWillReceiveProps!="function"||(Oi!==ti||Qi!==Qr)&&ty(rt,Si,ti,Qr),qc=!1;var os=rt.memoizedState;Si.state=os,Yc(rt,ti,Si,oi),Qi=rt.memoizedState,Oi!==ti||os!==Qi||Ao.current||qc?(typeof ls=="function"&&(jp(rt,dt,ls,ti),Qi=rt.memoizedState),(Oi=qc||Jm(rt,dt,Oi,ti,os,Qi,Qr))?(cs||typeof Si.UNSAFE_componentWillMount!="function"&&typeof Si.componentWillMount!="function"||(typeof Si.componentWillMount=="function"&&Si.componentWillMount(),typeof Si.UNSAFE_componentWillMount=="function"&&Si.UNSAFE_componentWillMount()),typeof Si.componentDidMount=="function"&&(rt.flags|=4194308)):(typeof Si.componentDidMount=="function"&&(rt.flags|=4194308),rt.memoizedProps=ti,rt.memoizedState=Qi),Si.props=ti,Si.state=Qi,Si.context=Qr,ti=Oi):(typeof Si.componentDidMount=="function"&&(rt.flags|=4194308),ti=!1)}else{Si=rt.stateNode,Ro(nt,rt),Oi=rt.memoizedProps,Qr=rt.type===rt.elementType?Oi:zl(rt.type,Oi),Si.props=Qr,cs=rt.pendingProps,os=Si.context,Qi=dt.contextType,typeof Qi=="object"&&Qi!==null?Qi=Eo(Qi):(Qi=eo(dt)?_l:ia.current,Qi=iu(rt,Qi));var Ts=dt.getDerivedStateFromProps;(ls=typeof Ts=="function"||typeof Si.getSnapshotBeforeUpdate=="function")||typeof Si.UNSAFE_componentWillReceiveProps!="function"&&typeof Si.componentWillReceiveProps!="function"||(Oi!==cs||os!==Qi)&&ty(rt,Si,ti,Qi),qc=!1,os=rt.memoizedState,Si.state=os,Yc(rt,ti,Si,oi);var Ls=rt.memoizedState;Oi!==cs||os!==Ls||Ao.current||qc?(typeof Ts=="function"&&(jp(rt,dt,Ts,ti),Ls=rt.memoizedState),(Qr=qc||Jm(rt,dt,Qr,ti,os,Ls,Qi)||!1)?(ls||typeof Si.UNSAFE_componentWillUpdate!="function"&&typeof Si.componentWillUpdate!="function"||(typeof Si.componentWillUpdate=="function"&&Si.componentWillUpdate(ti,Ls,Qi),typeof Si.UNSAFE_componentWillUpdate=="function"&&Si.UNSAFE_componentWillUpdate(ti,Ls,Qi)),typeof Si.componentDidUpdate=="function"&&(rt.flags|=4),typeof Si.getSnapshotBeforeUpdate=="function"&&(rt.flags|=1024)):(typeof Si.componentDidUpdate!="function"||Oi===nt.memoizedProps&&os===nt.memoizedState||(rt.flags|=4),typeof Si.getSnapshotBeforeUpdate!="function"||Oi===nt.memoizedProps&&os===nt.memoizedState||(rt.flags|=1024),rt.memoizedProps=ti,rt.memoizedState=Ls),Si.props=ti,Si.state=Ls,Si.context=Qi,ti=Qr):(typeof Si.componentDidUpdate!="function"||Oi===nt.memoizedProps&&os===nt.memoizedState||(rt.flags|=4),typeof Si.getSnapshotBeforeUpdate!="function"||Oi===nt.memoizedProps&&os===nt.memoizedState||(rt.flags|=1024),ti=!1)}return ly(nt,rt,dt,ti,fi,oi)}function ly(nt,rt,dt,ti,oi,fi){da(nt,rt);var Si=(rt.flags&128)!==0;if(!ti&&!Si)return oi&&qm(rt,dt,!1),jo(nt,rt,fi);ti=rt.stateNode,Sv.current=rt;var Oi=Si&&typeof dt.getDerivedStateFromError!="function"?null:ti.render();return rt.flags|=1,nt!==null&&Si?(rt.child=Rd(rt,nt.child,null,fi),rt.child=Rd(rt,null,Oi,fi)):Bo(nt,rt,Oi,fi),rt.memoizedState=ti.state,oi&&qm(rt,dt,!0),rt.child}function uy(nt){var rt=nt.stateNode;rt.pendingContext?Hc(nt,rt.pendingContext,rt.pendingContext!==rt.context):rt.context&&Hc(nt,rt.context,!1),qp(nt,rt.containerInfo)}function gA(nt,rt,dt,ti,oi){return so(),Qp(oi),rt.flags|=256,Bo(nt,rt,dt,ti),rt.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function e0(nt){return{baseLanes:nt,cachePool:null,transitions:null}}function t0(nt,rt,dt){var ti=rt.pendingProps,oi=Js.current,fi=!1,Si=(rt.flags&128)!==0,Oi;if((Oi=Si)||(Oi=nt!==null&&nt.memoizedState===null?!1:(oi&2)!==0),Oi?(fi=!0,rt.flags&=-129):(nt===null||nt.memoizedState!==null)&&(oi|=1),ka(Js,oi&1),nt===null)return Qg(rt),nt=rt.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null)?(rt.mode&1?nt.data==="$!"?rt.lanes=8:rt.lanes=1073741824:rt.lanes=1,null):(Si=ti.children,nt=ti.fallback,fi?(ti=rt.mode,fi=rt.child,Si={mode:"hidden",children:Si},!(ti&1)&&fi!==null?(fi.childLanes=0,fi.pendingProps=Si):fi=Zh(Si,ti,0,null),nt=jf(nt,ti,dt,null),fi.return=rt,nt.return=rt,fi.sibling=nt,rt.child=fi,rt.child.memoizedState=e0(dt),rt.memoizedState=Nf,nt):n0(rt,Si));if(oi=nt.memoizedState,oi!==null&&(Oi=oi.dehydrated,Oi!==null))return Tv(nt,rt,Si,ti,Oi,oi,dt);if(fi){fi=ti.fallback,Si=rt.mode,oi=nt.child,Oi=oi.sibling;var Qi={mode:"hidden",children:ti.children};return!(Si&1)&&rt.child!==oi?(ti=rt.child,ti.childLanes=0,ti.pendingProps=Qi,rt.deletions=null):(ti=rf(oi,Qi),ti.subtreeFlags=oi.subtreeFlags&14680064),Oi!==null?fi=rf(Oi,fi):(fi=jf(fi,Si,dt,null),fi.flags|=2),fi.return=rt,ti.return=rt,ti.sibling=fi,rt.child=ti,ti=fi,fi=rt.child,Si=nt.child.memoizedState,Si=Si===null?e0(dt):{baseLanes:Si.baseLanes|dt,cachePool:null,transitions:Si.transitions},fi.memoizedState=Si,fi.childLanes=nt.childLanes&~dt,rt.memoizedState=Nf,ti}return fi=nt.child,nt=fi.sibling,ti=rf(fi,{mode:"visible",children:ti.children}),!(rt.mode&1)&&(ti.lanes=dt),ti.return=rt,ti.sibling=null,nt!==null&&(dt=rt.deletions,dt===null?(rt.deletions=[nt],rt.flags|=16):dt.push(nt)),rt.child=ti,rt.memoizedState=null,ti}function n0(nt,rt){return rt=Zh({mode:"visible",children:rt},nt.mode,0,null),rt.return=nt,nt.child=rt}function Od(nt,rt,dt,ti){return ti!==null&&Qp(ti),Rd(rt,nt.child,null,dt),nt=n0(rt,rt.pendingProps.children),nt.flags|=2,rt.memoizedState=null,nt}function Tv(nt,rt,dt,ti,oi,fi,Si){if(dt)return rt.flags&256?(rt.flags&=-257,ti=Uh(Error(ee(422))),Od(nt,rt,Si,ti)):rt.memoizedState!==null?(rt.child=nt.child,rt.flags|=128,null):(fi=ti.fallback,oi=rt.mode,ti=Zh({mode:"visible",children:ti.children},oi,0,null),fi=jf(fi,oi,Si,null),fi.flags|=2,ti.return=rt,fi.return=rt,ti.sibling=fi,rt.child=ti,rt.mode&1&&Rd(rt,nt.child,null,Si),rt.child.memoizedState=e0(Si),rt.memoizedState=Nf,fi);if(!(rt.mode&1))return Od(nt,rt,Si,null);if(oi.data==="$!"){if(ti=oi.nextSibling&&oi.nextSibling.dataset,ti)var Oi=ti.dgst;return ti=Oi,fi=Error(ee(419)),ti=Uh(fi,ti,void 0),Od(nt,rt,Si,ti)}if(Oi=(Si&nt.childLanes)!==0,To||Oi){if(ti=uo,ti!==null){switch(Si&-Si){case 4:oi=2;break;case 16:oi=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:oi=32;break;case 536870912:oi=268435456;break;default:oi=0}oi=oi&(ti.suspendedLanes|Si)?0:oi,oi!==0&&oi!==fi.retryLane&&(fi.retryLane=oi,rc(nt,oi),al(ti,nt,oi,-1))}return g0(),ti=Uh(Error(ee(421))),Od(nt,rt,Si,ti)}return oi.data==="$?"?(rt.flags|=128,rt.child=nt.child,rt=Dv.bind(null,nt),oi._reactRetry=rt,null):(nt=fi.treeContext,Dl=Su(oi.nextSibling),Hl=rt,Ya=!0,au=null,nt!==null&&(Bl[tl++]=zo,Bl[tl++]=ic,Bl[tl++]=su,zo=nt.id,ic=nt.overflow,su=rt),rt=n0(rt,ti.children),rt.flags|=4096,rt)}function i0(nt,rt,dt){nt.lanes|=rt;var ti=nt.alternate;ti!==null&&(ti.lanes|=rt),No(nt.return,rt,dt)}function AA(nt,rt,dt,ti,oi){var fi=nt.memoizedState;fi===null?nt.memoizedState={isBackwards:rt,rendering:null,renderingStartTime:0,last:ti,tail:dt,tailMode:oi}:(fi.isBackwards=rt,fi.rendering=null,fi.renderingStartTime=0,fi.last=ti,fi.tail=dt,fi.tailMode=oi)}function r0(nt,rt,dt){var ti=rt.pendingProps,oi=ti.revealOrder,fi=ti.tail;if(Bo(nt,rt,ti.children,dt),ti=Js.current,ti&2)ti=ti&1|2,rt.flags|=128;else{if(nt!==null&&nt.flags&128)e:for(nt=rt.child;nt!==null;){if(nt.tag===13)nt.memoizedState!==null&&i0(nt,dt,rt);else if(nt.tag===19)i0(nt,dt,rt);else if(nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===rt)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===rt)break e;nt=nt.return}nt.sibling.return=nt.return,nt=nt.sibling}ti&=1}if(ka(Js,ti),!(rt.mode&1))rt.memoizedState=null;else switch(oi){case"forwards":for(dt=rt.child,oi=null;dt!==null;)nt=dt.alternate,nt!==null&&lo(nt)===null&&(oi=dt),dt=dt.sibling;dt=oi,dt===null?(oi=rt.child,rt.child=null):(oi=dt.sibling,dt.sibling=null),AA(rt,!1,oi,dt,fi);break;case"backwards":for(dt=null,oi=rt.child,rt.child=null;oi!==null;){if(nt=oi.alternate,nt!==null&&lo(nt)===null){rt.child=oi;break}nt=oi.sibling,oi.sibling=dt,dt=oi,oi=nt}AA(rt,!0,dt,null,fi);break;case"together":AA(rt,!1,null,null,void 0);break;default:rt.memoizedState=null}return rt.child}function nl(nt,rt){!(rt.mode&1)&&nt!==null&&(nt.alternate=null,rt.alternate=null,rt.flags|=2)}function jo(nt,rt,dt){if(nt!==null&&(rt.dependencies=nt.dependencies),uc|=rt.lanes,!(dt&rt.childLanes))return null;if(nt!==null&&rt.child!==nt.child)throw Error(ee(153));if(rt.child!==null){for(nt=rt.child,dt=rf(nt,nt.pendingProps),rt.child=dt,dt.return=rt;nt.sibling!==null;)nt=nt.sibling,dt=dt.sibling=rf(nt,nt.pendingProps),dt.return=rt;dt.sibling=null}return rt.child}function oc(nt,rt,dt){switch(rt.tag){case 3:uy(rt),so();break;case 5:Xs(rt);break;case 1:eo(rt.type)&&Fg(rt);break;case 4:qp(rt,rt.stateNode.containerInfo);break;case 10:var ti=rt.type._context,oi=rt.memoizedProps.value;ka(ku,ti._currentValue),ti._currentValue=oi;break;case 13:if(ti=rt.memoizedState,ti!==null)return ti.dehydrated!==null?(ka(Js,Js.current&1),rt.flags|=128,null):dt&rt.child.childLanes?t0(nt,rt,dt):(ka(Js,Js.current&1),nt=jo(nt,rt,dt),nt!==null?nt.sibling:null);ka(Js,Js.current&1);break;case 19:if(ti=(dt&rt.childLanes)!==0,nt.flags&128){if(ti)return r0(nt,rt,dt);rt.flags|=128}if(oi=rt.memoizedState,oi!==null&&(oi.rendering=null,oi.tail=null,oi.lastEffect=null),ka(Js,Js.current),ti)break;return null;case 22:case 23:return rt.lanes=0,Ff(nt,rt,dt)}return jo(nt,rt,dt)}var Hh,$f,uu,Do;Hh=function(nt,rt){for(var dt=rt.child;dt!==null;){if(dt.tag===5||dt.tag===6)nt.appendChild(dt.stateNode);else if(dt.tag!==4&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===rt)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===rt)return;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}},$f=function(){},uu=function(nt,rt,dt,ti){var oi=nt.memoizedProps;if(oi!==ti){nt=rt.stateNode,Rf(Tu.current);var fi=null;switch(dt){case"input":oi=Bi(nt,oi),ti=Bi(nt,ti),fi=[];break;case"select":oi=xi({},oi,{value:void 0}),ti=xi({},ti,{value:void 0}),fi=[];break;case"textarea":oi=Us(nt,oi),ti=Us(nt,ti),fi=[];break;default:typeof oi.onClick!="function"&&typeof ti.onClick=="function"&&(nt.onclick=Og)}mi(dt,ti);var Si;dt=null;for(Qr in oi)if(!ti.hasOwnProperty(Qr)&&oi.hasOwnProperty(Qr)&&oi[Qr]!=null)if(Qr==="style"){var Oi=oi[Qr];for(Si in Oi)Oi.hasOwnProperty(Si)&&(dt||(dt={}),dt[Si]="")}else Qr!=="dangerouslySetInnerHTML"&&Qr!=="children"&&Qr!=="suppressContentEditableWarning"&&Qr!=="suppressHydrationWarning"&&Qr!=="autoFocus"&&(ye.hasOwnProperty(Qr)?fi||(fi=[]):(fi=fi||[]).push(Qr,null));for(Qr in ti){var Qi=ti[Qr];if(Oi=oi!=null?oi[Qr]:void 0,ti.hasOwnProperty(Qr)&&Qi!==Oi&&(Qi!=null||Oi!=null))if(Qr==="style")if(Oi){for(Si in Oi)!Oi.hasOwnProperty(Si)||Qi&&Qi.hasOwnProperty(Si)||(dt||(dt={}),dt[Si]="");for(Si in Qi)Qi.hasOwnProperty(Si)&&Oi[Si]!==Qi[Si]&&(dt||(dt={}),dt[Si]=Qi[Si])}else dt||(fi||(fi=[]),fi.push(Qr,dt)),dt=Qi;else Qr==="dangerouslySetInnerHTML"?(Qi=Qi?Qi.__html:void 0,Oi=Oi?Oi.__html:void 0,Qi!=null&&Oi!==Qi&&(fi=fi||[]).push(Qr,Qi)):Qr==="children"?typeof Qi!="string"&&typeof Qi!="number"||(fi=fi||[]).push(Qr,""+Qi):Qr!=="suppressContentEditableWarning"&&Qr!=="suppressHydrationWarning"&&(ye.hasOwnProperty(Qr)?(Qi!=null&&Qr==="onScroll"&&Ga("scroll",nt),fi||Oi===Qi||(fi=[])):(fi=fi||[]).push(Qr,Qi))}dt&&(fi=fi||[]).push("style",dt);var Qr=fi;(rt.updateQueue=Qr)&&(rt.flags|=4)}},Do=function(nt,rt,dt,ti){dt!==ti&&(rt.flags|=4)};function zh(nt,rt){if(!Ya)switch(nt.tailMode){case"hidden":rt=nt.tail;for(var dt=null;rt!==null;)rt.alternate!==null&&(dt=rt),rt=rt.sibling;dt===null?nt.tail=null:dt.sibling=null;break;case"collapsed":dt=nt.tail;for(var ti=null;dt!==null;)dt.alternate!==null&&(ti=dt),dt=dt.sibling;ti===null?rt||nt.tail===null?nt.tail=null:nt.tail.sibling=null:ti.sibling=null}}function il(nt){var rt=nt.alternate!==null&&nt.alternate.child===nt.child,dt=0,ti=0;if(rt)for(var oi=nt.child;oi!==null;)dt|=oi.lanes|oi.childLanes,ti|=oi.subtreeFlags&14680064,ti|=oi.flags&14680064,oi.return=nt,oi=oi.sibling;else for(oi=nt.child;oi!==null;)dt|=oi.lanes|oi.childLanes,ti|=oi.subtreeFlags,ti|=oi.flags,oi.return=nt,oi=oi.sibling;return nt.subtreeFlags|=ti,nt.childLanes=dt,rt}function bv(nt,rt,dt){var ti=rt.pendingProps;switch(Np(rt),rt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return il(rt),null;case 1:return eo(rt.type)&&ru(),il(rt),null;case 3:return ti=rt.stateNode,Wc(),Ma(Ao),Ma(ia),Kg(),ti.pendingContext&&(ti.context=ti.pendingContext,ti.pendingContext=null),(nt===null||nt.child===null)&&(Ug(rt)?rt.flags|=4:nt===null||nt.memoizedState.isDehydrated&&!(rt.flags&256)||(rt.flags|=1024,au!==null&&(Xh(au),au=null))),$f(nt,rt),il(rt),null;case 5:pa(rt);var oi=Rf(Bd.current);if(dt=rt.type,nt!==null&&rt.stateNode!=null)uu(nt,rt,dt,ti,oi),nt.ref!==rt.ref&&(rt.flags|=512,rt.flags|=2097152);else{if(!ti){if(rt.stateNode===null)throw Error(ee(166));return il(rt),null}if(nt=Rf(Tu.current),Ug(rt)){ti=rt.stateNode,dt=rt.type;var fi=rt.memoizedProps;switch(ti[Mu]=rt,ti[bf]=fi,nt=(rt.mode&1)!==0,dt){case"dialog":Ga("cancel",ti),Ga("close",ti);break;case"iframe":case"object":case"embed":Ga("load",ti);break;case"video":case"audio":for(oi=0;oi<_h.length;oi++)Ga(_h[oi],ti);break;case"source":Ga("error",ti);break;case"img":case"image":case"link":Ga("error",ti),Ga("load",ti);break;case"details":Ga("toggle",ti);break;case"input":qi(ti,fi),Ga("invalid",ti);break;case"select":ti._wrapperState={wasMultiple:!!fi.multiple},Ga("invalid",ti);break;case"textarea":xs(ti,fi),Ga("invalid",ti)}mi(dt,fi),oi=null;for(var Si in fi)if(fi.hasOwnProperty(Si)){var Oi=fi[Si];Si==="children"?typeof Oi=="string"?ti.textContent!==Oi&&(fi.suppressHydrationWarning!==!0&&kg(ti.textContent,Oi,nt),oi=["children",Oi]):typeof Oi=="number"&&ti.textContent!==""+Oi&&(fi.suppressHydrationWarning!==!0&&kg(ti.textContent,Oi,nt),oi=["children",""+Oi]):ye.hasOwnProperty(Si)&&Oi!=null&&Si==="onScroll"&&Ga("scroll",ti)}switch(dt){case"input":_s(ti),Os(ti,fi,!0);break;case"textarea":_s(ti),Gs(ti);break;case"select":case"option":break;default:typeof fi.onClick=="function"&&(ti.onclick=Og)}ti=oi,rt.updateQueue=ti,ti!==null&&(rt.flags|=4)}else{Si=oi.nodeType===9?oi:oi.ownerDocument,nt==="http://www.w3.org/1999/xhtml"&&(nt=ma(dt)),nt==="http://www.w3.org/1999/xhtml"?dt==="script"?(nt=Si.createElement("div"),nt.innerHTML="<script><\/script>",nt=nt.removeChild(nt.firstChild)):typeof ti.is=="string"?nt=Si.createElement(dt,{is:ti.is}):(nt=Si.createElement(dt),dt==="select"&&(Si=nt,ti.multiple?Si.multiple=!0:ti.size&&(Si.size=ti.size))):nt=Si.createElementNS(nt,dt),nt[Mu]=rt,nt[bf]=ti,Hh(nt,rt,!1,!1),rt.stateNode=nt;e:{switch(Si=Fi(dt,ti),dt){case"dialog":Ga("cancel",nt),Ga("close",nt),oi=ti;break;case"iframe":case"object":case"embed":Ga("load",nt),oi=ti;break;case"video":case"audio":for(oi=0;oi<_h.length;oi++)Ga(_h[oi],nt);oi=ti;break;case"source":Ga("error",nt),oi=ti;break;case"img":case"image":case"link":Ga("error",nt),Ga("load",nt),oi=ti;break;case"details":Ga("toggle",nt),oi=ti;break;case"input":qi(nt,ti),oi=Bi(nt,ti),Ga("invalid",nt);break;case"option":oi=ti;break;case"select":nt._wrapperState={wasMultiple:!!ti.multiple},oi=xi({},ti,{value:void 0}),Ga("invalid",nt);break;case"textarea":xs(nt,ti),oi=Us(nt,ti),Ga("invalid",nt);break;default:oi=ti}mi(dt,oi),Oi=oi;for(fi in Oi)if(Oi.hasOwnProperty(fi)){var Qi=Oi[fi];fi==="style"?Ta(nt,Qi):fi==="dangerouslySetInnerHTML"?(Qi=Qi?Qi.__html:void 0,Qi!=null&&Io(nt,Qi)):fi==="children"?typeof Qi=="string"?(dt!=="textarea"||Qi!=="")&&wo(nt,Qi):typeof Qi=="number"&&wo(nt,""+Qi):fi!=="suppressContentEditableWarning"&&fi!=="suppressHydrationWarning"&&fi!=="autoFocus"&&(ye.hasOwnProperty(fi)?Qi!=null&&fi==="onScroll"&&Ga("scroll",nt):Qi!=null&&ni(nt,fi,Qi,Si))}switch(dt){case"input":_s(nt),Os(nt,ti,!1);break;case"textarea":_s(nt),Gs(nt);break;case"option":ti.value!=null&&nt.setAttribute("value",""+Zr(ti.value));break;case"select":nt.multiple=!!ti.multiple,fi=ti.value,fi!=null?$s(nt,!!ti.multiple,fi,!1):ti.defaultValue!=null&&$s(nt,!!ti.multiple,ti.defaultValue,!0);break;default:typeof oi.onClick=="function"&&(nt.onclick=Og)}switch(dt){case"button":case"input":case"select":case"textarea":ti=!!ti.autoFocus;break e;case"img":ti=!0;break e;default:ti=!1}}ti&&(rt.flags|=4)}rt.ref!==null&&(rt.flags|=512,rt.flags|=2097152)}return il(rt),null;case 6:if(nt&&rt.stateNode!=null)Do(nt,rt,nt.memoizedProps,ti);else{if(typeof ti!="string"&&rt.stateNode===null)throw Error(ee(166));if(dt=Rf(Bd.current),Rf(Tu.current),Ug(rt)){if(ti=rt.stateNode,dt=rt.memoizedProps,ti[Mu]=rt,(fi=ti.nodeValue!==dt)&&(nt=Hl,nt!==null))switch(nt.tag){case 3:kg(ti.nodeValue,dt,(nt.mode&1)!==0);break;case 5:nt.memoizedProps.suppressHydrationWarning!==!0&&kg(ti.nodeValue,dt,(nt.mode&1)!==0)}fi&&(rt.flags|=4)}else ti=(dt.nodeType===9?dt:dt.ownerDocument).createTextNode(ti),ti[Mu]=rt,rt.stateNode=ti}return il(rt),null;case 13:if(Ma(Js),ti=rt.memoizedState,nt===null||nt.memoizedState!==null&&nt.memoizedState.dehydrated!==null){if(Ya&&Dl!==null&&rt.mode&1&&!(rt.flags&128))Wm(),so(),rt.flags|=98560,fi=!1;else if(fi=Ug(rt),ti!==null&&ti.dehydrated!==null){if(nt===null){if(!fi)throw Error(ee(318));if(fi=rt.memoizedState,fi=fi!==null?fi.dehydrated:null,!fi)throw Error(ee(317));fi[Mu]=rt}else so(),!(rt.flags&128)&&(rt.memoizedState=null),rt.flags|=4;il(rt),fi=!1}else au!==null&&(Xh(au),au=null),fi=!0;if(!fi)return rt.flags&65536?rt:null}return rt.flags&128?(rt.lanes=dt,rt):(ti=ti!==null,ti!==(nt!==null&&nt.memoizedState!==null)&&ti&&(rt.child.flags|=8192,rt.mode&1&&(nt===null||Js.current&1?Mo===0&&(Mo=3):g0())),rt.updateQueue!==null&&(rt.flags|=4),il(rt),null);case 4:return Wc(),$f(nt,rt),nt===null&&Td(rt.stateNode.containerInfo),il(rt),null;case 10:return jc(rt.type._context),il(rt),null;case 17:return eo(rt.type)&&ru(),il(rt),null;case 19:if(Ma(Js),fi=rt.memoizedState,fi===null)return il(rt),null;if(ti=(rt.flags&128)!==0,Si=fi.rendering,Si===null)if(ti)zh(fi,!1);else{if(Mo!==0||nt!==null&&nt.flags&128)for(nt=rt.child;nt!==null;){if(Si=lo(nt),Si!==null){for(rt.flags|=128,zh(fi,!1),ti=Si.updateQueue,ti!==null&&(rt.updateQueue=ti,rt.flags|=4),rt.subtreeFlags=0,ti=dt,dt=rt.child;dt!==null;)fi=dt,nt=ti,fi.flags&=14680066,Si=fi.alternate,Si===null?(fi.childLanes=0,fi.lanes=nt,fi.child=null,fi.subtreeFlags=0,fi.memoizedProps=null,fi.memoizedState=null,fi.updateQueue=null,fi.dependencies=null,fi.stateNode=null):(fi.childLanes=Si.childLanes,fi.lanes=Si.lanes,fi.child=Si.child,fi.subtreeFlags=0,fi.deletions=null,fi.memoizedProps=Si.memoizedProps,fi.memoizedState=Si.memoizedState,fi.updateQueue=Si.updateQueue,fi.type=Si.type,nt=Si.dependencies,fi.dependencies=nt===null?null:{lanes:nt.lanes,firstContext:nt.firstContext}),dt=dt.sibling;return ka(Js,Js.current&1|2),rt.child}nt=nt.sibling}fi.tail!==null&&Ja()>Hd&&(rt.flags|=128,ti=!0,zh(fi,!1),rt.lanes=4194304)}else{if(!ti)if(nt=lo(Si),nt!==null){if(rt.flags|=128,ti=!0,dt=nt.updateQueue,dt!==null&&(rt.updateQueue=dt,rt.flags|=4),zh(fi,!0),fi.tail===null&&fi.tailMode==="hidden"&&!Si.alternate&&!Ya)return il(rt),null}else 2*Ja()-fi.renderingStartTime>Hd&&dt!==1073741824&&(rt.flags|=128,ti=!0,zh(fi,!1),rt.lanes=4194304);fi.isBackwards?(Si.sibling=rt.child,rt.child=Si):(dt=fi.last,dt!==null?dt.sibling=Si:rt.child=Si,fi.last=Si)}return fi.tail!==null?(rt=fi.tail,fi.rendering=rt,fi.tail=rt.sibling,fi.renderingStartTime=Ja(),rt.sibling=null,dt=Js.current,ka(Js,ti?dt&1|2:dt&1),rt):(il(rt),null);case 22:case 23:return h0(),ti=rt.memoizedState!==null,nt!==null&&nt.memoizedState!==null!==ti&&(rt.flags|=8192),ti&&rt.mode&1?jl&1073741824&&(il(rt),rt.subtreeFlags&6&&(rt.flags|=8192)):il(rt),null;case 24:return null;case 25:return null}throw Error(ee(156,rt.tag))}function s0(nt,rt){switch(Np(rt),rt.tag){case 1:return eo(rt.type)&&ru(),nt=rt.flags,nt&65536?(rt.flags=nt&-65537|128,rt):null;case 3:return Wc(),Ma(Ao),Ma(ia),Kg(),nt=rt.flags,nt&65536&&!(nt&128)?(rt.flags=nt&-65537|128,rt):null;case 5:return pa(rt),null;case 13:if(Ma(Js),nt=rt.memoizedState,nt!==null&&nt.dehydrated!==null){if(rt.alternate===null)throw Error(ee(340));so()}return nt=rt.flags,nt&65536?(rt.flags=nt&-65537|128,rt):null;case 19:return Ma(Js),null;case 4:return Wc(),null;case 10:return jc(rt.type._context),null;case 22:case 23:return h0(),null;case 24:return null;default:return null}}var Vh=!1,Lo=!1,cy=typeof WeakSet=="function"?WeakSet:Set,Ds=null;function Fd(nt,rt){var dt=nt.ref;if(dt!==null)if(typeof dt=="function")try{dt(null)}catch(ti){mo(nt,rt,ti)}else dt.current=null}function jh(nt,rt,dt){try{dt()}catch(ti){mo(nt,rt,ti)}}var fy=!1;function dy(nt,rt){if(Bp=eu,nt=Bg(),Zu(nt)){if("selectionStart"in nt)var dt={start:nt.selectionStart,end:nt.selectionEnd};else e:{dt=(dt=nt.ownerDocument)&&dt.defaultView||window;var ti=dt.getSelection&&dt.getSelection();if(ti&&ti.rangeCount!==0){dt=ti.anchorNode;var oi=ti.anchorOffset,fi=ti.focusNode;ti=ti.focusOffset;try{dt.nodeType,fi.nodeType}catch{dt=null;break e}var Si=0,Oi=-1,Qi=-1,Qr=0,ls=0,cs=nt,os=null;t:for(;;){for(var Ts;cs!==dt||oi!==0&&cs.nodeType!==3||(Oi=Si+oi),cs!==fi||ti!==0&&cs.nodeType!==3||(Qi=Si+ti),cs.nodeType===3&&(Si+=cs.nodeValue.length),(Ts=cs.firstChild)!==null;)os=cs,cs=Ts;for(;;){if(cs===nt)break t;if(os===dt&&++Qr===oi&&(Oi=Si),os===fi&&++ls===ti&&(Qi=Si),(Ts=cs.nextSibling)!==null)break;cs=os,os=cs.parentNode}cs=Ts}dt=Oi===-1||Qi===-1?null:{start:Oi,end:Qi}}else dt=null}dt=dt||{start:0,end:0}}else dt=null;for(Sf={focusedElem:nt,selectionRange:dt},eu=!1,Ds=rt;Ds!==null;)if(rt=Ds,nt=rt.child,(rt.subtreeFlags&1028)!==0&&nt!==null)nt.return=rt,Ds=nt;else for(;Ds!==null;){rt=Ds;try{var Ls=rt.alternate;if(rt.flags&1024)switch(rt.tag){case 0:case 11:case 15:break;case 1:if(Ls!==null){var ks=Ls.memoizedProps,vo=Ls.memoizedState,ji=rt.stateNode,Hi=ji.getSnapshotBeforeUpdate(rt.elementType===rt.type?ks:zl(rt.type,ks),vo);ji.__reactInternalSnapshotBeforeUpdate=Hi}break;case 3:var Xi=rt.stateNode.containerInfo;Xi.nodeType===1?Xi.textContent="":Xi.nodeType===9&&Xi.documentElement&&Xi.removeChild(Xi.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(ms){mo(rt,rt.return,ms)}if(nt=rt.sibling,nt!==null){nt.return=rt.return,Ds=nt;break}Ds=rt.return}return Ls=fy,fy=!1,Ls}function qh(nt,rt,dt){var ti=rt.updateQueue;if(ti=ti!==null?ti.lastEffect:null,ti!==null){var oi=ti=ti.next;do{if((oi.tag&nt)===nt){var fi=oi.destroy;oi.destroy=void 0,fi!==void 0&&jh(rt,dt,fi)}oi=oi.next}while(oi!==ti)}}function Kh(nt,rt){if(rt=rt.updateQueue,rt=rt!==null?rt.lastEffect:null,rt!==null){var dt=rt=rt.next;do{if((dt.tag&nt)===nt){var ti=dt.create;dt.destroy=ti()}dt=dt.next}while(dt!==rt)}}function a0(nt){var rt=nt.ref;if(rt!==null){var dt=nt.stateNode;switch(nt.tag){case 5:nt=dt;break;default:nt=dt}typeof rt=="function"?rt(nt):rt.current=nt}}function o0(nt){var rt=nt.alternate;rt!==null&&(nt.alternate=null,o0(rt)),nt.child=null,nt.deletions=null,nt.sibling=null,nt.tag===5&&(rt=nt.stateNode,rt!==null&&(delete rt[Mu],delete rt[bf],delete rt[Mp],delete rt[Ev],delete rt[Pp])),nt.stateNode=null,nt.return=null,nt.dependencies=null,nt.memoizedProps=null,nt.memoizedState=null,nt.pendingProps=null,nt.stateNode=null,nt.updateQueue=null}function hy(nt){return nt.tag===5||nt.tag===3||nt.tag===4}function pA(nt){e:for(;;){for(;nt.sibling===null;){if(nt.return===null||hy(nt.return))return null;nt=nt.return}for(nt.sibling.return=nt.return,nt=nt.sibling;nt.tag!==5&&nt.tag!==6&&nt.tag!==18;){if(nt.flags&2||nt.child===null||nt.tag===4)continue e;nt.child.return=nt,nt=nt.child}if(!(nt.flags&2))return nt.stateNode}}function Nd(nt,rt,dt){var ti=nt.tag;if(ti===5||ti===6)nt=nt.stateNode,rt?dt.nodeType===8?dt.parentNode.insertBefore(nt,rt):dt.insertBefore(nt,rt):(dt.nodeType===8?(rt=dt.parentNode,rt.insertBefore(nt,dt)):(rt=dt,rt.appendChild(nt)),dt=dt._reactRootContainer,dt!=null||rt.onclick!==null||(rt.onclick=Og));else if(ti!==4&&(nt=nt.child,nt!==null))for(Nd(nt,rt,dt),nt=nt.sibling;nt!==null;)Nd(nt,rt,dt),nt=nt.sibling}function Fu(nt,rt,dt){var ti=nt.tag;if(ti===5||ti===6)nt=nt.stateNode,rt?dt.insertBefore(nt,rt):dt.appendChild(nt);else if(ti!==4&&(nt=nt.child,nt!==null))for(Fu(nt,rt,dt),nt=nt.sibling;nt!==null;)Fu(nt,rt,dt),nt=nt.sibling}var to=null,$o=!1;function cu(nt,rt,dt){for(dt=dt.child;dt!==null;)$d(nt,rt,dt),dt=dt.sibling}function $d(nt,rt,dt){if(xl&&typeof xl.onCommitFiberUnmount=="function")try{xl.onCommitFiberUnmount(wc,dt)}catch{}switch(dt.tag){case 5:Lo||Fd(dt,rt);case 6:var ti=to,oi=$o;to=null,cu(nt,rt,dt),to=ti,$o=oi,to!==null&&($o?(nt=to,dt=dt.stateNode,nt.nodeType===8?nt.parentNode.removeChild(dt):nt.removeChild(dt)):to.removeChild(dt.stateNode));break;case 18:to!==null&&($o?(nt=to,dt=dt.stateNode,nt.nodeType===8?Qc(nt.parentNode,dt):nt.nodeType===1&&Qc(nt,dt),kc(nt)):Qc(to,dt.stateNode));break;case 4:ti=to,oi=$o,to=dt.stateNode.containerInfo,$o=!0,cu(nt,rt,dt),to=ti,$o=oi;break;case 0:case 11:case 14:case 15:if(!Lo&&(ti=dt.updateQueue,ti!==null&&(ti=ti.lastEffect,ti!==null))){oi=ti=ti.next;do{var fi=oi,Si=fi.destroy;fi=fi.tag,Si!==void 0&&(fi&2||fi&4)&&jh(dt,rt,Si),oi=oi.next}while(oi!==ti)}cu(nt,rt,dt);break;case 1:if(!Lo&&(Fd(dt,rt),ti=dt.stateNode,typeof ti.componentWillUnmount=="function"))try{ti.props=dt.memoizedProps,ti.state=dt.memoizedState,ti.componentWillUnmount()}catch(Oi){mo(dt,rt,Oi)}cu(nt,rt,dt);break;case 21:cu(nt,rt,dt);break;case 22:dt.mode&1?(Lo=(ti=Lo)||dt.memoizedState!==null,cu(nt,rt,dt),Lo=ti):cu(nt,rt,dt);break;default:cu(nt,rt,dt)}}function lc(nt){var rt=nt.updateQueue;if(rt!==null){nt.updateQueue=null;var dt=nt.stateNode;dt===null&&(dt=nt.stateNode=new cy),rt.forEach(function(ti){var oi=Lv.bind(null,nt,ti);dt.has(ti)||(dt.add(ti),ti.then(oi,oi))})}}function bu(nt,rt){var dt=rt.deletions;if(dt!==null)for(var ti=0;ti<dt.length;ti++){var oi=dt[ti];try{var fi=nt,Si=rt,Oi=Si;e:for(;Oi!==null;){switch(Oi.tag){case 5:to=Oi.stateNode,$o=!1;break e;case 3:to=Oi.stateNode.containerInfo,$o=!0;break e;case 4:to=Oi.stateNode.containerInfo,$o=!0;break e}Oi=Oi.return}if(to===null)throw Error(ee(160));$d(fi,Si,oi),to=null,$o=!1;var Qi=oi.alternate;Qi!==null&&(Qi.return=null),oi.return=null}catch(Qr){mo(oi,rt,Qr)}}if(rt.subtreeFlags&12854)for(rt=rt.child;rt!==null;)gy(rt,nt),rt=rt.sibling}function gy(nt,rt){var dt=nt.alternate,ti=nt.flags;switch(nt.tag){case 0:case 11:case 14:case 15:if(bu(rt,nt),Nu(nt),ti&4){try{qh(3,nt,nt.return),Kh(3,nt)}catch(ks){mo(nt,nt.return,ks)}try{qh(5,nt,nt.return)}catch(ks){mo(nt,nt.return,ks)}}break;case 1:bu(rt,nt),Nu(nt),ti&512&&dt!==null&&Fd(dt,dt.return);break;case 5:if(bu(rt,nt),Nu(nt),ti&512&&dt!==null&&Fd(dt,dt.return),nt.flags&32){var oi=nt.stateNode;try{wo(oi,"")}catch(ks){mo(nt,nt.return,ks)}}if(ti&4&&(oi=nt.stateNode,oi!=null)){var fi=nt.memoizedProps,Si=dt!==null?dt.memoizedProps:fi,Oi=nt.type,Qi=nt.updateQueue;if(nt.updateQueue=null,Qi!==null)try{Oi==="input"&&fi.type==="radio"&&fi.name!=null&&Xr(oi,fi),Fi(Oi,Si);var Qr=Fi(Oi,fi);for(Si=0;Si<Qi.length;Si+=2){var ls=Qi[Si],cs=Qi[Si+1];ls==="style"?Ta(oi,cs):ls==="dangerouslySetInnerHTML"?Io(oi,cs):ls==="children"?wo(oi,cs):ni(oi,ls,cs,Qr)}switch(Oi){case"input":rs(oi,fi);break;case"textarea":sa(oi,fi);break;case"select":var os=oi._wrapperState.wasMultiple;oi._wrapperState.wasMultiple=!!fi.multiple;var Ts=fi.value;Ts!=null?$s(oi,!!fi.multiple,Ts,!1):os!==!!fi.multiple&&(fi.defaultValue!=null?$s(oi,!!fi.multiple,fi.defaultValue,!0):$s(oi,!!fi.multiple,fi.multiple?[]:"",!1))}oi[bf]=fi}catch(ks){mo(nt,nt.return,ks)}}break;case 6:if(bu(rt,nt),Nu(nt),ti&4){if(nt.stateNode===null)throw Error(ee(162));oi=nt.stateNode,fi=nt.memoizedProps;try{oi.nodeValue=fi}catch(ks){mo(nt,nt.return,ks)}}break;case 3:if(bu(rt,nt),Nu(nt),ti&4&&dt!==null&&dt.memoizedState.isDehydrated)try{kc(rt.containerInfo)}catch(ks){mo(nt,nt.return,ks)}break;case 4:bu(rt,nt),Nu(nt);break;case 13:bu(rt,nt),Nu(nt),oi=nt.child,oi.flags&8192&&(fi=oi.memoizedState!==null,oi.stateNode.isHidden=fi,!fi||oi.alternate!==null&&oi.alternate.memoizedState!==null||(c0=Ja())),ti&4&&lc(nt);break;case 22:if(ls=dt!==null&&dt.memoizedState!==null,nt.mode&1?(Lo=(Qr=Lo)||ls,bu(rt,nt),Lo=Qr):bu(rt,nt),Nu(nt),ti&8192){if(Qr=nt.memoizedState!==null,(nt.stateNode.isHidden=Qr)&&!ls&&nt.mode&1)for(Ds=nt,ls=nt.child;ls!==null;){for(cs=Ds=ls;Ds!==null;){switch(os=Ds,Ts=os.child,os.tag){case 0:case 11:case 14:case 15:qh(4,os,os.return);break;case 1:Fd(os,os.return);var Ls=os.stateNode;if(typeof Ls.componentWillUnmount=="function"){ti=os,dt=os.return;try{rt=ti,Ls.props=rt.memoizedProps,Ls.state=rt.memoizedState,Ls.componentWillUnmount()}catch(ks){mo(ti,dt,ks)}}break;case 5:Fd(os,os.return);break;case 22:if(os.memoizedState!==null){l0(cs);continue}}Ts!==null?(Ts.return=os,Ds=Ts):l0(cs)}ls=ls.sibling}e:for(ls=null,cs=nt;;){if(cs.tag===5){if(ls===null){ls=cs;try{oi=cs.stateNode,Qr?(fi=oi.style,typeof fi.setProperty=="function"?fi.setProperty("display","none","important"):fi.display="none"):(Oi=cs.stateNode,Qi=cs.memoizedProps.style,Si=Qi!=null&&Qi.hasOwnProperty("display")?Qi.display:null,Oi.style.display=ca("display",Si))}catch(ks){mo(nt,nt.return,ks)}}}else if(cs.tag===6){if(ls===null)try{cs.stateNode.nodeValue=Qr?"":cs.memoizedProps}catch(ks){mo(nt,nt.return,ks)}}else if((cs.tag!==22&&cs.tag!==23||cs.memoizedState===null||cs===nt)&&cs.child!==null){cs.child.return=cs,cs=cs.child;continue}if(cs===nt)break e;for(;cs.sibling===null;){if(cs.return===null||cs.return===nt)break e;ls===cs&&(ls=null),cs=cs.return}ls===cs&&(ls=null),cs.sibling.return=cs.return,cs=cs.sibling}}break;case 19:bu(rt,nt),Nu(nt),ti&4&&lc(nt);break;case 21:break;default:bu(rt,nt),Nu(nt)}}function Nu(nt){var rt=nt.flags;if(rt&2){try{e:{for(var dt=nt.return;dt!==null;){if(hy(dt)){var ti=dt;break e}dt=dt.return}throw Error(ee(160))}switch(ti.tag){case 5:var oi=ti.stateNode;ti.flags&32&&(wo(oi,""),ti.flags&=-33);var fi=pA(nt);Fu(nt,fi,oi);break;case 3:case 4:var Si=ti.stateNode.containerInfo,Oi=pA(nt);Nd(nt,Oi,Si);break;default:throw Error(ee(161))}}catch(Qi){mo(nt,nt.return,Qi)}nt.flags&=-3}rt&4096&&(nt.flags&=-4097)}function Ay(nt,rt,dt){Ds=nt,Qd(nt)}function Qd(nt,rt,dt){for(var ti=(nt.mode&1)!==0;Ds!==null;){var oi=Ds,fi=oi.child;if(oi.tag===22&&ti){var Si=oi.memoizedState!==null||Vh;if(!Si){var Oi=oi.alternate,Qi=Oi!==null&&Oi.memoizedState!==null||Lo;Oi=Vh;var Qr=Lo;if(Vh=Si,(Lo=Qi)&&!Qr)for(Ds=oi;Ds!==null;)Si=Ds,Qi=Si.child,Si.tag===22&&Si.memoizedState!==null?yy(oi):Qi!==null?(Qi.return=Si,Ds=Qi):yy(oi);for(;fi!==null;)Ds=fi,Qd(fi),fi=fi.sibling;Ds=oi,Vh=Oi,Lo=Qr}py(nt)}else oi.subtreeFlags&8772&&fi!==null?(fi.return=oi,Ds=fi):py(nt)}}function py(nt){for(;Ds!==null;){var rt=Ds;if(rt.flags&8772){var dt=rt.alternate;try{if(rt.flags&8772)switch(rt.tag){case 0:case 11:case 15:Lo||Kh(5,rt);break;case 1:var ti=rt.stateNode;if(rt.flags&4&&!Lo)if(dt===null)ti.componentDidMount();else{var oi=rt.elementType===rt.type?dt.memoizedProps:zl(rt.type,dt.memoizedProps);ti.componentDidUpdate(oi,dt.memoizedState,ti.__reactInternalSnapshotBeforeUpdate)}var fi=rt.updateQueue;fi!==null&&wf(rt,fi,ti);break;case 3:var Si=rt.updateQueue;if(Si!==null){if(dt=null,rt.child!==null)switch(rt.child.tag){case 5:dt=rt.child.stateNode;break;case 1:dt=rt.child.stateNode}wf(rt,Si,dt)}break;case 5:var Oi=rt.stateNode;if(dt===null&&rt.flags&4){dt=Oi;var Qi=rt.memoizedProps;switch(rt.type){case"button":case"input":case"select":case"textarea":Qi.autoFocus&&dt.focus();break;case"img":Qi.src&&(dt.src=Qi.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(rt.memoizedState===null){var Qr=rt.alternate;if(Qr!==null){var ls=Qr.memoizedState;if(ls!==null){var cs=ls.dehydrated;cs!==null&&kc(cs)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Lo||rt.flags&512&&a0(rt)}catch(os){mo(rt,rt.return,os)}}if(rt===nt){Ds=null;break}if(dt=rt.sibling,dt!==null){dt.return=rt.return,Ds=dt;break}Ds=rt.return}}function l0(nt){for(;Ds!==null;){var rt=Ds;if(rt===nt){Ds=null;break}var dt=rt.sibling;if(dt!==null){dt.return=rt.return,Ds=dt;break}Ds=rt.return}}function yy(nt){for(;Ds!==null;){var rt=Ds;try{switch(rt.tag){case 0:case 11:case 15:var dt=rt.return;try{Kh(4,rt)}catch(Qi){mo(rt,dt,Qi)}break;case 1:var ti=rt.stateNode;if(typeof ti.componentDidMount=="function"){var oi=rt.return;try{ti.componentDidMount()}catch(Qi){mo(rt,oi,Qi)}}var fi=rt.return;try{a0(rt)}catch(Qi){mo(rt,fi,Qi)}break;case 5:var Si=rt.return;try{a0(rt)}catch(Qi){mo(rt,Si,Qi)}}}catch(Qi){mo(rt,rt.return,Qi)}if(rt===nt){Ds=null;break}var Oi=rt.sibling;if(Oi!==null){Oi.return=rt.return,Ds=Oi;break}Ds=rt.return}}var mA=Math.ceil,Yh=ri.ReactCurrentDispatcher,u0=ri.ReactCurrentOwner,rl=ri.ReactCurrentBatchConfig,Ea=0,uo=null,po=null,Qo=0,jl=0,Ud=fa(0),Mo=0,Wh=null,uc=0,yA=0,Gd=0,Qf=null,hl=null,c0=0,Hd=1/0,cc=null,EA=!1,Uf=null,$u=null,ef=!1,tf=null,vA=0,zd=0,CA=null,Gf=-1,Hf=0;function sl(){return Ea&6?Ja():Gf!==-1?Gf:Gf=Ja()}function bo(nt){return nt.mode&1?Ea&2&&Qo!==0?Qo&-Qo:Gg.transition!==null?(Hf===0&&(Hf=cd()),Hf):(nt=Ba,nt!==0||(nt=window.event,nt=nt===void 0?16:yh(nt.type)),nt):1}function al(nt,rt,dt,ti){if(50<zd)throw zd=0,CA=null,Error(ee(185));qu(nt,dt,ti),(!(Ea&2)||nt!==uo)&&(nt===uo&&(!(Ea&2)&&(yA|=dt),Mo===4&&fu(nt,Qo)),ol(nt,ti),dt===1&&Ea===0&&!(rt.mode&1)&&(Hd=Ja()+500,Fo&&wl()))}function ol(nt,rt){var dt=nt.callbackNode;Dc(nt,rt);var ti=cl(nt,nt===uo?Qo:0);if(ti===0)dt!==null&&Cg(dt),nt.callbackNode=null,nt.callbackPriority=0;else if(rt=ti&-ti,nt.callbackPriority!==rt){if(dt!=null&&Cg(dt),rt===1)nt.tag===0?Op(Ey.bind(null,nt)):kp(Ey.bind(null,nt)),Lp(function(){!(Ea&6)&&wl()}),dt=null;else{switch(hd(ti)){case 1:dt=yu;break;case 4:dt=ga;break;case 16:dt=Bu;break;case 536870912:dt=ld;break;default:dt=Bu}dt=p0(dt,Vd.bind(null,nt))}nt.callbackPriority=rt,nt.callbackNode=dt}}function Vd(nt,rt){if(Gf=-1,Hf=0,Ea&6)throw Error(ee(327));var dt=nt.callbackNode;if(qd()&&nt.callbackNode!==dt)return null;var ti=cl(nt,nt===uo?Qo:0);if(ti===0)return null;if(ti&30||ti&nt.expiredLanes||rt)rt=xA(nt,ti);else{rt=ti;var oi=Ea;Ea|=2;var fi=IA();(uo!==nt||Qo!==rt)&&(cc=null,Hd=Ja()+500,zf(nt,rt));do try{wv();break}catch(Oi){vy(nt,Oi)}while(!0);Gp(),Yh.current=fi,Ea=oi,po!==null?rt=0:(uo=null,Qo=0,rt=Mo)}if(rt!==0){if(rt===2&&(oi=Lc(nt),oi!==0&&(ti=oi,rt=f0(nt,oi))),rt===1)throw dt=Wh,zf(nt,0),fu(nt,ti),ol(nt,Ja()),dt;if(rt===6)fu(nt,ti);else{if(oi=nt.current.alternate,!(ti&30)&&!d0(oi)&&(rt=xA(nt,ti),rt===2&&(fi=Lc(nt),fi!==0&&(ti=fi,rt=f0(nt,fi))),rt===1))throw dt=Wh,zf(nt,0),fu(nt,ti),ol(nt,Ja()),dt;switch(nt.finishedWork=oi,nt.finishedLanes=ti,rt){case 0:case 1:throw Error(ee(345));case 2:Vf(nt,hl,cc);break;case 3:if(fu(nt,ti),(ti&130023424)===ti&&(rt=c0+500-Ja(),10<rt)){if(cl(nt,0)!==0)break;if(oi=nt.suspendedLanes,(oi&ti)!==ti){sl(),nt.pingedLanes|=nt.suspendedLanes&oi;break}nt.timeoutHandle=Tf(Vf.bind(null,nt,hl,cc),rt);break}Vf(nt,hl,cc);break;case 4:if(fu(nt,ti),(ti&4194240)===ti)break;for(rt=nt.eventTimes,oi=-1;0<ti;){var Si=31-ul(ti);fi=1<<Si,Si=rt[Si],Si>oi&&(oi=Si),ti&=~fi}if(ti=oi,ti=Ja()-ti,ti=(120>ti?120:480>ti?480:1080>ti?1080:1920>ti?1920:3e3>ti?3e3:4320>ti?4320:1960*mA(ti/1960))-ti,10<ti){nt.timeoutHandle=Tf(Vf.bind(null,nt,hl,cc),ti);break}Vf(nt,hl,cc);break;case 5:Vf(nt,hl,cc);break;default:throw Error(ee(329))}}}return ol(nt,Ja()),nt.callbackNode===dt?Vd.bind(null,nt):null}function f0(nt,rt){var dt=Qf;return nt.current.memoizedState.isDehydrated&&(zf(nt,rt).flags|=256),nt=xA(nt,rt),nt!==2&&(rt=hl,hl=dt,rt!==null&&Xh(rt)),nt}function Xh(nt){hl===null?hl=nt:hl.push.apply(hl,nt)}function d0(nt){for(var rt=nt;;){if(rt.flags&16384){var dt=rt.updateQueue;if(dt!==null&&(dt=dt.stores,dt!==null))for(var ti=0;ti<dt.length;ti++){var oi=dt[ti],fi=oi.getSnapshot;oi=oi.value;try{if(!tu(fi(),oi))return!1}catch{return!1}}}if(dt=rt.child,rt.subtreeFlags&16384&&dt!==null)dt.return=rt,rt=dt;else{if(rt===nt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===nt)return!0;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}}return!0}function fu(nt,rt){for(rt&=~Gd,rt&=~yA,nt.suspendedLanes|=rt,nt.pingedLanes&=~rt,nt=nt.expirationTimes;0<rt;){var dt=31-ul(rt),ti=1<<dt;nt[dt]=-1,rt&=~ti}}function Ey(nt){if(Ea&6)throw Error(ee(327));qd();var rt=cl(nt,0);if(!(rt&1))return ol(nt,Ja()),null;var dt=xA(nt,rt);if(nt.tag!==0&&dt===2){var ti=Lc(nt);ti!==0&&(rt=ti,dt=f0(nt,ti))}if(dt===1)throw dt=Wh,zf(nt,0),fu(nt,rt),ol(nt,Ja()),dt;if(dt===6)throw Error(ee(345));return nt.finishedWork=nt.current.alternate,nt.finishedLanes=rt,Vf(nt,hl,cc),ol(nt,Ja()),null}function jd(nt,rt){var dt=Ea;Ea|=1;try{return nt(rt)}finally{Ea=dt,Ea===0&&(Hd=Ja()+500,Fo&&wl())}}function nf(nt){tf!==null&&tf.tag===0&&!(Ea&6)&&qd();var rt=Ea;Ea|=1;var dt=rl.transition,ti=Ba;try{if(rl.transition=null,Ba=1,nt)return nt()}finally{Ba=ti,rl.transition=dt,Ea=rt,!(Ea&6)&&wl()}}function h0(){jl=Ud.current,Ma(Ud)}function zf(nt,rt){nt.finishedWork=null,nt.finishedLanes=0;var dt=nt.timeoutHandle;if(dt!==-1&&(nt.timeoutHandle=-1,jm(dt)),po!==null)for(dt=po.return;dt!==null;){var ti=dt;switch(Np(ti),ti.tag){case 1:ti=ti.type.childContextTypes,ti!=null&&ru();break;case 3:Wc(),Ma(Ao),Ma(ia),Kg();break;case 5:pa(ti);break;case 4:Wc();break;case 13:Ma(Js);break;case 19:Ma(Js);break;case 10:jc(ti.type._context);break;case 22:case 23:h0()}dt=dt.return}if(uo=nt,po=nt=rf(nt.current,null),Qo=jl=rt,Mo=0,Wh=null,Gd=yA=uc=0,hl=Qf=null,Vo!==null){for(rt=0;rt<Vo.length;rt++)if(dt=Vo[rt],ti=dt.interleaved,ti!==null){dt.interleaved=null;var oi=ti.next,fi=dt.pending;if(fi!==null){var Si=fi.next;fi.next=oi,ti.next=Si}dt.pending=ti}Vo=null}return nt}function vy(nt,rt){do{var dt=po;try{if(Gp(),Yg.current=fA,ta){for(var ti=Wa.memoizedState;ti!==null;){var oi=ti.queue;oi!==null&&(oi.pending=null),ti=ti.next}ta=!1}if(Bf=0,Ia=ns=Wa=null,Ou=!1,Vl=0,u0.current=null,dt===null||dt.return===null){Mo=1,Wh=rt,po=null;break}e:{var fi=nt,Si=dt.return,Oi=dt,Qi=rt;if(rt=Qo,Oi.flags|=32768,Qi!==null&&typeof Qi=="object"&&typeof Qi.then=="function"){var Qr=Qi,ls=Oi,cs=ls.tag;if(!(ls.mode&1)&&(cs===0||cs===11||cs===15)){var os=ls.alternate;os?(ls.updateQueue=os.updateQueue,ls.memoizedState=os.memoizedState,ls.lanes=os.lanes):(ls.updateQueue=null,ls.memoizedState=null)}var Ts=Xp(Si);if(Ts!==null){Ts.flags&=-257,Zp(Ts,Si,Oi,fi,rt),Ts.mode&1&&oy(fi,Qr,rt),rt=Ts,Qi=Qr;var Ls=rt.updateQueue;if(Ls===null){var ks=new Set;ks.add(Qi),rt.updateQueue=ks}else Ls.add(Qi);break e}else{if(!(rt&1)){oy(fi,Qr,rt),g0();break e}Qi=Error(ee(426))}}else if(Ya&&Oi.mode&1){var vo=Xp(Si);if(vo!==null){!(vo.flags&65536)&&(vo.flags|=256),Zp(vo,Si,Oi,fi,rt),Qp(Pd(Qi,Oi));break e}}fi=Qi=Pd(Qi,Oi),Mo!==4&&(Mo=2),Qf===null?Qf=[fi]:Qf.push(fi),fi=Si;do{switch(fi.tag){case 3:fi.flags|=65536,rt&=-rt,fi.lanes|=rt;var ji=ay(fi,Qi,rt);Vp(fi,ji);break e;case 1:Oi=Qi;var Hi=fi.type,Xi=fi.stateNode;if(!(fi.flags&128)&&(typeof Hi.getDerivedStateFromError=="function"||Xi!==null&&typeof Xi.componentDidCatch=="function"&&($u===null||!$u.has(Xi)))){fi.flags|=65536,rt&=-rt,fi.lanes|=rt;var ms=Gh(fi,Oi,rt);Vp(fi,ms);break e}}fi=fi.return}while(fi!==null)}A0(dt)}catch(Qs){rt=Qs,po===dt&&dt!==null&&(po=dt=dt.return);continue}break}while(!0)}function IA(){var nt=Yh.current;return Yh.current=fA,nt===null?fA:nt}function g0(){(Mo===0||Mo===3||Mo===2)&&(Mo=4),uo===null||!(uc&268435455)&&!(yA&268435455)||fu(uo,Qo)}function xA(nt,rt){var dt=Ea;Ea|=2;var ti=IA();(uo!==nt||Qo!==rt)&&(cc=null,zf(nt,rt));do try{_v();break}catch(oi){vy(nt,oi)}while(!0);if(Gp(),Ea=dt,Yh.current=ti,po!==null)throw Error(ee(261));return uo=null,Qo=0,Mo}function _v(){for(;po!==null;)Cy(po)}function wv(){for(;po!==null&&!lp();)Cy(po)}function Cy(nt){var rt=xy(nt.alternate,nt,jl);nt.memoizedProps=nt.pendingProps,rt===null?A0(nt):po=rt,u0.current=null}function A0(nt){var rt=nt;do{var dt=rt.alternate;if(nt=rt.return,rt.flags&32768){if(dt=s0(dt,rt),dt!==null){dt.flags&=32767,po=dt;return}if(nt!==null)nt.flags|=32768,nt.subtreeFlags=0,nt.deletions=null;else{Mo=6,po=null;return}}else if(dt=bv(dt,rt,jl),dt!==null){po=dt;return}if(rt=rt.sibling,rt!==null){po=rt;return}po=rt=nt}while(rt!==null);Mo===0&&(Mo=5)}function Vf(nt,rt,dt){var ti=Ba,oi=rl.transition;try{rl.transition=null,Ba=1,Rv(nt,rt,dt,ti)}finally{rl.transition=oi,Ba=ti}return null}function Rv(nt,rt,dt,ti){do qd();while(tf!==null);if(Ea&6)throw Error(ee(327));dt=nt.finishedWork;var oi=nt.finishedLanes;if(dt===null)return null;if(nt.finishedWork=null,nt.finishedLanes=0,dt===nt.current)throw Error(ee(177));nt.callbackNode=null,nt.callbackPriority=0;var fi=dt.lanes|dt.childLanes;if(fp(nt,fi),nt===uo&&(po=uo=null,Qo=0),!(dt.subtreeFlags&2064)&&!(dt.flags&2064)||ef||(ef=!0,p0(Bu,function(){return qd(),null})),fi=(dt.flags&15990)!==0,dt.subtreeFlags&15990||fi){fi=rl.transition,rl.transition=null;var Si=Ba;Ba=1;var Oi=Ea;Ea|=4,u0.current=null,dy(nt,dt),gy(dt,nt),Dg(Sf),eu=!!Bp,Sf=Bp=null,nt.current=dt,Ay(dt),up(),Ea=Oi,Ba=Si,rl.transition=fi}else nt.current=dt;if(ef&&(ef=!1,tf=nt,vA=oi),fi=nt.pendingLanes,fi===0&&($u=null),Ah(dt.stateNode),ol(nt,Ja()),rt!==null)for(ti=nt.onRecoverableError,dt=0;dt<rt.length;dt++)oi=rt[dt],ti(oi.value,{componentStack:oi.stack,digest:oi.digest});if(EA)throw EA=!1,nt=Uf,Uf=null,nt;return vA&1&&nt.tag!==0&&qd(),fi=nt.pendingLanes,fi&1?nt===CA?zd++:(zd=0,CA=nt):zd=0,wl(),null}function qd(){if(tf!==null){var nt=hd(vA),rt=rl.transition,dt=Ba;try{if(rl.transition=null,Ba=16>nt?16:nt,tf===null)var ti=!1;else{if(nt=tf,tf=null,vA=0,Ea&6)throw Error(ee(331));var oi=Ea;for(Ea|=4,Ds=nt.current;Ds!==null;){var fi=Ds,Si=fi.child;if(Ds.flags&16){var Oi=fi.deletions;if(Oi!==null){for(var Qi=0;Qi<Oi.length;Qi++){var Qr=Oi[Qi];for(Ds=Qr;Ds!==null;){var ls=Ds;switch(ls.tag){case 0:case 11:case 15:qh(8,ls,fi)}var cs=ls.child;if(cs!==null)cs.return=ls,Ds=cs;else for(;Ds!==null;){ls=Ds;var os=ls.sibling,Ts=ls.return;if(o0(ls),ls===Qr){Ds=null;break}if(os!==null){os.return=Ts,Ds=os;break}Ds=Ts}}}var Ls=fi.alternate;if(Ls!==null){var ks=Ls.child;if(ks!==null){Ls.child=null;do{var vo=ks.sibling;ks.sibling=null,ks=vo}while(ks!==null)}}Ds=fi}}if(fi.subtreeFlags&2064&&Si!==null)Si.return=fi,Ds=Si;else e:for(;Ds!==null;){if(fi=Ds,fi.flags&2048)switch(fi.tag){case 0:case 11:case 15:qh(9,fi,fi.return)}var ji=fi.sibling;if(ji!==null){ji.return=fi.return,Ds=ji;break e}Ds=fi.return}}var Hi=nt.current;for(Ds=Hi;Ds!==null;){Si=Ds;var Xi=Si.child;if(Si.subtreeFlags&2064&&Xi!==null)Xi.return=Si,Ds=Xi;else e:for(Si=Hi;Ds!==null;){if(Oi=Ds,Oi.flags&2048)try{switch(Oi.tag){case 0:case 11:case 15:Kh(9,Oi)}}catch(Qs){mo(Oi,Oi.return,Qs)}if(Oi===Si){Ds=null;break e}var ms=Oi.sibling;if(ms!==null){ms.return=Oi.return,Ds=ms;break e}Ds=Oi.return}}if(Ea=oi,wl(),xl&&typeof xl.onPostCommitFiberRoot=="function")try{xl.onPostCommitFiberRoot(wc,nt)}catch{}ti=!0}return ti}finally{Ba=dt,rl.transition=rt}}return!1}function Iy(nt,rt,dt){rt=Pd(dt,rt),rt=ay(nt,rt,1),nt=Kc(nt,rt,1),rt=sl(),nt!==null&&(qu(nt,1,rt),ol(nt,rt))}function mo(nt,rt,dt){if(nt.tag===3)Iy(nt,nt,dt);else for(;rt!==null;){if(rt.tag===3){Iy(rt,nt,dt);break}else if(rt.tag===1){var ti=rt.stateNode;if(typeof rt.type.getDerivedStateFromError=="function"||typeof ti.componentDidCatch=="function"&&($u===null||!$u.has(ti))){nt=Pd(dt,nt),nt=Gh(rt,nt,1),rt=Kc(rt,nt,1),nt=sl(),rt!==null&&(qu(rt,1,nt),ol(rt,nt));break}}rt=rt.return}}function Bv(nt,rt,dt){var ti=nt.pingCache;ti!==null&&ti.delete(rt),rt=sl(),nt.pingedLanes|=nt.suspendedLanes&dt,uo===nt&&(Qo&dt)===dt&&(Mo===4||Mo===3&&(Qo&130023424)===Qo&&500>Ja()-c0?zf(nt,0):Gd|=dt),ol(nt,rt)}function SA(nt,rt){rt===0&&(nt.mode&1?(rt=Rc,Rc<<=1,!(Rc&130023424)&&(Rc=4194304)):rt=1);var dt=sl();nt=rc(nt,rt),nt!==null&&(qu(nt,rt,dt),ol(nt,dt))}function Dv(nt){var rt=nt.memoizedState,dt=0;rt!==null&&(dt=rt.retryLane),SA(nt,dt)}function Lv(nt,rt){var dt=0;switch(nt.tag){case 13:var ti=nt.stateNode,oi=nt.memoizedState;oi!==null&&(dt=oi.retryLane);break;case 19:ti=nt.stateNode;break;default:throw Error(ee(314))}ti!==null&&ti.delete(rt),SA(nt,dt)}var xy;xy=function(nt,rt,dt){if(nt!==null)if(nt.memoizedProps!==rt.pendingProps||Ao.current)To=!0;else{if(!(nt.lanes&dt)&&!(rt.flags&128))return To=!1,oc(nt,rt,dt);To=!!(nt.flags&131072)}else To=!1,Ya&&rt.flags&1048576&&Fp(rt,_d,rt.index);switch(rt.lanes=0,rt.tag){case 2:var ti=rt.type;nl(nt,rt),nt=rt.pendingProps;var oi=iu(rt,ia.current);ys(rt,dt),oi=Xc(null,rt,ti,nt,oi,dt);var fi=Mf();return rt.flags|=1,typeof oi=="object"&&oi!==null&&typeof oi.render=="function"&&oi.$$typeof===void 0?(rt.tag=1,rt.memoizedState=null,rt.updateQueue=null,eo(ti)?(fi=!0,Fg(rt)):fi=!1,rt.memoizedState=oi.state!==null&&oi.state!==void 0?oi.state:null,zp(rt),oi.updater=Vg,rt.stateNode=oi,oi._reactInternals=rt,jg(rt,ti,nt,dt),rt=ly(null,rt,ti,!0,fi,dt)):(rt.tag=0,Ya&&fi&&Ng(rt),Bo(null,rt,oi,dt),rt=rt.child),rt;case 16:ti=rt.elementType;e:{switch(nl(nt,rt),nt=rt.pendingProps,oi=ti._init,ti=oi(ti._payload),rt.type=ti,oi=rt.tag=Pv(ti),nt=zl(ti,nt),oi){case 0:rt=kd(null,rt,ti,nt,dt);break e;case 1:rt=Jp(null,rt,ti,nt,dt);break e;case 11:rt=Jc(null,rt,ti,nt,dt);break e;case 14:rt=hA(null,rt,ti,zl(ti.type,nt),dt);break e}throw Error(ee(306,ti,""))}return rt;case 0:return ti=rt.type,oi=rt.pendingProps,oi=rt.elementType===ti?oi:zl(ti,oi),kd(nt,rt,ti,oi,dt);case 1:return ti=rt.type,oi=rt.pendingProps,oi=rt.elementType===ti?oi:zl(ti,oi),Jp(nt,rt,ti,oi,dt);case 3:e:{if(uy(rt),nt===null)throw Error(ee(387));ti=rt.pendingProps,fi=rt.memoizedState,oi=fi.element,Ro(nt,rt),Yc(rt,ti,null,dt);var Si=rt.memoizedState;if(ti=Si.element,fi.isDehydrated)if(fi={element:ti,isDehydrated:!1,cache:Si.cache,pendingSuspenseBoundaries:Si.pendingSuspenseBoundaries,transitions:Si.transitions},rt.updateQueue.baseState=fi,rt.memoizedState=fi,rt.flags&256){oi=Pd(Error(ee(423)),rt),rt=gA(nt,rt,ti,dt,oi);break e}else if(ti!==oi){oi=Pd(Error(ee(424)),rt),rt=gA(nt,rt,ti,dt,oi);break e}else for(Dl=Su(rt.stateNode.containerInfo.firstChild),Hl=rt,Ya=!0,au=null,dt=ry(rt,null,ti,dt),rt.child=dt;dt;)dt.flags=dt.flags&-3|4096,dt=dt.sibling;else{if(so(),ti===oi){rt=jo(nt,rt,dt);break e}Bo(nt,rt,ti,dt)}rt=rt.child}return rt;case 5:return Xs(rt),nt===null&&Qg(rt),ti=rt.type,oi=rt.pendingProps,fi=nt!==null?nt.memoizedProps:null,Si=oi.children,Bh(ti,oi)?Si=null:fi!==null&&Bh(ti,fi)&&(rt.flags|=32),da(nt,rt),Bo(nt,rt,Si,dt),rt.child;case 6:return nt===null&&Qg(rt),null;case 13:return t0(nt,rt,dt);case 4:return qp(rt,rt.stateNode.containerInfo),ti=rt.pendingProps,nt===null?rt.child=Rd(rt,null,ti,dt):Bo(nt,rt,ti,dt),rt.child;case 11:return ti=rt.type,oi=rt.pendingProps,oi=rt.elementType===ti?oi:zl(ti,oi),Jc(nt,rt,ti,oi,dt);case 7:return Bo(nt,rt,rt.pendingProps,dt),rt.child;case 8:return Bo(nt,rt,rt.pendingProps.children,dt),rt.child;case 12:return Bo(nt,rt,rt.pendingProps.children,dt),rt.child;case 10:e:{if(ti=rt.type._context,oi=rt.pendingProps,fi=rt.memoizedProps,Si=oi.value,ka(ku,ti._currentValue),ti._currentValue=Si,fi!==null)if(tu(fi.value,Si)){if(fi.children===oi.children&&!Ao.current){rt=jo(nt,rt,dt);break e}}else for(fi=rt.child,fi!==null&&(fi.return=rt);fi!==null;){var Oi=fi.dependencies;if(Oi!==null){Si=fi.child;for(var Qi=Oi.firstContext;Qi!==null;){if(Qi.context===ti){if(fi.tag===1){Qi=sc(-1,dt&-dt),Qi.tag=2;var Qr=fi.updateQueue;if(Qr!==null){Qr=Qr.shared;var ls=Qr.pending;ls===null?Qi.next=Qi:(Qi.next=ls.next,ls.next=Qi),Qr.pending=Qi}}fi.lanes|=dt,Qi=fi.alternate,Qi!==null&&(Qi.lanes|=dt),No(fi.return,dt,rt),Oi.lanes|=dt;break}Qi=Qi.next}}else if(fi.tag===10)Si=fi.type===rt.type?null:fi.child;else if(fi.tag===18){if(Si=fi.return,Si===null)throw Error(ee(341));Si.lanes|=dt,Oi=Si.alternate,Oi!==null&&(Oi.lanes|=dt),No(Si,dt,rt),Si=fi.sibling}else Si=fi.child;if(Si!==null)Si.return=fi;else for(Si=fi;Si!==null;){if(Si===rt){Si=null;break}if(fi=Si.sibling,fi!==null){fi.return=Si.return,Si=fi;break}Si=Si.return}fi=Si}Bo(nt,rt,oi.children,dt),rt=rt.child}return rt;case 9:return oi=rt.type,ti=rt.pendingProps.children,ys(rt,dt),oi=Eo(oi),ti=ti(oi),rt.flags|=1,Bo(nt,rt,ti,dt),rt.child;case 14:return ti=rt.type,oi=zl(ti,rt.pendingProps),oi=zl(ti.type,oi),hA(nt,rt,ti,oi,dt);case 15:return Pl(nt,rt,rt.type,rt.pendingProps,dt);case 17:return ti=rt.type,oi=rt.pendingProps,oi=rt.elementType===ti?oi:zl(ti,oi),nl(nt,rt),rt.tag=1,eo(ti)?(nt=!0,Fg(rt)):nt=!1,ys(rt,dt),ey(rt,ti,oi),jg(rt,ti,oi,dt),ly(null,rt,ti,!0,nt,dt);case 19:return r0(nt,rt,dt);case 22:return Ff(nt,rt,dt)}throw Error(ee(156,rt.tag))};function p0(nt,rt){return gh(nt,rt)}function Mv(nt,rt,dt,ti){this.tag=nt,this.key=dt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=rt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ti,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function du(nt,rt,dt,ti){return new Mv(nt,rt,dt,ti)}function m0(nt){return nt=nt.prototype,!(!nt||!nt.isReactComponent)}function Pv(nt){if(typeof nt=="function")return m0(nt)?1:0;if(nt!=null){if(nt=nt.$$typeof,nt===_i)return 11;if(nt===yi)return 14}return 2}function rf(nt,rt){var dt=nt.alternate;return dt===null?(dt=du(nt.tag,rt,nt.key,nt.mode),dt.elementType=nt.elementType,dt.type=nt.type,dt.stateNode=nt.stateNode,dt.alternate=nt,nt.alternate=dt):(dt.pendingProps=rt,dt.type=nt.type,dt.flags=0,dt.subtreeFlags=0,dt.deletions=null),dt.flags=nt.flags&14680064,dt.childLanes=nt.childLanes,dt.lanes=nt.lanes,dt.child=nt.child,dt.memoizedProps=nt.memoizedProps,dt.memoizedState=nt.memoizedState,dt.updateQueue=nt.updateQueue,rt=nt.dependencies,dt.dependencies=rt===null?null:{lanes:rt.lanes,firstContext:rt.firstContext},dt.sibling=nt.sibling,dt.index=nt.index,dt.ref=nt.ref,dt}function TA(nt,rt,dt,ti,oi,fi){var Si=2;if(ti=nt,typeof nt=="function")m0(nt)&&(Si=1);else if(typeof nt=="string")Si=5;else e:switch(nt){case ai:return jf(dt.children,oi,fi,rt);case ci:Si=8,oi|=8;break;case Ci:return nt=du(12,dt,rt,oi|2),nt.elementType=Ci,nt.lanes=fi,nt;case bi:return nt=du(13,dt,rt,oi),nt.elementType=bi,nt.lanes=fi,nt;case Mi:return nt=du(19,dt,rt,oi),nt.elementType=Mi,nt.lanes=fi,nt;case Ii:return Zh(dt,oi,fi,rt);default:if(typeof nt=="object"&&nt!==null)switch(nt.$$typeof){case pi:Si=10;break e;case gi:Si=9;break e;case _i:Si=11;break e;case yi:Si=14;break e;case Ti:Si=16,ti=null;break e}throw Error(ee(130,nt==null?nt:typeof nt,""))}return rt=du(Si,dt,rt,oi),rt.elementType=nt,rt.type=ti,rt.lanes=fi,rt}function jf(nt,rt,dt,ti){return nt=du(7,nt,ti,rt),nt.lanes=dt,nt}function Zh(nt,rt,dt,ti){return nt=du(22,nt,ti,rt),nt.elementType=Ii,nt.lanes=dt,nt.stateNode={isHidden:!1},nt}function Jh(nt,rt,dt){return nt=du(6,nt,null,rt),nt.lanes=dt,nt}function qf(nt,rt,dt){return rt=du(4,nt.children!==null?nt.children:[],nt.key,rt),rt.lanes=dt,rt.stateNode={containerInfo:nt.containerInfo,pendingChildren:null,implementation:nt.implementation},rt}function kv(nt,rt,dt,ti,oi){this.tag=rt,this.containerInfo=nt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=ti,this.onRecoverableError=oi,this.mutableSourceEagerHydrationData=null}function bA(nt,rt,dt,ti,oi,fi,Si,Oi,Qi){return nt=new kv(nt,rt,dt,Oi,Qi),rt===1?(rt=1,fi===!0&&(rt|=8)):rt=0,fi=du(3,null,null,rt),nt.current=fi,fi.stateNode=nt,fi.memoizedState={element:ti,isDehydrated:dt,cache:null,transitions:null,pendingSuspenseBoundaries:null},zp(fi),nt}function Sy(nt,rt,dt){var ti=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:ti==null?null:""+ti,children:nt,containerInfo:rt,implementation:dt}}function y0(nt){if(!nt)return Pu;nt=nt._reactInternals;e:{if(Zl(nt)!==nt||nt.tag!==1)throw Error(ee(170));var rt=nt;do{switch(rt.tag){case 3:rt=rt.stateNode.context;break e;case 1:if(eo(rt.type)){rt=rt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}rt=rt.return}while(rt!==null);throw Error(ee(171))}if(nt.tag===1){var dt=nt.type;if(eo(dt))return Mh(nt,dt,rt)}return rt}function Ty(nt,rt,dt,ti,oi,fi,Si,Oi,Qi){return nt=bA(dt,ti,!0,nt,oi,fi,Si,Oi,Qi),nt.context=y0(null),dt=nt.current,ti=sl(),oi=bo(dt),fi=sc(ti,oi),fi.callback=rt??null,Kc(dt,fi,oi),nt.current.lanes=oi,qu(nt,oi,ti),ol(nt,ti),nt}function eg(nt,rt,dt,ti){var oi=rt.current,fi=sl(),Si=bo(oi);return dt=y0(dt),rt.context===null?rt.context=dt:rt.pendingContext=dt,rt=sc(fi,Si),rt.payload={element:nt},ti=ti===void 0?null:ti,ti!==null&&(rt.callback=ti),nt=Kc(oi,rt,Si),nt!==null&&(al(nt,oi,Si,fi),zg(nt,oi,Si)),Si}function _A(nt){if(nt=nt.current,!nt.child)return null;switch(nt.child.tag){case 5:return nt.child.stateNode;default:return nt.child.stateNode}}function by(nt,rt){if(nt=nt.memoizedState,nt!==null&&nt.dehydrated!==null){var dt=nt.retryLane;nt.retryLane=dt!==0&&dt<rt?dt:rt}}function E0(nt,rt){by(nt,rt),(nt=nt.alternate)&&by(nt,rt)}function _y(){return null}var v0=typeof reportError=="function"?reportError:function(nt){console.error(nt)};function wA(nt){this._internalRoot=nt}fc.prototype.render=wA.prototype.render=function(nt){var rt=this._internalRoot;if(rt===null)throw Error(ee(409));eg(nt,rt,null,null)},fc.prototype.unmount=wA.prototype.unmount=function(){var nt=this._internalRoot;if(nt!==null){this._internalRoot=null;var rt=nt.containerInfo;nf(function(){eg(null,nt,null,null)}),rt[nc]=null}};function fc(nt){this._internalRoot=nt}fc.prototype.unstable_scheduleHydration=function(nt){if(nt){var rt=Ad();nt={blockedOn:null,target:nt,priority:rt};for(var dt=0;dt<Pa.length&&rt!==0&&rt<Pa[dt].priority;dt++);Pa.splice(dt,0,nt),dt===0&&Sg(nt)}};function C0(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11)}function RA(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11&&(nt.nodeType!==8||nt.nodeValue!==" react-mount-point-unstable "))}function wy(){}function Ov(nt,rt,dt,ti,oi){if(oi){if(typeof ti=="function"){var fi=ti;ti=function(){var Qr=_A(Si);fi.call(Qr)}}var Si=Ty(rt,ti,nt,0,null,!1,!1,"",wy);return nt._reactRootContainer=Si,nt[nc]=Si.current,Td(nt.nodeType===8?nt.parentNode:nt),nf(),Si}for(;oi=nt.lastChild;)nt.removeChild(oi);if(typeof ti=="function"){var Oi=ti;ti=function(){var Qr=_A(Qi);Oi.call(Qr)}}var Qi=bA(nt,0,!1,null,null,!1,!1,"",wy);return nt._reactRootContainer=Qi,nt[nc]=Qi.current,Td(nt.nodeType===8?nt.parentNode:nt),nf(function(){eg(rt,Qi,dt,ti)}),Qi}function BA(nt,rt,dt,ti,oi){var fi=dt._reactRootContainer;if(fi){var Si=fi;if(typeof oi=="function"){var Oi=oi;oi=function(){var Qi=_A(Si);Oi.call(Qi)}}eg(rt,Si,nt,oi)}else Si=Ov(dt,rt,nt,oi,ti);return _A(Si)}mf=function(nt){switch(nt.tag){case 3:var rt=nt.stateNode;if(rt.current.memoizedState.isDehydrated){var dt=Eu(rt.pendingLanes);dt!==0&&(Du(rt,dt|1),ol(rt,Ja()),!(Ea&6)&&(Hd=Ja()+500,wl()))}break;case 13:nf(function(){var ti=rc(nt,1);if(ti!==null){var oi=sl();al(ti,nt,1,oi)}}),E0(nt,1)}},gd=function(nt){if(nt.tag===13){var rt=rc(nt,134217728);if(rt!==null){var dt=sl();al(rt,nt,134217728,dt)}E0(nt,134217728)}},ba=function(nt){if(nt.tag===13){var rt=bo(nt),dt=rc(nt,rt);if(dt!==null){var ti=sl();al(dt,nt,rt,ti)}E0(nt,rt)}},Ad=function(){return Ba},pd=function(nt,rt){var dt=Ba;try{return Ba=nt,rt()}finally{Ba=dt}},vs=function(nt,rt,dt){switch(rt){case"input":if(rs(nt,dt),rt=dt.name,dt.type==="radio"&&rt!=null){for(dt=nt;dt.parentNode;)dt=dt.parentNode;for(dt=dt.querySelectorAll("input[name="+JSON.stringify(""+rt)+'][type="radio"]'),rt=0;rt<dt.length;rt++){var ti=dt[rt];if(ti!==nt&&ti.form===nt.form){var oi=Ks(ti);if(!oi)throw Error(ee(90));ws(ti),rs(ti,oi)}}}break;case"textarea":sa(nt,dt);break;case"select":rt=dt.value,rt!=null&&$s(nt,!!dt.multiple,rt,!1)}},ya=jd,Ns=nf;var Fv={usingClientEntryPoint:!1,Events:[Lh,bd,Ks,ea,Vs,jd]},Kd={findFiberByHostInstance:nu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Nv={bundleType:Kd.bundleType,version:Kd.version,rendererPackageName:Kd.rendererPackageName,rendererConfig:Kd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(nt){return nt=Eg(nt),nt===null?null:nt.stateNode},findFiberByHostInstance:Kd.findFiberByHostInstance||_y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var DA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!DA.isDisabled&&DA.supportsFiber)try{wc=DA.inject(Nv),xl=DA}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fv,reactDom_production_min.createPortal=function(nt,rt){var dt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C0(rt))throw Error(ee(200));return Sy(nt,rt,null,dt)},reactDom_production_min.createRoot=function(nt,rt){if(!C0(nt))throw Error(ee(299));var dt=!1,ti="",oi=v0;return rt!=null&&(rt.unstable_strictMode===!0&&(dt=!0),rt.identifierPrefix!==void 0&&(ti=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(oi=rt.onRecoverableError)),rt=bA(nt,1,!1,null,null,dt,!1,ti,oi),nt[nc]=rt.current,Td(nt.nodeType===8?nt.parentNode:nt),new wA(rt)},reactDom_production_min.findDOMNode=function(nt){if(nt==null)return null;if(nt.nodeType===1)return nt;var rt=nt._reactInternals;if(rt===void 0)throw typeof nt.render=="function"?Error(ee(188)):(nt=Object.keys(nt).join(","),Error(ee(268,nt)));return nt=Eg(rt),nt=nt===null?null:nt.stateNode,nt},reactDom_production_min.flushSync=function(nt){return nf(nt)},reactDom_production_min.hydrate=function(nt,rt,dt){if(!RA(rt))throw Error(ee(200));return BA(null,nt,rt,!0,dt)},reactDom_production_min.hydrateRoot=function(nt,rt,dt){if(!C0(nt))throw Error(ee(405));var ti=dt!=null&&dt.hydratedSources||null,oi=!1,fi="",Si=v0;if(dt!=null&&(dt.unstable_strictMode===!0&&(oi=!0),dt.identifierPrefix!==void 0&&(fi=dt.identifierPrefix),dt.onRecoverableError!==void 0&&(Si=dt.onRecoverableError)),rt=Ty(rt,null,nt,1,dt??null,oi,!1,fi,Si),nt[nc]=rt.current,Td(nt),ti)for(nt=0;nt<ti.length;nt++)dt=ti[nt],oi=dt._getVersion,oi=oi(dt._source),rt.mutableSourceEagerHydrationData==null?rt.mutableSourceEagerHydrationData=[dt,oi]:rt.mutableSourceEagerHydrationData.push(dt,oi);return new fc(rt)},reactDom_production_min.render=function(nt,rt,dt){if(!RA(rt))throw Error(ee(200));return BA(null,nt,rt,!1,dt)},reactDom_production_min.unmountComponentAtNode=function(nt){if(!RA(nt))throw Error(ee(40));return nt._reactRootContainer?(nf(function(){BA(null,null,nt,!1,function(){nt._reactRootContainer=null,nt[nc]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=jd,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(nt,rt,dt,ti){if(!RA(dt))throw Error(ee(200));if(nt==null||nt._reactInternals===void 0)throw Error(ee(38));return BA(nt,rt,dt,!1,ti)},reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608",reactDom_production_min}var reactDom_development={};/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_development;function requireReactDom_development(){return hasRequiredReactDom_development||(hasRequiredReactDom_development=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var ie=reactExports,Z=requireScheduler(),ee=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=!1;function ye(Ke){ae=Ke}function ve(Ke){if(!ae){for(var Ye=arguments.length,ot=new Array(Ye>1?Ye-1:0),ft=1;ft<Ye;ft++)ot[ft-1]=arguments[ft];Qe("warn",Ke,ot)}}function be(Ke){if(!ae){for(var Ye=arguments.length,ot=new Array(Ye>1?Ye-1:0),ft=1;ft<Ye;ft++)ot[ft-1]=arguments[ft];Qe("error",Ke,ot)}}function Qe(Ke,Ye,ot){{var ft=ee.ReactDebugCurrentFrame,pt=ft.getStackAddendum();pt!==""&&(Ye+="%s",ot=ot.concat([pt]));var ii=ot.map(function(ui){return String(ui)});ii.unshift("Warning: "+Ye),Function.prototype.apply.call(console[Ke],console,ii)}}var Xe=0,Je=1,tt=2,it=3,st=4,lt=5,ct=6,gt=7,ut=8,mt=9,ei=10,ni=11,ri=12,si=13,li=14,ai=15,ci=16,Ci=17,pi=18,gi=19,_i=21,bi=22,Mi=23,yi=24,Ti=25,Ii=!0,Ri=!1,Pi=!1,xi=!1,ki=!1,Li=!0,Yr=!1,Ui=!1,Vi=!0,Kr=!0,Wi=!0,Zr=new Set,ps={},Is={};function _s(Ke,Ye){ws(Ke,Ye),ws(Ke+"Capture",Ye)}function ws(Ke,Ye){ps[Ke]&&be("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",Ke),ps[Ke]=Ye;{var ot=Ke.toLowerCase();Is[ot]=Ke,Ke==="onDoubleClick"&&(Is.ondblclick=Ke)}for(var ft=0;ft<Ye.length;ft++)Zr.add(Ye[ft])}var hi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bi=Object.prototype.hasOwnProperty;function qi(Ke){{var Ye=typeof Symbol=="function"&&Symbol.toStringTag,ot=Ye&&Ke[Symbol.toStringTag]||Ke.constructor.name||"Object";return ot}}function Xr(Ke){try{return rs(Ke),!1}catch{return!0}}function rs(Ke){return""+Ke}function Os(Ke,Ye){if(Xr(Ke))return be("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",Ye,qi(Ke)),rs(Ke)}function gs(Ke){if(Xr(Ke))return be("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",qi(Ke)),rs(Ke)}function zs(Ke,Ye){if(Xr(Ke))return be("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",Ye,qi(Ke)),rs(Ke)}function $s(Ke,Ye){if(Xr(Ke))return be("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",Ye,qi(Ke)),rs(Ke)}function Us(Ke){if(Xr(Ke))return be("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",qi(Ke)),rs(Ke)}function xs(Ke){if(Xr(Ke))return be("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",qi(Ke)),rs(Ke)}var sa=0,Gs=1,ma=2,ha=3,za=4,Io=5,wo=6,hs=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Fs=hs+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ca=new RegExp("^["+hs+"]["+Fs+"]*$"),Ta={},vi={};function mi(Ke){return Bi.call(vi,Ke)?!0:Bi.call(Ta,Ke)?!1:ca.test(Ke)?(vi[Ke]=!0,!0):(Ta[Ke]=!0,be("Invalid attribute name: `%s`",Ke),!1)}function Fi(Ke,Ye,ot){return Ye!==null?Ye.type===sa:ot?!1:Ke.length>2&&(Ke[0]==="o"||Ke[0]==="O")&&(Ke[1]==="n"||Ke[1]==="N")}function Ni(Ke,Ye,ot,ft){if(ot!==null&&ot.type===sa)return!1;switch(typeof Ye){case"function":case"symbol":return!0;case"boolean":{if(ft)return!1;if(ot!==null)return!ot.acceptsBooleans;var pt=Ke.toLowerCase().slice(0,5);return pt!=="data-"&&pt!=="aria-"}default:return!1}}function is(Ke,Ye,ot,ft){if(Ye===null||typeof Ye>"u"||Ni(Ke,Ye,ot,ft))return!0;if(ft)return!1;if(ot!==null)switch(ot.type){case ha:return!Ye;case za:return Ye===!1;case Io:return isNaN(Ye);case wo:return isNaN(Ye)||Ye<1}return!1}function vs(Ke){return as.hasOwnProperty(Ke)?as[Ke]:null}function us(Ke,Ye,ot,ft,pt,ii,ui){this.acceptsBooleans=Ye===ma||Ye===ha||Ye===za,this.attributeName=ft,this.attributeNamespace=pt,this.mustUseProperty=ot,this.propertyName=Ke,this.type=Ye,this.sanitizeURL=ii,this.removeEmptyString=ui}var as={},js=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];js.forEach(function(Ke){as[Ke]=new us(Ke,sa,!1,Ke,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Ke){var Ye=Ke[0],ot=Ke[1];as[Ye]=new us(Ye,Gs,!1,ot,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(Ke){as[Ke]=new us(Ke,ma,!1,Ke.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Ke){as[Ke]=new us(Ke,ma,!1,Ke,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(Ke){as[Ke]=new us(Ke,ha,!1,Ke.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(Ke){as[Ke]=new us(Ke,ha,!0,Ke,null,!1,!1)}),["capture","download"].forEach(function(Ke){as[Ke]=new us(Ke,za,!1,Ke,null,!1,!1)}),["cols","rows","size","span"].forEach(function(Ke){as[Ke]=new us(Ke,wo,!1,Ke,null,!1,!1)}),["rowSpan","start"].forEach(function(Ke){as[Ke]=new us(Ke,Io,!1,Ke.toLowerCase(),null,!1,!1)});var ea=/[\-\:]([a-z])/g,Vs=function(Ke){return Ke[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(Ke){var Ye=Ke.replace(ea,Vs);as[Ye]=new us(Ye,Gs,!1,Ke,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(Ke){var Ye=Ke.replace(ea,Vs);as[Ye]=new us(Ye,Gs,!1,Ke,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(Ke){var Ye=Ke.replace(ea,Vs);as[Ye]=new us(Ye,Gs,!1,Ke,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(Ke){as[Ke]=new us(Ke,Gs,!1,Ke.toLowerCase(),null,!1,!1)});var ya="xlinkHref";as[ya]=new us("xlinkHref",Gs,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(Ke){as[Ke]=new us(Ke,Gs,!1,Ke.toLowerCase(),null,!0,!0)});var Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,fo=!1;function ja(Ke){!fo&&Ns.test(Ke)&&(fo=!0,be("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(Ke)))}function xo(Ke,Ye,ot,ft){if(ft.mustUseProperty){var pt=ft.propertyName;return Ke[pt]}else{Os(ot,Ye),ft.sanitizeURL&&ja(""+ot);var ii=ft.attributeName,ui=null;if(ft.type===za){if(Ke.hasAttribute(ii)){var di=Ke.getAttribute(ii);return di===""?!0:is(Ye,ot,ft,!1)?di:di===""+ot?ot:di}}else if(Ke.hasAttribute(ii)){if(is(Ye,ot,ft,!1))return Ke.getAttribute(ii);if(ft.type===ha)return ot;ui=Ke.getAttribute(ii)}return is(Ye,ot,ft,!1)?ui===null?ot:ui:ui===""+ot?ot:ui}}function ll(Ke,Ye,ot,ft){{if(!mi(Ye))return;if(!Ke.hasAttribute(Ye))return ot===void 0?void 0:null;var pt=Ke.getAttribute(Ye);return Os(ot,Ye),pt===""+ot?ot:pt}}function qa(Ke,Ye,ot,ft){var pt=vs(Ye);if(!Fi(Ye,pt,ft)){if(is(Ye,ot,pt,ft)&&(ot=null),ft||pt===null){if(mi(Ye)){var ii=Ye;ot===null?Ke.removeAttribute(ii):(Os(ot,Ye),Ke.setAttribute(ii,""+ot))}return}var ui=pt.mustUseProperty;if(ui){var di=pt.propertyName;if(ot===null){var Ai=pt.type;Ke[di]=Ai===ha?!1:""}else Ke[di]=ot;return}var wi=pt.attributeName,Di=pt.attributeNamespace;if(ot===null)Ke.removeAttribute(wi);else{var zi=pt.type,Gi;zi===ha||zi===za&&ot===!0?Gi="":(Os(ot,wi),Gi=""+ot,pt.sanitizeURL&&ja(Gi.toString())),Di?Ke.setAttributeNS(Di,wi,Gi):Ke.setAttribute(wi,Gi)}}}var yo=Symbol.for("react.element"),no=Symbol.for("react.portal"),Ql=Symbol.for("react.fragment"),Sc=Symbol.for("react.strict_mode"),Tc=Symbol.for("react.profiler"),od=Symbol.for("react.provider"),hh=Symbol.for("react.context"),ho=Symbol.for("react.forward_ref"),Zl=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),bc=Symbol.for("react.memo"),Ho=Symbol.for("react.lazy"),Eg=Symbol.for("react.scope"),vg=Symbol.for("react.debug_trace_mode"),gh=Symbol.for("react.offscreen"),Cg=Symbol.for("react.legacy_hidden"),lp=Symbol.for("react.cache"),up=Symbol.for("react.tracing_marker"),Ja=Symbol.iterator,cp="@@iterator";function yu(Ke){if(Ke===null||typeof Ke!="object")return null;var Ye=Ja&&Ke[Ja]||Ke[cp];return typeof Ye=="function"?Ye:null}var ga=Object.assign,Bu=0,_c,ld,wc,xl,Ah,ul,ph;function mh(){}mh.__reactDisabledLog=!0;function Ig(){{if(Bu===0){_c=console.log,ld=console.info,wc=console.warn,xl=console.error,Ah=console.group,ul=console.groupCollapsed,ph=console.groupEnd;var Ke={configurable:!0,enumerable:!0,value:mh,writable:!0};Object.defineProperties(console,{info:Ke,log:Ke,warn:Ke,error:Ke,group:Ke,groupCollapsed:Ke,groupEnd:Ke})}Bu++}}function ud(){{if(Bu--,Bu===0){var Ke={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ga({},Ke,{value:_c}),info:ga({},Ke,{value:ld}),warn:ga({},Ke,{value:wc}),error:ga({},Ke,{value:xl}),group:ga({},Ke,{value:Ah}),groupCollapsed:ga({},Ke,{value:ul}),groupEnd:ga({},Ke,{value:ph})})}Bu<0&&be("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Rc=ee.ReactCurrentDispatcher,Eu;function cl(Ke,Ye,ot){{if(Eu===void 0)try{throw Error()}catch(pt){var ft=pt.stack.trim().match(/\n( *(at )?)/);Eu=ft&&ft[1]||""}return`
`+Eu+Ke}}var Bc=!1,Dc;{var Lc=typeof WeakMap=="function"?WeakMap:Map;Dc=new Lc}function cd(Ke,Ye){if(!Ke||Bc)return"";{var ot=Dc.get(Ke);if(ot!==void 0)return ot}var ft;Bc=!0;var pt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ii;ii=Rc.current,Rc.current=null,Ig();try{if(Ye){var ui=function(){throw Error()};if(Object.defineProperty(ui.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ui,[])}catch(_r){ft=_r}Reflect.construct(Ke,[],ui)}else{try{ui.call()}catch(_r){ft=_r}Ke.call(ui.prototype)}}else{try{throw Error()}catch(_r){ft=_r}Ke()}}catch(_r){if(_r&&ft&&typeof _r.stack=="string"){for(var di=_r.stack.split(`
`),Ai=ft.stack.split(`
`),wi=di.length-1,Di=Ai.length-1;wi>=1&&Di>=0&&di[wi]!==Ai[Di];)Di--;for(;wi>=1&&Di>=0;wi--,Di--)if(di[wi]!==Ai[Di]){if(wi!==1||Di!==1)do if(wi--,Di--,Di<0||di[wi]!==Ai[Di]){var zi=`
`+di[wi].replace(" at new "," at ");return Ke.displayName&&zi.includes("<anonymous>")&&(zi=zi.replace("<anonymous>",Ke.displayName)),typeof Ke=="function"&&Dc.set(Ke,zi),zi}while(wi>=1&&Di>=0);break}}}finally{Bc=!1,Rc.current=ii,ud(),Error.prepareStackTrace=pt}var Gi=Ke?Ke.displayName||Ke.name:"",Zi=Gi?cl(Gi):"";return typeof Ke=="function"&&Dc.set(Ke,Zi),Zi}function dd(Ke,Ye,ot){return cd(Ke,!0)}function qu(Ke,Ye,ot){return cd(Ke,!1)}function fp(Ke){var Ye=Ke.prototype;return!!(Ye&&Ye.isReactComponent)}function Du(Ke,Ye,ot){if(Ke==null)return"";if(typeof Ke=="function")return cd(Ke,fp(Ke));if(typeof Ke=="string")return cl(Ke);switch(Ke){case Zl:return cl("Suspense");case pf:return cl("SuspenseList")}if(typeof Ke=="object")switch(Ke.$$typeof){case ho:return qu(Ke.render);case bc:return Du(Ke.type,Ye,ot);case Ho:{var ft=Ke,pt=ft._payload,ii=ft._init;try{return Du(ii(pt),Ye,ot)}catch{}}}return""}function Ba(Ke){switch(Ke._debugOwner&&Ke._debugOwner.type,Ke._debugSource,Ke.tag){case lt:return cl(Ke.type);case ci:return cl("Lazy");case si:return cl("Suspense");case gi:return cl("SuspenseList");case Xe:case tt:case ai:return qu(Ke.type);case ni:return qu(Ke.type.render);case Je:return dd(Ke.type);default:return""}}function hd(Ke){try{var Ye="",ot=Ke;do Ye+=Ba(ot),ot=ot.return;while(ot);return Ye}catch(ft){return`
Error generating stack: `+ft.message+`
`+ft.stack}}function mf(Ke,Ye,ot){var ft=Ke.displayName;if(ft)return ft;var pt=Ye.displayName||Ye.name||"";return pt!==""?ot+"("+pt+")":ot}function gd(Ke){return Ke.displayName||"Context"}function ba(Ke){if(Ke==null)return null;if(typeof Ke.tag=="number"&&be("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof Ke=="function")return Ke.displayName||Ke.name||null;if(typeof Ke=="string")return Ke;switch(Ke){case Ql:return"Fragment";case no:return"Portal";case Tc:return"Profiler";case Sc:return"StrictMode";case Zl:return"Suspense";case pf:return"SuspenseList"}if(typeof Ke=="object")switch(Ke.$$typeof){case hh:var Ye=Ke;return gd(Ye)+".Consumer";case od:var ot=Ke;return gd(ot._context)+".Provider";case ho:return mf(Ke,Ke.render,"ForwardRef");case bc:var ft=Ke.displayName||null;return ft!==null?ft:ba(Ke.type)||"Memo";case Ho:{var pt=Ke,ii=pt._payload,ui=pt._init;try{return ba(ui(ii))}catch{return null}}}return null}function Ad(Ke,Ye,ot){var ft=Ye.displayName||Ye.name||"";return Ke.displayName||(ft!==""?ot+"("+ft+")":ot)}function pd(Ke){return Ke.displayName||"Context"}function aa(Ke){var Ye=Ke.tag,ot=Ke.type;switch(Ye){case yi:return"Cache";case mt:var ft=ot;return pd(ft)+".Consumer";case ei:var pt=ot;return pd(pt._context)+".Provider";case pi:return"DehydratedFragment";case ni:return Ad(ot,ot.render,"ForwardRef");case gt:return"Fragment";case lt:return ot;case st:return"Portal";case it:return"Root";case ct:return"Text";case ci:return ba(ot);case ut:return ot===Sc?"StrictMode":"Mode";case bi:return"Offscreen";case ri:return"Profiler";case _i:return"Scope";case si:return"Suspense";case gi:return"SuspenseList";case Ti:return"TracingMarker";case Je:case Xe:case Ci:case tt:case li:case ai:if(typeof ot=="function")return ot.displayName||ot.name||null;if(typeof ot=="string")return ot;break}return null}var yf=ee.ReactDebugCurrentFrame,io=null,Sl=!1;function dl(){{if(io===null)return null;var Ke=io._debugOwner;if(Ke!==null&&typeof Ke<"u")return aa(Ke)}return null}function Mc(){return io===null?"":hd(io)}function go(){yf.getCurrentStack=null,io=null,Sl=!1}function Pa(Ke){yf.getCurrentStack=Ke===null?null:Mc,io=Ke,Sl=!1}function xg(){return io}function Tl(Ke){Sl=Ke}function ko(Ke){return""+Ke}function Lu(Ke){switch(typeof Ke){case"boolean":case"number":case"string":case"undefined":return Ke;case"object":return xs(Ke),Ke;default:return""}}var Sg={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function Ku(Ke,Ye){Sg[Ye.type]||Ye.onChange||Ye.onInput||Ye.readOnly||Ye.disabled||Ye.value==null||be("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),Ye.onChange||Ye.readOnly||Ye.disabled||Ye.checked==null||be("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Pc(Ke){var Ye=Ke.type,ot=Ke.nodeName;return ot&&ot.toLowerCase()==="input"&&(Ye==="checkbox"||Ye==="radio")}function Tg(Ke){return Ke._valueTracker}function Jl(Ke){Ke._valueTracker=null}function kc(Ke){var Ye="";return Ke&&(Pc(Ke)?Ye=Ke.checked?"true":"false":Ye=Ke.value),Ye}function Oc(Ke){var Ye=Pc(Ke)?"checked":"value",ot=Object.getOwnPropertyDescriptor(Ke.constructor.prototype,Ye);xs(Ke[Ye]);var ft=""+Ke[Ye];if(!(Ke.hasOwnProperty(Ye)||typeof ot>"u"||typeof ot.get!="function"||typeof ot.set!="function")){var pt=ot.get,ii=ot.set;Object.defineProperty(Ke,Ye,{configurable:!0,get:function(){return pt.call(this)},set:function(di){xs(di),ft=""+di,ii.call(this,di)}}),Object.defineProperty(Ke,Ye,{enumerable:ot.enumerable});var ui={getValue:function(){return ft},setValue:function(di){xs(di),ft=""+di},stopTracking:function(){Jl(Ke),delete Ke[Ye]}};return ui}}function eu(Ke){Tg(Ke)||(Ke._valueTracker=Oc(Ke))}function md(Ke){if(!Ke)return!1;var Ye=Tg(Ke);if(!Ye)return!0;var ot=Ye.getValue(),ft=kc(Ke);return ft!==ot?(Ye.setValue(ft),!0):!1}function Fc(Ke){if(Ke=Ke||(typeof document<"u"?document:void 0),typeof Ke>"u")return null;try{return Ke.activeElement||Ke.body}catch{return Ke.body}}var Nc=!1,Ef=!1,yd=!1,yh=!1;function vu(Ke){var Ye=Ke.type==="checkbox"||Ke.type==="radio";return Ye?Ke.checked!=null:Ke.value!=null}function Ei(Ke,Ye){var ot=Ke,ft=Ye.checked,pt=ga({},Ye,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:ft??ot._wrapperState.initialChecked});return pt}function $i(Ke,Ye){Ku("input",Ye),Ye.checked!==void 0&&Ye.defaultChecked!==void 0&&!Ef&&(be("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",dl()||"A component",Ye.type),Ef=!0),Ye.value!==void 0&&Ye.defaultValue!==void 0&&!Nc&&(be("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",dl()||"A component",Ye.type),Nc=!0);var ot=Ke,ft=Ye.defaultValue==null?"":Ye.defaultValue;ot._wrapperState={initialChecked:Ye.checked!=null?Ye.checked:Ye.defaultChecked,initialValue:Lu(Ye.value!=null?Ye.value:ft),controlled:vu(Ye)}}function Ji(Ke,Ye){var ot=Ke,ft=Ye.checked;ft!=null&&qa(ot,"checked",ft,!1)}function Jr(Ke,Ye){var ot=Ke;{var ft=vu(Ye);!ot._wrapperState.controlled&&ft&&!yh&&(be("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),yh=!0),ot._wrapperState.controlled&&!ft&&!yd&&(be("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),yd=!0)}Ji(Ke,Ye);var pt=Lu(Ye.value),ii=Ye.type;if(pt!=null)ii==="number"?(pt===0&&ot.value===""||ot.value!=pt)&&(ot.value=ko(pt)):ot.value!==ko(pt)&&(ot.value=ko(pt));else if(ii==="submit"||ii==="reset"){ot.removeAttribute("value");return}Ye.hasOwnProperty("value")?Ws(ot,Ye.type,pt):Ye.hasOwnProperty("defaultValue")&&Ws(ot,Ye.type,Lu(Ye.defaultValue)),Ye.checked==null&&Ye.defaultChecked!=null&&(ot.defaultChecked=!!Ye.defaultChecked)}function As(Ke,Ye,ot){var ft=Ke;if(Ye.hasOwnProperty("value")||Ye.hasOwnProperty("defaultValue")){var pt=Ye.type,ii=pt==="submit"||pt==="reset";if(ii&&(Ye.value===void 0||Ye.value===null))return;var ui=ko(ft._wrapperState.initialValue);ot||ui!==ft.value&&(ft.value=ui),ft.defaultValue=ui}var di=ft.name;di!==""&&(ft.name=""),ft.defaultChecked=!ft.defaultChecked,ft.defaultChecked=!!ft._wrapperState.initialChecked,di!==""&&(ft.name=di)}function Zs(Ke,Ye){var ot=Ke;Jr(ot,Ye),Cs(ot,Ye)}function Cs(Ke,Ye){var ot=Ye.name;if(Ye.type==="radio"&&ot!=null){for(var ft=Ke;ft.parentNode;)ft=ft.parentNode;Os(ot,"name");for(var pt=ft.querySelectorAll("input[name="+JSON.stringify(""+ot)+'][type="radio"]'),ii=0;ii<pt.length;ii++){var ui=pt[ii];if(!(ui===Ke||ui.form!==Ke.form)){var di=Vy(ui);if(!di)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");md(ui),Jr(ui,di)}}}}function Ws(Ke,Ye,ot){(Ye!=="number"||Fc(Ke.ownerDocument)!==Ke)&&(ot==null?Ke.defaultValue=ko(Ke._wrapperState.initialValue):Ke.defaultValue!==ko(ot)&&(Ke.defaultValue=ko(ot)))}var Aa=!1,wa=!1,Qa=!1;function Fa(Ke,Ye){Ye.value==null&&(typeof Ye.children=="object"&&Ye.children!==null?ie.Children.forEach(Ye.children,function(ot){ot!=null&&(typeof ot=="string"||typeof ot=="number"||wa||(wa=!0,be("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):Ye.dangerouslySetInnerHTML!=null&&(Qa||(Qa=!0,be("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),Ye.selected!=null&&!Aa&&(be("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Aa=!0)}function Ua(Ke,Ye){Ye.value!=null&&Ke.setAttribute("value",ko(Lu(Ye.value)))}var Va=Array.isArray;function Ca(Ke){return Va(Ke)}var Yu;Yu=!1;function Ed(){var Ke=dl();return Ke?`

Check the render method of \``+Ke+"`.":""}var Eh=["value","defaultValue"];function dp(Ke){{Ku("select",Ke);for(var Ye=0;Ye<Eh.length;Ye++){var ot=Eh[Ye];if(Ke[ot]!=null){var ft=Ca(Ke[ot]);Ke.multiple&&!ft?be("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",ot,Ed()):!Ke.multiple&&ft&&be("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",ot,Ed())}}}}function Cu(Ke,Ye,ot,ft){var pt=Ke.options;if(Ye){for(var ii=ot,ui={},di=0;di<ii.length;di++)ui["$"+ii[di]]=!0;for(var Ai=0;Ai<pt.length;Ai++){var wi=ui.hasOwnProperty("$"+pt[Ai].value);pt[Ai].selected!==wi&&(pt[Ai].selected=wi),wi&&ft&&(pt[Ai].defaultSelected=!0)}}else{for(var Di=ko(Lu(ot)),zi=null,Gi=0;Gi<pt.length;Gi++){if(pt[Gi].value===Di){pt[Gi].selected=!0,ft&&(pt[Gi].defaultSelected=!0);return}zi===null&&!pt[Gi].disabled&&(zi=pt[Gi])}zi!==null&&(zi.selected=!0)}}function vh(Ke,Ye){return ga({},Ye,{value:void 0})}function Ch(Ke,Ye){var ot=Ke;dp(Ye),ot._wrapperState={wasMultiple:!!Ye.multiple},Ye.value!==void 0&&Ye.defaultValue!==void 0&&!Yu&&(be("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Yu=!0)}function hp(Ke,Ye){var ot=Ke;ot.multiple=!!Ye.multiple;var ft=Ye.value;ft!=null?Cu(ot,!!Ye.multiple,ft,!1):Ye.defaultValue!=null&&Cu(ot,!!Ye.multiple,Ye.defaultValue,!0)}function sv(Ke,Ye){var ot=Ke,ft=ot._wrapperState.wasMultiple;ot._wrapperState.wasMultiple=!!Ye.multiple;var pt=Ye.value;pt!=null?Cu(ot,!!Ye.multiple,pt,!1):ft!==!!Ye.multiple&&(Ye.defaultValue!=null?Cu(ot,!!Ye.multiple,Ye.defaultValue,!0):Cu(ot,!!Ye.multiple,Ye.multiple?[]:"",!1))}function av(Ke,Ye){var ot=Ke,ft=Ye.value;ft!=null&&Cu(ot,!!Ye.multiple,ft,!1)}var gp=!1;function Ap(Ke,Ye){var ot=Ke;if(Ye.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var ft=ga({},Ye,{value:void 0,defaultValue:void 0,children:ko(ot._wrapperState.initialValue)});return ft}function Em(Ke,Ye){var ot=Ke;Ku("textarea",Ye),Ye.value!==void 0&&Ye.defaultValue!==void 0&&!gp&&(be("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",dl()||"A component"),gp=!0);var ft=Ye.value;if(ft==null){var pt=Ye.children,ii=Ye.defaultValue;if(pt!=null){be("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(ii!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Ca(pt)){if(pt.length>1)throw new Error("<textarea> can only have at most one child.");pt=pt[0]}ii=pt}}ii==null&&(ii=""),ft=ii}ot._wrapperState={initialValue:Lu(ft)}}function vm(Ke,Ye){var ot=Ke,ft=Lu(Ye.value),pt=Lu(Ye.defaultValue);if(ft!=null){var ii=ko(ft);ii!==ot.value&&(ot.value=ii),Ye.defaultValue==null&&ot.defaultValue!==ii&&(ot.defaultValue=ii)}pt!=null&&(ot.defaultValue=ko(pt))}function Cm(Ke,Ye){var ot=Ke,ft=ot.textContent;ft===ot._wrapperState.initialValue&&ft!==""&&ft!==null&&(ot.value=ft)}function pp(Ke,Ye){vm(Ke,Ye)}var Wu="http://www.w3.org/1999/xhtml",ov="http://www.w3.org/1998/Math/MathML",mp="http://www.w3.org/2000/svg";function bg(Ke){switch(Ke){case"svg":return mp;case"math":return ov;default:return Wu}}function yp(Ke,Ye){return Ke==null||Ke===Wu?bg(Ye):Ke===mp&&Ye==="foreignObject"?Wu:Ke}var lv=function(Ke){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(Ye,ot,ft,pt){MSApp.execUnsafeLocalFunction(function(){return Ke(Ye,ot,ft,pt)})}:Ke},_g,Im=lv(function(Ke,Ye){if(Ke.namespaceURI===mp&&!("innerHTML"in Ke)){_g=_g||document.createElement("div"),_g.innerHTML="<svg>"+Ye.valueOf().toString()+"</svg>";for(var ot=_g.firstChild;Ke.firstChild;)Ke.removeChild(Ke.firstChild);for(;ot.firstChild;)Ke.appendChild(ot.firstChild);return}Ke.innerHTML=Ye}),bl=1,Xu=3,So=8,Iu=9,vf=11,wg=function(Ke,Ye){if(Ye){var ot=Ke.firstChild;if(ot&&ot===Ke.lastChild&&ot.nodeType===Xu){ot.nodeValue=Ye;return}}Ke.textContent=Ye},xm={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function Sm(Ke,Ye){return Ke+Ye.charAt(0).toUpperCase()+Ye.substring(1)}var Tm=["Webkit","ms","Moz","O"];Object.keys(vd).forEach(function(Ke){Tm.forEach(function(Ye){vd[Sm(Ye,Ke)]=vd[Ke]})});function Rg(Ke,Ye,ot){var ft=Ye==null||typeof Ye=="boolean"||Ye==="";return ft?"":!ot&&typeof Ye=="number"&&Ye!==0&&!(vd.hasOwnProperty(Ke)&&vd[Ke])?Ye+"px":($s(Ye,Ke),(""+Ye).trim())}var Cd=/([A-Z])/g,uv=/^ms-/;function cv(Ke){return Ke.replace(Cd,"-$1").toLowerCase().replace(uv,"-ms-")}var bm=function(){};{var _m=/^(?:webkit|moz|o)[A-Z]/,wm=/^-ms-/,Ih=/-(.)/g,Id=/;\s*$/,xd={},Sd={},Rm=!1,Ep=!1,vp=function(Ke){return Ke.replace(Ih,function(Ye,ot){return ot.toUpperCase()})},Cp=function(Ke){xd.hasOwnProperty(Ke)&&xd[Ke]||(xd[Ke]=!0,be("Unsupported style property %s. Did you mean %s?",Ke,vp(Ke.replace(wm,"ms-"))))},Bm=function(Ke){xd.hasOwnProperty(Ke)&&xd[Ke]||(xd[Ke]=!0,be("Unsupported vendor-prefixed style property %s. Did you mean %s?",Ke,Ke.charAt(0).toUpperCase()+Ke.slice(1)))},Dm=function(Ke,Ye){Sd.hasOwnProperty(Ye)&&Sd[Ye]||(Sd[Ye]=!0,be(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,Ke,Ye.replace(Id,"")))},Lm=function(Ke,Ye){Rm||(Rm=!0,be("`NaN` is an invalid value for the `%s` css style property.",Ke))},fv=function(Ke,Ye){Ep||(Ep=!0,be("`Infinity` is an invalid value for the `%s` css style property.",Ke))};bm=function(Ke,Ye){Ke.indexOf("-")>-1?Cp(Ke):_m.test(Ke)?Bm(Ke):Id.test(Ye)&&Dm(Ke,Ye),typeof Ye=="number"&&(isNaN(Ye)?Lm(Ke,Ye):isFinite(Ye)||fv(Ke,Ye))}}var dv=bm;function hv(Ke){{var Ye="",ot="";for(var ft in Ke)if(Ke.hasOwnProperty(ft)){var pt=Ke[ft];if(pt!=null){var ii=ft.indexOf("--")===0;Ye+=ot+(ii?ft:cv(ft))+":",Ye+=Rg(ft,pt,ii),ot=";"}}return Ye||null}}function Mm(Ke,Ye){var ot=Ke.style;for(var ft in Ye)if(Ye.hasOwnProperty(ft)){var pt=ft.indexOf("--")===0;pt||dv(ft,Ye[ft]);var ii=Rg(ft,Ye[ft],pt);ft==="float"&&(ft="cssFloat"),pt?ot.setProperty(ft,ii):ot[ft]=ii}}function gv(Ke){return Ke==null||typeof Ke=="boolean"||Ke===""}function tu(Ke){var Ye={};for(var ot in Ke)for(var ft=xm[ot]||[ot],pt=0;pt<ft.length;pt++)Ye[ft[pt]]=ot;return Ye}function xh(Ke,Ye){{if(!Ye)return;var ot=tu(Ke),ft=tu(Ye),pt={};for(var ii in ot){var ui=ot[ii],di=ft[ii];if(di&&ui!==di){var Ai=ui+","+di;if(pt[Ai])continue;pt[Ai]=!0,be("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",gv(Ke[ui])?"Removing":"Updating",ui,di)}}}}var Pm={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},km=ga({menuitem:!0},Pm),Om="__html";function Bg(Ke,Ye){if(Ye){if(km[Ke]&&(Ye.children!=null||Ye.dangerouslySetInnerHTML!=null))throw new Error(Ke+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(Ye.dangerouslySetInnerHTML!=null){if(Ye.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof Ye.dangerouslySetInnerHTML!="object"||!(Om in Ye.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!Ye.suppressContentEditableWarning&&Ye.contentEditable&&Ye.children!=null&&be("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),Ye.style!=null&&typeof Ye.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Zu(Ke,Ye){if(Ke.indexOf("-")===-1)return typeof Ye.is=="string";switch(Ke){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dg={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Fm={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},xu={},Ip=new RegExp("^(aria)-["+Fs+"]*$"),Sh=new RegExp("^(aria)[A-Z]["+Fs+"]*$");function xp(Ke,Ye){{if(Bi.call(xu,Ye)&&xu[Ye])return!0;if(Sh.test(Ye)){var ot="aria-"+Ye.slice(4).toLowerCase(),ft=Fm.hasOwnProperty(ot)?ot:null;if(ft==null)return be("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",Ye),xu[Ye]=!0,!0;if(Ye!==ft)return be("Invalid ARIA attribute `%s`. Did you mean `%s`?",Ye,ft),xu[Ye]=!0,!0}if(Ip.test(Ye)){var pt=Ye.toLowerCase(),ii=Fm.hasOwnProperty(pt)?pt:null;if(ii==null)return xu[Ye]=!0,!1;if(Ye!==ii)return be("Unknown ARIA attribute `%s`. Did you mean `%s`?",Ye,ii),xu[Ye]=!0,!0}}return!0}function Nm(Ke,Ye){{var ot=[];for(var ft in Ye){var pt=xp(Ke,ft);pt||ot.push(ft)}var ii=ot.map(function(ui){return"`"+ui+"`"}).join(", ");ot.length===1?be("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",ii,Ke):ot.length>1&&be("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",ii,Ke)}}function Lg(Ke,Ye){Zu(Ke,Ye)||Nm(Ke,Ye)}var Cf=!1;function Sp(Ke,Ye){{if(Ke!=="input"&&Ke!=="textarea"&&Ke!=="select")return;Ye!=null&&Ye.value===null&&!Cf&&(Cf=!0,Ke==="select"&&Ye.multiple?be("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",Ke):be("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",Ke))}}var Tp=function(){};{var Oo={},bp=/^on./,$m=/^on[^A-Z]/,Qm=new RegExp("^(aria)-["+Fs+"]*$"),Um=new RegExp("^(aria)[A-Z]["+Fs+"]*$");Tp=function(Ke,Ye,ot,ft){if(Bi.call(Oo,Ye)&&Oo[Ye])return!0;var pt=Ye.toLowerCase();if(pt==="onfocusin"||pt==="onfocusout")return be("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Oo[Ye]=!0,!0;if(ft!=null){var ii=ft.registrationNameDependencies,ui=ft.possibleRegistrationNames;if(ii.hasOwnProperty(Ye))return!0;var di=ui.hasOwnProperty(pt)?ui[pt]:null;if(di!=null)return be("Invalid event handler property `%s`. Did you mean `%s`?",Ye,di),Oo[Ye]=!0,!0;if(bp.test(Ye))return be("Unknown event handler property `%s`. It will be ignored.",Ye),Oo[Ye]=!0,!0}else if(bp.test(Ye))return $m.test(Ye)&&be("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",Ye),Oo[Ye]=!0,!0;if(Qm.test(Ye)||Um.test(Ye))return!0;if(pt==="innerhtml")return be("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Oo[Ye]=!0,!0;if(pt==="aria")return be("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Oo[Ye]=!0,!0;if(pt==="is"&&ot!==null&&ot!==void 0&&typeof ot!="string")return be("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof ot),Oo[Ye]=!0,!0;if(typeof ot=="number"&&isNaN(ot))return be("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",Ye),Oo[Ye]=!0,!0;var Ai=vs(Ye),wi=Ai!==null&&Ai.type===sa;if(Dg.hasOwnProperty(pt)){var Di=Dg[pt];if(Di!==Ye)return be("Invalid DOM property `%s`. Did you mean `%s`?",Ye,Di),Oo[Ye]=!0,!0}else if(!wi&&Ye!==pt)return be("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",Ye,pt),Oo[Ye]=!0,!0;return typeof ot=="boolean"&&Ni(Ye,ot,Ai,!1)?(ot?be('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',ot,Ye,Ye,ot,Ye):be('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',ot,Ye,Ye,ot,Ye,Ye,Ye),Oo[Ye]=!0,!0):wi?!0:Ni(Ye,ot,Ai,!1)?(Oo[Ye]=!0,!1):((ot==="false"||ot==="true")&&Ai!==null&&Ai.type===ha&&(be("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",ot,Ye,ot==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',Ye,ot),Oo[Ye]=!0),!0)}}var Gm=function(Ke,Ye,ot){{var ft=[];for(var pt in Ye){var ii=Tp(Ke,pt,Ye[pt],ot);ii||ft.push(pt)}var ui=ft.map(function(di){return"`"+di+"`"}).join(", ");ft.length===1?be("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",ui,Ke):ft.length>1&&be("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",ui,Ke)}};function Hm(Ke,Ye,ot){Zu(Ke,Ye)||Gm(Ke,Ye,ot)}var Ju=1,Th=2,If=4,Av=Ju|Th|If,bh=null;function _h(Ke){bh!==null&&be("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),bh=Ke}function pv(){bh===null&&be("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),bh=null}function zm(Ke){return Ke===bh}function Mg(Ke){var Ye=Ke.target||Ke.srcElement||window;return Ye.correspondingUseElement&&(Ye=Ye.correspondingUseElement),Ye.nodeType===Xu?Ye.parentNode:Ye}var Ga=null,$c=null,tc=null;function Td(Ke){var Ye=Xd(Ke);if(Ye){if(typeof Ga!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var ot=Ye.stateNode;if(ot){var ft=Vy(ot);Ga(Ye.stateNode,Ye.type,ft)}}}function Vm(Ke){Ga=Ke}function Pg(Ke){$c?tc?tc.push(Ke):tc=[Ke]:$c=Ke}function wh(){return $c!==null||tc!==null}function Rh(){if($c){var Ke=$c,Ye=tc;if($c=null,tc=null,Td(Ke),Ye)for(var ot=0;ot<Ye.length;ot++)Td(Ye[ot])}}var xf=function(Ke,Ye){return Ke(Ye)},_p=function(){},wp=!1;function mv(){var Ke=wh();Ke&&(_p(),Rh())}function Rp(Ke,Ye,ot){if(wp)return Ke(Ye,ot);wp=!0;try{return xf(Ke,Ye,ot)}finally{wp=!1,mv()}}function kg(Ke,Ye,ot){xf=Ke,_p=ot}function Og(Ke){return Ke==="button"||Ke==="input"||Ke==="select"||Ke==="textarea"}function Bp(Ke,Ye,ot){switch(Ke){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(ot.disabled&&Og(Ye));default:return!1}}function Sf(Ke,Ye){var ot=Ke.stateNode;if(ot===null)return null;var ft=Vy(ot);if(ft===null)return null;var pt=ft[Ye];if(Bp(Ye,Ke.type,ft))return null;if(pt&&typeof pt!="function")throw new Error("Expected `"+Ye+"` listener to be a function, instead got a value of `"+typeof pt+"` type.");return pt}var Bh=!1;if(hi)try{var Tf={};Object.defineProperty(Tf,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{Bh=!1}function jm(Ke,Ye,ot,ft,pt,ii,ui,di,Ai){var wi=Array.prototype.slice.call(arguments,3);try{Ye.apply(ot,wi)}catch(Di){this.onError(Di)}}var Dp=jm;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var Lp=document.createElement("react");Dp=function(Ye,ot,ft,pt,ii,ui,di,Ai,wi){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var Di=document.createEvent("Event"),zi=!1,Gi=!0,Zi=window.event,_r=Object.getOwnPropertyDescriptor(window,"event");function es(){Lp.removeEventListener(ts,Ys,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=Zi)}var Rs=Array.prototype.slice.call(arguments,3);function Ys(){zi=!0,es(),ot.apply(ft,Rs),Gi=!1}var Hs,Sa=!1,va=!1;function Ki(Yi){if(Hs=Yi.error,Sa=!0,Hs===null&&Yi.colno===0&&Yi.lineno===0&&(va=!0),Yi.defaultPrevented&&Hs!=null&&typeof Hs=="object")try{Hs._suppressLogging=!0}catch{}}var ts="react-"+(Ye||"invokeguardedcallback");if(window.addEventListener("error",Ki),Lp.addEventListener(ts,Ys,!1),Di.initEvent(ts,!1,!1),Lp.dispatchEvent(Di),_r&&Object.defineProperty(window,"event",_r),zi&&Gi&&(Sa?va&&(Hs=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):Hs=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(Hs)),window.removeEventListener("error",Ki),!zi)return es(),jm.apply(this,arguments)}}var yv=Dp,Qc=!1,Su=null,Dh=!1,Uc=null,Mu={onError:function(Ke){Qc=!0,Su=Ke}};function bf(Ke,Ye,ot,ft,pt,ii,ui,di,Ai){Qc=!1,Su=null,yv.apply(Mu,arguments)}function nc(Ke,Ye,ot,ft,pt,ii,ui,di,Ai){if(bf.apply(this,arguments),Qc){var wi=Pp();Dh||(Dh=!0,Uc=wi)}}function Mp(){if(Dh){var Ke=Uc;throw Dh=!1,Uc=null,Ke}}function Ev(){return Qc}function Pp(){if(Qc){var Ke=Su;return Qc=!1,Su=null,Ke}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function nu(Ke){return Ke._reactInternals}function Lh(Ke){return Ke._reactInternals!==void 0}function bd(Ke,Ye){Ke._reactInternals=Ye}var Ks=0,Gc=1,Ka=2,fa=4,Ma=16,ka=32,Pu=64,ia=128,Ao=256,_l=512,iu=1024,eo=2048,ru=4096,Hc=8192,Mh=16384,Fg=eo|fa|Pu|_l|iu|Mh,qm=32767,Ul=32768,Fo=65536,Ph=131072,kp=1048576,Op=2097152,wl=4194304,zc=8388608,Rl=16777216,_f=33554432,_d=fa|iu|0,Bl=Ka|fa|Ma|ka|_l|ru|Hc,tl=fa|Pu|_l|Hc,su=eo|Ma,zo=wl|zc|Op,ic=ee.ReactCurrentOwner;function Gl(Ke){var Ye=Ke,ot=Ke;if(Ke.alternate)for(;Ye.return;)Ye=Ye.return;else{var ft=Ye;do Ye=ft,(Ye.flags&(Ka|ru))!==Ks&&(ot=Ye.return),ft=Ye.return;while(ft)}return Ye.tag===it?ot:null}function Fp(Ke){if(Ke.tag===si){var Ye=Ke.memoizedState;if(Ye===null){var ot=Ke.alternate;ot!==null&&(Ye=ot.memoizedState)}if(Ye!==null)return Ye.dehydrated}return null}function Ng(Ke){return Ke.tag===it?Ke.stateNode.containerInfo:null}function Np(Ke){return Gl(Ke)===Ke}function Hl(Ke){{var Ye=ic.current;if(Ye!==null&&Ye.tag===Je){var ot=Ye,ft=ot.stateNode;ft._warnedAboutRefsInRender||be("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",aa(ot)||"A component"),ft._warnedAboutRefsInRender=!0}}var pt=nu(Ke);return pt?Gl(pt)===pt:!1}function Dl(Ke){if(Gl(Ke)!==Ke)throw new Error("Unable to find node on an unmounted component.")}function Ya(Ke){var Ye=Ke.alternate;if(!Ye){var ot=Gl(Ke);if(ot===null)throw new Error("Unable to find node on an unmounted component.");return ot!==Ke?null:Ke}for(var ft=Ke,pt=Ye;;){var ii=ft.return;if(ii===null)break;var ui=ii.alternate;if(ui===null){var di=ii.return;if(di!==null){ft=pt=di;continue}break}if(ii.child===ui.child){for(var Ai=ii.child;Ai;){if(Ai===ft)return Dl(ii),Ke;if(Ai===pt)return Dl(ii),Ye;Ai=Ai.sibling}throw new Error("Unable to find node on an unmounted component.")}if(ft.return!==pt.return)ft=ii,pt=ui;else{for(var wi=!1,Di=ii.child;Di;){if(Di===ft){wi=!0,ft=ii,pt=ui;break}if(Di===pt){wi=!0,pt=ii,ft=ui;break}Di=Di.sibling}if(!wi){for(Di=ui.child;Di;){if(Di===ft){wi=!0,ft=ui,pt=ii;break}if(Di===pt){wi=!0,pt=ui,ft=ii;break}Di=Di.sibling}if(!wi)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(ft.alternate!==pt)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(ft.tag!==it)throw new Error("Unable to find node on an unmounted component.");return ft.stateNode.current===ft?Ke:Ye}function au(Ke){var Ye=Ya(Ke);return Ye!==null?$p(Ye):null}function $p(Ke){if(Ke.tag===lt||Ke.tag===ct)return Ke;for(var Ye=Ke.child;Ye!==null;){var ot=$p(Ye);if(ot!==null)return ot;Ye=Ye.sibling}return null}function Km(Ke){var Ye=Ya(Ke);return Ye!==null?$g(Ye):null}function $g(Ke){if(Ke.tag===lt||Ke.tag===ct)return Ke;for(var Ye=Ke.child;Ye!==null;){if(Ye.tag!==st){var ot=$g(Ye);if(ot!==null)return ot}Ye=Ye.sibling}return null}var Qg=Z.unstable_scheduleCallback,Ym=Z.unstable_cancelCallback,Ug=Z.unstable_shouldYield,Wm=Z.unstable_requestPaint,so=Z.unstable_now,Qp=Z.unstable_getCurrentPriorityLevel,Gg=Z.unstable_ImmediatePriority,zl=Z.unstable_UserBlockingPriority,ku=Z.unstable_NormalPriority,Hg=Z.unstable_LowPriority,Vc=Z.unstable_IdlePriority,Up=Z.unstable_yieldValue,Gp=Z.unstable_setDisableYieldValue,jc=null,No=null,ys=null,Eo=!1,Vo=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Hp(Ke){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var Ye=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(Ye.isDisabled)return!0;if(!Ye.supportsFiber)return be("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{Vi&&(Ke=ga({},Ke,{getLaneLabelMap:Kc,injectProfilingHooks:sc})),jc=Ye.inject(Ke),No=Ye}catch(ot){be("React instrumentation encountered an error: %s.",ot)}return!!Ye.checkDCE}function Xm(Ke,Ye){if(No&&typeof No.onScheduleFiberRoot=="function")try{No.onScheduleFiberRoot(jc,Ke,Ye)}catch(ot){Eo||(Eo=!0,be("React instrumentation encountered an error: %s",ot))}}function rc(Ke,Ye){if(No&&typeof No.onCommitFiberRoot=="function")try{var ot=(Ke.current.flags&ia)===ia;if(Kr){var ft;switch(Ye){case nl:ft=Gg;break;case jo:ft=zl;break;case oc:ft=ku;break;case Hh:ft=Vc;break;default:ft=ku;break}No.onCommitFiberRoot(jc,Ke,ft,ot)}}catch(pt){Eo||(Eo=!0,be("React instrumentation encountered an error: %s",pt))}}function qc(Ke){if(No&&typeof No.onPostCommitFiberRoot=="function")try{No.onPostCommitFiberRoot(jc,Ke)}catch(Ye){Eo||(Eo=!0,be("React instrumentation encountered an error: %s",Ye))}}function zp(Ke){if(No&&typeof No.onCommitFiberUnmount=="function")try{No.onCommitFiberUnmount(jc,Ke)}catch(Ye){Eo||(Eo=!0,be("React instrumentation encountered an error: %s",Ye))}}function Ro(Ke){if(typeof Up=="function"&&(Gp(Ke),ye(Ke)),No&&typeof No.setStrictMode=="function")try{No.setStrictMode(jc,Ke)}catch(Ye){Eo||(Eo=!0,be("React instrumentation encountered an error: %s",Ye))}}function sc(Ke){ys=Ke}function Kc(){{for(var Ke=new Map,Ye=1,ot=0;ot<Wa;ot++){var ft=vv(Ye);Ke.set(Ye,ft),Ye*=2}return Ke}}function zg(Ke){ys!==null&&typeof ys.markCommitStarted=="function"&&ys.markCommitStarted(Ke)}function Vp(){ys!==null&&typeof ys.markCommitStopped=="function"&&ys.markCommitStopped()}function Yc(Ke){ys!==null&&typeof ys.markComponentRenderStarted=="function"&&ys.markComponentRenderStarted(Ke)}function wf(){ys!==null&&typeof ys.markComponentRenderStopped=="function"&&ys.markComponentRenderStopped()}function Zm(Ke){ys!==null&&typeof ys.markComponentPassiveEffectMountStarted=="function"&&ys.markComponentPassiveEffectMountStarted(Ke)}function jp(){ys!==null&&typeof ys.markComponentPassiveEffectMountStopped=="function"&&ys.markComponentPassiveEffectMountStopped()}function Vg(Ke){ys!==null&&typeof ys.markComponentPassiveEffectUnmountStarted=="function"&&ys.markComponentPassiveEffectUnmountStarted(Ke)}function Jm(){ys!==null&&typeof ys.markComponentPassiveEffectUnmountStopped=="function"&&ys.markComponentPassiveEffectUnmountStopped()}function ey(Ke){ys!==null&&typeof ys.markComponentLayoutEffectMountStarted=="function"&&ys.markComponentLayoutEffectMountStarted(Ke)}function ty(){ys!==null&&typeof ys.markComponentLayoutEffectMountStopped=="function"&&ys.markComponentLayoutEffectMountStopped()}function jg(Ke){ys!==null&&typeof ys.markComponentLayoutEffectUnmountStarted=="function"&&ys.markComponentLayoutEffectUnmountStarted(Ke)}function wd(){ys!==null&&typeof ys.markComponentLayoutEffectUnmountStopped=="function"&&ys.markComponentLayoutEffectUnmountStopped()}function qg(Ke,Ye,ot){ys!==null&&typeof ys.markComponentErrored=="function"&&ys.markComponentErrored(Ke,Ye,ot)}function ny(Ke,Ye,ot){ys!==null&&typeof ys.markComponentSuspended=="function"&&ys.markComponentSuspended(Ke,Ye,ot)}function iy(Ke){ys!==null&&typeof ys.markLayoutEffectsStarted=="function"&&ys.markLayoutEffectsStarted(Ke)}function Rd(){ys!==null&&typeof ys.markLayoutEffectsStopped=="function"&&ys.markLayoutEffectsStopped()}function ry(Ke){ys!==null&&typeof ys.markPassiveEffectsStarted=="function"&&ys.markPassiveEffectsStarted(Ke)}function kh(){ys!==null&&typeof ys.markPassiveEffectsStopped=="function"&&ys.markPassiveEffectsStopped()}function Tu(Ke){ys!==null&&typeof ys.markRenderStarted=="function"&&ys.markRenderStarted(Ke)}function Oh(){ys!==null&&typeof ys.markRenderYielded=="function"&&ys.markRenderYielded()}function Bd(){ys!==null&&typeof ys.markRenderStopped=="function"&&ys.markRenderStopped()}function Rf(Ke){ys!==null&&typeof ys.markRenderScheduled=="function"&&ys.markRenderScheduled(Ke)}function qp(Ke,Ye){ys!==null&&typeof ys.markForceUpdateScheduled=="function"&&ys.markForceUpdateScheduled(Ke,Ye)}function Wc(Ke,Ye){ys!==null&&typeof ys.markStateUpdateScheduled=="function"&&ys.markStateUpdateScheduled(Ke,Ye)}var Xs=0,pa=1,Js=2,lo=8,ou=16,Kg=Math.clz32?Math.clz32:Bf,Yg=Math.log,Kp=Math.LN2;function Bf(Ke){var Ye=Ke>>>0;return Ye===0?32:31-(Yg(Ye)/Kp|0)|0}var Wa=31,ns=0,Ia=0,ta=1,Ou=2,Vl=4,Df=8,Xa=16,Lf=32,Xc=4194240,Mf=64,lu=128,Ll=256,Pf=512,Fh=1024,Nh=2048,Wg=4096,Xg=8192,Zg=16384,Jg=32768,eA=65536,tA=131072,nA=262144,iA=524288,kf=1048576,rA=2097152,Of=130023424,ac=4194304,sA=8388608,$h=16777216,aA=33554432,oA=67108864,Yp=ac,Dd=134217728,lA=268435455,Ld=268435456,Zc=536870912,Ml=1073741824;function vv(Ke){{if(Ke&ta)return"Sync";if(Ke&Ou)return"InputContinuousHydration";if(Ke&Vl)return"InputContinuous";if(Ke&Df)return"DefaultHydration";if(Ke&Xa)return"Default";if(Ke&Lf)return"TransitionHydration";if(Ke&Xc)return"Transition";if(Ke&Of)return"Retry";if(Ke&Dd)return"SelectiveHydration";if(Ke&Ld)return"IdleHydration";if(Ke&Zc)return"Idle";if(Ke&Ml)return"Offscreen"}}var Ha=-1,uA=Mf,cA=ac;function Md(Ke){switch(To(Ke)){case ta:return ta;case Ou:return Ou;case Vl:return Vl;case Df:return Df;case Xa:return Xa;case Lf:return Lf;case Mf:case lu:case Ll:case Pf:case Fh:case Nh:case Wg:case Xg:case Zg:case Jg:case eA:case tA:case nA:case iA:case kf:case rA:return Ke&Xc;case ac:case sA:case $h:case aA:case oA:return Ke&Of;case Dd:return Dd;case Ld:return Ld;case Zc:return Zc;case Ml:return Ml;default:return be("Should have found matching lanes. This is a bug in React."),Ke}}function Qh(Ke,Ye){var ot=Ke.pendingLanes;if(ot===ns)return ns;var ft=ns,pt=Ke.suspendedLanes,ii=Ke.pingedLanes,ui=ot&lA;if(ui!==ns){var di=ui&~pt;if(di!==ns)ft=Md(di);else{var Ai=ui&ii;Ai!==ns&&(ft=Md(Ai))}}else{var wi=ot&~pt;wi!==ns?ft=Md(wi):ii!==ns&&(ft=Md(ii))}if(ft===ns)return ns;if(Ye!==ns&&Ye!==ft&&(Ye&pt)===ns){var Di=To(ft),zi=To(Ye);if(Di>=zi||Di===Xa&&(zi&Xc)!==ns)return Ye}(ft&Vl)!==ns&&(ft|=ot&Xa);var Gi=Ke.entangledLanes;if(Gi!==ns)for(var Zi=Ke.entanglements,_r=ft&Gi;_r>0;){var es=Jc(_r),Rs=1<<es;ft|=Zi[es],_r&=~Rs}return ft}function sy(Ke,Ye){for(var ot=Ke.eventTimes,ft=Ha;Ye>0;){var pt=Jc(Ye),ii=1<<pt,ui=ot[pt];ui>ft&&(ft=ui),Ye&=~ii}return ft}function fA(Ke,Ye){switch(Ke){case ta:case Ou:case Vl:return Ye+250;case Df:case Xa:case Lf:case Mf:case lu:case Ll:case Pf:case Fh:case Nh:case Wg:case Xg:case Zg:case Jg:case eA:case tA:case nA:case iA:case kf:case rA:return Ye+5e3;case ac:case sA:case $h:case aA:case oA:return Ha;case Dd:case Ld:case Zc:case Ml:return Ha;default:return be("Should have found matching lanes. This is a bug in React."),Ha}}function Cv(Ke,Ye){for(var ot=Ke.pendingLanes,ft=Ke.suspendedLanes,pt=Ke.pingedLanes,ii=Ke.expirationTimes,ui=ot;ui>0;){var di=Jc(ui),Ai=1<<di,wi=ii[di];wi===Ha?((Ai&ft)===ns||(Ai&pt)!==ns)&&(ii[di]=fA(Ai,Ye)):wi<=Ye&&(Ke.expiredLanes|=Ai),ui&=~Ai}}function Iv(Ke){return Md(Ke.pendingLanes)}function Wp(Ke){var Ye=Ke.pendingLanes&~Ml;return Ye!==ns?Ye:Ye&Ml?Ml:ns}function Pd(Ke){return(Ke&ta)!==ns}function Uh(Ke){return(Ke&lA)!==ns}function dA(Ke){return(Ke&Of)===Ke}function xv(Ke){var Ye=ta|Vl|Xa;return(Ke&Ye)===ns}function ay(Ke){return(Ke&Xc)===Ke}function Gh(Ke,Ye){var ot=Ou|Vl|Df|Xa;return(Ye&ot)!==ns}function oy(Ke,Ye){return(Ye&Ke.expiredLanes)!==ns}function Xp(Ke){return(Ke&Xc)!==ns}function Zp(){var Ke=uA;return uA<<=1,(uA&Xc)===ns&&(uA=Mf),Ke}function Sv(){var Ke=cA;return cA<<=1,(cA&Of)===ns&&(cA=ac),Ke}function To(Ke){return Ke&-Ke}function Bo(Ke){return To(Ke)}function Jc(Ke){return 31-Kg(Ke)}function hA(Ke){return Jc(Ke)}function Pl(Ke,Ye){return(Ke&Ye)!==ns}function Ff(Ke,Ye){return(Ke&Ye)===Ye}function da(Ke,Ye){return Ke|Ye}function kd(Ke,Ye){return Ke&~Ye}function Jp(Ke,Ye){return Ke&Ye}function ly(Ke){return Ke}function uy(Ke,Ye){return Ke!==Ia&&Ke<Ye?Ke:Ye}function gA(Ke){for(var Ye=[],ot=0;ot<Wa;ot++)Ye.push(Ke);return Ye}function Nf(Ke,Ye,ot){Ke.pendingLanes|=Ye,Ye!==Zc&&(Ke.suspendedLanes=ns,Ke.pingedLanes=ns);var ft=Ke.eventTimes,pt=hA(Ye);ft[pt]=ot}function e0(Ke,Ye){Ke.suspendedLanes|=Ye,Ke.pingedLanes&=~Ye;for(var ot=Ke.expirationTimes,ft=Ye;ft>0;){var pt=Jc(ft),ii=1<<pt;ot[pt]=Ha,ft&=~ii}}function t0(Ke,Ye,ot){Ke.pingedLanes|=Ke.suspendedLanes&Ye}function n0(Ke,Ye){var ot=Ke.pendingLanes&~Ye;Ke.pendingLanes=Ye,Ke.suspendedLanes=ns,Ke.pingedLanes=ns,Ke.expiredLanes&=Ye,Ke.mutableReadLanes&=Ye,Ke.entangledLanes&=Ye;for(var ft=Ke.entanglements,pt=Ke.eventTimes,ii=Ke.expirationTimes,ui=ot;ui>0;){var di=Jc(ui),Ai=1<<di;ft[di]=ns,pt[di]=Ha,ii[di]=Ha,ui&=~Ai}}function Od(Ke,Ye){for(var ot=Ke.entangledLanes|=Ye,ft=Ke.entanglements,pt=ot;pt;){var ii=Jc(pt),ui=1<<ii;ui&Ye|ft[ii]&Ye&&(ft[ii]|=Ye),pt&=~ui}}function Tv(Ke,Ye){var ot=To(Ye),ft;switch(ot){case Vl:ft=Ou;break;case Xa:ft=Df;break;case Mf:case lu:case Ll:case Pf:case Fh:case Nh:case Wg:case Xg:case Zg:case Jg:case eA:case tA:case nA:case iA:case kf:case rA:case ac:case sA:case $h:case aA:case oA:ft=Lf;break;case Zc:ft=Ld;break;default:ft=Ia;break}return(ft&(Ke.suspendedLanes|Ye))!==Ia?Ia:ft}function i0(Ke,Ye,ot){if(Vo)for(var ft=Ke.pendingUpdatersLaneMap;ot>0;){var pt=hA(ot),ii=1<<pt,ui=ft[pt];ui.add(Ye),ot&=~ii}}function AA(Ke,Ye){if(Vo)for(var ot=Ke.pendingUpdatersLaneMap,ft=Ke.memoizedUpdaters;Ye>0;){var pt=hA(Ye),ii=1<<pt,ui=ot[pt];ui.size>0&&(ui.forEach(function(di){var Ai=di.alternate;(Ai===null||!ft.has(Ai))&&ft.add(di)}),ui.clear()),Ye&=~ii}}function r0(Ke,Ye){return null}var nl=ta,jo=Vl,oc=Xa,Hh=Zc,$f=Ia;function uu(){return $f}function Do(Ke){$f=Ke}function zh(Ke,Ye){var ot=$f;try{return $f=Ke,Ye()}finally{$f=ot}}function il(Ke,Ye){return Ke!==0&&Ke<Ye?Ke:Ye}function bv(Ke,Ye){return Ke===0||Ke>Ye?Ke:Ye}function s0(Ke,Ye){return Ke!==0&&Ke<Ye}function Vh(Ke){var Ye=To(Ke);return s0(nl,Ye)?s0(jo,Ye)?Uh(Ye)?oc:Hh:jo:nl}function Lo(Ke){var Ye=Ke.current.memoizedState;return Ye.isDehydrated}var cy;function Ds(Ke){cy=Ke}function Fd(Ke){cy(Ke)}var jh;function fy(Ke){jh=Ke}var dy;function qh(Ke){dy=Ke}var Kh;function a0(Ke){Kh=Ke}var o0;function hy(Ke){o0=Ke}var pA=!1,Nd=[],Fu=null,to=null,$o=null,cu=new Map,$d=new Map,lc=[],bu=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function gy(Ke){return bu.indexOf(Ke)>-1}function Nu(Ke,Ye,ot,ft,pt){return{blockedOn:Ke,domEventName:Ye,eventSystemFlags:ot,nativeEvent:pt,targetContainers:[ft]}}function Ay(Ke,Ye){switch(Ke){case"focusin":case"focusout":Fu=null;break;case"dragenter":case"dragleave":to=null;break;case"mouseover":case"mouseout":$o=null;break;case"pointerover":case"pointerout":{var ot=Ye.pointerId;cu.delete(ot);break}case"gotpointercapture":case"lostpointercapture":{var ft=Ye.pointerId;$d.delete(ft);break}}}function Qd(Ke,Ye,ot,ft,pt,ii){if(Ke===null||Ke.nativeEvent!==ii){var ui=Nu(Ye,ot,ft,pt,ii);if(Ye!==null){var di=Xd(Ye);di!==null&&jh(di)}return ui}Ke.eventSystemFlags|=ft;var Ai=Ke.targetContainers;return pt!==null&&Ai.indexOf(pt)===-1&&Ai.push(pt),Ke}function py(Ke,Ye,ot,ft,pt){switch(Ye){case"focusin":{var ii=pt;return Fu=Qd(Fu,Ke,Ye,ot,ft,ii),!0}case"dragenter":{var ui=pt;return to=Qd(to,Ke,Ye,ot,ft,ui),!0}case"mouseover":{var di=pt;return $o=Qd($o,Ke,Ye,ot,ft,di),!0}case"pointerover":{var Ai=pt,wi=Ai.pointerId;return cu.set(wi,Qd(cu.get(wi)||null,Ke,Ye,ot,ft,Ai)),!0}case"gotpointercapture":{var Di=pt,zi=Di.pointerId;return $d.set(zi,Qd($d.get(zi)||null,Ke,Ye,ot,ft,Di)),!0}}return!1}function l0(Ke){var Ye=ig(Ke.target);if(Ye!==null){var ot=Gl(Ye);if(ot!==null){var ft=ot.tag;if(ft===si){var pt=Fp(ot);if(pt!==null){Ke.blockedOn=pt,o0(Ke.priority,function(){dy(ot)});return}}else if(ft===it){var ii=ot.stateNode;if(Lo(ii)){Ke.blockedOn=Ng(ot);return}}}}Ke.blockedOn=null}function yy(Ke){for(var Ye=Kh(),ot={blockedOn:null,target:Ke,priority:Ye},ft=0;ft<lc.length&&s0(Ye,lc[ft].priority);ft++);lc.splice(ft,0,ot),ft===0&&l0(ot)}function mA(Ke){if(Ke.blockedOn!==null)return!1;for(var Ye=Ke.targetContainers;Ye.length>0;){var ot=Ye[0],ft=Qf(Ke.domEventName,Ke.eventSystemFlags,ot,Ke.nativeEvent);if(ft===null){var pt=Ke.nativeEvent,ii=new pt.constructor(pt.type,pt);_h(ii),pt.target.dispatchEvent(ii),pv()}else{var ui=Xd(ft);return ui!==null&&jh(ui),Ke.blockedOn=ft,!1}Ye.shift()}return!0}function Yh(Ke,Ye,ot){mA(Ke)&&ot.delete(Ye)}function u0(){pA=!1,Fu!==null&&mA(Fu)&&(Fu=null),to!==null&&mA(to)&&(to=null),$o!==null&&mA($o)&&($o=null),cu.forEach(Yh),$d.forEach(Yh)}function rl(Ke,Ye){Ke.blockedOn===Ye&&(Ke.blockedOn=null,pA||(pA=!0,Z.unstable_scheduleCallback(Z.unstable_NormalPriority,u0)))}function Ea(Ke){if(Nd.length>0){rl(Nd[0],Ke);for(var Ye=1;Ye<Nd.length;Ye++){var ot=Nd[Ye];ot.blockedOn===Ke&&(ot.blockedOn=null)}}Fu!==null&&rl(Fu,Ke),to!==null&&rl(to,Ke),$o!==null&&rl($o,Ke);var ft=function(di){return rl(di,Ke)};cu.forEach(ft),$d.forEach(ft);for(var pt=0;pt<lc.length;pt++){var ii=lc[pt];ii.blockedOn===Ke&&(ii.blockedOn=null)}for(;lc.length>0;){var ui=lc[0];if(ui.blockedOn!==null)break;l0(ui),ui.blockedOn===null&&lc.shift()}}var uo=ee.ReactCurrentBatchConfig,po=!0;function Qo(Ke){po=!!Ke}function jl(){return po}function Ud(Ke,Ye,ot){var ft=hl(Ye),pt;switch(ft){case nl:pt=Mo;break;case jo:pt=Wh;break;case oc:default:pt=uc;break}return pt.bind(null,Ye,ot,Ke)}function Mo(Ke,Ye,ot,ft){var pt=uu(),ii=uo.transition;uo.transition=null;try{Do(nl),uc(Ke,Ye,ot,ft)}finally{Do(pt),uo.transition=ii}}function Wh(Ke,Ye,ot,ft){var pt=uu(),ii=uo.transition;uo.transition=null;try{Do(jo),uc(Ke,Ye,ot,ft)}finally{Do(pt),uo.transition=ii}}function uc(Ke,Ye,ot,ft){po&&yA(Ke,Ye,ot,ft)}function yA(Ke,Ye,ot,ft){var pt=Qf(Ke,Ye,ot,ft);if(pt===null){jv(Ke,Ye,ft,Gd,ot),Ay(Ke,ft);return}if(py(pt,Ke,Ye,ot,ft)){ft.stopPropagation();return}if(Ay(Ke,ft),Ye&If&&gy(Ke)){for(;pt!==null;){var ii=Xd(pt);ii!==null&&Fd(ii);var ui=Qf(Ke,Ye,ot,ft);if(ui===null&&jv(Ke,Ye,ft,Gd,ot),ui===pt)break;pt=ui}pt!==null&&ft.stopPropagation();return}jv(Ke,Ye,ft,null,ot)}var Gd=null;function Qf(Ke,Ye,ot,ft){Gd=null;var pt=Mg(ft),ii=ig(pt);if(ii!==null){var ui=Gl(ii);if(ui===null)ii=null;else{var di=ui.tag;if(di===si){var Ai=Fp(ui);if(Ai!==null)return Ai;ii=null}else if(di===it){var wi=ui.stateNode;if(Lo(wi))return Ng(ui);ii=null}else ui!==ii&&(ii=null)}}return Gd=ii,null}function hl(Ke){switch(Ke){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return nl;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return jo;case"message":{var Ye=Qp();switch(Ye){case Gg:return nl;case zl:return jo;case ku:case Hg:return oc;case Vc:return Hh;default:return oc}}default:return oc}}function c0(Ke,Ye,ot){return Ke.addEventListener(Ye,ot,!1),ot}function Hd(Ke,Ye,ot){return Ke.addEventListener(Ye,ot,!0),ot}function cc(Ke,Ye,ot,ft){return Ke.addEventListener(Ye,ot,{capture:!0,passive:ft}),ot}function EA(Ke,Ye,ot,ft){return Ke.addEventListener(Ye,ot,{passive:ft}),ot}var Uf=null,$u=null,ef=null;function tf(Ke){return Uf=Ke,$u=CA(),!0}function vA(){Uf=null,$u=null,ef=null}function zd(){if(ef)return ef;var Ke,Ye=$u,ot=Ye.length,ft,pt=CA(),ii=pt.length;for(Ke=0;Ke<ot&&Ye[Ke]===pt[Ke];Ke++);var ui=ot-Ke;for(ft=1;ft<=ui&&Ye[ot-ft]===pt[ii-ft];ft++);var di=ft>1?1-ft:void 0;return ef=pt.slice(Ke,di),ef}function CA(){return"value"in Uf?Uf.value:Uf.textContent}function Gf(Ke){var Ye,ot=Ke.keyCode;return"charCode"in Ke?(Ye=Ke.charCode,Ye===0&&ot===13&&(Ye=13)):Ye=ot,Ye===10&&(Ye=13),Ye>=32||Ye===13?Ye:0}function Hf(){return!0}function sl(){return!1}function bo(Ke){function Ye(ot,ft,pt,ii,ui){this._reactName=ot,this._targetInst=pt,this.type=ft,this.nativeEvent=ii,this.target=ui,this.currentTarget=null;for(var di in Ke)if(Ke.hasOwnProperty(di)){var Ai=Ke[di];Ai?this[di]=Ai(ii):this[di]=ii[di]}var wi=ii.defaultPrevented!=null?ii.defaultPrevented:ii.returnValue===!1;return wi?this.isDefaultPrevented=Hf:this.isDefaultPrevented=sl,this.isPropagationStopped=sl,this}return ga(Ye.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ot=this.nativeEvent;ot&&(ot.preventDefault?ot.preventDefault():typeof ot.returnValue!="unknown"&&(ot.returnValue=!1),this.isDefaultPrevented=Hf)},stopPropagation:function(){var ot=this.nativeEvent;ot&&(ot.stopPropagation?ot.stopPropagation():typeof ot.cancelBubble!="unknown"&&(ot.cancelBubble=!0),this.isPropagationStopped=Hf)},persist:function(){},isPersistent:Hf}),Ye}var al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Ke){return Ke.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=bo(al),Vd=ga({},al,{view:0,detail:0}),f0=bo(Vd),Xh,d0,fu;function Ey(Ke){Ke!==fu&&(fu&&Ke.type==="mousemove"?(Xh=Ke.screenX-fu.screenX,d0=Ke.screenY-fu.screenY):(Xh=0,d0=0),fu=Ke)}var jd=ga({},Vd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SA,button:0,buttons:0,relatedTarget:function(Ke){return Ke.relatedTarget===void 0?Ke.fromElement===Ke.srcElement?Ke.toElement:Ke.fromElement:Ke.relatedTarget},movementX:function(Ke){return"movementX"in Ke?Ke.movementX:(Ey(Ke),Xh)},movementY:function(Ke){return"movementY"in Ke?Ke.movementY:d0}}),nf=bo(jd),h0=ga({},jd,{dataTransfer:0}),zf=bo(h0),vy=ga({},Vd,{relatedTarget:0}),IA=bo(vy),g0=ga({},al,{animationName:0,elapsedTime:0,pseudoElement:0}),xA=bo(g0),_v=ga({},al,{clipboardData:function(Ke){return"clipboardData"in Ke?Ke.clipboardData:window.clipboardData}}),wv=bo(_v),Cy=ga({},al,{data:0}),A0=bo(Cy),Vf=A0,Rv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function Iy(Ke){if(Ke.key){var Ye=Rv[Ke.key]||Ke.key;if(Ye!=="Unidentified")return Ye}if(Ke.type==="keypress"){var ot=Gf(Ke);return ot===13?"Enter":String.fromCharCode(ot)}return Ke.type==="keydown"||Ke.type==="keyup"?qd[Ke.keyCode]||"Unidentified":""}var mo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bv(Ke){var Ye=this,ot=Ye.nativeEvent;if(ot.getModifierState)return ot.getModifierState(Ke);var ft=mo[Ke];return ft?!!ot[ft]:!1}function SA(Ke){return Bv}var Dv=ga({},Vd,{key:Iy,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SA,charCode:function(Ke){return Ke.type==="keypress"?Gf(Ke):0},keyCode:function(Ke){return Ke.type==="keydown"||Ke.type==="keyup"?Ke.keyCode:0},which:function(Ke){return Ke.type==="keypress"?Gf(Ke):Ke.type==="keydown"||Ke.type==="keyup"?Ke.keyCode:0}}),Lv=bo(Dv),xy=ga({},jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p0=bo(xy),Mv=ga({},Vd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SA}),du=bo(Mv),m0=ga({},al,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pv=bo(m0),rf=ga({},jd,{deltaX:function(Ke){return"deltaX"in Ke?Ke.deltaX:"wheelDeltaX"in Ke?-Ke.wheelDeltaX:0},deltaY:function(Ke){return"deltaY"in Ke?Ke.deltaY:"wheelDeltaY"in Ke?-Ke.wheelDeltaY:"wheelDelta"in Ke?-Ke.wheelDelta:0},deltaZ:0,deltaMode:0}),TA=bo(rf),jf=[9,13,27,32],Zh=229,Jh=hi&&"CompositionEvent"in window,qf=null;hi&&"documentMode"in document&&(qf=document.documentMode);var kv=hi&&"TextEvent"in window&&!qf,bA=hi&&(!Jh||qf&&qf>8&&qf<=11),Sy=32,y0=String.fromCharCode(Sy);function Ty(){_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),_s("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),_s("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var eg=!1;function _A(Ke){return(Ke.ctrlKey||Ke.altKey||Ke.metaKey)&&!(Ke.ctrlKey&&Ke.altKey)}function by(Ke){switch(Ke){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function E0(Ke,Ye){return Ke==="keydown"&&Ye.keyCode===Zh}function _y(Ke,Ye){switch(Ke){case"keyup":return jf.indexOf(Ye.keyCode)!==-1;case"keydown":return Ye.keyCode!==Zh;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v0(Ke){var Ye=Ke.detail;return typeof Ye=="object"&&"data"in Ye?Ye.data:null}function wA(Ke){return Ke.locale==="ko"}var fc=!1;function C0(Ke,Ye,ot,ft,pt){var ii,ui;if(Jh?ii=by(Ye):fc?_y(Ye,ft)&&(ii="onCompositionEnd"):E0(Ye,ft)&&(ii="onCompositionStart"),!ii)return null;bA&&!wA(ft)&&(!fc&&ii==="onCompositionStart"?fc=tf(pt):ii==="onCompositionEnd"&&fc&&(ui=zd()));var di=Ly(ot,ii);if(di.length>0){var Ai=new A0(ii,Ye,null,ft,pt);if(Ke.push({event:Ai,listeners:di}),ui)Ai.data=ui;else{var wi=v0(ft);wi!==null&&(Ai.data=wi)}}}function RA(Ke,Ye){switch(Ke){case"compositionend":return v0(Ye);case"keypress":var ot=Ye.which;return ot!==Sy?null:(eg=!0,y0);case"textInput":var ft=Ye.data;return ft===y0&&eg?null:ft;default:return null}}function wy(Ke,Ye){if(fc){if(Ke==="compositionend"||!Jh&&_y(Ke,Ye)){var ot=zd();return vA(),fc=!1,ot}return null}switch(Ke){case"paste":return null;case"keypress":if(!_A(Ye)){if(Ye.char&&Ye.char.length>1)return Ye.char;if(Ye.which)return String.fromCharCode(Ye.which)}return null;case"compositionend":return bA&&!wA(Ye)?null:Ye.data;default:return null}}function Ov(Ke,Ye,ot,ft,pt){var ii;if(kv?ii=RA(Ye,ft):ii=wy(Ye,ft),!ii)return null;var ui=Ly(ot,"onBeforeInput");if(ui.length>0){var di=new Vf("onBeforeInput","beforeinput",null,ft,pt);Ke.push({event:di,listeners:ui}),di.data=ii}}function BA(Ke,Ye,ot,ft,pt,ii,ui){C0(Ke,Ye,ot,ft,pt),Ov(Ke,Ye,ot,ft,pt)}var Fv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(Ke){var Ye=Ke&&Ke.nodeName&&Ke.nodeName.toLowerCase();return Ye==="input"?!!Fv[Ke.type]:Ye==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Nv(Ke){if(!hi)return!1;var Ye="on"+Ke,ot=Ye in document;if(!ot){var ft=document.createElement("div");ft.setAttribute(Ye,"return;"),ot=typeof ft[Ye]=="function"}return ot}function DA(){_s("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function nt(Ke,Ye,ot,ft){Pg(ft);var pt=Ly(Ye,"onChange");if(pt.length>0){var ii=new ol("onChange","change",null,ot,ft);Ke.push({event:ii,listeners:pt})}}var rt=null,dt=null;function ti(Ke){var Ye=Ke.nodeName&&Ke.nodeName.toLowerCase();return Ye==="select"||Ye==="input"&&Ke.type==="file"}function oi(Ke){var Ye=[];nt(Ye,dt,Ke,Mg(Ke)),Rp(fi,Ye)}function fi(Ke){HI(Ke,0)}function Si(Ke){var Ye=FA(Ke);if(md(Ye))return Ke}function Oi(Ke,Ye){if(Ke==="change")return Ye}var Qi=!1;hi&&(Qi=Nv("input")&&(!document.documentMode||document.documentMode>9));function Qr(Ke,Ye){rt=Ke,dt=Ye,rt.attachEvent("onpropertychange",cs)}function ls(){rt&&(rt.detachEvent("onpropertychange",cs),rt=null,dt=null)}function cs(Ke){Ke.propertyName==="value"&&Si(dt)&&oi(Ke)}function os(Ke,Ye,ot){Ke==="focusin"?(ls(),Qr(Ye,ot)):Ke==="focusout"&&ls()}function Ts(Ke,Ye){if(Ke==="selectionchange"||Ke==="keyup"||Ke==="keydown")return Si(dt)}function Ls(Ke){var Ye=Ke.nodeName;return Ye&&Ye.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")}function ks(Ke,Ye){if(Ke==="click")return Si(Ye)}function vo(Ke,Ye){if(Ke==="input"||Ke==="change")return Si(Ye)}function ji(Ke){var Ye=Ke._wrapperState;!Ye||!Ye.controlled||Ke.type!=="number"||Ws(Ke,"number",Ke.value)}function Hi(Ke,Ye,ot,ft,pt,ii,ui){var di=ot?FA(ot):window,Ai,wi;if(ti(di)?Ai=Oi:Kd(di)?Qi?Ai=vo:(Ai=Ts,wi=os):Ls(di)&&(Ai=ks),Ai){var Di=Ai(Ye,ot);if(Di){nt(Ke,Di,ft,pt);return}}wi&&wi(Ye,di,ot),Ye==="focusout"&&ji(di)}function Xi(){ws("onMouseEnter",["mouseout","mouseover"]),ws("onMouseLeave",["mouseout","mouseover"]),ws("onPointerEnter",["pointerout","pointerover"]),ws("onPointerLeave",["pointerout","pointerover"])}function ms(Ke,Ye,ot,ft,pt,ii,ui){var di=Ye==="mouseover"||Ye==="pointerover",Ai=Ye==="mouseout"||Ye==="pointerout";if(di&&!zm(ft)){var wi=ft.relatedTarget||ft.fromElement;if(wi&&(ig(wi)||k0(wi)))return}if(!(!Ai&&!di)){var Di;if(pt.window===pt)Di=pt;else{var zi=pt.ownerDocument;zi?Di=zi.defaultView||zi.parentWindow:Di=window}var Gi,Zi;if(Ai){var _r=ft.relatedTarget||ft.toElement;if(Gi=ot,Zi=_r?ig(_r):null,Zi!==null){var es=Gl(Zi);(Zi!==es||Zi.tag!==lt&&Zi.tag!==ct)&&(Zi=null)}}else Gi=null,Zi=ot;if(Gi!==Zi){var Rs=nf,Ys="onMouseLeave",Hs="onMouseEnter",Sa="mouse";(Ye==="pointerout"||Ye==="pointerover")&&(Rs=p0,Ys="onPointerLeave",Hs="onPointerEnter",Sa="pointer");var va=Gi==null?Di:FA(Gi),Ki=Zi==null?Di:FA(Zi),ts=new Rs(Ys,Sa+"leave",Gi,ft,pt);ts.target=va,ts.relatedTarget=Ki;var Yi=null,ds=ig(pt);if(ds===ot){var Bs=new Rs(Hs,Sa+"enter",Zi,ft,pt);Bs.target=Ki,Bs.relatedTarget=va,Yi=Bs}Nb(Ke,ts,Yi,Gi,Zi)}}}function Qs(Ke,Ye){return Ke===Ye&&(Ke!==0||1/Ke===1/Ye)||Ke!==Ke&&Ye!==Ye}var Ms=typeof Object.is=="function"?Object.is:Qs;function qs(Ke,Ye){if(Ms(Ke,Ye))return!0;if(typeof Ke!="object"||Ke===null||typeof Ye!="object"||Ye===null)return!1;var ot=Object.keys(Ke),ft=Object.keys(Ye);if(ot.length!==ft.length)return!1;for(var pt=0;pt<ot.length;pt++){var ii=ot[pt];if(!Bi.call(Ye,ii)||!Ms(Ke[ii],Ye[ii]))return!1}return!0}function ra(Ke){for(;Ke&&Ke.firstChild;)Ke=Ke.firstChild;return Ke}function Uo(Ke){for(;Ke;){if(Ke.nextSibling)return Ke.nextSibling;Ke=Ke.parentNode}}function Ra(Ke,Ye){for(var ot=ra(Ke),ft=0,pt=0;ot;){if(ot.nodeType===Xu){if(pt=ft+ot.textContent.length,ft<=Ye&&pt>=Ye)return{node:ot,offset:Ye-ft};ft=pt}ot=ra(Uo(ot))}}function sf(Ke){var Ye=Ke.ownerDocument,ot=Ye&&Ye.defaultView||window,ft=ot.getSelection&&ot.getSelection();if(!ft||ft.rangeCount===0)return null;var pt=ft.anchorNode,ii=ft.anchorOffset,ui=ft.focusNode,di=ft.focusOffset;try{pt.nodeType,ui.nodeType}catch{return null}return $v(Ke,pt,ii,ui,di)}function $v(Ke,Ye,ot,ft,pt){var ii=0,ui=-1,di=-1,Ai=0,wi=0,Di=Ke,zi=null;e:for(;;){for(var Gi=null;Di===Ye&&(ot===0||Di.nodeType===Xu)&&(ui=ii+ot),Di===ft&&(pt===0||Di.nodeType===Xu)&&(di=ii+pt),Di.nodeType===Xu&&(ii+=Di.nodeValue.length),(Gi=Di.firstChild)!==null;)zi=Di,Di=Gi;for(;;){if(Di===Ke)break e;if(zi===Ye&&++Ai===ot&&(ui=ii),zi===ft&&++wi===pt&&(di=ii),(Gi=Di.nextSibling)!==null)break;Di=zi,zi=Di.parentNode}Di=Gi}return ui===-1||di===-1?null:{start:ui,end:di}}function yb(Ke,Ye){var ot=Ke.ownerDocument||document,ft=ot&&ot.defaultView||window;if(ft.getSelection){var pt=ft.getSelection(),ii=Ke.textContent.length,ui=Math.min(Ye.start,ii),di=Ye.end===void 0?ui:Math.min(Ye.end,ii);if(!pt.extend&&ui>di){var Ai=di;di=ui,ui=Ai}var wi=Ra(Ke,ui),Di=Ra(Ke,di);if(wi&&Di){if(pt.rangeCount===1&&pt.anchorNode===wi.node&&pt.anchorOffset===wi.offset&&pt.focusNode===Di.node&&pt.focusOffset===Di.offset)return;var zi=ot.createRange();zi.setStart(wi.node,wi.offset),pt.removeAllRanges(),ui>di?(pt.addRange(zi),pt.extend(Di.node,Di.offset)):(zi.setEnd(Di.node,Di.offset),pt.addRange(zi))}}}function DI(Ke){return Ke&&Ke.nodeType===Xu}function LI(Ke,Ye){return!Ke||!Ye?!1:Ke===Ye?!0:DI(Ke)?!1:DI(Ye)?LI(Ke,Ye.parentNode):"contains"in Ke?Ke.contains(Ye):Ke.compareDocumentPosition?!!(Ke.compareDocumentPosition(Ye)&16):!1}function Eb(Ke){return Ke&&Ke.ownerDocument&&LI(Ke.ownerDocument.documentElement,Ke)}function vb(Ke){try{return typeof Ke.contentWindow.location.href=="string"}catch{return!1}}function MI(){for(var Ke=window,Ye=Fc();Ye instanceof Ke.HTMLIFrameElement;){if(vb(Ye))Ke=Ye.contentWindow;else return Ye;Ye=Fc(Ke.document)}return Ye}function Qv(Ke){var Ye=Ke&&Ke.nodeName&&Ke.nodeName.toLowerCase();return Ye&&(Ye==="input"&&(Ke.type==="text"||Ke.type==="search"||Ke.type==="tel"||Ke.type==="url"||Ke.type==="password")||Ye==="textarea"||Ke.contentEditable==="true")}function Cb(){var Ke=MI();return{focusedElem:Ke,selectionRange:Qv(Ke)?xb(Ke):null}}function Ib(Ke){var Ye=MI(),ot=Ke.focusedElem,ft=Ke.selectionRange;if(Ye!==ot&&Eb(ot)){ft!==null&&Qv(ot)&&Sb(ot,ft);for(var pt=[],ii=ot;ii=ii.parentNode;)ii.nodeType===bl&&pt.push({element:ii,left:ii.scrollLeft,top:ii.scrollTop});typeof ot.focus=="function"&&ot.focus();for(var ui=0;ui<pt.length;ui++){var di=pt[ui];di.element.scrollLeft=di.left,di.element.scrollTop=di.top}}}function xb(Ke){var Ye;return"selectionStart"in Ke?Ye={start:Ke.selectionStart,end:Ke.selectionEnd}:Ye=sf(Ke),Ye||{start:0,end:0}}function Sb(Ke,Ye){var ot=Ye.start,ft=Ye.end;ft===void 0&&(ft=ot),"selectionStart"in Ke?(Ke.selectionStart=ot,Ke.selectionEnd=Math.min(ft,Ke.value.length)):yb(Ke,Ye)}var Tb=hi&&"documentMode"in document&&document.documentMode<=11;function bb(){_s("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var LA=null,Uv=null,I0=null,Gv=!1;function wb(Ke){if("selectionStart"in Ke&&Qv(Ke))return{start:Ke.selectionStart,end:Ke.selectionEnd};var Ye=Ke.ownerDocument&&Ke.ownerDocument.defaultView||window,ot=Ye.getSelection();return{anchorNode:ot.anchorNode,anchorOffset:ot.anchorOffset,focusNode:ot.focusNode,focusOffset:ot.focusOffset}}function Rb(Ke){return Ke.window===Ke?Ke.document:Ke.nodeType===Iu?Ke:Ke.ownerDocument}function PI(Ke,Ye,ot){var ft=Rb(ot);if(!(Gv||LA==null||LA!==Fc(ft))){var pt=wb(LA);if(!I0||!qs(I0,pt)){I0=pt;var ii=Ly(Uv,"onSelect");if(ii.length>0){var ui=new ol("onSelect","select",null,Ye,ot);Ke.push({event:ui,listeners:ii}),ui.target=LA}}}}function Bb(Ke,Ye,ot,ft,pt,ii,ui){var di=ot?FA(ot):window;switch(Ye){case"focusin":(Kd(di)||di.contentEditable==="true")&&(LA=di,Uv=ot,I0=null);break;case"focusout":LA=null,Uv=null,I0=null;break;case"mousedown":Gv=!0;break;case"contextmenu":case"mouseup":case"dragend":Gv=!1,PI(Ke,ft,pt);break;case"selectionchange":if(Tb)break;case"keydown":case"keyup":PI(Ke,ft,pt)}}function Ry(Ke,Ye){var ot={};return ot[Ke.toLowerCase()]=Ye.toLowerCase(),ot["Webkit"+Ke]="webkit"+Ye,ot["Moz"+Ke]="moz"+Ye,ot}var MA={animationend:Ry("Animation","AnimationEnd"),animationiteration:Ry("Animation","AnimationIteration"),animationstart:Ry("Animation","AnimationStart"),transitionend:Ry("Transition","TransitionEnd")},Hv={},kI={};hi&&(kI=document.createElement("div").style,"AnimationEvent"in window||(delete MA.animationend.animation,delete MA.animationiteration.animation,delete MA.animationstart.animation),"TransitionEvent"in window||delete MA.transitionend.transition);function By(Ke){if(Hv[Ke])return Hv[Ke];if(!MA[Ke])return Ke;var Ye=MA[Ke];for(var ot in Ye)if(Ye.hasOwnProperty(ot)&&ot in kI)return Hv[Ke]=Ye[ot];return Ke}var OI=By("animationend"),FI=By("animationiteration"),NI=By("animationstart"),$I=By("transitionend"),QI=new Map,UI=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Yd(Ke,Ye){QI.set(Ke,Ye),_s(Ye,[Ke])}function Db(){for(var Ke=0;Ke<UI.length;Ke++){var Ye=UI[Ke],ot=Ye.toLowerCase(),ft=Ye[0].toUpperCase()+Ye.slice(1);Yd(ot,"on"+ft)}Yd(OI,"onAnimationEnd"),Yd(FI,"onAnimationIteration"),Yd(NI,"onAnimationStart"),Yd("dblclick","onDoubleClick"),Yd("focusin","onFocus"),Yd("focusout","onBlur"),Yd($I,"onTransitionEnd")}function Lb(Ke,Ye,ot,ft,pt,ii,ui){var di=QI.get(Ye);if(di!==void 0){var Ai=ol,wi=Ye;switch(Ye){case"keypress":if(Gf(ft)===0)return;case"keydown":case"keyup":Ai=Lv;break;case"focusin":wi="focus",Ai=IA;break;case"focusout":wi="blur",Ai=IA;break;case"beforeblur":case"afterblur":Ai=IA;break;case"click":if(ft.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ai=nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ai=zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ai=du;break;case OI:case FI:case NI:Ai=xA;break;case $I:Ai=Pv;break;case"scroll":Ai=f0;break;case"wheel":Ai=TA;break;case"copy":case"cut":case"paste":Ai=wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ai=p0;break}var Di=(ii&If)!==0;{var zi=!Di&&Ye==="scroll",Gi=Ob(ot,di,ft.type,Di,zi);if(Gi.length>0){var Zi=new Ai(di,wi,null,ft,pt);Ke.push({event:Zi,listeners:Gi})}}}}Db(),Xi(),DA(),bb(),Ty();function Mb(Ke,Ye,ot,ft,pt,ii,ui){Lb(Ke,Ye,ot,ft,pt,ii);var di=(ii&Av)===0;di&&(ms(Ke,Ye,ot,ft,pt),Hi(Ke,Ye,ot,ft,pt),Bb(Ke,Ye,ot,ft,pt),BA(Ke,Ye,ot,ft,pt))}var x0=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],zv=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(x0));function GI(Ke,Ye,ot){var ft=Ke.type||"unknown-event";Ke.currentTarget=ot,nc(ft,Ye,void 0,Ke),Ke.currentTarget=null}function Pb(Ke,Ye,ot){var ft;if(ot)for(var pt=Ye.length-1;pt>=0;pt--){var ii=Ye[pt],ui=ii.instance,di=ii.currentTarget,Ai=ii.listener;if(ui!==ft&&Ke.isPropagationStopped())return;GI(Ke,Ai,di),ft=ui}else for(var wi=0;wi<Ye.length;wi++){var Di=Ye[wi],zi=Di.instance,Gi=Di.currentTarget,Zi=Di.listener;if(zi!==ft&&Ke.isPropagationStopped())return;GI(Ke,Zi,Gi),ft=zi}}function HI(Ke,Ye){for(var ot=(Ye&If)!==0,ft=0;ft<Ke.length;ft++){var pt=Ke[ft],ii=pt.event,ui=pt.listeners;Pb(ii,ui,ot)}Mp()}function kb(Ke,Ye,ot,ft,pt){var ii=Mg(ot),ui=[];Mb(ui,Ke,ft,ot,ii,Ye),HI(ui,Ye)}function co(Ke,Ye){zv.has(Ke)||be('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',Ke);var ot=!1,ft=fw(Ye),pt=$b(Ke,ot);ft.has(pt)||(zI(Ye,Ke,Th,ot),ft.add(pt))}function Vv(Ke,Ye,ot){zv.has(Ke)&&!Ye&&be('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',Ke);var ft=0;Ye&&(ft|=If),zI(ot,Ke,ft,Ye)}var Dy="_reactListening"+Math.random().toString(36).slice(2);function S0(Ke){if(!Ke[Dy]){Ke[Dy]=!0,Zr.forEach(function(ot){ot!=="selectionchange"&&(zv.has(ot)||Vv(ot,!1,Ke),Vv(ot,!0,Ke))});var Ye=Ke.nodeType===Iu?Ke:Ke.ownerDocument;Ye!==null&&(Ye[Dy]||(Ye[Dy]=!0,Vv("selectionchange",!1,Ye)))}}function zI(Ke,Ye,ot,ft,pt){var ii=Ud(Ke,Ye,ot),ui=void 0;Bh&&(Ye==="touchstart"||Ye==="touchmove"||Ye==="wheel")&&(ui=!0),Ke=Ke,ft?ui!==void 0?cc(Ke,Ye,ii,ui):Hd(Ke,Ye,ii):ui!==void 0?EA(Ke,Ye,ii,ui):c0(Ke,Ye,ii)}function VI(Ke,Ye){return Ke===Ye||Ke.nodeType===So&&Ke.parentNode===Ye}function jv(Ke,Ye,ot,ft,pt){var ii=ft;if(!(Ye&Ju)&&!(Ye&Th)){var ui=pt;if(ft!==null){var di=ft;e:for(;;){if(di===null)return;var Ai=di.tag;if(Ai===it||Ai===st){var wi=di.stateNode.containerInfo;if(VI(wi,ui))break;if(Ai===st)for(var Di=di.return;Di!==null;){var zi=Di.tag;if(zi===it||zi===st){var Gi=Di.stateNode.containerInfo;if(VI(Gi,ui))return}Di=Di.return}for(;wi!==null;){var Zi=ig(wi);if(Zi===null)return;var _r=Zi.tag;if(_r===lt||_r===ct){di=ii=Zi;continue e}wi=wi.parentNode}}di=di.return}}}Rp(function(){return kb(Ke,Ye,ot,ii)})}function T0(Ke,Ye,ot){return{instance:Ke,listener:Ye,currentTarget:ot}}function Ob(Ke,Ye,ot,ft,pt,ii){for(var ui=Ye!==null?Ye+"Capture":null,di=ft?ui:Ye,Ai=[],wi=Ke,Di=null;wi!==null;){var zi=wi,Gi=zi.stateNode,Zi=zi.tag;if(Zi===lt&&Gi!==null&&(Di=Gi,di!==null)){var _r=Sf(wi,di);_r!=null&&Ai.push(T0(wi,_r,Di))}if(pt)break;wi=wi.return}return Ai}function Ly(Ke,Ye){for(var ot=Ye+"Capture",ft=[],pt=Ke;pt!==null;){var ii=pt,ui=ii.stateNode,di=ii.tag;if(di===lt&&ui!==null){var Ai=ui,wi=Sf(pt,ot);wi!=null&&ft.unshift(T0(pt,wi,Ai));var Di=Sf(pt,Ye);Di!=null&&ft.push(T0(pt,Di,Ai))}pt=pt.return}return ft}function PA(Ke){if(Ke===null)return null;do Ke=Ke.return;while(Ke&&Ke.tag!==lt);return Ke||null}function Fb(Ke,Ye){for(var ot=Ke,ft=Ye,pt=0,ii=ot;ii;ii=PA(ii))pt++;for(var ui=0,di=ft;di;di=PA(di))ui++;for(;pt-ui>0;)ot=PA(ot),pt--;for(;ui-pt>0;)ft=PA(ft),ui--;for(var Ai=pt;Ai--;){if(ot===ft||ft!==null&&ot===ft.alternate)return ot;ot=PA(ot),ft=PA(ft)}return null}function jI(Ke,Ye,ot,ft,pt){for(var ii=Ye._reactName,ui=[],di=ot;di!==null&&di!==ft;){var Ai=di,wi=Ai.alternate,Di=Ai.stateNode,zi=Ai.tag;if(wi!==null&&wi===ft)break;if(zi===lt&&Di!==null){var Gi=Di;if(pt){var Zi=Sf(di,ii);Zi!=null&&ui.unshift(T0(di,Zi,Gi))}else if(!pt){var _r=Sf(di,ii);_r!=null&&ui.push(T0(di,_r,Gi))}}di=di.return}ui.length!==0&&Ke.push({event:Ye,listeners:ui})}function Nb(Ke,Ye,ot,ft,pt){var ii=ft&&pt?Fb(ft,pt):null;ft!==null&&jI(Ke,Ye,ft,ii,!1),pt!==null&&ot!==null&&jI(Ke,ot,pt,ii,!0)}function $b(Ke,Ye){return Ke+"__"+(Ye?"capture":"bubble")}var hu=!1,b0="dangerouslySetInnerHTML",My="suppressContentEditableWarning",Wd="suppressHydrationWarning",qI="autoFocus",tg="children",ng="style",Py="__html",qv,ky,_0,KI,Oy,YI,WI;qv={dialog:!0,webview:!0},ky=function(Ke,Ye){Lg(Ke,Ye),Sp(Ke,Ye),Hm(Ke,Ye,{registrationNameDependencies:ps,possibleRegistrationNames:Is})},YI=hi&&!document.documentMode,_0=function(Ke,Ye,ot){if(!hu){var ft=Fy(ot),pt=Fy(Ye);pt!==ft&&(hu=!0,be("Prop `%s` did not match. Server: %s Client: %s",Ke,JSON.stringify(pt),JSON.stringify(ft)))}},KI=function(Ke){if(!hu){hu=!0;var Ye=[];Ke.forEach(function(ot){Ye.push(ot)}),be("Extra attributes from the server: %s",Ye)}},Oy=function(Ke,Ye){Ye===!1?be("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",Ke,Ke,Ke):be("Expected `%s` listener to be a function, instead got a value of `%s` type.",Ke,typeof Ye)},WI=function(Ke,Ye){var ot=Ke.namespaceURI===Wu?Ke.ownerDocument.createElement(Ke.tagName):Ke.ownerDocument.createElementNS(Ke.namespaceURI,Ke.tagName);return ot.innerHTML=Ye,ot.innerHTML};var Qb=/\r\n?/g,Ub=/\u0000|\uFFFD/g;function Fy(Ke){Us(Ke);var Ye=typeof Ke=="string"?Ke:""+Ke;return Ye.replace(Qb,`
`).replace(Ub,"")}function Ny(Ke,Ye,ot,ft){var pt=Fy(Ye),ii=Fy(Ke);if(ii!==pt&&(ft&&(hu||(hu=!0,be('Text content did not match. Server: "%s" Client: "%s"',ii,pt))),ot&&Ii))throw new Error("Text content does not match server-rendered HTML.")}function XI(Ke){return Ke.nodeType===Iu?Ke:Ke.ownerDocument}function Gb(){}function $y(Ke){Ke.onclick=Gb}function Hb(Ke,Ye,ot,ft,pt){for(var ii in ft)if(ft.hasOwnProperty(ii)){var ui=ft[ii];if(ii===ng)ui&&Object.freeze(ui),Mm(Ye,ui);else if(ii===b0){var di=ui?ui[Py]:void 0;di!=null&&Im(Ye,di)}else if(ii===tg)if(typeof ui=="string"){var Ai=Ke!=="textarea"||ui!=="";Ai&&wg(Ye,ui)}else typeof ui=="number"&&wg(Ye,""+ui);else ii===My||ii===Wd||ii===qI||(ps.hasOwnProperty(ii)?ui!=null&&(typeof ui!="function"&&Oy(ii,ui),ii==="onScroll"&&co("scroll",Ye)):ui!=null&&qa(Ye,ii,ui,pt))}}function zb(Ke,Ye,ot,ft){for(var pt=0;pt<Ye.length;pt+=2){var ii=Ye[pt],ui=Ye[pt+1];ii===ng?Mm(Ke,ui):ii===b0?Im(Ke,ui):ii===tg?wg(Ke,ui):qa(Ke,ii,ui,ft)}}function Vb(Ke,Ye,ot,ft){var pt,ii=XI(ot),ui,di=ft;if(di===Wu&&(di=bg(Ke)),di===Wu){if(pt=Zu(Ke,Ye),!pt&&Ke!==Ke.toLowerCase()&&be("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",Ke),Ke==="script"){var Ai=ii.createElement("div");Ai.innerHTML="<script><\/script>";var wi=Ai.firstChild;ui=Ai.removeChild(wi)}else if(typeof Ye.is=="string")ui=ii.createElement(Ke,{is:Ye.is});else if(ui=ii.createElement(Ke),Ke==="select"){var Di=ui;Ye.multiple?Di.multiple=!0:Ye.size&&(Di.size=Ye.size)}}else ui=ii.createElementNS(di,Ke);return di===Wu&&!pt&&Object.prototype.toString.call(ui)==="[object HTMLUnknownElement]"&&!Bi.call(qv,Ke)&&(qv[Ke]=!0,be("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",Ke)),ui}function jb(Ke,Ye){return XI(Ye).createTextNode(Ke)}function qb(Ke,Ye,ot,ft){var pt=Zu(Ye,ot);ky(Ye,ot);var ii;switch(Ye){case"dialog":co("cancel",Ke),co("close",Ke),ii=ot;break;case"iframe":case"object":case"embed":co("load",Ke),ii=ot;break;case"video":case"audio":for(var ui=0;ui<x0.length;ui++)co(x0[ui],Ke);ii=ot;break;case"source":co("error",Ke),ii=ot;break;case"img":case"image":case"link":co("error",Ke),co("load",Ke),ii=ot;break;case"details":co("toggle",Ke),ii=ot;break;case"input":$i(Ke,ot),ii=Ei(Ke,ot),co("invalid",Ke);break;case"option":Fa(Ke,ot),ii=ot;break;case"select":Ch(Ke,ot),ii=vh(Ke,ot),co("invalid",Ke);break;case"textarea":Em(Ke,ot),ii=Ap(Ke,ot),co("invalid",Ke);break;default:ii=ot}switch(Bg(Ye,ii),Hb(Ye,Ke,ft,ii,pt),Ye){case"input":eu(Ke),As(Ke,ot,!1);break;case"textarea":eu(Ke),Cm(Ke);break;case"option":Ua(Ke,ot);break;case"select":hp(Ke,ot);break;default:typeof ii.onClick=="function"&&$y(Ke);break}}function Kb(Ke,Ye,ot,ft,pt){ky(Ye,ft);var ii=null,ui,di;switch(Ye){case"input":ui=Ei(Ke,ot),di=Ei(Ke,ft),ii=[];break;case"select":ui=vh(Ke,ot),di=vh(Ke,ft),ii=[];break;case"textarea":ui=Ap(Ke,ot),di=Ap(Ke,ft),ii=[];break;default:ui=ot,di=ft,typeof ui.onClick!="function"&&typeof di.onClick=="function"&&$y(Ke);break}Bg(Ye,di);var Ai,wi,Di=null;for(Ai in ui)if(!(di.hasOwnProperty(Ai)||!ui.hasOwnProperty(Ai)||ui[Ai]==null))if(Ai===ng){var zi=ui[Ai];for(wi in zi)zi.hasOwnProperty(wi)&&(Di||(Di={}),Di[wi]="")}else Ai===b0||Ai===tg||Ai===My||Ai===Wd||Ai===qI||(ps.hasOwnProperty(Ai)?ii||(ii=[]):(ii=ii||[]).push(Ai,null));for(Ai in di){var Gi=di[Ai],Zi=ui!=null?ui[Ai]:void 0;if(!(!di.hasOwnProperty(Ai)||Gi===Zi||Gi==null&&Zi==null))if(Ai===ng)if(Gi&&Object.freeze(Gi),Zi){for(wi in Zi)Zi.hasOwnProperty(wi)&&(!Gi||!Gi.hasOwnProperty(wi))&&(Di||(Di={}),Di[wi]="");for(wi in Gi)Gi.hasOwnProperty(wi)&&Zi[wi]!==Gi[wi]&&(Di||(Di={}),Di[wi]=Gi[wi])}else Di||(ii||(ii=[]),ii.push(Ai,Di)),Di=Gi;else if(Ai===b0){var _r=Gi?Gi[Py]:void 0,es=Zi?Zi[Py]:void 0;_r!=null&&es!==_r&&(ii=ii||[]).push(Ai,_r)}else Ai===tg?(typeof Gi=="string"||typeof Gi=="number")&&(ii=ii||[]).push(Ai,""+Gi):Ai===My||Ai===Wd||(ps.hasOwnProperty(Ai)?(Gi!=null&&(typeof Gi!="function"&&Oy(Ai,Gi),Ai==="onScroll"&&co("scroll",Ke)),!ii&&Zi!==Gi&&(ii=[])):(ii=ii||[]).push(Ai,Gi))}return Di&&(xh(Di,di[ng]),(ii=ii||[]).push(ng,Di)),ii}function Yb(Ke,Ye,ot,ft,pt){ot==="input"&&pt.type==="radio"&&pt.name!=null&&Ji(Ke,pt);var ii=Zu(ot,ft),ui=Zu(ot,pt);switch(zb(Ke,Ye,ii,ui),ot){case"input":Jr(Ke,pt);break;case"textarea":vm(Ke,pt);break;case"select":sv(Ke,pt);break}}function Wb(Ke){{var Ye=Ke.toLowerCase();return Dg.hasOwnProperty(Ye)&&Dg[Ye]||null}}function Xb(Ke,Ye,ot,ft,pt,ii,ui){var di,Ai;switch(di=Zu(Ye,ot),ky(Ye,ot),Ye){case"dialog":co("cancel",Ke),co("close",Ke);break;case"iframe":case"object":case"embed":co("load",Ke);break;case"video":case"audio":for(var wi=0;wi<x0.length;wi++)co(x0[wi],Ke);break;case"source":co("error",Ke);break;case"img":case"image":case"link":co("error",Ke),co("load",Ke);break;case"details":co("toggle",Ke);break;case"input":$i(Ke,ot),co("invalid",Ke);break;case"option":Fa(Ke,ot);break;case"select":Ch(Ke,ot),co("invalid",Ke);break;case"textarea":Em(Ke,ot),co("invalid",Ke);break}Bg(Ye,ot);{Ai=new Set;for(var Di=Ke.attributes,zi=0;zi<Di.length;zi++){var Gi=Di[zi].name.toLowerCase();switch(Gi){case"value":break;case"checked":break;case"selected":break;default:Ai.add(Di[zi].name)}}}var Zi=null;for(var _r in ot)if(ot.hasOwnProperty(_r)){var es=ot[_r];if(_r===tg)typeof es=="string"?Ke.textContent!==es&&(ot[Wd]!==!0&&Ny(Ke.textContent,es,ii,ui),Zi=[tg,es]):typeof es=="number"&&Ke.textContent!==""+es&&(ot[Wd]!==!0&&Ny(Ke.textContent,es,ii,ui),Zi=[tg,""+es]);else if(ps.hasOwnProperty(_r))es!=null&&(typeof es!="function"&&Oy(_r,es),_r==="onScroll"&&co("scroll",Ke));else if(ui&&typeof di=="boolean"){var Rs=void 0,Ys=di&&Yr?null:vs(_r);if(ot[Wd]!==!0){if(!(_r===My||_r===Wd||_r==="value"||_r==="checked"||_r==="selected")){if(_r===b0){var Hs=Ke.innerHTML,Sa=es?es[Py]:void 0;if(Sa!=null){var va=WI(Ke,Sa);va!==Hs&&_0(_r,Hs,va)}}else if(_r===ng){if(Ai.delete(_r),YI){var Ki=hv(es);Rs=Ke.getAttribute("style"),Ki!==Rs&&_0(_r,Rs,Ki)}}else if(di&&!Yr)Ai.delete(_r.toLowerCase()),Rs=ll(Ke,_r,es),es!==Rs&&_0(_r,Rs,es);else if(!Fi(_r,Ys,di)&&!is(_r,es,Ys,di)){var ts=!1;if(Ys!==null)Ai.delete(Ys.attributeName),Rs=xo(Ke,_r,es,Ys);else{var Yi=ft;if(Yi===Wu&&(Yi=bg(Ye)),Yi===Wu)Ai.delete(_r.toLowerCase());else{var ds=Wb(_r);ds!==null&&ds!==_r&&(ts=!0,Ai.delete(ds)),Ai.delete(_r)}Rs=ll(Ke,_r,es)}var Bs=Yr;!Bs&&es!==Rs&&!ts&&_0(_r,Rs,es)}}}}}switch(ui&&Ai.size>0&&ot[Wd]!==!0&&KI(Ai),Ye){case"input":eu(Ke),As(Ke,ot,!0);break;case"textarea":eu(Ke),Cm(Ke);break;case"select":case"option":break;default:typeof ot.onClick=="function"&&$y(Ke);break}return Zi}function Zb(Ke,Ye,ot){var ft=Ke.nodeValue!==Ye;return ft}function Kv(Ke,Ye){{if(hu)return;hu=!0,be("Did not expect server HTML to contain a <%s> in <%s>.",Ye.nodeName.toLowerCase(),Ke.nodeName.toLowerCase())}}function Yv(Ke,Ye){{if(hu)return;hu=!0,be('Did not expect server HTML to contain the text node "%s" in <%s>.',Ye.nodeValue,Ke.nodeName.toLowerCase())}}function Wv(Ke,Ye,ot){{if(hu)return;hu=!0,be("Expected server HTML to contain a matching <%s> in <%s>.",Ye,Ke.nodeName.toLowerCase())}}function Xv(Ke,Ye){{if(Ye===""||hu)return;hu=!0,be('Expected server HTML to contain a matching text node for "%s" in <%s>.',Ye,Ke.nodeName.toLowerCase())}}function Jb(Ke,Ye,ot){switch(Ye){case"input":Zs(Ke,ot);return;case"textarea":pp(Ke,ot);return;case"select":av(Ke,ot);return}}var w0=function(){},R0=function(){};{var e_=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],ZI=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],t_=ZI.concat(["button"]),n_=["dd","dt","li","option","optgroup","p","rp","rt"],JI={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};R0=function(Ke,Ye){var ot=ga({},Ke||JI),ft={tag:Ye};return ZI.indexOf(Ye)!==-1&&(ot.aTagInScope=null,ot.buttonTagInScope=null,ot.nobrTagInScope=null),t_.indexOf(Ye)!==-1&&(ot.pTagInButtonScope=null),e_.indexOf(Ye)!==-1&&Ye!=="address"&&Ye!=="div"&&Ye!=="p"&&(ot.listItemTagAutoclosing=null,ot.dlItemTagAutoclosing=null),ot.current=ft,Ye==="form"&&(ot.formTag=ft),Ye==="a"&&(ot.aTagInScope=ft),Ye==="button"&&(ot.buttonTagInScope=ft),Ye==="nobr"&&(ot.nobrTagInScope=ft),Ye==="p"&&(ot.pTagInButtonScope=ft),Ye==="li"&&(ot.listItemTagAutoclosing=ft),(Ye==="dd"||Ye==="dt")&&(ot.dlItemTagAutoclosing=ft),ot};var i_=function(Ke,Ye){switch(Ye){case"select":return Ke==="option"||Ke==="optgroup"||Ke==="#text";case"optgroup":return Ke==="option"||Ke==="#text";case"option":return Ke==="#text";case"tr":return Ke==="th"||Ke==="td"||Ke==="style"||Ke==="script"||Ke==="template";case"tbody":case"thead":case"tfoot":return Ke==="tr"||Ke==="style"||Ke==="script"||Ke==="template";case"colgroup":return Ke==="col"||Ke==="template";case"table":return Ke==="caption"||Ke==="colgroup"||Ke==="tbody"||Ke==="tfoot"||Ke==="thead"||Ke==="style"||Ke==="script"||Ke==="template";case"head":return Ke==="base"||Ke==="basefont"||Ke==="bgsound"||Ke==="link"||Ke==="meta"||Ke==="title"||Ke==="noscript"||Ke==="noframes"||Ke==="style"||Ke==="script"||Ke==="template";case"html":return Ke==="head"||Ke==="body"||Ke==="frameset";case"frameset":return Ke==="frame";case"#document":return Ke==="html"}switch(Ke){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return Ye!=="h1"&&Ye!=="h2"&&Ye!=="h3"&&Ye!=="h4"&&Ye!=="h5"&&Ye!=="h6";case"rp":case"rt":return n_.indexOf(Ye)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return Ye==null}return!0},r_=function(Ke,Ye){switch(Ke){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return Ye.pTagInButtonScope;case"form":return Ye.formTag||Ye.pTagInButtonScope;case"li":return Ye.listItemTagAutoclosing;case"dd":case"dt":return Ye.dlItemTagAutoclosing;case"button":return Ye.buttonTagInScope;case"a":return Ye.aTagInScope;case"nobr":return Ye.nobrTagInScope}return null},ex={};w0=function(Ke,Ye,ot){ot=ot||JI;var ft=ot.current,pt=ft&&ft.tag;Ye!=null&&(Ke!=null&&be("validateDOMNesting: when childText is passed, childTag should be null"),Ke="#text");var ii=i_(Ke,pt)?null:ft,ui=ii?null:r_(Ke,ot),di=ii||ui;if(di){var Ai=di.tag,wi=!!ii+"|"+Ke+"|"+Ai;if(!ex[wi]){ex[wi]=!0;var Di=Ke,zi="";if(Ke==="#text"?/\S/.test(Ye)?Di="Text nodes":(Di="Whitespace text nodes",zi=" Make sure you don't have any extra whitespace between tags on each line of your source code."):Di="<"+Ke+">",ii){var Gi="";Ai==="table"&&Ke==="tr"&&(Gi+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),be("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",Di,Ai,zi,Gi)}else be("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",Di,Ai)}}}}var Qy="suppressHydrationWarning",Uy="$",Gy="/$",B0="$?",D0="$!",s_="style",Zv=null,Jv=null;function a_(Ke){var Ye,ot,ft=Ke.nodeType;switch(ft){case Iu:case vf:{Ye=ft===Iu?"#document":"#fragment";var pt=Ke.documentElement;ot=pt?pt.namespaceURI:yp(null,"");break}default:{var ii=ft===So?Ke.parentNode:Ke,ui=ii.namespaceURI||null;Ye=ii.tagName,ot=yp(ui,Ye);break}}{var di=Ye.toLowerCase(),Ai=R0(null,di);return{namespace:ot,ancestorInfo:Ai}}}function o_(Ke,Ye,ot){{var ft=Ke,pt=yp(ft.namespace,Ye),ii=R0(ft.ancestorInfo,Ye);return{namespace:pt,ancestorInfo:ii}}}function uD(Ke){return Ke}function l_(Ke){Zv=jl(),Jv=Cb();var Ye=null;return Qo(!1),Ye}function u_(Ke){Ib(Jv),Qo(Zv),Zv=null,Jv=null}function c_(Ke,Ye,ot,ft,pt){var ii;{var ui=ft;if(w0(Ke,null,ui.ancestorInfo),typeof Ye.children=="string"||typeof Ye.children=="number"){var di=""+Ye.children,Ai=R0(ui.ancestorInfo,Ke);w0(null,di,Ai)}ii=ui.namespace}var wi=Vb(Ke,Ye,ot,ii);return P0(pt,wi),o1(wi,Ye),wi}function f_(Ke,Ye){Ke.appendChild(Ye)}function d_(Ke,Ye,ot,ft,pt){switch(qb(Ke,Ye,ot,ft),Ye){case"button":case"input":case"select":case"textarea":return!!ot.autoFocus;case"img":return!0;default:return!1}}function h_(Ke,Ye,ot,ft,pt,ii){{var ui=ii;if(typeof ft.children!=typeof ot.children&&(typeof ft.children=="string"||typeof ft.children=="number")){var di=""+ft.children,Ai=R0(ui.ancestorInfo,Ye);w0(null,di,Ai)}}return Kb(Ke,Ye,ot,ft)}function e1(Ke,Ye){return Ke==="textarea"||Ke==="noscript"||typeof Ye.children=="string"||typeof Ye.children=="number"||typeof Ye.dangerouslySetInnerHTML=="object"&&Ye.dangerouslySetInnerHTML!==null&&Ye.dangerouslySetInnerHTML.__html!=null}function g_(Ke,Ye,ot,ft){{var pt=ot;w0(null,Ke,pt.ancestorInfo)}var ii=jb(Ke,Ye);return P0(ft,ii),ii}function A_(){var Ke=window.event;return Ke===void 0?oc:hl(Ke.type)}var t1=typeof setTimeout=="function"?setTimeout:void 0,p_=typeof clearTimeout=="function"?clearTimeout:void 0,n1=-1,tx=typeof Promise=="function"?Promise:void 0,m_=typeof queueMicrotask=="function"?queueMicrotask:typeof tx<"u"?function(Ke){return tx.resolve(null).then(Ke).catch(y_)}:t1;function y_(Ke){setTimeout(function(){throw Ke})}function E_(Ke,Ye,ot,ft){switch(Ye){case"button":case"input":case"select":case"textarea":ot.autoFocus&&Ke.focus();return;case"img":{ot.src&&(Ke.src=ot.src);return}}}function v_(Ke,Ye,ot,ft,pt,ii){Yb(Ke,Ye,ot,ft,pt),o1(Ke,pt)}function nx(Ke){wg(Ke,"")}function C_(Ke,Ye,ot){Ke.nodeValue=ot}function I_(Ke,Ye){Ke.appendChild(Ye)}function x_(Ke,Ye){var ot;Ke.nodeType===So?(ot=Ke.parentNode,ot.insertBefore(Ye,Ke)):(ot=Ke,ot.appendChild(Ye));var ft=Ke._reactRootContainer;ft==null&&ot.onclick===null&&$y(ot)}function S_(Ke,Ye,ot){Ke.insertBefore(Ye,ot)}function T_(Ke,Ye,ot){Ke.nodeType===So?Ke.parentNode.insertBefore(Ye,ot):Ke.insertBefore(Ye,ot)}function b_(Ke,Ye){Ke.removeChild(Ye)}function __(Ke,Ye){Ke.nodeType===So?Ke.parentNode.removeChild(Ye):Ke.removeChild(Ye)}function i1(Ke,Ye){var ot=Ye,ft=0;do{var pt=ot.nextSibling;if(Ke.removeChild(ot),pt&&pt.nodeType===So){var ii=pt.data;if(ii===Gy)if(ft===0){Ke.removeChild(pt),Ea(Ye);return}else ft--;else(ii===Uy||ii===B0||ii===D0)&&ft++}ot=pt}while(ot);Ea(Ye)}function w_(Ke,Ye){Ke.nodeType===So?i1(Ke.parentNode,Ye):Ke.nodeType===bl&&i1(Ke,Ye),Ea(Ke)}function R_(Ke){Ke=Ke;var Ye=Ke.style;typeof Ye.setProperty=="function"?Ye.setProperty("display","none","important"):Ye.display="none"}function B_(Ke){Ke.nodeValue=""}function D_(Ke,Ye){Ke=Ke;var ot=Ye[s_],ft=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;Ke.style.display=Rg("display",ft)}function L_(Ke,Ye){Ke.nodeValue=Ye}function M_(Ke){Ke.nodeType===bl?Ke.textContent="":Ke.nodeType===Iu&&Ke.documentElement&&Ke.removeChild(Ke.documentElement)}function P_(Ke,Ye,ot){return Ke.nodeType!==bl||Ye.toLowerCase()!==Ke.nodeName.toLowerCase()?null:Ke}function k_(Ke,Ye){return Ye===""||Ke.nodeType!==Xu?null:Ke}function O_(Ke){return Ke.nodeType!==So?null:Ke}function ix(Ke){return Ke.data===B0}function r1(Ke){return Ke.data===D0}function F_(Ke){var Ye=Ke.nextSibling&&Ke.nextSibling.dataset,ot,ft,pt;return Ye&&(ot=Ye.dgst,ft=Ye.msg,pt=Ye.stck),{message:ft,digest:ot,stack:pt}}function N_(Ke,Ye){Ke._reactRetry=Ye}function Hy(Ke){for(;Ke!=null;Ke=Ke.nextSibling){var Ye=Ke.nodeType;if(Ye===bl||Ye===Xu)break;if(Ye===So){var ot=Ke.data;if(ot===Uy||ot===D0||ot===B0)break;if(ot===Gy)return null}}return Ke}function L0(Ke){return Hy(Ke.nextSibling)}function $_(Ke){return Hy(Ke.firstChild)}function Q_(Ke){return Hy(Ke.firstChild)}function U_(Ke){return Hy(Ke.nextSibling)}function G_(Ke,Ye,ot,ft,pt,ii,ui){P0(ii,Ke),o1(Ke,ot);var di;{var Ai=pt;di=Ai.namespace}var wi=(ii.mode&pa)!==Xs;return Xb(Ke,Ye,ot,di,ft,wi,ui)}function H_(Ke,Ye,ot,ft){return P0(ot,Ke),ot.mode&pa,Zb(Ke,Ye)}function z_(Ke,Ye){P0(Ye,Ke)}function V_(Ke){for(var Ye=Ke.nextSibling,ot=0;Ye;){if(Ye.nodeType===So){var ft=Ye.data;if(ft===Gy){if(ot===0)return L0(Ye);ot--}else(ft===Uy||ft===D0||ft===B0)&&ot++}Ye=Ye.nextSibling}return null}function rx(Ke){for(var Ye=Ke.previousSibling,ot=0;Ye;){if(Ye.nodeType===So){var ft=Ye.data;if(ft===Uy||ft===D0||ft===B0){if(ot===0)return Ye;ot--}else ft===Gy&&ot++}Ye=Ye.previousSibling}return null}function j_(Ke){Ea(Ke)}function q_(Ke){Ea(Ke)}function K_(Ke){return Ke!=="head"&&Ke!=="body"}function Y_(Ke,Ye,ot,ft){var pt=!0;Ny(Ye.nodeValue,ot,ft,pt)}function W_(Ke,Ye,ot,ft,pt,ii){if(Ye[Qy]!==!0){var ui=!0;Ny(ft.nodeValue,pt,ii,ui)}}function X_(Ke,Ye){Ye.nodeType===bl?Kv(Ke,Ye):Ye.nodeType===So||Yv(Ke,Ye)}function Z_(Ke,Ye){{var ot=Ke.parentNode;ot!==null&&(Ye.nodeType===bl?Kv(ot,Ye):Ye.nodeType===So||Yv(ot,Ye))}}function J_(Ke,Ye,ot,ft,pt){(pt||Ye[Qy]!==!0)&&(ft.nodeType===bl?Kv(ot,ft):ft.nodeType===So||Yv(ot,ft))}function ew(Ke,Ye,ot){Wv(Ke,Ye)}function tw(Ke,Ye){Xv(Ke,Ye)}function nw(Ke,Ye,ot){{var ft=Ke.parentNode;ft!==null&&Wv(ft,Ye)}}function iw(Ke,Ye){{var ot=Ke.parentNode;ot!==null&&Xv(ot,Ye)}}function rw(Ke,Ye,ot,ft,pt,ii){(ii||Ye[Qy]!==!0)&&Wv(ot,ft)}function sw(Ke,Ye,ot,ft,pt){(pt||Ye[Qy]!==!0)&&Xv(ot,ft)}function aw(Ke){be("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",Ke.nodeName.toLowerCase())}function ow(Ke){S0(Ke)}var kA=Math.random().toString(36).slice(2),OA="__reactFiber$"+kA,s1="__reactProps$"+kA,M0="__reactContainer$"+kA,a1="__reactEvents$"+kA,lw="__reactListeners$"+kA,uw="__reactHandles$"+kA;function cw(Ke){delete Ke[OA],delete Ke[s1],delete Ke[a1],delete Ke[lw],delete Ke[uw]}function P0(Ke,Ye){Ye[OA]=Ke}function zy(Ke,Ye){Ye[M0]=Ke}function sx(Ke){Ke[M0]=null}function k0(Ke){return!!Ke[M0]}function ig(Ke){var Ye=Ke[OA];if(Ye)return Ye;for(var ot=Ke.parentNode;ot;){if(Ye=ot[M0]||ot[OA],Ye){var ft=Ye.alternate;if(Ye.child!==null||ft!==null&&ft.child!==null)for(var pt=rx(Ke);pt!==null;){var ii=pt[OA];if(ii)return ii;pt=rx(pt)}return Ye}Ke=ot,ot=Ke.parentNode}return null}function Xd(Ke){var Ye=Ke[OA]||Ke[M0];return Ye&&(Ye.tag===lt||Ye.tag===ct||Ye.tag===si||Ye.tag===it)?Ye:null}function FA(Ke){if(Ke.tag===lt||Ke.tag===ct)return Ke.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function Vy(Ke){return Ke[s1]||null}function o1(Ke,Ye){Ke[s1]=Ye}function fw(Ke){var Ye=Ke[a1];return Ye===void 0&&(Ye=Ke[a1]=new Set),Ye}var ax={},ox=ee.ReactDebugCurrentFrame;function jy(Ke){if(Ke){var Ye=Ke._owner,ot=Du(Ke.type,Ke._source,Ye?Ye.type:null);ox.setExtraStackFrame(ot)}else ox.setExtraStackFrame(null)}function dc(Ke,Ye,ot,ft,pt){{var ii=Function.call.bind(Bi);for(var ui in Ke)if(ii(Ke,ui)){var di=void 0;try{if(typeof Ke[ui]!="function"){var Ai=Error((ft||"React class")+": "+ot+" type `"+ui+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof Ke[ui]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ai.name="Invariant Violation",Ai}di=Ke[ui](Ye,ui,ft,ot,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(wi){di=wi}di&&!(di instanceof Error)&&(jy(pt),be("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ft||"React class",ot,ui,typeof di),jy(null)),di instanceof Error&&!(di.message in ax)&&(ax[di.message]=!0,jy(pt),be("Failed %s type: %s",ot,di.message),jy(null))}}}var l1=[],qy;qy=[];var Kf=-1;function Zd(Ke){return{current:Ke}}function kl(Ke,Ye){if(Kf<0){be("Unexpected pop.");return}Ye!==qy[Kf]&&be("Unexpected Fiber popped."),Ke.current=l1[Kf],l1[Kf]=null,qy[Kf]=null,Kf--}function Ol(Ke,Ye,ot){Kf++,l1[Kf]=Ke.current,qy[Kf]=ot,Ke.current=Ye}var u1;u1={};var _u={};Object.freeze(_u);var Yf=Zd(_u),af=Zd(!1),c1=_u;function NA(Ke,Ye,ot){return ot&&of(Ye)?c1:Yf.current}function lx(Ke,Ye,ot){{var ft=Ke.stateNode;ft.__reactInternalMemoizedUnmaskedChildContext=Ye,ft.__reactInternalMemoizedMaskedChildContext=ot}}function $A(Ke,Ye){{var ot=Ke.type,ft=ot.contextTypes;if(!ft)return _u;var pt=Ke.stateNode;if(pt&&pt.__reactInternalMemoizedUnmaskedChildContext===Ye)return pt.__reactInternalMemoizedMaskedChildContext;var ii={};for(var ui in ft)ii[ui]=Ye[ui];{var di=aa(Ke)||"Unknown";dc(ft,ii,"context",di)}return pt&&lx(Ke,Ye,ii),ii}}function Ky(){return af.current}function of(Ke){{var Ye=Ke.childContextTypes;return Ye!=null}}function Yy(Ke){kl(af,Ke),kl(Yf,Ke)}function f1(Ke){kl(af,Ke),kl(Yf,Ke)}function ux(Ke,Ye,ot){{if(Yf.current!==_u)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Ol(Yf,Ye,Ke),Ol(af,ot,Ke)}}function cx(Ke,Ye,ot){{var ft=Ke.stateNode,pt=Ye.childContextTypes;if(typeof ft.getChildContext!="function"){{var ii=aa(Ke)||"Unknown";u1[ii]||(u1[ii]=!0,be("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",ii,ii))}return ot}var ui=ft.getChildContext();for(var di in ui)if(!(di in pt))throw new Error((aa(Ke)||"Unknown")+'.getChildContext(): key "'+di+'" is not defined in childContextTypes.');{var Ai=aa(Ke)||"Unknown";dc(pt,ui,"child context",Ai)}return ga({},ot,ui)}}function Wy(Ke){{var Ye=Ke.stateNode,ot=Ye&&Ye.__reactInternalMemoizedMergedChildContext||_u;return c1=Yf.current,Ol(Yf,ot,Ke),Ol(af,af.current,Ke),!0}}function fx(Ke,Ye,ot){{var ft=Ke.stateNode;if(!ft)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(ot){var pt=cx(Ke,Ye,c1);ft.__reactInternalMemoizedMergedChildContext=pt,kl(af,Ke),kl(Yf,Ke),Ol(Yf,pt,Ke),Ol(af,ot,Ke)}else kl(af,Ke),Ol(af,ot,Ke)}}function dw(Ke){{if(!Np(Ke)||Ke.tag!==Je)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var Ye=Ke;do{switch(Ye.tag){case it:return Ye.stateNode.context;case Je:{var ot=Ye.type;if(of(ot))return Ye.stateNode.__reactInternalMemoizedMergedChildContext;break}}Ye=Ye.return}while(Ye!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var Jd=0,Xy=1,Wf=null,d1=!1,h1=!1;function dx(Ke){Wf===null?Wf=[Ke]:Wf.push(Ke)}function hw(Ke){d1=!0,dx(Ke)}function hx(){d1&&eh()}function eh(){if(!h1&&Wf!==null){h1=!0;var Ke=0,Ye=uu();try{var ot=!0,ft=Wf;for(Do(nl);Ke<ft.length;Ke++){var pt=ft[Ke];do pt=pt(ot);while(pt!==null)}Wf=null,d1=!1}catch(ii){throw Wf!==null&&(Wf=Wf.slice(Ke+1)),Qg(Gg,eh),ii}finally{Do(Ye),h1=!1}}return null}var QA=[],UA=0,Zy=null,Jy=0,Qu=[],Uu=0,rg=null,Xf=1,Zf="";function gw(Ke){return ag(),(Ke.flags&kp)!==Ks}function Aw(Ke){return ag(),Jy}function pw(){var Ke=Zf,Ye=Xf,ot=Ye&~mw(Ye);return ot.toString(32)+Ke}function sg(Ke,Ye){ag(),QA[UA++]=Jy,QA[UA++]=Zy,Zy=Ke,Jy=Ye}function gx(Ke,Ye,ot){ag(),Qu[Uu++]=Xf,Qu[Uu++]=Zf,Qu[Uu++]=rg,rg=Ke;var ft=Xf,pt=Zf,ii=eE(ft)-1,ui=ft&~(1<<ii),di=ot+1,Ai=eE(Ye)+ii;if(Ai>30){var wi=ii-ii%5,Di=(1<<wi)-1,zi=(ui&Di).toString(32),Gi=ui>>wi,Zi=ii-wi,_r=eE(Ye)+Zi,es=di<<Zi,Rs=es|Gi,Ys=zi+pt;Xf=1<<_r|Rs,Zf=Ys}else{var Hs=di<<ii,Sa=Hs|ui,va=pt;Xf=1<<Ai|Sa,Zf=va}}function g1(Ke){ag();var Ye=Ke.return;if(Ye!==null){var ot=1,ft=0;sg(Ke,ot),gx(Ke,ot,ft)}}function eE(Ke){return 32-Kg(Ke)}function mw(Ke){return 1<<eE(Ke)-1}function A1(Ke){for(;Ke===Zy;)Zy=QA[--UA],QA[UA]=null,Jy=QA[--UA],QA[UA]=null;for(;Ke===rg;)rg=Qu[--Uu],Qu[Uu]=null,Zf=Qu[--Uu],Qu[Uu]=null,Xf=Qu[--Uu],Qu[Uu]=null}function yw(){return ag(),rg!==null?{id:Xf,overflow:Zf}:null}function Ew(Ke,Ye){ag(),Qu[Uu++]=Xf,Qu[Uu++]=Zf,Qu[Uu++]=rg,Xf=Ye.id,Zf=Ye.overflow,rg=Ke}function ag(){Al()||be("Expected to be hydrating. This is a bug in React. Please file an issue.")}var gl=null,Gu=null,hc=!1,og=!1,th=null;function vw(){hc&&be("We should not be hydrating here. This is a bug in React. Please file a bug.")}function Ax(){og=!0}function Cw(){return og}function Iw(Ke){var Ye=Ke.stateNode.containerInfo;return Gu=Q_(Ye),gl=Ke,hc=!0,th=null,og=!1,!0}function xw(Ke,Ye,ot){return Gu=U_(Ye),gl=Ke,hc=!0,th=null,og=!1,ot!==null&&Ew(Ke,ot),!0}function px(Ke,Ye){switch(Ke.tag){case it:{X_(Ke.stateNode.containerInfo,Ye);break}case lt:{var ot=(Ke.mode&pa)!==Xs;J_(Ke.type,Ke.memoizedProps,Ke.stateNode,Ye,ot);break}case si:{var ft=Ke.memoizedState;ft.dehydrated!==null&&Z_(ft.dehydrated,Ye);break}}}function mx(Ke,Ye){px(Ke,Ye);var ot=wB();ot.stateNode=Ye,ot.return=Ke;var ft=Ke.deletions;ft===null?(Ke.deletions=[ot],Ke.flags|=Ma):ft.push(ot)}function m1(Ke,Ye){{if(og)return;switch(Ke.tag){case it:{var ot=Ke.stateNode.containerInfo;switch(Ye.tag){case lt:var ft=Ye.type;Ye.pendingProps,ew(ot,ft);break;case ct:var pt=Ye.pendingProps;tw(ot,pt);break}break}case lt:{var ii=Ke.type,ui=Ke.memoizedProps,di=Ke.stateNode;switch(Ye.tag){case lt:{var Ai=Ye.type,wi=Ye.pendingProps,Di=(Ke.mode&pa)!==Xs;rw(ii,ui,di,Ai,wi,Di);break}case ct:{var zi=Ye.pendingProps,Gi=(Ke.mode&pa)!==Xs;sw(ii,ui,di,zi,Gi);break}}break}case si:{var Zi=Ke.memoizedState,_r=Zi.dehydrated;if(_r!==null)switch(Ye.tag){case lt:var es=Ye.type;Ye.pendingProps,nw(_r,es);break;case ct:var Rs=Ye.pendingProps;iw(_r,Rs);break}break}default:return}}}function yx(Ke,Ye){Ye.flags=Ye.flags&~ru|Ka,m1(Ke,Ye)}function Ex(Ke,Ye){switch(Ke.tag){case lt:{var ot=Ke.type;Ke.pendingProps;var ft=P_(Ye,ot);return ft!==null?(Ke.stateNode=ft,gl=Ke,Gu=$_(ft),!0):!1}case ct:{var pt=Ke.pendingProps,ii=k_(Ye,pt);return ii!==null?(Ke.stateNode=ii,gl=Ke,Gu=null,!0):!1}case si:{var ui=O_(Ye);if(ui!==null){var di={dehydrated:ui,treeContext:yw(),retryLane:Ml};Ke.memoizedState=di;var Ai=RB(ui);return Ai.return=Ke,Ke.child=Ai,gl=Ke,Gu=null,!0}return!1}default:return!1}}function y1(Ke){return(Ke.mode&pa)!==Xs&&(Ke.flags&ia)===Ks}function E1(Ke){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function v1(Ke){if(hc){var Ye=Gu;if(!Ye){y1(Ke)&&(m1(gl,Ke),E1()),yx(gl,Ke),hc=!1,gl=Ke;return}var ot=Ye;if(!Ex(Ke,Ye)){y1(Ke)&&(m1(gl,Ke),E1()),Ye=L0(ot);var ft=gl;if(!Ye||!Ex(Ke,Ye)){yx(gl,Ke),hc=!1,gl=Ke;return}mx(ft,ot)}}}function Sw(Ke,Ye,ot){var ft=Ke.stateNode,pt=!og,ii=G_(ft,Ke.type,Ke.memoizedProps,Ye,ot,Ke,pt);return Ke.updateQueue=ii,ii!==null}function Tw(Ke){var Ye=Ke.stateNode,ot=Ke.memoizedProps,ft=H_(Ye,ot,Ke);if(ft){var pt=gl;if(pt!==null)switch(pt.tag){case it:{var ii=pt.stateNode.containerInfo,ui=(pt.mode&pa)!==Xs;Y_(ii,Ye,ot,ui);break}case lt:{var di=pt.type,Ai=pt.memoizedProps,wi=pt.stateNode,Di=(pt.mode&pa)!==Xs;W_(di,Ai,wi,Ye,ot,Di);break}}}return ft}function bw(Ke){var Ye=Ke.memoizedState,ot=Ye!==null?Ye.dehydrated:null;if(!ot)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");z_(ot,Ke)}function _w(Ke){var Ye=Ke.memoizedState,ot=Ye!==null?Ye.dehydrated:null;if(!ot)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return V_(ot)}function vx(Ke){for(var Ye=Ke.return;Ye!==null&&Ye.tag!==lt&&Ye.tag!==it&&Ye.tag!==si;)Ye=Ye.return;gl=Ye}function tE(Ke){if(Ke!==gl)return!1;if(!hc)return vx(Ke),hc=!0,!1;if(Ke.tag!==it&&(Ke.tag!==lt||K_(Ke.type)&&!e1(Ke.type,Ke.memoizedProps))){var Ye=Gu;if(Ye)if(y1(Ke))Cx(Ke),E1();else for(;Ye;)mx(Ke,Ye),Ye=L0(Ye)}return vx(Ke),Ke.tag===si?Gu=_w(Ke):Gu=gl?L0(Ke.stateNode):null,!0}function ww(){return hc&&Gu!==null}function Cx(Ke){for(var Ye=Gu;Ye;)px(Ke,Ye),Ye=L0(Ye)}function GA(){gl=null,Gu=null,hc=!1,og=!1}function Ix(){th!==null&&(yT(th),th=null)}function Al(){return hc}function C1(Ke){th===null?th=[Ke]:th.push(Ke)}var Rw=ee.ReactCurrentBatchConfig,Bw=null;function Dw(){return Rw.transition}var gc={recordUnsafeLifecycleWarnings:function(Ke,Ye){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(Ke,Ye){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var Lw=function(Ke){for(var Ye=null,ot=Ke;ot!==null;)ot.mode&lo&&(Ye=ot),ot=ot.return;return Ye},lg=function(Ke){var Ye=[];return Ke.forEach(function(ot){Ye.push(ot)}),Ye.sort().join(", ")},O0=[],F0=[],N0=[],$0=[],Q0=[],U0=[],ug=new Set;gc.recordUnsafeLifecycleWarnings=function(Ke,Ye){ug.has(Ke.type)||(typeof Ye.componentWillMount=="function"&&Ye.componentWillMount.__suppressDeprecationWarning!==!0&&O0.push(Ke),Ke.mode&lo&&typeof Ye.UNSAFE_componentWillMount=="function"&&F0.push(Ke),typeof Ye.componentWillReceiveProps=="function"&&Ye.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&N0.push(Ke),Ke.mode&lo&&typeof Ye.UNSAFE_componentWillReceiveProps=="function"&&$0.push(Ke),typeof Ye.componentWillUpdate=="function"&&Ye.componentWillUpdate.__suppressDeprecationWarning!==!0&&Q0.push(Ke),Ke.mode&lo&&typeof Ye.UNSAFE_componentWillUpdate=="function"&&U0.push(Ke))},gc.flushPendingUnsafeLifecycleWarnings=function(){var Ke=new Set;O0.length>0&&(O0.forEach(function(Gi){Ke.add(aa(Gi)||"Component"),ug.add(Gi.type)}),O0=[]);var Ye=new Set;F0.length>0&&(F0.forEach(function(Gi){Ye.add(aa(Gi)||"Component"),ug.add(Gi.type)}),F0=[]);var ot=new Set;N0.length>0&&(N0.forEach(function(Gi){ot.add(aa(Gi)||"Component"),ug.add(Gi.type)}),N0=[]);var ft=new Set;$0.length>0&&($0.forEach(function(Gi){ft.add(aa(Gi)||"Component"),ug.add(Gi.type)}),$0=[]);var pt=new Set;Q0.length>0&&(Q0.forEach(function(Gi){pt.add(aa(Gi)||"Component"),ug.add(Gi.type)}),Q0=[]);var ii=new Set;if(U0.length>0&&(U0.forEach(function(Gi){ii.add(aa(Gi)||"Component"),ug.add(Gi.type)}),U0=[]),Ye.size>0){var ui=lg(Ye);be(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,ui)}if(ft.size>0){var di=lg(ft);be(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,di)}if(ii.size>0){var Ai=lg(ii);be(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,Ai)}if(Ke.size>0){var wi=lg(Ke);ve(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,wi)}if(ot.size>0){var Di=lg(ot);ve(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Di)}if(pt.size>0){var zi=lg(pt);ve(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,zi)}};var nE=new Map,xx=new Set;gc.recordLegacyContextWarning=function(Ke,Ye){var ot=Lw(Ke);if(ot===null){be("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!xx.has(Ke.type)){var ft=nE.get(ot);(Ke.type.contextTypes!=null||Ke.type.childContextTypes!=null||Ye!==null&&typeof Ye.getChildContext=="function")&&(ft===void 0&&(ft=[],nE.set(ot,ft)),ft.push(Ke))}},gc.flushLegacyContextWarning=function(){nE.forEach(function(Ke,Ye){if(Ke.length!==0){var ot=Ke[0],ft=new Set;Ke.forEach(function(ii){ft.add(aa(ii)||"Component"),xx.add(ii.type)});var pt=lg(ft);try{Pa(ot),be(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,pt)}finally{go()}}})},gc.discardPendingWarnings=function(){O0=[],F0=[],N0=[],$0=[],Q0=[],U0=[],nE=new Map}}function Ac(Ke,Ye){if(Ke&&Ke.defaultProps){var ot=ga({},Ye),ft=Ke.defaultProps;for(var pt in ft)ot[pt]===void 0&&(ot[pt]=ft[pt]);return ot}return Ye}var I1=Zd(null),x1;x1={};var iE=null,HA=null,S1=null,rE=!1;function sE(){iE=null,HA=null,S1=null,rE=!1}function Sx(){rE=!0}function Tx(){rE=!1}function bx(Ke,Ye,ot){Ol(I1,Ye._currentValue,Ke),Ye._currentValue=ot,Ye._currentRenderer!==void 0&&Ye._currentRenderer!==null&&Ye._currentRenderer!==x1&&be("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),Ye._currentRenderer=x1}function T1(Ke,Ye){var ot=I1.current;kl(I1,Ye),Ke._currentValue=ot}function b1(Ke,Ye,ot){for(var ft=Ke;ft!==null;){var pt=ft.alternate;if(Ff(ft.childLanes,Ye)?pt!==null&&!Ff(pt.childLanes,Ye)&&(pt.childLanes=da(pt.childLanes,Ye)):(ft.childLanes=da(ft.childLanes,Ye),pt!==null&&(pt.childLanes=da(pt.childLanes,Ye))),ft===ot)break;ft=ft.return}ft!==ot&&be("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function Mw(Ke,Ye,ot){Pw(Ke,Ye,ot)}function Pw(Ke,Ye,ot){var ft=Ke.child;for(ft!==null&&(ft.return=Ke);ft!==null;){var pt=void 0,ii=ft.dependencies;if(ii!==null){pt=ft.child;for(var ui=ii.firstContext;ui!==null;){if(ui.context===Ye){if(ft.tag===Je){var di=Bo(ot),Ai=Jf(Ha,di);Ai.tag=oE;var wi=ft.updateQueue;if(wi!==null){var Di=wi.shared,zi=Di.pending;zi===null?Ai.next=Ai:(Ai.next=zi.next,zi.next=Ai),Di.pending=Ai}}ft.lanes=da(ft.lanes,ot);var Gi=ft.alternate;Gi!==null&&(Gi.lanes=da(Gi.lanes,ot)),b1(ft.return,ot,Ke),ii.lanes=da(ii.lanes,ot);break}ui=ui.next}}else if(ft.tag===ei)pt=ft.type===Ke.type?null:ft.child;else if(ft.tag===pi){var Zi=ft.return;if(Zi===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");Zi.lanes=da(Zi.lanes,ot);var _r=Zi.alternate;_r!==null&&(_r.lanes=da(_r.lanes,ot)),b1(Zi,ot,Ke),pt=ft.sibling}else pt=ft.child;if(pt!==null)pt.return=ft;else for(pt=ft;pt!==null;){if(pt===Ke){pt=null;break}var es=pt.sibling;if(es!==null){es.return=pt.return,pt=es;break}pt=pt.return}ft=pt}}function zA(Ke,Ye){iE=Ke,HA=null,S1=null;var ot=Ke.dependencies;if(ot!==null){var ft=ot.firstContext;ft!==null&&(Pl(ot.lanes,Ye)&&tm(),ot.firstContext=null)}}function Go(Ke){rE&&be("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var Ye=Ke._currentValue;if(S1!==Ke){var ot={context:Ke,memoizedValue:Ye,next:null};if(HA===null){if(iE===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");HA=ot,iE.dependencies={lanes:ns,firstContext:ot}}else HA=HA.next=ot}return Ye}var cg=null;function _1(Ke){cg===null?cg=[Ke]:cg.push(Ke)}function kw(){if(cg!==null){for(var Ke=0;Ke<cg.length;Ke++){var Ye=cg[Ke],ot=Ye.interleaved;if(ot!==null){Ye.interleaved=null;var ft=ot.next,pt=Ye.pending;if(pt!==null){var ii=pt.next;pt.next=ft,ot.next=ii}Ye.pending=ot}}cg=null}}function _x(Ke,Ye,ot,ft){var pt=Ye.interleaved;return pt===null?(ot.next=ot,_1(Ye)):(ot.next=pt.next,pt.next=ot),Ye.interleaved=ot,aE(Ke,ft)}function Ow(Ke,Ye,ot,ft){var pt=Ye.interleaved;pt===null?(ot.next=ot,_1(Ye)):(ot.next=pt.next,pt.next=ot),Ye.interleaved=ot}function Fw(Ke,Ye,ot,ft){var pt=Ye.interleaved;return pt===null?(ot.next=ot,_1(Ye)):(ot.next=pt.next,pt.next=ot),Ye.interleaved=ot,aE(Ke,ft)}function gu(Ke,Ye){return aE(Ke,Ye)}var Nw=aE;function aE(Ke,Ye){Ke.lanes=da(Ke.lanes,Ye);var ot=Ke.alternate;ot!==null&&(ot.lanes=da(ot.lanes,Ye)),ot===null&&(Ke.flags&(Ka|ru))!==Ks&&BT(Ke);for(var ft=Ke,pt=Ke.return;pt!==null;)pt.childLanes=da(pt.childLanes,Ye),ot=pt.alternate,ot!==null?ot.childLanes=da(ot.childLanes,Ye):(pt.flags&(Ka|ru))!==Ks&&BT(Ke),ft=pt,pt=pt.return;if(ft.tag===it){var ii=ft.stateNode;return ii}else return null}var wx=0,Rx=1,oE=2,w1=3,lE=!1,R1,uE;R1=!1,uE=null;function B1(Ke){var Ye={baseState:Ke.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:ns},effects:null};Ke.updateQueue=Ye}function Bx(Ke,Ye){var ot=Ye.updateQueue,ft=Ke.updateQueue;if(ot===ft){var pt={baseState:ft.baseState,firstBaseUpdate:ft.firstBaseUpdate,lastBaseUpdate:ft.lastBaseUpdate,shared:ft.shared,effects:ft.effects};Ye.updateQueue=pt}}function Jf(Ke,Ye){var ot={eventTime:Ke,lane:Ye,tag:wx,payload:null,callback:null,next:null};return ot}function nh(Ke,Ye,ot){var ft=Ke.updateQueue;if(ft===null)return null;var pt=ft.shared;if(uE===pt&&!R1&&(be("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),R1=!0),Q2()){var ii=pt.pending;return ii===null?Ye.next=Ye:(Ye.next=ii.next,ii.next=Ye),pt.pending=Ye,Nw(Ke,ot)}else return Fw(Ke,pt,Ye,ot)}function cE(Ke,Ye,ot){var ft=Ye.updateQueue;if(ft!==null){var pt=ft.shared;if(Xp(ot)){var ii=pt.lanes;ii=Jp(ii,Ke.pendingLanes);var ui=da(ii,ot);pt.lanes=ui,Od(Ke,ui)}}}function D1(Ke,Ye){var ot=Ke.updateQueue,ft=Ke.alternate;if(ft!==null){var pt=ft.updateQueue;if(ot===pt){var ii=null,ui=null,di=ot.firstBaseUpdate;if(di!==null){var Ai=di;do{var wi={eventTime:Ai.eventTime,lane:Ai.lane,tag:Ai.tag,payload:Ai.payload,callback:Ai.callback,next:null};ui===null?ii=ui=wi:(ui.next=wi,ui=wi),Ai=Ai.next}while(Ai!==null);ui===null?ii=ui=Ye:(ui.next=Ye,ui=Ye)}else ii=ui=Ye;ot={baseState:pt.baseState,firstBaseUpdate:ii,lastBaseUpdate:ui,shared:pt.shared,effects:pt.effects},Ke.updateQueue=ot;return}}var Di=ot.lastBaseUpdate;Di===null?ot.firstBaseUpdate=Ye:Di.next=Ye,ot.lastBaseUpdate=Ye}function $w(Ke,Ye,ot,ft,pt,ii){switch(ot.tag){case Rx:{var ui=ot.payload;if(typeof ui=="function"){Sx();var di=ui.call(ii,ft,pt);{if(Ke.mode&lo){Ro(!0);try{ui.call(ii,ft,pt)}finally{Ro(!1)}}Tx()}return di}return ui}case w1:Ke.flags=Ke.flags&~Fo|ia;case wx:{var Ai=ot.payload,wi;if(typeof Ai=="function"){Sx(),wi=Ai.call(ii,ft,pt);{if(Ke.mode&lo){Ro(!0);try{Ai.call(ii,ft,pt)}finally{Ro(!1)}}Tx()}}else wi=Ai;return wi==null?ft:ga({},ft,wi)}case oE:return lE=!0,ft}return ft}function fE(Ke,Ye,ot,ft){var pt=Ke.updateQueue;lE=!1,uE=pt.shared;var ii=pt.firstBaseUpdate,ui=pt.lastBaseUpdate,di=pt.shared.pending;if(di!==null){pt.shared.pending=null;var Ai=di,wi=Ai.next;Ai.next=null,ui===null?ii=wi:ui.next=wi,ui=Ai;var Di=Ke.alternate;if(Di!==null){var zi=Di.updateQueue,Gi=zi.lastBaseUpdate;Gi!==ui&&(Gi===null?zi.firstBaseUpdate=wi:Gi.next=wi,zi.lastBaseUpdate=Ai)}}if(ii!==null){var Zi=pt.baseState,_r=ns,es=null,Rs=null,Ys=null,Hs=ii;do{var Sa=Hs.lane,va=Hs.eventTime;if(Ff(ft,Sa)){if(Ys!==null){var ts={eventTime:va,lane:Ia,tag:Hs.tag,payload:Hs.payload,callback:Hs.callback,next:null};Ys=Ys.next=ts}Zi=$w(Ke,pt,Hs,Zi,Ye,ot);var Yi=Hs.callback;if(Yi!==null&&Hs.lane!==Ia){Ke.flags|=Pu;var ds=pt.effects;ds===null?pt.effects=[Hs]:ds.push(Hs)}}else{var Ki={eventTime:va,lane:Sa,tag:Hs.tag,payload:Hs.payload,callback:Hs.callback,next:null};Ys===null?(Rs=Ys=Ki,es=Zi):Ys=Ys.next=Ki,_r=da(_r,Sa)}if(Hs=Hs.next,Hs===null){if(di=pt.shared.pending,di===null)break;var Bs=di,Ss=Bs.next;Bs.next=null,Hs=Ss,pt.lastBaseUpdate=Bs,pt.shared.pending=null}}while(!0);Ys===null&&(es=Zi),pt.baseState=es,pt.firstBaseUpdate=Rs,pt.lastBaseUpdate=Ys;var na=pt.shared.interleaved;if(na!==null){var la=na;do _r=da(_r,la.lane),la=la.next;while(la!==na)}else ii===null&&(pt.shared.lanes=ns);hm(_r),Ke.lanes=_r,Ke.memoizedState=Zi}uE=null}function Qw(Ke,Ye){if(typeof Ke!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+Ke));Ke.call(Ye)}function Dx(){lE=!1}function dE(){return lE}function Lx(Ke,Ye,ot){var ft=Ye.effects;if(Ye.effects=null,ft!==null)for(var pt=0;pt<ft.length;pt++){var ii=ft[pt],ui=ii.callback;ui!==null&&(ii.callback=null,Qw(ui,ot))}}var L1={},Mx=new ie.Component().refs,M1,P1,k1,O1,F1,Px,hE,N1,$1,Q1;{M1=new Set,P1=new Set,k1=new Set,O1=new Set,N1=new Set,F1=new Set,$1=new Set,Q1=new Set;var kx=new Set;hE=function(Ke,Ye){if(!(Ke===null||typeof Ke=="function")){var ot=Ye+"_"+Ke;kx.has(ot)||(kx.add(ot),be("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",Ye,Ke))}},Px=function(Ke,Ye){if(Ye===void 0){var ot=ba(Ke)||"Component";F1.has(ot)||(F1.add(ot),be("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",ot))}},Object.defineProperty(L1,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(L1)}function U1(Ke,Ye,ot,ft){var pt=Ke.memoizedState,ii=ot(ft,pt);{if(Ke.mode&lo){Ro(!0);try{ii=ot(ft,pt)}finally{Ro(!1)}}Px(Ye,ii)}var ui=ii==null?pt:ga({},pt,ii);if(Ke.memoizedState=ui,Ke.lanes===ns){var di=Ke.updateQueue;di.baseState=ui}}var G1={isMounted:Hl,enqueueSetState:function(Ke,Ye,ot){var ft=nu(Ke),pt=Yl(),ii=ch(ft),ui=Jf(pt,ii);ui.payload=Ye,ot!=null&&(hE(ot,"setState"),ui.callback=ot);var di=nh(ft,ui,ii);di!==null&&(el(di,ft,ii,pt),cE(di,ft,ii)),Wc(ft,ii)},enqueueReplaceState:function(Ke,Ye,ot){var ft=nu(Ke),pt=Yl(),ii=ch(ft),ui=Jf(pt,ii);ui.tag=Rx,ui.payload=Ye,ot!=null&&(hE(ot,"replaceState"),ui.callback=ot);var di=nh(ft,ui,ii);di!==null&&(el(di,ft,ii,pt),cE(di,ft,ii)),Wc(ft,ii)},enqueueForceUpdate:function(Ke,Ye){var ot=nu(Ke),ft=Yl(),pt=ch(ot),ii=Jf(ft,pt);ii.tag=oE,Ye!=null&&(hE(Ye,"forceUpdate"),ii.callback=Ye);var ui=nh(ot,ii,pt);ui!==null&&(el(ui,ot,pt,ft),cE(ui,ot,pt)),qp(ot,pt)}};function Ox(Ke,Ye,ot,ft,pt,ii,ui){var di=Ke.stateNode;if(typeof di.shouldComponentUpdate=="function"){var Ai=di.shouldComponentUpdate(ft,ii,ui);{if(Ke.mode&lo){Ro(!0);try{Ai=di.shouldComponentUpdate(ft,ii,ui)}finally{Ro(!1)}}Ai===void 0&&be("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",ba(Ye)||"Component")}return Ai}return Ye.prototype&&Ye.prototype.isPureReactComponent?!qs(ot,ft)||!qs(pt,ii):!0}function Uw(Ke,Ye,ot){var ft=Ke.stateNode;{var pt=ba(Ye)||"Component",ii=ft.render;ii||(Ye.prototype&&typeof Ye.prototype.render=="function"?be("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",pt):be("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",pt)),ft.getInitialState&&!ft.getInitialState.isReactClassApproved&&!ft.state&&be("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",pt),ft.getDefaultProps&&!ft.getDefaultProps.isReactClassApproved&&be("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",pt),ft.propTypes&&be("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",pt),ft.contextType&&be("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",pt),ft.contextTypes&&be("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",pt),Ye.contextType&&Ye.contextTypes&&!$1.has(Ye)&&($1.add(Ye),be("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",pt)),typeof ft.componentShouldUpdate=="function"&&be("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",pt),Ye.prototype&&Ye.prototype.isPureReactComponent&&typeof ft.shouldComponentUpdate<"u"&&be("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",ba(Ye)||"A pure component"),typeof ft.componentDidUnmount=="function"&&be("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",pt),typeof ft.componentDidReceiveProps=="function"&&be("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",pt),typeof ft.componentWillRecieveProps=="function"&&be("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",pt),typeof ft.UNSAFE_componentWillRecieveProps=="function"&&be("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",pt);var ui=ft.props!==ot;ft.props!==void 0&&ui&&be("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",pt,pt),ft.defaultProps&&be("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",pt,pt),typeof ft.getSnapshotBeforeUpdate=="function"&&typeof ft.componentDidUpdate!="function"&&!k1.has(Ye)&&(k1.add(Ye),be("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",ba(Ye))),typeof ft.getDerivedStateFromProps=="function"&&be("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",pt),typeof ft.getDerivedStateFromError=="function"&&be("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",pt),typeof Ye.getSnapshotBeforeUpdate=="function"&&be("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",pt);var di=ft.state;di&&(typeof di!="object"||Ca(di))&&be("%s.state: must be set to an object or null",pt),typeof ft.getChildContext=="function"&&typeof Ye.childContextTypes!="object"&&be("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",pt)}}function Fx(Ke,Ye){Ye.updater=G1,Ke.stateNode=Ye,bd(Ye,Ke),Ye._reactInternalInstance=L1}function Nx(Ke,Ye,ot){var ft=!1,pt=_u,ii=_u,ui=Ye.contextType;if("contextType"in Ye){var di=ui===null||ui!==void 0&&ui.$$typeof===hh&&ui._context===void 0;if(!di&&!Q1.has(Ye)){Q1.add(Ye);var Ai="";ui===void 0?Ai=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof ui!="object"?Ai=" However, it is set to a "+typeof ui+".":ui.$$typeof===od?Ai=" Did you accidentally pass the Context.Provider instead?":ui._context!==void 0?Ai=" Did you accidentally pass the Context.Consumer instead?":Ai=" However, it is set to an object with keys {"+Object.keys(ui).join(", ")+"}.",be("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",ba(Ye)||"Component",Ai)}}if(typeof ui=="object"&&ui!==null)ii=Go(ui);else{pt=NA(Ke,Ye,!0);var wi=Ye.contextTypes;ft=wi!=null,ii=ft?$A(Ke,pt):_u}var Di=new Ye(ot,ii);if(Ke.mode&lo){Ro(!0);try{Di=new Ye(ot,ii)}finally{Ro(!1)}}var zi=Ke.memoizedState=Di.state!==null&&Di.state!==void 0?Di.state:null;Fx(Ke,Di);{if(typeof Ye.getDerivedStateFromProps=="function"&&zi===null){var Gi=ba(Ye)||"Component";P1.has(Gi)||(P1.add(Gi),be("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",Gi,Di.state===null?"null":"undefined",Gi))}if(typeof Ye.getDerivedStateFromProps=="function"||typeof Di.getSnapshotBeforeUpdate=="function"){var Zi=null,_r=null,es=null;if(typeof Di.componentWillMount=="function"&&Di.componentWillMount.__suppressDeprecationWarning!==!0?Zi="componentWillMount":typeof Di.UNSAFE_componentWillMount=="function"&&(Zi="UNSAFE_componentWillMount"),typeof Di.componentWillReceiveProps=="function"&&Di.componentWillReceiveProps.__suppressDeprecationWarning!==!0?_r="componentWillReceiveProps":typeof Di.UNSAFE_componentWillReceiveProps=="function"&&(_r="UNSAFE_componentWillReceiveProps"),typeof Di.componentWillUpdate=="function"&&Di.componentWillUpdate.__suppressDeprecationWarning!==!0?es="componentWillUpdate":typeof Di.UNSAFE_componentWillUpdate=="function"&&(es="UNSAFE_componentWillUpdate"),Zi!==null||_r!==null||es!==null){var Rs=ba(Ye)||"Component",Ys=typeof Ye.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";O1.has(Rs)||(O1.add(Rs),be(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Rs,Ys,Zi!==null?`
  `+Zi:"",_r!==null?`
  `+_r:"",es!==null?`
  `+es:""))}}}return ft&&lx(Ke,pt,ii),Di}function Gw(Ke,Ye){var ot=Ye.state;typeof Ye.componentWillMount=="function"&&Ye.componentWillMount(),typeof Ye.UNSAFE_componentWillMount=="function"&&Ye.UNSAFE_componentWillMount(),ot!==Ye.state&&(be("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",aa(Ke)||"Component"),G1.enqueueReplaceState(Ye,Ye.state,null))}function $x(Ke,Ye,ot,ft){var pt=Ye.state;if(typeof Ye.componentWillReceiveProps=="function"&&Ye.componentWillReceiveProps(ot,ft),typeof Ye.UNSAFE_componentWillReceiveProps=="function"&&Ye.UNSAFE_componentWillReceiveProps(ot,ft),Ye.state!==pt){{var ii=aa(Ke)||"Component";M1.has(ii)||(M1.add(ii),be("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",ii))}G1.enqueueReplaceState(Ye,Ye.state,null)}}function H1(Ke,Ye,ot,ft){Uw(Ke,Ye,ot);var pt=Ke.stateNode;pt.props=ot,pt.state=Ke.memoizedState,pt.refs=Mx,B1(Ke);var ii=Ye.contextType;if(typeof ii=="object"&&ii!==null)pt.context=Go(ii);else{var ui=NA(Ke,Ye,!0);pt.context=$A(Ke,ui)}{if(pt.state===ot){var di=ba(Ye)||"Component";N1.has(di)||(N1.add(di),be("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",di))}Ke.mode&lo&&gc.recordLegacyContextWarning(Ke,pt),gc.recordUnsafeLifecycleWarnings(Ke,pt)}pt.state=Ke.memoizedState;var Ai=Ye.getDerivedStateFromProps;if(typeof Ai=="function"&&(U1(Ke,Ye,Ai,ot),pt.state=Ke.memoizedState),typeof Ye.getDerivedStateFromProps!="function"&&typeof pt.getSnapshotBeforeUpdate!="function"&&(typeof pt.UNSAFE_componentWillMount=="function"||typeof pt.componentWillMount=="function")&&(Gw(Ke,pt),fE(Ke,ot,pt,ft),pt.state=Ke.memoizedState),typeof pt.componentDidMount=="function"){var wi=fa;wi|=wl,(Ke.mode&ou)!==Xs&&(wi|=Rl),Ke.flags|=wi}}function Hw(Ke,Ye,ot,ft){var pt=Ke.stateNode,ii=Ke.memoizedProps;pt.props=ii;var ui=pt.context,di=Ye.contextType,Ai=_u;if(typeof di=="object"&&di!==null)Ai=Go(di);else{var wi=NA(Ke,Ye,!0);Ai=$A(Ke,wi)}var Di=Ye.getDerivedStateFromProps,zi=typeof Di=="function"||typeof pt.getSnapshotBeforeUpdate=="function";!zi&&(typeof pt.UNSAFE_componentWillReceiveProps=="function"||typeof pt.componentWillReceiveProps=="function")&&(ii!==ot||ui!==Ai)&&$x(Ke,pt,ot,Ai),Dx();var Gi=Ke.memoizedState,Zi=pt.state=Gi;if(fE(Ke,ot,pt,ft),Zi=Ke.memoizedState,ii===ot&&Gi===Zi&&!Ky()&&!dE()){if(typeof pt.componentDidMount=="function"){var _r=fa;_r|=wl,(Ke.mode&ou)!==Xs&&(_r|=Rl),Ke.flags|=_r}return!1}typeof Di=="function"&&(U1(Ke,Ye,Di,ot),Zi=Ke.memoizedState);var es=dE()||Ox(Ke,Ye,ii,ot,Gi,Zi,Ai);if(es){if(!zi&&(typeof pt.UNSAFE_componentWillMount=="function"||typeof pt.componentWillMount=="function")&&(typeof pt.componentWillMount=="function"&&pt.componentWillMount(),typeof pt.UNSAFE_componentWillMount=="function"&&pt.UNSAFE_componentWillMount()),typeof pt.componentDidMount=="function"){var Rs=fa;Rs|=wl,(Ke.mode&ou)!==Xs&&(Rs|=Rl),Ke.flags|=Rs}}else{if(typeof pt.componentDidMount=="function"){var Ys=fa;Ys|=wl,(Ke.mode&ou)!==Xs&&(Ys|=Rl),Ke.flags|=Ys}Ke.memoizedProps=ot,Ke.memoizedState=Zi}return pt.props=ot,pt.state=Zi,pt.context=Ai,es}function zw(Ke,Ye,ot,ft,pt){var ii=Ye.stateNode;Bx(Ke,Ye);var ui=Ye.memoizedProps,di=Ye.type===Ye.elementType?ui:Ac(Ye.type,ui);ii.props=di;var Ai=Ye.pendingProps,wi=ii.context,Di=ot.contextType,zi=_u;if(typeof Di=="object"&&Di!==null)zi=Go(Di);else{var Gi=NA(Ye,ot,!0);zi=$A(Ye,Gi)}var Zi=ot.getDerivedStateFromProps,_r=typeof Zi=="function"||typeof ii.getSnapshotBeforeUpdate=="function";!_r&&(typeof ii.UNSAFE_componentWillReceiveProps=="function"||typeof ii.componentWillReceiveProps=="function")&&(ui!==Ai||wi!==zi)&&$x(Ye,ii,ft,zi),Dx();var es=Ye.memoizedState,Rs=ii.state=es;if(fE(Ye,ft,ii,pt),Rs=Ye.memoizedState,ui===Ai&&es===Rs&&!Ky()&&!dE()&&!Pi)return typeof ii.componentDidUpdate=="function"&&(ui!==Ke.memoizedProps||es!==Ke.memoizedState)&&(Ye.flags|=fa),typeof ii.getSnapshotBeforeUpdate=="function"&&(ui!==Ke.memoizedProps||es!==Ke.memoizedState)&&(Ye.flags|=iu),!1;typeof Zi=="function"&&(U1(Ye,ot,Zi,ft),Rs=Ye.memoizedState);var Ys=dE()||Ox(Ye,ot,di,ft,es,Rs,zi)||Pi;return Ys?(!_r&&(typeof ii.UNSAFE_componentWillUpdate=="function"||typeof ii.componentWillUpdate=="function")&&(typeof ii.componentWillUpdate=="function"&&ii.componentWillUpdate(ft,Rs,zi),typeof ii.UNSAFE_componentWillUpdate=="function"&&ii.UNSAFE_componentWillUpdate(ft,Rs,zi)),typeof ii.componentDidUpdate=="function"&&(Ye.flags|=fa),typeof ii.getSnapshotBeforeUpdate=="function"&&(Ye.flags|=iu)):(typeof ii.componentDidUpdate=="function"&&(ui!==Ke.memoizedProps||es!==Ke.memoizedState)&&(Ye.flags|=fa),typeof ii.getSnapshotBeforeUpdate=="function"&&(ui!==Ke.memoizedProps||es!==Ke.memoizedState)&&(Ye.flags|=iu),Ye.memoizedProps=ft,Ye.memoizedState=Rs),ii.props=ft,ii.state=Rs,ii.context=zi,Ys}var z1,V1,j1,q1,K1,Qx=function(Ke,Ye){};z1=!1,V1=!1,j1={},q1={},K1={},Qx=function(Ke,Ye){if(!(Ke===null||typeof Ke!="object")&&!(!Ke._store||Ke._store.validated||Ke.key!=null)){if(typeof Ke._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");Ke._store.validated=!0;var ot=aa(Ye)||"Component";q1[ot]||(q1[ot]=!0,be('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function G0(Ke,Ye,ot){var ft=ot.ref;if(ft!==null&&typeof ft!="function"&&typeof ft!="object"){if((Ke.mode&lo||Ui)&&!(ot._owner&&ot._self&&ot._owner.stateNode!==ot._self)){var pt=aa(Ke)||"Component";j1[pt]||(be('A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ft),j1[pt]=!0)}if(ot._owner){var ii=ot._owner,ui;if(ii){var di=ii;if(di.tag!==Je)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");ui=di.stateNode}if(!ui)throw new Error("Missing owner for string ref "+ft+". This error is likely caused by a bug in React. Please file an issue.");var Ai=ui;zs(ft,"ref");var wi=""+ft;if(Ye!==null&&Ye.ref!==null&&typeof Ye.ref=="function"&&Ye.ref._stringRef===wi)return Ye.ref;var Di=function(zi){var Gi=Ai.refs;Gi===Mx&&(Gi=Ai.refs={}),zi===null?delete Gi[wi]:Gi[wi]=zi};return Di._stringRef=wi,Di}else{if(typeof ft!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!ot._owner)throw new Error("Element ref was specified as a string ("+ft+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return ft}function gE(Ke,Ye){var ot=Object.prototype.toString.call(Ye);throw new Error("Objects are not valid as a React child (found: "+(ot==="[object Object]"?"object with keys {"+Object.keys(Ye).join(", ")+"}":ot)+"). If you meant to render a collection of children, use an array instead.")}function AE(Ke){{var Ye=aa(Ke)||"Component";if(K1[Ye])return;K1[Ye]=!0,be("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function Ux(Ke){var Ye=Ke._payload,ot=Ke._init;return ot(Ye)}function Gx(Ke){function Ye(Ki,ts){if(Ke){var Yi=Ki.deletions;Yi===null?(Ki.deletions=[ts],Ki.flags|=Ma):Yi.push(ts)}}function ot(Ki,ts){if(!Ke)return null;for(var Yi=ts;Yi!==null;)Ye(Ki,Yi),Yi=Yi.sibling;return null}function ft(Ki,ts){for(var Yi=new Map,ds=ts;ds!==null;)ds.key!==null?Yi.set(ds.key,ds):Yi.set(ds.index,ds),ds=ds.sibling;return Yi}function pt(Ki,ts){var Yi=yg(Ki,ts);return Yi.index=0,Yi.sibling=null,Yi}function ii(Ki,ts,Yi){if(Ki.index=Yi,!Ke)return Ki.flags|=kp,ts;var ds=Ki.alternate;if(ds!==null){var Bs=ds.index;return Bs<ts?(Ki.flags|=Ka,ts):Bs}else return Ki.flags|=Ka,ts}function ui(Ki){return Ke&&Ki.alternate===null&&(Ki.flags|=Ka),Ki}function di(Ki,ts,Yi,ds){if(ts===null||ts.tag!==ct){var Bs=CI(Yi,Ki.mode,ds);return Bs.return=Ki,Bs}else{var Ss=pt(ts,Yi);return Ss.return=Ki,Ss}}function Ai(Ki,ts,Yi,ds){var Bs=Yi.type;if(Bs===Ql)return Di(Ki,ts,Yi.props.children,ds,Yi.key);if(ts!==null&&(ts.elementType===Bs||PT(ts,Yi)||typeof Bs=="object"&&Bs!==null&&Bs.$$typeof===Ho&&Ux(Bs)===ts.type)){var Ss=pt(ts,Yi.props);return Ss.ref=G0(Ki,ts,Yi),Ss.return=Ki,Ss._debugSource=Yi._source,Ss._debugOwner=Yi._owner,Ss}var na=vI(Yi,Ki.mode,ds);return na.ref=G0(Ki,ts,Yi),na.return=Ki,na}function wi(Ki,ts,Yi,ds){if(ts===null||ts.tag!==st||ts.stateNode.containerInfo!==Yi.containerInfo||ts.stateNode.implementation!==Yi.implementation){var Bs=II(Yi,Ki.mode,ds);return Bs.return=Ki,Bs}else{var Ss=pt(ts,Yi.children||[]);return Ss.return=Ki,Ss}}function Di(Ki,ts,Yi,ds,Bs){if(ts===null||ts.tag!==gt){var Ss=dh(Yi,Ki.mode,ds,Bs);return Ss.return=Ki,Ss}else{var na=pt(ts,Yi);return na.return=Ki,na}}function zi(Ki,ts,Yi){if(typeof ts=="string"&&ts!==""||typeof ts=="number"){var ds=CI(""+ts,Ki.mode,Yi);return ds.return=Ki,ds}if(typeof ts=="object"&&ts!==null){switch(ts.$$typeof){case yo:{var Bs=vI(ts,Ki.mode,Yi);return Bs.ref=G0(Ki,null,ts),Bs.return=Ki,Bs}case no:{var Ss=II(ts,Ki.mode,Yi);return Ss.return=Ki,Ss}case Ho:{var na=ts._payload,la=ts._init;return zi(Ki,la(na),Yi)}}if(Ca(ts)||yu(ts)){var $a=dh(ts,Ki.mode,Yi,null);return $a.return=Ki,$a}gE(Ki,ts)}return typeof ts=="function"&&AE(Ki),null}function Gi(Ki,ts,Yi,ds){var Bs=ts!==null?ts.key:null;if(typeof Yi=="string"&&Yi!==""||typeof Yi=="number")return Bs!==null?null:di(Ki,ts,""+Yi,ds);if(typeof Yi=="object"&&Yi!==null){switch(Yi.$$typeof){case yo:return Yi.key===Bs?Ai(Ki,ts,Yi,ds):null;case no:return Yi.key===Bs?wi(Ki,ts,Yi,ds):null;case Ho:{var Ss=Yi._payload,na=Yi._init;return Gi(Ki,ts,na(Ss),ds)}}if(Ca(Yi)||yu(Yi))return Bs!==null?null:Di(Ki,ts,Yi,ds,null);gE(Ki,Yi)}return typeof Yi=="function"&&AE(Ki),null}function Zi(Ki,ts,Yi,ds,Bs){if(typeof ds=="string"&&ds!==""||typeof ds=="number"){var Ss=Ki.get(Yi)||null;return di(ts,Ss,""+ds,Bs)}if(typeof ds=="object"&&ds!==null){switch(ds.$$typeof){case yo:{var na=Ki.get(ds.key===null?Yi:ds.key)||null;return Ai(ts,na,ds,Bs)}case no:{var la=Ki.get(ds.key===null?Yi:ds.key)||null;return wi(ts,la,ds,Bs)}case Ho:var $a=ds._payload,Da=ds._init;return Zi(Ki,ts,Yi,Da($a),Bs)}if(Ca(ds)||yu(ds)){var Po=Ki.get(Yi)||null;return Di(ts,Po,ds,Bs,null)}gE(ts,ds)}return typeof ds=="function"&&AE(ts),null}function _r(Ki,ts,Yi){{if(typeof Ki!="object"||Ki===null)return ts;switch(Ki.$$typeof){case yo:case no:Qx(Ki,Yi);var ds=Ki.key;if(typeof ds!="string")break;if(ts===null){ts=new Set,ts.add(ds);break}if(!ts.has(ds)){ts.add(ds);break}be("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",ds);break;case Ho:var Bs=Ki._payload,Ss=Ki._init;_r(Ss(Bs),ts,Yi);break}}return ts}function es(Ki,ts,Yi,ds){for(var Bs=null,Ss=0;Ss<Yi.length;Ss++){var na=Yi[Ss];Bs=_r(na,Bs,Ki)}for(var la=null,$a=null,Da=ts,Po=0,La=0,_o=null;Da!==null&&La<Yi.length;La++){Da.index>La?(_o=Da,Da=null):_o=Da.sibling;var Nl=Gi(Ki,Da,Yi[La],ds);if(Nl===null){Da===null&&(Da=_o);break}Ke&&Da&&Nl.alternate===null&&Ye(Ki,Da),Po=ii(Nl,Po,La),$a===null?la=Nl:$a.sibling=Nl,$a=Nl,Da=_o}if(La===Yi.length){if(ot(Ki,Da),Al()){var Il=La;sg(Ki,Il)}return la}if(Da===null){for(;La<Yi.length;La++){var Ru=zi(Ki,Yi[La],ds);Ru!==null&&(Po=ii(Ru,Po,La),$a===null?la=Ru:$a.sibling=Ru,$a=Ru)}if(Al()){var Wl=La;sg(Ki,Wl)}return la}for(var Xl=ft(Ki,Da);La<Yi.length;La++){var $l=Zi(Xl,Ki,La,Yi[La],ds);$l!==null&&(Ke&&$l.alternate!==null&&Xl.delete($l.key===null?La:$l.key),Po=ii($l,Po,La),$a===null?la=$l:$a.sibling=$l,$a=$l)}if(Ke&&Xl.forEach(function(op){return Ye(Ki,op)}),Al()){var ad=La;sg(Ki,ad)}return la}function Rs(Ki,ts,Yi,ds){var Bs=yu(Yi);if(typeof Bs!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&Yi[Symbol.toStringTag]==="Generator"&&(V1||be("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),V1=!0),Yi.entries===Bs&&(z1||be("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),z1=!0);var Ss=Bs.call(Yi);if(Ss)for(var na=null,la=Ss.next();!la.done;la=Ss.next()){var $a=la.value;na=_r($a,na,Ki)}}var Da=Bs.call(Yi);if(Da==null)throw new Error("An iterable object provided no iterator.");for(var Po=null,La=null,_o=ts,Nl=0,Il=0,Ru=null,Wl=Da.next();_o!==null&&!Wl.done;Il++,Wl=Da.next()){_o.index>Il?(Ru=_o,_o=null):Ru=_o.sibling;var Xl=Gi(Ki,_o,Wl.value,ds);if(Xl===null){_o===null&&(_o=Ru);break}Ke&&_o&&Xl.alternate===null&&Ye(Ki,_o),Nl=ii(Xl,Nl,Il),La===null?Po=Xl:La.sibling=Xl,La=Xl,_o=Ru}if(Wl.done){if(ot(Ki,_o),Al()){var $l=Il;sg(Ki,$l)}return Po}if(_o===null){for(;!Wl.done;Il++,Wl=Da.next()){var ad=zi(Ki,Wl.value,ds);ad!==null&&(Nl=ii(ad,Nl,Il),La===null?Po=ad:La.sibling=ad,La=ad)}if(Al()){var op=Il;sg(Ki,op)}return Po}for(var ym=ft(Ki,_o);!Wl.done;Il++,Wl=Da.next()){var Af=Zi(ym,Ki,Il,Wl.value,ds);Af!==null&&(Ke&&Af.alternate!==null&&ym.delete(Af.key===null?Il:Af.key),Nl=ii(Af,Nl,Il),La===null?Po=Af:La.sibling=Af,La=Af)}if(Ke&&ym.forEach(function(aD){return Ye(Ki,aD)}),Al()){var sD=Il;sg(Ki,sD)}return Po}function Ys(Ki,ts,Yi,ds){if(ts!==null&&ts.tag===ct){ot(Ki,ts.sibling);var Bs=pt(ts,Yi);return Bs.return=Ki,Bs}ot(Ki,ts);var Ss=CI(Yi,Ki.mode,ds);return Ss.return=Ki,Ss}function Hs(Ki,ts,Yi,ds){for(var Bs=Yi.key,Ss=ts;Ss!==null;){if(Ss.key===Bs){var na=Yi.type;if(na===Ql){if(Ss.tag===gt){ot(Ki,Ss.sibling);var la=pt(Ss,Yi.props.children);return la.return=Ki,la._debugSource=Yi._source,la._debugOwner=Yi._owner,la}}else if(Ss.elementType===na||PT(Ss,Yi)||typeof na=="object"&&na!==null&&na.$$typeof===Ho&&Ux(na)===Ss.type){ot(Ki,Ss.sibling);var $a=pt(Ss,Yi.props);return $a.ref=G0(Ki,Ss,Yi),$a.return=Ki,$a._debugSource=Yi._source,$a._debugOwner=Yi._owner,$a}ot(Ki,Ss);break}else Ye(Ki,Ss);Ss=Ss.sibling}if(Yi.type===Ql){var Da=dh(Yi.props.children,Ki.mode,ds,Yi.key);return Da.return=Ki,Da}else{var Po=vI(Yi,Ki.mode,ds);return Po.ref=G0(Ki,ts,Yi),Po.return=Ki,Po}}function Sa(Ki,ts,Yi,ds){for(var Bs=Yi.key,Ss=ts;Ss!==null;){if(Ss.key===Bs)if(Ss.tag===st&&Ss.stateNode.containerInfo===Yi.containerInfo&&Ss.stateNode.implementation===Yi.implementation){ot(Ki,Ss.sibling);var na=pt(Ss,Yi.children||[]);return na.return=Ki,na}else{ot(Ki,Ss);break}else Ye(Ki,Ss);Ss=Ss.sibling}var la=II(Yi,Ki.mode,ds);return la.return=Ki,la}function va(Ki,ts,Yi,ds){var Bs=typeof Yi=="object"&&Yi!==null&&Yi.type===Ql&&Yi.key===null;if(Bs&&(Yi=Yi.props.children),typeof Yi=="object"&&Yi!==null){switch(Yi.$$typeof){case yo:return ui(Hs(Ki,ts,Yi,ds));case no:return ui(Sa(Ki,ts,Yi,ds));case Ho:var Ss=Yi._payload,na=Yi._init;return va(Ki,ts,na(Ss),ds)}if(Ca(Yi))return es(Ki,ts,Yi,ds);if(yu(Yi))return Rs(Ki,ts,Yi,ds);gE(Ki,Yi)}return typeof Yi=="string"&&Yi!==""||typeof Yi=="number"?ui(Ys(Ki,ts,""+Yi,ds)):(typeof Yi=="function"&&AE(Ki),ot(Ki,ts))}return va}var VA=Gx(!0),Hx=Gx(!1);function Vw(Ke,Ye){if(Ke!==null&&Ye.child!==Ke.child)throw new Error("Resuming work not yet implemented.");if(Ye.child!==null){var ot=Ye.child,ft=yg(ot,ot.pendingProps);for(Ye.child=ft,ft.return=Ye;ot.sibling!==null;)ot=ot.sibling,ft=ft.sibling=yg(ot,ot.pendingProps),ft.return=Ye;ft.sibling=null}}function jw(Ke,Ye){for(var ot=Ke.child;ot!==null;)xB(ot,Ye),ot=ot.sibling}var H0={},ih=Zd(H0),z0=Zd(H0),pE=Zd(H0);function mE(Ke){if(Ke===H0)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return Ke}function zx(){var Ke=mE(pE.current);return Ke}function Y1(Ke,Ye){Ol(pE,Ye,Ke),Ol(z0,Ke,Ke),Ol(ih,H0,Ke);var ot=a_(Ye);kl(ih,Ke),Ol(ih,ot,Ke)}function jA(Ke){kl(ih,Ke),kl(z0,Ke),kl(pE,Ke)}function W1(){var Ke=mE(ih.current);return Ke}function Vx(Ke){mE(pE.current);var Ye=mE(ih.current),ot=o_(Ye,Ke.type);Ye!==ot&&(Ol(z0,Ke,Ke),Ol(ih,ot,Ke))}function X1(Ke){z0.current===Ke&&(kl(ih,Ke),kl(z0,Ke))}var qw=0,jx=1,qx=1,V0=2,pc=Zd(qw);function Z1(Ke,Ye){return(Ke&Ye)!==0}function qA(Ke){return Ke&jx}function J1(Ke,Ye){return Ke&jx|Ye}function Kw(Ke,Ye){return Ke|Ye}function rh(Ke,Ye){Ol(pc,Ye,Ke)}function KA(Ke){kl(pc,Ke)}function Yw(Ke,Ye){var ot=Ke.memoizedState;return ot!==null?ot.dehydrated!==null:(Ke.memoizedProps,!0)}function yE(Ke){for(var Ye=Ke;Ye!==null;){if(Ye.tag===si){var ot=Ye.memoizedState;if(ot!==null){var ft=ot.dehydrated;if(ft===null||ix(ft)||r1(ft))return Ye}}else if(Ye.tag===gi&&Ye.memoizedProps.revealOrder!==void 0){var pt=(Ye.flags&ia)!==Ks;if(pt)return Ye}else if(Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===Ke)return null;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===Ke)return null;Ye=Ye.return}Ye.sibling.return=Ye.return,Ye=Ye.sibling}return null}var Au=0,qo=1,lf=2,Ko=4,pl=8,eC=[];function tC(){for(var Ke=0;Ke<eC.length;Ke++){var Ye=eC[Ke];Ye._workInProgressVersionPrimary=null}eC.length=0}function Ww(Ke,Ye){var ot=Ye._getVersion,ft=ot(Ye._source);Ke.mutableSourceEagerHydrationData==null?Ke.mutableSourceEagerHydrationData=[Ye,ft]:Ke.mutableSourceEagerHydrationData.push(Ye,ft)}var bs=ee.ReactCurrentDispatcher,j0=ee.ReactCurrentBatchConfig,nC,YA;nC=new Set;var fg=ns,Na=null,Yo=null,Wo=null,EE=!1,q0=!1,K0=0,Xw=0,Zw=25,ss=null,Hu=null,sh=-1,iC=!1;function Oa(){{var Ke=ss;Hu===null?Hu=[Ke]:Hu.push(Ke)}}function Es(){{var Ke=ss;Hu!==null&&(sh++,Hu[sh]!==Ke&&Jw(Ke))}}function WA(Ke){Ke!=null&&!Ca(Ke)&&be("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",ss,typeof Ke)}function Jw(Ke){{var Ye=aa(Na);if(!nC.has(Ye)&&(nC.add(Ye),Hu!==null)){for(var ot="",ft=30,pt=0;pt<=sh;pt++){for(var ii=Hu[pt],ui=pt===sh?Ke:ii,di=pt+1+". "+ii;di.length<ft;)di+=" ";di+=ui+`
`,ot+=di}be(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,Ye,ot)}}}function Fl(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function rC(Ke,Ye){if(iC)return!1;if(Ye===null)return be("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",ss),!1;Ke.length!==Ye.length&&be(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,ss,"["+Ye.join(", ")+"]","["+Ke.join(", ")+"]");for(var ot=0;ot<Ye.length&&ot<Ke.length;ot++)if(!Ms(Ke[ot],Ye[ot]))return!1;return!0}function XA(Ke,Ye,ot,ft,pt,ii){fg=ii,Na=Ye,Hu=Ke!==null?Ke._debugHookTypes:null,sh=-1,iC=Ke!==null&&Ke.type!==Ye.type,Ye.memoizedState=null,Ye.updateQueue=null,Ye.lanes=ns,Ke!==null&&Ke.memoizedState!==null?bs.current=AS:Hu!==null?bs.current=gS:bs.current=hS;var ui=ot(ft,pt);if(q0){var di=0;do{if(q0=!1,K0=0,di>=Zw)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");di+=1,iC=!1,Yo=null,Wo=null,Ye.updateQueue=null,sh=-1,bs.current=pS,ui=ot(ft,pt)}while(q0)}bs.current=LE,Ye._debugHookTypes=Hu;var Ai=Yo!==null&&Yo.next!==null;if(fg=ns,Na=null,Yo=null,Wo=null,ss=null,Hu=null,sh=-1,Ke!==null&&(Ke.flags&zo)!==(Ye.flags&zo)&&(Ke.mode&pa)!==Xs&&be("Internal React error: Expected static flag was missing. Please notify the React team."),EE=!1,Ai)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return ui}function ZA(){var Ke=K0!==0;return K0=0,Ke}function Kx(Ke,Ye,ot){Ye.updateQueue=Ke.updateQueue,(Ye.mode&ou)!==Xs?Ye.flags&=~(_f|Rl|eo|fa):Ye.flags&=~(eo|fa),Ke.lanes=kd(Ke.lanes,ot)}function Yx(){if(bs.current=LE,EE){for(var Ke=Na.memoizedState;Ke!==null;){var Ye=Ke.queue;Ye!==null&&(Ye.pending=null),Ke=Ke.next}EE=!1}fg=ns,Na=null,Yo=null,Wo=null,Hu=null,sh=-1,ss=null,lS=!1,q0=!1,K0=0}function uf(){var Ke={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wo===null?Na.memoizedState=Wo=Ke:Wo=Wo.next=Ke,Wo}function zu(){var Ke;if(Yo===null){var Ye=Na.alternate;Ye!==null?Ke=Ye.memoizedState:Ke=null}else Ke=Yo.next;var ot;if(Wo===null?ot=Na.memoizedState:ot=Wo.next,ot!==null)Wo=ot,ot=Wo.next,Yo=Ke;else{if(Ke===null)throw new Error("Rendered more hooks than during the previous render.");Yo=Ke;var ft={memoizedState:Yo.memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null};Wo===null?Na.memoizedState=Wo=ft:Wo=Wo.next=ft}return Wo}function Wx(){return{lastEffect:null,stores:null}}function sC(Ke,Ye){return typeof Ye=="function"?Ye(Ke):Ye}function aC(Ke,Ye,ot){var ft=uf(),pt;ot!==void 0?pt=ot(Ye):pt=Ye,ft.memoizedState=ft.baseState=pt;var ii={pending:null,interleaved:null,lanes:ns,dispatch:null,lastRenderedReducer:Ke,lastRenderedState:pt};ft.queue=ii;var ui=ii.dispatch=iR.bind(null,Na,ii);return[ft.memoizedState,ui]}function oC(Ke,Ye,ot){var ft=zu(),pt=ft.queue;if(pt===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");pt.lastRenderedReducer=Ke;var ii=Yo,ui=ii.baseQueue,di=pt.pending;if(di!==null){if(ui!==null){var Ai=ui.next,wi=di.next;ui.next=wi,di.next=Ai}ii.baseQueue!==ui&&be("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),ii.baseQueue=ui=di,pt.pending=null}if(ui!==null){var Di=ui.next,zi=ii.baseState,Gi=null,Zi=null,_r=null,es=Di;do{var Rs=es.lane;if(Ff(fg,Rs)){if(_r!==null){var Hs={lane:Ia,action:es.action,hasEagerState:es.hasEagerState,eagerState:es.eagerState,next:null};_r=_r.next=Hs}if(es.hasEagerState)zi=es.eagerState;else{var Sa=es.action;zi=Ke(zi,Sa)}}else{var Ys={lane:Rs,action:es.action,hasEagerState:es.hasEagerState,eagerState:es.eagerState,next:null};_r===null?(Zi=_r=Ys,Gi=zi):_r=_r.next=Ys,Na.lanes=da(Na.lanes,Rs),hm(Rs)}es=es.next}while(es!==null&&es!==Di);_r===null?Gi=zi:_r.next=Zi,Ms(zi,ft.memoizedState)||tm(),ft.memoizedState=zi,ft.baseState=Gi,ft.baseQueue=_r,pt.lastRenderedState=zi}var va=pt.interleaved;if(va!==null){var Ki=va;do{var ts=Ki.lane;Na.lanes=da(Na.lanes,ts),hm(ts),Ki=Ki.next}while(Ki!==va)}else ui===null&&(pt.lanes=ns);var Yi=pt.dispatch;return[ft.memoizedState,Yi]}function lC(Ke,Ye,ot){var ft=zu(),pt=ft.queue;if(pt===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");pt.lastRenderedReducer=Ke;var ii=pt.dispatch,ui=pt.pending,di=ft.memoizedState;if(ui!==null){pt.pending=null;var Ai=ui.next,wi=Ai;do{var Di=wi.action;di=Ke(di,Di),wi=wi.next}while(wi!==Ai);Ms(di,ft.memoizedState)||tm(),ft.memoizedState=di,ft.baseQueue===null&&(ft.baseState=di),pt.lastRenderedState=di}return[di,ii]}function cD(Ke,Ye,ot){}function fD(Ke,Ye,ot){}function uC(Ke,Ye,ot){var ft=Na,pt=uf(),ii,ui=Al();if(ui){if(ot===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");ii=ot(),YA||ii!==ot()&&(be("The result of getServerSnapshot should be cached to avoid an infinite loop"),YA=!0)}else{if(ii=Ye(),!YA){var di=Ye();Ms(ii,di)||(be("The result of getSnapshot should be cached to avoid an infinite loop"),YA=!0)}var Ai=WE();if(Ai===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Gh(Ai,fg)||Xx(ft,Ye,ii)}pt.memoizedState=ii;var wi={value:ii,getSnapshot:Ye};return pt.queue=wi,SE(Jx.bind(null,ft,wi,Ke),[Ke]),ft.flags|=eo,Y0(qo|pl,Zx.bind(null,ft,wi,ii,Ye),void 0,null),ii}function vE(Ke,Ye,ot){var ft=Na,pt=zu(),ii=Ye();if(!YA){var ui=Ye();Ms(ii,ui)||(be("The result of getSnapshot should be cached to avoid an infinite loop"),YA=!0)}var di=pt.memoizedState,Ai=!Ms(di,ii);Ai&&(pt.memoizedState=ii,tm());var wi=pt.queue;if(X0(Jx.bind(null,ft,wi,Ke),[Ke]),wi.getSnapshot!==Ye||Ai||Wo!==null&&Wo.memoizedState.tag&qo){ft.flags|=eo,Y0(qo|pl,Zx.bind(null,ft,wi,ii,Ye),void 0,null);var Di=WE();if(Di===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Gh(Di,fg)||Xx(ft,Ye,ii)}return ii}function Xx(Ke,Ye,ot){Ke.flags|=Mh;var ft={getSnapshot:Ye,value:ot},pt=Na.updateQueue;if(pt===null)pt=Wx(),Na.updateQueue=pt,pt.stores=[ft];else{var ii=pt.stores;ii===null?pt.stores=[ft]:ii.push(ft)}}function Zx(Ke,Ye,ot,ft){Ye.value=ot,Ye.getSnapshot=ft,eS(Ye)&&tS(Ke)}function Jx(Ke,Ye,ot){var ft=function(){eS(Ye)&&tS(Ke)};return ot(ft)}function eS(Ke){var Ye=Ke.getSnapshot,ot=Ke.value;try{var ft=Ye();return!Ms(ot,ft)}catch{return!0}}function tS(Ke){var Ye=gu(Ke,ta);Ye!==null&&el(Ye,Ke,ta,Ha)}function CE(Ke){var Ye=uf();typeof Ke=="function"&&(Ke=Ke()),Ye.memoizedState=Ye.baseState=Ke;var ot={pending:null,interleaved:null,lanes:ns,dispatch:null,lastRenderedReducer:sC,lastRenderedState:Ke};Ye.queue=ot;var ft=ot.dispatch=rR.bind(null,Na,ot);return[Ye.memoizedState,ft]}function cC(Ke){return oC(sC)}function fC(Ke){return lC(sC)}function Y0(Ke,Ye,ot,ft){var pt={tag:Ke,create:Ye,destroy:ot,deps:ft,next:null},ii=Na.updateQueue;if(ii===null)ii=Wx(),Na.updateQueue=ii,ii.lastEffect=pt.next=pt;else{var ui=ii.lastEffect;if(ui===null)ii.lastEffect=pt.next=pt;else{var di=ui.next;ui.next=pt,pt.next=di,ii.lastEffect=pt}}return pt}function dC(Ke){var Ye=uf();{var ot={current:Ke};return Ye.memoizedState=ot,ot}}function IE(Ke){var Ye=zu();return Ye.memoizedState}function W0(Ke,Ye,ot,ft){var pt=uf(),ii=ft===void 0?null:ft;Na.flags|=Ke,pt.memoizedState=Y0(qo|Ye,ot,void 0,ii)}function xE(Ke,Ye,ot,ft){var pt=zu(),ii=ft===void 0?null:ft,ui=void 0;if(Yo!==null){var di=Yo.memoizedState;if(ui=di.destroy,ii!==null){var Ai=di.deps;if(rC(ii,Ai)){pt.memoizedState=Y0(Ye,ot,ui,ii);return}}}Na.flags|=Ke,pt.memoizedState=Y0(qo|Ye,ot,ui,ii)}function SE(Ke,Ye){return(Na.mode&ou)!==Xs?W0(_f|eo|zc,pl,Ke,Ye):W0(eo|zc,pl,Ke,Ye)}function X0(Ke,Ye){return xE(eo,pl,Ke,Ye)}function hC(Ke,Ye){return W0(fa,lf,Ke,Ye)}function TE(Ke,Ye){return xE(fa,lf,Ke,Ye)}function gC(Ke,Ye){var ot=fa;return ot|=wl,(Na.mode&ou)!==Xs&&(ot|=Rl),W0(ot,Ko,Ke,Ye)}function bE(Ke,Ye){return xE(fa,Ko,Ke,Ye)}function nS(Ke,Ye){if(typeof Ye=="function"){var ot=Ye,ft=Ke();return ot(ft),function(){ot(null)}}else if(Ye!=null){var pt=Ye;pt.hasOwnProperty("current")||be("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(pt).join(", ")+"}");var ii=Ke();return pt.current=ii,function(){pt.current=null}}}function AC(Ke,Ye,ot){typeof Ye!="function"&&be("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",Ye!==null?typeof Ye:"null");var ft=ot!=null?ot.concat([Ke]):null,pt=fa;return pt|=wl,(Na.mode&ou)!==Xs&&(pt|=Rl),W0(pt,Ko,nS.bind(null,Ye,Ke),ft)}function _E(Ke,Ye,ot){typeof Ye!="function"&&be("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",Ye!==null?typeof Ye:"null");var ft=ot!=null?ot.concat([Ke]):null;return xE(fa,Ko,nS.bind(null,Ye,Ke),ft)}function eR(Ke,Ye){}var wE=eR;function pC(Ke,Ye){var ot=uf(),ft=Ye===void 0?null:Ye;return ot.memoizedState=[Ke,ft],Ke}function RE(Ke,Ye){var ot=zu(),ft=Ye===void 0?null:Ye,pt=ot.memoizedState;if(pt!==null&&ft!==null){var ii=pt[1];if(rC(ft,ii))return pt[0]}return ot.memoizedState=[Ke,ft],Ke}function mC(Ke,Ye){var ot=uf(),ft=Ye===void 0?null:Ye,pt=Ke();return ot.memoizedState=[pt,ft],pt}function BE(Ke,Ye){var ot=zu(),ft=Ye===void 0?null:Ye,pt=ot.memoizedState;if(pt!==null&&ft!==null){var ii=pt[1];if(rC(ft,ii))return pt[0]}var ui=Ke();return ot.memoizedState=[ui,ft],ui}function yC(Ke){var Ye=uf();return Ye.memoizedState=Ke,Ke}function iS(Ke){var Ye=zu(),ot=Yo,ft=ot.memoizedState;return sS(Ye,ft,Ke)}function rS(Ke){var Ye=zu();if(Yo===null)return Ye.memoizedState=Ke,Ke;var ot=Yo.memoizedState;return sS(Ye,ot,Ke)}function sS(Ke,Ye,ot){var ft=!xv(fg);if(ft){if(!Ms(ot,Ye)){var pt=Zp();Na.lanes=da(Na.lanes,pt),hm(pt),Ke.baseState=!0}return Ye}else return Ke.baseState&&(Ke.baseState=!1,tm()),Ke.memoizedState=ot,ot}function tR(Ke,Ye,ot){var ft=uu();Do(il(ft,jo)),Ke(!0);var pt=j0.transition;j0.transition={};var ii=j0.transition;j0.transition._updatedFibers=new Set;try{Ke(!1),Ye()}finally{if(Do(ft),j0.transition=pt,pt===null&&ii._updatedFibers){var ui=ii._updatedFibers.size;ui>10&&ve("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),ii._updatedFibers.clear()}}}function EC(){var Ke=CE(!1),Ye=Ke[0],ot=Ke[1],ft=tR.bind(null,ot),pt=uf();return pt.memoizedState=ft,[Ye,ft]}function aS(){var Ke=cC(),Ye=Ke[0],ot=zu(),ft=ot.memoizedState;return[Ye,ft]}function oS(){var Ke=fC(),Ye=Ke[0],ot=zu(),ft=ot.memoizedState;return[Ye,ft]}var lS=!1;function nR(){return lS}function vC(){var Ke=uf(),Ye=WE(),ot=Ye.identifierPrefix,ft;if(Al()){var pt=pw();ft=":"+ot+"R"+pt;var ii=K0++;ii>0&&(ft+="H"+ii.toString(32)),ft+=":"}else{var ui=Xw++;ft=":"+ot+"r"+ui.toString(32)+":"}return Ke.memoizedState=ft,ft}function DE(){var Ke=zu(),Ye=Ke.memoizedState;return Ye}function iR(Ke,Ye,ot){typeof arguments[3]=="function"&&be("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var ft=ch(Ke),pt={lane:ft,action:ot,hasEagerState:!1,eagerState:null,next:null};if(uS(Ke))cS(Ye,pt);else{var ii=_x(Ke,Ye,pt,ft);if(ii!==null){var ui=Yl();el(ii,Ke,ft,ui),fS(ii,Ye,ft)}}dS(Ke,ft)}function rR(Ke,Ye,ot){typeof arguments[3]=="function"&&be("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var ft=ch(Ke),pt={lane:ft,action:ot,hasEagerState:!1,eagerState:null,next:null};if(uS(Ke))cS(Ye,pt);else{var ii=Ke.alternate;if(Ke.lanes===ns&&(ii===null||ii.lanes===ns)){var ui=Ye.lastRenderedReducer;if(ui!==null){var di;di=bs.current,bs.current=mc;try{var Ai=Ye.lastRenderedState,wi=ui(Ai,ot);if(pt.hasEagerState=!0,pt.eagerState=wi,Ms(wi,Ai)){Ow(Ke,Ye,pt,ft);return}}catch{}finally{bs.current=di}}}var Di=_x(Ke,Ye,pt,ft);if(Di!==null){var zi=Yl();el(Di,Ke,ft,zi),fS(Di,Ye,ft)}}dS(Ke,ft)}function uS(Ke){var Ye=Ke.alternate;return Ke===Na||Ye!==null&&Ye===Na}function cS(Ke,Ye){q0=EE=!0;var ot=Ke.pending;ot===null?Ye.next=Ye:(Ye.next=ot.next,ot.next=Ye),Ke.pending=Ye}function fS(Ke,Ye,ot){if(Xp(ot)){var ft=Ye.lanes;ft=Jp(ft,Ke.pendingLanes);var pt=da(ft,ot);Ye.lanes=pt,Od(Ke,pt)}}function dS(Ke,Ye,ot){Wc(Ke,Ye)}var LE={readContext:Go,useCallback:Fl,useContext:Fl,useEffect:Fl,useImperativeHandle:Fl,useInsertionEffect:Fl,useLayoutEffect:Fl,useMemo:Fl,useReducer:Fl,useRef:Fl,useState:Fl,useDebugValue:Fl,useDeferredValue:Fl,useTransition:Fl,useMutableSource:Fl,useSyncExternalStore:Fl,useId:Fl,unstable_isNewReconciler:Ri},hS=null,gS=null,AS=null,pS=null,cf=null,mc=null,ME=null;{var CC=function(){be("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},oa=function(){be("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};hS={readContext:function(Ke){return Go(Ke)},useCallback:function(Ke,Ye){return ss="useCallback",Oa(),WA(Ye),pC(Ke,Ye)},useContext:function(Ke){return ss="useContext",Oa(),Go(Ke)},useEffect:function(Ke,Ye){return ss="useEffect",Oa(),WA(Ye),SE(Ke,Ye)},useImperativeHandle:function(Ke,Ye,ot){return ss="useImperativeHandle",Oa(),WA(ot),AC(Ke,Ye,ot)},useInsertionEffect:function(Ke,Ye){return ss="useInsertionEffect",Oa(),WA(Ye),hC(Ke,Ye)},useLayoutEffect:function(Ke,Ye){return ss="useLayoutEffect",Oa(),WA(Ye),gC(Ke,Ye)},useMemo:function(Ke,Ye){ss="useMemo",Oa(),WA(Ye);var ot=bs.current;bs.current=cf;try{return mC(Ke,Ye)}finally{bs.current=ot}},useReducer:function(Ke,Ye,ot){ss="useReducer",Oa();var ft=bs.current;bs.current=cf;try{return aC(Ke,Ye,ot)}finally{bs.current=ft}},useRef:function(Ke){return ss="useRef",Oa(),dC(Ke)},useState:function(Ke){ss="useState",Oa();var Ye=bs.current;bs.current=cf;try{return CE(Ke)}finally{bs.current=Ye}},useDebugValue:function(Ke,Ye){return ss="useDebugValue",Oa(),void 0},useDeferredValue:function(Ke){return ss="useDeferredValue",Oa(),yC(Ke)},useTransition:function(){return ss="useTransition",Oa(),EC()},useMutableSource:function(Ke,Ye,ot){return ss="useMutableSource",Oa(),void 0},useSyncExternalStore:function(Ke,Ye,ot){return ss="useSyncExternalStore",Oa(),uC(Ke,Ye,ot)},useId:function(){return ss="useId",Oa(),vC()},unstable_isNewReconciler:Ri},gS={readContext:function(Ke){return Go(Ke)},useCallback:function(Ke,Ye){return ss="useCallback",Es(),pC(Ke,Ye)},useContext:function(Ke){return ss="useContext",Es(),Go(Ke)},useEffect:function(Ke,Ye){return ss="useEffect",Es(),SE(Ke,Ye)},useImperativeHandle:function(Ke,Ye,ot){return ss="useImperativeHandle",Es(),AC(Ke,Ye,ot)},useInsertionEffect:function(Ke,Ye){return ss="useInsertionEffect",Es(),hC(Ke,Ye)},useLayoutEffect:function(Ke,Ye){return ss="useLayoutEffect",Es(),gC(Ke,Ye)},useMemo:function(Ke,Ye){ss="useMemo",Es();var ot=bs.current;bs.current=cf;try{return mC(Ke,Ye)}finally{bs.current=ot}},useReducer:function(Ke,Ye,ot){ss="useReducer",Es();var ft=bs.current;bs.current=cf;try{return aC(Ke,Ye,ot)}finally{bs.current=ft}},useRef:function(Ke){return ss="useRef",Es(),dC(Ke)},useState:function(Ke){ss="useState",Es();var Ye=bs.current;bs.current=cf;try{return CE(Ke)}finally{bs.current=Ye}},useDebugValue:function(Ke,Ye){return ss="useDebugValue",Es(),void 0},useDeferredValue:function(Ke){return ss="useDeferredValue",Es(),yC(Ke)},useTransition:function(){return ss="useTransition",Es(),EC()},useMutableSource:function(Ke,Ye,ot){return ss="useMutableSource",Es(),void 0},useSyncExternalStore:function(Ke,Ye,ot){return ss="useSyncExternalStore",Es(),uC(Ke,Ye,ot)},useId:function(){return ss="useId",Es(),vC()},unstable_isNewReconciler:Ri},AS={readContext:function(Ke){return Go(Ke)},useCallback:function(Ke,Ye){return ss="useCallback",Es(),RE(Ke,Ye)},useContext:function(Ke){return ss="useContext",Es(),Go(Ke)},useEffect:function(Ke,Ye){return ss="useEffect",Es(),X0(Ke,Ye)},useImperativeHandle:function(Ke,Ye,ot){return ss="useImperativeHandle",Es(),_E(Ke,Ye,ot)},useInsertionEffect:function(Ke,Ye){return ss="useInsertionEffect",Es(),TE(Ke,Ye)},useLayoutEffect:function(Ke,Ye){return ss="useLayoutEffect",Es(),bE(Ke,Ye)},useMemo:function(Ke,Ye){ss="useMemo",Es();var ot=bs.current;bs.current=mc;try{return BE(Ke,Ye)}finally{bs.current=ot}},useReducer:function(Ke,Ye,ot){ss="useReducer",Es();var ft=bs.current;bs.current=mc;try{return oC(Ke,Ye,ot)}finally{bs.current=ft}},useRef:function(Ke){return ss="useRef",Es(),IE()},useState:function(Ke){ss="useState",Es();var Ye=bs.current;bs.current=mc;try{return cC(Ke)}finally{bs.current=Ye}},useDebugValue:function(Ke,Ye){return ss="useDebugValue",Es(),wE()},useDeferredValue:function(Ke){return ss="useDeferredValue",Es(),iS(Ke)},useTransition:function(){return ss="useTransition",Es(),aS()},useMutableSource:function(Ke,Ye,ot){return ss="useMutableSource",Es(),void 0},useSyncExternalStore:function(Ke,Ye,ot){return ss="useSyncExternalStore",Es(),vE(Ke,Ye)},useId:function(){return ss="useId",Es(),DE()},unstable_isNewReconciler:Ri},pS={readContext:function(Ke){return Go(Ke)},useCallback:function(Ke,Ye){return ss="useCallback",Es(),RE(Ke,Ye)},useContext:function(Ke){return ss="useContext",Es(),Go(Ke)},useEffect:function(Ke,Ye){return ss="useEffect",Es(),X0(Ke,Ye)},useImperativeHandle:function(Ke,Ye,ot){return ss="useImperativeHandle",Es(),_E(Ke,Ye,ot)},useInsertionEffect:function(Ke,Ye){return ss="useInsertionEffect",Es(),TE(Ke,Ye)},useLayoutEffect:function(Ke,Ye){return ss="useLayoutEffect",Es(),bE(Ke,Ye)},useMemo:function(Ke,Ye){ss="useMemo",Es();var ot=bs.current;bs.current=ME;try{return BE(Ke,Ye)}finally{bs.current=ot}},useReducer:function(Ke,Ye,ot){ss="useReducer",Es();var ft=bs.current;bs.current=ME;try{return lC(Ke,Ye,ot)}finally{bs.current=ft}},useRef:function(Ke){return ss="useRef",Es(),IE()},useState:function(Ke){ss="useState",Es();var Ye=bs.current;bs.current=ME;try{return fC(Ke)}finally{bs.current=Ye}},useDebugValue:function(Ke,Ye){return ss="useDebugValue",Es(),wE()},useDeferredValue:function(Ke){return ss="useDeferredValue",Es(),rS(Ke)},useTransition:function(){return ss="useTransition",Es(),oS()},useMutableSource:function(Ke,Ye,ot){return ss="useMutableSource",Es(),void 0},useSyncExternalStore:function(Ke,Ye,ot){return ss="useSyncExternalStore",Es(),vE(Ke,Ye)},useId:function(){return ss="useId",Es(),DE()},unstable_isNewReconciler:Ri},cf={readContext:function(Ke){return CC(),Go(Ke)},useCallback:function(Ke,Ye){return ss="useCallback",oa(),Oa(),pC(Ke,Ye)},useContext:function(Ke){return ss="useContext",oa(),Oa(),Go(Ke)},useEffect:function(Ke,Ye){return ss="useEffect",oa(),Oa(),SE(Ke,Ye)},useImperativeHandle:function(Ke,Ye,ot){return ss="useImperativeHandle",oa(),Oa(),AC(Ke,Ye,ot)},useInsertionEffect:function(Ke,Ye){return ss="useInsertionEffect",oa(),Oa(),hC(Ke,Ye)},useLayoutEffect:function(Ke,Ye){return ss="useLayoutEffect",oa(),Oa(),gC(Ke,Ye)},useMemo:function(Ke,Ye){ss="useMemo",oa(),Oa();var ot=bs.current;bs.current=cf;try{return mC(Ke,Ye)}finally{bs.current=ot}},useReducer:function(Ke,Ye,ot){ss="useReducer",oa(),Oa();var ft=bs.current;bs.current=cf;try{return aC(Ke,Ye,ot)}finally{bs.current=ft}},useRef:function(Ke){return ss="useRef",oa(),Oa(),dC(Ke)},useState:function(Ke){ss="useState",oa(),Oa();var Ye=bs.current;bs.current=cf;try{return CE(Ke)}finally{bs.current=Ye}},useDebugValue:function(Ke,Ye){return ss="useDebugValue",oa(),Oa(),void 0},useDeferredValue:function(Ke){return ss="useDeferredValue",oa(),Oa(),yC(Ke)},useTransition:function(){return ss="useTransition",oa(),Oa(),EC()},useMutableSource:function(Ke,Ye,ot){return ss="useMutableSource",oa(),Oa(),void 0},useSyncExternalStore:function(Ke,Ye,ot){return ss="useSyncExternalStore",oa(),Oa(),uC(Ke,Ye,ot)},useId:function(){return ss="useId",oa(),Oa(),vC()},unstable_isNewReconciler:Ri},mc={readContext:function(Ke){return CC(),Go(Ke)},useCallback:function(Ke,Ye){return ss="useCallback",oa(),Es(),RE(Ke,Ye)},useContext:function(Ke){return ss="useContext",oa(),Es(),Go(Ke)},useEffect:function(Ke,Ye){return ss="useEffect",oa(),Es(),X0(Ke,Ye)},useImperativeHandle:function(Ke,Ye,ot){return ss="useImperativeHandle",oa(),Es(),_E(Ke,Ye,ot)},useInsertionEffect:function(Ke,Ye){return ss="useInsertionEffect",oa(),Es(),TE(Ke,Ye)},useLayoutEffect:function(Ke,Ye){return ss="useLayoutEffect",oa(),Es(),bE(Ke,Ye)},useMemo:function(Ke,Ye){ss="useMemo",oa(),Es();var ot=bs.current;bs.current=mc;try{return BE(Ke,Ye)}finally{bs.current=ot}},useReducer:function(Ke,Ye,ot){ss="useReducer",oa(),Es();var ft=bs.current;bs.current=mc;try{return oC(Ke,Ye,ot)}finally{bs.current=ft}},useRef:function(Ke){return ss="useRef",oa(),Es(),IE()},useState:function(Ke){ss="useState",oa(),Es();var Ye=bs.current;bs.current=mc;try{return cC(Ke)}finally{bs.current=Ye}},useDebugValue:function(Ke,Ye){return ss="useDebugValue",oa(),Es(),wE()},useDeferredValue:function(Ke){return ss="useDeferredValue",oa(),Es(),iS(Ke)},useTransition:function(){return ss="useTransition",oa(),Es(),aS()},useMutableSource:function(Ke,Ye,ot){return ss="useMutableSource",oa(),Es(),void 0},useSyncExternalStore:function(Ke,Ye,ot){return ss="useSyncExternalStore",oa(),Es(),vE(Ke,Ye)},useId:function(){return ss="useId",oa(),Es(),DE()},unstable_isNewReconciler:Ri},ME={readContext:function(Ke){return CC(),Go(Ke)},useCallback:function(Ke,Ye){return ss="useCallback",oa(),Es(),RE(Ke,Ye)},useContext:function(Ke){return ss="useContext",oa(),Es(),Go(Ke)},useEffect:function(Ke,Ye){return ss="useEffect",oa(),Es(),X0(Ke,Ye)},useImperativeHandle:function(Ke,Ye,ot){return ss="useImperativeHandle",oa(),Es(),_E(Ke,Ye,ot)},useInsertionEffect:function(Ke,Ye){return ss="useInsertionEffect",oa(),Es(),TE(Ke,Ye)},useLayoutEffect:function(Ke,Ye){return ss="useLayoutEffect",oa(),Es(),bE(Ke,Ye)},useMemo:function(Ke,Ye){ss="useMemo",oa(),Es();var ot=bs.current;bs.current=mc;try{return BE(Ke,Ye)}finally{bs.current=ot}},useReducer:function(Ke,Ye,ot){ss="useReducer",oa(),Es();var ft=bs.current;bs.current=mc;try{return lC(Ke,Ye,ot)}finally{bs.current=ft}},useRef:function(Ke){return ss="useRef",oa(),Es(),IE()},useState:function(Ke){ss="useState",oa(),Es();var Ye=bs.current;bs.current=mc;try{return fC(Ke)}finally{bs.current=Ye}},useDebugValue:function(Ke,Ye){return ss="useDebugValue",oa(),Es(),wE()},useDeferredValue:function(Ke){return ss="useDeferredValue",oa(),Es(),rS(Ke)},useTransition:function(){return ss="useTransition",oa(),Es(),oS()},useMutableSource:function(Ke,Ye,ot){return ss="useMutableSource",oa(),Es(),void 0},useSyncExternalStore:function(Ke,Ye,ot){return ss="useSyncExternalStore",oa(),Es(),vE(Ke,Ye)},useId:function(){return ss="useId",oa(),Es(),DE()},unstable_isNewReconciler:Ri}}var ah=Z.unstable_now,mS=0,PE=-1,Z0=-1,kE=-1,IC=!1,OE=!1;function yS(){return IC}function sR(){OE=!0}function aR(){IC=!1,OE=!1}function oR(){IC=OE,OE=!1}function ES(){return mS}function vS(){mS=ah()}function xC(Ke){Z0=ah(),Ke.actualStartTime<0&&(Ke.actualStartTime=ah())}function CS(Ke){Z0=-1}function FE(Ke,Ye){if(Z0>=0){var ot=ah()-Z0;Ke.actualDuration+=ot,Ye&&(Ke.selfBaseDuration=ot),Z0=-1}}function ff(Ke){if(PE>=0){var Ye=ah()-PE;PE=-1;for(var ot=Ke.return;ot!==null;){switch(ot.tag){case it:var ft=ot.stateNode;ft.effectDuration+=Ye;return;case ri:var pt=ot.stateNode;pt.effectDuration+=Ye;return}ot=ot.return}}}function SC(Ke){if(kE>=0){var Ye=ah()-kE;kE=-1;for(var ot=Ke.return;ot!==null;){switch(ot.tag){case it:var ft=ot.stateNode;ft!==null&&(ft.passiveEffectDuration+=Ye);return;case ri:var pt=ot.stateNode;pt!==null&&(pt.passiveEffectDuration+=Ye);return}ot=ot.return}}}function df(){PE=ah()}function TC(){kE=ah()}function bC(Ke){for(var Ye=Ke.child;Ye;)Ke.actualDuration+=Ye.actualDuration,Ye=Ye.sibling}function dg(Ke,Ye){return{value:Ke,source:Ye,stack:hd(Ye),digest:null}}function _C(Ke,Ye,ot){return{value:Ke,source:null,stack:ot??null,digest:Ye??null}}function lR(Ke,Ye){return!0}function wC(Ke,Ye){try{var ot=lR(Ke,Ye);if(ot===!1)return;var ft=Ye.value,pt=Ye.source,ii=Ye.stack,ui=ii!==null?ii:"";if(ft!=null&&ft._suppressLogging){if(Ke.tag===Je)return;console.error(ft)}var di=pt?aa(pt):null,Ai=di?"The above error occurred in the <"+di+"> component:":"The above error occurred in one of your React components:",wi;if(Ke.tag===it)wi=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var Di=aa(Ke)||"Anonymous";wi="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+Di+".")}var zi=Ai+`
`+ui+`

`+(""+wi);console.error(zi)}catch(Gi){setTimeout(function(){throw Gi})}}var uR=typeof WeakMap=="function"?WeakMap:Map;function IS(Ke,Ye,ot){var ft=Jf(Ha,ot);ft.tag=w1,ft.payload={element:null};var pt=Ye.value;return ft.callback=function(){iB(pt),wC(Ke,Ye)},ft}function RC(Ke,Ye,ot){var ft=Jf(Ha,ot);ft.tag=w1;var pt=Ke.type.getDerivedStateFromError;if(typeof pt=="function"){var ii=Ye.value;ft.payload=function(){return pt(ii)},ft.callback=function(){kT(Ke),wC(Ke,Ye)}}var ui=Ke.stateNode;return ui!==null&&typeof ui.componentDidCatch=="function"&&(ft.callback=function(){kT(Ke),wC(Ke,Ye),typeof pt!="function"&&tB(this);var Ai=Ye.value,wi=Ye.stack;this.componentDidCatch(Ai,{componentStack:wi!==null?wi:""}),typeof pt!="function"&&(Pl(Ke.lanes,ta)||be("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",aa(Ke)||"Unknown"))}),ft}function xS(Ke,Ye,ot){var ft=Ke.pingCache,pt;if(ft===null?(ft=Ke.pingCache=new uR,pt=new Set,ft.set(Ye,pt)):(pt=ft.get(Ye),pt===void 0&&(pt=new Set,ft.set(Ye,pt))),!pt.has(ot)){pt.add(ot);var ii=rB.bind(null,Ke,Ye,ot);Vo&&gm(Ke,ot),Ye.then(ii,ii)}}function cR(Ke,Ye,ot,ft){var pt=Ke.updateQueue;if(pt===null){var ii=new Set;ii.add(ot),Ke.updateQueue=ii}else pt.add(ot)}function fR(Ke,Ye){var ot=Ke.tag;if((Ke.mode&pa)===Xs&&(ot===Xe||ot===ni||ot===ai)){var ft=Ke.alternate;ft?(Ke.updateQueue=ft.updateQueue,Ke.memoizedState=ft.memoizedState,Ke.lanes=ft.lanes):(Ke.updateQueue=null,Ke.memoizedState=null)}}function SS(Ke){var Ye=Ke;do{if(Ye.tag===si&&Yw(Ye))return Ye;Ye=Ye.return}while(Ye!==null);return null}function TS(Ke,Ye,ot,ft,pt){if((Ke.mode&pa)===Xs){if(Ke===Ye)Ke.flags|=Fo;else{if(Ke.flags|=ia,ot.flags|=Ph,ot.flags&=~(Fg|Ul),ot.tag===Je){var ii=ot.alternate;if(ii===null)ot.tag=Ci;else{var ui=Jf(Ha,ta);ui.tag=oE,nh(ot,ui,ta)}}ot.lanes=da(ot.lanes,ta)}return Ke}return Ke.flags|=Fo,Ke.lanes=pt,Ke}function dR(Ke,Ye,ot,ft,pt){if(ot.flags|=Ul,Vo&&gm(Ke,pt),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var ii=ft;fR(ot),Al()&&ot.mode&pa&&Ax();var ui=SS(Ye);if(ui!==null){ui.flags&=~Ao,TS(ui,Ye,ot,Ke,pt),ui.mode&pa&&xS(Ke,ii,pt),cR(ui,Ke,ii);return}else{if(!Pd(pt)){xS(Ke,ii,pt),lI();return}var di=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");ft=di}}else if(Al()&&ot.mode&pa){Ax();var Ai=SS(Ye);if(Ai!==null){(Ai.flags&Fo)===Ks&&(Ai.flags|=Ao),TS(Ai,Ye,ot,Ke,pt),C1(dg(ft,ot));return}}ft=dg(ft,ot),q2(ft);var wi=Ye;do{switch(wi.tag){case it:{var Di=ft;wi.flags|=Fo;var zi=Bo(pt);wi.lanes=da(wi.lanes,zi);var Gi=IS(wi,Di,zi);D1(wi,Gi);return}case Je:var Zi=ft,_r=wi.type,es=wi.stateNode;if((wi.flags&ia)===Ks&&(typeof _r.getDerivedStateFromError=="function"||es!==null&&typeof es.componentDidCatch=="function"&&!bT(es))){wi.flags|=Fo;var Rs=Bo(pt);wi.lanes=da(wi.lanes,Rs);var Ys=RC(wi,Zi,Rs);D1(wi,Ys);return}break}wi=wi.return}while(wi!==null)}function hR(){return null}var J0=ee.ReactCurrentOwner,yc=!1,BC,em,DC,LC,MC,hg,PC,NE;BC={},em={},DC={},LC={},MC={},hg=!1,PC={},NE={};function ql(Ke,Ye,ot,ft){Ke===null?Ye.child=Hx(Ye,null,ot,ft):Ye.child=VA(Ye,Ke.child,ot,ft)}function gR(Ke,Ye,ot,ft){Ye.child=VA(Ye,Ke.child,null,ft),Ye.child=VA(Ye,null,ot,ft)}function bS(Ke,Ye,ot,ft,pt){if(Ye.type!==Ye.elementType){var ii=ot.propTypes;ii&&dc(ii,ft,"prop",ba(ot))}var ui=ot.render,di=Ye.ref,Ai,wi;zA(Ye,pt),Yc(Ye);{if(J0.current=Ye,Tl(!0),Ai=XA(Ke,Ye,ui,ft,di,pt),wi=ZA(),Ye.mode&lo){Ro(!0);try{Ai=XA(Ke,Ye,ui,ft,di,pt),wi=ZA()}finally{Ro(!1)}}Tl(!1)}return wf(),Ke!==null&&!yc?(Kx(Ke,Ye,pt),ed(Ke,Ye,pt)):(Al()&&wi&&g1(Ye),Ye.flags|=Gc,ql(Ke,Ye,Ai,pt),Ye.child)}function _S(Ke,Ye,ot,ft,pt){if(Ke===null){var ii=ot.type;if(CB(ii)&&ot.compare===null&&ot.defaultProps===void 0){var ui=ii;return ui=ap(ii),Ye.tag=ai,Ye.type=ui,FC(Ye,ii),wS(Ke,Ye,ui,ft,pt)}{var di=ii.propTypes;di&&dc(di,ft,"prop",ba(ii))}var Ai=EI(ot.type,null,ft,Ye,Ye.mode,pt);return Ai.ref=Ye.ref,Ai.return=Ye,Ye.child=Ai,Ai}{var wi=ot.type,Di=wi.propTypes;Di&&dc(Di,ft,"prop",ba(wi))}var zi=Ke.child,Gi=HC(Ke,pt);if(!Gi){var Zi=zi.memoizedProps,_r=ot.compare;if(_r=_r!==null?_r:qs,_r(Zi,ft)&&Ke.ref===Ye.ref)return ed(Ke,Ye,pt)}Ye.flags|=Gc;var es=yg(zi,ft);return es.ref=Ye.ref,es.return=Ye,Ye.child=es,es}function wS(Ke,Ye,ot,ft,pt){if(Ye.type!==Ye.elementType){var ii=Ye.elementType;if(ii.$$typeof===Ho){var ui=ii,di=ui._payload,Ai=ui._init;try{ii=Ai(di)}catch{ii=null}var wi=ii&&ii.propTypes;wi&&dc(wi,ft,"prop",ba(ii))}}if(Ke!==null){var Di=Ke.memoizedProps;if(qs(Di,ft)&&Ke.ref===Ye.ref&&Ye.type===Ke.type)if(yc=!1,Ye.pendingProps=ft=Di,HC(Ke,pt))(Ke.flags&Ph)!==Ks&&(yc=!0);else return Ye.lanes=Ke.lanes,ed(Ke,Ye,pt)}return kC(Ke,Ye,ot,ft,pt)}function RS(Ke,Ye,ot){var ft=Ye.pendingProps,pt=ft.children,ii=Ke!==null?Ke.memoizedState:null;if(ft.mode==="hidden"||xi)if((Ye.mode&pa)===Xs){var ui={baseLanes:ns,cachePool:null,transitions:null};Ye.memoizedState=ui,XE(Ye,ot)}else if(Pl(ot,Ml)){var zi={baseLanes:ns,cachePool:null,transitions:null};Ye.memoizedState=zi;var Gi=ii!==null?ii.baseLanes:ot;XE(Ye,Gi)}else{var di=null,Ai;if(ii!==null){var wi=ii.baseLanes;Ai=da(wi,ot)}else Ai=ot;Ye.lanes=Ye.childLanes=Ml;var Di={baseLanes:Ai,cachePool:di,transitions:null};return Ye.memoizedState=Di,Ye.updateQueue=null,XE(Ye,Ai),null}else{var Zi;ii!==null?(Zi=da(ii.baseLanes,ot),Ye.memoizedState=null):Zi=ot,XE(Ye,Zi)}return ql(Ke,Ye,pt,ot),Ye.child}function AR(Ke,Ye,ot){var ft=Ye.pendingProps;return ql(Ke,Ye,ft,ot),Ye.child}function pR(Ke,Ye,ot){var ft=Ye.pendingProps.children;return ql(Ke,Ye,ft,ot),Ye.child}function mR(Ke,Ye,ot){{Ye.flags|=fa;{var ft=Ye.stateNode;ft.effectDuration=0,ft.passiveEffectDuration=0}}var pt=Ye.pendingProps,ii=pt.children;return ql(Ke,Ye,ii,ot),Ye.child}function BS(Ke,Ye){var ot=Ye.ref;(Ke===null&&ot!==null||Ke!==null&&Ke.ref!==ot)&&(Ye.flags|=_l,Ye.flags|=Op)}function kC(Ke,Ye,ot,ft,pt){if(Ye.type!==Ye.elementType){var ii=ot.propTypes;ii&&dc(ii,ft,"prop",ba(ot))}var ui;{var di=NA(Ye,ot,!0);ui=$A(Ye,di)}var Ai,wi;zA(Ye,pt),Yc(Ye);{if(J0.current=Ye,Tl(!0),Ai=XA(Ke,Ye,ot,ft,ui,pt),wi=ZA(),Ye.mode&lo){Ro(!0);try{Ai=XA(Ke,Ye,ot,ft,ui,pt),wi=ZA()}finally{Ro(!1)}}Tl(!1)}return wf(),Ke!==null&&!yc?(Kx(Ke,Ye,pt),ed(Ke,Ye,pt)):(Al()&&wi&&g1(Ye),Ye.flags|=Gc,ql(Ke,Ye,Ai,pt),Ye.child)}function DS(Ke,Ye,ot,ft,pt){{switch(OB(Ye)){case!1:{var ii=Ye.stateNode,ui=Ye.type,di=new ui(Ye.memoizedProps,ii.context),Ai=di.state;ii.updater.enqueueSetState(ii,Ai,null);break}case!0:{Ye.flags|=ia,Ye.flags|=Fo;var wi=new Error("Simulated error coming from DevTools"),Di=Bo(pt);Ye.lanes=da(Ye.lanes,Di);var zi=RC(Ye,dg(wi,Ye),Di);D1(Ye,zi);break}}if(Ye.type!==Ye.elementType){var Gi=ot.propTypes;Gi&&dc(Gi,ft,"prop",ba(ot))}}var Zi;of(ot)?(Zi=!0,Wy(Ye)):Zi=!1,zA(Ye,pt);var _r=Ye.stateNode,es;_r===null?(QE(Ke,Ye),Nx(Ye,ot,ft),H1(Ye,ot,ft,pt),es=!0):Ke===null?es=Hw(Ye,ot,ft,pt):es=zw(Ke,Ye,ot,ft,pt);var Rs=OC(Ke,Ye,ot,es,Zi,pt);{var Ys=Ye.stateNode;es&&Ys.props!==ft&&(hg||be("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",aa(Ye)||"a component"),hg=!0)}return Rs}function OC(Ke,Ye,ot,ft,pt,ii){BS(Ke,Ye);var ui=(Ye.flags&ia)!==Ks;if(!ft&&!ui)return pt&&fx(Ye,ot,!1),ed(Ke,Ye,ii);var di=Ye.stateNode;J0.current=Ye;var Ai;if(ui&&typeof ot.getDerivedStateFromError!="function")Ai=null,CS();else{Yc(Ye);{if(Tl(!0),Ai=di.render(),Ye.mode&lo){Ro(!0);try{di.render()}finally{Ro(!1)}}Tl(!1)}wf()}return Ye.flags|=Gc,Ke!==null&&ui?gR(Ke,Ye,Ai,ii):ql(Ke,Ye,Ai,ii),Ye.memoizedState=di.state,pt&&fx(Ye,ot,!0),Ye.child}function LS(Ke){var Ye=Ke.stateNode;Ye.pendingContext?ux(Ke,Ye.pendingContext,Ye.pendingContext!==Ye.context):Ye.context&&ux(Ke,Ye.context,!1),Y1(Ke,Ye.containerInfo)}function yR(Ke,Ye,ot){if(LS(Ye),Ke===null)throw new Error("Should have a current fiber. This is a bug in React.");var ft=Ye.pendingProps,pt=Ye.memoizedState,ii=pt.element;Bx(Ke,Ye),fE(Ye,ft,null,ot);var ui=Ye.memoizedState;Ye.stateNode;var di=ui.element;if(pt.isDehydrated){var Ai={element:di,isDehydrated:!1,cache:ui.cache,pendingSuspenseBoundaries:ui.pendingSuspenseBoundaries,transitions:ui.transitions},wi=Ye.updateQueue;if(wi.baseState=Ai,Ye.memoizedState=Ai,Ye.flags&Ao){var Di=dg(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),Ye);return MS(Ke,Ye,di,ot,Di)}else if(di!==ii){var zi=dg(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),Ye);return MS(Ke,Ye,di,ot,zi)}else{Iw(Ye);var Gi=Hx(Ye,null,di,ot);Ye.child=Gi;for(var Zi=Gi;Zi;)Zi.flags=Zi.flags&~Ka|ru,Zi=Zi.sibling}}else{if(GA(),di===ii)return ed(Ke,Ye,ot);ql(Ke,Ye,di,ot)}return Ye.child}function MS(Ke,Ye,ot,ft,pt){return GA(),C1(pt),Ye.flags|=Ao,ql(Ke,Ye,ot,ft),Ye.child}function ER(Ke,Ye,ot){Vx(Ye),Ke===null&&v1(Ye);var ft=Ye.type,pt=Ye.pendingProps,ii=Ke!==null?Ke.memoizedProps:null,ui=pt.children,di=e1(ft,pt);return di?ui=null:ii!==null&&e1(ft,ii)&&(Ye.flags|=ka),BS(Ke,Ye),ql(Ke,Ye,ui,ot),Ye.child}function vR(Ke,Ye){return Ke===null&&v1(Ye),null}function IR(Ke,Ye,ot,ft){QE(Ke,Ye);var pt=Ye.pendingProps,ii=ot,ui=ii._payload,di=ii._init,Ai=di(ui);Ye.type=Ai;var wi=Ye.tag=IB(Ai),Di=Ac(Ai,pt),zi;switch(wi){case Xe:return FC(Ye,Ai),Ye.type=Ai=ap(Ai),zi=kC(null,Ye,Ai,Di,ft),zi;case Je:return Ye.type=Ai=hI(Ai),zi=DS(null,Ye,Ai,Di,ft),zi;case ni:return Ye.type=Ai=gI(Ai),zi=bS(null,Ye,Ai,Di,ft),zi;case li:{if(Ye.type!==Ye.elementType){var Gi=Ai.propTypes;Gi&&dc(Gi,Di,"prop",ba(Ai))}return zi=_S(null,Ye,Ai,Ac(Ai.type,Di),ft),zi}}var Zi="";throw Ai!==null&&typeof Ai=="object"&&Ai.$$typeof===Ho&&(Zi=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+Ai+". "+("Lazy element type must resolve to a class or function."+Zi))}function xR(Ke,Ye,ot,ft,pt){QE(Ke,Ye),Ye.tag=Je;var ii;return of(ot)?(ii=!0,Wy(Ye)):ii=!1,zA(Ye,pt),Nx(Ye,ot,ft),H1(Ye,ot,ft,pt),OC(null,Ye,ot,!0,ii,pt)}function SR(Ke,Ye,ot,ft){QE(Ke,Ye);var pt=Ye.pendingProps,ii;{var ui=NA(Ye,ot,!1);ii=$A(Ye,ui)}zA(Ye,ft);var di,Ai;Yc(Ye);{if(ot.prototype&&typeof ot.prototype.render=="function"){var wi=ba(ot)||"Unknown";BC[wi]||(be("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",wi,wi),BC[wi]=!0)}Ye.mode&lo&&gc.recordLegacyContextWarning(Ye,null),Tl(!0),J0.current=Ye,di=XA(null,Ye,ot,pt,ii,ft),Ai=ZA(),Tl(!1)}if(wf(),Ye.flags|=Gc,typeof di=="object"&&di!==null&&typeof di.render=="function"&&di.$$typeof===void 0){var Di=ba(ot)||"Unknown";em[Di]||(be("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Di,Di,Di),em[Di]=!0)}if(typeof di=="object"&&di!==null&&typeof di.render=="function"&&di.$$typeof===void 0){{var zi=ba(ot)||"Unknown";em[zi]||(be("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",zi,zi,zi),em[zi]=!0)}Ye.tag=Je,Ye.memoizedState=null,Ye.updateQueue=null;var Gi=!1;return of(ot)?(Gi=!0,Wy(Ye)):Gi=!1,Ye.memoizedState=di.state!==null&&di.state!==void 0?di.state:null,B1(Ye),Fx(Ye,di),H1(Ye,ot,pt,ft),OC(null,Ye,ot,!0,Gi,ft)}else{if(Ye.tag=Xe,Ye.mode&lo){Ro(!0);try{di=XA(null,Ye,ot,pt,ii,ft),Ai=ZA()}finally{Ro(!1)}}return Al()&&Ai&&g1(Ye),ql(null,Ye,di,ft),FC(Ye,ot),Ye.child}}function FC(Ke,Ye){{if(Ye&&Ye.childContextTypes&&be("%s(...): childContextTypes cannot be defined on a function component.",Ye.displayName||Ye.name||"Component"),Ke.ref!==null){var ot="",ft=dl();ft&&(ot+=`

Check the render method of \``+ft+"`.");var pt=ft||"",ii=Ke._debugSource;ii&&(pt=ii.fileName+":"+ii.lineNumber),MC[pt]||(MC[pt]=!0,be("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",ot))}if(typeof Ye.getDerivedStateFromProps=="function"){var ui=ba(Ye)||"Unknown";LC[ui]||(be("%s: Function components do not support getDerivedStateFromProps.",ui),LC[ui]=!0)}if(typeof Ye.contextType=="object"&&Ye.contextType!==null){var di=ba(Ye)||"Unknown";DC[di]||(be("%s: Function components do not support contextType.",di),DC[di]=!0)}}}var NC={dehydrated:null,treeContext:null,retryLane:Ia};function $C(Ke){return{baseLanes:Ke,cachePool:hR(),transitions:null}}function TR(Ke,Ye){var ot=null;return{baseLanes:da(Ke.baseLanes,Ye),cachePool:ot,transitions:Ke.transitions}}function bR(Ke,Ye,ot,ft){if(Ye!==null){var pt=Ye.memoizedState;if(pt===null)return!1}return Z1(Ke,V0)}function _R(Ke,Ye){return kd(Ke.childLanes,Ye)}function PS(Ke,Ye,ot){var ft=Ye.pendingProps;FB(Ye)&&(Ye.flags|=ia);var pt=pc.current,ii=!1,ui=(Ye.flags&ia)!==Ks;if(ui||bR(pt,Ke)?(ii=!0,Ye.flags&=~ia):(Ke===null||Ke.memoizedState!==null)&&(pt=Kw(pt,qx)),pt=qA(pt),rh(Ye,pt),Ke===null){v1(Ye);var di=Ye.memoizedState;if(di!==null){var Ai=di.dehydrated;if(Ai!==null)return LR(Ye,Ai)}var wi=ft.children,Di=ft.fallback;if(ii){var zi=wR(Ye,wi,Di,ot),Gi=Ye.child;return Gi.memoizedState=$C(ot),Ye.memoizedState=NC,zi}else return QC(Ye,wi)}else{var Zi=Ke.memoizedState;if(Zi!==null){var _r=Zi.dehydrated;if(_r!==null)return MR(Ke,Ye,ui,ft,_r,Zi,ot)}if(ii){var es=ft.fallback,Rs=ft.children,Ys=BR(Ke,Ye,Rs,es,ot),Hs=Ye.child,Sa=Ke.child.memoizedState;return Hs.memoizedState=Sa===null?$C(ot):TR(Sa,ot),Hs.childLanes=_R(Ke,ot),Ye.memoizedState=NC,Ys}else{var va=ft.children,Ki=RR(Ke,Ye,va,ot);return Ye.memoizedState=null,Ki}}}function QC(Ke,Ye,ot){var ft=Ke.mode,pt={mode:"visible",children:Ye},ii=UC(pt,ft);return ii.return=Ke,Ke.child=ii,ii}function wR(Ke,Ye,ot,ft){var pt=Ke.mode,ii=Ke.child,ui={mode:"hidden",children:Ye},di,Ai;return(pt&pa)===Xs&&ii!==null?(di=ii,di.childLanes=ns,di.pendingProps=ui,Ke.mode&Js&&(di.actualDuration=0,di.actualStartTime=-1,di.selfBaseDuration=0,di.treeBaseDuration=0),Ai=dh(ot,pt,ft,null)):(di=UC(ui,pt),Ai=dh(ot,pt,ft,null)),di.return=Ke,Ai.return=Ke,di.sibling=Ai,Ke.child=di,Ai}function UC(Ke,Ye,ot){return FT(Ke,Ye,ns,null)}function kS(Ke,Ye){return yg(Ke,Ye)}function RR(Ke,Ye,ot,ft){var pt=Ke.child,ii=pt.sibling,ui=kS(pt,{mode:"visible",children:ot});if((Ye.mode&pa)===Xs&&(ui.lanes=ft),ui.return=Ye,ui.sibling=null,ii!==null){var di=Ye.deletions;di===null?(Ye.deletions=[ii],Ye.flags|=Ma):di.push(ii)}return Ye.child=ui,ui}function BR(Ke,Ye,ot,ft,pt){var ii=Ye.mode,ui=Ke.child,di=ui.sibling,Ai={mode:"hidden",children:ot},wi;if((ii&pa)===Xs&&Ye.child!==ui){var Di=Ye.child;wi=Di,wi.childLanes=ns,wi.pendingProps=Ai,Ye.mode&Js&&(wi.actualDuration=0,wi.actualStartTime=-1,wi.selfBaseDuration=ui.selfBaseDuration,wi.treeBaseDuration=ui.treeBaseDuration),Ye.deletions=null}else wi=kS(ui,Ai),wi.subtreeFlags=ui.subtreeFlags&zo;var zi;return di!==null?zi=yg(di,ft):(zi=dh(ft,ii,pt,null),zi.flags|=Ka),zi.return=Ye,wi.return=Ye,wi.sibling=zi,Ye.child=wi,zi}function $E(Ke,Ye,ot,ft){ft!==null&&C1(ft),VA(Ye,Ke.child,null,ot);var pt=Ye.pendingProps,ii=pt.children,ui=QC(Ye,ii);return ui.flags|=Ka,Ye.memoizedState=null,ui}function DR(Ke,Ye,ot,ft,pt){var ii=Ye.mode,ui={mode:"visible",children:ot},di=UC(ui,ii),Ai=dh(ft,ii,pt,null);return Ai.flags|=Ka,di.return=Ye,Ai.return=Ye,di.sibling=Ai,Ye.child=di,(Ye.mode&pa)!==Xs&&VA(Ye,Ke.child,null,pt),Ai}function LR(Ke,Ye,ot){return(Ke.mode&pa)===Xs?(be("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),Ke.lanes=ta):r1(Ye)?Ke.lanes=Df:Ke.lanes=Ml,null}function MR(Ke,Ye,ot,ft,pt,ii,ui){if(ot)if(Ye.flags&Ao){Ye.flags&=~Ao;var Ki=_C(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return $E(Ke,Ye,ui,Ki)}else{if(Ye.memoizedState!==null)return Ye.child=Ke.child,Ye.flags|=ia,null;var ts=ft.children,Yi=ft.fallback,ds=DR(Ke,Ye,ts,Yi,ui),Bs=Ye.child;return Bs.memoizedState=$C(ui),Ye.memoizedState=NC,ds}else{if(vw(),(Ye.mode&pa)===Xs)return $E(Ke,Ye,ui,null);if(r1(pt)){var di,Ai,wi;{var Di=F_(pt);di=Di.digest,Ai=Di.message,wi=Di.stack}var zi;Ai?zi=new Error(Ai):zi=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var Gi=_C(zi,di,wi);return $E(Ke,Ye,ui,Gi)}var Zi=Pl(ui,Ke.childLanes);if(yc||Zi){var _r=WE();if(_r!==null){var es=Tv(_r,ui);if(es!==Ia&&es!==ii.retryLane){ii.retryLane=es;var Rs=Ha;gu(Ke,es),el(_r,Ke,es,Rs)}}lI();var Ys=_C(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return $E(Ke,Ye,ui,Ys)}else if(ix(pt)){Ye.flags|=ia,Ye.child=Ke.child;var Hs=sB.bind(null,Ke);return N_(pt,Hs),null}else{xw(Ye,pt,ii.treeContext);var Sa=ft.children,va=QC(Ye,Sa);return va.flags|=ru,va}}}function FS(Ke,Ye,ot){Ke.lanes=da(Ke.lanes,Ye);var ft=Ke.alternate;ft!==null&&(ft.lanes=da(ft.lanes,Ye)),b1(Ke.return,Ye,ot)}function PR(Ke,Ye,ot){for(var ft=Ye;ft!==null;){if(ft.tag===si){var pt=ft.memoizedState;pt!==null&&FS(ft,ot,Ke)}else if(ft.tag===gi)FS(ft,ot,Ke);else if(ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===Ke)return;for(;ft.sibling===null;){if(ft.return===null||ft.return===Ke)return;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}}function kR(Ke){for(var Ye=Ke,ot=null;Ye!==null;){var ft=Ye.alternate;ft!==null&&yE(ft)===null&&(ot=Ye),Ye=Ye.sibling}return ot}function OR(Ke){if(Ke!==void 0&&Ke!=="forwards"&&Ke!=="backwards"&&Ke!=="together"&&!PC[Ke])if(PC[Ke]=!0,typeof Ke=="string")switch(Ke.toLowerCase()){case"together":case"forwards":case"backwards":{be('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',Ke,Ke.toLowerCase());break}case"forward":case"backward":{be('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',Ke,Ke.toLowerCase());break}default:be('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',Ke);break}else be('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',Ke)}function FR(Ke,Ye){Ke!==void 0&&!NE[Ke]&&(Ke!=="collapsed"&&Ke!=="hidden"?(NE[Ke]=!0,be('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',Ke)):Ye!=="forwards"&&Ye!=="backwards"&&(NE[Ke]=!0,be('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',Ke)))}function NS(Ke,Ye){{var ot=Ca(Ke),ft=!ot&&typeof yu(Ke)=="function";if(ot||ft){var pt=ot?"array":"iterable";return be("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",pt,Ye,pt),!1}}return!0}function NR(Ke,Ye){if((Ye==="forwards"||Ye==="backwards")&&Ke!==void 0&&Ke!==null&&Ke!==!1)if(Ca(Ke)){for(var ot=0;ot<Ke.length;ot++)if(!NS(Ke[ot],ot))return}else{var ft=yu(Ke);if(typeof ft=="function"){var pt=ft.call(Ke);if(pt)for(var ii=pt.next(),ui=0;!ii.done;ii=pt.next()){if(!NS(ii.value,ui))return;ui++}}else be('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',Ye)}}function GC(Ke,Ye,ot,ft,pt){var ii=Ke.memoizedState;ii===null?Ke.memoizedState={isBackwards:Ye,rendering:null,renderingStartTime:0,last:ft,tail:ot,tailMode:pt}:(ii.isBackwards=Ye,ii.rendering=null,ii.renderingStartTime=0,ii.last=ft,ii.tail=ot,ii.tailMode=pt)}function $S(Ke,Ye,ot){var ft=Ye.pendingProps,pt=ft.revealOrder,ii=ft.tail,ui=ft.children;OR(pt),FR(ii,pt),NR(ui,pt),ql(Ke,Ye,ui,ot);var di=pc.current,Ai=Z1(di,V0);if(Ai)di=J1(di,V0),Ye.flags|=ia;else{var wi=Ke!==null&&(Ke.flags&ia)!==Ks;wi&&PR(Ye,Ye.child,ot),di=qA(di)}if(rh(Ye,di),(Ye.mode&pa)===Xs)Ye.memoizedState=null;else switch(pt){case"forwards":{var Di=kR(Ye.child),zi;Di===null?(zi=Ye.child,Ye.child=null):(zi=Di.sibling,Di.sibling=null),GC(Ye,!1,zi,Di,ii);break}case"backwards":{var Gi=null,Zi=Ye.child;for(Ye.child=null;Zi!==null;){var _r=Zi.alternate;if(_r!==null&&yE(_r)===null){Ye.child=Zi;break}var es=Zi.sibling;Zi.sibling=Gi,Gi=Zi,Zi=es}GC(Ye,!0,Gi,null,ii);break}case"together":{GC(Ye,!1,null,null,void 0);break}default:Ye.memoizedState=null}return Ye.child}function $R(Ke,Ye,ot){Y1(Ye,Ye.stateNode.containerInfo);var ft=Ye.pendingProps;return Ke===null?Ye.child=VA(Ye,null,ft,ot):ql(Ke,Ye,ft,ot),Ye.child}var QS=!1;function QR(Ke,Ye,ot){var ft=Ye.type,pt=ft._context,ii=Ye.pendingProps,ui=Ye.memoizedProps,di=ii.value;{"value"in ii||QS||(QS=!0,be("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var Ai=Ye.type.propTypes;Ai&&dc(Ai,ii,"prop","Context.Provider")}if(bx(Ye,pt,di),ui!==null){var wi=ui.value;if(Ms(wi,di)){if(ui.children===ii.children&&!Ky())return ed(Ke,Ye,ot)}else Mw(Ye,pt,ot)}var Di=ii.children;return ql(Ke,Ye,Di,ot),Ye.child}var US=!1;function UR(Ke,Ye,ot){var ft=Ye.type;ft._context===void 0?ft!==ft.Consumer&&(US||(US=!0,be("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):ft=ft._context;var pt=Ye.pendingProps,ii=pt.children;typeof ii!="function"&&be("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),zA(Ye,ot);var ui=Go(ft);Yc(Ye);var di;return J0.current=Ye,Tl(!0),di=ii(ui),Tl(!1),wf(),Ye.flags|=Gc,ql(Ke,Ye,di,ot),Ye.child}function tm(){yc=!0}function QE(Ke,Ye){(Ye.mode&pa)===Xs&&Ke!==null&&(Ke.alternate=null,Ye.alternate=null,Ye.flags|=Ka)}function ed(Ke,Ye,ot){return Ke!==null&&(Ye.dependencies=Ke.dependencies),CS(),hm(Ye.lanes),Pl(ot,Ye.childLanes)?(Vw(Ke,Ye),Ye.child):null}function GR(Ke,Ye,ot){{var ft=Ye.return;if(ft===null)throw new Error("Cannot swap the root fiber.");if(Ke.alternate=null,Ye.alternate=null,ot.index=Ye.index,ot.sibling=Ye.sibling,ot.return=Ye.return,ot.ref=Ye.ref,Ye===ft.child)ft.child=ot;else{var pt=ft.child;if(pt===null)throw new Error("Expected parent to have a child.");for(;pt.sibling!==Ye;)if(pt=pt.sibling,pt===null)throw new Error("Expected to find the previous sibling.");pt.sibling=ot}var ii=ft.deletions;return ii===null?(ft.deletions=[Ke],ft.flags|=Ma):ii.push(Ke),ot.flags|=Ka,ot}}function HC(Ke,Ye){var ot=Ke.lanes;return!!Pl(ot,Ye)}function HR(Ke,Ye,ot){switch(Ye.tag){case it:LS(Ye),Ye.stateNode,GA();break;case lt:Vx(Ye);break;case Je:{var ft=Ye.type;of(ft)&&Wy(Ye);break}case st:Y1(Ye,Ye.stateNode.containerInfo);break;case ei:{var pt=Ye.memoizedProps.value,ii=Ye.type._context;bx(Ye,ii,pt);break}case ri:{var ui=Pl(ot,Ye.childLanes);ui&&(Ye.flags|=fa);{var di=Ye.stateNode;di.effectDuration=0,di.passiveEffectDuration=0}}break;case si:{var Ai=Ye.memoizedState;if(Ai!==null){if(Ai.dehydrated!==null)return rh(Ye,qA(pc.current)),Ye.flags|=ia,null;var wi=Ye.child,Di=wi.childLanes;if(Pl(ot,Di))return PS(Ke,Ye,ot);rh(Ye,qA(pc.current));var zi=ed(Ke,Ye,ot);return zi!==null?zi.sibling:null}else rh(Ye,qA(pc.current));break}case gi:{var Gi=(Ke.flags&ia)!==Ks,Zi=Pl(ot,Ye.childLanes);if(Gi){if(Zi)return $S(Ke,Ye,ot);Ye.flags|=ia}var _r=Ye.memoizedState;if(_r!==null&&(_r.rendering=null,_r.tail=null,_r.lastEffect=null),rh(Ye,pc.current),Zi)break;return null}case bi:case Mi:return Ye.lanes=ns,RS(Ke,Ye,ot)}return ed(Ke,Ye,ot)}function GS(Ke,Ye,ot){if(Ye._debugNeedsRemount&&Ke!==null)return GR(Ke,Ye,EI(Ye.type,Ye.key,Ye.pendingProps,Ye._debugOwner||null,Ye.mode,Ye.lanes));if(Ke!==null){var ft=Ke.memoizedProps,pt=Ye.pendingProps;if(ft!==pt||Ky()||Ye.type!==Ke.type)yc=!0;else{var ii=HC(Ke,ot);if(!ii&&(Ye.flags&ia)===Ks)return yc=!1,HR(Ke,Ye,ot);(Ke.flags&Ph)!==Ks?yc=!0:yc=!1}}else if(yc=!1,Al()&&gw(Ye)){var ui=Ye.index,di=Aw();gx(Ye,di,ui)}switch(Ye.lanes=ns,Ye.tag){case tt:return SR(Ke,Ye,Ye.type,ot);case ci:{var Ai=Ye.elementType;return IR(Ke,Ye,Ai,ot)}case Xe:{var wi=Ye.type,Di=Ye.pendingProps,zi=Ye.elementType===wi?Di:Ac(wi,Di);return kC(Ke,Ye,wi,zi,ot)}case Je:{var Gi=Ye.type,Zi=Ye.pendingProps,_r=Ye.elementType===Gi?Zi:Ac(Gi,Zi);return DS(Ke,Ye,Gi,_r,ot)}case it:return yR(Ke,Ye,ot);case lt:return ER(Ke,Ye,ot);case ct:return vR(Ke,Ye);case si:return PS(Ke,Ye,ot);case st:return $R(Ke,Ye,ot);case ni:{var es=Ye.type,Rs=Ye.pendingProps,Ys=Ye.elementType===es?Rs:Ac(es,Rs);return bS(Ke,Ye,es,Ys,ot)}case gt:return AR(Ke,Ye,ot);case ut:return pR(Ke,Ye,ot);case ri:return mR(Ke,Ye,ot);case ei:return QR(Ke,Ye,ot);case mt:return UR(Ke,Ye,ot);case li:{var Hs=Ye.type,Sa=Ye.pendingProps,va=Ac(Hs,Sa);if(Ye.type!==Ye.elementType){var Ki=Hs.propTypes;Ki&&dc(Ki,va,"prop",ba(Hs))}return va=Ac(Hs.type,va),_S(Ke,Ye,Hs,va,ot)}case ai:return wS(Ke,Ye,Ye.type,Ye.pendingProps,ot);case Ci:{var ts=Ye.type,Yi=Ye.pendingProps,ds=Ye.elementType===ts?Yi:Ac(ts,Yi);return xR(Ke,Ye,ts,ds,ot)}case gi:return $S(Ke,Ye,ot);case _i:break;case bi:return RS(Ke,Ye,ot)}throw new Error("Unknown unit of work tag ("+Ye.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function JA(Ke){Ke.flags|=fa}function HS(Ke){Ke.flags|=_l,Ke.flags|=Op}var zS,zC,VS,jS;zS=function(Ke,Ye,ot,ft){for(var pt=Ye.child;pt!==null;){if(pt.tag===lt||pt.tag===ct)f_(Ke,pt.stateNode);else if(pt.tag!==st){if(pt.child!==null){pt.child.return=pt,pt=pt.child;continue}}if(pt===Ye)return;for(;pt.sibling===null;){if(pt.return===null||pt.return===Ye)return;pt=pt.return}pt.sibling.return=pt.return,pt=pt.sibling}},zC=function(Ke,Ye){},VS=function(Ke,Ye,ot,ft,pt){var ii=Ke.memoizedProps;if(ii!==ft){var ui=Ye.stateNode,di=W1(),Ai=h_(ui,ot,ii,ft,pt,di);Ye.updateQueue=Ai,Ai&&JA(Ye)}},jS=function(Ke,Ye,ot,ft){ot!==ft&&JA(Ye)};function nm(Ke,Ye){if(!Al())switch(Ke.tailMode){case"hidden":{for(var ot=Ke.tail,ft=null;ot!==null;)ot.alternate!==null&&(ft=ot),ot=ot.sibling;ft===null?Ke.tail=null:ft.sibling=null;break}case"collapsed":{for(var pt=Ke.tail,ii=null;pt!==null;)pt.alternate!==null&&(ii=pt),pt=pt.sibling;ii===null?!Ye&&Ke.tail!==null?Ke.tail.sibling=null:Ke.tail=null:ii.sibling=null;break}}}function ml(Ke){var Ye=Ke.alternate!==null&&Ke.alternate.child===Ke.child,ot=ns,ft=Ks;if(Ye){if((Ke.mode&Js)!==Xs){for(var Ai=Ke.selfBaseDuration,wi=Ke.child;wi!==null;)ot=da(ot,da(wi.lanes,wi.childLanes)),ft|=wi.subtreeFlags&zo,ft|=wi.flags&zo,Ai+=wi.treeBaseDuration,wi=wi.sibling;Ke.treeBaseDuration=Ai}else for(var Di=Ke.child;Di!==null;)ot=da(ot,da(Di.lanes,Di.childLanes)),ft|=Di.subtreeFlags&zo,ft|=Di.flags&zo,Di.return=Ke,Di=Di.sibling;Ke.subtreeFlags|=ft}else{if((Ke.mode&Js)!==Xs){for(var pt=Ke.actualDuration,ii=Ke.selfBaseDuration,ui=Ke.child;ui!==null;)ot=da(ot,da(ui.lanes,ui.childLanes)),ft|=ui.subtreeFlags,ft|=ui.flags,pt+=ui.actualDuration,ii+=ui.treeBaseDuration,ui=ui.sibling;Ke.actualDuration=pt,Ke.treeBaseDuration=ii}else for(var di=Ke.child;di!==null;)ot=da(ot,da(di.lanes,di.childLanes)),ft|=di.subtreeFlags,ft|=di.flags,di.return=Ke,di=di.sibling;Ke.subtreeFlags|=ft}return Ke.childLanes=ot,Ye}function zR(Ke,Ye,ot){if(ww()&&(Ye.mode&pa)!==Xs&&(Ye.flags&ia)===Ks)return Cx(Ye),GA(),Ye.flags|=Ao|Ul|Fo,!1;var ft=tE(Ye);if(ot!==null&&ot.dehydrated!==null)if(Ke===null){if(!ft)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(bw(Ye),ml(Ye),(Ye.mode&Js)!==Xs){var pt=ot!==null;if(pt){var ii=Ye.child;ii!==null&&(Ye.treeBaseDuration-=ii.treeBaseDuration)}}return!1}else{if(GA(),(Ye.flags&ia)===Ks&&(Ye.memoizedState=null),Ye.flags|=fa,ml(Ye),(Ye.mode&Js)!==Xs){var ui=ot!==null;if(ui){var di=Ye.child;di!==null&&(Ye.treeBaseDuration-=di.treeBaseDuration)}}return!1}else return Ix(),!0}function qS(Ke,Ye,ot){var ft=Ye.pendingProps;switch(A1(Ye),Ye.tag){case tt:case ci:case ai:case Xe:case ni:case gt:case ut:case ri:case mt:case li:return ml(Ye),null;case Je:{var pt=Ye.type;return of(pt)&&Yy(Ye),ml(Ye),null}case it:{var ii=Ye.stateNode;if(jA(Ye),f1(Ye),tC(),ii.pendingContext&&(ii.context=ii.pendingContext,ii.pendingContext=null),Ke===null||Ke.child===null){var ui=tE(Ye);if(ui)JA(Ye);else if(Ke!==null){var di=Ke.memoizedState;(!di.isDehydrated||(Ye.flags&Ao)!==Ks)&&(Ye.flags|=iu,Ix())}}return zC(Ke,Ye),ml(Ye),null}case lt:{X1(Ye);var Ai=zx(),wi=Ye.type;if(Ke!==null&&Ye.stateNode!=null)VS(Ke,Ye,wi,ft,Ai),Ke.ref!==Ye.ref&&HS(Ye);else{if(!ft){if(Ye.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return ml(Ye),null}var Di=W1(),zi=tE(Ye);if(zi)Sw(Ye,Ai,Di)&&JA(Ye);else{var Gi=c_(wi,ft,Ai,Di,Ye);zS(Gi,Ye,!1,!1),Ye.stateNode=Gi,d_(Gi,wi,ft,Ai)&&JA(Ye)}Ye.ref!==null&&HS(Ye)}return ml(Ye),null}case ct:{var Zi=ft;if(Ke&&Ye.stateNode!=null){var _r=Ke.memoizedProps;jS(Ke,Ye,_r,Zi)}else{if(typeof Zi!="string"&&Ye.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var es=zx(),Rs=W1(),Ys=tE(Ye);Ys?Tw(Ye)&&JA(Ye):Ye.stateNode=g_(Zi,es,Rs,Ye)}return ml(Ye),null}case si:{KA(Ye);var Hs=Ye.memoizedState;if(Ke===null||Ke.memoizedState!==null&&Ke.memoizedState.dehydrated!==null){var Sa=zR(Ke,Ye,Hs);if(!Sa)return Ye.flags&Fo?Ye:null}if((Ye.flags&ia)!==Ks)return Ye.lanes=ot,(Ye.mode&Js)!==Xs&&bC(Ye),Ye;var va=Hs!==null,Ki=Ke!==null&&Ke.memoizedState!==null;if(va!==Ki&&va){var ts=Ye.child;if(ts.flags|=Hc,(Ye.mode&pa)!==Xs){var Yi=Ke===null&&(Ye.memoizedProps.unstable_avoidThisFallback!==!0||!ki);Yi||Z1(pc.current,qx)?j2():lI()}}var ds=Ye.updateQueue;if(ds!==null&&(Ye.flags|=fa),ml(Ye),(Ye.mode&Js)!==Xs&&va){var Bs=Ye.child;Bs!==null&&(Ye.treeBaseDuration-=Bs.treeBaseDuration)}return null}case st:return jA(Ye),zC(Ke,Ye),Ke===null&&ow(Ye.stateNode.containerInfo),ml(Ye),null;case ei:var Ss=Ye.type._context;return T1(Ss,Ye),ml(Ye),null;case Ci:{var na=Ye.type;return of(na)&&Yy(Ye),ml(Ye),null}case gi:{KA(Ye);var la=Ye.memoizedState;if(la===null)return ml(Ye),null;var $a=(Ye.flags&ia)!==Ks,Da=la.rendering;if(Da===null)if($a)nm(la,!1);else{var Po=K2()&&(Ke===null||(Ke.flags&ia)===Ks);if(!Po)for(var La=Ye.child;La!==null;){var _o=yE(La);if(_o!==null){$a=!0,Ye.flags|=ia,nm(la,!1);var Nl=_o.updateQueue;return Nl!==null&&(Ye.updateQueue=Nl,Ye.flags|=fa),Ye.subtreeFlags=Ks,jw(Ye,ot),rh(Ye,J1(pc.current,V0)),Ye.child}La=La.sibling}la.tail!==null&&so()>gT()&&(Ye.flags|=ia,$a=!0,nm(la,!1),Ye.lanes=Yp)}else{if(!$a){var Il=yE(Da);if(Il!==null){Ye.flags|=ia,$a=!0;var Ru=Il.updateQueue;if(Ru!==null&&(Ye.updateQueue=Ru,Ye.flags|=fa),nm(la,!0),la.tail===null&&la.tailMode==="hidden"&&!Da.alternate&&!Al())return ml(Ye),null}else so()*2-la.renderingStartTime>gT()&&ot!==Ml&&(Ye.flags|=ia,$a=!0,nm(la,!1),Ye.lanes=Yp)}if(la.isBackwards)Da.sibling=Ye.child,Ye.child=Da;else{var Wl=la.last;Wl!==null?Wl.sibling=Da:Ye.child=Da,la.last=Da}}if(la.tail!==null){var Xl=la.tail;la.rendering=Xl,la.tail=Xl.sibling,la.renderingStartTime=so(),Xl.sibling=null;var $l=pc.current;return $a?$l=J1($l,V0):$l=qA($l),rh(Ye,$l),Xl}return ml(Ye),null}case _i:break;case bi:case Mi:{oI(Ye);var ad=Ye.memoizedState,op=ad!==null;if(Ke!==null){var ym=Ke.memoizedState,Af=ym!==null;Af!==op&&!xi&&(Ye.flags|=Hc)}return!op||(Ye.mode&pa)===Xs?ml(Ye):Pl(gf,Ml)&&(ml(Ye),Ye.subtreeFlags&(Ka|fa)&&(Ye.flags|=Hc)),null}case yi:return null;case Ti:return null}throw new Error("Unknown unit of work tag ("+Ye.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function VR(Ke,Ye,ot){switch(A1(Ye),Ye.tag){case Je:{var ft=Ye.type;of(ft)&&Yy(Ye);var pt=Ye.flags;return pt&Fo?(Ye.flags=pt&~Fo|ia,(Ye.mode&Js)!==Xs&&bC(Ye),Ye):null}case it:{Ye.stateNode,jA(Ye),f1(Ye),tC();var ii=Ye.flags;return(ii&Fo)!==Ks&&(ii&ia)===Ks?(Ye.flags=ii&~Fo|ia,Ye):null}case lt:return X1(Ye),null;case si:{KA(Ye);var ui=Ye.memoizedState;if(ui!==null&&ui.dehydrated!==null){if(Ye.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");GA()}var di=Ye.flags;return di&Fo?(Ye.flags=di&~Fo|ia,(Ye.mode&Js)!==Xs&&bC(Ye),Ye):null}case gi:return KA(Ye),null;case st:return jA(Ye),null;case ei:var Ai=Ye.type._context;return T1(Ai,Ye),null;case bi:case Mi:return oI(Ye),null;case yi:return null;default:return null}}function KS(Ke,Ye,ot){switch(A1(Ye),Ye.tag){case Je:{var ft=Ye.type.childContextTypes;ft!=null&&Yy(Ye);break}case it:{Ye.stateNode,jA(Ye),f1(Ye),tC();break}case lt:{X1(Ye);break}case st:jA(Ye);break;case si:KA(Ye);break;case gi:KA(Ye);break;case ei:var pt=Ye.type._context;T1(pt,Ye);break;case bi:case Mi:oI(Ye);break}}var YS=null;YS=new Set;var UE=!1,yl=!1,jR=typeof WeakSet=="function"?WeakSet:Set,Ps=null,ep=null,tp=null;function qR(Ke){bf(null,function(){throw Ke}),Pp()}var KR=function(Ke,Ye){if(Ye.props=Ke.memoizedProps,Ye.state=Ke.memoizedState,Ke.mode&Js)try{df(),Ye.componentWillUnmount()}finally{ff(Ke)}else Ye.componentWillUnmount()};function WS(Ke,Ye){try{oh(Ko,Ke)}catch(ot){Za(Ke,Ye,ot)}}function VC(Ke,Ye,ot){try{KR(Ke,ot)}catch(ft){Za(Ke,Ye,ft)}}function YR(Ke,Ye,ot){try{ot.componentDidMount()}catch(ft){Za(Ke,Ye,ft)}}function XS(Ke,Ye){try{JS(Ke)}catch(ot){Za(Ke,Ye,ot)}}function np(Ke,Ye){var ot=Ke.ref;if(ot!==null)if(typeof ot=="function"){var ft;try{if(Kr&&Wi&&Ke.mode&Js)try{df(),ft=ot(null)}finally{ff(Ke)}else ft=ot(null)}catch(pt){Za(Ke,Ye,pt)}typeof ft=="function"&&be("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",aa(Ke))}else ot.current=null}function GE(Ke,Ye,ot){try{ot()}catch(ft){Za(Ke,Ye,ft)}}var ZS=!1;function WR(Ke,Ye){l_(Ke.containerInfo),Ps=Ye,XR();var ot=ZS;return ZS=!1,ot}function XR(){for(;Ps!==null;){var Ke=Ps,Ye=Ke.child;(Ke.subtreeFlags&_d)!==Ks&&Ye!==null?(Ye.return=Ke,Ps=Ye):ZR()}}function ZR(){for(;Ps!==null;){var Ke=Ps;Pa(Ke);try{JR(Ke)}catch(ot){Za(Ke,Ke.return,ot)}go();var Ye=Ke.sibling;if(Ye!==null){Ye.return=Ke.return,Ps=Ye;return}Ps=Ke.return}}function JR(Ke){var Ye=Ke.alternate,ot=Ke.flags;if((ot&iu)!==Ks){switch(Pa(Ke),Ke.tag){case Xe:case ni:case ai:break;case Je:{if(Ye!==null){var ft=Ye.memoizedProps,pt=Ye.memoizedState,ii=Ke.stateNode;Ke.type===Ke.elementType&&!hg&&(ii.props!==Ke.memoizedProps&&be("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",aa(Ke)||"instance"),ii.state!==Ke.memoizedState&&be("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",aa(Ke)||"instance"));var ui=ii.getSnapshotBeforeUpdate(Ke.elementType===Ke.type?ft:Ac(Ke.type,ft),pt);{var di=YS;ui===void 0&&!di.has(Ke.type)&&(di.add(Ke.type),be("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",aa(Ke)))}ii.__reactInternalSnapshotBeforeUpdate=ui}break}case it:{{var Ai=Ke.stateNode;M_(Ai.containerInfo)}break}case lt:case ct:case st:case Ci:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}go()}}function Ec(Ke,Ye,ot){var ft=Ye.updateQueue,pt=ft!==null?ft.lastEffect:null;if(pt!==null){var ii=pt.next,ui=ii;do{if((ui.tag&Ke)===Ke){var di=ui.destroy;ui.destroy=void 0,di!==void 0&&((Ke&pl)!==Au?Vg(Ye):(Ke&Ko)!==Au&&jg(Ye),(Ke&lf)!==Au&&Am(!0),GE(Ye,ot,di),(Ke&lf)!==Au&&Am(!1),(Ke&pl)!==Au?Jm():(Ke&Ko)!==Au&&wd())}ui=ui.next}while(ui!==ii)}}function oh(Ke,Ye){var ot=Ye.updateQueue,ft=ot!==null?ot.lastEffect:null;if(ft!==null){var pt=ft.next,ii=pt;do{if((ii.tag&Ke)===Ke){(Ke&pl)!==Au?Zm(Ye):(Ke&Ko)!==Au&&ey(Ye);var ui=ii.create;(Ke&lf)!==Au&&Am(!0),ii.destroy=ui(),(Ke&lf)!==Au&&Am(!1),(Ke&pl)!==Au?jp():(Ke&Ko)!==Au&&ty();{var di=ii.destroy;if(di!==void 0&&typeof di!="function"){var Ai=void 0;(ii.tag&Ko)!==Ks?Ai="useLayoutEffect":(ii.tag&lf)!==Ks?Ai="useInsertionEffect":Ai="useEffect";var wi=void 0;di===null?wi=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof di.then=="function"?wi=`

It looks like you wrote `+Ai+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+Ai+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:wi=" You returned: "+di,be("%s must not return anything besides a function, which is used for clean-up.%s",Ai,wi)}}}ii=ii.next}while(ii!==pt)}}function e2(Ke,Ye){if((Ye.flags&fa)!==Ks)switch(Ye.tag){case ri:{var ot=Ye.stateNode.passiveEffectDuration,ft=Ye.memoizedProps,pt=ft.id,ii=ft.onPostCommit,ui=ES(),di=Ye.alternate===null?"mount":"update";yS()&&(di="nested-update"),typeof ii=="function"&&ii(pt,di,ot,ui);var Ai=Ye.return;e:for(;Ai!==null;){switch(Ai.tag){case it:var wi=Ai.stateNode;wi.passiveEffectDuration+=ot;break e;case ri:var Di=Ai.stateNode;Di.passiveEffectDuration+=ot;break e}Ai=Ai.return}break}}}function t2(Ke,Ye,ot,ft){if((ot.flags&tl)!==Ks)switch(ot.tag){case Xe:case ni:case ai:{if(!yl)if(ot.mode&Js)try{df(),oh(Ko|qo,ot)}finally{ff(ot)}else oh(Ko|qo,ot);break}case Je:{var pt=ot.stateNode;if(ot.flags&fa&&!yl)if(Ye===null)if(ot.type===ot.elementType&&!hg&&(pt.props!==ot.memoizedProps&&be("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",aa(ot)||"instance"),pt.state!==ot.memoizedState&&be("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",aa(ot)||"instance")),ot.mode&Js)try{df(),pt.componentDidMount()}finally{ff(ot)}else pt.componentDidMount();else{var ii=ot.elementType===ot.type?Ye.memoizedProps:Ac(ot.type,Ye.memoizedProps),ui=Ye.memoizedState;if(ot.type===ot.elementType&&!hg&&(pt.props!==ot.memoizedProps&&be("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",aa(ot)||"instance"),pt.state!==ot.memoizedState&&be("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",aa(ot)||"instance")),ot.mode&Js)try{df(),pt.componentDidUpdate(ii,ui,pt.__reactInternalSnapshotBeforeUpdate)}finally{ff(ot)}else pt.componentDidUpdate(ii,ui,pt.__reactInternalSnapshotBeforeUpdate)}var di=ot.updateQueue;di!==null&&(ot.type===ot.elementType&&!hg&&(pt.props!==ot.memoizedProps&&be("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",aa(ot)||"instance"),pt.state!==ot.memoizedState&&be("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",aa(ot)||"instance")),Lx(ot,di,pt));break}case it:{var Ai=ot.updateQueue;if(Ai!==null){var wi=null;if(ot.child!==null)switch(ot.child.tag){case lt:wi=ot.child.stateNode;break;case Je:wi=ot.child.stateNode;break}Lx(ot,Ai,wi)}break}case lt:{var Di=ot.stateNode;if(Ye===null&&ot.flags&fa){var zi=ot.type,Gi=ot.memoizedProps;E_(Di,zi,Gi)}break}case ct:break;case st:break;case ri:{{var Zi=ot.memoizedProps,_r=Zi.onCommit,es=Zi.onRender,Rs=ot.stateNode.effectDuration,Ys=ES(),Hs=Ye===null?"mount":"update";yS()&&(Hs="nested-update"),typeof es=="function"&&es(ot.memoizedProps.id,Hs,ot.actualDuration,ot.treeBaseDuration,ot.actualStartTime,Ys);{typeof _r=="function"&&_r(ot.memoizedProps.id,Hs,Rs,Ys),J2(ot);var Sa=ot.return;e:for(;Sa!==null;){switch(Sa.tag){case it:var va=Sa.stateNode;va.effectDuration+=Rs;break e;case ri:var Ki=Sa.stateNode;Ki.effectDuration+=Rs;break e}Sa=Sa.return}}}break}case si:{u2(Ke,ot);break}case gi:case Ci:case _i:case bi:case Mi:case Ti:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}yl||ot.flags&_l&&JS(ot)}function n2(Ke){switch(Ke.tag){case Xe:case ni:case ai:{if(Ke.mode&Js)try{df(),WS(Ke,Ke.return)}finally{ff(Ke)}else WS(Ke,Ke.return);break}case Je:{var Ye=Ke.stateNode;typeof Ye.componentDidMount=="function"&&YR(Ke,Ke.return,Ye),XS(Ke,Ke.return);break}case lt:{XS(Ke,Ke.return);break}}}function i2(Ke,Ye){for(var ot=null,ft=Ke;;){if(ft.tag===lt){if(ot===null){ot=ft;try{var pt=ft.stateNode;Ye?R_(pt):D_(ft.stateNode,ft.memoizedProps)}catch(ui){Za(Ke,Ke.return,ui)}}}else if(ft.tag===ct){if(ot===null)try{var ii=ft.stateNode;Ye?B_(ii):L_(ii,ft.memoizedProps)}catch(ui){Za(Ke,Ke.return,ui)}}else if(!((ft.tag===bi||ft.tag===Mi)&&ft.memoizedState!==null&&ft!==Ke)){if(ft.child!==null){ft.child.return=ft,ft=ft.child;continue}}if(ft===Ke)return;for(;ft.sibling===null;){if(ft.return===null||ft.return===Ke)return;ot===ft&&(ot=null),ft=ft.return}ot===ft&&(ot=null),ft.sibling.return=ft.return,ft=ft.sibling}}function JS(Ke){var Ye=Ke.ref;if(Ye!==null){var ot=Ke.stateNode,ft;switch(Ke.tag){case lt:ft=ot;break;default:ft=ot}if(typeof Ye=="function"){var pt;if(Ke.mode&Js)try{df(),pt=Ye(ft)}finally{ff(Ke)}else pt=Ye(ft);typeof pt=="function"&&be("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",aa(Ke))}else Ye.hasOwnProperty("current")||be("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",aa(Ke)),Ye.current=ft}}function r2(Ke){var Ye=Ke.alternate;Ye!==null&&(Ye.return=null),Ke.return=null}function eT(Ke){var Ye=Ke.alternate;Ye!==null&&(Ke.alternate=null,eT(Ye));{if(Ke.child=null,Ke.deletions=null,Ke.sibling=null,Ke.tag===lt){var ot=Ke.stateNode;ot!==null&&cw(ot)}Ke.stateNode=null,Ke._debugOwner=null,Ke.return=null,Ke.dependencies=null,Ke.memoizedProps=null,Ke.memoizedState=null,Ke.pendingProps=null,Ke.stateNode=null,Ke.updateQueue=null}}function s2(Ke){for(var Ye=Ke.return;Ye!==null;){if(tT(Ye))return Ye;Ye=Ye.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function tT(Ke){return Ke.tag===lt||Ke.tag===it||Ke.tag===st}function nT(Ke){var Ye=Ke;e:for(;;){for(;Ye.sibling===null;){if(Ye.return===null||tT(Ye.return))return null;Ye=Ye.return}for(Ye.sibling.return=Ye.return,Ye=Ye.sibling;Ye.tag!==lt&&Ye.tag!==ct&&Ye.tag!==pi;){if(Ye.flags&Ka||Ye.child===null||Ye.tag===st)continue e;Ye.child.return=Ye,Ye=Ye.child}if(!(Ye.flags&Ka))return Ye.stateNode}}function a2(Ke){var Ye=s2(Ke);switch(Ye.tag){case lt:{var ot=Ye.stateNode;Ye.flags&ka&&(nx(ot),Ye.flags&=~ka);var ft=nT(Ke);qC(Ke,ft,ot);break}case it:case st:{var pt=Ye.stateNode.containerInfo,ii=nT(Ke);jC(Ke,ii,pt);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function jC(Ke,Ye,ot){var ft=Ke.tag,pt=ft===lt||ft===ct;if(pt){var ii=Ke.stateNode;Ye?T_(ot,ii,Ye):x_(ot,ii)}else if(ft!==st){var ui=Ke.child;if(ui!==null){jC(ui,Ye,ot);for(var di=ui.sibling;di!==null;)jC(di,Ye,ot),di=di.sibling}}}function qC(Ke,Ye,ot){var ft=Ke.tag,pt=ft===lt||ft===ct;if(pt){var ii=Ke.stateNode;Ye?S_(ot,ii,Ye):I_(ot,ii)}else if(ft!==st){var ui=Ke.child;if(ui!==null){qC(ui,Ye,ot);for(var di=ui.sibling;di!==null;)qC(di,Ye,ot),di=di.sibling}}}var El=null,vc=!1;function o2(Ke,Ye,ot){{var ft=Ye;e:for(;ft!==null;){switch(ft.tag){case lt:{El=ft.stateNode,vc=!1;break e}case it:{El=ft.stateNode.containerInfo,vc=!0;break e}case st:{El=ft.stateNode.containerInfo,vc=!0;break e}}ft=ft.return}if(El===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");iT(Ke,Ye,ot),El=null,vc=!1}r2(ot)}function lh(Ke,Ye,ot){for(var ft=ot.child;ft!==null;)iT(Ke,Ye,ft),ft=ft.sibling}function iT(Ke,Ye,ot){switch(zp(ot),ot.tag){case lt:yl||np(ot,Ye);case ct:{{var ft=El,pt=vc;El=null,lh(Ke,Ye,ot),El=ft,vc=pt,El!==null&&(vc?__(El,ot.stateNode):b_(El,ot.stateNode))}return}case pi:{El!==null&&(vc?w_(El,ot.stateNode):i1(El,ot.stateNode));return}case st:{{var ii=El,ui=vc;El=ot.stateNode.containerInfo,vc=!0,lh(Ke,Ye,ot),El=ii,vc=ui}return}case Xe:case ni:case li:case ai:{if(!yl){var di=ot.updateQueue;if(di!==null){var Ai=di.lastEffect;if(Ai!==null){var wi=Ai.next,Di=wi;do{var zi=Di,Gi=zi.destroy,Zi=zi.tag;Gi!==void 0&&((Zi&lf)!==Au?GE(ot,Ye,Gi):(Zi&Ko)!==Au&&(jg(ot),ot.mode&Js?(df(),GE(ot,Ye,Gi),ff(ot)):GE(ot,Ye,Gi),wd())),Di=Di.next}while(Di!==wi)}}}lh(Ke,Ye,ot);return}case Je:{if(!yl){np(ot,Ye);var _r=ot.stateNode;typeof _r.componentWillUnmount=="function"&&VC(ot,Ye,_r)}lh(Ke,Ye,ot);return}case _i:{lh(Ke,Ye,ot);return}case bi:{if(ot.mode&pa){var es=yl;yl=es||ot.memoizedState!==null,lh(Ke,Ye,ot),yl=es}else lh(Ke,Ye,ot);break}default:{lh(Ke,Ye,ot);return}}}function l2(Ke){Ke.memoizedState}function u2(Ke,Ye){var ot=Ye.memoizedState;if(ot===null){var ft=Ye.alternate;if(ft!==null){var pt=ft.memoizedState;if(pt!==null){var ii=pt.dehydrated;ii!==null&&q_(ii)}}}}function rT(Ke){var Ye=Ke.updateQueue;if(Ye!==null){Ke.updateQueue=null;var ot=Ke.stateNode;ot===null&&(ot=Ke.stateNode=new jR),Ye.forEach(function(ft){var pt=aB.bind(null,Ke,ft);if(!ot.has(ft)){if(ot.add(ft),Vo)if(ep!==null&&tp!==null)gm(tp,ep);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");ft.then(pt,pt)}})}}function c2(Ke,Ye,ot){ep=ot,tp=Ke,Pa(Ye),sT(Ye,Ke),Pa(Ye),ep=null,tp=null}function Cc(Ke,Ye,ot){var ft=Ye.deletions;if(ft!==null)for(var pt=0;pt<ft.length;pt++){var ii=ft[pt];try{o2(Ke,Ye,ii)}catch(Ai){Za(ii,Ye,Ai)}}var ui=xg();if(Ye.subtreeFlags&Bl)for(var di=Ye.child;di!==null;)Pa(di),sT(di,Ke),di=di.sibling;Pa(ui)}function sT(Ke,Ye,ot){var ft=Ke.alternate,pt=Ke.flags;switch(Ke.tag){case Xe:case ni:case li:case ai:{if(Cc(Ye,Ke),hf(Ke),pt&fa){try{Ec(lf|qo,Ke,Ke.return),oh(lf|qo,Ke)}catch(na){Za(Ke,Ke.return,na)}if(Ke.mode&Js){try{df(),Ec(Ko|qo,Ke,Ke.return)}catch(na){Za(Ke,Ke.return,na)}ff(Ke)}else try{Ec(Ko|qo,Ke,Ke.return)}catch(na){Za(Ke,Ke.return,na)}}return}case Je:{Cc(Ye,Ke),hf(Ke),pt&_l&&ft!==null&&np(ft,ft.return);return}case lt:{Cc(Ye,Ke),hf(Ke),pt&_l&&ft!==null&&np(ft,ft.return);{if(Ke.flags&ka){var ii=Ke.stateNode;try{nx(ii)}catch(na){Za(Ke,Ke.return,na)}}if(pt&fa){var ui=Ke.stateNode;if(ui!=null){var di=Ke.memoizedProps,Ai=ft!==null?ft.memoizedProps:di,wi=Ke.type,Di=Ke.updateQueue;if(Ke.updateQueue=null,Di!==null)try{v_(ui,Di,wi,Ai,di,Ke)}catch(na){Za(Ke,Ke.return,na)}}}}return}case ct:{if(Cc(Ye,Ke),hf(Ke),pt&fa){if(Ke.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var zi=Ke.stateNode,Gi=Ke.memoizedProps,Zi=ft!==null?ft.memoizedProps:Gi;try{C_(zi,Zi,Gi)}catch(na){Za(Ke,Ke.return,na)}}return}case it:{if(Cc(Ye,Ke),hf(Ke),pt&fa&&ft!==null){var _r=ft.memoizedState;if(_r.isDehydrated)try{j_(Ye.containerInfo)}catch(na){Za(Ke,Ke.return,na)}}return}case st:{Cc(Ye,Ke),hf(Ke);return}case si:{Cc(Ye,Ke),hf(Ke);var es=Ke.child;if(es.flags&Hc){var Rs=es.stateNode,Ys=es.memoizedState,Hs=Ys!==null;if(Rs.isHidden=Hs,Hs){var Sa=es.alternate!==null&&es.alternate.memoizedState!==null;Sa||V2()}}if(pt&fa){try{l2(Ke)}catch(na){Za(Ke,Ke.return,na)}rT(Ke)}return}case bi:{var va=ft!==null&&ft.memoizedState!==null;if(Ke.mode&pa){var Ki=yl;yl=Ki||va,Cc(Ye,Ke),yl=Ki}else Cc(Ye,Ke);if(hf(Ke),pt&Hc){var ts=Ke.stateNode,Yi=Ke.memoizedState,ds=Yi!==null,Bs=Ke;if(ts.isHidden=ds,ds&&!va&&(Bs.mode&pa)!==Xs){Ps=Bs;for(var Ss=Bs.child;Ss!==null;)Ps=Ss,d2(Ss),Ss=Ss.sibling}i2(Bs,ds)}return}case gi:{Cc(Ye,Ke),hf(Ke),pt&fa&&rT(Ke);return}case _i:return;default:{Cc(Ye,Ke),hf(Ke);return}}}function hf(Ke){var Ye=Ke.flags;if(Ye&Ka){try{a2(Ke)}catch(ot){Za(Ke,Ke.return,ot)}Ke.flags&=~Ka}Ye&ru&&(Ke.flags&=~ru)}function f2(Ke,Ye,ot){ep=ot,tp=Ye,Ps=Ke,aT(Ke,Ye,ot),ep=null,tp=null}function aT(Ke,Ye,ot){for(var ft=(Ke.mode&pa)!==Xs;Ps!==null;){var pt=Ps,ii=pt.child;if(pt.tag===bi&&ft){var ui=pt.memoizedState!==null,di=ui||UE;if(di){KC(Ke,Ye,ot);continue}else{var Ai=pt.alternate,wi=Ai!==null&&Ai.memoizedState!==null,Di=wi||yl,zi=UE,Gi=yl;UE=di,yl=Di,yl&&!Gi&&(Ps=pt,h2(pt));for(var Zi=ii;Zi!==null;)Ps=Zi,aT(Zi,Ye,ot),Zi=Zi.sibling;Ps=pt,UE=zi,yl=Gi,KC(Ke,Ye,ot);continue}}(pt.subtreeFlags&tl)!==Ks&&ii!==null?(ii.return=pt,Ps=ii):KC(Ke,Ye,ot)}}function KC(Ke,Ye,ot){for(;Ps!==null;){var ft=Ps;if((ft.flags&tl)!==Ks){var pt=ft.alternate;Pa(ft);try{t2(Ye,pt,ft,ot)}catch(ui){Za(ft,ft.return,ui)}go()}if(ft===Ke){Ps=null;return}var ii=ft.sibling;if(ii!==null){ii.return=ft.return,Ps=ii;return}Ps=ft.return}}function d2(Ke){for(;Ps!==null;){var Ye=Ps,ot=Ye.child;switch(Ye.tag){case Xe:case ni:case li:case ai:{if(Ye.mode&Js)try{df(),Ec(Ko,Ye,Ye.return)}finally{ff(Ye)}else Ec(Ko,Ye,Ye.return);break}case Je:{np(Ye,Ye.return);var ft=Ye.stateNode;typeof ft.componentWillUnmount=="function"&&VC(Ye,Ye.return,ft);break}case lt:{np(Ye,Ye.return);break}case bi:{var pt=Ye.memoizedState!==null;if(pt){oT(Ke);continue}break}}ot!==null?(ot.return=Ye,Ps=ot):oT(Ke)}}function oT(Ke){for(;Ps!==null;){var Ye=Ps;if(Ye===Ke){Ps=null;return}var ot=Ye.sibling;if(ot!==null){ot.return=Ye.return,Ps=ot;return}Ps=Ye.return}}function h2(Ke){for(;Ps!==null;){var Ye=Ps,ot=Ye.child;if(Ye.tag===bi){var ft=Ye.memoizedState!==null;if(ft){lT(Ke);continue}}ot!==null?(ot.return=Ye,Ps=ot):lT(Ke)}}function lT(Ke){for(;Ps!==null;){var Ye=Ps;Pa(Ye);try{n2(Ye)}catch(ft){Za(Ye,Ye.return,ft)}if(go(),Ye===Ke){Ps=null;return}var ot=Ye.sibling;if(ot!==null){ot.return=Ye.return,Ps=ot;return}Ps=Ye.return}}function g2(Ke,Ye,ot,ft){Ps=Ye,A2(Ye,Ke,ot,ft)}function A2(Ke,Ye,ot,ft){for(;Ps!==null;){var pt=Ps,ii=pt.child;(pt.subtreeFlags&su)!==Ks&&ii!==null?(ii.return=pt,Ps=ii):m2(Ke,Ye,ot,ft)}}function m2(Ke,Ye,ot,ft){for(;Ps!==null;){var pt=Ps;if((pt.flags&eo)!==Ks){Pa(pt);try{y2(Ye,pt,ot,ft)}catch(ui){Za(pt,pt.return,ui)}go()}if(pt===Ke){Ps=null;return}var ii=pt.sibling;if(ii!==null){ii.return=pt.return,Ps=ii;return}Ps=pt.return}}function y2(Ke,Ye,ot,ft){switch(Ye.tag){case Xe:case ni:case ai:{if(Ye.mode&Js){TC();try{oh(pl|qo,Ye)}finally{SC(Ye)}}else oh(pl|qo,Ye);break}}}function E2(Ke){Ps=Ke,v2()}function v2(){for(;Ps!==null;){var Ke=Ps,Ye=Ke.child;if((Ps.flags&Ma)!==Ks){var ot=Ke.deletions;if(ot!==null){for(var ft=0;ft<ot.length;ft++){var pt=ot[ft];Ps=pt,x2(pt,Ke)}{var ii=Ke.alternate;if(ii!==null){var ui=ii.child;if(ui!==null){ii.child=null;do{var di=ui.sibling;ui.sibling=null,ui=di}while(ui!==null)}}}Ps=Ke}}(Ke.subtreeFlags&su)!==Ks&&Ye!==null?(Ye.return=Ke,Ps=Ye):C2()}}function C2(){for(;Ps!==null;){var Ke=Ps;(Ke.flags&eo)!==Ks&&(Pa(Ke),I2(Ke),go());var Ye=Ke.sibling;if(Ye!==null){Ye.return=Ke.return,Ps=Ye;return}Ps=Ke.return}}function I2(Ke){switch(Ke.tag){case Xe:case ni:case ai:{Ke.mode&Js?(TC(),Ec(pl|qo,Ke,Ke.return),SC(Ke)):Ec(pl|qo,Ke,Ke.return);break}}}function x2(Ke,Ye){for(;Ps!==null;){var ot=Ps;Pa(ot),T2(ot,Ye),go();var ft=ot.child;ft!==null?(ft.return=ot,Ps=ft):S2(Ke)}}function S2(Ke){for(;Ps!==null;){var Ye=Ps,ot=Ye.sibling,ft=Ye.return;if(eT(Ye),Ye===Ke){Ps=null;return}if(ot!==null){ot.return=ft,Ps=ot;return}Ps=ft}}function T2(Ke,Ye){switch(Ke.tag){case Xe:case ni:case ai:{Ke.mode&Js?(TC(),Ec(pl,Ke,Ye),SC(Ke)):Ec(pl,Ke,Ye);break}}}function b2(Ke){switch(Ke.tag){case Xe:case ni:case ai:{try{oh(Ko|qo,Ke)}catch(ot){Za(Ke,Ke.return,ot)}break}case Je:{var Ye=Ke.stateNode;try{Ye.componentDidMount()}catch(ot){Za(Ke,Ke.return,ot)}break}}}function _2(Ke){switch(Ke.tag){case Xe:case ni:case ai:{try{oh(pl|qo,Ke)}catch(Ye){Za(Ke,Ke.return,Ye)}break}}}function w2(Ke){switch(Ke.tag){case Xe:case ni:case ai:{try{Ec(Ko|qo,Ke,Ke.return)}catch(ot){Za(Ke,Ke.return,ot)}break}case Je:{var Ye=Ke.stateNode;typeof Ye.componentWillUnmount=="function"&&VC(Ke,Ke.return,Ye);break}}}function R2(Ke){switch(Ke.tag){case Xe:case ni:case ai:try{Ec(pl|qo,Ke,Ke.return)}catch(Ye){Za(Ke,Ke.return,Ye)}}}if(typeof Symbol=="function"&&Symbol.for){var im=Symbol.for;im("selector.component"),im("selector.has_pseudo_class"),im("selector.role"),im("selector.test_id"),im("selector.text")}var B2=[];function D2(){B2.forEach(function(Ke){return Ke()})}var L2=ee.ReactCurrentActQueue;function M2(Ke){{var Ye=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,ot=typeof jest<"u";return ot&&Ye!==!1}}function uT(){{var Ke=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!Ke&&L2.current!==null&&be("The current testing environment is not configured to support act(...)"),Ke}}var P2=Math.ceil,YC=ee.ReactCurrentDispatcher,WC=ee.ReactCurrentOwner,vl=ee.ReactCurrentBatchConfig,Ic=ee.ReactCurrentActQueue,Xo=0,cT=1,Cl=2,Vu=4,nd=0,rm=1,gg=2,HE=3,sm=4,fT=5,XC=6,xa=Xo,Kl=null,Co=null,Zo=ns,gf=ns,ZC=Zd(ns),Jo=nd,am=null,zE=ns,om=ns,VE=ns,lm=null,pu=null,JC=0,dT=500,hT=1/0,k2=500,id=null;function um(){hT=so()+k2}function gT(){return hT}var jE=!1,eI=null,ip=null,Ag=!1,uh=null,cm=ns,tI=[],nI=null,O2=50,fm=0,iI=null,rI=!1,qE=!1,F2=50,rp=0,KE=null,dm=Ha,YE=ns,pT=!1;function WE(){return Kl}function Yl(){return(xa&(Cl|Vu))!==Xo?so():(dm!==Ha||(dm=so()),dm)}function ch(Ke){var Ye=Ke.mode;if((Ye&pa)===Xs)return ta;if((xa&Cl)!==Xo&&Zo!==ns)return Bo(Zo);var ot=Dw()!==Bw;if(ot){if(vl.transition!==null){var ft=vl.transition;ft._updatedFibers||(ft._updatedFibers=new Set),ft._updatedFibers.add(Ke)}return YE===Ia&&(YE=Zp()),YE}var pt=uu();if(pt!==Ia)return pt;var ii=A_();return ii}function N2(Ke){var Ye=Ke.mode;return(Ye&pa)===Xs?ta:Sv()}function el(Ke,Ye,ot,ft){lB(),pT&&be("useInsertionEffect must not schedule updates."),rI&&(qE=!0),Nf(Ke,ot,ft),(xa&Cl)!==ns&&Ke===Kl?fB(Ye):(Vo&&i0(Ke,Ye,ot),dB(Ye),Ke===Kl&&((xa&Cl)===Xo&&(om=da(om,ot)),Jo===sm&&fh(Ke,Zo)),mu(Ke,ft),ot===ta&&xa===Xo&&(Ye.mode&pa)===Xs&&!Ic.isBatchingLegacy&&(um(),hx()))}function $2(Ke,Ye,ot){var ft=Ke.current;ft.lanes=Ye,Nf(Ke,Ye,ot),mu(Ke,ot)}function Q2(Ke){return(xa&Cl)!==Xo}function mu(Ke,Ye){var ot=Ke.callbackNode;Cv(Ke,Ye);var ft=Qh(Ke,Ke===Kl?Zo:ns);if(ft===ns){ot!==null&&LT(ot),Ke.callbackNode=null,Ke.callbackPriority=Ia;return}var pt=To(ft),ii=Ke.callbackPriority;if(ii===pt&&!(Ic.current!==null&&ot!==fI)){ot==null&&ii!==ta&&be("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}ot!=null&&LT(ot);var ui;if(pt===ta)Ke.tag===Jd?(Ic.isBatchingLegacy!==null&&(Ic.didScheduleLegacyUpdate=!0),hw(ET.bind(null,Ke))):dx(ET.bind(null,Ke)),Ic.current!==null?Ic.current.push(eh):m_(function(){(xa&(Cl|Vu))===Xo&&eh()}),ui=null;else{var di;switch(Vh(ft)){case nl:di=Gg;break;case jo:di=zl;break;case oc:di=ku;break;case Hh:di=Vc;break;default:di=ku;break}ui=dI(di,mT.bind(null,Ke))}Ke.callbackPriority=pt,Ke.callbackNode=ui}function mT(Ke,Ye){if(aR(),dm=Ha,YE=ns,(xa&(Cl|Vu))!==Xo)throw new Error("Should not already be working.");var ot=Ke.callbackNode,ft=sd();if(ft&&Ke.callbackNode!==ot)return null;var pt=Qh(Ke,Ke===Kl?Zo:ns);if(pt===ns)return null;var ii=!Gh(Ke,pt)&&!oy(Ke,pt)&&!Ye,ui=ii?W2(Ke,pt):ZE(Ke,pt);if(ui!==nd){if(ui===gg){var di=Wp(Ke);di!==ns&&(pt=di,ui=sI(Ke,di))}if(ui===rm){var Ai=am;throw pg(Ke,ns),fh(Ke,pt),mu(Ke,so()),Ai}if(ui===XC)fh(Ke,pt);else{var wi=!Gh(Ke,pt),Di=Ke.current.alternate;if(wi&&!G2(Di)){if(ui=ZE(Ke,pt),ui===gg){var zi=Wp(Ke);zi!==ns&&(pt=zi,ui=sI(Ke,zi))}if(ui===rm){var Gi=am;throw pg(Ke,ns),fh(Ke,pt),mu(Ke,so()),Gi}}Ke.finishedWork=Di,Ke.finishedLanes=pt,U2(Ke,ui,pt)}}return mu(Ke,so()),Ke.callbackNode===ot?mT.bind(null,Ke):null}function sI(Ke,Ye){var ot=lm;if(Lo(Ke)){var ft=pg(Ke,Ye);ft.flags|=Ao,aw(Ke.containerInfo)}var pt=ZE(Ke,Ye);if(pt!==gg){var ii=pu;pu=ot,ii!==null&&yT(ii)}return pt}function yT(Ke){pu===null?pu=Ke:pu.push.apply(pu,Ke)}function U2(Ke,Ye,ot){switch(Ye){case nd:case rm:throw new Error("Root did not complete. This is a bug in React.");case gg:{mg(Ke,pu,id);break}case HE:{if(fh(Ke,ot),dA(ot)&&!MT()){var ft=JC+dT-so();if(ft>10){var pt=Qh(Ke,ns);if(pt!==ns)break;var ii=Ke.suspendedLanes;if(!Ff(ii,ot)){Yl(),t0(Ke,ii);break}Ke.timeoutHandle=t1(mg.bind(null,Ke,pu,id),ft);break}}mg(Ke,pu,id);break}case sm:{if(fh(Ke,ot),ay(ot))break;if(!MT()){var ui=sy(Ke,ot),di=ui,Ai=so()-di,wi=oB(Ai)-Ai;if(wi>10){Ke.timeoutHandle=t1(mg.bind(null,Ke,pu,id),wi);break}}mg(Ke,pu,id);break}case fT:{mg(Ke,pu,id);break}default:throw new Error("Unknown root exit status.")}}function G2(Ke){for(var Ye=Ke;;){if(Ye.flags&Mh){var ot=Ye.updateQueue;if(ot!==null){var ft=ot.stores;if(ft!==null)for(var pt=0;pt<ft.length;pt++){var ii=ft[pt],ui=ii.getSnapshot,di=ii.value;try{if(!Ms(ui(),di))return!1}catch{return!1}}}}var Ai=Ye.child;if(Ye.subtreeFlags&Mh&&Ai!==null){Ai.return=Ye,Ye=Ai;continue}if(Ye===Ke)return!0;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===Ke)return!0;Ye=Ye.return}Ye.sibling.return=Ye.return,Ye=Ye.sibling}return!0}function fh(Ke,Ye){Ye=kd(Ye,VE),Ye=kd(Ye,om),e0(Ke,Ye)}function ET(Ke){if(oR(),(xa&(Cl|Vu))!==Xo)throw new Error("Should not already be working.");sd();var Ye=Qh(Ke,ns);if(!Pl(Ye,ta))return mu(Ke,so()),null;var ot=ZE(Ke,Ye);if(Ke.tag!==Jd&&ot===gg){var ft=Wp(Ke);ft!==ns&&(Ye=ft,ot=sI(Ke,ft))}if(ot===rm){var pt=am;throw pg(Ke,ns),fh(Ke,Ye),mu(Ke,so()),pt}if(ot===XC)throw new Error("Root did not complete. This is a bug in React.");var ii=Ke.current.alternate;return Ke.finishedWork=ii,Ke.finishedLanes=Ye,mg(Ke,pu,id),mu(Ke,so()),null}function H2(Ke,Ye){Ye!==ns&&(Od(Ke,da(Ye,ta)),mu(Ke,so()),(xa&(Cl|Vu))===Xo&&(um(),eh()))}function aI(Ke,Ye){var ot=xa;xa|=cT;try{return Ke(Ye)}finally{xa=ot,xa===Xo&&!Ic.isBatchingLegacy&&(um(),hx())}}function z2(Ke,Ye,ot,ft,pt){var ii=uu(),ui=vl.transition;try{return vl.transition=null,Do(nl),Ke(Ye,ot,ft,pt)}finally{Do(ii),vl.transition=ui,xa===Xo&&um()}}function rd(Ke){uh!==null&&uh.tag===Jd&&(xa&(Cl|Vu))===Xo&&sd();var Ye=xa;xa|=cT;var ot=vl.transition,ft=uu();try{return vl.transition=null,Do(nl),Ke?Ke():void 0}finally{Do(ft),vl.transition=ot,xa=Ye,(xa&(Cl|Vu))===Xo&&eh()}}function vT(){return(xa&(Cl|Vu))!==Xo}function XE(Ke,Ye){Ol(ZC,gf,Ke),gf=da(gf,Ye)}function oI(Ke){gf=ZC.current,kl(ZC,Ke)}function pg(Ke,Ye){Ke.finishedWork=null,Ke.finishedLanes=ns;var ot=Ke.timeoutHandle;if(ot!==n1&&(Ke.timeoutHandle=n1,p_(ot)),Co!==null)for(var ft=Co.return;ft!==null;){var pt=ft.alternate;KS(pt,ft),ft=ft.return}Kl=Ke;var ii=yg(Ke.current,null);return Co=ii,Zo=gf=Ye,Jo=nd,am=null,zE=ns,om=ns,VE=ns,lm=null,pu=null,kw(),gc.discardPendingWarnings(),ii}function CT(Ke,Ye){do{var ot=Co;try{if(sE(),Yx(),go(),WC.current=null,ot===null||ot.return===null){Jo=rm,am=Ye,Co=null;return}if(Kr&&ot.mode&Js&&FE(ot,!0),Vi)if(wf(),Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var ft=Ye;ny(ot,ft,Zo)}else qg(ot,Ye,Zo);dR(Ke,ot.return,ot,Ye,Zo),TT(ot)}catch(pt){Ye=pt,Co===ot&&ot!==null?(ot=ot.return,Co=ot):ot=Co;continue}return}while(!0)}function IT(){var Ke=YC.current;return YC.current=LE,Ke===null?LE:Ke}function xT(Ke){YC.current=Ke}function V2(){JC=so()}function hm(Ke){zE=da(Ke,zE)}function j2(){Jo===nd&&(Jo=HE)}function lI(){(Jo===nd||Jo===HE||Jo===gg)&&(Jo=sm),Kl!==null&&(Uh(zE)||Uh(om))&&fh(Kl,Zo)}function q2(Ke){Jo!==sm&&(Jo=gg),lm===null?lm=[Ke]:lm.push(Ke)}function K2(){return Jo===nd}function ZE(Ke,Ye){var ot=xa;xa|=Cl;var ft=IT();if(Kl!==Ke||Zo!==Ye){if(Vo){var pt=Ke.memoizedUpdaters;pt.size>0&&(gm(Ke,Zo),pt.clear()),AA(Ke,Ye)}id=r0(),pg(Ke,Ye)}Tu(Ye);do try{Y2();break}catch(ii){CT(Ke,ii)}while(!0);if(sE(),xa=ot,xT(ft),Co!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Bd(),Kl=null,Zo=ns,Jo}function Y2(){for(;Co!==null;)ST(Co)}function W2(Ke,Ye){var ot=xa;xa|=Cl;var ft=IT();if(Kl!==Ke||Zo!==Ye){if(Vo){var pt=Ke.memoizedUpdaters;pt.size>0&&(gm(Ke,Zo),pt.clear()),AA(Ke,Ye)}id=r0(),um(),pg(Ke,Ye)}Tu(Ye);do try{X2();break}catch(ii){CT(Ke,ii)}while(!0);return sE(),xT(ft),xa=ot,Co!==null?(Oh(),nd):(Bd(),Kl=null,Zo=ns,Jo)}function X2(){for(;Co!==null&&!Ug();)ST(Co)}function ST(Ke){var Ye=Ke.alternate;Pa(Ke);var ot;(Ke.mode&Js)!==Xs?(xC(Ke),ot=uI(Ye,Ke,gf),FE(Ke,!0)):ot=uI(Ye,Ke,gf),go(),Ke.memoizedProps=Ke.pendingProps,ot===null?TT(Ke):Co=ot,WC.current=null}function TT(Ke){var Ye=Ke;do{var ot=Ye.alternate,ft=Ye.return;if((Ye.flags&Ul)===Ks){Pa(Ye);var pt=void 0;if((Ye.mode&Js)===Xs?pt=qS(ot,Ye,gf):(xC(Ye),pt=qS(ot,Ye,gf),FE(Ye,!1)),go(),pt!==null){Co=pt;return}}else{var ii=VR(ot,Ye);if(ii!==null){ii.flags&=qm,Co=ii;return}if((Ye.mode&Js)!==Xs){FE(Ye,!1);for(var ui=Ye.actualDuration,di=Ye.child;di!==null;)ui+=di.actualDuration,di=di.sibling;Ye.actualDuration=ui}if(ft!==null)ft.flags|=Ul,ft.subtreeFlags=Ks,ft.deletions=null;else{Jo=XC,Co=null;return}}var Ai=Ye.sibling;if(Ai!==null){Co=Ai;return}Ye=ft,Co=Ye}while(Ye!==null);Jo===nd&&(Jo=fT)}function mg(Ke,Ye,ot){var ft=uu(),pt=vl.transition;try{vl.transition=null,Do(nl),Z2(Ke,Ye,ot,ft)}finally{vl.transition=pt,Do(ft)}return null}function Z2(Ke,Ye,ot,ft){do sd();while(uh!==null);if(uB(),(xa&(Cl|Vu))!==Xo)throw new Error("Should not already be working.");var pt=Ke.finishedWork,ii=Ke.finishedLanes;if(zg(ii),pt===null)return Vp(),null;if(ii===ns&&be("root.finishedLanes should not be empty during a commit. This is a bug in React."),Ke.finishedWork=null,Ke.finishedLanes=ns,pt===Ke.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");Ke.callbackNode=null,Ke.callbackPriority=Ia;var ui=da(pt.lanes,pt.childLanes);n0(Ke,ui),Ke===Kl&&(Kl=null,Co=null,Zo=ns),((pt.subtreeFlags&su)!==Ks||(pt.flags&su)!==Ks)&&(Ag||(Ag=!0,nI=ot,dI(ku,function(){return sd(),null})));var di=(pt.subtreeFlags&(_d|Bl|tl|su))!==Ks,Ai=(pt.flags&(_d|Bl|tl|su))!==Ks;if(di||Ai){var wi=vl.transition;vl.transition=null;var Di=uu();Do(nl);var zi=xa;xa|=Vu,WC.current=null,WR(Ke,pt),vS(),c2(Ke,pt,ii),u_(Ke.containerInfo),Ke.current=pt,iy(ii),f2(pt,Ke,ii),Rd(),Wm(),xa=zi,Do(Di),vl.transition=wi}else Ke.current=pt,vS();var Gi=Ag;if(Ag?(Ag=!1,uh=Ke,cm=ii):(rp=0,KE=null),ui=Ke.pendingLanes,ui===ns&&(ip=null),Gi||RT(Ke.current,!1),rc(pt.stateNode,ft),Vo&&Ke.memoizedUpdaters.clear(),D2(),mu(Ke,so()),Ye!==null)for(var Zi=Ke.onRecoverableError,_r=0;_r<Ye.length;_r++){var es=Ye[_r],Rs=es.stack,Ys=es.digest;Zi(es.value,{componentStack:Rs,digest:Ys})}if(jE){jE=!1;var Hs=eI;throw eI=null,Hs}return Pl(cm,ta)&&Ke.tag!==Jd&&sd(),ui=Ke.pendingLanes,Pl(ui,ta)?(sR(),Ke===iI?fm++:(fm=0,iI=Ke)):fm=0,eh(),Vp(),null}function sd(){if(uh!==null){var Ke=Vh(cm),Ye=bv(oc,Ke),ot=vl.transition,ft=uu();try{return vl.transition=null,Do(Ye),eB()}finally{Do(ft),vl.transition=ot}}return!1}function J2(Ke){tI.push(Ke),Ag||(Ag=!0,dI(ku,function(){return sd(),null}))}function eB(){if(uh===null)return!1;var Ke=nI;nI=null;var Ye=uh,ot=cm;if(uh=null,cm=ns,(xa&(Cl|Vu))!==Xo)throw new Error("Cannot flush passive effects while already rendering.");rI=!0,qE=!1,ry(ot);var ft=xa;xa|=Vu,E2(Ye.current),g2(Ye,Ye.current,ot,Ke);{var pt=tI;tI=[];for(var ii=0;ii<pt.length;ii++){var ui=pt[ii];e2(Ye,ui)}}kh(),RT(Ye.current,!0),xa=ft,eh(),qE?Ye===KE?rp++:(rp=0,KE=Ye):rp=0,rI=!1,qE=!1,qc(Ye);{var di=Ye.current.stateNode;di.effectDuration=0,di.passiveEffectDuration=0}return!0}function bT(Ke){return ip!==null&&ip.has(Ke)}function tB(Ke){ip===null?ip=new Set([Ke]):ip.add(Ke)}function nB(Ke){jE||(jE=!0,eI=Ke)}var iB=nB;function _T(Ke,Ye,ot){var ft=dg(ot,Ye),pt=IS(Ke,ft,ta),ii=nh(Ke,pt,ta),ui=Yl();ii!==null&&(Nf(ii,ta,ui),mu(ii,ui))}function Za(Ke,Ye,ot){if(qR(ot),Am(!1),Ke.tag===it){_T(Ke,Ke,ot);return}var ft=null;for(ft=Ye;ft!==null;){if(ft.tag===it){_T(ft,Ke,ot);return}else if(ft.tag===Je){var pt=ft.type,ii=ft.stateNode;if(typeof pt.getDerivedStateFromError=="function"||typeof ii.componentDidCatch=="function"&&!bT(ii)){var ui=dg(ot,Ke),di=RC(ft,ui,ta),Ai=nh(ft,di,ta),wi=Yl();Ai!==null&&(Nf(Ai,ta,wi),mu(Ai,wi));return}}ft=ft.return}be(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,ot)}function rB(Ke,Ye,ot){var ft=Ke.pingCache;ft!==null&&ft.delete(Ye);var pt=Yl();t0(Ke,ot),hB(Ke),Kl===Ke&&Ff(Zo,ot)&&(Jo===sm||Jo===HE&&dA(Zo)&&so()-JC<dT?pg(Ke,ns):VE=da(VE,ot)),mu(Ke,pt)}function wT(Ke,Ye){Ye===Ia&&(Ye=N2(Ke));var ot=Yl(),ft=gu(Ke,Ye);ft!==null&&(Nf(ft,Ye,ot),mu(ft,ot))}function sB(Ke){var Ye=Ke.memoizedState,ot=Ia;Ye!==null&&(ot=Ye.retryLane),wT(Ke,ot)}function aB(Ke,Ye){var ot=Ia,ft;switch(Ke.tag){case si:ft=Ke.stateNode;var pt=Ke.memoizedState;pt!==null&&(ot=pt.retryLane);break;case gi:ft=Ke.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}ft!==null&&ft.delete(Ye),wT(Ke,ot)}function oB(Ke){return Ke<120?120:Ke<480?480:Ke<1080?1080:Ke<1920?1920:Ke<3e3?3e3:Ke<4320?4320:P2(Ke/1960)*1960}function lB(){if(fm>O2)throw fm=0,iI=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");rp>F2&&(rp=0,KE=null,be("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function uB(){gc.flushLegacyContextWarning(),gc.flushPendingUnsafeLifecycleWarnings()}function RT(Ke,Ye){Pa(Ke),JE(Ke,Rl,w2),Ye&&JE(Ke,_f,R2),JE(Ke,Rl,b2),Ye&&JE(Ke,_f,_2),go()}function JE(Ke,Ye,ot){for(var ft=Ke,pt=null;ft!==null;){var ii=ft.subtreeFlags&Ye;ft!==pt&&ft.child!==null&&ii!==Ks?ft=ft.child:((ft.flags&Ye)!==Ks&&ot(ft),ft.sibling!==null?ft=ft.sibling:ft=pt=ft.return)}}var ev=null;function BT(Ke){{if((xa&Cl)!==Xo||!(Ke.mode&pa))return;var Ye=Ke.tag;if(Ye!==tt&&Ye!==it&&Ye!==Je&&Ye!==Xe&&Ye!==ni&&Ye!==li&&Ye!==ai)return;var ot=aa(Ke)||"ReactComponent";if(ev!==null){if(ev.has(ot))return;ev.add(ot)}else ev=new Set([ot]);var ft=io;try{Pa(Ke),be("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{ft?Pa(Ke):go()}}}var uI;{var cB=null;uI=function(Ke,Ye,ot){var ft=NT(cB,Ye);try{return GS(Ke,Ye,ot)}catch(ii){if(Cw()||ii!==null&&typeof ii=="object"&&typeof ii.then=="function")throw ii;if(sE(),Yx(),KS(Ke,Ye),NT(Ye,ft),Ye.mode&Js&&xC(Ye),bf(null,GS,null,Ke,Ye,ot),Ev()){var pt=Pp();typeof pt=="object"&&pt!==null&&pt._suppressLogging&&typeof ii=="object"&&ii!==null&&!ii._suppressLogging&&(ii._suppressLogging=!0)}throw ii}}}var DT=!1,cI;cI=new Set;function fB(Ke){if(Sl&&!nR())switch(Ke.tag){case Xe:case ni:case ai:{var Ye=Co&&aa(Co)||"Unknown",ot=Ye;if(!cI.has(ot)){cI.add(ot);var ft=aa(Ke)||"Unknown";be("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",ft,Ye,Ye)}break}case Je:{DT||(be("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),DT=!0);break}}}function gm(Ke,Ye){if(Vo){var ot=Ke.memoizedUpdaters;ot.forEach(function(ft){i0(Ke,ft,Ye)})}}var fI={};function dI(Ke,Ye){{var ot=Ic.current;return ot!==null?(ot.push(Ye),fI):Qg(Ke,Ye)}}function LT(Ke){if(Ke!==fI)return Ym(Ke)}function MT(){return Ic.current!==null}function dB(Ke){{if(Ke.mode&pa){if(!uT())return}else if(!M2()||xa!==Xo||Ke.tag!==Xe&&Ke.tag!==ni&&Ke.tag!==ai)return;if(Ic.current===null){var Ye=io;try{Pa(Ke),be(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,aa(Ke))}finally{Ye?Pa(Ke):go()}}}}function hB(Ke){Ke.tag!==Jd&&uT()&&Ic.current===null&&be(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function Am(Ke){pT=Ke}var ju=null,sp=null,gB=function(Ke){ju=Ke};function ap(Ke){{if(ju===null)return Ke;var Ye=ju(Ke);return Ye===void 0?Ke:Ye.current}}function hI(Ke){return ap(Ke)}function gI(Ke){{if(ju===null)return Ke;var Ye=ju(Ke);if(Ye===void 0){if(Ke!=null&&typeof Ke.render=="function"){var ot=ap(Ke.render);if(Ke.render!==ot){var ft={$$typeof:ho,render:ot};return Ke.displayName!==void 0&&(ft.displayName=Ke.displayName),ft}}return Ke}return Ye.current}}function PT(Ke,Ye){{if(ju===null)return!1;var ot=Ke.elementType,ft=Ye.type,pt=!1,ii=typeof ft=="object"&&ft!==null?ft.$$typeof:null;switch(Ke.tag){case Je:{typeof ft=="function"&&(pt=!0);break}case Xe:{(typeof ft=="function"||ii===Ho)&&(pt=!0);break}case ni:{(ii===ho||ii===Ho)&&(pt=!0);break}case li:case ai:{(ii===bc||ii===Ho)&&(pt=!0);break}default:return!1}if(pt){var ui=ju(ot);if(ui!==void 0&&ui===ju(ft))return!0}return!1}}function kT(Ke){{if(ju===null||typeof WeakSet!="function")return;sp===null&&(sp=new WeakSet),sp.add(Ke)}}var AB=function(Ke,Ye){{if(ju===null)return;var ot=Ye.staleFamilies,ft=Ye.updatedFamilies;sd(),rd(function(){AI(Ke.current,ft,ot)})}},pB=function(Ke,Ye){{if(Ke.context!==_u)return;sd(),rd(function(){pm(Ye,Ke,null,null)})}};function AI(Ke,Ye,ot){{var ft=Ke.alternate,pt=Ke.child,ii=Ke.sibling,ui=Ke.tag,di=Ke.type,Ai=null;switch(ui){case Xe:case ai:case Je:Ai=di;break;case ni:Ai=di.render;break}if(ju===null)throw new Error("Expected resolveFamily to be set during hot reload.");var wi=!1,Di=!1;if(Ai!==null){var zi=ju(Ai);zi!==void 0&&(ot.has(zi)?Di=!0:Ye.has(zi)&&(ui===Je?Di=!0:wi=!0))}if(sp!==null&&(sp.has(Ke)||ft!==null&&sp.has(ft))&&(Di=!0),Di&&(Ke._debugNeedsRemount=!0),Di||wi){var Gi=gu(Ke,ta);Gi!==null&&el(Gi,Ke,ta,Ha)}pt!==null&&!Di&&AI(pt,Ye,ot),ii!==null&&AI(ii,Ye,ot)}}var mB=function(Ke,Ye){{var ot=new Set,ft=new Set(Ye.map(function(pt){return pt.current}));return pI(Ke.current,ft,ot),ot}};function pI(Ke,Ye,ot){{var ft=Ke.child,pt=Ke.sibling,ii=Ke.tag,ui=Ke.type,di=null;switch(ii){case Xe:case ai:case Je:di=ui;break;case ni:di=ui.render;break}var Ai=!1;di!==null&&Ye.has(di)&&(Ai=!0),Ai?yB(Ke,ot):ft!==null&&pI(ft,Ye,ot),pt!==null&&pI(pt,Ye,ot)}}function yB(Ke,Ye){{var ot=EB(Ke,Ye);if(ot)return;for(var ft=Ke;;){switch(ft.tag){case lt:Ye.add(ft.stateNode);return;case st:Ye.add(ft.stateNode.containerInfo);return;case it:Ye.add(ft.stateNode.containerInfo);return}if(ft.return===null)throw new Error("Expected to reach root first.");ft=ft.return}}}function EB(Ke,Ye){for(var ot=Ke,ft=!1;;){if(ot.tag===lt)ft=!0,Ye.add(ot.stateNode);else if(ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===Ke)return ft;for(;ot.sibling===null;){if(ot.return===null||ot.return===Ke)return ft;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}return!1}var mI;{mI=!1;try{var OT=Object.preventExtensions({})}catch{mI=!0}}function vB(Ke,Ye,ot,ft){this.tag=Ke,this.key=ot,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=Ye,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=ft,this.flags=Ks,this.subtreeFlags=Ks,this.deletions=null,this.lanes=ns,this.childLanes=ns,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!mI&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var wu=function(Ke,Ye,ot,ft){return new vB(Ke,Ye,ot,ft)};function yI(Ke){var Ye=Ke.prototype;return!!(Ye&&Ye.isReactComponent)}function CB(Ke){return typeof Ke=="function"&&!yI(Ke)&&Ke.defaultProps===void 0}function IB(Ke){if(typeof Ke=="function")return yI(Ke)?Je:Xe;if(Ke!=null){var Ye=Ke.$$typeof;if(Ye===ho)return ni;if(Ye===bc)return li}return tt}function yg(Ke,Ye){var ot=Ke.alternate;ot===null?(ot=wu(Ke.tag,Ye,Ke.key,Ke.mode),ot.elementType=Ke.elementType,ot.type=Ke.type,ot.stateNode=Ke.stateNode,ot._debugSource=Ke._debugSource,ot._debugOwner=Ke._debugOwner,ot._debugHookTypes=Ke._debugHookTypes,ot.alternate=Ke,Ke.alternate=ot):(ot.pendingProps=Ye,ot.type=Ke.type,ot.flags=Ks,ot.subtreeFlags=Ks,ot.deletions=null,ot.actualDuration=0,ot.actualStartTime=-1),ot.flags=Ke.flags&zo,ot.childLanes=Ke.childLanes,ot.lanes=Ke.lanes,ot.child=Ke.child,ot.memoizedProps=Ke.memoizedProps,ot.memoizedState=Ke.memoizedState,ot.updateQueue=Ke.updateQueue;var ft=Ke.dependencies;switch(ot.dependencies=ft===null?null:{lanes:ft.lanes,firstContext:ft.firstContext},ot.sibling=Ke.sibling,ot.index=Ke.index,ot.ref=Ke.ref,ot.selfBaseDuration=Ke.selfBaseDuration,ot.treeBaseDuration=Ke.treeBaseDuration,ot._debugNeedsRemount=Ke._debugNeedsRemount,ot.tag){case tt:case Xe:case ai:ot.type=ap(Ke.type);break;case Je:ot.type=hI(Ke.type);break;case ni:ot.type=gI(Ke.type);break}return ot}function xB(Ke,Ye){Ke.flags&=zo|Ka;var ot=Ke.alternate;if(ot===null)Ke.childLanes=ns,Ke.lanes=Ye,Ke.child=null,Ke.subtreeFlags=Ks,Ke.memoizedProps=null,Ke.memoizedState=null,Ke.updateQueue=null,Ke.dependencies=null,Ke.stateNode=null,Ke.selfBaseDuration=0,Ke.treeBaseDuration=0;else{Ke.childLanes=ot.childLanes,Ke.lanes=ot.lanes,Ke.child=ot.child,Ke.subtreeFlags=Ks,Ke.deletions=null,Ke.memoizedProps=ot.memoizedProps,Ke.memoizedState=ot.memoizedState,Ke.updateQueue=ot.updateQueue,Ke.type=ot.type;var ft=ot.dependencies;Ke.dependencies=ft===null?null:{lanes:ft.lanes,firstContext:ft.firstContext},Ke.selfBaseDuration=ot.selfBaseDuration,Ke.treeBaseDuration=ot.treeBaseDuration}return Ke}function SB(Ke,Ye,ot){var ft;return Ke===Xy?(ft=pa,Ye===!0&&(ft|=lo,ft|=ou)):ft=Xs,Vo&&(ft|=Js),wu(it,null,null,ft)}function EI(Ke,Ye,ot,ft,pt,ii){var ui=tt,di=Ke;if(typeof Ke=="function")yI(Ke)?(ui=Je,di=hI(di)):di=ap(di);else if(typeof Ke=="string")ui=lt;else e:switch(Ke){case Ql:return dh(ot.children,pt,ii,Ye);case Sc:ui=ut,pt|=lo,(pt&pa)!==Xs&&(pt|=ou);break;case Tc:return TB(ot,pt,ii,Ye);case Zl:return bB(ot,pt,ii,Ye);case pf:return _B(ot,pt,ii,Ye);case gh:return FT(ot,pt,ii,Ye);case Cg:case Eg:case lp:case up:case vg:default:{if(typeof Ke=="object"&&Ke!==null)switch(Ke.$$typeof){case od:ui=ei;break e;case hh:ui=mt;break e;case ho:ui=ni,di=gI(di);break e;case bc:ui=li;break e;case Ho:ui=ci,di=null;break e}var Ai="";{(Ke===void 0||typeof Ke=="object"&&Ke!==null&&Object.keys(Ke).length===0)&&(Ai+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var wi=ft?aa(ft):null;wi&&(Ai+=`

Check the render method of \``+wi+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(Ke==null?Ke:typeof Ke)+"."+Ai))}}var Di=wu(ui,ot,Ye,pt);return Di.elementType=Ke,Di.type=di,Di.lanes=ii,Di._debugOwner=ft,Di}function vI(Ke,Ye,ot){var ft=null;ft=Ke._owner;var pt=Ke.type,ii=Ke.key,ui=Ke.props,di=EI(pt,ii,ui,ft,Ye,ot);return di._debugSource=Ke._source,di._debugOwner=Ke._owner,di}function dh(Ke,Ye,ot,ft){var pt=wu(gt,Ke,ft,Ye);return pt.lanes=ot,pt}function TB(Ke,Ye,ot,ft){typeof Ke.id!="string"&&be('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof Ke.id);var pt=wu(ri,Ke,ft,Ye|Js);return pt.elementType=Tc,pt.lanes=ot,pt.stateNode={effectDuration:0,passiveEffectDuration:0},pt}function bB(Ke,Ye,ot,ft){var pt=wu(si,Ke,ft,Ye);return pt.elementType=Zl,pt.lanes=ot,pt}function _B(Ke,Ye,ot,ft){var pt=wu(gi,Ke,ft,Ye);return pt.elementType=pf,pt.lanes=ot,pt}function FT(Ke,Ye,ot,ft){var pt=wu(bi,Ke,ft,Ye);pt.elementType=gh,pt.lanes=ot;var ii={isHidden:!1};return pt.stateNode=ii,pt}function CI(Ke,Ye,ot){var ft=wu(ct,Ke,null,Ye);return ft.lanes=ot,ft}function wB(){var Ke=wu(lt,null,null,Xs);return Ke.elementType="DELETED",Ke}function RB(Ke){var Ye=wu(pi,null,null,Xs);return Ye.stateNode=Ke,Ye}function II(Ke,Ye,ot){var ft=Ke.children!==null?Ke.children:[],pt=wu(st,ft,Ke.key,Ye);return pt.lanes=ot,pt.stateNode={containerInfo:Ke.containerInfo,pendingChildren:null,implementation:Ke.implementation},pt}function NT(Ke,Ye){return Ke===null&&(Ke=wu(tt,null,null,Xs)),Ke.tag=Ye.tag,Ke.key=Ye.key,Ke.elementType=Ye.elementType,Ke.type=Ye.type,Ke.stateNode=Ye.stateNode,Ke.return=Ye.return,Ke.child=Ye.child,Ke.sibling=Ye.sibling,Ke.index=Ye.index,Ke.ref=Ye.ref,Ke.pendingProps=Ye.pendingProps,Ke.memoizedProps=Ye.memoizedProps,Ke.updateQueue=Ye.updateQueue,Ke.memoizedState=Ye.memoizedState,Ke.dependencies=Ye.dependencies,Ke.mode=Ye.mode,Ke.flags=Ye.flags,Ke.subtreeFlags=Ye.subtreeFlags,Ke.deletions=Ye.deletions,Ke.lanes=Ye.lanes,Ke.childLanes=Ye.childLanes,Ke.alternate=Ye.alternate,Ke.actualDuration=Ye.actualDuration,Ke.actualStartTime=Ye.actualStartTime,Ke.selfBaseDuration=Ye.selfBaseDuration,Ke.treeBaseDuration=Ye.treeBaseDuration,Ke._debugSource=Ye._debugSource,Ke._debugOwner=Ye._debugOwner,Ke._debugNeedsRemount=Ye._debugNeedsRemount,Ke._debugHookTypes=Ye._debugHookTypes,Ke}function BB(Ke,Ye,ot,ft,pt){this.tag=Ye,this.containerInfo=Ke,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=n1,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Ia,this.eventTimes=gA(ns),this.expirationTimes=gA(Ha),this.pendingLanes=ns,this.suspendedLanes=ns,this.pingedLanes=ns,this.expiredLanes=ns,this.mutableReadLanes=ns,this.finishedLanes=ns,this.entangledLanes=ns,this.entanglements=gA(ns),this.identifierPrefix=ft,this.onRecoverableError=pt,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var ii=this.pendingUpdatersLaneMap=[],ui=0;ui<Wa;ui++)ii.push(new Set)}switch(Ye){case Xy:this._debugRootType=ot?"hydrateRoot()":"createRoot()";break;case Jd:this._debugRootType=ot?"hydrate()":"render()";break}}function $T(Ke,Ye,ot,ft,pt,ii,ui,di,Ai,wi){var Di=new BB(Ke,Ye,ot,di,Ai),zi=SB(Ye,ii);Di.current=zi,zi.stateNode=Di;{var Gi={element:ft,isDehydrated:ot,cache:null,transitions:null,pendingSuspenseBoundaries:null};zi.memoizedState=Gi}return B1(zi),Di}var xI="18.2.0";function DB(Ke,Ye,ot){var ft=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return gs(ft),{$$typeof:no,key:ft==null?null:""+ft,children:Ke,containerInfo:Ye,implementation:ot}}var SI,TI;SI=!1,TI={};function QT(Ke){if(!Ke)return _u;var Ye=nu(Ke),ot=dw(Ye);if(Ye.tag===Je){var ft=Ye.type;if(of(ft))return cx(Ye,ft,ot)}return ot}function LB(Ke,Ye){{var ot=nu(Ke);if(ot===void 0){if(typeof Ke.render=="function")throw new Error("Unable to find node on an unmounted component.");var ft=Object.keys(Ke).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+ft)}var pt=au(ot);if(pt===null)return null;if(pt.mode&lo){var ii=aa(ot)||"Component";if(!TI[ii]){TI[ii]=!0;var ui=io;try{Pa(pt),ot.mode&lo?be("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",Ye,Ye,ii):be("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",Ye,Ye,ii)}finally{ui?Pa(ui):go()}}}return pt.stateNode}}function UT(Ke,Ye,ot,ft,pt,ii,ui,di){var Ai=!1,wi=null;return $T(Ke,Ye,Ai,wi,ot,ft,pt,ii,ui)}function GT(Ke,Ye,ot,ft,pt,ii,ui,di,Ai,wi){var Di=!0,zi=$T(ot,ft,Di,Ke,pt,ii,ui,di,Ai);zi.context=QT(null);var Gi=zi.current,Zi=Yl(),_r=ch(Gi),es=Jf(Zi,_r);return es.callback=Ye??null,nh(Gi,es,_r),$2(zi,_r,Zi),zi}function pm(Ke,Ye,ot,ft){Xm(Ye,Ke);var pt=Ye.current,ii=Yl(),ui=ch(pt);Rf(ui);var di=QT(ot);Ye.context===null?Ye.context=di:Ye.pendingContext=di,Sl&&io!==null&&!SI&&(SI=!0,be(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,aa(io)||"Unknown"));var Ai=Jf(ii,ui);Ai.payload={element:Ke},ft=ft===void 0?null:ft,ft!==null&&(typeof ft!="function"&&be("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",ft),Ai.callback=ft);var wi=nh(pt,Ai,ui);return wi!==null&&(el(wi,pt,ui,ii),cE(wi,pt,ui)),ui}function tv(Ke){var Ye=Ke.current;if(!Ye.child)return null;switch(Ye.child.tag){case lt:return Ye.child.stateNode;default:return Ye.child.stateNode}}function MB(Ke){switch(Ke.tag){case it:{var Ye=Ke.stateNode;if(Lo(Ye)){var ot=Iv(Ye);H2(Ye,ot)}break}case si:{rd(function(){var pt=gu(Ke,ta);if(pt!==null){var ii=Yl();el(pt,Ke,ta,ii)}});var ft=ta;bI(Ke,ft);break}}}function HT(Ke,Ye){var ot=Ke.memoizedState;ot!==null&&ot.dehydrated!==null&&(ot.retryLane=uy(ot.retryLane,Ye))}function bI(Ke,Ye){HT(Ke,Ye);var ot=Ke.alternate;ot&&HT(ot,Ye)}function PB(Ke){if(Ke.tag===si){var Ye=Dd,ot=gu(Ke,Ye);if(ot!==null){var ft=Yl();el(ot,Ke,Ye,ft)}bI(Ke,Ye)}}function kB(Ke){if(Ke.tag===si){var Ye=ch(Ke),ot=gu(Ke,Ye);if(ot!==null){var ft=Yl();el(ot,Ke,Ye,ft)}bI(Ke,Ye)}}function zT(Ke){var Ye=Km(Ke);return Ye===null?null:Ye.stateNode}var VT=function(Ke){return null};function OB(Ke){return VT(Ke)}var jT=function(Ke){return!1};function FB(Ke){return jT(Ke)}var qT=null,KT=null,YT=null,WT=null,XT=null,ZT=null,JT=null,eb=null,tb=null;{var nb=function(Ke,Ye,ot){var ft=Ye[ot],pt=Ca(Ke)?Ke.slice():ga({},Ke);return ot+1===Ye.length?(Ca(pt)?pt.splice(ft,1):delete pt[ft],pt):(pt[ft]=nb(Ke[ft],Ye,ot+1),pt)},ib=function(Ke,Ye){return nb(Ke,Ye,0)},rb=function(Ke,Ye,ot,ft){var pt=Ye[ft],ii=Ca(Ke)?Ke.slice():ga({},Ke);if(ft+1===Ye.length){var ui=ot[ft];ii[ui]=ii[pt],Ca(ii)?ii.splice(pt,1):delete ii[pt]}else ii[pt]=rb(Ke[pt],Ye,ot,ft+1);return ii},sb=function(Ke,Ye,ot){if(Ye.length!==ot.length){ve("copyWithRename() expects paths of the same length");return}else for(var ft=0;ft<ot.length-1;ft++)if(Ye[ft]!==ot[ft]){ve("copyWithRename() expects paths to be the same except for the deepest key");return}return rb(Ke,Ye,ot,0)},ab=function(Ke,Ye,ot,ft){if(ot>=Ye.length)return ft;var pt=Ye[ot],ii=Ca(Ke)?Ke.slice():ga({},Ke);return ii[pt]=ab(Ke[pt],Ye,ot+1,ft),ii},ob=function(Ke,Ye,ot){return ab(Ke,Ye,0,ot)},_I=function(Ke,Ye){for(var ot=Ke.memoizedState;ot!==null&&Ye>0;)ot=ot.next,Ye--;return ot};qT=function(Ke,Ye,ot,ft){var pt=_I(Ke,Ye);if(pt!==null){var ii=ob(pt.memoizedState,ot,ft);pt.memoizedState=ii,pt.baseState=ii,Ke.memoizedProps=ga({},Ke.memoizedProps);var ui=gu(Ke,ta);ui!==null&&el(ui,Ke,ta,Ha)}},KT=function(Ke,Ye,ot){var ft=_I(Ke,Ye);if(ft!==null){var pt=ib(ft.memoizedState,ot);ft.memoizedState=pt,ft.baseState=pt,Ke.memoizedProps=ga({},Ke.memoizedProps);var ii=gu(Ke,ta);ii!==null&&el(ii,Ke,ta,Ha)}},YT=function(Ke,Ye,ot,ft){var pt=_I(Ke,Ye);if(pt!==null){var ii=sb(pt.memoizedState,ot,ft);pt.memoizedState=ii,pt.baseState=ii,Ke.memoizedProps=ga({},Ke.memoizedProps);var ui=gu(Ke,ta);ui!==null&&el(ui,Ke,ta,Ha)}},WT=function(Ke,Ye,ot){Ke.pendingProps=ob(Ke.memoizedProps,Ye,ot),Ke.alternate&&(Ke.alternate.pendingProps=Ke.pendingProps);var ft=gu(Ke,ta);ft!==null&&el(ft,Ke,ta,Ha)},XT=function(Ke,Ye){Ke.pendingProps=ib(Ke.memoizedProps,Ye),Ke.alternate&&(Ke.alternate.pendingProps=Ke.pendingProps);var ot=gu(Ke,ta);ot!==null&&el(ot,Ke,ta,Ha)},ZT=function(Ke,Ye,ot){Ke.pendingProps=sb(Ke.memoizedProps,Ye,ot),Ke.alternate&&(Ke.alternate.pendingProps=Ke.pendingProps);var ft=gu(Ke,ta);ft!==null&&el(ft,Ke,ta,Ha)},JT=function(Ke){var Ye=gu(Ke,ta);Ye!==null&&el(Ye,Ke,ta,Ha)},eb=function(Ke){VT=Ke},tb=function(Ke){jT=Ke}}function NB(Ke){var Ye=au(Ke);return Ye===null?null:Ye.stateNode}function $B(Ke){return null}function QB(){return io}function UB(Ke){var Ye=Ke.findFiberByHostInstance,ot=ee.ReactCurrentDispatcher;return Hp({bundleType:Ke.bundleType,version:Ke.version,rendererPackageName:Ke.rendererPackageName,rendererConfig:Ke.rendererConfig,overrideHookState:qT,overrideHookStateDeletePath:KT,overrideHookStateRenamePath:YT,overrideProps:WT,overridePropsDeletePath:XT,overridePropsRenamePath:ZT,setErrorHandler:eb,setSuspenseHandler:tb,scheduleUpdate:JT,currentDispatcherRef:ot,findHostInstanceByFiber:NB,findFiberByHostInstance:Ye||$B,findHostInstancesForRefresh:mB,scheduleRefresh:AB,scheduleRoot:pB,setRefreshHandler:gB,getCurrentFiber:QB,reconcilerVersion:xI})}var lb=typeof reportError=="function"?reportError:function(Ke){console.error(Ke)};function wI(Ke){this._internalRoot=Ke}nv.prototype.render=wI.prototype.render=function(Ke){var Ye=this._internalRoot;if(Ye===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?be("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):iv(arguments[1])?be("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&be("You passed a second argument to root.render(...) but it only accepts one argument.");var ot=Ye.containerInfo;if(ot.nodeType!==So){var ft=zT(Ye.current);ft&&ft.parentNode!==ot&&be("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}pm(Ke,Ye,null,null)},nv.prototype.unmount=wI.prototype.unmount=function(){typeof arguments[0]=="function"&&be("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var Ke=this._internalRoot;if(Ke!==null){this._internalRoot=null;var Ye=Ke.containerInfo;vT()&&be("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),rd(function(){pm(null,Ke,null,null)}),sx(Ye)}};function GB(Ke,Ye){if(!iv(Ke))throw new Error("createRoot(...): Target container is not a DOM element.");ub(Ke);var ot=!1,ft=!1,pt="",ii=lb;Ye!=null&&(Ye.hydrate?ve("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===yo&&be(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),Ye.unstable_strictMode===!0&&(ot=!0),Ye.identifierPrefix!==void 0&&(pt=Ye.identifierPrefix),Ye.onRecoverableError!==void 0&&(ii=Ye.onRecoverableError),Ye.transitionCallbacks!==void 0&&Ye.transitionCallbacks);var ui=UT(Ke,Xy,null,ot,ft,pt,ii);zy(ui.current,Ke);var di=Ke.nodeType===So?Ke.parentNode:Ke;return S0(di),new wI(ui)}function nv(Ke){this._internalRoot=Ke}function HB(Ke){Ke&&yy(Ke)}nv.prototype.unstable_scheduleHydration=HB;function zB(Ke,Ye,ot){if(!iv(Ke))throw new Error("hydrateRoot(...): Target container is not a DOM element.");ub(Ke),Ye===void 0&&be("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var ft=ot??null,pt=ot!=null&&ot.hydratedSources||null,ii=!1,ui=!1,di="",Ai=lb;ot!=null&&(ot.unstable_strictMode===!0&&(ii=!0),ot.identifierPrefix!==void 0&&(di=ot.identifierPrefix),ot.onRecoverableError!==void 0&&(Ai=ot.onRecoverableError));var wi=GT(Ye,null,Ke,Xy,ft,ii,ui,di,Ai);if(zy(wi.current,Ke),S0(Ke),pt)for(var Di=0;Di<pt.length;Di++){var zi=pt[Di];Ww(wi,zi)}return new nv(wi)}function iv(Ke){return!!(Ke&&(Ke.nodeType===bl||Ke.nodeType===Iu||Ke.nodeType===vf||!Li))}function mm(Ke){return!!(Ke&&(Ke.nodeType===bl||Ke.nodeType===Iu||Ke.nodeType===vf||Ke.nodeType===So&&Ke.nodeValue===" react-mount-point-unstable "))}function ub(Ke){Ke.nodeType===bl&&Ke.tagName&&Ke.tagName.toUpperCase()==="BODY"&&be("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),k0(Ke)&&(Ke._reactRootContainer?be("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):be("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var VB=ee.ReactCurrentOwner,cb;cb=function(Ke){if(Ke._reactRootContainer&&Ke.nodeType!==So){var Ye=zT(Ke._reactRootContainer.current);Ye&&Ye.parentNode!==Ke&&be("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var ot=!!Ke._reactRootContainer,ft=RI(Ke),pt=!!(ft&&Xd(ft));pt&&!ot&&be("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),Ke.nodeType===bl&&Ke.tagName&&Ke.tagName.toUpperCase()==="BODY"&&be("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function RI(Ke){return Ke?Ke.nodeType===Iu?Ke.documentElement:Ke.firstChild:null}function fb(){}function jB(Ke,Ye,ot,ft,pt){if(pt){if(typeof ft=="function"){var ii=ft;ft=function(){var Gi=tv(ui);ii.call(Gi)}}var ui=GT(Ye,ft,Ke,Jd,null,!1,!1,"",fb);Ke._reactRootContainer=ui,zy(ui.current,Ke);var di=Ke.nodeType===So?Ke.parentNode:Ke;return S0(di),rd(),ui}else{for(var Ai;Ai=Ke.lastChild;)Ke.removeChild(Ai);if(typeof ft=="function"){var wi=ft;ft=function(){var Gi=tv(Di);wi.call(Gi)}}var Di=UT(Ke,Jd,null,!1,!1,"",fb);Ke._reactRootContainer=Di,zy(Di.current,Ke);var zi=Ke.nodeType===So?Ke.parentNode:Ke;return S0(zi),rd(function(){pm(Ye,Di,ot,ft)}),Di}}function qB(Ke,Ye){Ke!==null&&typeof Ke!="function"&&be("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",Ye,Ke)}function rv(Ke,Ye,ot,ft,pt){cb(ot),qB(pt===void 0?null:pt,"render");var ii=ot._reactRootContainer,ui;if(!ii)ui=jB(ot,Ye,Ke,pt,ft);else{if(ui=ii,typeof pt=="function"){var di=pt;pt=function(){var Ai=tv(ui);di.call(Ai)}}pm(Ye,ui,Ke,pt)}return tv(ui)}function KB(Ke){{var Ye=VB.current;if(Ye!==null&&Ye.stateNode!==null){var ot=Ye.stateNode._warnedAboutRefsInRender;ot||be("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",ba(Ye.type)||"A component"),Ye.stateNode._warnedAboutRefsInRender=!0}}return Ke==null?null:Ke.nodeType===bl?Ke:LB(Ke,"findDOMNode")}function YB(Ke,Ye,ot){if(be("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mm(Ye))throw new Error("Target container is not a DOM element.");{var ft=k0(Ye)&&Ye._reactRootContainer===void 0;ft&&be("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return rv(null,Ke,Ye,!0,ot)}function WB(Ke,Ye,ot){if(be("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mm(Ye))throw new Error("Target container is not a DOM element.");{var ft=k0(Ye)&&Ye._reactRootContainer===void 0;ft&&be("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return rv(null,Ke,Ye,!1,ot)}function XB(Ke,Ye,ot,ft){if(be("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mm(ot))throw new Error("Target container is not a DOM element.");if(Ke==null||!Lh(Ke))throw new Error("parentComponent must be a valid React Component");return rv(Ke,Ye,ot,!1,ft)}function ZB(Ke){if(!mm(Ke))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var Ye=k0(Ke)&&Ke._reactRootContainer===void 0;Ye&&be("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(Ke._reactRootContainer){{var ot=RI(Ke),ft=ot&&!Xd(ot);ft&&be("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return rd(function(){rv(null,null,Ke,!1,function(){Ke._reactRootContainer=null,sx(Ke)})}),!0}else{{var pt=RI(Ke),ii=!!(pt&&Xd(pt)),ui=Ke.nodeType===bl&&mm(Ke.parentNode)&&!!Ke.parentNode._reactRootContainer;ii&&be("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",ui?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}Ds(MB),fy(PB),qh(kB),a0(uu),hy(zh),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&be("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),Vm(Jb),kg(aI,z2,rd);function JB(Ke,Ye){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!iv(Ye))throw new Error("Target container is not a DOM element.");return DB(Ke,Ye,null,ot)}function eD(Ke,Ye,ot,ft){return XB(Ke,Ye,ot,ft)}var BI={usingClientEntryPoint:!1,Events:[Xd,FA,Vy,Pg,Rh,aI]};function tD(Ke,Ye){return BI.usingClientEntryPoint||be('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),GB(Ke,Ye)}function nD(Ke,Ye,ot){return BI.usingClientEntryPoint||be('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),zB(Ke,Ye,ot)}function iD(Ke){return vT()&&be("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),rd(Ke)}var rD=UB({findFiberByHostInstance:ig,bundleType:1,version:xI,rendererPackageName:"react-dom"});if(!rD&&hi&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var db=window.location.protocol;/^(https?|file):$/.test(db)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(db==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}reactDom_development.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BI,reactDom_development.createPortal=JB,reactDom_development.createRoot=tD,reactDom_development.findDOMNode=KB,reactDom_development.flushSync=iD,reactDom_development.hydrate=YB,reactDom_development.hydrateRoot=nD,reactDom_development.render=WB,reactDom_development.unmountComponentAtNode=ZB,reactDom_development.unstable_batchedUpdates=aI,reactDom_development.unstable_renderSubtreeIntoContainer=eD,reactDom_development.version=xI,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),reactDom_development}function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(process.env.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ie){console.error(ie)}}}process.env.NODE_ENV==="production"?(checkDCE(),reactDom.exports=requireReactDom_production_min()):reactDom.exports=requireReactDom_development();var reactDomExports=reactDom.exports;const $7SXl2$reactdom=getDefaultExportFromCjs$1(reactDomExports);var createRoot,m$2=reactDomExports;if(process.env.NODE_ENV==="production")createRoot=m$2.createRoot,m$2.hydrateRoot;else{var i$1=m$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;createRoot=function(ie,Z){i$1.usingClientEntryPoint=!0;try{return m$2.createRoot(ie,Z)}finally{i$1.usingClientEntryPoint=!1}}}var __defProp=Object.defineProperty,__defNormalProp=(ie,Z,ee)=>Z in ie?__defProp(ie,Z,{enumerable:!0,configurable:!0,writable:!0,value:ee}):ie[Z]=ee,__publicField=(ie,Z,ee)=>(__defNormalProp(ie,typeof Z!="symbol"?Z+"":Z,ee),ee);const EMPTY=[];Object.freeze(EMPTY);const emptyAnnotationPage={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:EMPTY,motivation:null,label:null,thumbnail:EMPTY,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,provider:EMPTY,items:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,rendering:EMPTY,service:EMPTY},emptyCanvas={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,duration:0,height:0,width:0},emptyCollection={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,services:EMPTY},emptyManifest={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:EMPTY,behavior:EMPTY,homepage:EMPTY,items:EMPTY,label:null,logo:EMPTY,metadata:EMPTY,motivation:null,navDate:null,provider:EMPTY,partOf:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:EMPTY,requiredStatement:null,rights:null,seeAlso:EMPTY,service:EMPTY,services:EMPTY,start:null,structures:EMPTY,summary:null,thumbnail:EMPTY,viewingDirection:"left-to-right"},emptyRange={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,start:null,supplementary:null,viewingDirection:"left-to-right"},emptyAgent={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:EMPTY,seeAlso:EMPTY,homepage:EMPTY};function ensureArray$1(ie){return Array.isArray(ie)?ie:[ie]}const types$1=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function identifyResource$1(ie){if(typeof ie>"u"||ie===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(ie))throw new Error("Array is not a valid entity");if(typeof ie!="object")throw new Error(`${typeof ie} is not a valid entity`);if(typeof ie.type=="string"){const Z=types$1.indexOf(ie.type);if(Z!==-1)return types$1[Z]}if(ie.profile)return"Service";throw new Error("Resource type is not known")}class Traverse$1{constructor(Z,ee={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...Z},this.options={allowUndefinedReturn:!1,...ee}}static all(Z){return new Traverse$1({collection:[Z],manifest:[Z],canvas:[Z],annotationCollection:[Z],annotationPage:[Z],annotation:[Z],contentResource:[Z],choice:[Z],range:[Z],service:[Z]})}traverseDescriptive(Z){return Z.thumbnail&&(Z.thumbnail=Z.thumbnail.map(ee=>this.traverseType(ee,this.traversals.contentResource))),Z.provider&&(Z.provider=Z.provider.map(ee=>this.traverseAgent(ee))),Z}traverseLinking(Z){return Z.seeAlso&&(Z.seeAlso=Z.seeAlso.map(ee=>this.traverseType(ee,this.traversals.contentResource))),Z.service&&(Z.service=ensureArray$1(Z.service).map(ee=>this.traverseType(ee,this.traversals.service))),Z.services&&(Z.services=Z.services.map(ee=>this.traverseType(ee,this.traversals.service))),Z.logo&&(Z.logo=Z.logo.map(ee=>this.traverseType(ee,this.traversals.contentResource))),Z.homepage&&(Z.homepage=Z.homepage.map(ee=>this.traverseType(ee,this.traversals.contentResource))),Z.partOf&&(Z.partOf=Z.partOf.map(ee=>typeof ee=="string"||!ee.type?this.traverseType(ee,this.traversals.contentResource):ee.type==="Canvas"?this.traverseType(ee,this.traversals.canvas):ee.type==="AnnotationCollection"?this.traverseType(ee,this.traversals.annotationCollection):ee.type==="Collection"?this.traverseType(ee,this.traversals.collection):this.traverseType(ee,this.traversals.contentResource))),Z.start&&(Z.start=Z.start?this.traverseType(Z.start,this.traversals.canvas):null),Z.rendering&&(Z.rendering=Z.rendering.map(ee=>this.traverseType(ee,this.traversals.contentResource))),Z.supplementary&&(Z.supplementary=Z.supplementary.map(ee=>this.traverseType(ee,this.traversals.contentResource))),Z}traverseCollectionItems(Z){return Z.items&&Z.items.map(ee=>ee.type==="Collection"?this.traverseCollection(ee):this.traverseManifest(ee)),Z}traverseCollection(Z){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(Z))))),this.traversals.collection)}traverseManifestItems(Z){return Z.items&&(Z.items=Z.items.map(ee=>this.traverseCanvas(ee))),Z}traverseManifestStructures(Z){return Z.structures&&(Z.structures=Z.structures.map(ee=>this.traverseRange(ee))),Z}traverseManifest(Z){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(Z)))))),this.traversals.manifest)}traverseCanvasItems(Z){return Z.items=(Z.items||[]).map(ee=>this.traverseAnnotationPage(ee)),Z}traverseInlineAnnotationPages(Z){return typeof Z=="string"||!Z||Z.annotations&&(Z.annotations=Z.annotations.map(ee=>this.traverseAnnotationPage(ee))),Z}traverseCanvas(Z){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(Z))))),this.traversals.canvas)}traverseAnnotationPageItems(Z){return Z.items&&(Z.items=Z.items.map(ee=>this.traverseAnnotation(ee))),Z}traverseAnnotationPage(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(Z))),this.traversals.annotationPage)}traverseAnnotationBody(Z){return Array.isArray(Z.body)?Z.body=Z.body.map(ee=>this.traverseContentResource(ee)):Z.body&&(Z.body=this.traverseContentResource(Z.body)),Z}traversePosterCanvas(Z){return Z.posterCanvas&&(Z.posterCanvas=this.traverseCanvas(Z.posterCanvas)),Z.placeholderCanvas&&(Z.placeholderCanvas=this.traverseCanvas(Z.placeholderCanvas)),Z.accompanyingCanvas&&(Z.accompanyingCanvas=this.traverseCanvas(Z.accompanyingCanvas)),Z}traverseAnnotation(Z){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(Z)),this.traversals.annotation)}traverseContentResourceLinking(Z){return typeof Z=="string"||!Z||Z&&Z.service&&(Z.service=ensureArray$1(Z.service||[]).map(ee=>this.traverseType(ee,this.traversals.service))),Z}traverseContentResource(Z){return Z.type==="Choice"&&(Z.items=Z.items.map(ee=>this.traverseContentResource(ee))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(Z)),this.traversals.contentResource)}traverseRangeRanges(Z){return Z.items&&(Z.items=Z.items.map(ee=>typeof ee=="string"?this.traverseCanvas({id:ee,type:"Canvas"}):ee.type==="Manifest"?this.traverseManifest(ee):this.traverseRange(ee))),Z}traverseRange(Z){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(Z)))),this.traversals.range)}traverseAgent(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(Z)),this.traversals.agent)}traverseType(Z,ee){return ee.reduce((ae,ye)=>{const ve=ye(ae);return typeof ve>"u"&&!this.options.allowUndefinedReturn?ae:ve},Z)}traverseService(Z){return this.traverseType(Z,this.traversals.service)}traverseUnknown(Z){const ee=identifyResource$1(Z);switch(ee){case"Collection":return this.traverseCollection(Z);case"Manifest":return this.traverseManifest(Z);case"Canvas":return this.traverseCanvas(Z);case"AnnotationPage":return this.traverseAnnotationPage(Z);case"Annotation":return this.traverseAnnotation(Z);case"ContentResource":return this.traverseContentResource(Z);case"Range":return this.traverseRange(Z);case"Service":return this.traverseService(Z);case"Agent":return this.traverseAgent(Z);default:throw new Error(`Unknown or unsupported resource type of ${ee}`)}}}const types=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function identifyResource(ie){if(typeof ie>"u"||ie===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(ie))throw new Error("Array is not a valid entity");if(typeof ie!="object")throw new Error(`${typeof ie} is not a valid entity`);if(typeof ie["@type"]=="string"){const Z=types.indexOf(ie["@type"]);if(Z!==-1)return types[Z]}if(ie.profile)return"Service";if(ie.format||ie["@type"])return"ContentResource";throw new Error("Resource type is not known")}class Traverse{constructor(Z,ee={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...Z},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...ee}}static all(Z){return new Traverse({collection:[Z],manifest:[Z],canvas:[Z],annotationList:[Z],sequence:[Z],annotation:[Z],contentResource:[Z],choice:[Z],range:[Z],service:[Z],layer:[Z]})}traverseCollection(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(Z))),this.traversals.collection)}traverseCollectionItems(Z){if(this.options.mergeMemberProperties){const ee=[...(Z.manifests||[]).map(ae=>typeof ae=="string"?{"@id":ae,"@type":"sc:Manifest"}:ae),...(Z.collections||[]).map(ae=>typeof ae=="string"?{"@id":ae,"@type":"sc:Collection"}:ae),...Z.members||[]];delete Z.collections,delete Z.manifests,Z.members=ee}return Z.manifests&&(Z.manifests=Z.manifests.map(ee=>this.traverseManifest(typeof ee=="string"?{"@id":ee,"@type":"sc:Manifest"}:ee))),Z.collections&&(Z.collections=Z.collections.map(ee=>this.traverseCollection(typeof ee=="string"?{"@id":ee,"@type":"sc:Collection"}:ee))),Z.members&&(Z.members=Z.members.map(ee=>typeof ee=="string"?ee:this.traverseUnknown(ee))),Z}traverseManifest(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(Z))),this.traversals.manifest)}traverseManifestItems(Z){return Z.sequences&&(Z.sequences=Z.sequences.map(ee=>this.traverseSequence(ee))),Z.structures&&(Z.structures=Z.structures.map(ee=>this.traverseRange(ee))),Z}traverseSequence(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(Z))),this.traversals.sequence)}traverseSequenceItems(Z){return Z.canvases&&(Z.canvases=Z.canvases.map(ee=>this.traverseCanvas(ee))),Z}traverseCanvas(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(Z))),this.traversals.canvas)}traverseCanvasItems(Z){return Z.images&&(Z.images=Z.images.map(ee=>this.traverseAnnotation(ee))),Z.otherContent&&(Z.otherContent=Z.otherContent.map(ee=>this.traverseAnnotationList(ee))),Z}traverseRange(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(Z))),this.traversals.range)}traverseRangeItems(Z){if(this.options.mergeMemberProperties){const ee=[...(Z.ranges||[]).map(ae=>typeof ae=="string"?{"@id":ae,"@type":"sc:Range"}:ae),...(Z.canvases||[]).map(ae=>typeof ae=="string"?{"@id":ae,"@type":"sc:Canvas"}:ae),...Z.members||[]];delete Z.ranges,delete Z.canvases,Z.members=ee.length?ee.map(ae=>this.traverseUnknown(ae)):void 0}return Z}traverseAnnotationList(Z){const ee=typeof Z=="string"?{"@id":Z,"@type":"sc:AnnotationList"}:Z;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(ee)),this.traversals.annotationList)}traverseAnnotationListItems(Z){return Z.resources&&(Z.resources=Z.resources.map(ee=>this.traverseAnnotation(ee))),Z}traverseAnnotation(Z){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(Z))),this.traversals.annotation)}traverseAnnotationItems(Z){return Z.resource&&(Array.isArray(Z.resource)?Z.resource=Z.resource.map(ee=>this.traverseContentResource(ee)):Z.resource=this.traverseContentResource(Z.resource)),Z.on,Z}traverseLayer(Z){return this.traverseType(this.traverseLinking(this.traverseLayerItems(Z)),this.traversals.layer)}traverseLayerItems(Z){return Z.otherContent&&(Z.otherContent=Z.otherContent.map(ee=>this.traverseAnnotationList(ee))),Z}traverseChoice(Z){return this.traverseType(this.traverseChoiceItems(Z),this.traversals.choice)}traverseChoiceItems(Z){return Z.default&&Z.default!=="rdf:nil"&&(Z.default=this.traverseContentResource(Z.default)),Z.item&&Z.item!=="rdf:nil"&&(Z.item=Z.item.map(ee=>this.traverseContentResource(ee))),Z}traverseService(Z){return this.traverseType(this.traverseLinking(Z),this.traversals.service)}traverseContentResource(Z){return Z["@type"]==="oa:Choice"?this.traverseChoice(Z):this.traverseType(this.traverseDescriptive(this.traverseLinking(Z)),this.traversals.contentResource)}traverseUnknown(Z){if(!Z["@type"]||typeof Z=="string")return Z;switch(identifyResource(Z)){case"sc:Collection":return this.traverseCollection(Z);case"sc:Manifest":return this.traverseManifest(Z);case"sc:Canvas":return this.traverseCanvas(Z);case"sc:Sequence":return this.traverseSequence(Z);case"sc:Range":return this.traverseRange(Z);case"oa:Annotation":return this.traverseAnnotation(Z);case"sc:AnnotationList":return this.traverseAnnotationList(Z);case"sc:Layer":return this.traverseLayer(Z);case"Service":return this.traverseService(Z);case"oa:Choice":return this.traverseChoice(Z);case"ContentResource":return this.traverseContentResource(Z)}return Z.profile?this.traverseService(Z):Z}traverseImageResource(Z){const ee=Array.isArray(Z),ae=Array.isArray(Z)?Z:[Z],ye=[];for(const ve of ae)typeof ve=="string"?ye.push(this.traverseContentResource({"@id":ve,"@type":"dctypes:Image"})):ye.push(this.traverseContentResource(ve));return!ee&&!this.options.convertPropsToArray?ye[0]:ye}traverseDescriptive(Z){return Z.thumbnail&&(Z.thumbnail=this.traverseImageResource(Z.thumbnail)),Z.logo&&(Z.logo=this.traverseImageResource(Z.logo)),Z}traverseOneOrMoreServices(Z){const ee=Array.isArray(Z),ae=Array.isArray(Z)?Z:[Z],ye=[];for(const ve of ae)ye.push(this.traverseService(ve));return!ee&&!this.options.convertPropsToArray?ye[0]:ye}traverseLinking(Z){return Z.related&&(Z.related=this.traverseOneOrManyType(Z.related,this.traversals.contentResource)),Z.rendering&&(Z.rendering=this.traverseOneOrManyType(Z.rendering,this.traversals.contentResource)),Z.service&&(Z.service=this.traverseOneOrMoreServices(Z.service)),Z.seeAlso&&(Z.seeAlso=this.traverseOneOrManyType(Z.seeAlso,this.traversals.contentResource)),Z.within&&(typeof Z.within=="string"||(Z.within=this.traverseOneOrManyType(Z.within,this.traversals.contentResource))),Z.startCanvas&&(typeof Z.startCanvas=="string"?Z.startCanvas=this.traverseType({"@id":Z.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):Z.startCanvas&&this.traverseType(Z.startCanvas,this.traversals.canvas)),Z.contentLayer&&(typeof Z.contentLayer=="string"?Z.contentLayer=this.traverseLayer({"@id":Z.contentLayer,"@type":"sc:Layer"}):Z.contentLayer=this.traverseLayer(Z.contentLayer)),Z}traverseOneOrManyType(Z,ee){if(!Array.isArray(Z))if(this.options.convertPropsToArray)Z=[Z];else return this.traverseType(Z,ee);return Z.map(ae=>this.traverseType(ae,ee))}traverseType(Z,ee){return ee.reduce((ae,ye)=>{const ve=ye(ae);return typeof ve>"u"&&!this.options.allowUndefinedReturn?ae:ve},Z)}}const STANFORD_IIIF_IMAGE_COMPLIANCE_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",STANFORD_IIIF_IMAGE_COMPLIANCE_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",STANFORD_IIIF_IMAGE_COMPLIANCE_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",STANFORD_IIIF_IMAGE_CONFORMANCE_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",STANFORD_IIIF_IMAGE_CONFORMANCE_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",STANFORD_IIIF_IMAGE_CONFORMANCE_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",STANFORD_IIIF_1_IMAGE_COMPLIANCE_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",STANFORD_IIIF_1_IMAGE_COMPLIANCE_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",STANFORD_IIIF_1_IMAGE_COMPLIANCE_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",STANFORD_IIIF_1_IMAGE_CONFORMANCE_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",STANFORD_IIIF_1_IMAGE_CONFORMANCE_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",STANFORD_IIIF_1_IMAGE_CONFORMANCE_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",IIIF_1_IMAGE_LEVEL_0="http://iiif.io/api/image/1/level0.json",IIIF_1_IMAGE_LEVEL_0_PROFILE="http://iiif.io/api/image/1/profiles/level0.json",IIIF_1_IMAGE_LEVEL_1="http://iiif.io/api/image/1/level1.json",IIIF_1_IMAGE_LEVEL_1_PROFILE="http://iiif.io/api/image/1/profiles/level1.json",IIIF_1_IMAGE_LEVEL_2="http://iiif.io/api/image/1/level2.json",IIIF_1_IMAGE_LEVEL_2_PROFILE="http://iiif.io/api/image/1/profiles/level2.json",IIIF_2_IMAGE_LEVEL_0="http://iiif.io/api/image/2/level0.json",IIIF_2_IMAGE_LEVEL_0_PROFILE="http://iiif.io/api/image/2/profiles/level0.json",IIIF_2_IMAGE_LEVEL_1="http://iiif.io/api/image/2/level1.json",IIIF_2_IMAGE_LEVEL_1_PROFILE="http://iiif.io/api/image/2/profiles/level1.json",IIIF_2_IMAGE_LEVEL_2="http://iiif.io/api/image/2/level2.json",IIIF_2_IMAGE_LEVEL_2_PROFILE="http://iiif.io/api/image/2/profiles/level2.json",IIIF_3_IMAGE_LEVEL_0="level0",IIIF_3_IMAGE_LEVEL_1="level1",IIIF_3_IMAGE_LEVEL_2="level2",IIIF_2_IMAGE_LEVEL_0_NO_JSON="http://iiif.io/api/image/2/level0",IIIF_2_IMAGE_LEVEL_1_NO_JSON="http://iiif.io/api/image/2/level1",IIIF_2_IMAGE_LEVEL_2_NO_JSON="http://iiif.io/api/image/2/level2",level1Support=[IIIF_2_IMAGE_LEVEL_1_NO_JSON,IIIF_2_IMAGE_LEVEL_2_NO_JSON,STANFORD_IIIF_IMAGE_COMPLIANCE_1,STANFORD_IIIF_IMAGE_COMPLIANCE_2,STANFORD_IIIF_IMAGE_CONFORMANCE_1,STANFORD_IIIF_IMAGE_CONFORMANCE_2,STANFORD_IIIF_1_IMAGE_COMPLIANCE_1,STANFORD_IIIF_1_IMAGE_COMPLIANCE_2,STANFORD_IIIF_1_IMAGE_CONFORMANCE_1,STANFORD_IIIF_1_IMAGE_CONFORMANCE_2,IIIF_1_IMAGE_LEVEL_1,IIIF_1_IMAGE_LEVEL_1_PROFILE,IIIF_1_IMAGE_LEVEL_2,IIIF_1_IMAGE_LEVEL_2_PROFILE,IIIF_2_IMAGE_LEVEL_1,IIIF_2_IMAGE_LEVEL_1_PROFILE,IIIF_2_IMAGE_LEVEL_2,IIIF_2_IMAGE_LEVEL_2_PROFILE,IIIF_3_IMAGE_LEVEL_1,IIIF_3_IMAGE_LEVEL_2],imageServiceProfiles=[IIIF_2_IMAGE_LEVEL_0_NO_JSON,IIIF_2_IMAGE_LEVEL_1_NO_JSON,IIIF_2_IMAGE_LEVEL_2_NO_JSON,STANFORD_IIIF_IMAGE_COMPLIANCE_0,STANFORD_IIIF_IMAGE_COMPLIANCE_1,STANFORD_IIIF_IMAGE_COMPLIANCE_2,STANFORD_IIIF_IMAGE_CONFORMANCE_0,STANFORD_IIIF_IMAGE_CONFORMANCE_1,STANFORD_IIIF_IMAGE_CONFORMANCE_2,STANFORD_IIIF_1_IMAGE_COMPLIANCE_0,STANFORD_IIIF_1_IMAGE_COMPLIANCE_1,STANFORD_IIIF_1_IMAGE_COMPLIANCE_2,STANFORD_IIIF_1_IMAGE_CONFORMANCE_0,STANFORD_IIIF_1_IMAGE_CONFORMANCE_1,STANFORD_IIIF_1_IMAGE_CONFORMANCE_2,IIIF_1_IMAGE_LEVEL_0,IIIF_1_IMAGE_LEVEL_0_PROFILE,IIIF_1_IMAGE_LEVEL_1,IIIF_1_IMAGE_LEVEL_1_PROFILE,IIIF_1_IMAGE_LEVEL_2,IIIF_1_IMAGE_LEVEL_2_PROFILE,IIIF_2_IMAGE_LEVEL_0,IIIF_2_IMAGE_LEVEL_0_PROFILE,IIIF_2_IMAGE_LEVEL_1,IIIF_2_IMAGE_LEVEL_1_PROFILE,IIIF_2_IMAGE_LEVEL_2,IIIF_2_IMAGE_LEVEL_2_PROFILE,IIIF_3_IMAGE_LEVEL_0,IIIF_3_IMAGE_LEVEL_1,IIIF_3_IMAGE_LEVEL_2],configuration={attributionLabel:"Attribution",lang:"none",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(ie,Z="none"){if(!ie)return{};const ee=Array.isArray(ie)?ie:[ie],ae={};for(const ye of ee){if(typeof ye=="string"){ae[Z]=ae[Z]?ae[Z]:[],ae[Z].push(ye||"");continue}if(!ye["@language"]){ae[Z]=ae[Z]?ae[Z]:[],ae[Z].push(ye["@value"]||"");continue}const ve=ye["@language"];ae[ve]=ae[ve]?ae[ve]:[],ae[ve].push(ye["@value"]||"")}return ae}function getProfile(ie){if(Array.isArray(ie))return getProfile(ie.find(Z=>typeof Z=="string"));if(imageServiceProfiles.indexOf(ie)!==-1)return"level2";if(level1Support.indexOf(ie)!==-1)return"level1";if(typeof ie=="string")return ie}function getTypeFromContext(ie){const Z=Array.isArray(ie)?ie:[ie];for(const ee of Z)switch(ee){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function getTypeFromProfile(ie){switch(ie){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function removePrefix(ie){for(const Z of["sc","oa","dcterms","dctypes","iiif"])if(ie.startsWith(`${Z}:`))return ie.slice(Z.length+1);return ie}const knownTypes=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(ie){const Z=ie["@id"]||ie.id;let ee=ie["@type"]||ie.type;const ae=ie.profile||void 0,ye=ie["@context"]||void 0;if(ae){const ve=getTypeFromProfile(ae);if(ve)return ve}if(ye){const ve=getTypeFromContext(ye);if(ve)return ve}if(ee){if(Array.isArray(ee)){if(ee.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(ee.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";ee=ee[0]}for(const ve of["sc","oa","dcterms","dctypes","iiif"])if(ee.startsWith(`${ve}:`)){ee=ee.slice(ve.length+1);break}switch(ee){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(ee&&knownTypes.indexOf(ee)!==-1)return ee;if(ie.format){if(ie.format.startsWith("image/"))return"Image";if(ie.format.startsWith("text/")||ie.format==="application/pdf")return"Text";if(ie.format.startsWith("application/"))return"Dataset"}return Z&&(Z.endsWith(".jpg")||Z.endsWith(".png")||Z.endsWith(".jpeg"))?"Image":ee||"unknown"}const licenseRegex=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function extractLicense(ie){const Z=ie.match(licenseRegex);return Z?Z[0]:ie}function fixLicense(ie,Z="Rights/License",ee="none"){let ae=null;const ye=[],ve=Array.isArray(ie)?ie:[ie];for(const be of ve){const Qe=be?extractLicense(be):void 0;if(Qe&&(Qe.indexOf("creativecommons.org")!==-1||Qe.indexOf("rightsstatements.org")!==-1)){Qe.startsWith("https://")?ae=`http://${Qe.slice(8)}`:ae=Qe;continue}Qe&&ye.push({label:{[ee]:[Z]},value:{[ee]:[Qe]}})}return[ae,ye]}const removeContexts=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function fixContext(ie){if(ie){const Z=Array.isArray(ie)?ie:[ie],ee=[];for(const ae of Z)ae==="http://iiif.io/api/presentation/2/context.json"&&ee.push("http://iiif.io/api/presentation/3/context.json"),removeContexts.indexOf(ae)===-1&&ee.push(ae);if(Z.length)return ee.length===1?ee[0]:ee}}function convertMetadata(ie){return ie?ie.map(Z=>({label:convertLanguageMapping(Z.label),value:convertLanguageMapping(Z.value)})):[]}function removeUndefinedProperties(ie){for(const Z in ie)(typeof ie[Z]>"u"||ie[Z]===null)&&delete ie[Z];return ie}let mintedIdCounter=0;function mintNewIdFromResource(ie,Z){const ee=encodeURI(ie.id||ie["@id"]||"").trim();return ee&&Z?`${ee}/${Z}`:ee||(mintedIdCounter++,`http://example.org/${ie["@type"]}${Z?`/${Z}`:""}/${mintedIdCounter}`)}function technicalProperties$2(ie){const Z=[...ie.behavior||[]];ie.viewingHint&&Z.push(ie.viewingHint);let ee;return Array.isArray(ie.motivation)?ee=ie.motivation.map(removePrefix):ie.motivation&&(ee=removePrefix(ie.motivation)),{"@context":ie["@context"]?fixContext(ie["@context"]):void 0,id:(ie["@id"]||mintNewIdFromResource(ie)).trim(),type:getNewType(ie),behavior:Z.length?Z:void 0,height:ie.height?ie.height:void 0,width:ie.width?ie.width:void 0,motivation:ee,viewingDirection:ie.viewingDirection,profile:ie.profile,format:ie.format?ie.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(ie){const[Z,ee]=fixLicense(ie.license),ae=[...ie.metadata?convertMetadata(ie.metadata):[],...ee];return{rights:Z,metadata:ae.length?ae:void 0,label:ie.label?convertLanguageMapping(ie.label):void 0,requiredStatement:ie.attribution?{label:convertLanguageMapping(configuration.attributionLabel),value:convertLanguageMapping(ie.attribution)}:void 0,navDate:ie.navDate,summary:ie.description?convertLanguageMapping(ie.description):void 0,thumbnail:ie.thumbnail}}function parseWithin(ie){if(!ie.within)return;const Z=Array.isArray(ie.within)?ie.within:[ie.within],ee=[];for(const ae of Z)if(typeof ae=="string"){if(ae)switch(ie["@type"]){case"sc:Manifest":ee.push({id:ae,type:"Collection"});break}}else ae["@id"]&&ee.push({id:ae["@id"],type:getNewType(ae)});return ee.length?ee:void 0}function linkingProperties$2(ie){const Z=ie.related?Array.isArray(ie.related)?ie.related:[ie.related]:[],ee=ie.contentLayer;return{provider:ie.logo||Z.length?[{id:configuration.providerId,type:"Agent",homepage:Z.length?[Z[0]]:void 0,logo:ie.logo?Array.isArray(ie.logo)?ie.logo:[ie.logo]:void 0,label:convertLanguageMapping(configuration.providerName)}]:void 0,partOf:parseWithin(ie),rendering:ie.rendering,seeAlso:ie.seeAlso,start:ie.startCanvas,service:ie.service?ensureArray$1(ie.service):void 0,supplementary:ee?[ee]:void 0}}function embeddedContentProperties(ie){return{chars:ie.chars,format:ie.format?ie.format:void 0,language:ie.language}}function upgradeCollection(ie){return removeUndefinedProperties({...technicalProperties$2(ie),...descriptiveProperties$2(ie),...linkingProperties$2(ie),items:ie.members})}function upgradeManifest(ie){const Z=[],ee=[];for(const ye of ie.sequences||[])ye.canvases.length&&Z.push(...ye.canvases),ye.behavior&&ee.push(...ye.behavior);const ae=technicalProperties$2(ie);return ee.length&&(ae.behavior?ae.behavior.push(...ee):ae.behavior=ee),removeUndefinedProperties({...ae,...descriptiveProperties$2(ie),...linkingProperties$2(ie),items:Z,structures:ie.structures})}function upgradeCanvas(ie){return removeUndefinedProperties({...technicalProperties$2(ie),...descriptiveProperties$2(ie),...linkingProperties$2(ie),annotations:ie.otherContent&&ie.otherContent.length?ie.otherContent:void 0,items:ie.images&&ie.images.length?[{id:mintNewIdFromResource(ie,"annotation-page"),type:"AnnotationPage",items:ie.images}]:void 0})}function upgradeAnnotationList(ie){return removeUndefinedProperties({...technicalProperties$2(ie),...descriptiveProperties$2(ie),...linkingProperties$2(ie),items:ie.resources&&ie.resources.length?ie.resources:void 0})}function upgradeSequence(ie){return!ie.canvases||ie.canvases.length===0?{canvases:[],behavior:[]}:{canvases:ie.canvases,behavior:ie.viewingHint?[ie.viewingHint]:[]}}function upgradeAnnotation(ie){function Z(ee){if(Array.isArray(ee)){if(ee.length>1)return{type:"List",items:ee.map(Z)};ee=ee[0]}if(typeof ee=="string")return encodeURI(ee).trim();if("@type"in ee){let ae;if(typeof ee.full=="string")ae=ee.full;else if(ee.full["@type"]==="dctypes:Image")ae={id:ee.full["@id"],type:"Image"};else if(ee.full["@type"]==="sc:Canvas")ae={id:ee.full["@id"],type:"Canvas"};else throw new Error(`Unsupported source type on annotation: ${ee.full["@type"]}`);return{type:"SpecificResource",source:ae,selector:upgradeSelector(ee.selector)}}else return encodeURI(ee["@id"]).trim()}return removeUndefinedProperties({...technicalProperties$2(ie),...descriptiveProperties$2(ie),...linkingProperties$2(ie),target:Z(ie.on),body:Array.isArray(ie.resource)?ie.resource.map(upgradeContentResource):upgradeContentResource(ie.resource)})}function upgradeContentResource(ie){const Z=ie;return removeUndefinedProperties({...technicalProperties$2(Z),...descriptiveProperties$2(Z),...linkingProperties$2(Z),...embeddedContentProperties(Z)})}function upgradeChoice(ie){const Z=[];return ie.default&&ie.default!=="rdf:nil"&&Z.push(ie.default),ie.item&&ie.item!=="rdf:nil"&&Z.push(...ie.item),{...technicalProperties$2(ie),...descriptiveProperties$2(ie),items:Z}}function upgradeRange(ie){return removeUndefinedProperties({...technicalProperties$2(ie),...descriptiveProperties$2(ie),...linkingProperties$2(ie),items:ie.members})}function upgradeService(ie){const{"@id":Z,"@type":ee,"@context":ae,profile:ye,...ve}=ie,be={};return Z&&(be["@id"]=Z),be["@type"]=getNewType(ie),be["@type"]==="unknown"&&(ae&&ae.length&&(be["@context"]=ae),be["@type"]="Service"),ye&&(be.profile=getProfile(ye)),removeUndefinedProperties({...be,...ve})}function upgradeLayer(ie){return removeUndefinedProperties({...technicalProperties$2(ie),...descriptiveProperties$2(ie),...linkingProperties$2(ie)})}const presentation2to3=new Traverse({collection:[upgradeCollection],manifest:[upgradeManifest],canvas:[upgradeCanvas],annotationList:[upgradeAnnotationList],sequence:[upgradeSequence],annotation:[upgradeAnnotation],contentResource:[upgradeContentResource],choice:[upgradeChoice],range:[upgradeRange],service:[upgradeService],layer:[upgradeLayer]});function convertPresentation2(ie){return ie&&ie["@context"]&&(ie["@context"]==="http://iiif.io/api/presentation/2/context.json"||ie["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||ie["@context"]==="http://www.shared-canvas.org/ns/context.json")||ie["@context"]==="http://iiif.io/api/image/2/context.json"?presentation2to3.traverseUnknown(ie):ie}function upgradeSelector(ie){if((Array.isArray(ie["@type"])&&ie["@type"].includes("oa:SvgSelector")||ie["@type"]=="oa:SvgSelector")&&("chars"in ie||"value"in ie))return{type:"SvgSelector",value:"chars"in ie?ie.chars:ie.value};if(ie["@type"]==="oa:FragmentSelector")return{type:"FragmentSelector",value:ie.value};if(ie["@type"]==="oa:Choice")return[upgradeSelector(ie.default),...(Array.isArray(ie.item)?ie.item:[ie.item]).map(upgradeSelector)];if(ie["@type"]=="iiif:ImageApiSelector")return{type:"ImageApiSelector",region:"region"in ie?ie.region:void 0,rotation:"rotation"in ie?ie.rotation:void 0};throw new Error(`Unsupported selector type: ${ie["@type"]}`)}function getDefaultEntities$1(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function getResource(ie,Z){if(typeof ie=="string")return{id:ie,type:Z};if(!ie.id)throw new Error(`Invalid resource does not have an ID (${Z})`);return ie}function mapToEntities(ie){return(Z,ee)=>{const ae=ie[Z]?ie[Z]:{};return ye=>{const ve=getResource(ye,ee||Z);return ve&&ve.id&&Z?(ae[ve.id]=ae[ve.id]?mergeEntities(ae[ve.id],ve):Object.assign({},ve),{id:ve.id,type:Z==="ContentResource"?Z:ve.type}):ve}}}function merge(ie,Z){if(!Z)return ie;if(Array.isArray(ie)){if(!Array.isArray(Z))throw new Error("Cannot merge array with non-array");const ee=[...ie];for(const ae of Z)if(ae!=null)if(Array.isArray(ae))ee.push(ae);else if(typeof ae=="object"&&ae.id&&ae.type){const ye=ee.findIndex(ve=>ve.id===ae.id&&ve.type===ae.type);ye>=0&&(ee[ye]=merge(ee[ye],ae))}else ie.indexOf(ae)===-1&&ee.push(ae);return ee}else if(typeof ie=="object"){if(Array.isArray(Z)||typeof Z!="object")throw new Error("Cannot merge object with non-object");const ee={...ie};for(const[ae,ye]of Object.entries(Z)){const ve=ee[ae];ve===EMPTY||!ve?ee[ae]=ye:ee[ae]=merge(ve,ye)}return ee}else if(ie)return ie;return Z}function mergeEntities(ie,Z){if(typeof ie=="string")return ie;if(Z.id!==ie.id||Z.type!==ie.type)throw new Error("Can only merge entities with identical identifiers and type!");return merge({...ie},Z)}function recordTypeInMapping(ie){return(Z,ee)=>ae=>{const{id:ye,type:ve}=getResource(ae,ee||Z);if(typeof ye>"u")throw new Error("Found invalid entity without an ID.");return Z==="ContentResource"?ie[ye]=Z:ie[ye]=ve,ae}}function hash$1(ie){const Z=JSON.stringify(ie);let ee=5381,ae=Z.length;for(;ae;)ee=ee*33^Z.charCodeAt(--ae);const ve=(ee>>>0).toString(16);return ve.length%2?"0"+ve:ve}function addMissingIdToContentResource(ie){return Z=>typeof Z=="string"?{id:Z,type:ie}:Z.id?Z.type?Z:{type:ie,...Z}:{id:`vault://${hash$1(Z)}`,type:ie,...Z}}function ensureDefaultFields(ie){return Z=>({...ie,...Z})}function ensureArray(ie){return Array.isArray(ie)?ie:[ie]}function ensureArrayOnAnnotation(ie){return ie.body&&(ie.body=ensureArray(ie.body)),ie.seeAlso&&(ie.seeAlso=ensureArray(ie.seeAlso)),ie.body&&(ie.body=ensureArray(ie.body)),ie.audience&&(ie.audience=ensureArray(ie.audience)),ie.accessibility&&(ie.accessibility=ensureArray(ie.accessibility)),ie.motivation&&(ie.motivation=ensureArray(ie.motivation)),ie}function normalize(ie){const Z=convertPresentation2(ie),ee=getDefaultEntities$1(),ae={},ye=mapToEntities(ee),ve=recordTypeInMapping(ae),Qe=new Traverse$1({collection:[ensureDefaultFields(emptyCollection),ve("Collection"),ye("Collection")],manifest:[ensureDefaultFields(emptyManifest),ve("Manifest"),ye("Manifest")],canvas:[ensureDefaultFields(emptyCanvas),ve("Canvas"),ye("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(emptyAnnotationPage),ve("AnnotationPage"),ye("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,ve("Annotation"),ye("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),ve("ContentResource"),ye("ContentResource")],range:[ensureDefaultFields(emptyRange),ve("Range","Canvas"),ye("Range","Canvas")],agent:[ensureDefaultFields(emptyAgent),ve("Agent"),ye("Agent")]}).traverseUnknown(Z);return{entities:ee,resource:Qe,mapping:ae}}const UNSET="__$UNSET$__",UNWRAP="__$UNWRAP$__";function resolveIfExists$1(ie,Z){const ee=ie.requests[Z],ae=ie.mapping[Z];if(!(!ae||ee&&ee.resourceUri&&!ie.entities[ae][ee.resourceUri]))return ie.entities[ae][ee?ee.resourceUri:Z]}function serializedFieldsToObject(ie){const Z={};for(const[ee,ae]of ie){if(ee===UNWRAP&&ae!==UNSET)return ae;ae!==UNSET&&typeof ae<"u"&&ae!==null&&(Z[ee]=ae)}return Z}function serialize(ie,Z,ee){if(!Z.type||!Z.id)throw new Error("Unknown entity");if(!ee[Z.type])throw new Error(`Serializer not found for ${Z.type}`);function ae(ye){const ve=ee[ye.type];if(!ve)return UNSET;const be=resolveIfExists$1(ie,ye.id)||(ye.id&&ye.type?ye:null);if(!be)return UNSET;const Qe=ve(be,ie,{isTopLevel:Z.id===ye.id});let Xe=Qe.next();for(;!Xe.done;){const Je=Xe.value;let tt=UNSET;if(Je)if(Array.isArray(Je)){const it=[];for(const st of Je)it.push(ae(st));tt=it}else tt=ae(Je);Xe=Qe.next(tt)}return Xe.value===UNSET?UNSET:serializedFieldsToObject(Xe.value)}return ae(Z)}function languageString2to3(ie){if(!ie)return;const Z=Object.keys(ie);if(Z.length!==0){if(Z.length===1){const ee=Z[0];if(!ee)return"";const ae=(ie[ee]||[]).join("");return ee==="@none"||ee==="none"||ee==="en"?ae:{"@language":ee,"@value":ae}}return Z.map(ee=>({"@language":ee,"@value":(ie[ee]||[]).join("")}))}}function parseCanvasTarget(ie){return Array.isArray(ie)?ie.map(Z=>parseCanvasTarget(Z)):typeof ie=="string"?ie:ie.type&&ie.type==="Canvas"?ie.id:ie}function unNestArray(ie,Z=!1){if(ie)return ie.length>1&&!Z?ie:ie[0]||void 0}function convertService(ie){if(ie){if(typeof ie=="string")return{"@id":ie};if("@id"in ie){const Z={...ie};return delete Z["@type"],Z}return{"@context":"http://iiif.io/api/image/2/context.json","@id":ie.id,profile:`http://iiif.io/api/image/2/profiles/${ie.profile}.json`}}}function technicalProperties$1(ie,Z){return[["@id",ie.id],["@type",Z],["format",ie.format],["height",ie.height],["width",ie.width],["viewingDirection",ie.viewingDirection!=="left-to-right"?ie.viewingDirection:void 0]]}function*descriptiveProperties$1(ie){const Z=ie.provider?yield ie.provider[0]:void 0;return[["label",languageString2to3(ie.label)],["metadata",ie.metadata&&ie.metadata.length?ie.metadata.map(ee=>({label:languageString2to3(ee.label)||"",value:languageString2to3(ee.value)||""})):void 0],["description",languageString2to3(ie.summary)],["thumbnail",unNestArray(yield ie.thumbnail)],["navDate",ie.navDate],["logo",Z?unNestArray(Z.logo):void 0],["homepage",Z?Z.homepage:void 0],["attribution",ie.requiredStatement?languageString2to3(ie.requiredStatement.value):void 0]]}function*linkingProperties$1(ie){return[["seeAlso",unNestArray(yield ie.seeAlso)],["service",unNestArray((ie.service||[]).map(convertService))],["rendering",unNestArray(yield ie.rendering)],["startCanvas",ie.start?ie.start.id:void 0]]}const serializeConfigPresentation2={Manifest:function*(ie){return[...technicalProperties$1(ie,"sc:Manifest"),...yield*descriptiveProperties$1(ie),...yield*linkingProperties$1(ie),["sequences",[{"@id":`${ie.id}/sequence0`,"@type":"sc:Sequence",canvases:yield ie.items}]],["structures",yield ie.structures]]},Canvas:function*(ie){const ee=(yield ie.items)[0];return[...technicalProperties$1(ie,"sc:Canvas"),...yield*descriptiveProperties$1(ie),...yield*linkingProperties$1(ie),["images",ee?[ee.resources]:void 0],["annotations",ie.annotations&&ie.annotations.length?unNestArray(yield ie.annotations):void 0]]},AnnotationPage:function*(ie){return[...technicalProperties$1(ie,"sc:AnnotationList"),...yield*descriptiveProperties$1(ie),["resources",ie.items&&ie.items.length?unNestArray(yield ie.items):void 0]]},Annotation:function*(ie){return[["@id",ie.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",parseCanvasTarget(ie.target)],["resource",unNestArray(yield ie.body,!0)]]},ContentResource:function*(ie){switch(ie.type){case"Image":return[...technicalProperties$1(ie,"dctypes:Image"),...yield*descriptiveProperties$1(ie),...yield*linkingProperties$1(ie)];case"Text":case"Dataset":default:return[...technicalProperties$1(ie,void 0),...yield*descriptiveProperties$1(ie)]}},AnnotationCollection:function*(ie){return[["@id",ie.id],["@type","sc:Layer"],["label",languageString2to3(ie.label)]]},Collection:function*(ie){return[...technicalProperties$1(ie,"sc:Collection"),...yield*descriptiveProperties$1(ie),...yield*linkingProperties$1(ie),["members",yield*ie.items]]},Range:function*(ie){const Z=[],ee=[];if(ie.items)for(const ae of ie.items){const ye=yield ae;Z.push({"@id":ae.id,"@type":ae.type,label:ye?ye.label:void 0,within:ie.id}),ae.type==="Canvas"&&ee.push(ae.id)}return[...technicalProperties$1(ie,"sc:Range"),...yield*descriptiveProperties$1(ie),...yield*linkingProperties$1(ie),["canvases",ee.length===Z.length?ee:void 0],["members",ee.length!==Z.length?Z:void 0]]}};function technicalProperties(ie){var Z;return[["id",(Z=ie.id)!=null&&Z.startsWith("vault://")?void 0:ie.id],["type",ie.type],["format",ie.format],["profile",ie.profile],["height",ie.height],["width",ie.width],["duration",ie.duration||void 0],["viewingDirection",ie.viewingDirection!=="left-to-right"?ie.viewingDirection:void 0],["behavior",ie.behavior&&ie.behavior.length?ie.behavior:void 0],["timeMode",ie.timeMode],["motivation",Array.isArray(ie.motivation)?ie.motivation[0]:ie.motivation]]}function filterEmpty(ie){if(!(!ie||ie.length===0))return ie}function service2compat(ie){if(ie&&ie.type&&ie.type==="ImageService2"){const{id:Z,type:ee,profile:ae,...ye}=ie,ve=typeof ae=="string"?ae:Array.isArray(ae)?ae.find(be=>typeof be=="string"):"";return{"@id":Z,"@type":ee,profile:ve?ve.startsWith("http")?ve:`http://iiif.io/api/image/2/${ve}.json`:"http://iiif.io/api/image/2/level0.json",...ye}}return ie}function filterService2Compat(ie){if(!(!ie||ie.length===0))return ie.map(service2compat)}function*descriptiveProperties(ie){return[["label",ie.label],["metadata",filterEmpty(ie.metadata)],["summary",ie.summary],["requiredStatement",ie.requiredStatement],["rights",ie.rights],["navDate",ie.navDate],["language",ie.language],["thumbnail",filterEmpty(yield ie.thumbnail)],["placeholderCanvas",yield ie.placeholderCanvas],["accompanyingCanvas",yield ie.accompanyingCanvas],["provider",filterEmpty(yield ie.provider)]]}function*linkingProperties(ie){return[["seeAlso",filterEmpty(yield ie.seeAlso)],["service",filterService2Compat(ie.service)],["services",filterService2Compat(ie.services)],["rendering",filterEmpty(yield ie.rendering)],["supplementary",filterEmpty(yield ie.supplementary)],["homepage",filterEmpty(yield ie.homepage)],["logo",filterEmpty(yield ie.logo)],["partOf",filterEmpty(yield ie.partOf)],["start",ie.start]]}const serializeConfigPresentation3={Manifest:function*(ie,Z,{isTopLevel:ee}){return ee?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(ie),...yield*descriptiveProperties(ie),...yield*linkingProperties(ie),["items",yield ie.items],["structures",filterEmpty(yield ie.structures)],["annotations",filterEmpty(yield ie.annotations)]]:[...technicalProperties(ie),...yield*descriptiveProperties(ie)]},Canvas:function*(ie){return[...technicalProperties(ie),...yield*descriptiveProperties(ie),...yield*linkingProperties(ie),["items",yield ie.items],["annotations",filterEmpty(yield ie.annotations)]]},Agent:function*(ie){return[["id",ie.id],["type","Agent"],["label",ie.label],...yield*linkingProperties(ie)]},AnnotationPage:function*(ie){return[...Object.entries(ie).map(([ee,ae])=>[ee,Array.isArray(ae)?filterEmpty(ae):ae]).filter(([ee,ae])=>ee!=="items"),...yield*linkingProperties(ie),["items",yield ie.items]]},Service:function*(ie){return[[UNWRAP,service2compat(ie)]]},Annotation:function*(ie){const Z=Object.entries(ie).map(([ae,ye])=>ae==="motivation"?[ae,Array.isArray(ye)?ye[0]:ye]:[ae,Array.isArray(ye)?filterEmpty(ye):ye]).filter(([ae])=>ae!=="body"),ee=yield ie.body;return[...Z,["body",ee.length===1?ee[0]:ee]]},ContentResource:function*(ie){return[...technicalProperties(ie),...yield*descriptiveProperties(ie),...yield*linkingProperties(ie),["annotations",filterEmpty(yield ie.annotations)],["items",filterEmpty(yield ie.items)]]},AnnotationCollection:function*(ie){return[["id",ie.id],["type","AnnotationCollection"],["label",ie.label]]},Collection:function*(ie,Z,{isTopLevel:ee}){return ee?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(ie),...yield*descriptiveProperties(ie),...yield*linkingProperties(ie),["items",filterEmpty(yield ie.items)]]:[...technicalProperties(ie),...yield*descriptiveProperties(ie)]},Range:function*(ie){const Z=[];for(const ee of ie.items)ee.type==="Range"?Z.push(yield ee):Z.push(ee);return[...technicalProperties(ie),...yield*descriptiveProperties(ie),...yield*linkingProperties(ie),["items",Z],["annotations",filterEmpty(yield ie.annotations)]]}};function n$1(ie){return ie==null}function t$1(ie){throw new Error("Argument "+ie+" is empty.")}function o$1(ie){return typeof ie=="string"||typeof ie=="symbol"}function u$1(ie){return!o$1(ie)}function a$1(ie){throw new Error("Argument "+ie+" is invalid, it should be an action type of type: string | symbol")}function s$1(ie,Z){return n$1(ie)&&t$1(1),u$1(ie)&&a$1(1),Object.assign(function(){var ee=Z!=null?Z.apply(void 0,arguments):void 0;return Object.assign({type:ie},ee)},{getType:function(){return ie},toString:function(){return ie}})}function y$1(ie,Z,ee){return n$1(ie)&&t$1(1),u$1(ie)&&a$1(1),function(){return s$1(ie,function(){var ae=arguments.length<=0?void 0:arguments[0],ye=arguments.length<=1?void 0:arguments[1];return Z==null&&ee==null||(ae=Z!=null?Z.apply(void 0,arguments):void 0,ye=ee!=null?ee.apply(void 0,arguments):void 0),Object.assign({},ae!==void 0&&{payload:ae},{},ye!==void 0&&{meta:ye})})}}function _typeof(ie){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},_typeof(ie)}function toPrimitive(ie,Z){if(_typeof(ie)!="object"||!ie)return ie;var ee=ie[Symbol.toPrimitive];if(ee!==void 0){var ae=ee.call(ie,Z||"default");if(_typeof(ae)!="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(ie)}function toPropertyKey(ie){var Z=toPrimitive(ie,"string");return _typeof(Z)=="symbol"?Z:String(Z)}function _defineProperty$1(ie,Z,ee){return Z=toPropertyKey(Z),Z in ie?Object.defineProperty(ie,Z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):ie[Z]=ee,ie}function ownKeys$1(ie,Z){var ee=Object.keys(ie);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(ie);Z&&(ae=ae.filter(function(ye){return Object.getOwnPropertyDescriptor(ie,ye).enumerable})),ee.push.apply(ee,ae)}return ee}function _objectSpread2$1(ie){for(var Z=1;Z<arguments.length;Z++){var ee=arguments[Z]!=null?arguments[Z]:{};Z%2?ownKeys$1(Object(ee),!0).forEach(function(ae){_defineProperty$1(ie,ae,ee[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(ee)):ownKeys$1(Object(ee)).forEach(function(ae){Object.defineProperty(ie,ae,Object.getOwnPropertyDescriptor(ee,ae))})}return ie}function formatProdErrorMessage(ie){return"Minified Redux error #"+ie+"; visit https://redux.js.org/Errors?code="+ie+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$3(ie){if(typeof ie!="object"||ie===null)return!1;for(var Z=ie;Object.getPrototypeOf(Z)!==null;)Z=Object.getPrototypeOf(Z);return Object.getPrototypeOf(ie)===Z}function miniKindOf(ie){if(ie===void 0)return"undefined";if(ie===null)return"null";var Z=typeof ie;switch(Z){case"boolean":case"string":case"number":case"symbol":case"function":return Z}if(Array.isArray(ie))return"array";if(isDate(ie))return"date";if(isError(ie))return"error";var ee=ctorName(ie);switch(ee){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return ee}return Z.slice(8,-1).toLowerCase().replace(/\s/g,"")}function ctorName(ie){return typeof ie.constructor=="function"?ie.constructor.name:null}function isError(ie){return ie instanceof Error||typeof ie.message=="string"&&ie.constructor&&typeof ie.constructor.stackTraceLimit=="number"}function isDate(ie){return ie instanceof Date?!0:typeof ie.toDateString=="function"&&typeof ie.getDate=="function"&&typeof ie.setDate=="function"}function kindOf(ie){var Z=typeof ie;return process.env.NODE_ENV!=="production"&&(Z=miniKindOf(ie)),Z}function createStore$1(ie,Z,ee){var ae;if(typeof Z=="function"&&typeof ee=="function"||typeof ee=="function"&&typeof arguments[3]=="function")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof Z=="function"&&typeof ee>"u"&&(ee=Z,Z=void 0),typeof ee<"u"){if(typeof ee!="function")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(1):"Expected the enhancer to be a function. Instead, received: '"+kindOf(ee)+"'");return ee(createStore$1)(ie,Z)}if(typeof ie!="function")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(2):"Expected the root reducer to be a function. Instead, received: '"+kindOf(ie)+"'");var ye=ie,ve=Z,be=[],Qe=be,Xe=!1;function Je(){Qe===be&&(Qe=be.slice())}function tt(){if(Xe)throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return ve}function it(gt){if(typeof gt!="function")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(4):"Expected the listener to be a function. Instead, received: '"+kindOf(gt)+"'");if(Xe)throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var ut=!0;return Je(),Qe.push(gt),function(){if(ut){if(Xe)throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");ut=!1,Je();var ei=Qe.indexOf(gt);Qe.splice(ei,1),be=null}}}function st(gt){if(!isPlainObject$3(gt))throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(7):"Actions must be plain objects. Instead, the actual type was: '"+kindOf(gt)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(typeof gt.type>"u")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(Xe)throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(9):"Reducers may not dispatch actions.");try{Xe=!0,ve=ye(ve,gt)}finally{Xe=!1}for(var ut=be=Qe,mt=0;mt<ut.length;mt++){var ei=ut[mt];ei()}return gt}function lt(gt){if(typeof gt!="function")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(10):"Expected the nextReducer to be a function. Instead, received: '"+kindOf(gt));ye=gt,st({type:ActionTypes.REPLACE})}function ct(){var gt,ut=it;return gt={subscribe:function(ei){if(typeof ei!="object"||ei===null)throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(11):"Expected the observer to be an object. Instead, received: '"+kindOf(ei)+"'");function ni(){ei.next&&ei.next(tt())}ni();var ri=ut(ni);return{unsubscribe:ri}}},gt[$$observable]=function(){return this},gt}return st({type:ActionTypes.INIT}),ae={dispatch:st,subscribe:it,getState:tt,replaceReducer:lt},ae[$$observable]=ct,ae}function warning$1(ie){typeof console<"u"&&typeof console.error=="function"&&console.error(ie);try{throw new Error(ie)}catch{}}function getUnexpectedStateShapeWarningMessage(ie,Z,ee,ae){var ye=Object.keys(Z),ve=ee&&ee.type===ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(ye.length===0)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!isPlainObject$3(ie))return"The "+ve+' has unexpected type of "'+kindOf(ie)+'". Expected argument to be an object with the following '+('keys: "'+ye.join('", "')+'"');var be=Object.keys(ie).filter(function(Qe){return!Z.hasOwnProperty(Qe)&&!ae[Qe]});if(be.forEach(function(Qe){ae[Qe]=!0}),!(ee&&ee.type===ActionTypes.REPLACE)&&be.length>0)return"Unexpected "+(be.length>1?"keys":"key")+" "+('"'+be.join('", "')+'" found in '+ve+". ")+"Expected to find one of the known reducer keys instead: "+('"'+ye.join('", "')+'". Unexpected keys will be ignored.')}function assertReducerShape(ie){Object.keys(ie).forEach(function(Z){var ee=ie[Z],ae=ee(void 0,{type:ActionTypes.INIT});if(typeof ae>"u")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(12):'The slice reducer for key "'+Z+`" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof ee(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(13):'The slice reducer for key "'+Z+'" returned undefined when probed with a random type. '+("Don't try to handle '"+ActionTypes.INIT+`' or other actions in "redux/*" `)+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")})}function combineReducers(ie){for(var Z=Object.keys(ie),ee={},ae=0;ae<Z.length;ae++){var ye=Z[ae];process.env.NODE_ENV!=="production"&&typeof ie[ye]>"u"&&warning$1('No reducer provided for key "'+ye+'"'),typeof ie[ye]=="function"&&(ee[ye]=ie[ye])}var ve=Object.keys(ee),be;process.env.NODE_ENV!=="production"&&(be={});var Qe;try{assertReducerShape(ee)}catch(Xe){Qe=Xe}return function(Je,tt){if(Je===void 0&&(Je={}),Qe)throw Qe;if(process.env.NODE_ENV!=="production"){var it=getUnexpectedStateShapeWarningMessage(Je,ee,tt,be);it&&warning$1(it)}for(var st=!1,lt={},ct=0;ct<ve.length;ct++){var gt=ve[ct],ut=ee[gt],mt=Je[gt],ei=ut(mt,tt);if(typeof ei>"u"){var ni=tt&&tt.type;throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(14):"When called with an action of type "+(ni?'"'+String(ni)+'"':"(unknown type)")+', the slice reducer for key "'+gt+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.')}lt[gt]=ei,st=st||ei!==mt}return st=st||ve.length!==Object.keys(Je).length,st?lt:Je}}function compose(){for(var ie=arguments.length,Z=new Array(ie),ee=0;ee<ie;ee++)Z[ee]=arguments[ee];return Z.length===0?function(ae){return ae}:Z.length===1?Z[0]:Z.reduce(function(ae,ye){return function(){return ae(ye.apply(void 0,arguments))}})}function applyMiddleware(){for(var ie=arguments.length,Z=new Array(ie),ee=0;ee<ie;ee++)Z[ee]=arguments[ee];return function(ae){return function(){var ye=ae.apply(void 0,arguments),ve=function(){throw new Error(process.env.NODE_ENV==="production"?formatProdErrorMessage(15):"Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},be={getState:ye.getState,dispatch:function(){return ve.apply(void 0,arguments)}},Qe=Z.map(function(Xe){return Xe(be)});return ve=compose.apply(void 0,Qe)(ye.dispatch),_objectSpread2$1(_objectSpread2$1({},ye),{},{dispatch:ve})}}}const IMPORT_ENTITIES="@iiif/IMPORT_ENTITIES",MODIFY_ENTITY_FIELD="@iiif/MODIFY_ENTITY_FIELD",REORDER_ENTITY_FIELD="@iiif/REORDER_ENTITY_FIELD",ADD_REFERENCE="@iiif/ADD_REFERENCE",REMOVE_REFERENCE="@iiif/REMOVE_REFERENCE",importEntities=y$1(IMPORT_ENTITIES)(),modifyEntityField=y$1(MODIFY_ENTITY_FIELD)(),reorderEntityField=y$1(REORDER_ENTITY_FIELD)(),addReference=y$1(ADD_REFERENCE)(),removeReference=y$1(REMOVE_REFERENCE)(),entityActions={importEntities,modifyEntityField,reorderEntityField,addReference,removeReference},ADD_MAPPING="@iiif/ADD_MAPPING",ADD_MAPPINGS="@iiif/ADD_MAPPINGS",addMapping=y$1(ADD_MAPPING)(),addMappings=y$1(ADD_MAPPINGS)(),SET_META_VALUE="@iiif/SET_META_VALUE",SET_META_VALUE_DYNAMIC="@iiif/SET_META_VALUE_DYNAMIC",UNSET_META_VALUE="@iiif/UNSET_META_VALUE",setMetaValue=y$1(SET_META_VALUE)(),setMetaValueDynamic=y$1(SET_META_VALUE_DYNAMIC)(),unsetMetaValue=y$1(UNSET_META_VALUE)(),metaActions={setMetaValue,setMetaValueDynamic,unsetMetaValue},RESOURCE_ERROR="RESOURCE_ERROR",RESOURCE_LOADING="RESOURCE_LOADING",RESOURCE_READY="RESOURCE_READY",REQUEST_RESOURCE="@iiif/REQUEST_RESOURCE",REQUEST_ERROR="@iiif/REQUEST_ERROR",REQUEST_MISMATCH="@iiif/REQUEST_MISMATCH",REQUEST_COMPLETE="@iiif/REQUEST_COMPLETE",REQUEST_OFFLINE_RESOURCE="@iiif/REQUEST_OFFLINE_RESOURCE",requestResource=y$1(REQUEST_RESOURCE)(),requestError=y$1(REQUEST_ERROR)(),requestMismatch=y$1(REQUEST_MISMATCH)(),requestComplete=y$1(REQUEST_COMPLETE)();y$1(REQUEST_OFFLINE_RESOURCE)();const BATCH_ACTIONS="@iiif/BATCH",BATCH_IMPORT="@iiif/BATCH_IMPORT",batchActions=y$1(BATCH_ACTIONS)();y$1(BATCH_IMPORT)();const actionListFromResource=(ie,Z)=>{const{entities:ee,resource:ae,mapping:ye}=normalize(Z);if(ae.id===void 0)return[requestError({id:ie,message:"ID is not defined in resource."})];const ve=[importEntities({entities:ee}),addMappings({mapping:ye})];return ae.id!==ie&&(ve.push(addMapping({id:ie,type:ae.type})),ve.push(requestMismatch({requestId:ie,actualId:ae.id}))),ve.push(requestComplete({id:ie})),ve},safeIsNaN=Number.isNaN||function(Z){return typeof Z=="number"&&Z!==Z};function isEqual(ie,Z){return!!(ie===Z||safeIsNaN(ie)&&safeIsNaN(Z))}function areInputsEqual(ie,Z){if(!Array.isArray(ie)||!Array.isArray(Z))return ie===Z;if(ie.length!==Z.length)return!1;for(let ee=0;ee<ie.length;ee++)if(!isEqual(ie[ee],Z[ee]))return!1;return!0}function resolveIfExists(ie,Z){const ee=ie.iiif.requests[Z],ae=ie.iiif.mapping[Z];if(!(!ae||!ie.iiif.entities[ae][ee.resourceUri]))return ie.iiif.entities[ae][ee.resourceUri]}function createFetchHelper(ie,Z,{waitTimeout:ee=30}={}){return async(ae,ye)=>{const ve=ie.getState(),be=ve.iiif.requests[ae];if(be)switch(be.loadingState){case RESOURCE_ERROR:break;case RESOURCE_LOADING:{let Qe,Xe=!1;try{const Je=await Promise.race([new Promise((tt,it)=>{Xe||(Qe=ie.subscribe(()=>{const st=ie.getState();if(st.iiif.requests[ae].loadingState===RESOURCE_ERROR){it();return}if(st.iiif.requests[ae].loadingState===RESOURCE_READY){const lt=resolveIfExists(st,ae);lt?tt(lt):it()}}))}),new Promise((tt,it)=>setTimeout(()=>{Xe=!0,it()},ee*60))]);if(Qe&&Qe(),Je)return Je}catch{Qe&&Qe();break}break}case RESOURCE_READY:{const Qe=resolveIfExists(ve,ae);if(Qe)return Qe;break}}ie.dispatch(requestResource({id:ae}));try{const Qe=await Z(ae,ye);!Qe.id&&!Qe["@id"]&&(Qe["@type"]&&(Qe["@id"]=ae),Qe.id=ae);const Xe=actionListFromResource(ae,Qe);return ie.dispatch(batchActions({actions:Xe})),resolveIfExists(ie.getState(),ae)}catch(Qe){throw ie.dispatch(requestError({id:ae,message:Qe.toString()})),Qe}}}function getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}const mappingReducer=(ie={},Z)=>{switch(Z.type){case ADD_MAPPING:return{...ie,[Z.payload.id]:Z.payload.type};case ADD_MAPPINGS:return{...ie,...Z.payload.mapping};default:return ie}};function isReferenceList(ie,Z,ee,ae){return!(!ie[ee]||!ie[ee][Z]||!ie[ee][Z][ae]||!Array.isArray(ie[ee][Z][ae]))}function quickMerge(ie,Z){const ee={},ae=[];for(const[ye,ve]of Object.entries(ie||{})){ae.push(ye);const be=(Z||{})[ye];if(!be||be.length===0){ee[ye]=ve;continue}ee[ye]=be}for(const[ye,ve]of Object.entries(Z||{}))ae.indexOf(ye)===-1&&(ee[ye]=ve);return ee}const entitiesReducer=(ie=getDefaultEntities(),Z)=>{var ee;switch(Z.type){case MODIFY_ENTITY_FIELD:{if(!ie[Z.payload.type]||!ie[Z.payload.type][Z.payload.id])return ie;const ae=ie[Z.payload.type][Z.payload.id];return typeof ae=="string"?ie:{...ie,[Z.payload.type]:{...ie[Z.payload.type],[Z.payload.id]:{...ae,[Z.payload.key]:Z.payload.value}}}}case REORDER_ENTITY_FIELD:{if(!isReferenceList(ie,Z.payload.id,Z.payload.type,Z.payload.key))return ie;const ae=ie[Z.payload.type][Z.payload.id];if(typeof ae=="string")return ie;const ye=Array.from(ae[Z.payload.key]),[ve]=ye.splice(Z.payload.startIndex,1);return ye.splice(Z.payload.endIndex,0,ve),{...ie,[Z.payload.type]:{...ie[Z.payload.type],[Z.payload.id]:{...ae,[Z.payload.key]:ye}}}}case IMPORT_ENTITIES:{const ae=Object.keys(Z.payload.entities),ye={...ie};for(const ve of ae){const be=Z.payload.entities[ve],Qe={...ie[ve]||{}};let Xe=!1;const Je=Object.keys(be||{})||[];if(be&&Je){for(const tt of Je)Xe=!0,Qe[tt]=ie[ve][tt]?quickMerge(ie[ve][tt],be[tt]):be[tt];Xe&&(ye[ve]=Qe)}}return ye}case ADD_REFERENCE:{if(!isReferenceList(ie,Z.payload.id,Z.payload.type,Z.payload.key))return ie;const ae=ie[Z.payload.type][Z.payload.id],ye=Array.from(ae[Z.payload.key]);return ye.splice(Z.payload.index||ye.length+1,0,Z.payload.reference),{...ie,[Z.payload.type]:{...ie[Z.payload.type],[Z.payload.id]:{...ae,[Z.payload.key]:ye}}}}case REMOVE_REFERENCE:{if(!isReferenceList(ie,Z.payload.id,Z.payload.type,Z.payload.key))return ie;const ae=ie[Z.payload.type][Z.payload.id],ye=Array.from(ae[Z.payload.key]),ve=Z.payload.index||ye.findIndex(be=>be&&be.id===Z.payload.reference.id);return ve===-1||((ee=ye[ve])==null?void 0:ee.id)!==Z.payload.reference.id?ie:(ye.splice(ve,1),{...ie,[Z.payload.type]:{...ie[Z.payload.type],[Z.payload.id]:{...ae,[Z.payload.key]:ye}}})}default:return ie}},requestReducer=(ie={},Z)=>{switch(Z.type){case REQUEST_RESOURCE:case REQUEST_OFFLINE_RESOURCE:return{...ie,[Z.payload.id]:{requestUri:Z.payload.id,loadingState:RESOURCE_LOADING,uriMismatch:!1,resourceUri:Z.payload.id}};case REQUEST_MISMATCH:return{...ie,[Z.payload.requestId]:{...ie[Z.payload.requestId]||{},uriMismatch:!0,resourceUri:Z.payload.actualId},[Z.payload.actualId]:{requestUri:Z.payload.requestId,loadingState:ie[Z.payload.requestId].loadingState,uriMismatch:!0,resourceUri:Z.payload.actualId}};case REQUEST_ERROR:return{...ie,[Z.payload.id]:{...ie[Z.payload.id]||{},loadingState:RESOURCE_ERROR,error:Z.payload.message}};case REQUEST_COMPLETE:return{...ie,[Z.payload.id]:{...ie[Z.payload.id]||{},loadingState:RESOURCE_READY,error:void 0}}}return ie},metaReducer=(ie={},Z)=>{const{id:ee,updateValue:ae,value:ye,meta:ve,key:be}=Z&&Z.payload||{};switch(Z.type){case SET_META_VALUE:return{...ie,[ee]:{...ie[ee]||{},[ve]:{...ie[ee]?ie[ee][ve]||{}:{},[be]:ye}}};case SET_META_VALUE_DYNAMIC:return{...ie,[ee]:{...ie[ee]||{},[ve]:{...ie[ee]?ie[ee][ve]||{}:{},[be]:ie[ee]&&ie[ee][ve]?ae(ie[ee][ve][be]):ae(void 0)}}};case UNSET_META_VALUE:return ie[ee]&&ie[ee][ve]&&ie[ee][ve][be]?{...ie,[ee]:{...ie[ee]||{},[ve]:{...ie[ee]?ie[ee][ve]||{}:{},[be]:void 0}}}:ie;default:return ie}};function createBatchReducer(ie){return(Z,ee)=>ee&&ee.type===BATCH_ACTIONS?ee.payload.actions.reduce(ie,Z):ee&&ee.type===BATCH_IMPORT?ee.payload.state:ie(Z,ee)}const reducers=combineReducers({mapping:mappingReducer,entities:entitiesReducer,requests:requestReducer,meta:metaReducer}),composeEnhancers=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;function createStore(ie={}){const{enableDevtools:Z=!0,iiifStoreName:ee="iiif",defaultState:ae={},extraMiddleware:ye=[],customReducers:ve={}}=ie,be=combineReducers({[ee]:reducers,...ve});return createStore$1(createBatchReducer(be),ae,Z?composeEnhancers(applyMiddleware(...ye)):compose(applyMiddleware(...ye)))}function mitt(ie){return{all:ie=ie||new Map,on:function(Z,ee){var ae=ie.get(Z);ae?ae.push(ee):ie.set(Z,[ee])},off:function(Z,ee){var ae=ie.get(Z);ae&&(ee?ae.splice(ae.indexOf(ee)>>>0,1):ie.set(Z,[]))},emit:function(Z,ee){var ae=ie.get(Z);ae&&ae.slice().map(function(ye){ye(ee)}),(ae=ie.get("*"))&&ae.slice().map(function(ye){ye(Z,ee)})}}}class Vault{constructor(Z,ee){xc(this,"options");xc(this,"store");xc(this,"emitter");xc(this,"isBatching",!1);xc(this,"batchQueue",[]);xc(this,"remoteFetcher");xc(this,"staticFetcher");xc(this,"defaultFetcher",Z=>fetch(Z).then(ee=>ee.json()));xc(this,"middleware",Z=>ee=>ae=>{if(ae.type===BATCH_ACTIONS){for(const be of ae.payload.actions)this.emitter.emit(be.type,{realAction:be,state:Z.getState()});const ve=ee(ae);for(const be of ae.payload.actions)this.emitter.emit(`after:${ae.type}`,{action:ae,state:ve});return ve}this.emitter.emit(ae.type,{action:ae,state:Z.getState()});const ye=ee(ae);return this.emitter.emit(`after:${ae.type}`,{action:ae,state:ye}),ye});this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},Z||{}),this.store=ee||createStore({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=mitt(),this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(ae,ye)=>ye)}batch(Z){this.isBatching=!0;try{Z(this),this.store.dispatch(batchActions({actions:this.batchQueue}))}catch(ee){throw this.batchQueue=[],this.isBatching=!1,ee}this.batchQueue=[],this.isBatching=!1}async asyncBatch(Z){this.isBatching=!0;try{await Z(this),this.store.dispatch(batchActions({actions:this.batchQueue}))}catch(ee){throw this.batchQueue=[],this.isBatching=!1,ee}this.batchQueue=[],this.isBatching=!1}modifyEntityField(Z,ee,ae){this.dispatch(entityActions.modifyEntityField({id:Z.id,type:Z.type,key:ee,value:ae}))}dispatch(Z){this.isBatching?this.batchQueue.push(Z):this.store.dispatch(Z)}serialize(Z,ee){return serialize(this.getState().iiif,Z,ee)}toPresentation2(Z){return this.serialize(Z,serializeConfigPresentation2)}toPresentation3(Z){return this.serialize(Z,serializeConfigPresentation3)}hydrate(Z,ee){return this.get(Z,ee,{skipSelfReturn:!1})}get(Z,ee,ae={}){typeof ee!="string"&&(ae=ee||{},ee=void 0);const{skipSelfReturn:ye=!0}=ae||{};if(Array.isArray(Z))return Z.map(Je=>this.get(Je,ae));const ve=this.getState();if(typeof Z=="string"){const Je=ee||ve.iiif.mapping[Z];if(!Je)return ye?null:{id:Z,type:"unknown"};Z={id:Z,type:Je}}const be=ee||Z.type,Qe=Z.id,Xe=ve.iiif.entities[be];if(!Xe){const Je=ve.iiif.requests[Qe];return Je&&Je.resourceUri!==Qe?this.get(Je.resourceUri,ae):ye?null:Z}return Xe[Z.id]||(ye?null:Z)}select(Z){return Z(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(Z,ee){const ae=typeof Z=="string"?Z:Z.id;return this.load(ae,ee)}loadCollection(Z,ee){const ae=typeof Z=="string"?Z:Z.id;return this.load(ae,ee)}load(Z,ee){const ae=typeof Z=="string"?Z:Z.id;return ee?this.staticFetcher(ae,ee):this.remoteFetcher(ae)}areInputsEqual(Z,ee){return areInputsEqual(Z,ee)}subscribe(Z,ee,ae){typeof ae>"u"&&(typeof ee>"u"||ee===!1||ee===!0)&&(ae=ee,ee=Z,Z=ve=>ve);let ye=ae?null:Z(this.store.getState());return ae||ee(ye,this),this.store.subscribe(()=>{const ve=this.store.getState(),be=Z(ve);ye!==be&&!areInputsEqual(ye,be)&&ee(be,this),ye=be})}async ensureLoaded(Z){const ee=typeof Z=="string"?Z:Z.id;this.requestStatus(ee)||await this.load(ee)}requestStatus(Z){return this.select(ee=>ee.iiif.requests[Z])}getResourceMeta(Z,ee){const ae=this.getState().iiif.meta[Z];if(ae)return ee?ae[ee]:ae}setMetaValue([Z,ee,ae],ye){this.dispatch(typeof ye=="function"?metaActions.setMetaValueDynamic({id:Z,meta:ee,key:ae,updateValue:ye}):metaActions.setMetaValue({id:Z,meta:ee,key:ae,value:ye}))}}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(ie){for(var Z=1;Z<arguments.length;Z++){var ee=arguments[Z];for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(ie[ae]=ee[ae])}return ie},_extends$1.apply(this,arguments)}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(ie,Z,{checkForDefaultPrevented:ee=!0}={}){return function(ye){if(ie==null||ie(ye),ee===!1||!ye.defaultPrevented)return Z==null?void 0:Z(ye)}}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(ie,Z=[]){let ee=[];function ae(ve,be){const Qe=reactExports.createContext(be),Xe=ee.length;ee=[...ee,be];function Je(it){const{scope:st,children:lt,...ct}=it,gt=(st==null?void 0:st[ie][Xe])||Qe,ut=reactExports.useMemo(()=>ct,Object.values(ct));return reactExports.createElement(gt.Provider,{value:ut},lt)}function tt(it,st){const lt=(st==null?void 0:st[ie][Xe])||Qe,ct=reactExports.useContext(lt);if(ct)return ct;if(be!==void 0)return be;throw new Error(`\`${it}\` must be used within \`${ve}\``)}return Je.displayName=ve+"Provider",[Je,tt]}const ye=()=>{const ve=ee.map(be=>reactExports.createContext(be));return function(Qe){const Xe=(Qe==null?void 0:Qe[ie])||ve;return reactExports.useMemo(()=>({[`__scope${ie}`]:{...Qe,[ie]:Xe}}),[Qe,Xe])}};return ye.scopeName=ie,[ae,$c512c27ab02ef895$var$composeContextScopes(ye,...Z)]}function $c512c27ab02ef895$var$composeContextScopes(...ie){const Z=ie[0];if(ie.length===1)return Z;const ee=()=>{const ae=ie.map(ye=>({useScope:ye(),scopeName:ye.scopeName}));return function(ve){const be=ae.reduce((Qe,{useScope:Xe,scopeName:Je})=>{const it=Xe(ve)[`__scope${Je}`];return{...Qe,...it}},{});return reactExports.useMemo(()=>({[`__scope${Z.scopeName}`]:be}),[be])}};return ee.scopeName=Z.scopeName,ee}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ie){const Z=reactExports.useRef(ie);return reactExports.useEffect(()=>{Z.current=ie}),reactExports.useMemo(()=>(...ee)=>{var ae;return(ae=Z.current)===null||ae===void 0?void 0:ae.call(Z,...ee)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:ie,defaultProp:Z,onChange:ee=()=>{}}){const[ae,ye]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:Z,onChange:ee}),ve=ie!==void 0,be=ve?ie:ae,Qe=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ee),Xe=reactExports.useCallback(Je=>{if(ve){const it=typeof Je=="function"?Je(ie):Je;it!==ie&&Qe(it)}else ye(Je)},[ve,ie,ye,Qe]);return[be,Xe]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:ie,onChange:Z}){const ee=reactExports.useState(ie),[ae]=ee,ye=reactExports.useRef(ae),ve=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Z);return reactExports.useEffect(()=>{ye.current!==ae&&(ve(ae),ye.current=ae)},[ae,ye,ve]),ee}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function $6ed0406888f73fc4$var$setRef(ie,Z){typeof ie=="function"?ie(Z):ie!=null&&(ie.current=Z)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...ie){return Z=>ie.forEach(ee=>$6ed0406888f73fc4$var$setRef(ee,Z))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...ie){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...ie),ie)}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((ie,Z)=>{const{children:ee,...ae}=ie,ye=reactExports.Children.toArray(ee),ve=ye.find($5e63c961fc1ce211$var$isSlottable);if(ve){const be=ve.props.children,Qe=ye.map(Xe=>Xe===ve?reactExports.Children.count(be)>1?reactExports.Children.only(null):reactExports.isValidElement(be)?be.props.children:null:Xe);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},ae,{ref:Z}),reactExports.isValidElement(be)?reactExports.cloneElement(be,void 0,Qe):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},ae,{ref:Z}),ee)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((ie,Z)=>{const{children:ee,...ae}=ie;return reactExports.isValidElement(ee)?reactExports.cloneElement(ee,{...$5e63c961fc1ce211$var$mergeProps(ae,ee.props),ref:Z?$6ed0406888f73fc4$export$43e446d32b3d21af(Z,ee.ref):ee.ref}):reactExports.Children.count(ee)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:ie})=>reactExports.createElement(reactExports.Fragment,null,ie);function $5e63c961fc1ce211$var$isSlottable(ie){return reactExports.isValidElement(ie)&&ie.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(ie,Z){const ee={...Z};for(const ae in Z){const ye=ie[ae],ve=Z[ae];/^on[A-Z]/.test(ae)?ye&&ve?ee[ae]=(...Qe)=>{ve(...Qe),ye(...Qe)}:ye&&(ee[ae]=ye):ae==="style"?ee[ae]={...ye,...ve}:ae==="className"&&(ee[ae]=[ye,ve].filter(Boolean).join(" "))}return{...ie,...ee}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((ie,Z)=>{const ee=reactExports.forwardRef((ae,ye)=>{const{asChild:ve,...be}=ae,Qe=ve?$5e63c961fc1ce211$export$8c6ed5c666ac1360:Z;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(Qe,_extends$1({},be,{ref:ye}))});return ee.displayName=`Primitive.${Z}`,{...ie,[Z]:ee}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(ie,Z){ie&&reactDomExports.flushSync(()=>ie.dispatchEvent(Z))}function $fe963b355347cc68$export$3e6543de14f8614f(ie,Z){return reactExports.useReducer((ee,ae)=>{const ye=Z[ee][ae];return ye??ee},ie)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=ie=>{const{present:Z,children:ee}=ie,ae=$921a889cee6df7e8$var$usePresence(Z),ye=typeof ee=="function"?ee({present:ae.isPresent}):reactExports.Children.only(ee),ve=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ae.ref,ye.ref);return typeof ee=="function"||ae.isPresent?reactExports.cloneElement(ye,{ref:ve}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(ie){const[Z,ee]=reactExports.useState(),ae=reactExports.useRef({}),ye=reactExports.useRef(ie),ve=reactExports.useRef("none"),be=ie?"mounted":"unmounted",[Qe,Xe]=$fe963b355347cc68$export$3e6543de14f8614f(be,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const Je=$921a889cee6df7e8$var$getAnimationName(ae.current);ve.current=Qe==="mounted"?Je:"none"},[Qe]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const Je=ae.current,tt=ye.current;if(tt!==ie){const st=ve.current,lt=$921a889cee6df7e8$var$getAnimationName(Je);ie?Xe("MOUNT"):lt==="none"||(Je==null?void 0:Je.display)==="none"?Xe("UNMOUNT"):Xe(tt&&st!==lt?"ANIMATION_OUT":"UNMOUNT"),ye.current=ie}},[ie,Xe]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(Z){const Je=it=>{const lt=$921a889cee6df7e8$var$getAnimationName(ae.current).includes(it.animationName);it.target===Z&&lt&&reactDomExports.flushSync(()=>Xe("ANIMATION_END"))},tt=it=>{it.target===Z&&(ve.current=$921a889cee6df7e8$var$getAnimationName(ae.current))};return Z.addEventListener("animationstart",tt),Z.addEventListener("animationcancel",Je),Z.addEventListener("animationend",Je),()=>{Z.removeEventListener("animationstart",tt),Z.removeEventListener("animationcancel",Je),Z.removeEventListener("animationend",Je)}}else Xe("ANIMATION_END")},[Z,Xe]),{isPresent:["mounted","unmountSuspended"].includes(Qe),ref:reactExports.useCallback(Je=>{Je&&(ae.current=getComputedStyle(Je)),ee(Je)},[])}}function $921a889cee6df7e8$var$getAnimationName(ie){return(ie==null?void 0:ie.animationName)||"none"}const $1746a345f3d73bb7$var$useReactId=$2AODx$react.useId||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(ie){const[Z,ee]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{ie||ee(ae=>ae??String($1746a345f3d73bb7$var$count++))},[ie]),ie||(Z?`radix-${Z}`:"")}const $409067139f391064$var$COLLAPSIBLE_NAME="Collapsible",[$409067139f391064$var$createCollapsibleContext,$409067139f391064$export$952b32dcbe73087a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($409067139f391064$var$COLLAPSIBLE_NAME),[$409067139f391064$var$CollapsibleProvider,$409067139f391064$var$useCollapsibleContext]=$409067139f391064$var$createCollapsibleContext($409067139f391064$var$COLLAPSIBLE_NAME),$409067139f391064$export$6eb0f7ddcda6131f=reactExports.forwardRef((ie,Z)=>{const{__scopeCollapsible:ee,open:ae,defaultOpen:ye,disabled:ve,onOpenChange:be,...Qe}=ie,[Xe=!1,Je]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:ae,defaultProp:ye,onChange:be});return reactExports.createElement($409067139f391064$var$CollapsibleProvider,{scope:ee,disabled:ve,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:Xe,onOpenToggle:reactExports.useCallback(()=>Je(tt=>!tt),[Je])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$409067139f391064$var$getState(Xe),"data-disabled":ve?"":void 0},Qe,{ref:Z})))}),$409067139f391064$var$TRIGGER_NAME="CollapsibleTrigger",$409067139f391064$export$c135dce7b15bbbdc=reactExports.forwardRef((ie,Z)=>{const{__scopeCollapsible:ee,...ae}=ie,ye=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$TRIGGER_NAME,ee);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-controls":ye.contentId,"aria-expanded":ye.open||!1,"data-state":$409067139f391064$var$getState(ye.open),"data-disabled":ye.disabled?"":void 0,disabled:ye.disabled},ae,{ref:Z,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onClick,ye.onOpenToggle)}))}),$409067139f391064$var$CONTENT_NAME="CollapsibleContent",$409067139f391064$export$aadde00976f34151=reactExports.forwardRef((ie,Z)=>{const{forceMount:ee,...ae}=ie,ye=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,ie.__scopeCollapsible);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:ee||ye.open},({present:ve})=>reactExports.createElement($409067139f391064$var$CollapsibleContentImpl,_extends$1({},ae,{ref:Z,present:ve})))}),$409067139f391064$var$CollapsibleContentImpl=reactExports.forwardRef((ie,Z)=>{const{__scopeCollapsible:ee,present:ae,children:ye,...ve}=ie,be=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,ee),[Qe,Xe]=reactExports.useState(ae),Je=reactExports.useRef(null),tt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,Je),it=reactExports.useRef(0),st=it.current,lt=reactExports.useRef(0),ct=lt.current,gt=be.open||Qe,ut=reactExports.useRef(gt),mt=reactExports.useRef();return reactExports.useEffect(()=>{const ei=requestAnimationFrame(()=>ut.current=!1);return()=>cancelAnimationFrame(ei)},[]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const ei=Je.current;if(ei){mt.current=mt.current||{transitionDuration:ei.style.transitionDuration,animationName:ei.style.animationName},ei.style.transitionDuration="0s",ei.style.animationName="none";const ni=ei.getBoundingClientRect();it.current=ni.height,lt.current=ni.width,ut.current||(ei.style.transitionDuration=mt.current.transitionDuration,ei.style.animationName=mt.current.animationName),Xe(ae)}},[be.open,ae]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$409067139f391064$var$getState(be.open),"data-disabled":be.disabled?"":void 0,id:be.contentId,hidden:!gt},ve,{ref:tt,style:{"--radix-collapsible-content-height":st?`${st}px`:void 0,"--radix-collapsible-content-width":ct?`${ct}px`:void 0,...ie.style}}),gt&&ye)});function $409067139f391064$var$getState(ie){return ie?"open":"closed"}const $409067139f391064$export$be92b6f5f03c0fe9=$409067139f391064$export$6eb0f7ddcda6131f,$409067139f391064$export$41fb9f06171c75f4=$409067139f391064$export$c135dce7b15bbbdc,$409067139f391064$export$7c6e2c02157bb7d2=$409067139f391064$export$aadde00976f34151,ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(Z){super(Z),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(Z){return{didCatch:!0,error:Z}}resetErrorBoundary(){const{error:Z}=this.state;if(Z!==null){for(var ee,ae,ye=arguments.length,ve=new Array(ye),be=0;be<ye;be++)ve[be]=arguments[be];(ee=(ae=this.props).onReset)===null||ee===void 0||ee.call(ae,{args:ve,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(Z,ee){var ae,ye;(ae=(ye=this.props).onError)===null||ae===void 0||ae.call(ye,Z,ee)}componentDidUpdate(Z,ee){const{didCatch:ae}=this.state,{resetKeys:ye}=this.props;if(ae&&ee.error!==null&&hasArrayChanged(Z.resetKeys,ye)){var ve,be;(ve=(be=this.props).onReset)===null||ve===void 0||ve.call(be,{next:ye,prev:Z.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:Z,fallbackRender:ee,FallbackComponent:ae,fallback:ye}=this.props,{didCatch:ve,error:be}=this.state;let Qe=Z;if(ve){const Xe={error:be,resetErrorBoundary:this.resetErrorBoundary};if(typeof ee=="function")Qe=ee(Xe);else if(ae)Qe=reactExports.createElement(ae,Xe);else if(ye===null||reactExports.isValidElement(ye))Qe=ye;else throw be}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:ve,error:be,resetErrorBoundary:this.resetErrorBoundary}},Qe)}}function hasArrayChanged(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return ie.length!==Z.length||ie.some((ee,ae)=>!Object.is(ee,Z[ae]))}var e="colors",t="sizes",r="space",n={gap:r,gridGap:r,columnGap:r,gridColumnGap:r,rowGap:r,gridRowGap:r,inset:r,insetBlock:r,insetBlockEnd:r,insetBlockStart:r,insetInline:r,insetInlineEnd:r,insetInlineStart:r,margin:r,marginTop:r,marginRight:r,marginBottom:r,marginLeft:r,marginBlock:r,marginBlockEnd:r,marginBlockStart:r,marginInline:r,marginInlineEnd:r,marginInlineStart:r,padding:r,paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r,paddingBlock:r,paddingBlockEnd:r,paddingBlockStart:r,paddingInline:r,paddingInlineEnd:r,paddingInlineStart:r,top:r,right:r,bottom:r,left:r,scrollMargin:r,scrollMarginTop:r,scrollMarginRight:r,scrollMarginBottom:r,scrollMarginLeft:r,scrollMarginX:r,scrollMarginY:r,scrollMarginBlock:r,scrollMarginBlockEnd:r,scrollMarginBlockStart:r,scrollMarginInline:r,scrollMarginInlineEnd:r,scrollMarginInlineStart:r,scrollPadding:r,scrollPaddingTop:r,scrollPaddingRight:r,scrollPaddingBottom:r,scrollPaddingLeft:r,scrollPaddingX:r,scrollPaddingY:r,scrollPaddingBlock:r,scrollPaddingBlockEnd:r,scrollPaddingBlockStart:r,scrollPaddingInline:r,scrollPaddingInlineEnd:r,scrollPaddingInlineStart:r,fontSize:"fontSizes",background:e,backgroundColor:e,backgroundImage:e,borderImage:e,border:e,borderBlock:e,borderBlockEnd:e,borderBlockStart:e,borderBottom:e,borderBottomColor:e,borderColor:e,borderInline:e,borderInlineEnd:e,borderInlineStart:e,borderLeft:e,borderLeftColor:e,borderRight:e,borderRightColor:e,borderTop:e,borderTopColor:e,caretColor:e,color:e,columnRuleColor:e,fill:e,outline:e,outlineColor:e,stroke:e,textDecorationColor:e,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t,minBlockSize:t,maxBlockSize:t,inlineSize:t,minInlineSize:t,maxInlineSize:t,width:t,minWidth:t,maxWidth:t,height:t,minHeight:t,maxHeight:t,flexBasis:t,gridTemplateColumns:t,gridTemplateRows:t,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i=(ie,Z)=>typeof Z=="function"?{"()":Function.prototype.toString.call(Z)}:Z,o=()=>{const ie=Object.create(null);return(Z,ee,...ae)=>{const ye=(ve=>JSON.stringify(ve,i))(Z);return ye in ie?ie[ye]:ie[ye]=ee(Z,...ae)}},l=Symbol.for("sxs.internal"),s=(ie,Z)=>Object.defineProperties(ie,Object.getOwnPropertyDescriptors(Z)),a=ie=>{for(const Z in ie)return!0;return!1},{hasOwnProperty:c}=Object.prototype,d=ie=>ie.includes("-")?ie:ie.replace(/[A-Z]/g,Z=>"-"+Z.toLowerCase()),g=/\s+(?![^()]*\))/,p=ie=>Z=>ie(...typeof Z=="string"?String(Z).split(g):[Z]),u={appearance:ie=>({WebkitAppearance:ie,appearance:ie}),backfaceVisibility:ie=>({WebkitBackfaceVisibility:ie,backfaceVisibility:ie}),backdropFilter:ie=>({WebkitBackdropFilter:ie,backdropFilter:ie}),backgroundClip:ie=>({WebkitBackgroundClip:ie,backgroundClip:ie}),boxDecorationBreak:ie=>({WebkitBoxDecorationBreak:ie,boxDecorationBreak:ie}),clipPath:ie=>({WebkitClipPath:ie,clipPath:ie}),content:ie=>({content:ie.includes('"')||ie.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(ie)?ie:`"${ie}"`}),hyphens:ie=>({WebkitHyphens:ie,hyphens:ie}),maskImage:ie=>({WebkitMaskImage:ie,maskImage:ie}),maskSize:ie=>({WebkitMaskSize:ie,maskSize:ie}),tabSize:ie=>({MozTabSize:ie,tabSize:ie}),textSizeAdjust:ie=>({WebkitTextSizeAdjust:ie,textSizeAdjust:ie}),userSelect:ie=>({WebkitUserSelect:ie,userSelect:ie}),marginBlock:p((ie,Z)=>({marginBlockStart:ie,marginBlockEnd:Z||ie})),marginInline:p((ie,Z)=>({marginInlineStart:ie,marginInlineEnd:Z||ie})),maxSize:p((ie,Z)=>({maxBlockSize:ie,maxInlineSize:Z||ie})),minSize:p((ie,Z)=>({minBlockSize:ie,minInlineSize:Z||ie})),paddingBlock:p((ie,Z)=>({paddingBlockStart:ie,paddingBlockEnd:Z||ie})),paddingInline:p((ie,Z)=>({paddingInlineStart:ie,paddingInlineEnd:Z||ie}))},h=/([\d.]+)([^]*)/,f=(ie,Z)=>ie.length?ie.reduce((ee,ae)=>(ee.push(...Z.map(ye=>ye.includes("&")?ye.replace(/&/g,/[ +>|~]/.test(ae)&&/&.*&/.test(ye)?`:is(${ae})`:ae):ae+" "+ye)),ee),[]):Z,m$1=(ie,Z)=>ie in b&&typeof Z=="string"?Z.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(ee,ae,ye,ve)=>ae+(ye==="stretch"?`-moz-available${ve};${d(ie)}:${ae}-webkit-fill-available`:`-moz-fit-content${ve};${d(ie)}:${ae}fit-content`)+ve):String(Z),b={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S$1=ie=>ie?ie+"-":"",k$1=(ie,Z,ee)=>ie.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(ae,ye,ve,be,Qe)=>be=="$"==!!ve?ae:(ye||be=="--"?"calc(":"")+"var(--"+(be==="$"?S$1(Z)+(Qe.includes("$")?"":S$1(ee))+Qe.replace(/\$/g,"-"):Qe)+")"+(ye||be=="--"?"*"+(ye||"")+(ve||"1")+")":"")),y=/\s*,\s*(?![^()]*\))/,B=Object.prototype.toString,$=(ie,Z,ee,ae,ye)=>{let ve,be,Qe;const Xe=(Je,tt,it)=>{let st,lt;const ct=gt=>{for(st in gt){const ei=st.charCodeAt(0)===64,ni=ei&&Array.isArray(gt[st])?gt[st]:[gt[st]];for(lt of ni){const ri=/[A-Z]/.test(mt=st)?mt:mt.replace(/-[^]/g,li=>li[1].toUpperCase()),si=typeof lt=="object"&&lt&&lt.toString===B&&(!ae.utils[ri]||!tt.length);if(ri in ae.utils&&!si){const li=ae.utils[ri];if(li!==be){be=li,ct(li(lt)),be=null;continue}}else if(ri in u){const li=u[ri];if(li!==Qe){Qe=li,ct(li(lt)),Qe=null;continue}}if(ei&&(ut=st.slice(1)in ae.media?"@media "+ae.media[st.slice(1)]:st,st=ut.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(li,ai,ci,Ci,pi,gi)=>{const _i=h.test(ai),bi=.0625*(_i?-1:1),[Mi,yi]=_i?[Ci,ai]:[ai,Ci];return"("+(ci[0]==="="?"":ci[0]===">"===_i?"max-":"min-")+Mi+":"+(ci[0]!=="="&&ci.length===1?yi.replace(h,(Ti,Ii,Ri)=>Number(Ii)+bi*(ci===">"?1:-1)+Ri):yi)+(pi?") and ("+(pi[0]===">"?"min-":"max-")+Mi+":"+(pi.length===1?gi.replace(h,(Ti,Ii,Ri)=>Number(Ii)+bi*(pi===">"?-1:1)+Ri):gi):"")+")"})),si){const li=ei?it.concat(st):[...it],ai=ei?[...tt]:f(tt,st.split(y));ve!==void 0&&ye(x$1(...ve)),ve=void 0,Xe(lt,ai,li)}else ve===void 0&&(ve=[[],tt,it]),st=ei||st.charCodeAt(0)!==36?st:`--${S$1(ae.prefix)}${st.slice(1).replace(/\$/g,"-")}`,lt=si?lt:typeof lt=="number"?lt&&ri in I?String(lt)+"px":String(lt):k$1(m$1(ri,lt??""),ae.prefix,ae.themeMap[ri]),ve[0].push(`${ei?`${st} `:`${d(st)}:`}${lt}`)}}var ut,mt};ct(Je),ve!==void 0&&ye(x$1(...ve)),ve=void 0};Xe(ie,Z,ee)},x$1=(ie,Z,ee)=>`${ee.map(ae=>`${ae}{`).join("")}${Z.length?`${Z.join(",")}{`:""}${ie.join(";")}${Z.length?"}":""}${Array(ee.length?ee.length+1:0).join("}")}`,I={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R$1=ie=>String.fromCharCode(ie+(ie>25?39:97)),z$1=ie=>(Z=>{let ee,ae="";for(ee=Math.abs(Z);ee>52;ee=ee/52|0)ae=R$1(ee%52)+ae;return R$1(ee%52)+ae})(((Z,ee)=>{let ae=ee.length;for(;ae;)Z=33*Z^ee.charCodeAt(--ae);return Z})(5381,JSON.stringify(ie))>>>0),W$1=["themed","global","styled","onevar","resonevar","allvar","inline"],j$1=ie=>{if(ie.href&&!ie.href.startsWith(location.origin))return!1;try{return!!ie.cssRules}catch{return!1}},E=ie=>{let Z;const ee=()=>{const{cssRules:ye}=Z.sheet;return[].map.call(ye,(ve,be)=>{const{cssText:Qe}=ve;let Xe="";if(Qe.startsWith("--sxs"))return"";if(ye[be-1]&&(Xe=ye[be-1].cssText).startsWith("--sxs")){if(!ve.cssRules.length)return"";for(const Je in Z.rules)if(Z.rules[Je].group===ve)return`--sxs{--sxs:${[...Z.rules[Je].cache].join(" ")}}${Qe}`;return ve.cssRules.length?`${Xe}${Qe}`:""}return Qe}).join("")},ae=()=>{if(Z){const{rules:Qe,sheet:Xe}=Z;if(!Xe.deleteRule){for(;Object(Object(Xe.cssRules)[0]).type===3;)Xe.cssRules.splice(0,1);Xe.cssRules=[]}for(const Je in Qe)delete Qe[Je]}const ye=Object(ie).styleSheets||[];for(const Qe of ye)if(j$1(Qe)){for(let Xe=0,Je=Qe.cssRules;Je[Xe];++Xe){const tt=Object(Je[Xe]);if(tt.type!==1)continue;const it=Object(Je[Xe+1]);if(it.type!==4)continue;++Xe;const{cssText:st}=tt;if(!st.startsWith("--sxs"))continue;const lt=st.slice(14,-3).trim().split(/\s+/),ct=W$1[lt[0]];ct&&(Z||(Z={sheet:Qe,reset:ae,rules:{},toString:ee}),Z.rules[ct]={group:it,index:Xe,cache:new Set(lt)})}if(Z)break}if(!Z){const Qe=(Xe,Je)=>({type:Je,cssRules:[],insertRule(tt,it){this.cssRules.splice(it,0,Qe(tt,{import:3,undefined:1}[(tt.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return Xe==="@media{}"?`@media{${[].map.call(this.cssRules,tt=>tt.cssText).join("")}}`:Xe}});Z={sheet:ie?(ie.head||ie).appendChild(document.createElement("style")).sheet:Qe("","text/css"),rules:{},reset:ae,toString:ee}}const{sheet:ve,rules:be}=Z;for(let Qe=W$1.length-1;Qe>=0;--Qe){const Xe=W$1[Qe];if(!be[Xe]){const Je=W$1[Qe+1],tt=be[Je]?be[Je].index:ve.cssRules.length;ve.insertRule("@media{}",tt),ve.insertRule(`--sxs{--sxs:${Qe}}`,tt),be[Xe]={group:ve.cssRules[tt+1],index:tt,cache:new Set([Qe])}}v(be[Xe])}};return ae(),Z},v=ie=>{const Z=ie.group;let ee=Z.cssRules.length;ie.apply=ae=>{try{Z.insertRule(ae,ee),++ee}catch{}}},T$1=Symbol(),w=o(),M=(ie,Z)=>w(ie,()=>(...ee)=>{let ae={type:null,composers:new Set};for(const ye of ee)if(ye!=null)if(ye[l]){ae.type==null&&(ae.type=ye[l].type);for(const ve of ye[l].composers)ae.composers.add(ve)}else ye.constructor!==Object||ye.$$typeof?ae.type==null&&(ae.type=ye):ae.composers.add(C(ye,ie));return ae.type==null&&(ae.type="span"),ae.composers.size||ae.composers.add(["PJLV",{},[],[],{},[]]),P(ie,ae,Z)}),C=({variants:ie,compoundVariants:Z,defaultVariants:ee,...ae},ye)=>{const ve=`${S$1(ye.prefix)}c-${z$1(ae)}`,be=[],Qe=[],Xe=Object.create(null),Je=[];for(const st in ee)Xe[st]=String(ee[st]);if(typeof ie=="object"&&ie)for(const st in ie){tt=Xe,it=st,c.call(tt,it)||(Xe[st]="undefined");const lt=ie[st];for(const ct in lt){const gt={[st]:String(ct)};String(ct)==="undefined"&&Je.push(st);const ut=lt[ct],mt=[gt,ut,!a(ut)];be.push(mt)}}var tt,it;if(typeof Z=="object"&&Z)for(const st of Z){let{css:lt,...ct}=st;lt=typeof lt=="object"&&lt||{};for(const ut in ct)ct[ut]=String(ct[ut]);const gt=[ct,lt,!a(lt)];Qe.push(gt)}return[ve,ae,be,Qe,Xe,Je]},P=(ie,Z,ee)=>{const[ae,ye,ve,be]=L$1(Z.composers),Qe=typeof Z.type=="function"||Z.type.$$typeof?(it=>{function st(){for(let lt=0;lt<st[T$1].length;lt++){const[ct,gt]=st[T$1][lt];it.rules[ct].apply(gt)}return st[T$1]=[],null}return st[T$1]=[],st.rules={},W$1.forEach(lt=>st.rules[lt]={apply:ct=>st[T$1].push([lt,ct])}),st})(ee):null,Xe=(Qe||ee).rules,Je=`.${ae}${ye.length>1?`:where(.${ye.slice(1).join(".")})`:""}`,tt=it=>{it=typeof it=="object"&&it||A;const{css:st,...lt}=it,ct={};for(const mt in ve)if(delete lt[mt],mt in it){let ei=it[mt];typeof ei=="object"&&ei?ct[mt]={"@initial":ve[mt],...ei}:(ei=String(ei),ct[mt]=ei!=="undefined"||be.has(mt)?ei:ve[mt])}else ct[mt]=ve[mt];const gt=new Set([...ye]);for(const[mt,ei,ni,ri]of Z.composers){ee.rules.styled.cache.has(mt)||(ee.rules.styled.cache.add(mt),$(ei,[`.${mt}`],[],ie,ai=>{Xe.styled.apply(ai)}));const si=O$1(ni,ct,ie.media),li=O$1(ri,ct,ie.media,!0);for(const ai of si)if(ai!==void 0)for(const[ci,Ci,pi]of ai){const gi=`${mt}-${z$1(Ci)}-${ci}`;gt.add(gi);const _i=(pi?ee.rules.resonevar:ee.rules.onevar).cache,bi=pi?Xe.resonevar:Xe.onevar;_i.has(gi)||(_i.add(gi),$(Ci,[`.${gi}`],[],ie,Mi=>{bi.apply(Mi)}))}for(const ai of li)if(ai!==void 0)for(const[ci,Ci]of ai){const pi=`${mt}-${z$1(Ci)}-${ci}`;gt.add(pi),ee.rules.allvar.cache.has(pi)||(ee.rules.allvar.cache.add(pi),$(Ci,[`.${pi}`],[],ie,gi=>{Xe.allvar.apply(gi)}))}}if(typeof st=="object"&&st){const mt=`${ae}-i${z$1(st)}-css`;gt.add(mt),ee.rules.inline.cache.has(mt)||(ee.rules.inline.cache.add(mt),$(st,[`.${mt}`],[],ie,ei=>{Xe.inline.apply(ei)}))}for(const mt of String(it.className||"").trim().split(/\s+/))mt&&gt.add(mt);const ut=lt.className=[...gt].join(" ");return{type:Z.type,className:ut,selector:Je,props:lt,toString:()=>ut,deferredInjector:Qe}};return s(tt,{className:ae,selector:Je,[l]:Z,toString:()=>(ee.rules.styled.cache.has(ae)||tt(),ae)})},L$1=ie=>{let Z="";const ee=[],ae={},ye=[];for(const[ve,,,,be,Qe]of ie){Z===""&&(Z=ve),ee.push(ve),ye.push(...Qe);for(const Xe in be){const Je=be[Xe];(ae[Xe]===void 0||Je!=="undefined"||Qe.includes(Je))&&(ae[Xe]=Je)}}return[Z,ee,ae,new Set(ye)]},O$1=(ie,Z,ee,ae)=>{const ye=[];e:for(let[ve,be,Qe]of ie){if(Qe)continue;let Xe,Je=0,tt=!1;for(Xe in ve){const it=ve[Xe];let st=Z[Xe];if(st!==it){if(typeof st!="object"||!st)continue e;{let lt,ct,gt=0;for(const ut in st){if(it===String(st[ut])){if(ut!=="@initial"){const mt=ut.slice(1);(ct=ct||[]).push(mt in ee?ee[mt]:ut.replace(/^@media ?/,"")),tt=!0}Je+=gt,lt=!0}++gt}if(ct&&ct.length&&(be={["@media "+ct.join(", ")]:be}),!lt)continue e}}}(ye[Je]=ye[Je]||[]).push([ae?"cv":`${Xe}-${ve[Xe]}`,be,tt])}return ye},A={},N$1=o(),D$1=(ie,Z)=>N$1(ie,()=>(...ee)=>{const ae=()=>{for(let ye of ee){ye=typeof ye=="object"&&ye||{};let ve=z$1(ye);if(!Z.rules.global.cache.has(ve)){if(Z.rules.global.cache.add(ve),"@import"in ye){let be=[].indexOf.call(Z.sheet.cssRules,Z.rules.themed.group)-1;for(let Qe of[].concat(ye["@import"]))Qe=Qe.includes('"')||Qe.includes("'")?Qe:`"${Qe}"`,Z.sheet.insertRule(`@import ${Qe};`,be++);delete ye["@import"]}$(ye,[],[],ie,be=>{Z.rules.global.apply(be)})}}return""};return s(ae,{toString:ae})}),H=o(),V=(ie,Z)=>H(ie,()=>ee=>{const ae=`${S$1(ie.prefix)}k-${z$1(ee)}`,ye=()=>{if(!Z.rules.global.cache.has(ae)){Z.rules.global.cache.add(ae);const ve=[];$(ee,[],[],ie,Qe=>ve.push(Qe));const be=`@keyframes ${ae}{${ve.join("")}}`;Z.rules.global.apply(be)}return ae};return s(ye,{get name(){return ye()},toString:ye})}),G=class{constructor(ie,Z,ee,ae){this.token=ie==null?"":String(ie),this.value=Z==null?"":String(Z),this.scale=ee==null?"":String(ee),this.prefix=ae==null?"":String(ae)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S$1(this.prefix)+S$1(this.scale)+this.token}toString(){return this.computedValue}},F=o(),J$1=(ie,Z)=>F(ie,()=>(ee,ae)=>{ae=typeof ee=="object"&&ee||Object(ae);const ye=`.${ee=(ee=typeof ee=="string"?ee:"")||`${S$1(ie.prefix)}t-${z$1(ae)}`}`,ve={},be=[];for(const Xe in ae){ve[Xe]={};for(const Je in ae[Xe]){const tt=`--${S$1(ie.prefix)}${Xe}-${Je}`,it=k$1(String(ae[Xe][Je]),ie.prefix,Xe);ve[Xe][Je]=new G(Je,it,Xe,ie.prefix),be.push(`${tt}:${it}`)}}const Qe=()=>{if(be.length&&!Z.rules.themed.cache.has(ee)){Z.rules.themed.cache.add(ee);const Xe=`${ae===ie.theme?":root,":""}.${ee}{${be.join(";")}}`;Z.rules.themed.apply(Xe)}return ee};return{...ve,get className(){return Qe()},selector:ye,toString:Qe}}),U=o(),X$1,Y$1=o(),q=ie=>{const Z=(ee=>{let ae=!1;const ye=U(ee,ve=>{ae=!0;const be="prefix"in(ve=typeof ve=="object"&&ve||{})?String(ve.prefix):"",Qe=typeof ve.media=="object"&&ve.media||{},Xe=typeof ve.root=="object"?ve.root||null:globalThis.document||null,Je=typeof ve.theme=="object"&&ve.theme||{},tt={prefix:be,media:Qe,theme:Je,themeMap:typeof ve.themeMap=="object"&&ve.themeMap||{...n},utils:typeof ve.utils=="object"&&ve.utils||{}},it=E(Xe),st={css:M(tt,it),globalCss:D$1(tt,it),keyframes:V(tt,it),createTheme:J$1(tt,it),reset(){it.reset(),st.theme.toString()},theme:{},sheet:it,config:tt,prefix:be,getCssText:it.toString,toString:it.toString};return String(st.theme=st.createTheme(Je)),st});return ae||ye.reset(),ye})(ie);return Z.styled=(({config:ee,sheet:ae})=>Y$1(ee,()=>{const ye=M(ee,ae);return(...ve)=>{const be=ye(...ve),Qe=be[l].type,Xe=e$1.forwardRef((Je,tt)=>{const it=Je&&Je.as||Qe,{props:st,deferredInjector:lt}=be(Je);return delete st.as,st.ref=tt,lt?e$1.createElement(e$1.Fragment,null,e$1.createElement(it,st),e$1.createElement(lt,null)):e$1.createElement(it,st)});return Xe.className=be.className,Xe.displayName=`Styled.${Qe.displayName||Qe.name||Qe}`,Xe.selector=be.selector,Xe.toString=()=>be.selector,Xe[l]=be[l],Xe}}))(Z),Z},K$1=()=>X$1||(X$1=q()),Q$1=(...ie)=>K$1().createTheme(...ie);function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(ie){const Z=ie+"CollectionProvider",[ee,ae]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(Z),[ye,ve]=ee(Z,{collectionRef:{current:null},itemMap:new Map}),be=lt=>{const{scope:ct,children:gt}=lt,ut=e$1.useRef(null),mt=e$1.useRef(new Map).current;return e$1.createElement(ye,{scope:ct,itemMap:mt,collectionRef:ut},gt)},Qe=ie+"CollectionSlot",Xe=e$1.forwardRef((lt,ct)=>{const{scope:gt,children:ut}=lt,mt=ve(Qe,gt),ei=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ct,mt.collectionRef);return e$1.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:ei},ut)}),Je=ie+"CollectionItemSlot",tt="data-radix-collection-item",it=e$1.forwardRef((lt,ct)=>{const{scope:gt,children:ut,...mt}=lt,ei=e$1.useRef(null),ni=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ct,ei),ri=ve(Je,gt);return e$1.useEffect(()=>(ri.itemMap.set(ei,{ref:ei,...mt}),()=>void ri.itemMap.delete(ei))),e$1.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[tt]:"",ref:ni},ut)});function st(lt){const ct=ve(ie+"CollectionConsumer",lt);return e$1.useCallback(()=>{const ut=ct.collectionRef.current;if(!ut)return[];const mt=Array.from(ut.querySelectorAll(`[${tt}]`));return Array.from(ct.itemMap.values()).sort((ri,si)=>mt.indexOf(ri.ref.current)-mt.indexOf(si.ref.current))},[ct.collectionRef,ct.itemMap])}return[{Provider:be,Slot:Xe,ItemSlot:it},st,ae]}const $f631663db3294ace$var$DirectionContext=reactExports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(ie){const Z=reactExports.useContext($f631663db3294ace$var$DirectionContext);return ie||Z||"ltr"}const $d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=reactExports.forwardRef((ie,Z)=>reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:ie.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:ie.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends$1({},ie,{ref:Z}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=reactExports.forwardRef((ie,Z)=>{const{__scopeRovingFocusGroup:ee,orientation:ae,loop:ye=!1,dir:ve,currentTabStopId:be,defaultCurrentTabStopId:Qe,onCurrentTabStopIdChange:Xe,onEntryFocus:Je,...tt}=ie,it=reactExports.useRef(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,it),lt=$f631663db3294ace$export$b39126d51d94e6f3(ve),[ct=null,gt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:be,defaultProp:Qe,onChange:Xe}),[ut,mt]=reactExports.useState(!1),ei=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Je),ni=$d7bdfb9eb0fdf311$var$useCollection(ee),ri=reactExports.useRef(!1),[si,li]=reactExports.useState(0);return reactExports.useEffect(()=>{const ai=it.current;if(ai)return ai.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,ei),()=>ai.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,ei)},[ei]),reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:ee,orientation:ae,dir:lt,loop:ye,currentTabStopId:ct,onItemFocus:reactExports.useCallback(ai=>gt(ai),[gt]),onItemShiftTab:reactExports.useCallback(()=>mt(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>li(ai=>ai+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>li(ai=>ai-1),[])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:ut||si===0?-1:0,"data-orientation":ae},tt,{ref:st,style:{outline:"none",...ie.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onMouseDown,()=>{ri.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onFocus,ai=>{const ci=!ri.current;if(ai.target===ai.currentTarget&&ci&&!ut){const Ci=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(ai.currentTarget.dispatchEvent(Ci),!Ci.defaultPrevented){const pi=ni().filter(yi=>yi.focusable),gi=pi.find(yi=>yi.active),_i=pi.find(yi=>yi.id===ct),Mi=[gi,_i,...pi].filter(Boolean).map(yi=>yi.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(Mi)}}ri.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onBlur,()=>mt(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=reactExports.forwardRef((ie,Z)=>{const{__scopeRovingFocusGroup:ee,focusable:ae=!0,active:ye=!1,tabStopId:ve,...be}=ie,Qe=$1746a345f3d73bb7$export$f680877a34711e37(),Xe=ve||Qe,Je=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,ee),tt=Je.currentTabStopId===Xe,it=$d7bdfb9eb0fdf311$var$useCollection(ee),{onFocusableItemAdd:st,onFocusableItemRemove:lt}=Je;return reactExports.useEffect(()=>{if(ae)return st(),()=>lt()},[ae,st,lt]),reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:ee,id:Xe,focusable:ae,active:ye},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({tabIndex:tt?0:-1,"data-orientation":Je.orientation},be,{ref:Z,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onMouseDown,ct=>{ae?Je.onItemFocus(Xe):ct.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onFocus,()=>Je.onItemFocus(Xe)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onKeyDown,ct=>{if(ct.key==="Tab"&&ct.shiftKey){Je.onItemShiftTab();return}if(ct.target!==ct.currentTarget)return;const gt=$d7bdfb9eb0fdf311$var$getFocusIntent(ct,Je.orientation,Je.dir);if(gt!==void 0){ct.preventDefault();let mt=it().filter(ei=>ei.focusable).map(ei=>ei.ref.current);if(gt==="last")mt.reverse();else if(gt==="prev"||gt==="next"){gt==="prev"&&mt.reverse();const ei=mt.indexOf(ct.currentTarget);mt=Je.loop?$d7bdfb9eb0fdf311$var$wrapArray(mt,ei+1):mt.slice(ei+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(mt))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(ie,Z){return Z!=="rtl"?ie:ie==="ArrowLeft"?"ArrowRight":ie==="ArrowRight"?"ArrowLeft":ie}function $d7bdfb9eb0fdf311$var$getFocusIntent(ie,Z,ee){const ae=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(ie.key,ee);if(!(Z==="vertical"&&["ArrowLeft","ArrowRight"].includes(ae))&&!(Z==="horizontal"&&["ArrowUp","ArrowDown"].includes(ae)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[ae]}function $d7bdfb9eb0fdf311$var$focusFirst(ie){const Z=document.activeElement;for(const ee of ie)if(ee===Z||(ee.focus(),document.activeElement!==Z))return}function $d7bdfb9eb0fdf311$var$wrapArray(ie,Z){return ie.map((ee,ae)=>ie[(Z+ae)%ie.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454,$69cb30bb0017df05$var$TABS_NAME="Tabs",[$69cb30bb0017df05$var$createTabsContext,$69cb30bb0017df05$export$355f5bd209d7b13a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($69cb30bb0017df05$var$TABS_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$69cb30bb0017df05$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$69cb30bb0017df05$var$TabsProvider,$69cb30bb0017df05$var$useTabsContext]=$69cb30bb0017df05$var$createTabsContext($69cb30bb0017df05$var$TABS_NAME),$69cb30bb0017df05$export$b2539bed5023c21c=reactExports.forwardRef((ie,Z)=>{const{__scopeTabs:ee,value:ae,onValueChange:ye,defaultValue:ve,orientation:be="horizontal",dir:Qe,activationMode:Xe="automatic",...Je}=ie,tt=$f631663db3294ace$export$b39126d51d94e6f3(Qe),[it,st]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:ae,onChange:ye,defaultProp:ve});return reactExports.createElement($69cb30bb0017df05$var$TabsProvider,{scope:ee,baseId:$1746a345f3d73bb7$export$f680877a34711e37(),value:it,onValueChange:st,orientation:be,dir:tt,activationMode:Xe},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({dir:tt,"data-orientation":be},Je,{ref:Z})))}),$69cb30bb0017df05$var$TAB_LIST_NAME="TabsList",$69cb30bb0017df05$export$9712d22edc0d78c1=reactExports.forwardRef((ie,Z)=>{const{__scopeTabs:ee,loop:ae=!0,...ye}=ie,ve=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TAB_LIST_NAME,ee),be=$69cb30bb0017df05$var$useRovingFocusGroupScope(ee);return reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},be,{orientation:ve.orientation,dir:ve.dir,loop:ae}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"tablist","aria-orientation":ve.orientation},ye,{ref:Z})))}),$69cb30bb0017df05$var$TRIGGER_NAME="TabsTrigger",$69cb30bb0017df05$export$8114b9fdfdf9f3ba=reactExports.forwardRef((ie,Z)=>{const{__scopeTabs:ee,value:ae,disabled:ye=!1,...ve}=ie,be=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TRIGGER_NAME,ee),Qe=$69cb30bb0017df05$var$useRovingFocusGroupScope(ee),Xe=$69cb30bb0017df05$var$makeTriggerId(be.baseId,ae),Je=$69cb30bb0017df05$var$makeContentId(be.baseId,ae),tt=ae===be.value;return reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},Qe,{focusable:!ye,active:tt}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"tab","aria-selected":tt,"aria-controls":Je,"data-state":tt?"active":"inactive","data-disabled":ye?"":void 0,disabled:ye,id:Xe},ve,{ref:Z,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onMouseDown,it=>{!ye&&it.button===0&&it.ctrlKey===!1?be.onValueChange(ae):it.preventDefault()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onKeyDown,it=>{[" ","Enter"].includes(it.key)&&be.onValueChange(ae)}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onFocus,()=>{const it=be.activationMode!=="manual";!tt&&!ye&&it&&be.onValueChange(ae)})})))}),$69cb30bb0017df05$var$CONTENT_NAME="TabsContent",$69cb30bb0017df05$export$bd905d70e8fd2ebb=reactExports.forwardRef((ie,Z)=>{const{__scopeTabs:ee,value:ae,forceMount:ye,children:ve,...be}=ie,Qe=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$CONTENT_NAME,ee),Xe=$69cb30bb0017df05$var$makeTriggerId(Qe.baseId,ae),Je=$69cb30bb0017df05$var$makeContentId(Qe.baseId,ae),tt=ae===Qe.value,it=reactExports.useRef(tt);return reactExports.useEffect(()=>{const st=requestAnimationFrame(()=>it.current=!1);return()=>cancelAnimationFrame(st)},[]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:ye||tt},({present:st})=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":tt?"active":"inactive","data-orientation":Qe.orientation,role:"tabpanel","aria-labelledby":Xe,hidden:!st,id:Je,tabIndex:0},be,{ref:Z,style:{...ie.style,animationDuration:it.current?"0s":void 0}}),st&&ve))});function $69cb30bb0017df05$var$makeTriggerId(ie,Z){return`${ie}-trigger-${Z}`}function $69cb30bb0017df05$var$makeContentId(ie,Z){return`${ie}-content-${Z}`}const $69cb30bb0017df05$export$be92b6f5f03c0fe9=$69cb30bb0017df05$export$b2539bed5023c21c,$69cb30bb0017df05$export$54c2e3dc7acea9f5=$69cb30bb0017df05$export$9712d22edc0d78c1,$69cb30bb0017df05$export$41fb9f06171c75f4=$69cb30bb0017df05$export$8114b9fdfdf9f3ba,$69cb30bb0017df05$export$7c6e2c02157bb7d2=$69cb30bb0017df05$export$bd905d70e8fd2ebb;var lib$5={},Parser$3={},Tokenizer={},decode={},decodeDataHtml={};Object.defineProperty(decodeDataHtml,"__esModule",{value:!0}),decodeDataHtml.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(ie){return ie.charCodeAt(0)}));var decodeDataXml={};Object.defineProperty(decodeDataXml,"__esModule",{value:!0}),decodeDataXml.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(ie){return ie.charCodeAt(0)}));var decode_codepoint={};(function(ie){var Z;Object.defineProperty(ie,"__esModule",{value:!0}),ie.replaceCodePoint=ie.fromCodePoint=void 0;var ee=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);ie.fromCodePoint=(Z=String.fromCodePoint)!==null&&Z!==void 0?Z:function(ve){var be="";return ve>65535&&(ve-=65536,be+=String.fromCharCode(ve>>>10&1023|55296),ve=56320|ve&1023),be+=String.fromCharCode(ve),be};function ae(ve){var be;return ve>=55296&&ve<=57343||ve>1114111?65533:(be=ee.get(ve))!==null&&be!==void 0?be:ve}ie.replaceCodePoint=ae;function ye(ve){return(0,ie.fromCodePoint)(ae(ve))}ie.default=ye})(decode_codepoint),function(ie){var Z=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(gi,_i,bi,Mi){Mi===void 0&&(Mi=bi);var yi=Object.getOwnPropertyDescriptor(_i,bi);(!yi||("get"in yi?!_i.__esModule:yi.writable||yi.configurable))&&(yi={enumerable:!0,get:function(){return _i[bi]}}),Object.defineProperty(gi,Mi,yi)}:function(gi,_i,bi,Mi){Mi===void 0&&(Mi=bi),gi[Mi]=_i[bi]}),ee=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(gi,_i){Object.defineProperty(gi,"default",{enumerable:!0,value:_i})}:function(gi,_i){gi.default=_i}),ae=commonjsGlobal&&commonjsGlobal.__importStar||function(gi){if(gi&&gi.__esModule)return gi;var _i={};if(gi!=null)for(var bi in gi)bi!=="default"&&Object.prototype.hasOwnProperty.call(gi,bi)&&Z(_i,gi,bi);return ee(_i,gi),_i},ye=commonjsGlobal&&commonjsGlobal.__importDefault||function(gi){return gi&&gi.__esModule?gi:{default:gi}};Object.defineProperty(ie,"__esModule",{value:!0}),ie.decodeXML=ie.decodeHTMLStrict=ie.decodeHTMLAttribute=ie.decodeHTML=ie.determineBranch=ie.EntityDecoder=ie.DecodingMode=ie.BinTrieFlags=ie.fromCodePoint=ie.replaceCodePoint=ie.decodeCodePoint=ie.xmlDecodeTree=ie.htmlDecodeTree=void 0;var ve=ye(decodeDataHtml);ie.htmlDecodeTree=ve.default;var be=ye(decodeDataXml);ie.xmlDecodeTree=be.default;var Qe=ae(decode_codepoint);ie.decodeCodePoint=Qe.default;var Xe=decode_codepoint;Object.defineProperty(ie,"replaceCodePoint",{enumerable:!0,get:function(){return Xe.replaceCodePoint}}),Object.defineProperty(ie,"fromCodePoint",{enumerable:!0,get:function(){return Xe.fromCodePoint}});var Je;(function(gi){gi[gi.NUM=35]="NUM",gi[gi.SEMI=59]="SEMI",gi[gi.EQUALS=61]="EQUALS",gi[gi.ZERO=48]="ZERO",gi[gi.NINE=57]="NINE",gi[gi.LOWER_A=97]="LOWER_A",gi[gi.LOWER_F=102]="LOWER_F",gi[gi.LOWER_X=120]="LOWER_X",gi[gi.LOWER_Z=122]="LOWER_Z",gi[gi.UPPER_A=65]="UPPER_A",gi[gi.UPPER_F=70]="UPPER_F",gi[gi.UPPER_Z=90]="UPPER_Z"})(Je||(Je={}));var tt=32,it;(function(gi){gi[gi.VALUE_LENGTH=49152]="VALUE_LENGTH",gi[gi.BRANCH_LENGTH=16256]="BRANCH_LENGTH",gi[gi.JUMP_TABLE=127]="JUMP_TABLE"})(it=ie.BinTrieFlags||(ie.BinTrieFlags={}));function st(gi){return gi>=Je.ZERO&&gi<=Je.NINE}function lt(gi){return gi>=Je.UPPER_A&&gi<=Je.UPPER_F||gi>=Je.LOWER_A&&gi<=Je.LOWER_F}function ct(gi){return gi>=Je.UPPER_A&&gi<=Je.UPPER_Z||gi>=Je.LOWER_A&&gi<=Je.LOWER_Z||st(gi)}function gt(gi){return gi===Je.EQUALS||ct(gi)}var ut;(function(gi){gi[gi.EntityStart=0]="EntityStart",gi[gi.NumericStart=1]="NumericStart",gi[gi.NumericDecimal=2]="NumericDecimal",gi[gi.NumericHex=3]="NumericHex",gi[gi.NamedEntity=4]="NamedEntity"})(ut||(ut={}));var mt;(function(gi){gi[gi.Legacy=0]="Legacy",gi[gi.Strict=1]="Strict",gi[gi.Attribute=2]="Attribute"})(mt=ie.DecodingMode||(ie.DecodingMode={}));var ei=function(){function gi(_i,bi,Mi){this.decodeTree=_i,this.emitCodePoint=bi,this.errors=Mi,this.state=ut.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=mt.Strict}return gi.prototype.startEntity=function(_i){this.decodeMode=_i,this.state=ut.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},gi.prototype.write=function(_i,bi){switch(this.state){case ut.EntityStart:return _i.charCodeAt(bi)===Je.NUM?(this.state=ut.NumericStart,this.consumed+=1,this.stateNumericStart(_i,bi+1)):(this.state=ut.NamedEntity,this.stateNamedEntity(_i,bi));case ut.NumericStart:return this.stateNumericStart(_i,bi);case ut.NumericDecimal:return this.stateNumericDecimal(_i,bi);case ut.NumericHex:return this.stateNumericHex(_i,bi);case ut.NamedEntity:return this.stateNamedEntity(_i,bi)}},gi.prototype.stateNumericStart=function(_i,bi){return bi>=_i.length?-1:(_i.charCodeAt(bi)|tt)===Je.LOWER_X?(this.state=ut.NumericHex,this.consumed+=1,this.stateNumericHex(_i,bi+1)):(this.state=ut.NumericDecimal,this.stateNumericDecimal(_i,bi))},gi.prototype.addToNumericResult=function(_i,bi,Mi,yi){if(bi!==Mi){var Ti=Mi-bi;this.result=this.result*Math.pow(yi,Ti)+parseInt(_i.substr(bi,Ti),yi),this.consumed+=Ti}},gi.prototype.stateNumericHex=function(_i,bi){for(var Mi=bi;bi<_i.length;){var yi=_i.charCodeAt(bi);if(st(yi)||lt(yi))bi+=1;else return this.addToNumericResult(_i,Mi,bi,16),this.emitNumericEntity(yi,3)}return this.addToNumericResult(_i,Mi,bi,16),-1},gi.prototype.stateNumericDecimal=function(_i,bi){for(var Mi=bi;bi<_i.length;){var yi=_i.charCodeAt(bi);if(st(yi))bi+=1;else return this.addToNumericResult(_i,Mi,bi,10),this.emitNumericEntity(yi,2)}return this.addToNumericResult(_i,Mi,bi,10),-1},gi.prototype.emitNumericEntity=function(_i,bi){var Mi;if(this.consumed<=bi)return(Mi=this.errors)===null||Mi===void 0||Mi.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(_i===Je.SEMI)this.consumed+=1;else if(this.decodeMode===mt.Strict)return 0;return this.emitCodePoint((0,Qe.replaceCodePoint)(this.result),this.consumed),this.errors&&(_i!==Je.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},gi.prototype.stateNamedEntity=function(_i,bi){for(var Mi=this.decodeTree,yi=Mi[this.treeIndex],Ti=(yi&it.VALUE_LENGTH)>>14;bi<_i.length;bi++,this.excess++){var Ii=_i.charCodeAt(bi);if(this.treeIndex=ri(Mi,yi,this.treeIndex+Math.max(1,Ti),Ii),this.treeIndex<0)return this.result===0||this.decodeMode===mt.Attribute&&(Ti===0||gt(Ii))?0:this.emitNotTerminatedNamedEntity();if(yi=Mi[this.treeIndex],Ti=(yi&it.VALUE_LENGTH)>>14,Ti!==0){if(Ii===Je.SEMI)return this.emitNamedEntityData(this.treeIndex,Ti,this.consumed+this.excess);this.decodeMode!==mt.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},gi.prototype.emitNotTerminatedNamedEntity=function(){var _i,bi=this,Mi=bi.result,yi=bi.decodeTree,Ti=(yi[Mi]&it.VALUE_LENGTH)>>14;return this.emitNamedEntityData(Mi,Ti,this.consumed),(_i=this.errors)===null||_i===void 0||_i.missingSemicolonAfterCharacterReference(),this.consumed},gi.prototype.emitNamedEntityData=function(_i,bi,Mi){var yi=this.decodeTree;return this.emitCodePoint(bi===1?yi[_i]&~it.VALUE_LENGTH:yi[_i+1],Mi),bi===3&&this.emitCodePoint(yi[_i+2],Mi),Mi},gi.prototype.end=function(){var _i;switch(this.state){case ut.NamedEntity:return this.result!==0&&(this.decodeMode!==mt.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ut.NumericDecimal:return this.emitNumericEntity(0,2);case ut.NumericHex:return this.emitNumericEntity(0,3);case ut.NumericStart:return(_i=this.errors)===null||_i===void 0||_i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ut.EntityStart:return 0}},gi}();ie.EntityDecoder=ei;function ni(gi){var _i="",bi=new ei(gi,function(Mi){return _i+=(0,Qe.fromCodePoint)(Mi)});return function(yi,Ti){for(var Ii=0,Ri=0;(Ri=yi.indexOf("&",Ri))>=0;){_i+=yi.slice(Ii,Ri),bi.startEntity(Ti);var Pi=bi.write(yi,Ri+1);if(Pi<0){Ii=Ri+bi.end();break}Ii=Ri+Pi,Ri=Pi===0?Ii+1:Ii}var xi=_i+yi.slice(Ii);return _i="",xi}}function ri(gi,_i,bi,Mi){var yi=(_i&it.BRANCH_LENGTH)>>7,Ti=_i&it.JUMP_TABLE;if(yi===0)return Ti!==0&&Mi===Ti?bi:-1;if(Ti){var Ii=Mi-Ti;return Ii<0||Ii>=yi?-1:gi[bi+Ii]-1}for(var Ri=bi,Pi=Ri+yi-1;Ri<=Pi;){var xi=Ri+Pi>>>1,ki=gi[xi];if(ki<Mi)Ri=xi+1;else if(ki>Mi)Pi=xi-1;else return gi[xi+yi]}return-1}ie.determineBranch=ri;var si=ni(ve.default),li=ni(be.default);function ai(gi,_i){return _i===void 0&&(_i=mt.Legacy),si(gi,_i)}ie.decodeHTML=ai;function ci(gi){return si(gi,mt.Attribute)}ie.decodeHTMLAttribute=ci;function Ci(gi){return si(gi,mt.Strict)}ie.decodeHTMLStrict=Ci;function pi(gi){return li(gi,mt.Strict)}ie.decodeXML=pi}(decode),function(ie){Object.defineProperty(ie,"__esModule",{value:!0}),ie.QuoteType=void 0;var Z=decode,ee;(function(st){st[st.Tab=9]="Tab",st[st.NewLine=10]="NewLine",st[st.FormFeed=12]="FormFeed",st[st.CarriageReturn=13]="CarriageReturn",st[st.Space=32]="Space",st[st.ExclamationMark=33]="ExclamationMark",st[st.Number=35]="Number",st[st.Amp=38]="Amp",st[st.SingleQuote=39]="SingleQuote",st[st.DoubleQuote=34]="DoubleQuote",st[st.Dash=45]="Dash",st[st.Slash=47]="Slash",st[st.Zero=48]="Zero",st[st.Nine=57]="Nine",st[st.Semi=59]="Semi",st[st.Lt=60]="Lt",st[st.Eq=61]="Eq",st[st.Gt=62]="Gt",st[st.Questionmark=63]="Questionmark",st[st.UpperA=65]="UpperA",st[st.LowerA=97]="LowerA",st[st.UpperF=70]="UpperF",st[st.LowerF=102]="LowerF",st[st.UpperZ=90]="UpperZ",st[st.LowerZ=122]="LowerZ",st[st.LowerX=120]="LowerX",st[st.OpeningSquareBracket=91]="OpeningSquareBracket"})(ee||(ee={}));var ae;(function(st){st[st.Text=1]="Text",st[st.BeforeTagName=2]="BeforeTagName",st[st.InTagName=3]="InTagName",st[st.InSelfClosingTag=4]="InSelfClosingTag",st[st.BeforeClosingTagName=5]="BeforeClosingTagName",st[st.InClosingTagName=6]="InClosingTagName",st[st.AfterClosingTagName=7]="AfterClosingTagName",st[st.BeforeAttributeName=8]="BeforeAttributeName",st[st.InAttributeName=9]="InAttributeName",st[st.AfterAttributeName=10]="AfterAttributeName",st[st.BeforeAttributeValue=11]="BeforeAttributeValue",st[st.InAttributeValueDq=12]="InAttributeValueDq",st[st.InAttributeValueSq=13]="InAttributeValueSq",st[st.InAttributeValueNq=14]="InAttributeValueNq",st[st.BeforeDeclaration=15]="BeforeDeclaration",st[st.InDeclaration=16]="InDeclaration",st[st.InProcessingInstruction=17]="InProcessingInstruction",st[st.BeforeComment=18]="BeforeComment",st[st.CDATASequence=19]="CDATASequence",st[st.InSpecialComment=20]="InSpecialComment",st[st.InCommentLike=21]="InCommentLike",st[st.BeforeSpecialS=22]="BeforeSpecialS",st[st.SpecialStartSequence=23]="SpecialStartSequence",st[st.InSpecialTag=24]="InSpecialTag",st[st.BeforeEntity=25]="BeforeEntity",st[st.BeforeNumericEntity=26]="BeforeNumericEntity",st[st.InNamedEntity=27]="InNamedEntity",st[st.InNumericEntity=28]="InNumericEntity",st[st.InHexEntity=29]="InHexEntity"})(ae||(ae={}));function ye(st){return st===ee.Space||st===ee.NewLine||st===ee.Tab||st===ee.FormFeed||st===ee.CarriageReturn}function ve(st){return st===ee.Slash||st===ee.Gt||ye(st)}function be(st){return st>=ee.Zero&&st<=ee.Nine}function Qe(st){return st>=ee.LowerA&&st<=ee.LowerZ||st>=ee.UpperA&&st<=ee.UpperZ}function Xe(st){return st>=ee.UpperA&&st<=ee.UpperF||st>=ee.LowerA&&st<=ee.LowerF}var Je;(function(st){st[st.NoValue=0]="NoValue",st[st.Unquoted=1]="Unquoted",st[st.Single=2]="Single",st[st.Double=3]="Double"})(Je=ie.QuoteType||(ie.QuoteType={}));var tt={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},it=function(){function st(lt,ct){var gt=lt.xmlMode,ut=gt===void 0?!1:gt,mt=lt.decodeEntities,ei=mt===void 0?!0:mt;this.cbs=ct,this.state=ae.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=ae.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=ut,this.decodeEntities=ei,this.entityTrie=ut?Z.xmlDecodeTree:Z.htmlDecodeTree}return st.prototype.reset=function(){this.state=ae.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=ae.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},st.prototype.write=function(lt){this.offset+=this.buffer.length,this.buffer=lt,this.parse()},st.prototype.end=function(){this.running&&this.finish()},st.prototype.pause=function(){this.running=!1},st.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},st.prototype.getIndex=function(){return this.index},st.prototype.getSectionStart=function(){return this.sectionStart},st.prototype.stateText=function(lt){lt===ee.Lt||!this.decodeEntities&&this.fastForwardTo(ee.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=ae.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&lt===ee.Amp&&(this.state=ae.BeforeEntity)},st.prototype.stateSpecialStartSequence=function(lt){var ct=this.sequenceIndex===this.currentSequence.length,gt=ct?ve(lt):(lt|32)===this.currentSequence[this.sequenceIndex];if(!gt)this.isSpecial=!1;else if(!ct){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=ae.InTagName,this.stateInTagName(lt)},st.prototype.stateInSpecialTag=function(lt){if(this.sequenceIndex===this.currentSequence.length){if(lt===ee.Gt||ye(lt)){var ct=this.index-this.currentSequence.length;if(this.sectionStart<ct){var gt=this.index;this.index=ct,this.cbs.ontext(this.sectionStart,ct),this.index=gt}this.isSpecial=!1,this.sectionStart=ct+2,this.stateInClosingTagName(lt);return}this.sequenceIndex=0}(lt|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===tt.TitleEnd?this.decodeEntities&&lt===ee.Amp&&(this.state=ae.BeforeEntity):this.fastForwardTo(ee.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(lt===ee.Lt)},st.prototype.stateCDATASequence=function(lt){lt===tt.Cdata[this.sequenceIndex]?++this.sequenceIndex===tt.Cdata.length&&(this.state=ae.InCommentLike,this.currentSequence=tt.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=ae.InDeclaration,this.stateInDeclaration(lt))},st.prototype.fastForwardTo=function(lt){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===lt)return!0;return this.index=this.buffer.length+this.offset-1,!1},st.prototype.stateInCommentLike=function(lt){lt===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===tt.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=ae.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):lt!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},st.prototype.isTagStartChar=function(lt){return this.xmlMode?!ve(lt):Qe(lt)},st.prototype.startSpecial=function(lt,ct){this.isSpecial=!0,this.currentSequence=lt,this.sequenceIndex=ct,this.state=ae.SpecialStartSequence},st.prototype.stateBeforeTagName=function(lt){if(lt===ee.ExclamationMark)this.state=ae.BeforeDeclaration,this.sectionStart=this.index+1;else if(lt===ee.Questionmark)this.state=ae.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(lt)){var ct=lt|32;this.sectionStart=this.index,!this.xmlMode&&ct===tt.TitleEnd[2]?this.startSpecial(tt.TitleEnd,3):this.state=!this.xmlMode&&ct===tt.ScriptEnd[2]?ae.BeforeSpecialS:ae.InTagName}else lt===ee.Slash?this.state=ae.BeforeClosingTagName:(this.state=ae.Text,this.stateText(lt))},st.prototype.stateInTagName=function(lt){ve(lt)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=ae.BeforeAttributeName,this.stateBeforeAttributeName(lt))},st.prototype.stateBeforeClosingTagName=function(lt){ye(lt)||(lt===ee.Gt?this.state=ae.Text:(this.state=this.isTagStartChar(lt)?ae.InClosingTagName:ae.InSpecialComment,this.sectionStart=this.index))},st.prototype.stateInClosingTagName=function(lt){(lt===ee.Gt||ye(lt))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=ae.AfterClosingTagName,this.stateAfterClosingTagName(lt))},st.prototype.stateAfterClosingTagName=function(lt){(lt===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.state=ae.Text,this.baseState=ae.Text,this.sectionStart=this.index+1)},st.prototype.stateBeforeAttributeName=function(lt){lt===ee.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=ae.InSpecialTag,this.sequenceIndex=0):this.state=ae.Text,this.baseState=this.state,this.sectionStart=this.index+1):lt===ee.Slash?this.state=ae.InSelfClosingTag:ye(lt)||(this.state=ae.InAttributeName,this.sectionStart=this.index)},st.prototype.stateInSelfClosingTag=function(lt){lt===ee.Gt?(this.cbs.onselfclosingtag(this.index),this.state=ae.Text,this.baseState=ae.Text,this.sectionStart=this.index+1,this.isSpecial=!1):ye(lt)||(this.state=ae.BeforeAttributeName,this.stateBeforeAttributeName(lt))},st.prototype.stateInAttributeName=function(lt){(lt===ee.Eq||ve(lt))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=ae.AfterAttributeName,this.stateAfterAttributeName(lt))},st.prototype.stateAfterAttributeName=function(lt){lt===ee.Eq?this.state=ae.BeforeAttributeValue:lt===ee.Slash||lt===ee.Gt?(this.cbs.onattribend(Je.NoValue,this.index),this.state=ae.BeforeAttributeName,this.stateBeforeAttributeName(lt)):ye(lt)||(this.cbs.onattribend(Je.NoValue,this.index),this.state=ae.InAttributeName,this.sectionStart=this.index)},st.prototype.stateBeforeAttributeValue=function(lt){lt===ee.DoubleQuote?(this.state=ae.InAttributeValueDq,this.sectionStart=this.index+1):lt===ee.SingleQuote?(this.state=ae.InAttributeValueSq,this.sectionStart=this.index+1):ye(lt)||(this.sectionStart=this.index,this.state=ae.InAttributeValueNq,this.stateInAttributeValueNoQuotes(lt))},st.prototype.handleInAttributeValue=function(lt,ct){lt===ct||!this.decodeEntities&&this.fastForwardTo(ct)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(ct===ee.DoubleQuote?Je.Double:Je.Single,this.index),this.state=ae.BeforeAttributeName):this.decodeEntities&&lt===ee.Amp&&(this.baseState=this.state,this.state=ae.BeforeEntity)},st.prototype.stateInAttributeValueDoubleQuotes=function(lt){this.handleInAttributeValue(lt,ee.DoubleQuote)},st.prototype.stateInAttributeValueSingleQuotes=function(lt){this.handleInAttributeValue(lt,ee.SingleQuote)},st.prototype.stateInAttributeValueNoQuotes=function(lt){ye(lt)||lt===ee.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Je.Unquoted,this.index),this.state=ae.BeforeAttributeName,this.stateBeforeAttributeName(lt)):this.decodeEntities&&lt===ee.Amp&&(this.baseState=this.state,this.state=ae.BeforeEntity)},st.prototype.stateBeforeDeclaration=function(lt){lt===ee.OpeningSquareBracket?(this.state=ae.CDATASequence,this.sequenceIndex=0):this.state=lt===ee.Dash?ae.BeforeComment:ae.InDeclaration},st.prototype.stateInDeclaration=function(lt){(lt===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=ae.Text,this.sectionStart=this.index+1)},st.prototype.stateInProcessingInstruction=function(lt){(lt===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=ae.Text,this.sectionStart=this.index+1)},st.prototype.stateBeforeComment=function(lt){lt===ee.Dash?(this.state=ae.InCommentLike,this.currentSequence=tt.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=ae.InDeclaration},st.prototype.stateInSpecialComment=function(lt){(lt===ee.Gt||this.fastForwardTo(ee.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=ae.Text,this.sectionStart=this.index+1)},st.prototype.stateBeforeSpecialS=function(lt){var ct=lt|32;ct===tt.ScriptEnd[3]?this.startSpecial(tt.ScriptEnd,4):ct===tt.StyleEnd[3]?this.startSpecial(tt.StyleEnd,4):(this.state=ae.InTagName,this.stateInTagName(lt))},st.prototype.stateBeforeEntity=function(lt){this.entityExcess=1,this.entityResult=0,lt===ee.Number?this.state=ae.BeforeNumericEntity:lt===ee.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=ae.InNamedEntity,this.stateInNamedEntity(lt))},st.prototype.stateInNamedEntity=function(lt){if(this.entityExcess+=1,this.trieIndex=(0,Z.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,lt),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var ct=this.trieCurrent&Z.BinTrieFlags.VALUE_LENGTH;if(ct){var gt=(ct>>14)-1;if(!this.allowLegacyEntity()&&lt!==ee.Semi)this.trieIndex+=gt;else{var ut=this.index-this.entityExcess+1;ut>this.sectionStart&&this.emitPartial(this.sectionStart,ut),this.entityResult=this.trieIndex,this.trieIndex+=gt,this.entityExcess=0,this.sectionStart=this.index+1,gt===0&&this.emitNamedEntity()}}},st.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var lt=(this.entityTrie[this.entityResult]&Z.BinTrieFlags.VALUE_LENGTH)>>14;switch(lt){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~Z.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},st.prototype.stateBeforeNumericEntity=function(lt){(lt|32)===ee.LowerX?(this.entityExcess++,this.state=ae.InHexEntity):(this.state=ae.InNumericEntity,this.stateInNumericEntity(lt))},st.prototype.emitNumericEntity=function(lt){var ct=this.index-this.entityExcess-1,gt=ct+2+ +(this.state===ae.InHexEntity);gt!==this.index&&(ct>this.sectionStart&&this.emitPartial(this.sectionStart,ct),this.sectionStart=this.index+Number(lt),this.emitCodePoint((0,Z.replaceCodePoint)(this.entityResult))),this.state=this.baseState},st.prototype.stateInNumericEntity=function(lt){lt===ee.Semi?this.emitNumericEntity(!0):be(lt)?(this.entityResult=this.entityResult*10+(lt-ee.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},st.prototype.stateInHexEntity=function(lt){lt===ee.Semi?this.emitNumericEntity(!0):be(lt)?(this.entityResult=this.entityResult*16+(lt-ee.Zero),this.entityExcess++):Xe(lt)?(this.entityResult=this.entityResult*16+((lt|32)-ee.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},st.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===ae.Text||this.baseState===ae.InSpecialTag)},st.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===ae.Text||this.state===ae.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===ae.InAttributeValueDq||this.state===ae.InAttributeValueSq||this.state===ae.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},st.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},st.prototype.parse=function(){for(;this.shouldContinue();){var lt=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case ae.Text:{this.stateText(lt);break}case ae.SpecialStartSequence:{this.stateSpecialStartSequence(lt);break}case ae.InSpecialTag:{this.stateInSpecialTag(lt);break}case ae.CDATASequence:{this.stateCDATASequence(lt);break}case ae.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(lt);break}case ae.InAttributeName:{this.stateInAttributeName(lt);break}case ae.InCommentLike:{this.stateInCommentLike(lt);break}case ae.InSpecialComment:{this.stateInSpecialComment(lt);break}case ae.BeforeAttributeName:{this.stateBeforeAttributeName(lt);break}case ae.InTagName:{this.stateInTagName(lt);break}case ae.InClosingTagName:{this.stateInClosingTagName(lt);break}case ae.BeforeTagName:{this.stateBeforeTagName(lt);break}case ae.AfterAttributeName:{this.stateAfterAttributeName(lt);break}case ae.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(lt);break}case ae.BeforeAttributeValue:{this.stateBeforeAttributeValue(lt);break}case ae.BeforeClosingTagName:{this.stateBeforeClosingTagName(lt);break}case ae.AfterClosingTagName:{this.stateAfterClosingTagName(lt);break}case ae.BeforeSpecialS:{this.stateBeforeSpecialS(lt);break}case ae.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(lt);break}case ae.InSelfClosingTag:{this.stateInSelfClosingTag(lt);break}case ae.InDeclaration:{this.stateInDeclaration(lt);break}case ae.BeforeDeclaration:{this.stateBeforeDeclaration(lt);break}case ae.BeforeComment:{this.stateBeforeComment(lt);break}case ae.InProcessingInstruction:{this.stateInProcessingInstruction(lt);break}case ae.InNamedEntity:{this.stateInNamedEntity(lt);break}case ae.BeforeEntity:{this.stateBeforeEntity(lt);break}case ae.InHexEntity:{this.stateInHexEntity(lt);break}case ae.InNumericEntity:{this.stateInNumericEntity(lt);break}default:this.stateBeforeNumericEntity(lt)}this.index++}this.cleanup()},st.prototype.finish=function(){this.state===ae.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},st.prototype.handleTrailingData=function(){var lt=this.buffer.length+this.offset;this.state===ae.InCommentLike?this.currentSequence===tt.CdataEnd?this.cbs.oncdata(this.sectionStart,lt,0):this.cbs.oncomment(this.sectionStart,lt,0):this.state===ae.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===ae.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===ae.InTagName||this.state===ae.BeforeAttributeName||this.state===ae.BeforeAttributeValue||this.state===ae.AfterAttributeName||this.state===ae.InAttributeName||this.state===ae.InAttributeValueSq||this.state===ae.InAttributeValueDq||this.state===ae.InAttributeValueNq||this.state===ae.InClosingTagName||this.cbs.ontext(this.sectionStart,lt)},st.prototype.emitPartial=function(lt,ct){this.baseState!==ae.Text&&this.baseState!==ae.InSpecialTag?this.cbs.onattribdata(lt,ct):this.cbs.ontext(lt,ct)},st.prototype.emitCodePoint=function(lt){this.baseState!==ae.Text&&this.baseState!==ae.InSpecialTag?this.cbs.onattribentity(lt):this.cbs.ontextentity(lt)},st}();ie.default=it}(Tokenizer);var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ie,Z,ee,ae){ae===void 0&&(ae=ee);var ye=Object.getOwnPropertyDescriptor(Z,ee);(!ye||("get"in ye?!Z.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return Z[ee]}}),Object.defineProperty(ie,ae,ye)}:function(ie,Z,ee,ae){ae===void 0&&(ae=ee),ie[ae]=Z[ee]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ie,Z){Object.defineProperty(ie,"default",{enumerable:!0,value:Z})}:function(ie,Z){ie.default=Z}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(ie){if(ie&&ie.__esModule)return ie;var Z={};if(ie!=null)for(var ee in ie)ee!=="default"&&Object.prototype.hasOwnProperty.call(ie,ee)&&__createBinding$1(Z,ie,ee);return __setModuleDefault$1(Z,ie),Z};Object.defineProperty(Parser$3,"__esModule",{value:!0}),Parser$3.Parser=void 0;var Tokenizer_js_1=__importStar$1(Tokenizer),decode_js_1=decode,formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pTag=new Set(["p"]),tableSectionTags=new Set(["thead","tbody"]),ddtTags=new Set(["dd","dt"]),rtpTags=new Set(["rt","rp"]),openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]),voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),foreignContextElements=new Set(["math","svg"]),htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),reNameEnd=/\s|\//,Parser$2=function(){function ie(Z,ee){ee===void 0&&(ee={});var ae,ye,ve,be,Qe;this.options=ee,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=Z??{},this.lowerCaseTagNames=(ae=ee.lowerCaseTags)!==null&&ae!==void 0?ae:!ee.xmlMode,this.lowerCaseAttributeNames=(ye=ee.lowerCaseAttributeNames)!==null&&ye!==void 0?ye:!ee.xmlMode,this.tokenizer=new((ve=ee.Tokenizer)!==null&&ve!==void 0?ve:Tokenizer_js_1.default)(this.options,this),(Qe=(be=this.cbs).onparserinit)===null||Qe===void 0||Qe.call(be,this)}return ie.prototype.ontext=function(Z,ee){var ae,ye,ve=this.getSlice(Z,ee);this.endIndex=ee-1,(ye=(ae=this.cbs).ontext)===null||ye===void 0||ye.call(ae,ve),this.startIndex=ee},ie.prototype.ontextentity=function(Z){var ee,ae,ye=this.tokenizer.getSectionStart();this.endIndex=ye-1,(ae=(ee=this.cbs).ontext)===null||ae===void 0||ae.call(ee,(0,decode_js_1.fromCodePoint)(Z)),this.startIndex=ye},ie.prototype.isVoidElement=function(Z){return!this.options.xmlMode&&voidElements.has(Z)},ie.prototype.onopentagname=function(Z,ee){this.endIndex=ee;var ae=this.getSlice(Z,ee);this.lowerCaseTagNames&&(ae=ae.toLowerCase()),this.emitOpenTag(ae)},ie.prototype.emitOpenTag=function(Z){var ee,ae,ye,ve;this.openTagStart=this.startIndex,this.tagname=Z;var be=!this.options.xmlMode&&openImpliesClose.get(Z);if(be)for(;this.stack.length>0&&be.has(this.stack[this.stack.length-1]);){var Qe=this.stack.pop();(ae=(ee=this.cbs).onclosetag)===null||ae===void 0||ae.call(ee,Qe,!0)}this.isVoidElement(Z)||(this.stack.push(Z),foreignContextElements.has(Z)?this.foreignContext.push(!0):htmlIntegrationElements.has(Z)&&this.foreignContext.push(!1)),(ve=(ye=this.cbs).onopentagname)===null||ve===void 0||ve.call(ye,Z),this.cbs.onopentag&&(this.attribs={})},ie.prototype.endOpenTag=function(Z){var ee,ae;this.startIndex=this.openTagStart,this.attribs&&((ae=(ee=this.cbs).onopentag)===null||ae===void 0||ae.call(ee,this.tagname,this.attribs,Z),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},ie.prototype.onopentagend=function(Z){this.endIndex=Z,this.endOpenTag(!1),this.startIndex=Z+1},ie.prototype.onclosetag=function(Z,ee){var ae,ye,ve,be,Qe,Xe;this.endIndex=ee;var Je=this.getSlice(Z,ee);if(this.lowerCaseTagNames&&(Je=Je.toLowerCase()),(foreignContextElements.has(Je)||htmlIntegrationElements.has(Je))&&this.foreignContext.pop(),this.isVoidElement(Je))!this.options.xmlMode&&Je==="br"&&((ye=(ae=this.cbs).onopentagname)===null||ye===void 0||ye.call(ae,"br"),(be=(ve=this.cbs).onopentag)===null||be===void 0||be.call(ve,"br",{},!0),(Xe=(Qe=this.cbs).onclosetag)===null||Xe===void 0||Xe.call(Qe,"br",!1));else{var tt=this.stack.lastIndexOf(Je);if(tt!==-1)if(this.cbs.onclosetag)for(var it=this.stack.length-tt;it--;)this.cbs.onclosetag(this.stack.pop(),it!==0);else this.stack.length=tt;else!this.options.xmlMode&&Je==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=ee+1},ie.prototype.onselfclosingtag=function(Z){this.endIndex=Z,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=Z+1):this.onopentagend(Z)},ie.prototype.closeCurrentTag=function(Z){var ee,ae,ye=this.tagname;this.endOpenTag(Z),this.stack[this.stack.length-1]===ye&&((ae=(ee=this.cbs).onclosetag)===null||ae===void 0||ae.call(ee,ye,!Z),this.stack.pop())},ie.prototype.onattribname=function(Z,ee){this.startIndex=Z;var ae=this.getSlice(Z,ee);this.attribname=this.lowerCaseAttributeNames?ae.toLowerCase():ae},ie.prototype.onattribdata=function(Z,ee){this.attribvalue+=this.getSlice(Z,ee)},ie.prototype.onattribentity=function(Z){this.attribvalue+=(0,decode_js_1.fromCodePoint)(Z)},ie.prototype.onattribend=function(Z,ee){var ae,ye;this.endIndex=ee,(ye=(ae=this.cbs).onattribute)===null||ye===void 0||ye.call(ae,this.attribname,this.attribvalue,Z===Tokenizer_js_1.QuoteType.Double?'"':Z===Tokenizer_js_1.QuoteType.Single?"'":Z===Tokenizer_js_1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},ie.prototype.getInstructionName=function(Z){var ee=Z.search(reNameEnd),ae=ee<0?Z:Z.substr(0,ee);return this.lowerCaseTagNames&&(ae=ae.toLowerCase()),ae},ie.prototype.ondeclaration=function(Z,ee){this.endIndex=ee;var ae=this.getSlice(Z,ee);if(this.cbs.onprocessinginstruction){var ye=this.getInstructionName(ae);this.cbs.onprocessinginstruction("!".concat(ye),"!".concat(ae))}this.startIndex=ee+1},ie.prototype.onprocessinginstruction=function(Z,ee){this.endIndex=ee;var ae=this.getSlice(Z,ee);if(this.cbs.onprocessinginstruction){var ye=this.getInstructionName(ae);this.cbs.onprocessinginstruction("?".concat(ye),"?".concat(ae))}this.startIndex=ee+1},ie.prototype.oncomment=function(Z,ee,ae){var ye,ve,be,Qe;this.endIndex=ee,(ve=(ye=this.cbs).oncomment)===null||ve===void 0||ve.call(ye,this.getSlice(Z,ee-ae)),(Qe=(be=this.cbs).oncommentend)===null||Qe===void 0||Qe.call(be),this.startIndex=ee+1},ie.prototype.oncdata=function(Z,ee,ae){var ye,ve,be,Qe,Xe,Je,tt,it,st,lt;this.endIndex=ee;var ct=this.getSlice(Z,ee-ae);this.options.xmlMode||this.options.recognizeCDATA?((ve=(ye=this.cbs).oncdatastart)===null||ve===void 0||ve.call(ye),(Qe=(be=this.cbs).ontext)===null||Qe===void 0||Qe.call(be,ct),(Je=(Xe=this.cbs).oncdataend)===null||Je===void 0||Je.call(Xe)):((it=(tt=this.cbs).oncomment)===null||it===void 0||it.call(tt,"[CDATA[".concat(ct,"]]")),(lt=(st=this.cbs).oncommentend)===null||lt===void 0||lt.call(st)),this.startIndex=ee+1},ie.prototype.onend=function(){var Z,ee;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var ae=this.stack.length;ae>0;this.cbs.onclosetag(this.stack[--ae],!0));}(ee=(Z=this.cbs).onend)===null||ee===void 0||ee.call(Z)},ie.prototype.reset=function(){var Z,ee,ae,ye;(ee=(Z=this.cbs).onreset)===null||ee===void 0||ee.call(Z),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(ye=(ae=this.cbs).onparserinit)===null||ye===void 0||ye.call(ae,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},ie.prototype.parseComplete=function(Z){this.reset(),this.end(Z)},ie.prototype.getSlice=function(Z,ee){for(;Z-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var ae=this.buffers[0].slice(Z-this.bufferOffset,ee-this.bufferOffset);ee-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),ae+=this.buffers[0].slice(0,ee-this.bufferOffset);return ae},ie.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},ie.prototype.write=function(Z){var ee,ae;if(this.ended){(ae=(ee=this.cbs).onerror)===null||ae===void 0||ae.call(ee,new Error(".write() after done!"));return}this.buffers.push(Z),this.tokenizer.running&&(this.tokenizer.write(Z),this.writeIndex++)},ie.prototype.end=function(Z){var ee,ae;if(this.ended){(ae=(ee=this.cbs).onerror)===null||ae===void 0||ae.call(ee,new Error(".end() after done!"));return}Z&&this.write(Z),this.ended=!0,this.tokenizer.end()},ie.prototype.pause=function(){this.tokenizer.pause()},ie.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},ie.prototype.parseChunk=function(Z){this.write(Z)},ie.prototype.done=function(Z){this.end(Z)},ie}();Parser$3.Parser=Parser$2;var lib$4={},lib$3={};(function(ie){Object.defineProperty(ie,"__esModule",{value:!0}),ie.Doctype=ie.CDATA=ie.Tag=ie.Style=ie.Script=ie.Comment=ie.Directive=ie.Text=ie.Root=ie.isTag=ie.ElementType=void 0;var Z;(function(ae){ae.Root="root",ae.Text="text",ae.Directive="directive",ae.Comment="comment",ae.Script="script",ae.Style="style",ae.Tag="tag",ae.CDATA="cdata",ae.Doctype="doctype"})(Z=ie.ElementType||(ie.ElementType={}));function ee(ae){return ae.type===Z.Tag||ae.type===Z.Script||ae.type===Z.Style}ie.isTag=ee,ie.Root=Z.Root,ie.Text=Z.Text,ie.Directive=Z.Directive,ie.Comment=Z.Comment,ie.Script=Z.Script,ie.Style=Z.Style,ie.Tag=Z.Tag,ie.CDATA=Z.CDATA,ie.Doctype=Z.Doctype})(lib$3);var node$1={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var ie=function(Z,ee){return ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,ye){ae.__proto__=ye}||function(ae,ye){for(var ve in ye)Object.prototype.hasOwnProperty.call(ye,ve)&&(ae[ve]=ye[ve])},ie(Z,ee)};return function(Z,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");ie(Z,ee);function ae(){this.constructor=Z}Z.prototype=ee===null?Object.create(ee):(ae.prototype=ee.prototype,new ae)}}(),__assign$2=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$2=Object.assign||function(ie){for(var Z,ee=1,ae=arguments.length;ee<ae;ee++){Z=arguments[ee];for(var ye in Z)Object.prototype.hasOwnProperty.call(Z,ye)&&(ie[ye]=Z[ye])}return ie},__assign$2.apply(this,arguments)};Object.defineProperty(node$1,"__esModule",{value:!0}),node$1.cloneNode=node$1.hasChildren=node$1.isDocument=node$1.isDirective=node$1.isComment=node$1.isText=node$1.isCDATA=node$1.isTag=node$1.Element=node$1.Document=node$1.CDATA=node$1.NodeWithChildren=node$1.ProcessingInstruction=node$1.Comment=node$1.Text=node$1.DataNode=node$1.Node=void 0;var domelementtype_1$1=lib$3,Node$6=function(){function ie(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(ie.prototype,"parentNode",{get:function(){return this.parent},set:function(Z){this.parent=Z},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"previousSibling",{get:function(){return this.prev},set:function(Z){this.prev=Z},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"nextSibling",{get:function(){return this.next},set:function(Z){this.next=Z},enumerable:!1,configurable:!0}),ie.prototype.cloneNode=function(Z){return Z===void 0&&(Z=!1),cloneNode$1(this,Z)},ie}();node$1.Node=Node$6;var DataNode=function(ie){__extends(Z,ie);function Z(ee){var ae=ie.call(this)||this;return ae.data=ee,ae}return Object.defineProperty(Z.prototype,"nodeValue",{get:function(){return this.data},set:function(ee){this.data=ee},enumerable:!1,configurable:!0}),Z}(Node$6);node$1.DataNode=DataNode;var Text=function(ie){__extends(Z,ie);function Z(){var ee=ie!==null&&ie.apply(this,arguments)||this;return ee.type=domelementtype_1$1.ElementType.Text,ee}return Object.defineProperty(Z.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),Z}(DataNode);node$1.Text=Text;var Comment$5=function(ie){__extends(Z,ie);function Z(){var ee=ie!==null&&ie.apply(this,arguments)||this;return ee.type=domelementtype_1$1.ElementType.Comment,ee}return Object.defineProperty(Z.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),Z}(DataNode);node$1.Comment=Comment$5;var ProcessingInstruction=function(ie){__extends(Z,ie);function Z(ee,ae){var ye=ie.call(this,ae)||this;return ye.name=ee,ye.type=domelementtype_1$1.ElementType.Directive,ye}return Object.defineProperty(Z.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Z}(DataNode);node$1.ProcessingInstruction=ProcessingInstruction;var NodeWithChildren=function(ie){__extends(Z,ie);function Z(ee){var ae=ie.call(this)||this;return ae.children=ee,ae}return Object.defineProperty(Z.prototype,"firstChild",{get:function(){var ee;return(ee=this.children[0])!==null&&ee!==void 0?ee:null},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"childNodes",{get:function(){return this.children},set:function(ee){this.children=ee},enumerable:!1,configurable:!0}),Z}(Node$6);node$1.NodeWithChildren=NodeWithChildren;var CDATA=function(ie){__extends(Z,ie);function Z(){var ee=ie!==null&&ie.apply(this,arguments)||this;return ee.type=domelementtype_1$1.ElementType.CDATA,ee}return Object.defineProperty(Z.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),Z}(NodeWithChildren);node$1.CDATA=CDATA;var Document$4=function(ie){__extends(Z,ie);function Z(){var ee=ie!==null&&ie.apply(this,arguments)||this;return ee.type=domelementtype_1$1.ElementType.Root,ee}return Object.defineProperty(Z.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),Z}(NodeWithChildren);node$1.Document=Document$4;var Element$1=function(ie){__extends(Z,ie);function Z(ee,ae,ye,ve){ye===void 0&&(ye=[]),ve===void 0&&(ve=ee==="script"?domelementtype_1$1.ElementType.Script:ee==="style"?domelementtype_1$1.ElementType.Style:domelementtype_1$1.ElementType.Tag);var be=ie.call(this,ye)||this;return be.name=ee,be.attribs=ae,be.type=ve,be}return Object.defineProperty(Z.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"tagName",{get:function(){return this.name},set:function(ee){this.name=ee},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"attributes",{get:function(){var ee=this;return Object.keys(this.attribs).map(function(ae){var ye,ve;return{name:ae,value:ee.attribs[ae],namespace:(ye=ee["x-attribsNamespace"])===null||ye===void 0?void 0:ye[ae],prefix:(ve=ee["x-attribsPrefix"])===null||ve===void 0?void 0:ve[ae]}})},enumerable:!1,configurable:!0}),Z}(NodeWithChildren);node$1.Element=Element$1;function isTag(ie){return(0,domelementtype_1$1.isTag)(ie)}node$1.isTag=isTag;function isCDATA(ie){return ie.type===domelementtype_1$1.ElementType.CDATA}node$1.isCDATA=isCDATA;function isText(ie){return ie.type===domelementtype_1$1.ElementType.Text}node$1.isText=isText;function isComment(ie){return ie.type===domelementtype_1$1.ElementType.Comment}node$1.isComment=isComment;function isDirective(ie){return ie.type===domelementtype_1$1.ElementType.Directive}node$1.isDirective=isDirective;function isDocument(ie){return ie.type===domelementtype_1$1.ElementType.Root}node$1.isDocument=isDocument;function hasChildren(ie){return Object.prototype.hasOwnProperty.call(ie,"children")}node$1.hasChildren=hasChildren;function cloneNode$1(ie,Z){Z===void 0&&(Z=!1);var ee;if(isText(ie))ee=new Text(ie.data);else if(isComment(ie))ee=new Comment$5(ie.data);else if(isTag(ie)){var ae=Z?cloneChildren(ie.children):[],ye=new Element$1(ie.name,__assign$2({},ie.attribs),ae);ae.forEach(function(Xe){return Xe.parent=ye}),ie.namespace!=null&&(ye.namespace=ie.namespace),ie["x-attribsNamespace"]&&(ye["x-attribsNamespace"]=__assign$2({},ie["x-attribsNamespace"])),ie["x-attribsPrefix"]&&(ye["x-attribsPrefix"]=__assign$2({},ie["x-attribsPrefix"])),ee=ye}else if(isCDATA(ie)){var ae=Z?cloneChildren(ie.children):[],ve=new CDATA(ae);ae.forEach(function(Je){return Je.parent=ve}),ee=ve}else if(isDocument(ie)){var ae=Z?cloneChildren(ie.children):[],be=new Document$4(ae);ae.forEach(function(Je){return Je.parent=be}),ie["x-mode"]&&(be["x-mode"]=ie["x-mode"]),ee=be}else if(isDirective(ie)){var Qe=new ProcessingInstruction(ie.name,ie.data);ie["x-name"]!=null&&(Qe["x-name"]=ie["x-name"],Qe["x-publicId"]=ie["x-publicId"],Qe["x-systemId"]=ie["x-systemId"]),ee=Qe}else throw new Error("Not implemented yet: ".concat(ie.type));return ee.startIndex=ie.startIndex,ee.endIndex=ie.endIndex,ie.sourceCodeLocation!=null&&(ee.sourceCodeLocation=ie.sourceCodeLocation),ee}node$1.cloneNode=cloneNode$1;function cloneChildren(ie){for(var Z=ie.map(function(ae){return cloneNode$1(ae,!0)}),ee=1;ee<Z.length;ee++)Z[ee].prev=Z[ee-1],Z[ee-1].next=Z[ee];return Z}(function(ie){var Z=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Qe,Xe,Je,tt){tt===void 0&&(tt=Je);var it=Object.getOwnPropertyDescriptor(Xe,Je);(!it||("get"in it?!Xe.__esModule:it.writable||it.configurable))&&(it={enumerable:!0,get:function(){return Xe[Je]}}),Object.defineProperty(Qe,tt,it)}:function(Qe,Xe,Je,tt){tt===void 0&&(tt=Je),Qe[tt]=Xe[Je]}),ee=commonjsGlobal&&commonjsGlobal.__exportStar||function(Qe,Xe){for(var Je in Qe)Je!=="default"&&!Object.prototype.hasOwnProperty.call(Xe,Je)&&Z(Xe,Qe,Je)};Object.defineProperty(ie,"__esModule",{value:!0}),ie.DomHandler=void 0;var ae=lib$3,ye=node$1;ee(node$1,ie);var ve={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},be=function(){function Qe(Xe,Je,tt){this.dom=[],this.root=new ye.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof Je=="function"&&(tt=Je,Je=ve),typeof Xe=="object"&&(Je=Xe,Xe=void 0),this.callback=Xe??null,this.options=Je??ve,this.elementCB=tt??null}return Qe.prototype.onparserinit=function(Xe){this.parser=Xe},Qe.prototype.onreset=function(){this.dom=[],this.root=new ye.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},Qe.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},Qe.prototype.onerror=function(Xe){this.handleCallback(Xe)},Qe.prototype.onclosetag=function(){this.lastNode=null;var Xe=this.tagStack.pop();this.options.withEndIndices&&(Xe.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(Xe)},Qe.prototype.onopentag=function(Xe,Je){var tt=this.options.xmlMode?ae.ElementType.Tag:void 0,it=new ye.Element(Xe,Je,void 0,tt);this.addNode(it),this.tagStack.push(it)},Qe.prototype.ontext=function(Xe){var Je=this.lastNode;if(Je&&Je.type===ae.ElementType.Text)Je.data+=Xe,this.options.withEndIndices&&(Je.endIndex=this.parser.endIndex);else{var tt=new ye.Text(Xe);this.addNode(tt),this.lastNode=tt}},Qe.prototype.oncomment=function(Xe){if(this.lastNode&&this.lastNode.type===ae.ElementType.Comment){this.lastNode.data+=Xe;return}var Je=new ye.Comment(Xe);this.addNode(Je),this.lastNode=Je},Qe.prototype.oncommentend=function(){this.lastNode=null},Qe.prototype.oncdatastart=function(){var Xe=new ye.Text(""),Je=new ye.CDATA([Xe]);this.addNode(Je),Xe.parent=Je,this.lastNode=Xe},Qe.prototype.oncdataend=function(){this.lastNode=null},Qe.prototype.onprocessinginstruction=function(Xe,Je){var tt=new ye.ProcessingInstruction(Xe,Je);this.addNode(tt)},Qe.prototype.handleCallback=function(Xe){if(typeof this.callback=="function")this.callback(Xe,this.dom);else if(Xe)throw Xe},Qe.prototype.addNode=function(Xe){var Je=this.tagStack[this.tagStack.length-1],tt=Je.children[Je.children.length-1];this.options.withStartIndices&&(Xe.startIndex=this.parser.startIndex),this.options.withEndIndices&&(Xe.endIndex=this.parser.endIndex),Je.children.push(Xe),tt&&(Xe.prev=tt,tt.next=Xe),Xe.parent=Je,this.lastNode=null},Qe}();ie.DomHandler=be,ie.default=be})(lib$4);var lib$2={},stringify$5={},lib$1={},lib={},encode={},encodeHtml={};Object.defineProperty(encodeHtml,"__esModule",{value:!0});function restoreDiff(ie){for(var Z=1;Z<ie.length;Z++)ie[Z][0]+=ie[Z-1][0]+1;return ie}encodeHtml.default=new Map(restoreDiff([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(restoreDiff([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(restoreDiff([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(restoreDiff([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var _escape={};(function(ie){Object.defineProperty(ie,"__esModule",{value:!0}),ie.escapeText=ie.escapeAttribute=ie.escapeUTF8=ie.escape=ie.encodeXML=ie.getCodePoint=ie.xmlReplacer=void 0,ie.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var Z=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);ie.getCodePoint=String.prototype.codePointAt!=null?function(ye,ve){return ye.codePointAt(ve)}:function(ye,ve){return(ye.charCodeAt(ve)&64512)===55296?(ye.charCodeAt(ve)-55296)*1024+ye.charCodeAt(ve+1)-56320+65536:ye.charCodeAt(ve)};function ee(ye){for(var ve="",be=0,Qe;(Qe=ie.xmlReplacer.exec(ye))!==null;){var Xe=Qe.index,Je=ye.charCodeAt(Xe),tt=Z.get(Je);tt!==void 0?(ve+=ye.substring(be,Xe)+tt,be=Xe+1):(ve+="".concat(ye.substring(be,Xe),"&#x").concat((0,ie.getCodePoint)(ye,Xe).toString(16),";"),be=ie.xmlReplacer.lastIndex+=+((Je&64512)===55296))}return ve+ye.substr(be)}ie.encodeXML=ee,ie.escape=ee;function ae(ye,ve){return function(Qe){for(var Xe,Je=0,tt="";Xe=ye.exec(Qe);)Je!==Xe.index&&(tt+=Qe.substring(Je,Xe.index)),tt+=ve.get(Xe[0].charCodeAt(0)),Je=Xe.index+1;return tt+Qe.substring(Je)}}ie.escapeUTF8=ae(/[&<>'"]/g,Z),ie.escapeAttribute=ae(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),ie.escapeText=ae(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(_escape);var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(ie){return ie&&ie.__esModule?ie:{default:ie}};Object.defineProperty(encode,"__esModule",{value:!0}),encode.encodeNonAsciiHTML=encode.encodeHTML=void 0;var encode_html_js_1=__importDefault$1(encodeHtml),escape_js_1=_escape,htmlReplacer=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function encodeHTML(ie){return encodeHTMLTrieRe(htmlReplacer,ie)}encode.encodeHTML=encodeHTML;function encodeNonAsciiHTML(ie){return encodeHTMLTrieRe(escape_js_1.xmlReplacer,ie)}encode.encodeNonAsciiHTML=encodeNonAsciiHTML;function encodeHTMLTrieRe(ie,Z){for(var ee="",ae=0,ye;(ye=ie.exec(Z))!==null;){var ve=ye.index;ee+=Z.substring(ae,ve);var be=Z.charCodeAt(ve),Qe=encode_html_js_1.default.get(be);if(typeof Qe=="object"){if(ve+1<Z.length){var Xe=Z.charCodeAt(ve+1),Je=typeof Qe.n=="number"?Qe.n===Xe?Qe.o:void 0:Qe.n.get(Xe);if(Je!==void 0){ee+=Je,ae=ie.lastIndex+=1;continue}}Qe=Qe.v}if(Qe!==void 0)ee+=Qe,ae=ve+1;else{var tt=(0,escape_js_1.getCodePoint)(Z,ve);ee+="&#x".concat(tt.toString(16),";"),ae=ie.lastIndex+=+(tt!==be)}}return ee+Z.substr(ae)}(function(ie){Object.defineProperty(ie,"__esModule",{value:!0}),ie.decodeXMLStrict=ie.decodeHTML5Strict=ie.decodeHTML4Strict=ie.decodeHTML5=ie.decodeHTML4=ie.decodeHTMLAttribute=ie.decodeHTMLStrict=ie.decodeHTML=ie.decodeXML=ie.DecodingMode=ie.EntityDecoder=ie.encodeHTML5=ie.encodeHTML4=ie.encodeNonAsciiHTML=ie.encodeHTML=ie.escapeText=ie.escapeAttribute=ie.escapeUTF8=ie.escape=ie.encodeXML=ie.encode=ie.decodeStrict=ie.decode=ie.EncodingMode=ie.EntityLevel=void 0;var Z=decode,ee=encode,ae=_escape,ye;(function(st){st[st.XML=0]="XML",st[st.HTML=1]="HTML"})(ye=ie.EntityLevel||(ie.EntityLevel={}));var ve;(function(st){st[st.UTF8=0]="UTF8",st[st.ASCII=1]="ASCII",st[st.Extensive=2]="Extensive",st[st.Attribute=3]="Attribute",st[st.Text=4]="Text"})(ve=ie.EncodingMode||(ie.EncodingMode={}));function be(st,lt){lt===void 0&&(lt=ye.XML);var ct=typeof lt=="number"?lt:lt.level;if(ct===ye.HTML){var gt=typeof lt=="object"?lt.mode:void 0;return(0,Z.decodeHTML)(st,gt)}return(0,Z.decodeXML)(st)}ie.decode=be;function Qe(st,lt){var ct;lt===void 0&&(lt=ye.XML);var gt=typeof lt=="number"?{level:lt}:lt;return(ct=gt.mode)!==null&&ct!==void 0||(gt.mode=Z.DecodingMode.Strict),be(st,gt)}ie.decodeStrict=Qe;function Xe(st,lt){lt===void 0&&(lt=ye.XML);var ct=typeof lt=="number"?{level:lt}:lt;return ct.mode===ve.UTF8?(0,ae.escapeUTF8)(st):ct.mode===ve.Attribute?(0,ae.escapeAttribute)(st):ct.mode===ve.Text?(0,ae.escapeText)(st):ct.level===ye.HTML?ct.mode===ve.ASCII?(0,ee.encodeNonAsciiHTML)(st):(0,ee.encodeHTML)(st):(0,ae.encodeXML)(st)}ie.encode=Xe;var Je=_escape;Object.defineProperty(ie,"encodeXML",{enumerable:!0,get:function(){return Je.encodeXML}}),Object.defineProperty(ie,"escape",{enumerable:!0,get:function(){return Je.escape}}),Object.defineProperty(ie,"escapeUTF8",{enumerable:!0,get:function(){return Je.escapeUTF8}}),Object.defineProperty(ie,"escapeAttribute",{enumerable:!0,get:function(){return Je.escapeAttribute}}),Object.defineProperty(ie,"escapeText",{enumerable:!0,get:function(){return Je.escapeText}});var tt=encode;Object.defineProperty(ie,"encodeHTML",{enumerable:!0,get:function(){return tt.encodeHTML}}),Object.defineProperty(ie,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return tt.encodeNonAsciiHTML}}),Object.defineProperty(ie,"encodeHTML4",{enumerable:!0,get:function(){return tt.encodeHTML}}),Object.defineProperty(ie,"encodeHTML5",{enumerable:!0,get:function(){return tt.encodeHTML}});var it=decode;Object.defineProperty(ie,"EntityDecoder",{enumerable:!0,get:function(){return it.EntityDecoder}}),Object.defineProperty(ie,"DecodingMode",{enumerable:!0,get:function(){return it.DecodingMode}}),Object.defineProperty(ie,"decodeXML",{enumerable:!0,get:function(){return it.decodeXML}}),Object.defineProperty(ie,"decodeHTML",{enumerable:!0,get:function(){return it.decodeHTML}}),Object.defineProperty(ie,"decodeHTMLStrict",{enumerable:!0,get:function(){return it.decodeHTMLStrict}}),Object.defineProperty(ie,"decodeHTMLAttribute",{enumerable:!0,get:function(){return it.decodeHTMLAttribute}}),Object.defineProperty(ie,"decodeHTML4",{enumerable:!0,get:function(){return it.decodeHTML}}),Object.defineProperty(ie,"decodeHTML5",{enumerable:!0,get:function(){return it.decodeHTML}}),Object.defineProperty(ie,"decodeHTML4Strict",{enumerable:!0,get:function(){return it.decodeHTMLStrict}}),Object.defineProperty(ie,"decodeHTML5Strict",{enumerable:!0,get:function(){return it.decodeHTMLStrict}}),Object.defineProperty(ie,"decodeXMLStrict",{enumerable:!0,get:function(){return it.decodeXML}})})(lib);var foreignNames={};Object.defineProperty(foreignNames,"__esModule",{value:!0}),foreignNames.attributeNames=foreignNames.elementNames=void 0,foreignNames.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(ie){return[ie.toLowerCase(),ie]})),foreignNames.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(ie){return[ie.toLowerCase(),ie]}));var __assign$1=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$1=Object.assign||function(ie){for(var Z,ee=1,ae=arguments.length;ee<ae;ee++){Z=arguments[ee];for(var ye in Z)Object.prototype.hasOwnProperty.call(Z,ye)&&(ie[ye]=Z[ye])}return ie},__assign$1.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ie,Z,ee,ae){ae===void 0&&(ae=ee);var ye=Object.getOwnPropertyDescriptor(Z,ee);(!ye||("get"in ye?!Z.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return Z[ee]}}),Object.defineProperty(ie,ae,ye)}:function(ie,Z,ee,ae){ae===void 0&&(ae=ee),ie[ae]=Z[ee]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ie,Z){Object.defineProperty(ie,"default",{enumerable:!0,value:Z})}:function(ie,Z){ie.default=Z}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(ie){if(ie&&ie.__esModule)return ie;var Z={};if(ie!=null)for(var ee in ie)ee!=="default"&&Object.prototype.hasOwnProperty.call(ie,ee)&&__createBinding(Z,ie,ee);return __setModuleDefault(Z,ie),Z};Object.defineProperty(lib$1,"__esModule",{value:!0}),lib$1.render=void 0;var ElementType=__importStar(lib$3),entities_1=lib,foreignNames_js_1=foreignNames,unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(ie){return ie.replace(/"/g,"&quot;")}function formatAttributes(ie,Z){var ee;if(ie){var ae=((ee=Z.encodeEntities)!==null&&ee!==void 0?ee:Z.decodeEntities)===!1?replaceQuotes:Z.xmlMode||Z.encodeEntities!=="utf8"?entities_1.encodeXML:entities_1.escapeAttribute;return Object.keys(ie).map(function(ye){var ve,be,Qe=(ve=ie[ye])!==null&&ve!==void 0?ve:"";return Z.xmlMode==="foreign"&&(ye=(be=foreignNames_js_1.attributeNames.get(ye))!==null&&be!==void 0?be:ye),!Z.emptyAttrs&&!Z.xmlMode&&Qe===""?ye:"".concat(ye,'="').concat(ae(Qe),'"')}).join(" ")}}var singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render(ie,Z){Z===void 0&&(Z={});for(var ee=("length"in ie)?ie:[ie],ae="",ye=0;ye<ee.length;ye++)ae+=renderNode(ee[ye],Z);return ae}lib$1.render=render,lib$1.default=render;function renderNode(ie,Z){switch(ie.type){case ElementType.Root:return render(ie.children,Z);case ElementType.Doctype:case ElementType.Directive:return renderDirective(ie);case ElementType.Comment:return renderComment(ie);case ElementType.CDATA:return renderCdata(ie);case ElementType.Script:case ElementType.Style:case ElementType.Tag:return renderTag(ie,Z);case ElementType.Text:return renderText(ie,Z)}}var foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),foreignElements=new Set(["svg","math"]);function renderTag(ie,Z){var ee;Z.xmlMode==="foreign"&&(ie.name=(ee=foreignNames_js_1.elementNames.get(ie.name))!==null&&ee!==void 0?ee:ie.name,ie.parent&&foreignModeIntegrationPoints.has(ie.parent.name)&&(Z=__assign$1(__assign$1({},Z),{xmlMode:!1}))),!Z.xmlMode&&foreignElements.has(ie.name)&&(Z=__assign$1(__assign$1({},Z),{xmlMode:"foreign"}));var ae="<".concat(ie.name),ye=formatAttributes(ie.attribs,Z);return ye&&(ae+=" ".concat(ye)),ie.children.length===0&&(Z.xmlMode?Z.selfClosingTags!==!1:Z.selfClosingTags&&singleTag.has(ie.name))?(Z.xmlMode||(ae+=" "),ae+="/>"):(ae+=">",ie.children.length>0&&(ae+=render(ie.children,Z)),(Z.xmlMode||!singleTag.has(ie.name))&&(ae+="</".concat(ie.name,">"))),ae}function renderDirective(ie){return"<".concat(ie.data,">")}function renderText(ie,Z){var ee,ae=ie.data||"";return((ee=Z.encodeEntities)!==null&&ee!==void 0?ee:Z.decodeEntities)!==!1&&!(!Z.xmlMode&&ie.parent&&unencodedElements.has(ie.parent.name))&&(ae=Z.xmlMode||Z.encodeEntities!=="utf8"?(0,entities_1.encodeXML)(ae):(0,entities_1.escapeText)(ae)),ae}function renderCdata(ie){return"<![CDATA[".concat(ie.children[0].data,"]]>")}function renderComment(ie){return"<!--".concat(ie.data,"-->")}var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(ie){return ie&&ie.__esModule?ie:{default:ie}};Object.defineProperty(stringify$5,"__esModule",{value:!0}),stringify$5.innerText=stringify$5.textContent=stringify$5.getText=stringify$5.getInnerHTML=stringify$5.getOuterHTML=void 0;var domhandler_1$3=lib$4,dom_serializer_1=__importDefault(lib$1),domelementtype_1=lib$3;function getOuterHTML(ie,Z){return(0,dom_serializer_1.default)(ie,Z)}stringify$5.getOuterHTML=getOuterHTML;function getInnerHTML(ie,Z){return(0,domhandler_1$3.hasChildren)(ie)?ie.children.map(function(ee){return getOuterHTML(ee,Z)}).join(""):""}stringify$5.getInnerHTML=getInnerHTML;function getText(ie){return Array.isArray(ie)?ie.map(getText).join(""):(0,domhandler_1$3.isTag)(ie)?ie.name==="br"?`
`:getText(ie.children):(0,domhandler_1$3.isCDATA)(ie)?getText(ie.children):(0,domhandler_1$3.isText)(ie)?ie.data:""}stringify$5.getText=getText;function textContent(ie){return Array.isArray(ie)?ie.map(textContent).join(""):(0,domhandler_1$3.hasChildren)(ie)&&!(0,domhandler_1$3.isComment)(ie)?textContent(ie.children):(0,domhandler_1$3.isText)(ie)?ie.data:""}stringify$5.textContent=textContent;function innerText(ie){return Array.isArray(ie)?ie.map(innerText).join(""):(0,domhandler_1$3.hasChildren)(ie)&&(ie.type===domelementtype_1.ElementType.Tag||(0,domhandler_1$3.isCDATA)(ie))?innerText(ie.children):(0,domhandler_1$3.isText)(ie)?ie.data:""}stringify$5.innerText=innerText;var traversal={};Object.defineProperty(traversal,"__esModule",{value:!0}),traversal.prevElementSibling=traversal.nextElementSibling=traversal.getName=traversal.hasAttrib=traversal.getAttributeValue=traversal.getSiblings=traversal.getParent=traversal.getChildren=void 0;var domhandler_1$2=lib$4;function getChildren(ie){return(0,domhandler_1$2.hasChildren)(ie)?ie.children:[]}traversal.getChildren=getChildren;function getParent(ie){return ie.parent||null}traversal.getParent=getParent;function getSiblings(ie){var Z,ee,ae=getParent(ie);if(ae!=null)return getChildren(ae);for(var ye=[ie],ve=ie.prev,be=ie.next;ve!=null;)ye.unshift(ve),Z=ve,ve=Z.prev;for(;be!=null;)ye.push(be),ee=be,be=ee.next;return ye}traversal.getSiblings=getSiblings;function getAttributeValue(ie,Z){var ee;return(ee=ie.attribs)===null||ee===void 0?void 0:ee[Z]}traversal.getAttributeValue=getAttributeValue;function hasAttrib(ie,Z){return ie.attribs!=null&&Object.prototype.hasOwnProperty.call(ie.attribs,Z)&&ie.attribs[Z]!=null}traversal.hasAttrib=hasAttrib;function getName(ie){return ie.name}traversal.getName=getName;function nextElementSibling(ie){for(var Z,ee=ie.next;ee!==null&&!(0,domhandler_1$2.isTag)(ee);)Z=ee,ee=Z.next;return ee}traversal.nextElementSibling=nextElementSibling;function prevElementSibling(ie){for(var Z,ee=ie.prev;ee!==null&&!(0,domhandler_1$2.isTag)(ee);)Z=ee,ee=Z.prev;return ee}traversal.prevElementSibling=prevElementSibling;var manipulation={};Object.defineProperty(manipulation,"__esModule",{value:!0}),manipulation.prepend=manipulation.prependChild=manipulation.append=manipulation.appendChild=manipulation.replaceElement=manipulation.removeElement=void 0;function removeElement(ie){if(ie.prev&&(ie.prev.next=ie.next),ie.next&&(ie.next.prev=ie.prev),ie.parent){var Z=ie.parent.children,ee=Z.lastIndexOf(ie);ee>=0&&Z.splice(ee,1)}ie.next=null,ie.prev=null,ie.parent=null}manipulation.removeElement=removeElement;function replaceElement(ie,Z){var ee=Z.prev=ie.prev;ee&&(ee.next=Z);var ae=Z.next=ie.next;ae&&(ae.prev=Z);var ye=Z.parent=ie.parent;if(ye){var ve=ye.children;ve[ve.lastIndexOf(ie)]=Z,ie.parent=null}}manipulation.replaceElement=replaceElement;function appendChild(ie,Z){if(removeElement(Z),Z.next=null,Z.parent=ie,ie.children.push(Z)>1){var ee=ie.children[ie.children.length-2];ee.next=Z,Z.prev=ee}else Z.prev=null}manipulation.appendChild=appendChild;function append(ie,Z){removeElement(Z);var ee=ie.parent,ae=ie.next;if(Z.next=ae,Z.prev=ie,ie.next=Z,Z.parent=ee,ae){if(ae.prev=Z,ee){var ye=ee.children;ye.splice(ye.lastIndexOf(ae),0,Z)}}else ee&&ee.children.push(Z)}manipulation.append=append;function prependChild(ie,Z){if(removeElement(Z),Z.parent=ie,Z.prev=null,ie.children.unshift(Z)!==1){var ee=ie.children[1];ee.prev=Z,Z.next=ee}else Z.next=null}manipulation.prependChild=prependChild;function prepend(ie,Z){removeElement(Z);var ee=ie.parent;if(ee){var ae=ee.children;ae.splice(ae.indexOf(ie),0,Z)}ie.prev&&(ie.prev.next=Z),Z.parent=ee,Z.prev=ie.prev,Z.next=ie,ie.prev=Z}manipulation.prepend=prepend;var querying={};Object.defineProperty(querying,"__esModule",{value:!0}),querying.findAll=querying.existsOne=querying.findOne=querying.findOneChild=querying.find=querying.filter=void 0;var domhandler_1$1=lib$4;function filter$1(ie,Z,ee,ae){return ee===void 0&&(ee=!0),ae===void 0&&(ae=1/0),find(ie,Array.isArray(Z)?Z:[Z],ee,ae)}querying.filter=filter$1;function find(ie,Z,ee,ae){for(var ye=[],ve=[Z],be=[0];;){if(be[0]>=ve[0].length){if(be.length===1)return ye;ve.shift(),be.shift();continue}var Qe=ve[0][be[0]++];if(ie(Qe)&&(ye.push(Qe),--ae<=0))return ye;ee&&(0,domhandler_1$1.hasChildren)(Qe)&&Qe.children.length>0&&(be.unshift(0),ve.unshift(Qe.children))}}querying.find=find;function findOneChild(ie,Z){return Z.find(ie)}querying.findOneChild=findOneChild;function findOne(ie,Z,ee){ee===void 0&&(ee=!0);for(var ae=null,ye=0;ye<Z.length&&!ae;ye++){var ve=Z[ye];if((0,domhandler_1$1.isTag)(ve))ie(ve)?ae=ve:ee&&ve.children.length>0&&(ae=findOne(ie,ve.children,!0));else continue}return ae}querying.findOne=findOne;function existsOne(ie,Z){return Z.some(function(ee){return(0,domhandler_1$1.isTag)(ee)&&(ie(ee)||existsOne(ie,ee.children))})}querying.existsOne=existsOne;function findAll(ie,Z){for(var ee=[],ae=[Z],ye=[0];;){if(ye[0]>=ae[0].length){if(ae.length===1)return ee;ae.shift(),ye.shift();continue}var ve=ae[0][ye[0]++];(0,domhandler_1$1.isTag)(ve)&&(ie(ve)&&ee.push(ve),ve.children.length>0&&(ye.unshift(0),ae.unshift(ve.children)))}}querying.findAll=findAll;var legacy={};Object.defineProperty(legacy,"__esModule",{value:!0}),legacy.getElementsByTagType=legacy.getElementsByTagName=legacy.getElementById=legacy.getElements=legacy.testElement=void 0;var domhandler_1=lib$4,querying_js_1=querying,Checks={tag_name:function(ie){return typeof ie=="function"?function(Z){return(0,domhandler_1.isTag)(Z)&&ie(Z.name)}:ie==="*"?domhandler_1.isTag:function(Z){return(0,domhandler_1.isTag)(Z)&&Z.name===ie}},tag_type:function(ie){return typeof ie=="function"?function(Z){return ie(Z.type)}:function(Z){return Z.type===ie}},tag_contains:function(ie){return typeof ie=="function"?function(Z){return(0,domhandler_1.isText)(Z)&&ie(Z.data)}:function(Z){return(0,domhandler_1.isText)(Z)&&Z.data===ie}}};function getAttribCheck(ie,Z){return typeof Z=="function"?function(ee){return(0,domhandler_1.isTag)(ee)&&Z(ee.attribs[ie])}:function(ee){return(0,domhandler_1.isTag)(ee)&&ee.attribs[ie]===Z}}function combineFuncs(ie,Z){return function(ee){return ie(ee)||Z(ee)}}function compileTest(ie){var Z=Object.keys(ie).map(function(ee){var ae=ie[ee];return Object.prototype.hasOwnProperty.call(Checks,ee)?Checks[ee](ae):getAttribCheck(ee,ae)});return Z.length===0?null:Z.reduce(combineFuncs)}function testElement(ie,Z){var ee=compileTest(ie);return ee?ee(Z):!0}legacy.testElement=testElement;function getElements(ie,Z,ee,ae){ae===void 0&&(ae=1/0);var ye=compileTest(ie);return ye?(0,querying_js_1.filter)(ye,Z,ee,ae):[]}legacy.getElements=getElements;function getElementById(ie,Z,ee){return ee===void 0&&(ee=!0),Array.isArray(Z)||(Z=[Z]),(0,querying_js_1.findOne)(getAttribCheck("id",ie),Z,ee)}legacy.getElementById=getElementById;function getElementsByTagName(ie,Z,ee,ae){return ee===void 0&&(ee=!0),ae===void 0&&(ae=1/0),(0,querying_js_1.filter)(Checks.tag_name(ie),Z,ee,ae)}legacy.getElementsByTagName=getElementsByTagName;function getElementsByTagType(ie,Z,ee,ae){return ee===void 0&&(ee=!0),ae===void 0&&(ae=1/0),(0,querying_js_1.filter)(Checks.tag_type(ie),Z,ee,ae)}legacy.getElementsByTagType=getElementsByTagType;var helpers={};(function(ie){Object.defineProperty(ie,"__esModule",{value:!0}),ie.uniqueSort=ie.compareDocumentPosition=ie.DocumentPosition=ie.removeSubsets=void 0;var Z=lib$4;function ee(be){for(var Qe=be.length;--Qe>=0;){var Xe=be[Qe];if(Qe>0&&be.lastIndexOf(Xe,Qe-1)>=0){be.splice(Qe,1);continue}for(var Je=Xe.parent;Je;Je=Je.parent)if(be.includes(Je)){be.splice(Qe,1);break}}return be}ie.removeSubsets=ee;var ae;(function(be){be[be.DISCONNECTED=1]="DISCONNECTED",be[be.PRECEDING=2]="PRECEDING",be[be.FOLLOWING=4]="FOLLOWING",be[be.CONTAINS=8]="CONTAINS",be[be.CONTAINED_BY=16]="CONTAINED_BY"})(ae=ie.DocumentPosition||(ie.DocumentPosition={}));function ye(be,Qe){var Xe=[],Je=[];if(be===Qe)return 0;for(var tt=(0,Z.hasChildren)(be)?be:be.parent;tt;)Xe.unshift(tt),tt=tt.parent;for(tt=(0,Z.hasChildren)(Qe)?Qe:Qe.parent;tt;)Je.unshift(tt),tt=tt.parent;for(var it=Math.min(Xe.length,Je.length),st=0;st<it&&Xe[st]===Je[st];)st++;if(st===0)return ae.DISCONNECTED;var lt=Xe[st-1],ct=lt.children,gt=Xe[st],ut=Je[st];return ct.indexOf(gt)>ct.indexOf(ut)?lt===Qe?ae.FOLLOWING|ae.CONTAINED_BY:ae.FOLLOWING:lt===be?ae.PRECEDING|ae.CONTAINS:ae.PRECEDING}ie.compareDocumentPosition=ye;function ve(be){return be=be.filter(function(Qe,Xe,Je){return!Je.includes(Qe,Xe+1)}),be.sort(function(Qe,Xe){var Je=ye(Qe,Xe);return Je&ae.PRECEDING?-1:Je&ae.FOLLOWING?1:0}),be}ie.uniqueSort=ve})(helpers);var feeds={};Object.defineProperty(feeds,"__esModule",{value:!0}),feeds.getFeed=void 0;var stringify_js_1=stringify$5,legacy_js_1=legacy;function getFeed(ie){var Z=getOneElement(isValidFeed,ie);return Z?Z.name==="feed"?getAtomFeed(Z):getRssFeed(Z):null}feeds.getFeed=getFeed;function getAtomFeed(ie){var Z,ee=ie.children,ae={type:"atom",items:(0,legacy_js_1.getElementsByTagName)("entry",ee).map(function(be){var Qe,Xe=be.children,Je={media:getMediaElements(Xe)};addConditionally(Je,"id","id",Xe),addConditionally(Je,"title","title",Xe);var tt=(Qe=getOneElement("link",Xe))===null||Qe===void 0?void 0:Qe.attribs.href;tt&&(Je.link=tt);var it=fetch$1("summary",Xe)||fetch$1("content",Xe);it&&(Je.description=it);var st=fetch$1("updated",Xe);return st&&(Je.pubDate=new Date(st)),Je})};addConditionally(ae,"id","id",ee),addConditionally(ae,"title","title",ee);var ye=(Z=getOneElement("link",ee))===null||Z===void 0?void 0:Z.attribs.href;ye&&(ae.link=ye),addConditionally(ae,"description","subtitle",ee);var ve=fetch$1("updated",ee);return ve&&(ae.updated=new Date(ve)),addConditionally(ae,"author","email",ee,!0),ae}function getRssFeed(ie){var Z,ee,ae=(ee=(Z=getOneElement("channel",ie.children))===null||Z===void 0?void 0:Z.children)!==null&&ee!==void 0?ee:[],ye={type:ie.name.substr(0,3),id:"",items:(0,legacy_js_1.getElementsByTagName)("item",ie.children).map(function(be){var Qe=be.children,Xe={media:getMediaElements(Qe)};addConditionally(Xe,"id","guid",Qe),addConditionally(Xe,"title","title",Qe),addConditionally(Xe,"link","link",Qe),addConditionally(Xe,"description","description",Qe);var Je=fetch$1("pubDate",Qe)||fetch$1("dc:date",Qe);return Je&&(Xe.pubDate=new Date(Je)),Xe})};addConditionally(ye,"title","title",ae),addConditionally(ye,"link","link",ae),addConditionally(ye,"description","description",ae);var ve=fetch$1("lastBuildDate",ae);return ve&&(ye.updated=new Date(ve)),addConditionally(ye,"author","managingEditor",ae,!0),ye}var MEDIA_KEYS_STRING=["url","type","lang"],MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(ie){return(0,legacy_js_1.getElementsByTagName)("media:content",ie).map(function(Z){for(var ee=Z.attribs,ae={medium:ee.medium,isDefault:!!ee.isDefault},ye=0,ve=MEDIA_KEYS_STRING;ye<ve.length;ye++){var be=ve[ye];ee[be]&&(ae[be]=ee[be])}for(var Qe=0,Xe=MEDIA_KEYS_INT;Qe<Xe.length;Qe++){var be=Xe[Qe];ee[be]&&(ae[be]=parseInt(ee[be],10))}return ee.expression&&(ae.expression=ee.expression),ae})}function getOneElement(ie,Z){return(0,legacy_js_1.getElementsByTagName)(ie,Z,!0,1)[0]}function fetch$1(ie,Z,ee){return ee===void 0&&(ee=!1),(0,stringify_js_1.textContent)((0,legacy_js_1.getElementsByTagName)(ie,Z,ee,1)).trim()}function addConditionally(ie,Z,ee,ae,ye){ye===void 0&&(ye=!1);var ve=fetch$1(ee,ae,ye);ve&&(ie[Z]=ve)}function isValidFeed(ie){return ie==="rss"||ie==="feed"||ie==="rdf:RDF"}(function(ie){var Z=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ye,ve,be,Qe){Qe===void 0&&(Qe=be);var Xe=Object.getOwnPropertyDescriptor(ve,be);(!Xe||("get"in Xe?!ve.__esModule:Xe.writable||Xe.configurable))&&(Xe={enumerable:!0,get:function(){return ve[be]}}),Object.defineProperty(ye,Qe,Xe)}:function(ye,ve,be,Qe){Qe===void 0&&(Qe=be),ye[Qe]=ve[be]}),ee=commonjsGlobal&&commonjsGlobal.__exportStar||function(ye,ve){for(var be in ye)be!=="default"&&!Object.prototype.hasOwnProperty.call(ve,be)&&Z(ve,ye,be)};Object.defineProperty(ie,"__esModule",{value:!0}),ie.hasChildren=ie.isDocument=ie.isComment=ie.isText=ie.isCDATA=ie.isTag=void 0,ee(stringify$5,ie),ee(traversal,ie),ee(manipulation,ie),ee(querying,ie),ee(legacy,ie),ee(helpers,ie),ee(feeds,ie);var ae=lib$4;Object.defineProperty(ie,"isTag",{enumerable:!0,get:function(){return ae.isTag}}),Object.defineProperty(ie,"isCDATA",{enumerable:!0,get:function(){return ae.isCDATA}}),Object.defineProperty(ie,"isText",{enumerable:!0,get:function(){return ae.isText}}),Object.defineProperty(ie,"isComment",{enumerable:!0,get:function(){return ae.isComment}}),Object.defineProperty(ie,"isDocument",{enumerable:!0,get:function(){return ae.isDocument}}),Object.defineProperty(ie,"hasChildren",{enumerable:!0,get:function(){return ae.hasChildren}})})(lib$2),function(ie){var Z=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(mt,ei,ni,ri){ri===void 0&&(ri=ni);var si=Object.getOwnPropertyDescriptor(ei,ni);(!si||("get"in si?!ei.__esModule:si.writable||si.configurable))&&(si={enumerable:!0,get:function(){return ei[ni]}}),Object.defineProperty(mt,ri,si)}:function(mt,ei,ni,ri){ri===void 0&&(ri=ni),mt[ri]=ei[ni]}),ee=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(mt,ei){Object.defineProperty(mt,"default",{enumerable:!0,value:ei})}:function(mt,ei){mt.default=ei}),ae=commonjsGlobal&&commonjsGlobal.__importStar||function(mt){if(mt&&mt.__esModule)return mt;var ei={};if(mt!=null)for(var ni in mt)ni!=="default"&&Object.prototype.hasOwnProperty.call(mt,ni)&&Z(ei,mt,ni);return ee(ei,mt),ei},ye=commonjsGlobal&&commonjsGlobal.__importDefault||function(mt){return mt&&mt.__esModule?mt:{default:mt}};Object.defineProperty(ie,"__esModule",{value:!0}),ie.DomUtils=ie.parseFeed=ie.getFeed=ie.ElementType=ie.Tokenizer=ie.createDomStream=ie.parseDOM=ie.parseDocument=ie.DefaultHandler=ie.DomHandler=ie.Parser=void 0;var ve=Parser$3,be=Parser$3;Object.defineProperty(ie,"Parser",{enumerable:!0,get:function(){return be.Parser}});var Qe=lib$4,Xe=lib$4;Object.defineProperty(ie,"DomHandler",{enumerable:!0,get:function(){return Xe.DomHandler}}),Object.defineProperty(ie,"DefaultHandler",{enumerable:!0,get:function(){return Xe.DomHandler}});function Je(mt,ei){var ni=new Qe.DomHandler(void 0,ei);return new ve.Parser(ni,ei).end(mt),ni.root}ie.parseDocument=Je;function tt(mt,ei){return Je(mt,ei).children}ie.parseDOM=tt;function it(mt,ei,ni){var ri=new Qe.DomHandler(mt,ei,ni);return new ve.Parser(ri,ei)}ie.createDomStream=it;var st=Tokenizer;Object.defineProperty(ie,"Tokenizer",{enumerable:!0,get:function(){return ye(st).default}}),ie.ElementType=ae(lib$3);var lt=lib$2,ct=lib$2;Object.defineProperty(ie,"getFeed",{enumerable:!0,get:function(){return ct.getFeed}});var gt={xmlMode:!0};function ut(mt,ei){return ei===void 0&&(ei=gt),(0,lt.getFeed)(tt(mt,ei))}ie.parseFeed=ut,ie.DomUtils=ae(lib$2)}(lib$5);var escapeStringRegexp$1=ie=>{if(typeof ie!="string")throw new TypeError("Expected a string");return ie.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},isPlainObject$2={};Object.defineProperty(isPlainObject$2,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function isObject(ie){return Object.prototype.toString.call(ie)==="[object Object]"}function isPlainObject$1(ie){var Z,ee;return isObject(ie)===!1?!1:(Z=ie.constructor,Z===void 0?!0:(ee=Z.prototype,!(isObject(ee)===!1||ee.hasOwnProperty("isPrototypeOf")===!1)))}isPlainObject$2.isPlainObject=isPlainObject$1;var isMergeableObject=function(Z){return isNonNullObject(Z)&&!isSpecial(Z)};function isNonNullObject(ie){return!!ie&&typeof ie=="object"}function isSpecial(ie){var Z=Object.prototype.toString.call(ie);return Z==="[object RegExp]"||Z==="[object Date]"||isReactElement(ie)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(ie){return ie.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(ie){return Array.isArray(ie)?[]:{}}function cloneUnlessOtherwiseSpecified(ie,Z){return Z.clone!==!1&&Z.isMergeableObject(ie)?deepmerge$1(emptyTarget(ie),ie,Z):ie}function defaultArrayMerge(ie,Z,ee){return ie.concat(Z).map(function(ae){return cloneUnlessOtherwiseSpecified(ae,ee)})}function getMergeFunction(ie,Z){if(!Z.customMerge)return deepmerge$1;var ee=Z.customMerge(ie);return typeof ee=="function"?ee:deepmerge$1}function getEnumerableOwnPropertySymbols(ie){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(ie).filter(function(Z){return Object.propertyIsEnumerable.call(ie,Z)}):[]}function getKeys(ie){return Object.keys(ie).concat(getEnumerableOwnPropertySymbols(ie))}function propertyIsOnObject(ie,Z){try{return Z in ie}catch{return!1}}function propertyIsUnsafe(ie,Z){return propertyIsOnObject(ie,Z)&&!(Object.hasOwnProperty.call(ie,Z)&&Object.propertyIsEnumerable.call(ie,Z))}function mergeObject(ie,Z,ee){var ae={};return ee.isMergeableObject(ie)&&getKeys(ie).forEach(function(ye){ae[ye]=cloneUnlessOtherwiseSpecified(ie[ye],ee)}),getKeys(Z).forEach(function(ye){propertyIsUnsafe(ie,ye)||(propertyIsOnObject(ie,ye)&&ee.isMergeableObject(Z[ye])?ae[ye]=getMergeFunction(ye,ee)(ie[ye],Z[ye],ee):ae[ye]=cloneUnlessOtherwiseSpecified(Z[ye],ee))}),ae}function deepmerge$1(ie,Z,ee){ee=ee||{},ee.arrayMerge=ee.arrayMerge||defaultArrayMerge,ee.isMergeableObject=ee.isMergeableObject||isMergeableObject,ee.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var ae=Array.isArray(Z),ye=Array.isArray(ie),ve=ae===ye;return ve?ae?ee.arrayMerge(ie,Z,ee):mergeObject(ie,Z,ee):cloneUnlessOtherwiseSpecified(Z,ee)}deepmerge$1.all=function(Z,ee){if(!Array.isArray(Z))throw new Error("first argument should be an array");return Z.reduce(function(ae,ye){return deepmerge$1(ae,ye,ee)},{})};var deepmerge_1=deepmerge$1,cjs=deepmerge_1,parseSrcset$1={exports:{}};(function(ie){(function(Z,ee){ie.exports?ie.exports=ee():Z.parseSrcset=ee()})(commonjsGlobal,function(){return function(Z){function ee(ri){return ri===" "||ri==="	"||ri===`
`||ri==="\f"||ri==="\r"}function ae(ri){var si,li=ri.exec(Z.substring(ut));if(li)return si=li[0],ut+=si.length,si}for(var ye=Z.length,ve=/^[ \t\n\r\u000c]+/,be=/^[, \t\n\r\u000c]+/,Qe=/^[^ \t\n\r\u000c]+/,Xe=/[,]+$/,Je=/^\d+$/,tt=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,it,st,lt,ct,gt,ut=0,mt=[];;){if(ae(be),ut>=ye)return mt;it=ae(Qe),st=[],it.slice(-1)===","?(it=it.replace(Xe,""),ni()):ei()}function ei(){for(ae(ve),lt="",ct="in descriptor";;){if(gt=Z.charAt(ut),ct==="in descriptor")if(ee(gt))lt&&(st.push(lt),lt="",ct="after descriptor");else if(gt===","){ut+=1,lt&&st.push(lt),ni();return}else if(gt==="(")lt=lt+gt,ct="in parens";else if(gt===""){lt&&st.push(lt),ni();return}else lt=lt+gt;else if(ct==="in parens")if(gt===")")lt=lt+gt,ct="in descriptor";else if(gt===""){st.push(lt),ni();return}else lt=lt+gt;else if(ct==="after descriptor"&&!ee(gt))if(gt===""){ni();return}else ct="in descriptor",ut-=1;ut+=1}}function ni(){var ri=!1,si,li,ai,ci,Ci={},pi,gi,_i,bi,Mi;for(ci=0;ci<st.length;ci++)pi=st[ci],gi=pi[pi.length-1],_i=pi.substring(0,pi.length-1),bi=parseInt(_i,10),Mi=parseFloat(_i),Je.test(_i)&&gi==="w"?((si||li)&&(ri=!0),bi===0?ri=!0:si=bi):tt.test(_i)&&gi==="x"?((si||li||ai)&&(ri=!0),Mi<0?ri=!0:li=Mi):Je.test(_i)&&gi==="h"?((ai||li)&&(ri=!0),bi===0?ri=!0:ai=bi):ri=!0;ri?console&&console.log&&console.log("Invalid srcset descriptor found in '"+Z+"' at '"+pi+"'."):(Ci.url=it,si&&(Ci.w=si),li&&(Ci.d=li),ai&&(Ci.h=ai),mt.push(Ci))}}})})(parseSrcset$1);var parseSrcsetExports=parseSrcset$1.exports,picocolors_browser={exports:{}},x=String,create$1=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}};picocolors_browser.exports=create$1(),picocolors_browser.exports.createColors=create$1;var picocolors_browserExports=picocolors_browser.exports;const require$$2=getAugmentedNamespace(__viteBrowserExternal);let pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=class Ab extends Error{constructor(Z,ee,ae,ye,ve,be){super(Z),this.name="CssSyntaxError",this.reason=Z,ve&&(this.file=ve),ye&&(this.source=ye),be&&(this.plugin=be),typeof ee<"u"&&typeof ae<"u"&&(typeof ee=="number"?(this.line=ee,this.column=ae):(this.line=ee.line,this.column=ee.column,this.endLine=ae.line,this.endColumn=ae.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Ab)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(Z){if(!this.source)return"";let ee=this.source;Z==null&&(Z=pico.isColorSupported),terminalHighlight$1&&Z&&(ee=terminalHighlight$1(ee));let ae=ee.split(/\r?\n/),ye=Math.max(this.line-3,0),ve=Math.min(this.line+2,ae.length),be=String(ve).length,Qe,Xe;if(Z){let{bold:Je,gray:tt,red:it}=pico.createColors(!0);Qe=st=>Je(it(st)),Xe=st=>tt(st)}else Qe=Xe=Je=>Je;return ae.slice(ye,ve).map((Je,tt)=>{let it=ye+1+tt,st=" "+(" "+it).slice(-be)+" | ";if(it===this.line){let lt=Xe(st.replace(/\d/g," "))+Je.slice(0,this.column-1).replace(/[^\t]/g," ");return Qe(">")+Xe(st)+Je+`
 `+lt+Qe("^")}return" "+Xe(st)+Je}).join(`
`)}toString(){let Z=this.showSourceCode();return Z&&(Z=`

`+Z+`
`),this.name+": "+this.message+Z}};var cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;var symbols={};symbols.isClean=Symbol("isClean"),symbols.my=Symbol("my");const DEFAULT_RAW={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize(ie){return ie[0].toUpperCase()+ie.slice(1)}let Stringifier$2=class{constructor(Z){this.builder=Z}atrule(Z,ee){let ae="@"+Z.name,ye=Z.params?this.rawValue(Z,"params"):"";if(typeof Z.raws.afterName<"u"?ae+=Z.raws.afterName:ye&&(ae+=" "),Z.nodes)this.block(Z,ae+ye);else{let ve=(Z.raws.between||"")+(ee?";":"");this.builder(ae+ye+ve,Z)}}beforeAfter(Z,ee){let ae;Z.type==="decl"?ae=this.raw(Z,null,"beforeDecl"):Z.type==="comment"?ae=this.raw(Z,null,"beforeComment"):ee==="before"?ae=this.raw(Z,null,"beforeRule"):ae=this.raw(Z,null,"beforeClose");let ye=Z.parent,ve=0;for(;ye&&ye.type!=="root";)ve+=1,ye=ye.parent;if(ae.includes(`
`)){let be=this.raw(Z,null,"indent");if(be.length)for(let Qe=0;Qe<ve;Qe++)ae+=be}return ae}block(Z,ee){let ae=this.raw(Z,"between","beforeOpen");this.builder(ee+ae+"{",Z,"start");let ye;Z.nodes&&Z.nodes.length?(this.body(Z),ye=this.raw(Z,"after")):ye=this.raw(Z,"after","emptyBody"),ye&&this.builder(ye),this.builder("}",Z,"end")}body(Z){let ee=Z.nodes.length-1;for(;ee>0&&Z.nodes[ee].type==="comment";)ee-=1;let ae=this.raw(Z,"semicolon");for(let ye=0;ye<Z.nodes.length;ye++){let ve=Z.nodes[ye],be=this.raw(ve,"before");be&&this.builder(be),this.stringify(ve,ee!==ye||ae)}}comment(Z){let ee=this.raw(Z,"left","commentLeft"),ae=this.raw(Z,"right","commentRight");this.builder("/*"+ee+Z.text+ae+"*/",Z)}decl(Z,ee){let ae=this.raw(Z,"between","colon"),ye=Z.prop+ae+this.rawValue(Z,"value");Z.important&&(ye+=Z.raws.important||" !important"),ee&&(ye+=";"),this.builder(ye,Z)}document(Z){this.body(Z)}raw(Z,ee,ae){let ye;if(ae||(ae=ee),ee&&(ye=Z.raws[ee],typeof ye<"u"))return ye;let ve=Z.parent;if(ae==="before"&&(!ve||ve.type==="root"&&ve.first===Z||ve&&ve.type==="document"))return"";if(!ve)return DEFAULT_RAW[ae];let be=Z.root();if(be.rawCache||(be.rawCache={}),typeof be.rawCache[ae]<"u")return be.rawCache[ae];if(ae==="before"||ae==="after")return this.beforeAfter(Z,ae);{let Qe="raw"+capitalize(ae);this[Qe]?ye=this[Qe](be,Z):be.walk(Xe=>{if(ye=Xe.raws[ee],typeof ye<"u")return!1})}return typeof ye>"u"&&(ye=DEFAULT_RAW[ae]),be.rawCache[ae]=ye,ye}rawBeforeClose(Z){let ee;return Z.walk(ae=>{if(ae.nodes&&ae.nodes.length>0&&typeof ae.raws.after<"u")return ee=ae.raws.after,ee.includes(`
`)&&(ee=ee.replace(/[^\n]+$/,"")),!1}),ee&&(ee=ee.replace(/\S/g,"")),ee}rawBeforeComment(Z,ee){let ae;return Z.walkComments(ye=>{if(typeof ye.raws.before<"u")return ae=ye.raws.before,ae.includes(`
`)&&(ae=ae.replace(/[^\n]+$/,"")),!1}),typeof ae>"u"?ae=this.raw(ee,null,"beforeDecl"):ae&&(ae=ae.replace(/\S/g,"")),ae}rawBeforeDecl(Z,ee){let ae;return Z.walkDecls(ye=>{if(typeof ye.raws.before<"u")return ae=ye.raws.before,ae.includes(`
`)&&(ae=ae.replace(/[^\n]+$/,"")),!1}),typeof ae>"u"?ae=this.raw(ee,null,"beforeRule"):ae&&(ae=ae.replace(/\S/g,"")),ae}rawBeforeOpen(Z){let ee;return Z.walk(ae=>{if(ae.type!=="decl"&&(ee=ae.raws.between,typeof ee<"u"))return!1}),ee}rawBeforeRule(Z){let ee;return Z.walk(ae=>{if(ae.nodes&&(ae.parent!==Z||Z.first!==ae)&&typeof ae.raws.before<"u")return ee=ae.raws.before,ee.includes(`
`)&&(ee=ee.replace(/[^\n]+$/,"")),!1}),ee&&(ee=ee.replace(/\S/g,"")),ee}rawColon(Z){let ee;return Z.walkDecls(ae=>{if(typeof ae.raws.between<"u")return ee=ae.raws.between.replace(/[^\s:]/g,""),!1}),ee}rawEmptyBody(Z){let ee;return Z.walk(ae=>{if(ae.nodes&&ae.nodes.length===0&&(ee=ae.raws.after,typeof ee<"u"))return!1}),ee}rawIndent(Z){if(Z.raws.indent)return Z.raws.indent;let ee;return Z.walk(ae=>{let ye=ae.parent;if(ye&&ye!==Z&&ye.parent&&ye.parent===Z&&typeof ae.raws.before<"u"){let ve=ae.raws.before.split(`
`);return ee=ve[ve.length-1],ee=ee.replace(/\S/g,""),!1}}),ee}rawSemicolon(Z){let ee;return Z.walk(ae=>{if(ae.nodes&&ae.nodes.length&&ae.last.type==="decl"&&(ee=ae.raws.semicolon,typeof ee<"u"))return!1}),ee}rawValue(Z,ee){let ae=Z[ee],ye=Z.raws[ee];return ye&&ye.value===ae?ye.raw:ae}root(Z){this.body(Z),Z.raws.after&&this.builder(Z.raws.after)}rule(Z){this.block(Z,this.rawValue(Z,"selector")),Z.raws.ownSemicolon&&this.builder(Z.raws.ownSemicolon,Z,"end")}stringify(Z,ee){if(!this[Z.type])throw new Error("Unknown AST node type "+Z.type+". Maybe you need to change PostCSS stringifier.");this[Z.type](Z,ee)}};var stringifier=Stringifier$2;Stringifier$2.default=Stringifier$2;let Stringifier$1=stringifier;function stringify$4(ie,Z){new Stringifier$1(Z).stringify(ie)}var stringify_1=stringify$4;stringify$4.default=stringify$4;let{isClean:isClean$2,my:my$2}=symbols,CssSyntaxError$2=cssSyntaxError,Stringifier=stringifier,stringify$3=stringify_1;function cloneNode(ie,Z){let ee=new ie.constructor;for(let ae in ie){if(!Object.prototype.hasOwnProperty.call(ie,ae)||ae==="proxyCache")continue;let ye=ie[ae],ve=typeof ye;ae==="parent"&&ve==="object"?Z&&(ee[ae]=Z):ae==="source"?ee[ae]=ye:Array.isArray(ye)?ee[ae]=ye.map(be=>cloneNode(be,ee)):(ve==="object"&&ye!==null&&(ye=cloneNode(ye)),ee[ae]=ye)}return ee}let Node$5=class{constructor(Z={}){this.raws={},this[isClean$2]=!1,this[my$2]=!0;for(let ee in Z)if(ee==="nodes"){this.nodes=[];for(let ae of Z[ee])typeof ae.clone=="function"?this.append(ae.clone()):this.append(ae)}else this[ee]=Z[ee]}addToError(Z){if(Z.postcssNode=this,Z.stack&&this.source&&/\n\s{4}at /.test(Z.stack)){let ee=this.source;Z.stack=Z.stack.replace(/\n\s{4}at /,`$&${ee.input.from}:${ee.start.line}:${ee.start.column}$&`)}return Z}after(Z){return this.parent.insertAfter(this,Z),this}assign(Z={}){for(let ee in Z)this[ee]=Z[ee];return this}before(Z){return this.parent.insertBefore(this,Z),this}cleanRaws(Z){delete this.raws.before,delete this.raws.after,Z||delete this.raws.between}clone(Z={}){let ee=cloneNode(this);for(let ae in Z)ee[ae]=Z[ae];return ee}cloneAfter(Z={}){let ee=this.clone(Z);return this.parent.insertAfter(this,ee),ee}cloneBefore(Z={}){let ee=this.clone(Z);return this.parent.insertBefore(this,ee),ee}error(Z,ee={}){if(this.source){let{end:ae,start:ye}=this.rangeBy(ee);return this.source.input.error(Z,{column:ye.column,line:ye.line},{column:ae.column,line:ae.line},ee)}return new CssSyntaxError$2(Z)}getProxyProcessor(){return{get(Z,ee){return ee==="proxyOf"?Z:ee==="root"?()=>Z.root().toProxy():Z[ee]},set(Z,ee,ae){return Z[ee]===ae||(Z[ee]=ae,(ee==="prop"||ee==="value"||ee==="name"||ee==="params"||ee==="important"||ee==="text")&&Z.markDirty()),!0}}}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let Z=this;for(;Z=Z.parent;)Z[isClean$2]=!1}}next(){if(!this.parent)return;let Z=this.parent.index(this);return this.parent.nodes[Z+1]}positionBy(Z,ee){let ae=this.source.start;if(Z.index)ae=this.positionInside(Z.index,ee);else if(Z.word){ee=this.toString();let ye=ee.indexOf(Z.word);ye!==-1&&(ae=this.positionInside(ye,ee))}return ae}positionInside(Z,ee){let ae=ee||this.toString(),ye=this.source.start.column,ve=this.source.start.line;for(let be=0;be<Z;be++)ae[be]===`
`?(ye=1,ve+=1):ye+=1;return{column:ye,line:ve}}prev(){if(!this.parent)return;let Z=this.parent.index(this);return this.parent.nodes[Z-1]}rangeBy(Z){let ee={column:this.source.start.column,line:this.source.start.line},ae=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:ee.column+1,line:ee.line};if(Z.word){let ye=this.toString(),ve=ye.indexOf(Z.word);ve!==-1&&(ee=this.positionInside(ve,ye),ae=this.positionInside(ve+Z.word.length,ye))}else Z.start?ee={column:Z.start.column,line:Z.start.line}:Z.index&&(ee=this.positionInside(Z.index)),Z.end?ae={column:Z.end.column,line:Z.end.line}:Z.endIndex?ae=this.positionInside(Z.endIndex):Z.index&&(ae=this.positionInside(Z.index+1));return(ae.line<ee.line||ae.line===ee.line&&ae.column<=ee.column)&&(ae={column:ee.column+1,line:ee.line}),{end:ae,start:ee}}raw(Z,ee){return new Stringifier().raw(this,Z,ee)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...Z){if(this.parent){let ee=this,ae=!1;for(let ye of Z)ye===this?ae=!0:ae?(this.parent.insertAfter(ee,ye),ee=ye):this.parent.insertBefore(ee,ye);ae||this.remove()}return this}root(){let Z=this;for(;Z.parent&&Z.parent.type!=="document";)Z=Z.parent;return Z}toJSON(Z,ee){let ae={},ye=ee==null;ee=ee||new Map;let ve=0;for(let be in this){if(!Object.prototype.hasOwnProperty.call(this,be)||be==="parent"||be==="proxyCache")continue;let Qe=this[be];if(Array.isArray(Qe))ae[be]=Qe.map(Xe=>typeof Xe=="object"&&Xe.toJSON?Xe.toJSON(null,ee):Xe);else if(typeof Qe=="object"&&Qe.toJSON)ae[be]=Qe.toJSON(null,ee);else if(be==="source"){let Xe=ee.get(Qe.input);Xe==null&&(Xe=ve,ee.set(Qe.input,ve),ve++),ae[be]={end:Qe.end,inputId:Xe,start:Qe.start}}else ae[be]=Qe}return ye&&(ae.inputs=[...ee.keys()].map(be=>be.toJSON())),ae}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(Z=stringify$3){Z.stringify&&(Z=Z.stringify);let ee="";return Z(this,ae=>{ee+=ae}),ee}warn(Z,ee,ae){let ye={node:this};for(let ve in ae)ye[ve]=ae[ve];return Z.warn(ee,ye)}get proxyOf(){return this}};var node=Node$5;Node$5.default=Node$5;let Node$4=node,Declaration$4=class extends Node$4{constructor(Z){Z&&typeof Z.value<"u"&&typeof Z.value!="string"&&(Z={...Z,value:String(Z.value)}),super(Z),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var declaration=Declaration$4;Declaration$4.default=Declaration$4;let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(ie,Z=21)=>(ee=Z)=>{let ae="",ye=ee;for(;ye--;)ae+=ie[Math.random()*ie.length|0];return ae},nanoid$1=(ie=21)=>{let Z="",ee=ie;for(;ee--;)Z+=urlAlphabet[Math.random()*64|0];return Z};var nonSecure={nanoid:nanoid$1,customAlphabet};let{SourceMapConsumer:SourceMapConsumer$2,SourceMapGenerator:SourceMapGenerator$2}=require$$2,{existsSync,readFileSync}=require$$2,{dirname:dirname$1,join}=require$$2;function fromBase64(ie){return Buffer?Buffer.from(ie,"base64").toString():window.atob(ie)}let PreviousMap$2=class{constructor(Z,ee){if(ee.map===!1)return;this.loadAnnotation(Z),this.inline=this.startWith(this.annotation,"data:");let ae=ee.map?ee.map.prev:void 0,ye=this.loadMap(ee.from,ae);!this.mapFile&&ee.from&&(this.mapFile=ee.from),this.mapFile&&(this.root=dirname$1(this.mapFile)),ye&&(this.text=ye)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2(this.text)),this.consumerCache}decodeInline(Z){let ee=/^data:application\/json;charset=utf-?8;base64,/,ae=/^data:application\/json;base64,/,ye=/^data:application\/json;charset=utf-?8,/,ve=/^data:application\/json,/;if(ye.test(Z)||ve.test(Z))return decodeURIComponent(Z.substr(RegExp.lastMatch.length));if(ee.test(Z)||ae.test(Z))return fromBase64(Z.substr(RegExp.lastMatch.length));let be=Z.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+be)}getAnnotationURL(Z){return Z.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(Z){return typeof Z!="object"?!1:typeof Z.mappings=="string"||typeof Z._mappings=="string"||Array.isArray(Z.sections)}loadAnnotation(Z){let ee=Z.match(/\/\*\s*# sourceMappingURL=/gm);if(!ee)return;let ae=Z.lastIndexOf(ee.pop()),ye=Z.indexOf("*/",ae);ae>-1&&ye>-1&&(this.annotation=this.getAnnotationURL(Z.substring(ae,ye)))}loadFile(Z){if(this.root=dirname$1(Z),existsSync(Z))return this.mapFile=Z,readFileSync(Z,"utf-8").toString().trim()}loadMap(Z,ee){if(ee===!1)return!1;if(ee){if(typeof ee=="string")return ee;if(typeof ee=="function"){let ae=ee(Z);if(ae){let ye=this.loadFile(ae);if(!ye)throw new Error("Unable to load previous source map: "+ae.toString());return ye}}else{if(ee instanceof SourceMapConsumer$2)return SourceMapGenerator$2.fromSourceMap(ee).toString();if(ee instanceof SourceMapGenerator$2)return ee.toString();if(this.isMap(ee))return JSON.stringify(ee);throw new Error("Unsupported previous source map format: "+ee.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let ae=this.annotation;return Z&&(ae=join(dirname$1(Z),ae)),this.loadFile(ae)}}}startWith(Z,ee){return Z?Z.substr(0,ee.length)===ee:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var previousMap=PreviousMap$2;PreviousMap$2.default=PreviousMap$2;let{SourceMapConsumer:SourceMapConsumer$1,SourceMapGenerator:SourceMapGenerator$1}=require$$2,{fileURLToPath,pathToFileURL:pathToFileURL$1}=require$$2,{isAbsolute,resolve:resolve$1}=require$$2,{nanoid}=nonSecure,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol("fromOffsetCache"),sourceMapAvailable$1=!!(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=!!(resolve$1&&isAbsolute),Input$4=class{constructor(Z,ee={}){if(Z===null||typeof Z>"u"||typeof Z=="object"&&!Z.toString)throw new Error(`PostCSS received ${Z} instead of CSS string`);if(this.css=Z.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,ee.from&&(!pathAvailable$1||/^\w+:\/\//.test(ee.from)||isAbsolute(ee.from)?this.file=ee.from:this.file=resolve$1(ee.from)),pathAvailable$1&&sourceMapAvailable$1){let ae=new PreviousMap$1(this.css,ee);if(ae.text){this.map=ae;let ye=ae.consumer().file;!this.file&&ye&&(this.file=this.mapResolve(ye))}}this.file||(this.id="<input css "+nanoid(6)+">"),this.map&&(this.map.file=this.from)}error(Z,ee,ae,ye={}){let ve,be,Qe;if(ee&&typeof ee=="object"){let Je=ee,tt=ae;if(typeof Je.offset=="number"){let it=this.fromOffset(Je.offset);ee=it.line,ae=it.col}else ee=Je.line,ae=Je.column;if(typeof tt.offset=="number"){let it=this.fromOffset(tt.offset);be=it.line,Qe=it.col}else be=tt.line,Qe=tt.column}else if(!ae){let Je=this.fromOffset(ee);ee=Je.line,ae=Je.col}let Xe=this.origin(ee,ae,be,Qe);return Xe?ve=new CssSyntaxError$1(Z,Xe.endLine===void 0?Xe.line:{column:Xe.column,line:Xe.line},Xe.endLine===void 0?Xe.column:{column:Xe.endColumn,line:Xe.endLine},Xe.source,Xe.file,ye.plugin):ve=new CssSyntaxError$1(Z,be===void 0?ee:{column:ae,line:ee},be===void 0?ae:{column:Qe,line:be},this.css,this.file,ye.plugin),ve.input={column:ae,endColumn:Qe,endLine:be,line:ee,source:this.css},this.file&&(pathToFileURL$1&&(ve.input.url=pathToFileURL$1(this.file).toString()),ve.input.file=this.file),ve}fromOffset(Z){let ee,ae;if(this[fromOffsetCache])ae=this[fromOffsetCache];else{let ve=this.css.split(`
`);ae=new Array(ve.length);let be=0;for(let Qe=0,Xe=ve.length;Qe<Xe;Qe++)ae[Qe]=be,be+=ve[Qe].length+1;this[fromOffsetCache]=ae}ee=ae[ae.length-1];let ye=0;if(Z>=ee)ye=ae.length-1;else{let ve=ae.length-2,be;for(;ye<ve;)if(be=ye+(ve-ye>>1),Z<ae[be])ve=be-1;else if(Z>=ae[be+1])ye=be+1;else{ye=be;break}}return{col:Z-ae[ye]+1,line:ye+1}}mapResolve(Z){return/^\w+:\/\//.test(Z)?Z:resolve$1(this.map.consumer().sourceRoot||this.map.root||".",Z)}origin(Z,ee,ae,ye){if(!this.map)return!1;let ve=this.map.consumer(),be=ve.originalPositionFor({column:ee,line:Z});if(!be.source)return!1;let Qe;typeof ae=="number"&&(Qe=ve.originalPositionFor({column:ye,line:ae}));let Xe;isAbsolute(be.source)?Xe=pathToFileURL$1(be.source):Xe=new URL(be.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));let Je={column:be.column,endColumn:Qe&&Qe.column,endLine:Qe&&Qe.line,line:be.line,url:Xe.toString()};if(Xe.protocol==="file:")if(fileURLToPath)Je.file=fileURLToPath(Xe);else throw new Error("file: protocol is not available in this PostCSS build");let tt=ve.sourceContentFor(be.source);return tt&&(Je.source=tt),Je}toJSON(){let Z={};for(let ee of["hasBOM","css","file","id"])this[ee]!=null&&(Z[ee]=this[ee]);return this.map&&(Z.map={...this.map},Z.map.consumerCache&&(Z.map.consumerCache=void 0)),Z}get from(){return this.file||this.id}};var input=Input$4;Input$4.default=Input$4,terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4);let{SourceMapConsumer,SourceMapGenerator}=require$$2,{dirname,relative,resolve,sep}=require$$2,{pathToFileURL}=require$$2,Input$3=input,sourceMapAvailable=!!(SourceMapConsumer&&SourceMapGenerator),pathAvailable=!!(dirname&&resolve&&relative&&sep),MapGenerator$2=class{constructor(Z,ee,ae,ye){this.stringify=Z,this.mapOpts=ae.map||{},this.root=ee,this.opts=ae,this.css=ye,this.originalCSS=ye,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let Z;this.isInline()?Z="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?Z=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?Z=this.mapOpts.annotation(this.opts.to,this.root):Z=this.outputFile()+".map";let ee=`
`;this.css.includes(`\r
`)&&(ee=`\r
`),this.css+=ee+"/*# sourceMappingURL="+Z+" */"}applyPrevMaps(){for(let Z of this.previous()){let ee=this.toUrl(this.path(Z.file)),ae=Z.root||dirname(Z.file),ye;this.mapOpts.sourcesContent===!1?(ye=new SourceMapConsumer(Z.text),ye.sourcesContent&&(ye.sourcesContent=ye.sourcesContent.map(()=>null))):ye=Z.consumer(),this.map.applySourceMap(ye,ee,this.toUrl(this.path(ae)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let Z;for(let ee=this.root.nodes.length-1;ee>=0;ee--)Z=this.root.nodes[ee],Z.type==="comment"&&Z.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(ee)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();{let Z="";return this.stringify(this.root,ee=>{Z+=ee}),[Z]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let Z=this.previous()[0].consumer();Z.file=this.outputFile(),this.map=SourceMapGenerator.fromSourceMap(Z)}else this.map=new SourceMapGenerator({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new SourceMapGenerator({file:this.outputFile()});let Z=1,ee=1,ae="<no source>",ye={generated:{column:0,line:0},original:{column:0,line:0},source:""},ve,be;this.stringify(this.root,(Qe,Xe,Je)=>{if(this.css+=Qe,Xe&&Je!=="end"&&(ye.generated.line=Z,ye.generated.column=ee-1,Xe.source&&Xe.source.start?(ye.source=this.sourcePath(Xe),ye.original.line=Xe.source.start.line,ye.original.column=Xe.source.start.column-1,this.map.addMapping(ye)):(ye.source=ae,ye.original.line=1,ye.original.column=0,this.map.addMapping(ye))),ve=Qe.match(/\n/g),ve?(Z+=ve.length,be=Qe.lastIndexOf(`
`),ee=Qe.length-be):ee+=Qe.length,Xe&&Je!=="start"){let tt=Xe.parent||{raws:{}};(!(Xe.type==="decl"||Xe.type==="atrule"&&!Xe.nodes)||Xe!==tt.last||tt.raws.semicolon)&&(Xe.source&&Xe.source.end?(ye.source=this.sourcePath(Xe),ye.original.line=Xe.source.end.line,ye.original.column=Xe.source.end.column-1,ye.generated.line=Z,ye.generated.column=ee-2,this.map.addMapping(ye)):(ye.source=ae,ye.original.line=1,ye.original.column=0,ye.generated.line=Z,ye.generated.column=ee-1,this.map.addMapping(ye)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(Z=>Z.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let Z=this.mapOpts.annotation;return typeof Z<"u"&&Z!==!0?!1:this.previous().length?this.previous().some(ee=>ee.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(Z=>Z.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(Z){if(this.mapOpts.absolute||Z.charCodeAt(0)===60||/^\w+:\/\//.test(Z))return Z;let ee=this.memoizedPaths.get(Z);if(ee)return ee;let ae=this.opts.to?dirname(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(ae=dirname(resolve(ae,this.mapOpts.annotation)));let ye=relative(ae,Z);return this.memoizedPaths.set(Z,ye),ye}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(Z=>{if(Z.source&&Z.source.input.map){let ee=Z.source.input.map;this.previousMaps.includes(ee)||this.previousMaps.push(ee)}});else{let Z=new Input$3(this.originalCSS,this.opts);Z.map&&this.previousMaps.push(Z.map)}return this.previousMaps}setSourcesContent(){let Z={};if(this.root)this.root.walk(ee=>{if(ee.source){let ae=ee.source.input.from;if(ae&&!Z[ae]){Z[ae]=!0;let ye=this.usesFileUrls?this.toFileUrl(ae):this.toUrl(this.path(ae));this.map.setSourceContent(ye,ee.source.input.css)}}});else if(this.css){let ee=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(ee,this.css)}}sourcePath(Z){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(Z.source.input.from):this.toUrl(this.path(Z.source.input.from))}toBase64(Z){return Buffer?Buffer.from(Z).toString("base64"):window.btoa(unescape(encodeURIComponent(Z)))}toFileUrl(Z){let ee=this.memoizedFileURLs.get(Z);if(ee)return ee;if(pathToFileURL){let ae=pathToFileURL(Z).toString();return this.memoizedFileURLs.set(Z,ae),ae}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(Z){let ee=this.memoizedURLs.get(Z);if(ee)return ee;sep==="\\"&&(Z=Z.replace(/\\/g,"/"));let ae=encodeURI(Z).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(Z,ae),ae}};var mapGenerator=MapGenerator$2;let Node$3=node,Comment$4=class extends Node$3{constructor(Z){super(Z),this.type="comment"}};var comment=Comment$4;Comment$4.default=Comment$4;let{isClean:isClean$1,my:my$1}=symbols,Declaration$3=declaration,Comment$3=comment,Node$2=node,parse$8,Rule$4,AtRule$4,Root$6;function cleanSource(ie){return ie.map(Z=>(Z.nodes&&(Z.nodes=cleanSource(Z.nodes)),delete Z.source,Z))}function markDirtyUp(ie){if(ie[isClean$1]=!1,ie.proxyOf.nodes)for(let Z of ie.proxyOf.nodes)markDirtyUp(Z)}let Container$7=class pb extends Node$2{append(...Z){for(let ee of Z){let ae=this.normalize(ee,this.last);for(let ye of ae)this.proxyOf.nodes.push(ye)}return this.markDirty(),this}cleanRaws(Z){if(super.cleanRaws(Z),this.nodes)for(let ee of this.nodes)ee.cleanRaws(Z)}each(Z){if(!this.proxyOf.nodes)return;let ee=this.getIterator(),ae,ye;for(;this.indexes[ee]<this.proxyOf.nodes.length&&(ae=this.indexes[ee],ye=Z(this.proxyOf.nodes[ae],ae),ye!==!1);)this.indexes[ee]+=1;return delete this.indexes[ee],ye}every(Z){return this.nodes.every(Z)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let Z=this.lastEach;return this.indexes[Z]=0,Z}getProxyProcessor(){return{get(Z,ee){return ee==="proxyOf"?Z:Z[ee]?ee==="each"||typeof ee=="string"&&ee.startsWith("walk")?(...ae)=>Z[ee](...ae.map(ye=>typeof ye=="function"?(ve,be)=>ye(ve.toProxy(),be):ye)):ee==="every"||ee==="some"?ae=>Z[ee]((ye,...ve)=>ae(ye.toProxy(),...ve)):ee==="root"?()=>Z.root().toProxy():ee==="nodes"?Z.nodes.map(ae=>ae.toProxy()):ee==="first"||ee==="last"?Z[ee].toProxy():Z[ee]:Z[ee]},set(Z,ee,ae){return Z[ee]===ae||(Z[ee]=ae,(ee==="name"||ee==="params"||ee==="selector")&&Z.markDirty()),!0}}}index(Z){return typeof Z=="number"?Z:(Z.proxyOf&&(Z=Z.proxyOf),this.proxyOf.nodes.indexOf(Z))}insertAfter(Z,ee){let ae=this.index(Z),ye=this.normalize(ee,this.proxyOf.nodes[ae]).reverse();ae=this.index(Z);for(let be of ye)this.proxyOf.nodes.splice(ae+1,0,be);let ve;for(let be in this.indexes)ve=this.indexes[be],ae<ve&&(this.indexes[be]=ve+ye.length);return this.markDirty(),this}insertBefore(Z,ee){let ae=this.index(Z),ye=ae===0?"prepend":!1,ve=this.normalize(ee,this.proxyOf.nodes[ae],ye).reverse();ae=this.index(Z);for(let Qe of ve)this.proxyOf.nodes.splice(ae,0,Qe);let be;for(let Qe in this.indexes)be=this.indexes[Qe],ae<=be&&(this.indexes[Qe]=be+ve.length);return this.markDirty(),this}normalize(Z,ee){if(typeof Z=="string")Z=cleanSource(parse$8(Z).nodes);else if(Array.isArray(Z)){Z=Z.slice(0);for(let ye of Z)ye.parent&&ye.parent.removeChild(ye,"ignore")}else if(Z.type==="root"&&this.type!=="document"){Z=Z.nodes.slice(0);for(let ye of Z)ye.parent&&ye.parent.removeChild(ye,"ignore")}else if(Z.type)Z=[Z];else if(Z.prop){if(typeof Z.value>"u")throw new Error("Value field is missed in node creation");typeof Z.value!="string"&&(Z.value=String(Z.value)),Z=[new Declaration$3(Z)]}else if(Z.selector)Z=[new Rule$4(Z)];else if(Z.name)Z=[new AtRule$4(Z)];else if(Z.text)Z=[new Comment$3(Z)];else throw new Error("Unknown node type in node creation");return Z.map(ye=>(ye[my$1]||pb.rebuild(ye),ye=ye.proxyOf,ye.parent&&ye.parent.removeChild(ye),ye[isClean$1]&&markDirtyUp(ye),typeof ye.raws.before>"u"&&ee&&typeof ee.raws.before<"u"&&(ye.raws.before=ee.raws.before.replace(/\S/g,"")),ye.parent=this.proxyOf,ye))}prepend(...Z){Z=Z.reverse();for(let ee of Z){let ae=this.normalize(ee,this.first,"prepend").reverse();for(let ye of ae)this.proxyOf.nodes.unshift(ye);for(let ye in this.indexes)this.indexes[ye]=this.indexes[ye]+ae.length}return this.markDirty(),this}push(Z){return Z.parent=this,this.proxyOf.nodes.push(Z),this}removeAll(){for(let Z of this.proxyOf.nodes)Z.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(Z){Z=this.index(Z),this.proxyOf.nodes[Z].parent=void 0,this.proxyOf.nodes.splice(Z,1);let ee;for(let ae in this.indexes)ee=this.indexes[ae],ee>=Z&&(this.indexes[ae]=ee-1);return this.markDirty(),this}replaceValues(Z,ee,ae){return ae||(ae=ee,ee={}),this.walkDecls(ye=>{ee.props&&!ee.props.includes(ye.prop)||ee.fast&&!ye.value.includes(ee.fast)||(ye.value=ye.value.replace(Z,ae))}),this.markDirty(),this}some(Z){return this.nodes.some(Z)}walk(Z){return this.each((ee,ae)=>{let ye;try{ye=Z(ee,ae)}catch(ve){throw ee.addToError(ve)}return ye!==!1&&ee.walk&&(ye=ee.walk(Z)),ye})}walkAtRules(Z,ee){return ee?Z instanceof RegExp?this.walk((ae,ye)=>{if(ae.type==="atrule"&&Z.test(ae.name))return ee(ae,ye)}):this.walk((ae,ye)=>{if(ae.type==="atrule"&&ae.name===Z)return ee(ae,ye)}):(ee=Z,this.walk((ae,ye)=>{if(ae.type==="atrule")return ee(ae,ye)}))}walkComments(Z){return this.walk((ee,ae)=>{if(ee.type==="comment")return Z(ee,ae)})}walkDecls(Z,ee){return ee?Z instanceof RegExp?this.walk((ae,ye)=>{if(ae.type==="decl"&&Z.test(ae.prop))return ee(ae,ye)}):this.walk((ae,ye)=>{if(ae.type==="decl"&&ae.prop===Z)return ee(ae,ye)}):(ee=Z,this.walk((ae,ye)=>{if(ae.type==="decl")return ee(ae,ye)}))}walkRules(Z,ee){return ee?Z instanceof RegExp?this.walk((ae,ye)=>{if(ae.type==="rule"&&Z.test(ae.selector))return ee(ae,ye)}):this.walk((ae,ye)=>{if(ae.type==="rule"&&ae.selector===Z)return ee(ae,ye)}):(ee=Z,this.walk((ae,ye)=>{if(ae.type==="rule")return ee(ae,ye)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Container$7.registerParse=ie=>{parse$8=ie},Container$7.registerRule=ie=>{Rule$4=ie},Container$7.registerAtRule=ie=>{AtRule$4=ie},Container$7.registerRoot=ie=>{Root$6=ie};var container=Container$7;Container$7.default=Container$7,Container$7.rebuild=ie=>{ie.type==="atrule"?Object.setPrototypeOf(ie,AtRule$4.prototype):ie.type==="rule"?Object.setPrototypeOf(ie,Rule$4.prototype):ie.type==="decl"?Object.setPrototypeOf(ie,Declaration$3.prototype):ie.type==="comment"?Object.setPrototypeOf(ie,Comment$3.prototype):ie.type==="root"&&Object.setPrototypeOf(ie,Root$6.prototype),ie[my$1]=!0,ie.nodes&&ie.nodes.forEach(Z=>{Container$7.rebuild(Z)})};let Container$6=container,LazyResult$4,Processor$3,Document$3=class extends Container$6{constructor(Z){super({type:"document",...Z}),this.nodes||(this.nodes=[])}toResult(Z={}){return new LazyResult$4(new Processor$3,this,Z).stringify()}};Document$3.registerLazyResult=ie=>{LazyResult$4=ie},Document$3.registerProcessor=ie=>{Processor$3=ie};var document$1=Document$3;Document$3.default=Document$3;let printed={};var warnOnce$2=function(Z){printed[Z]||(printed[Z]=!0,typeof console<"u"&&console.warn&&console.warn(Z))};let Warning$2=class{constructor(Z,ee={}){if(this.type="warning",this.text=Z,ee.node&&ee.node.source){let ae=ee.node.rangeBy(ee);this.line=ae.start.line,this.column=ae.start.column,this.endLine=ae.end.line,this.endColumn=ae.end.column}for(let ae in ee)this[ae]=ee[ae]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning=Warning$2;Warning$2.default=Warning$2;let Warning$1=warning,Result$3=class{constructor(Z,ee,ae){this.processor=Z,this.messages=[],this.root=ee,this.opts=ae,this.css=void 0,this.map=void 0}toString(){return this.css}warn(Z,ee={}){ee.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(ee.plugin=this.lastPlugin.postcssPlugin);let ae=new Warning$1(Z,ee);return this.messages.push(ae),ae}warnings(){return this.messages.filter(Z=>Z.type==="warning")}get content(){return this.css}};var result=Result$3;Result$3.default=Result$3;const SINGLE_QUOTE=39,DOUBLE_QUOTE=34,BACKSLASH=92,SLASH=47,NEWLINE=10,SPACE=32,FEED=12,TAB=9,CR=13,OPEN_SQUARE=91,CLOSE_SQUARE=93,OPEN_PARENTHESES=40,CLOSE_PARENTHESES=41,OPEN_CURLY=123,CLOSE_CURLY=125,SEMICOLON=59,ASTERISK=42,COLON=58,AT=64,RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i;var tokenize=function(Z,ee={}){let ae=Z.css.valueOf(),ye=ee.ignoreErrors,ve,be,Qe,Xe,Je,tt,it,st,lt,ct,gt=ae.length,ut=0,mt=[],ei=[];function ni(){return ut}function ri(ci){throw Z.error("Unclosed "+ci,ut)}function si(){return ei.length===0&&ut>=gt}function li(ci){if(ei.length)return ei.pop();if(ut>=gt)return;let Ci=ci?ci.ignoreUnclosed:!1;switch(ve=ae.charCodeAt(ut),ve){case NEWLINE:case SPACE:case TAB:case CR:case FEED:{be=ut;do be+=1,ve=ae.charCodeAt(be);while(ve===SPACE||ve===NEWLINE||ve===TAB||ve===CR||ve===FEED);ct=["space",ae.slice(ut,be)],ut=be-1;break}case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let pi=String.fromCharCode(ve);ct=[pi,pi,ut];break}case OPEN_PARENTHESES:{if(st=mt.length?mt.pop()[1]:"",lt=ae.charCodeAt(ut+1),st==="url"&&lt!==SINGLE_QUOTE&&lt!==DOUBLE_QUOTE&&lt!==SPACE&&lt!==NEWLINE&&lt!==TAB&&lt!==FEED&&lt!==CR){be=ut;do{if(tt=!1,be=ae.indexOf(")",be+1),be===-1)if(ye||Ci){be=ut;break}else ri("bracket");for(it=be;ae.charCodeAt(it-1)===BACKSLASH;)it-=1,tt=!tt}while(tt);ct=["brackets",ae.slice(ut,be+1),ut,be],ut=be}else be=ae.indexOf(")",ut+1),Xe=ae.slice(ut,be+1),be===-1||RE_BAD_BRACKET.test(Xe)?ct=["(","(",ut]:(ct=["brackets",Xe,ut,be],ut=be);break}case SINGLE_QUOTE:case DOUBLE_QUOTE:{Qe=ve===SINGLE_QUOTE?"'":'"',be=ut;do{if(tt=!1,be=ae.indexOf(Qe,be+1),be===-1)if(ye||Ci){be=ut+1;break}else ri("string");for(it=be;ae.charCodeAt(it-1)===BACKSLASH;)it-=1,tt=!tt}while(tt);ct=["string",ae.slice(ut,be+1),ut,be],ut=be;break}case AT:{RE_AT_END.lastIndex=ut+1,RE_AT_END.test(ae),RE_AT_END.lastIndex===0?be=ae.length-1:be=RE_AT_END.lastIndex-2,ct=["at-word",ae.slice(ut,be+1),ut,be],ut=be;break}case BACKSLASH:{for(be=ut,Je=!0;ae.charCodeAt(be+1)===BACKSLASH;)be+=1,Je=!Je;if(ve=ae.charCodeAt(be+1),Je&&ve!==SLASH&&ve!==SPACE&&ve!==NEWLINE&&ve!==TAB&&ve!==CR&&ve!==FEED&&(be+=1,RE_HEX_ESCAPE.test(ae.charAt(be)))){for(;RE_HEX_ESCAPE.test(ae.charAt(be+1));)be+=1;ae.charCodeAt(be+1)===SPACE&&(be+=1)}ct=["word",ae.slice(ut,be+1),ut,be],ut=be;break}default:{ve===SLASH&&ae.charCodeAt(ut+1)===ASTERISK?(be=ae.indexOf("*/",ut+2)+1,be===0&&(ye||Ci?be=ae.length:ri("comment")),ct=["comment",ae.slice(ut,be+1),ut,be],ut=be):(RE_WORD_END.lastIndex=ut+1,RE_WORD_END.test(ae),RE_WORD_END.lastIndex===0?be=ae.length-1:be=RE_WORD_END.lastIndex-2,ct=["word",ae.slice(ut,be+1),ut,be],mt.push(ct),ut=be);break}}return ut++,ct}function ai(ci){ei.push(ci)}return{back:ai,endOfFile:si,nextToken:li,position:ni}};let Container$5=container,AtRule$3=class extends Container$5{constructor(Z){super(Z),this.type="atrule"}append(...Z){return this.proxyOf.nodes||(this.nodes=[]),super.append(...Z)}prepend(...Z){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...Z)}};var atRule=AtRule$3;AtRule$3.default=AtRule$3,Container$5.registerAtRule(AtRule$3);let Container$4=container,LazyResult$3,Processor$2,Root$5=class extends Container$4{constructor(Z){super(Z),this.type="root",this.nodes||(this.nodes=[])}normalize(Z,ee,ae){let ye=super.normalize(Z);if(ee){if(ae==="prepend")this.nodes.length>1?ee.raws.before=this.nodes[1].raws.before:delete ee.raws.before;else if(this.first!==ee)for(let ve of ye)ve.raws.before=ee.raws.before}return ye}removeChild(Z,ee){let ae=this.index(Z);return!ee&&ae===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[ae].raws.before),super.removeChild(Z)}toResult(Z={}){return new LazyResult$3(new Processor$2,this,Z).stringify()}};Root$5.registerLazyResult=ie=>{LazyResult$3=ie},Root$5.registerProcessor=ie=>{Processor$2=ie};var root=Root$5;Root$5.default=Root$5,Container$4.registerRoot(Root$5);let list$2={comma(ie){return list$2.split(ie,[","],!0)},space(ie){let Z=[" ",`
`,"	"];return list$2.split(ie,Z)},split(ie,Z,ee){let ae=[],ye="",ve=!1,be=0,Qe=!1,Xe="",Je=!1;for(let tt of ie)Je?Je=!1:tt==="\\"?Je=!0:Qe?tt===Xe&&(Qe=!1):tt==='"'||tt==="'"?(Qe=!0,Xe=tt):tt==="("?be+=1:tt===")"?be>0&&(be-=1):be===0&&Z.includes(tt)&&(ve=!0),ve?(ye!==""&&ae.push(ye.trim()),ye="",ve=!1):ye+=tt;return(ee||ye!=="")&&ae.push(ye.trim()),ae}};var list_1=list$2;list$2.default=list$2;let Container$3=container,list$1=list_1,Rule$3=class extends Container$3{constructor(Z){super(Z),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1.comma(this.selector)}set selectors(Z){let ee=this.selector?this.selector.match(/,\s*/):null,ae=ee?ee[0]:","+this.raw("between","beforeOpen");this.selector=Z.join(ae)}};var rule=Rule$3;Rule$3.default=Rule$3,Container$3.registerRule(Rule$3);let Declaration$2=declaration,tokenizer=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule;const SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0};function findLastWithPosition(ie){for(let Z=ie.length-1;Z>=0;Z--){let ee=ie[Z],ae=ee[3]||ee[2];if(ae)return ae}}let Parser$1=class{constructor(Z){this.input=Z,this.root=new Root$4,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:Z,start:{column:1,line:1,offset:0}}}atrule(Z){let ee=new AtRule$2;ee.name=Z[1].slice(1),ee.name===""&&this.unnamedAtrule(ee,Z),this.init(ee,Z[2]);let ae,ye,ve,be=!1,Qe=!1,Xe=[],Je=[];for(;!this.tokenizer.endOfFile();){if(Z=this.tokenizer.nextToken(),ae=Z[0],ae==="("||ae==="["?Je.push(ae==="("?")":"]"):ae==="{"&&Je.length>0?Je.push("}"):ae===Je[Je.length-1]&&Je.pop(),Je.length===0)if(ae===";"){ee.source.end=this.getPosition(Z[2]),ee.source.end.offset++,this.semicolon=!0;break}else if(ae==="{"){Qe=!0;break}else if(ae==="}"){if(Xe.length>0){for(ve=Xe.length-1,ye=Xe[ve];ye&&ye[0]==="space";)ye=Xe[--ve];ye&&(ee.source.end=this.getPosition(ye[3]||ye[2]),ee.source.end.offset++)}this.end(Z);break}else Xe.push(Z);else Xe.push(Z);if(this.tokenizer.endOfFile()){be=!0;break}}ee.raws.between=this.spacesAndCommentsFromEnd(Xe),Xe.length?(ee.raws.afterName=this.spacesAndCommentsFromStart(Xe),this.raw(ee,"params",Xe),be&&(Z=Xe[Xe.length-1],ee.source.end=this.getPosition(Z[3]||Z[2]),ee.source.end.offset++,this.spaces=ee.raws.between,ee.raws.between="")):(ee.raws.afterName="",ee.params=""),Qe&&(ee.nodes=[],this.current=ee)}checkMissedSemicolon(Z){let ee=this.colon(Z);if(ee===!1)return;let ae=0,ye;for(let ve=ee-1;ve>=0&&(ye=Z[ve],!(ye[0]!=="space"&&(ae+=1,ae===2)));ve--);throw this.input.error("Missed semicolon",ye[0]==="word"?ye[3]+1:ye[2])}colon(Z){let ee=0,ae,ye,ve;for(let[be,Qe]of Z.entries()){if(ae=Qe,ye=ae[0],ye==="("&&(ee+=1),ye===")"&&(ee-=1),ee===0&&ye===":")if(!ve)this.doubleColon(ae);else{if(ve[0]==="word"&&ve[1]==="progid")continue;return be}ve=ae}return!1}comment(Z){let ee=new Comment$2;this.init(ee,Z[2]),ee.source.end=this.getPosition(Z[3]||Z[2]),ee.source.end.offset++;let ae=Z[1].slice(2,-2);if(/^\s*$/.test(ae))ee.text="",ee.raws.left=ae,ee.raws.right="";else{let ye=ae.match(/^(\s*)([^]*\S)(\s*)$/);ee.text=ye[2],ee.raws.left=ye[1],ee.raws.right=ye[3]}}createTokenizer(){this.tokenizer=tokenizer(this.input)}decl(Z,ee){let ae=new Declaration$2;this.init(ae,Z[0][2]);let ye=Z[Z.length-1];for(ye[0]===";"&&(this.semicolon=!0,Z.pop()),ae.source.end=this.getPosition(ye[3]||ye[2]||findLastWithPosition(Z)),ae.source.end.offset++;Z[0][0]!=="word";)Z.length===1&&this.unknownWord(Z),ae.raws.before+=Z.shift()[1];for(ae.source.start=this.getPosition(Z[0][2]),ae.prop="";Z.length;){let Je=Z[0][0];if(Je===":"||Je==="space"||Je==="comment")break;ae.prop+=Z.shift()[1]}ae.raws.between="";let ve;for(;Z.length;)if(ve=Z.shift(),ve[0]===":"){ae.raws.between+=ve[1];break}else ve[0]==="word"&&/\w/.test(ve[1])&&this.unknownWord([ve]),ae.raws.between+=ve[1];(ae.prop[0]==="_"||ae.prop[0]==="*")&&(ae.raws.before+=ae.prop[0],ae.prop=ae.prop.slice(1));let be=[],Qe;for(;Z.length&&(Qe=Z[0][0],!(Qe!=="space"&&Qe!=="comment"));)be.push(Z.shift());this.precheckMissedSemicolon(Z);for(let Je=Z.length-1;Je>=0;Je--){if(ve=Z[Je],ve[1].toLowerCase()==="!important"){ae.important=!0;let tt=this.stringFrom(Z,Je);tt=this.spacesFromEnd(Z)+tt,tt!==" !important"&&(ae.raws.important=tt);break}else if(ve[1].toLowerCase()==="important"){let tt=Z.slice(0),it="";for(let st=Je;st>0;st--){let lt=tt[st][0];if(it.trim().indexOf("!")===0&&lt!=="space")break;it=tt.pop()[1]+it}it.trim().indexOf("!")===0&&(ae.important=!0,ae.raws.important=it,Z=tt)}if(ve[0]!=="space"&&ve[0]!=="comment")break}Z.some(Je=>Je[0]!=="space"&&Je[0]!=="comment")&&(ae.raws.between+=be.map(Je=>Je[1]).join(""),be=[]),this.raw(ae,"value",be.concat(Z),ee),ae.value.includes(":")&&!ee&&this.checkMissedSemicolon(Z)}doubleColon(Z){throw this.input.error("Double colon",{offset:Z[2]},{offset:Z[2]+Z[1].length})}emptyRule(Z){let ee=new Rule$2;this.init(ee,Z[2]),ee.selector="",ee.raws.between="",this.current=ee}end(Z){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(Z[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(Z)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(Z){if(this.spaces+=Z[1],this.current.nodes){let ee=this.current.nodes[this.current.nodes.length-1];ee&&ee.type==="rule"&&!ee.raws.ownSemicolon&&(ee.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(Z){let ee=this.input.fromOffset(Z);return{column:ee.col,line:ee.line,offset:Z}}init(Z,ee){this.current.push(Z),Z.source={input:this.input,start:this.getPosition(ee)},Z.raws.before=this.spaces,this.spaces="",Z.type!=="comment"&&(this.semicolon=!1)}other(Z){let ee=!1,ae=null,ye=!1,ve=null,be=[],Qe=Z[1].startsWith("--"),Xe=[],Je=Z;for(;Je;){if(ae=Je[0],Xe.push(Je),ae==="("||ae==="[")ve||(ve=Je),be.push(ae==="("?")":"]");else if(Qe&&ye&&ae==="{")ve||(ve=Je),be.push("}");else if(be.length===0)if(ae===";")if(ye){this.decl(Xe,Qe);return}else break;else if(ae==="{"){this.rule(Xe);return}else if(ae==="}"){this.tokenizer.back(Xe.pop()),ee=!0;break}else ae===":"&&(ye=!0);else ae===be[be.length-1]&&(be.pop(),be.length===0&&(ve=null));Je=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(ee=!0),be.length>0&&this.unclosedBracket(ve),ee&&ye){if(!Qe)for(;Xe.length&&(Je=Xe[Xe.length-1][0],!(Je!=="space"&&Je!=="comment"));)this.tokenizer.back(Xe.pop());this.decl(Xe,Qe)}else this.unknownWord(Xe)}parse(){let Z;for(;!this.tokenizer.endOfFile();)switch(Z=this.tokenizer.nextToken(),Z[0]){case"space":this.spaces+=Z[1];break;case";":this.freeSemicolon(Z);break;case"}":this.end(Z);break;case"comment":this.comment(Z);break;case"at-word":this.atrule(Z);break;case"{":this.emptyRule(Z);break;default:this.other(Z);break}this.endFile()}precheckMissedSemicolon(){}raw(Z,ee,ae,ye){let ve,be,Qe=ae.length,Xe="",Je=!0,tt,it;for(let st=0;st<Qe;st+=1)ve=ae[st],be=ve[0],be==="space"&&st===Qe-1&&!ye?Je=!1:be==="comment"?(it=ae[st-1]?ae[st-1][0]:"empty",tt=ae[st+1]?ae[st+1][0]:"empty",!SAFE_COMMENT_NEIGHBOR[it]&&!SAFE_COMMENT_NEIGHBOR[tt]?Xe.slice(-1)===","?Je=!1:Xe+=ve[1]:Je=!1):Xe+=ve[1];if(!Je){let st=ae.reduce((lt,ct)=>lt+ct[1],"");Z.raws[ee]={raw:st,value:Xe}}Z[ee]=Xe}rule(Z){Z.pop();let ee=new Rule$2;this.init(ee,Z[0][2]),ee.raws.between=this.spacesAndCommentsFromEnd(Z),this.raw(ee,"selector",Z),this.current=ee}spacesAndCommentsFromEnd(Z){let ee,ae="";for(;Z.length&&(ee=Z[Z.length-1][0],!(ee!=="space"&&ee!=="comment"));)ae=Z.pop()[1]+ae;return ae}spacesAndCommentsFromStart(Z){let ee,ae="";for(;Z.length&&(ee=Z[0][0],!(ee!=="space"&&ee!=="comment"));)ae+=Z.shift()[1];return ae}spacesFromEnd(Z){let ee,ae="";for(;Z.length&&(ee=Z[Z.length-1][0],ee==="space");)ae=Z.pop()[1]+ae;return ae}stringFrom(Z,ee){let ae="";for(let ye=ee;ye<Z.length;ye++)ae+=Z[ye][1];return Z.splice(ee,Z.length-ee),ae}unclosedBlock(){let Z=this.current.source.start;throw this.input.error("Unclosed block",Z.line,Z.column)}unclosedBracket(Z){throw this.input.error("Unclosed bracket",{offset:Z[2]},{offset:Z[2]+1})}unexpectedClose(Z){throw this.input.error("Unexpected }",{offset:Z[2]},{offset:Z[2]+1})}unknownWord(Z){throw this.input.error("Unknown word",{offset:Z[0][2]},{offset:Z[0][2]+Z[0][1].length})}unnamedAtrule(Z,ee){throw this.input.error("At-rule without name",{offset:ee[2]},{offset:ee[2]+ee[1].length})}};var parser$1=Parser$1;let Container$2=container,Parser=parser$1,Input$2=input;function parse$7(ie,Z){let ee=new Input$2(ie,Z),ae=new Parser(ee);try{ae.parse()}catch(ye){throw process.env.NODE_ENV!=="production"&&ye.name==="CssSyntaxError"&&Z&&Z.from&&(/\.scss$/i.test(Z.from)?ye.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(Z.from)?ye.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(Z.from)&&(ye.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),ye}return ae.root}var parse_1=parse$7;parse$7.default=parse$7,Container$2.registerParse(parse$7);let{isClean,my}=symbols,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1,warnOnce$1=warnOnce$2,Result$2=result,parse$6=parse_1,Root$3=root;const TYPE_TO_CLASS_NAME={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0;function isPromise$1(ie){return typeof ie=="object"&&typeof ie.then=="function"}function getEvents(ie){let Z=!1,ee=TYPE_TO_CLASS_NAME[ie.type];return ie.type==="decl"?Z=ie.prop.toLowerCase():ie.type==="atrule"&&(Z=ie.name.toLowerCase()),Z&&ie.append?[ee,ee+"-"+Z,CHILDREN,ee+"Exit",ee+"Exit-"+Z]:Z?[ee,ee+"-"+Z,ee+"Exit",ee+"Exit-"+Z]:ie.append?[ee,CHILDREN,ee+"Exit"]:[ee,ee+"Exit"]}function toStack(ie){let Z;return ie.type==="document"?Z=["Document",CHILDREN,"DocumentExit"]:ie.type==="root"?Z=["Root",CHILDREN,"RootExit"]:Z=getEvents(ie),{eventIndex:0,events:Z,iterator:0,node:ie,visitorIndex:0,visitors:[]}}function cleanMarks(ie){return ie[isClean]=!1,ie.nodes&&ie.nodes.forEach(Z=>cleanMarks(Z)),ie}let postcss$1={},LazyResult$2=class mb{constructor(Z,ee,ae){this.stringified=!1,this.processed=!1;let ye;if(typeof ee=="object"&&ee!==null&&(ee.type==="root"||ee.type==="document"))ye=cleanMarks(ee);else if(ee instanceof mb||ee instanceof Result$2)ye=cleanMarks(ee.root),ee.map&&(typeof ae.map>"u"&&(ae.map={}),ae.map.inline||(ae.map.inline=!1),ae.map.prev=ee.map);else{let ve=parse$6;ae.syntax&&(ve=ae.syntax.parse),ae.parser&&(ve=ae.parser),ve.parse&&(ve=ve.parse);try{ye=ve(ee,ae)}catch(be){this.processed=!0,this.error=be}ye&&!ye[my]&&Container$1.rebuild(ye)}this.result=new Result$2(Z,ye,ae),this.helpers={...postcss$1,postcss:postcss$1,result:this.result},this.plugins=this.processor.plugins.map(ve=>typeof ve=="object"&&ve.prepare?{...ve,...ve.prepare(this.result)}:ve)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(Z){return this.async().catch(Z)}finally(Z){return this.async().then(Z,Z)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(Z,ee){let ae=this.result.lastPlugin;try{if(ee&&ee.addToError(Z),this.error=Z,Z.name==="CssSyntaxError"&&!Z.plugin)Z.plugin=ae.postcssPlugin,Z.setMessage();else if(ae.postcssVersion&&process.env.NODE_ENV!=="production"){let ye=ae.postcssPlugin,ve=ae.postcssVersion,be=this.result.processor.version,Qe=ve.split("."),Xe=be.split(".");(Qe[0]!==Xe[0]||parseInt(Qe[1])>parseInt(Xe[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+be+", but "+ye+" uses "+ve+". Perhaps this is the source of the error below.")}}catch(ye){console&&console.error&&console.error(ye)}return Z}prepareVisitors(){this.listeners={};let Z=(ee,ae,ye)=>{this.listeners[ae]||(this.listeners[ae]=[]),this.listeners[ae].push([ee,ye])};for(let ee of this.plugins)if(typeof ee=="object")for(let ae in ee){if(!PLUGIN_PROPS[ae]&&/^[A-Z]/.test(ae))throw new Error(`Unknown event ${ae} in ${ee.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS[ae])if(typeof ee[ae]=="object")for(let ye in ee[ae])ye==="*"?Z(ee,ae,ee[ae][ye]):Z(ee,ae+"-"+ye.toLowerCase(),ee[ae][ye]);else typeof ee[ae]=="function"&&Z(ee,ae,ee[ae])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let Z=0;Z<this.plugins.length;Z++){let ee=this.plugins[Z],ae=this.runOnRoot(ee);if(isPromise$1(ae))try{await ae}catch(ye){throw this.handleError(ye)}}if(this.prepareVisitors(),this.hasListener){let Z=this.result.root;for(;!Z[isClean];){Z[isClean]=!0;let ee=[toStack(Z)];for(;ee.length>0;){let ae=this.visitTick(ee);if(isPromise$1(ae))try{await ae}catch(ye){let ve=ee[ee.length-1].node;throw this.handleError(ye,ve)}}}if(this.listeners.OnceExit)for(let[ee,ae]of this.listeners.OnceExit){this.result.lastPlugin=ee;try{if(Z.type==="document"){let ye=Z.nodes.map(ve=>ae(ve,this.helpers));await Promise.all(ye)}else await ae(Z,this.helpers)}catch(ye){throw this.handleError(ye)}}}return this.processed=!0,this.stringify()}runOnRoot(Z){this.result.lastPlugin=Z;try{if(typeof Z=="object"&&Z.Once){if(this.result.root.type==="document"){let ee=this.result.root.nodes.map(ae=>Z.Once(ae,this.helpers));return isPromise$1(ee[0])?Promise.all(ee):ee}return Z.Once(this.result.root,this.helpers)}else if(typeof Z=="function")return Z(this.result.root,this.result)}catch(ee){throw this.handleError(ee)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let Z=this.result.opts,ee=stringify$2;Z.syntax&&(ee=Z.syntax.stringify),Z.stringifier&&(ee=Z.stringifier),ee.stringify&&(ee=ee.stringify);let ye=new MapGenerator$1(ee,this.result.root,this.result.opts).generate();return this.result.css=ye[0],this.result.map=ye[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let Z of this.plugins){let ee=this.runOnRoot(Z);if(isPromise$1(ee))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let Z=this.result.root;for(;!Z[isClean];)Z[isClean]=!0,this.walkSync(Z);if(this.listeners.OnceExit)if(Z.type==="document")for(let ee of Z.nodes)this.visitSync(this.listeners.OnceExit,ee);else this.visitSync(this.listeners.OnceExit,Z)}return this.result}then(Z,ee){return process.env.NODE_ENV!=="production"&&("from"in this.opts||warnOnce$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(Z,ee)}toString(){return this.css}visitSync(Z,ee){for(let[ae,ye]of Z){this.result.lastPlugin=ae;let ve;try{ve=ye(ee,this.helpers)}catch(be){throw this.handleError(be,ee.proxyOf)}if(ee.type!=="root"&&ee.type!=="document"&&!ee.parent)return!0;if(isPromise$1(ve))throw this.getAsyncError()}}visitTick(Z){let ee=Z[Z.length-1],{node:ae,visitors:ye}=ee;if(ae.type!=="root"&&ae.type!=="document"&&!ae.parent){Z.pop();return}if(ye.length>0&&ee.visitorIndex<ye.length){let[be,Qe]=ye[ee.visitorIndex];ee.visitorIndex+=1,ee.visitorIndex===ye.length&&(ee.visitors=[],ee.visitorIndex=0),this.result.lastPlugin=be;try{return Qe(ae.toProxy(),this.helpers)}catch(Xe){throw this.handleError(Xe,ae)}}if(ee.iterator!==0){let be=ee.iterator,Qe;for(;Qe=ae.nodes[ae.indexes[be]];)if(ae.indexes[be]+=1,!Qe[isClean]){Qe[isClean]=!0,Z.push(toStack(Qe));return}ee.iterator=0,delete ae.indexes[be]}let ve=ee.events;for(;ee.eventIndex<ve.length;){let be=ve[ee.eventIndex];if(ee.eventIndex+=1,be===CHILDREN){ae.nodes&&ae.nodes.length&&(ae[isClean]=!0,ee.iterator=ae.getIterator());return}else if(this.listeners[be]){ee.visitors=this.listeners[be];return}}Z.pop()}walkSync(Z){Z[isClean]=!0;let ee=getEvents(Z);for(let ae of ee)if(ae===CHILDREN)Z.nodes&&Z.each(ye=>{ye[isClean]||this.walkSync(ye)});else{let ye=this.listeners[ae];if(ye&&this.visitSync(ye,Z.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};LazyResult$2.registerPostcss=ie=>{postcss$1=ie};var lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2,Root$3.registerLazyResult(LazyResult$2),Document$2.registerLazyResult(LazyResult$2);let MapGenerator=mapGenerator,stringify$1=stringify_1,warnOnce=warnOnce$2,parse$5=parse_1;const Result$1=result;let NoWorkResult$1=class{constructor(Z,ee,ae){ee=ee.toString(),this.stringified=!1,this._processor=Z,this._css=ee,this._opts=ae,this._map=void 0;let ye,ve=stringify$1;this.result=new Result$1(this._processor,ye,this._opts),this.result.css=ee;let be=this;Object.defineProperty(this.result,"root",{get(){return be.root}});let Qe=new MapGenerator(ve,ye,this._opts,ee);if(Qe.isMap()){let[Xe,Je]=Qe.generate();Xe&&(this.result.css=Xe),Je&&(this.result.map=Je)}else Qe.clearAnnotation(),this.result.css=Qe.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(Z){return this.async().catch(Z)}finally(Z){return this.async().then(Z,Z)}sync(){if(this.error)throw this.error;return this.result}then(Z,ee){return process.env.NODE_ENV!=="production"&&("from"in this._opts||warnOnce("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(Z,ee)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let Z,ee=parse$5;try{Z=ee(this._css,this._opts)}catch(ae){this.error=ae}if(this.error)throw this.error;return this._root=Z,Z}get[Symbol.toStringTag](){return"NoWorkResult"}};var noWorkResult=NoWorkResult$1;NoWorkResult$1.default=NoWorkResult$1;let NoWorkResult=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1,Root$2=root,Processor$1=class{constructor(Z=[]){this.version="8.4.33",this.plugins=this.normalize(Z)}normalize(Z){let ee=[];for(let ae of Z)if(ae.postcss===!0?ae=ae():ae.postcss&&(ae=ae.postcss),typeof ae=="object"&&Array.isArray(ae.plugins))ee=ee.concat(ae.plugins);else if(typeof ae=="object"&&ae.postcssPlugin)ee.push(ae);else if(typeof ae=="function")ee.push(ae);else if(typeof ae=="object"&&(ae.parse||ae.stringify)){if(process.env.NODE_ENV!=="production")throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}else throw new Error(ae+" is not a PostCSS plugin");return ee}process(Z,ee={}){return!this.plugins.length&&!ee.parser&&!ee.stringifier&&!ee.syntax?new NoWorkResult(this,Z,ee):new LazyResult$1(this,Z,ee)}use(Z){return this.plugins=this.plugins.concat(this.normalize([Z])),this}};var processor=Processor$1;Processor$1.default=Processor$1,Root$2.registerProcessor(Processor$1),Document$1.registerProcessor(Processor$1);let Declaration$1=declaration,PreviousMap=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule;function fromJSON$1(ie,Z){if(Array.isArray(ie))return ie.map(ye=>fromJSON$1(ye));let{inputs:ee,...ae}=ie;if(ee){Z=[];for(let ye of ee){let ve={...ye,__proto__:Input$1.prototype};ve.map&&(ve.map={...ve.map,__proto__:PreviousMap.prototype}),Z.push(ve)}}if(ae.nodes&&(ae.nodes=ie.nodes.map(ye=>fromJSON$1(ye,Z))),ae.source){let{inputId:ye,...ve}=ae.source;ae.source=ve,ye!=null&&(ae.source.input=Z[ye])}if(ae.type==="root")return new Root$1(ae);if(ae.type==="decl")return new Declaration$1(ae);if(ae.type==="rule")return new Rule$1(ae);if(ae.type==="comment")return new Comment$1(ae);if(ae.type==="atrule")return new AtRule$1(ae);throw new Error("Unknown node type: "+ie.type)}var fromJSON_1=fromJSON$1;fromJSON$1.default=fromJSON$1;let CssSyntaxError=cssSyntaxError,Declaration=declaration,LazyResult=lazyResult,Container=container,Processor=processor,stringify=stringify_1,fromJSON=fromJSON_1,Document=document$1,Warning=warning,Comment=comment,AtRule=atRule,Result=result,Input=input,parse$4=parse_1,list=list_1,Rule=rule,Root=root,Node$1=node;function postcss(...ie){return ie.length===1&&Array.isArray(ie[0])&&(ie=ie[0]),new Processor(ie)}postcss.plugin=function(Z,ee){let ae=!1;function ye(...be){console&&console.warn&&!ae&&(ae=!0,console.warn(Z+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(Z+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let Qe=ee(...be);return Qe.postcssPlugin=Z,Qe.postcssVersion=new Processor().version,Qe}let ve;return Object.defineProperty(ye,"postcss",{get(){return ve||(ve=ye()),ve}}),ye.process=function(be,Qe,Xe){return postcss([ye(Xe)]).process(be,Qe)},ye},postcss.stringify=stringify,postcss.parse=parse$4,postcss.fromJSON=fromJSON,postcss.list=list,postcss.comment=ie=>new Comment(ie),postcss.atRule=ie=>new AtRule(ie),postcss.decl=ie=>new Declaration(ie),postcss.rule=ie=>new Rule(ie),postcss.root=ie=>new Root(ie),postcss.document=ie=>new Document(ie),postcss.CssSyntaxError=CssSyntaxError,postcss.Declaration=Declaration,postcss.Container=Container,postcss.Processor=Processor,postcss.Document=Document,postcss.Comment=Comment,postcss.Warning=Warning,postcss.AtRule=AtRule,postcss.Result=Result,postcss.Input=Input,postcss.Rule=Rule,postcss.Root=Root,postcss.Node=Node$1,LazyResult.registerPostcss(postcss);var postcss_1=postcss;postcss.default=postcss;const htmlparser=lib$5,escapeStringRegexp=escapeStringRegexp$1,{isPlainObject}=isPlainObject$2,deepmerge=cjs,parseSrcset=parseSrcsetExports,{parse:postcssParse}=postcss_1,mediaTags=["img","audio","video","picture","svg","object","map","iframe","embed"],vulnerableTags=["script","style"];function each(ie,Z){ie&&Object.keys(ie).forEach(function(ee){Z(ie[ee],ee)})}function has(ie,Z){return{}.hasOwnProperty.call(ie,Z)}function filter(ie,Z){const ee=[];return each(ie,function(ae){Z(ae)&&ee.push(ae)}),ee}function isEmptyObject(ie){for(const Z in ie)if(has(ie,Z))return!1;return!0}function stringifySrcset(ie){return ie.map(function(Z){if(!Z.url)throw new Error("URL missing");return Z.url+(Z.w?` ${Z.w}w`:"")+(Z.h?` ${Z.h}h`:"")+(Z.d?` ${Z.d}x`:"")}).join(", ")}var sanitizeHtml_1=sanitizeHtml;const VALID_HTML_ATTRIBUTE_NAME=/^[^\0\t\n\f\r /<=>]+$/;function sanitizeHtml(ie,Z,ee){if(ie==null)return"";typeof ie=="number"&&(ie=ie.toString());let ae="",ye="";function ve(yi,Ti){const Ii=this;this.tag=yi,this.attribs=Ti||{},this.tagPosition=ae.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(ut.length){const Ri=ut[ut.length-1];Ri.text+=Ii.text}},this.updateParentNodeMediaChildren=function(){ut.length&&mediaTags.includes(this.tag)&&ut[ut.length-1].mediaChildren.push(this.tag)}}Z=Object.assign({},sanitizeHtml.defaults,Z),Z.parser=Object.assign({},htmlParserDefaults,Z.parser);const be=function(yi){return Z.allowedTags===!1||(Z.allowedTags||[]).indexOf(yi)>-1};vulnerableTags.forEach(function(yi){be(yi)&&!Z.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${yi}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const Qe=Z.nonTextTags||["script","style","textarea","option"];let Xe,Je;Z.allowedAttributes&&(Xe={},Je={},each(Z.allowedAttributes,function(yi,Ti){Xe[Ti]=[];const Ii=[];yi.forEach(function(Ri){typeof Ri=="string"&&Ri.indexOf("*")>=0?Ii.push(escapeStringRegexp(Ri).replace(/\\\*/g,".*")):Xe[Ti].push(Ri)}),Ii.length&&(Je[Ti]=new RegExp("^("+Ii.join("|")+")$"))}));const tt={},it={},st={};each(Z.allowedClasses,function(yi,Ti){if(Xe&&(has(Xe,Ti)||(Xe[Ti]=[]),Xe[Ti].push("class")),tt[Ti]=yi,Array.isArray(yi)){const Ii=[];tt[Ti]=[],st[Ti]=[],yi.forEach(function(Ri){typeof Ri=="string"&&Ri.indexOf("*")>=0?Ii.push(escapeStringRegexp(Ri).replace(/\\\*/g,".*")):Ri instanceof RegExp?st[Ti].push(Ri):tt[Ti].push(Ri)}),Ii.length&&(it[Ti]=new RegExp("^("+Ii.join("|")+")$"))}});const lt={};let ct;each(Z.transformTags,function(yi,Ti){let Ii;typeof yi=="function"?Ii=yi:typeof yi=="string"&&(Ii=sanitizeHtml.simpleTransform(yi)),Ti==="*"?ct=Ii:lt[Ti]=Ii});let gt,ut,mt,ei,ni,ri,si=!1;ai();const li=new htmlparser.Parser({onopentag:function(yi,Ti){if(Z.enforceHtmlBoundary&&yi==="html"&&ai(),ni){ri++;return}const Ii=new ve(yi,Ti);ut.push(Ii);let Ri=!1;const Pi=!!Ii.text;let xi;if(has(lt,yi)&&(xi=lt[yi](yi,Ti),Ii.attribs=Ti=xi.attribs,xi.text!==void 0&&(Ii.innerText=xi.text),yi!==xi.tagName&&(Ii.name=yi=xi.tagName,ei[gt]=xi.tagName)),ct&&(xi=ct(yi,Ti),Ii.attribs=Ti=xi.attribs,yi!==xi.tagName&&(Ii.name=yi=xi.tagName,ei[gt]=xi.tagName)),(!be(yi)||Z.disallowedTagsMode==="recursiveEscape"&&!isEmptyObject(mt)||Z.nestingLimit!=null&&gt>=Z.nestingLimit)&&(Ri=!0,mt[gt]=!0,Z.disallowedTagsMode==="discard"&&Qe.indexOf(yi)!==-1&&(ni=!0,ri=1),mt[gt]=!0),gt++,Ri){if(Z.disallowedTagsMode==="discard")return;ye=ae,ae=""}ae+="<"+yi,yi==="script"&&(Z.allowedScriptHostnames||Z.allowedScriptDomains)&&(Ii.innerText=""),(!Xe||has(Xe,yi)||Xe["*"])&&each(Ti,function(ki,Li){if(!VALID_HTML_ATTRIBUTE_NAME.test(Li)){delete Ii.attribs[Li];return}if(ki===""&&(Z.nonBooleanAttributes.includes(Li)||Z.nonBooleanAttributes.includes("*"))){delete Ii.attribs[Li];return}let Yr=!1;if(!Xe||has(Xe,yi)&&Xe[yi].indexOf(Li)!==-1||Xe["*"]&&Xe["*"].indexOf(Li)!==-1||has(Je,yi)&&Je[yi].test(Li)||Je["*"]&&Je["*"].test(Li))Yr=!0;else if(Xe&&Xe[yi]){for(const Ui of Xe[yi])if(isPlainObject(Ui)&&Ui.name&&Ui.name===Li){Yr=!0;let Vi="";if(Ui.multiple===!0){const Kr=ki.split(" ");for(const Wi of Kr)Ui.values.indexOf(Wi)!==-1&&(Vi===""?Vi=Wi:Vi+=" "+Wi)}else Ui.values.indexOf(ki)>=0&&(Vi=ki);ki=Vi}}if(Yr){if(Z.allowedSchemesAppliedToAttributes.indexOf(Li)!==-1&&Ci(yi,ki)){delete Ii.attribs[Li];return}if(yi==="script"&&Li==="src"){let Ui=!0;try{const Vi=pi(ki);if(Z.allowedScriptHostnames||Z.allowedScriptDomains){const Kr=(Z.allowedScriptHostnames||[]).find(function(Zr){return Zr===Vi.url.hostname}),Wi=(Z.allowedScriptDomains||[]).find(function(Zr){return Vi.url.hostname===Zr||Vi.url.hostname.endsWith(`.${Zr}`)});Ui=Kr||Wi}}catch{Ui=!1}if(!Ui){delete Ii.attribs[Li];return}}if(yi==="iframe"&&Li==="src"){let Ui=!0;try{const Vi=pi(ki);if(Vi.isRelativeUrl)Ui=has(Z,"allowIframeRelativeUrls")?Z.allowIframeRelativeUrls:!Z.allowedIframeHostnames&&!Z.allowedIframeDomains;else if(Z.allowedIframeHostnames||Z.allowedIframeDomains){const Kr=(Z.allowedIframeHostnames||[]).find(function(Zr){return Zr===Vi.url.hostname}),Wi=(Z.allowedIframeDomains||[]).find(function(Zr){return Vi.url.hostname===Zr||Vi.url.hostname.endsWith(`.${Zr}`)});Ui=Kr||Wi}}catch{Ui=!1}if(!Ui){delete Ii.attribs[Li];return}}if(Li==="srcset")try{let Ui=parseSrcset(ki);if(Ui.forEach(function(Vi){Ci("srcset",Vi.url)&&(Vi.evil=!0)}),Ui=filter(Ui,function(Vi){return!Vi.evil}),Ui.length)ki=stringifySrcset(filter(Ui,function(Vi){return!Vi.evil})),Ii.attribs[Li]=ki;else{delete Ii.attribs[Li];return}}catch{delete Ii.attribs[Li];return}if(Li==="class"){const Ui=tt[yi],Vi=tt["*"],Kr=it[yi],Wi=st[yi],Zr=it["*"],ps=[Kr,Zr].concat(Wi).filter(function(Is){return Is});if(Ui&&Vi?ki=Mi(ki,deepmerge(Ui,Vi),ps):ki=Mi(ki,Ui||Vi,ps),!ki.length){delete Ii.attribs[Li];return}}if(Li==="style"){if(Z.parseStyleAttributes)try{const Ui=postcssParse(yi+" {"+ki+"}"),Vi=gi(Ui,Z.allowedStyles);if(ki=_i(Vi),ki.length===0){delete Ii.attribs[Li];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+yi+" {"+ki+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete Ii.attribs[Li];return}else if(Z.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}ae+=" "+Li,ki&&ki.length&&(ae+='="'+ci(ki,!0)+'"')}else delete Ii.attribs[Li]}),Z.selfClosing.indexOf(yi)!==-1?ae+=" />":(ae+=">",Ii.innerText&&!Pi&&!Z.textFilter&&(ae+=ci(Ii.innerText),si=!0)),Ri&&(ae=ye+ci(ae),ye="")},ontext:function(yi){if(ni)return;const Ti=ut[ut.length-1];let Ii;if(Ti&&(Ii=Ti.tag,yi=Ti.innerText!==void 0?Ti.innerText:yi),Z.disallowedTagsMode==="discard"&&(Ii==="script"||Ii==="style"))ae+=yi;else{const Ri=ci(yi,!1);Z.textFilter&&!si?ae+=Z.textFilter(Ri,Ii):si||(ae+=Ri)}if(ut.length){const Ri=ut[ut.length-1];Ri.text+=yi}},onclosetag:function(yi,Ti){if(ni)if(ri--,!ri)ni=!1;else return;const Ii=ut.pop();if(!Ii)return;if(Ii.tag!==yi){ut.push(Ii);return}ni=Z.enforceHtmlBoundary?yi==="html":!1,gt--;const Ri=mt[gt];if(Ri){if(delete mt[gt],Z.disallowedTagsMode==="discard"){Ii.updateParentNodeText();return}ye=ae,ae=""}if(ei[gt]&&(yi=ei[gt],delete ei[gt]),Z.exclusiveFilter&&Z.exclusiveFilter(Ii)){ae=ae.substr(0,Ii.tagPosition);return}if(Ii.updateParentNodeMediaChildren(),Ii.updateParentNodeText(),Z.selfClosing.indexOf(yi)!==-1||Ti&&!be(yi)&&["escape","recursiveEscape"].indexOf(Z.disallowedTagsMode)>=0){Ri&&(ae=ye,ye="");return}ae+="</"+yi+">",Ri&&(ae=ye+ci(ae),ye=""),si=!1}},Z.parser);return li.write(ie),li.end(),ae;function ai(){ae="",gt=0,ut=[],mt={},ei={},ni=!1,ri=0}function ci(yi,Ti){return typeof yi!="string"&&(yi=yi+""),Z.parser.decodeEntities&&(yi=yi.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ti&&(yi=yi.replace(/"/g,"&quot;"))),yi=yi.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ti&&(yi=yi.replace(/"/g,"&quot;")),yi}function Ci(yi,Ti){for(Ti=Ti.replace(/[\x00-\x20]+/g,"");;){const Pi=Ti.indexOf("<!--");if(Pi===-1)break;const xi=Ti.indexOf("-->",Pi+4);if(xi===-1)break;Ti=Ti.substring(0,Pi)+Ti.substring(xi+3)}const Ii=Ti.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!Ii)return Ti.match(/^[/\\]{2}/)?!Z.allowProtocolRelative:!1;const Ri=Ii[1].toLowerCase();return has(Z.allowedSchemesByTag,yi)?Z.allowedSchemesByTag[yi].indexOf(Ri)===-1:!Z.allowedSchemes||Z.allowedSchemes.indexOf(Ri)===-1}function pi(yi){if(yi=yi.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),yi.startsWith("relative:"))throw new Error("relative: exploit attempt");let Ti="relative://relative-site";for(let Pi=0;Pi<100;Pi++)Ti+=`/${Pi}`;const Ii=new URL(yi,Ti);return{isRelativeUrl:Ii&&Ii.hostname==="relative-site"&&Ii.protocol==="relative:",url:Ii}}function gi(yi,Ti){if(!Ti)return yi;const Ii=yi.nodes[0];let Ri;return Ti[Ii.selector]&&Ti["*"]?Ri=deepmerge(Ti[Ii.selector],Ti["*"]):Ri=Ti[Ii.selector]||Ti["*"],Ri&&(yi.nodes[0].nodes=Ii.nodes.reduce(bi(Ri),[])),yi}function _i(yi){return yi.nodes[0].nodes.reduce(function(Ti,Ii){return Ti.push(`${Ii.prop}:${Ii.value}${Ii.important?" !important":""}`),Ti},[]).join(";")}function bi(yi){return function(Ti,Ii){return has(yi,Ii.prop)&&yi[Ii.prop].some(function(Pi){return Pi.test(Ii.value)})&&Ti.push(Ii),Ti}}function Mi(yi,Ti,Ii){return Ti?(yi=yi.split(/\s+/),yi.filter(function(Ri){return Ti.indexOf(Ri)!==-1||Ii.some(function(Pi){return Pi.test(Ri)})}).join(" ")):yi}}const htmlParserDefaults={decodeEntities:!0};sanitizeHtml.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},sanitizeHtml.simpleTransform=function(ie,Z,ee){return ee=ee===void 0?!0:ee,Z=Z||{},function(ae,ye){let ve;if(ee)for(ve in Z)ye[ve]=Z[ve];else ye=Z;return{tagName:ie,attribs:ye}}};const at=getDefaultExportFromCjs$1(sanitizeHtml_1);function getDefaultExportFromCjs(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}var urlToolkit={exports:{}};(function(ie,Z){(function(ee){var ae=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,ye=/^(?=([^\/?#]*))\1([^]*)$/,ve=/(?:\/|^)\.(?=\/)/g,be=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Qe={buildAbsoluteURL:function(Xe,Je,tt){if(tt=tt||{},Xe=Xe.trim(),Je=Je.trim(),!Je){if(!tt.alwaysNormalize)return Xe;var it=Qe.parseURL(Xe);if(!it)throw new Error("Error trying to parse base URL.");return it.path=Qe.normalizePath(it.path),Qe.buildURLFromParts(it)}var st=Qe.parseURL(Je);if(!st)throw new Error("Error trying to parse relative URL.");if(st.scheme)return tt.alwaysNormalize?(st.path=Qe.normalizePath(st.path),Qe.buildURLFromParts(st)):Je;var lt=Qe.parseURL(Xe);if(!lt)throw new Error("Error trying to parse base URL.");if(!lt.netLoc&&lt.path&&lt.path[0]!=="/"){var ct=ye.exec(lt.path);lt.netLoc=ct[1],lt.path=ct[2]}lt.netLoc&&!lt.path&&(lt.path="/");var gt={scheme:lt.scheme,netLoc:st.netLoc,path:null,params:st.params,query:st.query,fragment:st.fragment};if(!st.netLoc&&(gt.netLoc=lt.netLoc,st.path[0]!=="/"))if(!st.path)gt.path=lt.path,st.params||(gt.params=lt.params,st.query||(gt.query=lt.query));else{var ut=lt.path,mt=ut.substring(0,ut.lastIndexOf("/")+1)+st.path;gt.path=Qe.normalizePath(mt)}return gt.path===null&&(gt.path=tt.alwaysNormalize?Qe.normalizePath(st.path):st.path),Qe.buildURLFromParts(gt)},parseURL:function(Xe){var Je=ae.exec(Xe);return Je?{scheme:Je[1]||"",netLoc:Je[2]||"",path:Je[3]||"",params:Je[4]||"",query:Je[5]||"",fragment:Je[6]||""}:null},normalizePath:function(Xe){for(Xe=Xe.split("").reverse().join("").replace(ve,"");Xe.length!==(Xe=Xe.replace(be,"")).length;);return Xe.split("").reverse().join("")},buildURLFromParts:function(Xe){return Xe.scheme+Xe.netLoc+Xe.path+Xe.params+Xe.query+Xe.fragment}};ie.exports=Qe})()})(urlToolkit);var urlToolkitExports=urlToolkit.exports;function ownKeys(ie,Z){var ee=Object.keys(ie);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(ie);Z&&(ae=ae.filter(function(ye){return Object.getOwnPropertyDescriptor(ie,ye).enumerable})),ee.push.apply(ee,ae)}return ee}function _objectSpread2(ie){for(var Z=1;Z<arguments.length;Z++){var ee=arguments[Z]!=null?arguments[Z]:{};Z%2?ownKeys(Object(ee),!0).forEach(function(ae){_defineProperty(ie,ae,ee[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(ee)):ownKeys(Object(ee)).forEach(function(ae){Object.defineProperty(ie,ae,Object.getOwnPropertyDescriptor(ee,ae))})}return ie}function _toPrimitive(ie,Z){if(typeof ie!="object"||!ie)return ie;var ee=ie[Symbol.toPrimitive];if(ee!==void 0){var ae=ee.call(ie,Z||"default");if(typeof ae!="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(ie)}function _toPropertyKey(ie){var Z=_toPrimitive(ie,"string");return typeof Z=="symbol"?Z:String(Z)}function _defineProperty(ie,Z,ee){return Z=_toPropertyKey(Z),Z in ie?Object.defineProperty(ie,Z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):ie[Z]=ee,ie}function _extends(){return _extends=Object.assign?Object.assign.bind():function(ie){for(var Z=1;Z<arguments.length;Z++){var ee=arguments[Z];for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(ie[ae]=ee[ae])}return ie},_extends.apply(this,arguments)}const isFiniteNumber=Number.isFinite||function(ie){return typeof ie=="number"&&isFinite(ie)},isSafeInteger=Number.isSafeInteger||function(ie){return typeof ie=="number"&&Math.abs(ie)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;let Events=function(ie){return ie.MEDIA_ATTACHING="hlsMediaAttaching",ie.MEDIA_ATTACHED="hlsMediaAttached",ie.MEDIA_DETACHING="hlsMediaDetaching",ie.MEDIA_DETACHED="hlsMediaDetached",ie.BUFFER_RESET="hlsBufferReset",ie.BUFFER_CODECS="hlsBufferCodecs",ie.BUFFER_CREATED="hlsBufferCreated",ie.BUFFER_APPENDING="hlsBufferAppending",ie.BUFFER_APPENDED="hlsBufferAppended",ie.BUFFER_EOS="hlsBufferEos",ie.BUFFER_FLUSHING="hlsBufferFlushing",ie.BUFFER_FLUSHED="hlsBufferFlushed",ie.MANIFEST_LOADING="hlsManifestLoading",ie.MANIFEST_LOADED="hlsManifestLoaded",ie.MANIFEST_PARSED="hlsManifestParsed",ie.LEVEL_SWITCHING="hlsLevelSwitching",ie.LEVEL_SWITCHED="hlsLevelSwitched",ie.LEVEL_LOADING="hlsLevelLoading",ie.LEVEL_LOADED="hlsLevelLoaded",ie.LEVEL_UPDATED="hlsLevelUpdated",ie.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",ie.LEVELS_UPDATED="hlsLevelsUpdated",ie.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",ie.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",ie.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",ie.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",ie.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",ie.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",ie.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",ie.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",ie.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",ie.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",ie.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",ie.CUES_PARSED="hlsCuesParsed",ie.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",ie.INIT_PTS_FOUND="hlsInitPtsFound",ie.FRAG_LOADING="hlsFragLoading",ie.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",ie.FRAG_LOADED="hlsFragLoaded",ie.FRAG_DECRYPTED="hlsFragDecrypted",ie.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",ie.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",ie.FRAG_PARSING_METADATA="hlsFragParsingMetadata",ie.FRAG_PARSED="hlsFragParsed",ie.FRAG_BUFFERED="hlsFragBuffered",ie.FRAG_CHANGED="hlsFragChanged",ie.FPS_DROP="hlsFpsDrop",ie.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",ie.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",ie.ERROR="hlsError",ie.DESTROYING="hlsDestroying",ie.KEY_LOADING="hlsKeyLoading",ie.KEY_LOADED="hlsKeyLoaded",ie.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",ie.BACK_BUFFER_REACHED="hlsBackBufferReached",ie.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",ie}({}),ErrorTypes=function(ie){return ie.NETWORK_ERROR="networkError",ie.MEDIA_ERROR="mediaError",ie.KEY_SYSTEM_ERROR="keySystemError",ie.MUX_ERROR="muxError",ie.OTHER_ERROR="otherError",ie}({}),ErrorDetails=function(ie){return ie.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",ie.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",ie.KEY_SYSTEM_NO_SESSION="keySystemNoSession",ie.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",ie.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",ie.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",ie.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",ie.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",ie.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",ie.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",ie.MANIFEST_LOAD_ERROR="manifestLoadError",ie.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",ie.MANIFEST_PARSING_ERROR="manifestParsingError",ie.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",ie.LEVEL_EMPTY_ERROR="levelEmptyError",ie.LEVEL_LOAD_ERROR="levelLoadError",ie.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",ie.LEVEL_PARSING_ERROR="levelParsingError",ie.LEVEL_SWITCH_ERROR="levelSwitchError",ie.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",ie.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",ie.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",ie.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",ie.FRAG_LOAD_ERROR="fragLoadError",ie.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",ie.FRAG_DECRYPT_ERROR="fragDecryptError",ie.FRAG_PARSING_ERROR="fragParsingError",ie.FRAG_GAP="fragGap",ie.REMUX_ALLOC_ERROR="remuxAllocError",ie.KEY_LOAD_ERROR="keyLoadError",ie.KEY_LOAD_TIMEOUT="keyLoadTimeOut",ie.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",ie.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",ie.BUFFER_APPEND_ERROR="bufferAppendError",ie.BUFFER_APPENDING_ERROR="bufferAppendingError",ie.BUFFER_STALLED_ERROR="bufferStalledError",ie.BUFFER_FULL_ERROR="bufferFullError",ie.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",ie.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",ie.INTERNAL_EXCEPTION="internalException",ie.INTERNAL_ABORTED="aborted",ie.UNKNOWN="unknown",ie}({});const noop=function(){},fakeLogger={trace:noop,debug:noop,log:noop,warn:noop,info:noop,error:noop};let exportedLogger=fakeLogger;function consolePrintFn(ie){const Z=self.console[ie];return Z?Z.bind(self.console,`[${ie}] >`):noop}function exportLoggerFunctions(ie,...Z){Z.forEach(function(ee){exportedLogger[ee]=ie[ee]?ie[ee].bind(ie):consolePrintFn(ee)})}function enableLogs(ie,Z){if(typeof console=="object"&&ie===!0||typeof ie=="object"){exportLoggerFunctions(ie,"debug","log","info","warn","error");try{exportedLogger.log(`Debug logs enabled for "${Z}" in hls.js version 1.5.3`)}catch{exportedLogger=fakeLogger}}else exportedLogger=fakeLogger}const logger=exportedLogger,DECIMAL_RESOLUTION_REGEX=/^(\d+)x(\d+)$/,ATTR_LIST_REGEX=/(.+?)=(".*?"|.*?)(?:,|$)/g;class AttrList{constructor(Z){typeof Z=="string"&&(Z=AttrList.parseAttrList(Z)),_extends(this,Z)}get clientAttrs(){return Object.keys(this).filter(Z=>Z.substring(0,2)==="X-")}decimalInteger(Z){const ee=parseInt(this[Z],10);return ee>Number.MAX_SAFE_INTEGER?1/0:ee}hexadecimalInteger(Z){if(this[Z]){let ee=(this[Z]||"0x").slice(2);ee=(ee.length&1?"0":"")+ee;const ae=new Uint8Array(ee.length/2);for(let ye=0;ye<ee.length/2;ye++)ae[ye]=parseInt(ee.slice(ye*2,ye*2+2),16);return ae}else return null}hexadecimalIntegerAsNumber(Z){const ee=parseInt(this[Z],16);return ee>Number.MAX_SAFE_INTEGER?1/0:ee}decimalFloatingPoint(Z){return parseFloat(this[Z])}optionalFloat(Z,ee){const ae=this[Z];return ae?parseFloat(ae):ee}enumeratedString(Z){return this[Z]}bool(Z){return this[Z]==="YES"}decimalResolution(Z){const ee=DECIMAL_RESOLUTION_REGEX.exec(this[Z]);if(ee!==null)return{width:parseInt(ee[1],10),height:parseInt(ee[2],10)}}static parseAttrList(Z){let ee;const ae={},ye='"';for(ATTR_LIST_REGEX.lastIndex=0;(ee=ATTR_LIST_REGEX.exec(Z))!==null;){let ve=ee[2];ve.indexOf(ye)===0&&ve.lastIndexOf(ye)===ve.length-1&&(ve=ve.slice(1,-1));const be=ee[1].trim();ae[be]=ve}return ae}}function isDateRangeCueAttribute(ie){return ie!=="ID"&&ie!=="CLASS"&&ie!=="START-DATE"&&ie!=="DURATION"&&ie!=="END-DATE"&&ie!=="END-ON-NEXT"}function isSCTE35Attribute(ie){return ie==="SCTE35-OUT"||ie==="SCTE35-IN"}class DateRange{constructor(Z,ee){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,ee){const ae=ee.attr;for(const ye in ae)if(Object.prototype.hasOwnProperty.call(Z,ye)&&Z[ye]!==ae[ye]){logger.warn(`DATERANGE tag attribute: "${ye}" does not match for tags with ID: "${Z.ID}"`),this._badValueForSameId=ye;break}Z=_extends(new AttrList({}),ae,Z)}if(this.attr=Z,this._startDate=new Date(Z["START-DATE"]),"END-DATE"in this.attr){const ae=new Date(this.attr["END-DATE"]);isFiniteNumber(ae.getTime())&&(this._endDate=ae)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const Z=this.duration;return Z!==null?new Date(this._startDate.getTime()+Z*1e3):null}get duration(){if("DURATION"in this.attr){const Z=this.attr.decimalFloatingPoint("DURATION");if(isFiniteNumber(Z))return Z}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&isFiniteNumber(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class LoadStats{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ElementaryStreamTypes={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class BaseSegment{constructor(Z){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ElementaryStreamTypes.AUDIO]:null,[ElementaryStreamTypes.VIDEO]:null,[ElementaryStreamTypes.AUDIOVIDEO]:null},this.baseurl=Z}setByteRange(Z,ee){const ae=Z.split("@",2);let ye;ae.length===1?ye=(ee==null?void 0:ee.byteRangeEndOffset)||0:ye=parseInt(ae[1]),this._byteRange=[ye,parseInt(ae[0])+ye]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=urlToolkitExports.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(Z){this._url=Z}}class Fragment extends BaseSegment{constructor(Z,ee){super(ee),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new LoadStats,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=Z}get decryptdata(){const{levelkeys:Z}=this;if(!Z&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const ee=this.levelkeys.identity;if(ee)this._decryptdata=ee.getDecryptData(this.sn);else{const ae=Object.keys(this.levelkeys);if(ae.length===1)return this._decryptdata=this.levelkeys[ae[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!isFiniteNumber(this.programDateTime))return null;const Z=isFiniteNumber(this.duration)?this.duration:0;return this.programDateTime+Z*1e3}get encrypted(){var Z;if((Z=this._decryptdata)!=null&&Z.encrypted)return!0;if(this.levelkeys){const ee=Object.keys(this.levelkeys),ae=ee.length;if(ae>1||ae===1&&this.levelkeys[ee[0]].encrypted)return!0}return!1}setKeyFormat(Z){if(this.levelkeys){const ee=this.levelkeys[Z];ee&&!this._decryptdata&&(this._decryptdata=ee.getDecryptData(this.sn))}}abortRequests(){var Z,ee;(Z=this.loader)==null||Z.abort(),(ee=this.keyLoader)==null||ee.abort()}setElementaryStreamInfo(Z,ee,ae,ye,ve,be=!1){const{elementaryStreams:Qe}=this,Xe=Qe[Z];if(!Xe){Qe[Z]={startPTS:ee,endPTS:ae,startDTS:ye,endDTS:ve,partial:be};return}Xe.startPTS=Math.min(Xe.startPTS,ee),Xe.endPTS=Math.max(Xe.endPTS,ae),Xe.startDTS=Math.min(Xe.startDTS,ye),Xe.endDTS=Math.max(Xe.endDTS,ve)}clearElementaryStreamInfo(){const{elementaryStreams:Z}=this;Z[ElementaryStreamTypes.AUDIO]=null,Z[ElementaryStreamTypes.VIDEO]=null,Z[ElementaryStreamTypes.AUDIOVIDEO]=null}}class Part extends BaseSegment{constructor(Z,ee,ae,ye,ve){super(ae),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new LoadStats,this.duration=Z.decimalFloatingPoint("DURATION"),this.gap=Z.bool("GAP"),this.independent=Z.bool("INDEPENDENT"),this.relurl=Z.enumeratedString("URI"),this.fragment=ee,this.index=ye;const be=Z.enumeratedString("BYTERANGE");be&&this.setByteRange(be,ve),ve&&(this.fragOffset=ve.fragOffset+ve.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:Z}=this;return!!(Z.audio||Z.video||Z.audiovideo)}}const DEFAULT_TARGET_DURATION=10;class LevelDetails{constructor(Z){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=Z}reloaded(Z){if(!Z){this.advanced=!0,this.updated=!0;return}const ee=this.lastPartSn-Z.lastPartSn,ae=this.lastPartIndex-Z.lastPartIndex;this.updated=this.endSN!==Z.endSN||!!ae||!!ee||!this.live,this.advanced=this.endSN>Z.endSN||ee>0||ee===0&&ae>0,this.updated||this.advanced?this.misses=Math.floor(Z.misses*.6):this.misses=Z.misses+1,this.availabilityDelay=Z.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?isFiniteNumber(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||DEFAULT_TARGET_DURATION}get drift(){const Z=this.driftEndTime-this.driftStartTime;return Z>0?(this.driftEnd-this.driftStart)*1e3/Z:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var Z;return(Z=this.partList)!=null&&Z.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var Z;return(Z=this.fragments)!=null&&Z.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var Z;return(Z=this.partList)!=null&&Z.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var Z;return(Z=this.partList)!=null&&Z.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function base64Decode(ie){return Uint8Array.from(atob(ie),Z=>Z.charCodeAt(0))}function getKeyIdBytes(ie){const Z=strToUtf8array(ie).subarray(0,16),ee=new Uint8Array(16);return ee.set(Z,16-Z.length),ee}function changeEndianness(ie){const Z=function(ae,ye,ve){const be=ae[ye];ae[ye]=ae[ve],ae[ve]=be};Z(ie,0,3),Z(ie,1,2),Z(ie,4,5),Z(ie,6,7)}function convertDataUriToArrayBytes(ie){const Z=ie.split(":");let ee=null;if(Z[0]==="data"&&Z.length===2){const ae=Z[1].split(";"),ye=ae[ae.length-1].split(",");if(ye.length===2){const ve=ye[0]==="base64",be=ye[1];ve?(ae.splice(-1,1),ee=base64Decode(be)):ee=getKeyIdBytes(be)}}return ee}function strToUtf8array(ie){return Uint8Array.from(unescape(encodeURIComponent(ie)),Z=>Z.charCodeAt(0))}const optionalSelf=typeof self<"u"?self:void 0;var KeySystems={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},KeySystemFormats={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function keySystemFormatToKeySystemDomain(ie){switch(ie){case KeySystemFormats.FAIRPLAY:return KeySystems.FAIRPLAY;case KeySystemFormats.PLAYREADY:return KeySystems.PLAYREADY;case KeySystemFormats.WIDEVINE:return KeySystems.WIDEVINE;case KeySystemFormats.CLEARKEY:return KeySystems.CLEARKEY}}var KeySystemIds={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function keySystemIdToKeySystemDomain(ie){if(ie===KeySystemIds.WIDEVINE)return KeySystems.WIDEVINE}function keySystemDomainToKeySystemFormat(ie){switch(ie){case KeySystems.FAIRPLAY:return KeySystemFormats.FAIRPLAY;case KeySystems.PLAYREADY:return KeySystemFormats.PLAYREADY;case KeySystems.WIDEVINE:return KeySystemFormats.WIDEVINE;case KeySystems.CLEARKEY:return KeySystemFormats.CLEARKEY}}function getKeySystemsForConfig(ie){const{drmSystems:Z,widevineLicenseUrl:ee}=ie,ae=Z?[KeySystems.FAIRPLAY,KeySystems.WIDEVINE,KeySystems.PLAYREADY,KeySystems.CLEARKEY].filter(ye=>!!Z[ye]):[];return!ae[KeySystems.WIDEVINE]&&ee&&ae.push(KeySystems.WIDEVINE),ae}const requestMediaKeySystemAccess=function(ie){return optionalSelf!=null&&(ie=optionalSelf.navigator)!=null&&ie.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function getSupportedMediaKeySystemConfigurations(ie,Z,ee,ae){let ye;switch(ie){case KeySystems.FAIRPLAY:ye=["cenc","sinf"];break;case KeySystems.WIDEVINE:case KeySystems.PLAYREADY:ye=["cenc"];break;case KeySystems.CLEARKEY:ye=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${ie}`)}return createMediaKeySystemConfigurations(ye,Z,ee,ae)}function createMediaKeySystemConfigurations(ie,Z,ee,ae){return[{initDataTypes:ie,persistentState:ae.persistentState||"optional",distinctiveIdentifier:ae.distinctiveIdentifier||"optional",sessionTypes:ae.sessionTypes||[ae.sessionType||"temporary"],audioCapabilities:Z.map(ve=>({contentType:`audio/mp4; codecs="${ve}"`,robustness:ae.audioRobustness||"",encryptionScheme:ae.audioEncryptionScheme||null})),videoCapabilities:ee.map(ve=>({contentType:`video/mp4; codecs="${ve}"`,robustness:ae.videoRobustness||"",encryptionScheme:ae.videoEncryptionScheme||null}))}]}function sliceUint8(ie,Z,ee){return Uint8Array.prototype.slice?ie.slice(Z,ee):new Uint8Array(Array.prototype.slice.call(ie,Z,ee))}const isHeader$2=(ie,Z)=>Z+10<=ie.length&&ie[Z]===73&&ie[Z+1]===68&&ie[Z+2]===51&&ie[Z+3]<255&&ie[Z+4]<255&&ie[Z+6]<128&&ie[Z+7]<128&&ie[Z+8]<128&&ie[Z+9]<128,isFooter=(ie,Z)=>Z+10<=ie.length&&ie[Z]===51&&ie[Z+1]===68&&ie[Z+2]===73&&ie[Z+3]<255&&ie[Z+4]<255&&ie[Z+6]<128&&ie[Z+7]<128&&ie[Z+8]<128&&ie[Z+9]<128,getID3Data=(ie,Z)=>{const ee=Z;let ae=0;for(;isHeader$2(ie,Z);){ae+=10;const ye=readSize(ie,Z+6);ae+=ye,isFooter(ie,Z+10)&&(ae+=10),Z+=ae}if(ae>0)return ie.subarray(ee,ee+ae)},readSize=(ie,Z)=>{let ee=0;return ee=(ie[Z]&127)<<21,ee|=(ie[Z+1]&127)<<14,ee|=(ie[Z+2]&127)<<7,ee|=ie[Z+3]&127,ee},canParse$2=(ie,Z)=>isHeader$2(ie,Z)&&readSize(ie,Z+6)+10<=ie.length-Z,getTimeStamp=ie=>{const Z=getID3Frames(ie);for(let ee=0;ee<Z.length;ee++){const ae=Z[ee];if(isTimeStampFrame(ae))return readTimeStamp(ae)}},isTimeStampFrame=ie=>ie&&ie.key==="PRIV"&&ie.info==="com.apple.streaming.transportStreamTimestamp",getFrameData=ie=>{const Z=String.fromCharCode(ie[0],ie[1],ie[2],ie[3]),ee=readSize(ie,4),ae=10;return{type:Z,size:ee,data:ie.subarray(ae,ae+ee)}},getID3Frames=ie=>{let Z=0;const ee=[];for(;isHeader$2(ie,Z);){const ae=readSize(ie,Z+6);Z+=10;const ye=Z+ae;for(;Z+8<ye;){const ve=getFrameData(ie.subarray(Z)),be=decodeFrame(ve);be&&ee.push(be),Z+=ve.size+10}isFooter(ie,Z)&&(Z+=10)}return ee},decodeFrame=ie=>ie.type==="PRIV"?decodePrivFrame(ie):ie.type[0]==="W"?decodeURLFrame(ie):decodeTextFrame(ie),decodePrivFrame=ie=>{if(ie.size<2)return;const Z=utf8ArrayToStr(ie.data,!0),ee=new Uint8Array(ie.data.subarray(Z.length+1));return{key:ie.type,info:Z,data:ee.buffer}},decodeTextFrame=ie=>{if(ie.size<2)return;if(ie.type==="TXXX"){let ee=1;const ae=utf8ArrayToStr(ie.data.subarray(ee),!0);ee+=ae.length+1;const ye=utf8ArrayToStr(ie.data.subarray(ee));return{key:ie.type,info:ae,data:ye}}const Z=utf8ArrayToStr(ie.data.subarray(1));return{key:ie.type,data:Z}},decodeURLFrame=ie=>{if(ie.type==="WXXX"){if(ie.size<2)return;let ee=1;const ae=utf8ArrayToStr(ie.data.subarray(ee),!0);ee+=ae.length+1;const ye=utf8ArrayToStr(ie.data.subarray(ee));return{key:ie.type,info:ae,data:ye}}const Z=utf8ArrayToStr(ie.data);return{key:ie.type,data:Z}},readTimeStamp=ie=>{if(ie.data.byteLength===8){const Z=new Uint8Array(ie.data),ee=Z[3]&1;let ae=(Z[4]<<23)+(Z[5]<<15)+(Z[6]<<7)+Z[7];return ae/=45,ee&&(ae+=4772185884e-2),Math.round(ae)}},utf8ArrayToStr=(ie,Z=!1)=>{const ee=getTextDecoder();if(ee){const Je=ee.decode(ie);if(Z){const tt=Je.indexOf("\0");return tt!==-1?Je.substring(0,tt):Je}return Je.replace(/\0/g,"")}const ae=ie.length;let ye,ve,be,Qe="",Xe=0;for(;Xe<ae;){if(ye=ie[Xe++],ye===0&&Z)return Qe;if(ye===0||ye===3)continue;switch(ye>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:Qe+=String.fromCharCode(ye);break;case 12:case 13:ve=ie[Xe++],Qe+=String.fromCharCode((ye&31)<<6|ve&63);break;case 14:ve=ie[Xe++],be=ie[Xe++],Qe+=String.fromCharCode((ye&15)<<12|(ve&63)<<6|(be&63)<<0);break}}return Qe};let decoder$1;function getTextDecoder(){if(!navigator.userAgent.includes("PlayStation 4"))return!decoder$1&&typeof self.TextDecoder<"u"&&(decoder$1=new self.TextDecoder("utf-8")),decoder$1}const Hex={hexDump:function(ie){let Z="";for(let ee=0;ee<ie.length;ee++){let ae=ie[ee].toString(16);ae.length<2&&(ae="0"+ae),Z+=ae}return Z}},UINT32_MAX$1=Math.pow(2,32)-1,push=[].push,RemuxerTrackIdConfig={video:1,audio:2,id3:3,text:4};function bin2str(ie){return String.fromCharCode.apply(null,ie)}function readUint16(ie,Z){const ee=ie[Z]<<8|ie[Z+1];return ee<0?65536+ee:ee}function readUint32(ie,Z){const ee=readSint32(ie,Z);return ee<0?4294967296+ee:ee}function readSint32(ie,Z){return ie[Z]<<24|ie[Z+1]<<16|ie[Z+2]<<8|ie[Z+3]}function writeUint32(ie,Z,ee){ie[Z]=ee>>24,ie[Z+1]=ee>>16&255,ie[Z+2]=ee>>8&255,ie[Z+3]=ee&255}function hasMoofData(ie){const Z=ie.byteLength;for(let ee=0;ee<Z;){const ae=readUint32(ie,ee);if(ae>8&&ie[ee+4]===109&&ie[ee+5]===111&&ie[ee+6]===111&&ie[ee+7]===102)return!0;ee=ae>1?ee+ae:Z}return!1}function findBox(ie,Z){const ee=[];if(!Z.length)return ee;const ae=ie.byteLength;for(let ye=0;ye<ae;){const ve=readUint32(ie,ye),be=bin2str(ie.subarray(ye+4,ye+8)),Qe=ve>1?ye+ve:ae;if(be===Z[0])if(Z.length===1)ee.push(ie.subarray(ye+8,Qe));else{const Xe=findBox(ie.subarray(ye+8,Qe),Z.slice(1));Xe.length&&push.apply(ee,Xe)}ye=Qe}return ee}function parseSegmentIndex(ie){const Z=[],ee=ie[0];let ae=8;const ye=readUint32(ie,ae);ae+=4;const ve=0,be=0;ee===0?ae+=8:ae+=16,ae+=2;let Qe=ie.length+be;const Xe=readUint16(ie,ae);ae+=2;for(let Je=0;Je<Xe;Je++){let tt=ae;const it=readUint32(ie,tt);tt+=4;const st=it&2147483647;if((it&2147483648)>>>31===1)return logger.warn("SIDX has hierarchical references (not supported)"),null;const ct=readUint32(ie,tt);tt+=4,Z.push({referenceSize:st,subsegmentDuration:ct,info:{duration:ct/ye,start:Qe,end:Qe+st-1}}),Qe+=st,tt+=4,ae=tt}return{earliestPresentationTime:ve,timescale:ye,version:ee,referencesCount:Xe,references:Z}}function parseInitSegment(ie){const Z=[],ee=findBox(ie,["moov","trak"]);for(let ye=0;ye<ee.length;ye++){const ve=ee[ye],be=findBox(ve,["tkhd"])[0];if(be){let Qe=be[0];const Xe=readUint32(be,Qe===0?12:20),Je=findBox(ve,["mdia","mdhd"])[0];if(Je){Qe=Je[0];const tt=readUint32(Je,Qe===0?12:20),it=findBox(ve,["mdia","hdlr"])[0];if(it){const st=bin2str(it.subarray(8,12)),lt={soun:ElementaryStreamTypes.AUDIO,vide:ElementaryStreamTypes.VIDEO}[st];if(lt){const ct=findBox(ve,["mdia","minf","stbl","stsd"])[0],gt=parseStsd(ct);Z[Xe]={timescale:tt,type:lt},Z[lt]=_objectSpread2({timescale:tt,id:Xe},gt)}}}}}return findBox(ie,["moov","mvex","trex"]).forEach(ye=>{const ve=readUint32(ye,4),be=Z[ve];be&&(be.default={duration:readUint32(ye,12),flags:readUint32(ye,20)})}),Z}function parseStsd(ie){const Z=ie.subarray(8),ee=Z.subarray(86),ae=bin2str(Z.subarray(4,8));let ye=ae;const ve=ae==="enca"||ae==="encv";if(ve){const Qe=findBox(Z,[ae])[0].subarray(ae==="enca"?28:78);findBox(Qe,["sinf"]).forEach(Je=>{const tt=findBox(Je,["schm"])[0];if(tt){const it=bin2str(tt.subarray(4,8));if(it==="cbcs"||it==="cenc"){const st=findBox(Je,["frma"])[0];st&&(ye=bin2str(st))}}})}switch(ye){case"avc1":case"avc2":case"avc3":case"avc4":{const be=findBox(ee,["avcC"])[0];ye+="."+toHex(be[1])+toHex(be[2])+toHex(be[3]);break}case"mp4a":{const be=findBox(Z,[ae])[0],Qe=findBox(be.subarray(28),["esds"])[0];if(Qe&&Qe.length>12){let Xe=4;if(Qe[Xe++]!==3)break;Xe=skipBERInteger(Qe,Xe),Xe+=2;const Je=Qe[Xe++];if(Je&128&&(Xe+=2),Je&64&&(Xe+=Qe[Xe++]),Qe[Xe++]!==4)break;Xe=skipBERInteger(Qe,Xe);const tt=Qe[Xe++];if(tt===64)ye+="."+toHex(tt);else break;if(Xe+=12,Qe[Xe++]!==5)break;Xe=skipBERInteger(Qe,Xe);const it=Qe[Xe++];let st=(it&248)>>3;st===31&&(st+=1+((it&7)<<3)+((Qe[Xe]&224)>>5)),ye+="."+st}break}case"hvc1":case"hev1":{const be=findBox(ee,["hvcC"])[0],Qe=be[1],Xe=["","A","B","C"][Qe>>6],Je=Qe&31,tt=readUint32(be,2),it=(Qe&32)>>5?"H":"L",st=be[12],lt=be.subarray(6,12);ye+="."+Xe+Je,ye+="."+tt.toString(16).toUpperCase(),ye+="."+it+st;let ct="";for(let gt=lt.length;gt--;){const ut=lt[gt];(ut||ct)&&(ct="."+ut.toString(16).toUpperCase()+ct)}ye+=ct;break}case"dvh1":case"dvhe":{const be=findBox(ee,["dvcC"])[0],Qe=be[2]>>1&127,Xe=be[2]<<5&32|be[3]>>3&31;ye+="."+addLeadingZero(Qe)+"."+addLeadingZero(Xe);break}case"vp09":{const be=findBox(ee,["vpcC"])[0],Qe=be[4],Xe=be[5],Je=be[6]>>4&15;ye+="."+addLeadingZero(Qe)+"."+addLeadingZero(Xe)+"."+addLeadingZero(Je);break}case"av01":{const be=findBox(ee,["av1C"])[0],Qe=be[1]>>>5,Xe=be[1]&31,Je=be[2]>>>7?"H":"M",tt=(be[2]&64)>>6,it=(be[2]&32)>>5,st=Qe===2&&tt?it?12:10:tt?10:8,lt=(be[2]&16)>>4,ct=(be[2]&8)>>3,gt=(be[2]&4)>>2,ut=be[2]&3;ye+="."+Qe+"."+addLeadingZero(Xe)+Je+"."+addLeadingZero(st)+"."+lt+"."+ct+gt+ut+"."+addLeadingZero(1)+"."+addLeadingZero(1)+"."+addLeadingZero(1)+"."+0;break}}return{codec:ye,encrypted:ve}}function skipBERInteger(ie,Z){const ee=Z+5;for(;ie[Z++]&128&&Z<ee;);return Z}function toHex(ie){return("0"+ie.toString(16).toUpperCase()).slice(-2)}function addLeadingZero(ie){return(ie<10?"0":"")+ie}function patchEncyptionData(ie,Z){if(!ie||!Z)return ie;const ee=Z.keyId;return ee&&Z.isCommonEncryption&&findBox(ie,["moov","trak"]).forEach(ye=>{const be=findBox(ye,["mdia","minf","stbl","stsd"])[0].subarray(8);let Qe=findBox(be,["enca"]);const Xe=Qe.length>0;Xe||(Qe=findBox(be,["encv"])),Qe.forEach(Je=>{const tt=Xe?Je.subarray(28):Je.subarray(78);findBox(tt,["sinf"]).forEach(st=>{const lt=parseSinf(st);if(lt){const ct=lt.subarray(8,24);ct.some(gt=>gt!==0)||(logger.log(`[eme] Patching keyId in 'enc${Xe?"a":"v"}>sinf>>tenc' box: ${Hex.hexDump(ct)} -> ${Hex.hexDump(ee)}`),lt.set(ee,8))}})})}),ie}function parseSinf(ie){const Z=findBox(ie,["schm"])[0];if(Z){const ee=bin2str(Z.subarray(4,8));if(ee==="cbcs"||ee==="cenc")return findBox(ie,["schi","tenc"])[0]}return logger.error("[eme] missing 'schm' box"),null}function getStartDTS(ie,Z){return findBox(Z,["moof","traf"]).reduce((ee,ae)=>{const ye=findBox(ae,["tfdt"])[0],ve=ye[0],be=findBox(ae,["tfhd"]).reduce((Qe,Xe)=>{const Je=readUint32(Xe,4),tt=ie[Je];if(tt){let it=readUint32(ye,4);if(ve===1){if(it===UINT32_MAX$1)return logger.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),Qe;it*=UINT32_MAX$1+1,it+=readUint32(ye,8)}const st=tt.timescale||9e4,lt=it/st;if(isFiniteNumber(lt)&&(Qe===null||lt<Qe))return lt}return Qe},null);return be!==null&&isFiniteNumber(be)&&(ee===null||be<ee)?be:ee},null)}function getDuration(ie,Z){let ee=0,ae=0,ye=0;const ve=findBox(ie,["moof","traf"]);for(let be=0;be<ve.length;be++){const Qe=ve[be],Xe=findBox(Qe,["tfhd"])[0],Je=readUint32(Xe,4),tt=Z[Je];if(!tt)continue;const it=tt.default,st=readUint32(Xe,0)|(it==null?void 0:it.flags);let lt=it==null?void 0:it.duration;st&8&&(st&2?lt=readUint32(Xe,12):lt=readUint32(Xe,8));const ct=tt.timescale||9e4,gt=findBox(Qe,["trun"]);for(let ut=0;ut<gt.length;ut++){if(ee=computeRawDurationFromSamples(gt[ut]),!ee&&lt){const mt=readUint32(gt[ut],4);ee=lt*mt}tt.type===ElementaryStreamTypes.VIDEO?ae+=ee/ct:tt.type===ElementaryStreamTypes.AUDIO&&(ye+=ee/ct)}}if(ae===0&&ye===0){let be=0;const Qe=findBox(ie,["sidx"]);for(let Xe=0;Xe<Qe.length;Xe++){const Je=parseSegmentIndex(Qe[Xe]);Je!=null&&Je.references&&(be+=Je.references.reduce((tt,it)=>tt+it.info.duration||0,0))}return be}return ae||ye}function computeRawDurationFromSamples(ie){const Z=readUint32(ie,0);let ee=8;Z&1&&(ee+=4),Z&4&&(ee+=4);let ae=0;const ye=readUint32(ie,4);for(let ve=0;ve<ye;ve++){if(Z&256){const be=readUint32(ie,ee);ae+=be,ee+=4}Z&512&&(ee+=4),Z&1024&&(ee+=4),Z&2048&&(ee+=4)}return ae}function offsetStartDTS(ie,Z,ee){findBox(Z,["moof","traf"]).forEach(ae=>{findBox(ae,["tfhd"]).forEach(ye=>{const ve=readUint32(ye,4),be=ie[ve];if(!be)return;const Qe=be.timescale||9e4;findBox(ae,["tfdt"]).forEach(Xe=>{const Je=Xe[0],tt=ee*Qe;if(tt){let it=readUint32(Xe,4);if(Je===0)it-=tt,it=Math.max(it,0),writeUint32(Xe,4,it);else{it*=Math.pow(2,32),it+=readUint32(Xe,8),it-=tt,it=Math.max(it,0);const st=Math.floor(it/(UINT32_MAX$1+1)),lt=Math.floor(it%(UINT32_MAX$1+1));writeUint32(Xe,4,st),writeUint32(Xe,8,lt)}}})})})}function segmentValidRange(ie){const Z={valid:null,remainder:null},ee=findBox(ie,["moof"]);if(ee.length<2)return Z.remainder=ie,Z;const ae=ee[ee.length-1];return Z.valid=sliceUint8(ie,0,ae.byteOffset-8),Z.remainder=sliceUint8(ie,ae.byteOffset-8),Z}function appendUint8Array(ie,Z){const ee=new Uint8Array(ie.length+Z.length);return ee.set(ie),ee.set(Z,ie.length),ee}function parseSamples(ie,Z){const ee=[],ae=Z.samples,ye=Z.timescale,ve=Z.id;let be=!1;return findBox(ae,["moof"]).map(Xe=>{const Je=Xe.byteOffset-8;findBox(Xe,["traf"]).map(it=>{const st=findBox(it,["tfdt"]).map(lt=>{const ct=lt[0];let gt=readUint32(lt,4);return ct===1&&(gt*=Math.pow(2,32),gt+=readUint32(lt,8)),gt/ye})[0];return st!==void 0&&(ie=st),findBox(it,["tfhd"]).map(lt=>{const ct=readUint32(lt,4),gt=readUint32(lt,0)&16777215,ut=(gt&1)!==0,mt=(gt&2)!==0,ei=(gt&8)!==0;let ni=0;const ri=(gt&16)!==0;let si=0;const li=(gt&32)!==0;let ai=8;ct===ve&&(ut&&(ai+=8),mt&&(ai+=4),ei&&(ni=readUint32(lt,ai),ai+=4),ri&&(si=readUint32(lt,ai),ai+=4),li&&(ai+=4),Z.type==="video"&&(be=isHEVC(Z.codec)),findBox(it,["trun"]).map(ci=>{const Ci=ci[0],pi=readUint32(ci,0)&16777215,gi=(pi&1)!==0;let _i=0;const bi=(pi&4)!==0,Mi=(pi&256)!==0;let yi=0;const Ti=(pi&512)!==0;let Ii=0;const Ri=(pi&1024)!==0,Pi=(pi&2048)!==0;let xi=0;const ki=readUint32(ci,4);let Li=8;gi&&(_i=readUint32(ci,Li),Li+=4),bi&&(Li+=4);let Yr=_i+Je;for(let Ui=0;Ui<ki;Ui++){if(Mi?(yi=readUint32(ci,Li),Li+=4):yi=ni,Ti?(Ii=readUint32(ci,Li),Li+=4):Ii=si,Ri&&(Li+=4),Pi&&(Ci===0?xi=readUint32(ci,Li):xi=readSint32(ci,Li),Li+=4),Z.type===ElementaryStreamTypes.VIDEO){let Vi=0;for(;Vi<Ii;){const Kr=readUint32(ae,Yr);if(Yr+=4,isSEIMessage(be,ae[Yr])){const Wi=ae.subarray(Yr,Yr+Kr);parseSEIMessageFromNALu(Wi,be?2:1,ie+xi/ye,ee)}Yr+=Kr,Vi+=Kr+4}}ie+=yi/ye}}))})})}),ee}function isHEVC(ie){if(!ie)return!1;const Z=ie.indexOf("."),ee=Z<0?ie:ie.substring(0,Z);return ee==="hvc1"||ee==="hev1"||ee==="dvh1"||ee==="dvhe"}function isSEIMessage(ie,Z){if(ie){const ee=Z>>1&63;return ee===39||ee===40}else return(Z&31)===6}function parseSEIMessageFromNALu(ie,Z,ee,ae){const ye=discardEPB(ie);let ve=0;ve+=Z;let be=0,Qe=0,Xe=0;for(;ve<ye.length;){be=0;do{if(ve>=ye.length)break;Xe=ye[ve++],be+=Xe}while(Xe===255);Qe=0;do{if(ve>=ye.length)break;Xe=ye[ve++],Qe+=Xe}while(Xe===255);const Je=ye.length-ve;let tt=ve;if(Qe<Je)ve+=Qe;else if(Qe>Je){logger.error(`Malformed SEI payload. ${Qe} is too small, only ${Je} bytes left to parse.`);break}if(be===4){if(ye[tt++]===181){const st=readUint16(ye,tt);if(tt+=2,st===49){const lt=readUint32(ye,tt);if(tt+=4,lt===1195456820){const ct=ye[tt++];if(ct===3){const gt=ye[tt++],ut=31&gt,mt=64&gt,ei=mt?2+ut*3:0,ni=new Uint8Array(ei);if(mt){ni[0]=gt;for(let ri=1;ri<ei;ri++)ni[ri]=ye[tt++]}ae.push({type:ct,payloadType:be,pts:ee,bytes:ni})}}}}}else if(be===5&&Qe>16){const it=[];for(let ct=0;ct<16;ct++){const gt=ye[tt++].toString(16);it.push(gt.length==1?"0"+gt:gt),(ct===3||ct===5||ct===7||ct===9)&&it.push("-")}const st=Qe-16,lt=new Uint8Array(st);for(let ct=0;ct<st;ct++)lt[ct]=ye[tt++];ae.push({payloadType:be,pts:ee,uuid:it.join(""),userData:utf8ArrayToStr(lt),userDataBytes:lt})}}}function discardEPB(ie){const Z=ie.byteLength,ee=[];let ae=1;for(;ae<Z-2;)ie[ae]===0&&ie[ae+1]===0&&ie[ae+2]===3?(ee.push(ae+2),ae+=2):ae++;if(ee.length===0)return ie;const ye=Z-ee.length,ve=new Uint8Array(ye);let be=0;for(ae=0;ae<ye;be++,ae++)be===ee[0]&&(be++,ee.shift()),ve[ae]=ie[be];return ve}function parseEmsg(ie){const Z=ie[0];let ee="",ae="",ye=0,ve=0,be=0,Qe=0,Xe=0,Je=0;if(Z===0){for(;bin2str(ie.subarray(Je,Je+1))!=="\0";)ee+=bin2str(ie.subarray(Je,Je+1)),Je+=1;for(ee+=bin2str(ie.subarray(Je,Je+1)),Je+=1;bin2str(ie.subarray(Je,Je+1))!=="\0";)ae+=bin2str(ie.subarray(Je,Je+1)),Je+=1;ae+=bin2str(ie.subarray(Je,Je+1)),Je+=1,ye=readUint32(ie,12),ve=readUint32(ie,16),Qe=readUint32(ie,20),Xe=readUint32(ie,24),Je=28}else if(Z===1){Je+=4,ye=readUint32(ie,Je),Je+=4;const it=readUint32(ie,Je);Je+=4;const st=readUint32(ie,Je);for(Je+=4,be=2**32*it+st,isSafeInteger(be)||(be=Number.MAX_SAFE_INTEGER,logger.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),Qe=readUint32(ie,Je),Je+=4,Xe=readUint32(ie,Je),Je+=4;bin2str(ie.subarray(Je,Je+1))!=="\0";)ee+=bin2str(ie.subarray(Je,Je+1)),Je+=1;for(ee+=bin2str(ie.subarray(Je,Je+1)),Je+=1;bin2str(ie.subarray(Je,Je+1))!=="\0";)ae+=bin2str(ie.subarray(Je,Je+1)),Je+=1;ae+=bin2str(ie.subarray(Je,Je+1)),Je+=1}const tt=ie.subarray(Je,ie.byteLength);return{schemeIdUri:ee,value:ae,timeScale:ye,presentationTime:be,presentationTimeDelta:ve,eventDuration:Qe,id:Xe,payload:tt}}function mp4Box(ie,...Z){const ee=Z.length;let ae=8,ye=ee;for(;ye--;)ae+=Z[ye].byteLength;const ve=new Uint8Array(ae);for(ve[0]=ae>>24&255,ve[1]=ae>>16&255,ve[2]=ae>>8&255,ve[3]=ae&255,ve.set(ie,4),ye=0,ae=8;ye<ee;ye++)ve.set(Z[ye],ae),ae+=Z[ye].byteLength;return ve}function mp4pssh(ie,Z,ee){if(ie.byteLength!==16)throw new RangeError("Invalid system id");let ae,ye;if(Z){ae=1,ye=new Uint8Array(Z.length*16);for(let Qe=0;Qe<Z.length;Qe++){const Xe=Z[Qe];if(Xe.byteLength!==16)throw new RangeError("Invalid key");ye.set(Xe,Qe*16)}}else ae=0,ye=new Uint8Array;let ve;ae>0?(ve=new Uint8Array(4),Z.length>0&&new DataView(ve.buffer).setUint32(0,Z.length,!1)):ve=new Uint8Array;const be=new Uint8Array(4);return ee&&ee.byteLength>0&&new DataView(be.buffer).setUint32(0,ee.byteLength,!1),mp4Box([112,115,115,104],new Uint8Array([ae,0,0,0]),ie,ve,ye,be,ee||new Uint8Array)}function parsePssh(ie){if(!(ie instanceof ArrayBuffer)||ie.byteLength<32)return null;const Z={version:0,systemId:"",kids:null,data:null},ee=new DataView(ie),ae=ee.getUint32(0);if(ie.byteLength!==ae&&ae>44||ee.getUint32(4)!==1886614376||(Z.version=ee.getUint32(8)>>>24,Z.version>1))return null;Z.systemId=Hex.hexDump(new Uint8Array(ie,12,16));const ve=ee.getUint32(28);if(Z.version===0){if(ae-32<ve)return null;Z.data=new Uint8Array(ie,32,ve)}else if(Z.version===1){Z.kids=[];for(let be=0;be<ve;be++)Z.kids.push(new Uint8Array(ie,32+be*16,16))}return Z}let keyUriToKeyIdMap={};class LevelKey{static clearKeyUriToKeyIdMap(){keyUriToKeyIdMap={}}constructor(Z,ee,ae,ye=[1],ve=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=Z,this.uri=ee,this.keyFormat=ae,this.keyFormatVersions=ye,this.iv=ve,this.encrypted=Z?Z!=="NONE":!1,this.isCommonEncryption=this.encrypted&&Z!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case KeySystemFormats.FAIRPLAY:case KeySystemFormats.WIDEVINE:case KeySystemFormats.PLAYREADY:case KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(Z){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof Z!="number"&&(this.method==="AES-128"&&!this.iv&&logger.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),Z=0);const ae=createInitializationVector(Z);return new LevelKey(this.method,this.uri,"identity",this.keyFormatVersions,ae)}const ee=convertDataUriToArrayBytes(this.uri);if(ee)switch(this.keyFormat){case KeySystemFormats.WIDEVINE:this.pssh=ee,ee.length>=22&&(this.keyId=ee.subarray(ee.length-22,ee.length-6));break;case KeySystemFormats.PLAYREADY:{const ae=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=mp4pssh(ae,null,ee);const ye=new Uint16Array(ee.buffer,ee.byteOffset,ee.byteLength/2),ve=String.fromCharCode.apply(null,Array.from(ye)),be=ve.substring(ve.indexOf("<"),ve.length),Je=new DOMParser().parseFromString(be,"text/xml").getElementsByTagName("KID")[0];if(Je){const tt=Je.childNodes[0]?Je.childNodes[0].nodeValue:Je.getAttribute("VALUE");if(tt){const it=base64Decode(tt).subarray(0,16);changeEndianness(it),this.keyId=it}}break}default:{let ae=ee.subarray(0,16);if(ae.length!==16){const ye=new Uint8Array(16);ye.set(ae,16-ae.length),ae=ye}this.keyId=ae;break}}if(!this.keyId||this.keyId.byteLength!==16){let ae=keyUriToKeyIdMap[this.uri];if(!ae){const ye=Object.keys(keyUriToKeyIdMap).length%Number.MAX_SAFE_INTEGER;ae=new Uint8Array(16),new DataView(ae.buffer,12,4).setUint32(0,ye),keyUriToKeyIdMap[this.uri]=ae}this.keyId=ae}return this}}function createInitializationVector(ie){const Z=new Uint8Array(16);for(let ee=12;ee<16;ee++)Z[ee]=ie>>8*(15-ee)&255;return Z}const VARIABLE_REPLACEMENT_REGEX=/\{\$([a-zA-Z0-9-_]+)\}/g;function hasVariableReferences(ie){return VARIABLE_REPLACEMENT_REGEX.test(ie)}function substituteVariablesInAttributes(ie,Z,ee){if(ie.variableList!==null||ie.hasVariableRefs)for(let ae=ee.length;ae--;){const ye=ee[ae],ve=Z[ye];ve&&(Z[ye]=substituteVariables(ie,ve))}}function substituteVariables(ie,Z){if(ie.variableList!==null||ie.hasVariableRefs){const ee=ie.variableList;return Z.replace(VARIABLE_REPLACEMENT_REGEX,ae=>{const ye=ae.substring(2,ae.length-1),ve=ee==null?void 0:ee[ye];return ve===void 0?(ie.playlistParsingError||(ie.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${ye}"`)),ae):ve})}return Z}function addVariableDefinition(ie,Z,ee){let ae=ie.variableList;ae||(ie.variableList=ae={});let ye,ve;if("QUERYPARAM"in Z){ye=Z.QUERYPARAM;try{const be=new self.URL(ee).searchParams;if(be.has(ye))ve=be.get(ye);else throw new Error(`"${ye}" does not match any query parameter in URI: "${ee}"`)}catch(be){ie.playlistParsingError||(ie.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${be.message}`))}}else ye=Z.NAME,ve=Z.VALUE;ye in ae?ie.playlistParsingError||(ie.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${ye}"`)):ae[ye]=ve||""}function importVariableDefinition(ie,Z,ee){const ae=Z.IMPORT;if(ee&&ae in ee){let ye=ie.variableList;ye||(ie.variableList=ye={}),ye[ae]=ee[ae]}else ie.playlistParsingError||(ie.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${ae}"`))}function getMediaSource(ie=!0){return typeof self>"u"?void 0:(ie||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const sampleEntryCodesISO={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function isCodecType(ie,Z){const ee=sampleEntryCodesISO[Z];return!!ee&&!!ee[ie.slice(0,4)]}function areCodecsMediaSourceSupported(ie,Z,ee=!0){return!ie.split(",").some(ae=>!isCodecMediaSourceSupported(ae,Z,ee))}function isCodecMediaSourceSupported(ie,Z,ee=!0){var ae;const ye=getMediaSource(ee);return(ae=ye==null?void 0:ye.isTypeSupported(mimeTypeForCodec(ie,Z)))!=null?ae:!1}function mimeTypeForCodec(ie,Z){return`${Z}/mp4;codecs="${ie}"`}function videoCodecPreferenceValue(ie){if(ie){const Z=ie.substring(0,4);return sampleEntryCodesISO.video[Z]}return 2}function codecsSetSelectionPreferenceValue(ie){return ie.split(",").reduce((Z,ee)=>{const ae=sampleEntryCodesISO.video[ee];return ae?(ae*2+Z)/(Z?3:2):(sampleEntryCodesISO.audio[ee]+Z)/(Z?2:1)},0)}const CODEC_COMPATIBLE_NAMES={};function getCodecCompatibleNameLower(ie,Z=!0){if(CODEC_COMPATIBLE_NAMES[ie])return CODEC_COMPATIBLE_NAMES[ie];const ee={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[ie];for(let ae=0;ae<ee.length;ae++)if(isCodecMediaSourceSupported(ee[ae],"audio",Z))return CODEC_COMPATIBLE_NAMES[ie]=ee[ae],ee[ae];return ie}const AUDIO_CODEC_REGEXP=/flac|opus/i;function getCodecCompatibleName(ie,Z=!0){return ie.replace(AUDIO_CODEC_REGEXP,ee=>getCodecCompatibleNameLower(ee.toLowerCase(),Z))}function pickMostCompleteCodecName(ie,Z){return ie&&ie!=="mp4a"?ie:Z}function convertAVC1ToAVCOTI(ie){const Z=ie.split(".");if(Z.length>2){let ee=Z.shift()+".";return ee+=parseInt(Z.shift()).toString(16),ee+=("000"+parseInt(Z.shift()).toString(16)).slice(-4),ee}return ie}const MASTER_PLAYLIST_REGEX=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,MASTER_PLAYLIST_MEDIA_REGEX=/#EXT-X-MEDIA:(.*)/g,IS_MEDIA_PLAYLIST=/^#EXT(?:INF|-X-TARGETDURATION):/m,LEVEL_PLAYLIST_REGEX_FAST=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),LEVEL_PLAYLIST_REGEX_SLOW=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class M3U8Parser{static findGroup(Z,ee){for(let ae=0;ae<Z.length;ae++){const ye=Z[ae];if(ye.id===ee)return ye}}static resolve(Z,ee){return urlToolkitExports.buildAbsoluteURL(ee,Z,{alwaysNormalize:!0})}static isMediaPlaylist(Z){return IS_MEDIA_PLAYLIST.test(Z)}static parseMasterPlaylist(Z,ee){const ae=hasVariableReferences(Z),ye={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ae},ve=[];MASTER_PLAYLIST_REGEX.lastIndex=0;let be;for(;(be=MASTER_PLAYLIST_REGEX.exec(Z))!=null;)if(be[1]){var Qe;const Je=new AttrList(be[1]);substituteVariablesInAttributes(ye,Je,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const tt=substituteVariables(ye,be[2]),it={attrs:Je,bitrate:Je.decimalInteger("BANDWIDTH")||Je.decimalInteger("AVERAGE-BANDWIDTH"),name:Je.NAME,url:M3U8Parser.resolve(tt,ee)},st=Je.decimalResolution("RESOLUTION");st&&(it.width=st.width,it.height=st.height),setCodecs(Je.CODECS,it),(Qe=it.unknownCodecs)!=null&&Qe.length||ve.push(it),ye.levels.push(it)}else if(be[3]){const Je=be[3],tt=be[4];switch(Je){case"SESSION-DATA":{const it=new AttrList(tt);substituteVariablesInAttributes(ye,it,["DATA-ID","LANGUAGE","VALUE","URI"]);const st=it["DATA-ID"];st&&(ye.sessionData===null&&(ye.sessionData={}),ye.sessionData[st]=it);break}case"SESSION-KEY":{const it=parseKey(tt,ee,ye);it.encrypted&&it.isSupported()?(ye.sessionKeys===null&&(ye.sessionKeys=[]),ye.sessionKeys.push(it)):logger.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${tt}"`);break}case"DEFINE":{{const it=new AttrList(tt);substituteVariablesInAttributes(ye,it,["NAME","VALUE","QUERYPARAM"]),addVariableDefinition(ye,it,ee)}break}case"CONTENT-STEERING":{const it=new AttrList(tt);substituteVariablesInAttributes(ye,it,["SERVER-URI","PATHWAY-ID"]),ye.contentSteering={uri:M3U8Parser.resolve(it["SERVER-URI"],ee),pathwayId:it["PATHWAY-ID"]||"."};break}case"START":{ye.startTimeOffset=parseStartTimeOffset(tt);break}}}const Xe=ve.length>0&&ve.length<ye.levels.length;return ye.levels=Xe?ve:ye.levels,ye.levels.length===0&&(ye.playlistParsingError=new Error("no levels found in manifest")),ye}static parseMasterPlaylistMedia(Z,ee,ae){let ye;const ve={},be=ae.levels,Qe={AUDIO:be.map(Je=>({id:Je.attrs.AUDIO,audioCodec:Je.audioCodec})),SUBTITLES:be.map(Je=>({id:Je.attrs.SUBTITLES,textCodec:Je.textCodec})),"CLOSED-CAPTIONS":[]};let Xe=0;for(MASTER_PLAYLIST_MEDIA_REGEX.lastIndex=0;(ye=MASTER_PLAYLIST_MEDIA_REGEX.exec(Z))!==null;){const Je=new AttrList(ye[1]),tt=Je.TYPE;if(tt){const it=Qe[tt],st=ve[tt]||[];ve[tt]=st,substituteVariablesInAttributes(ae,Je,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const lt=Je.LANGUAGE,ct=Je["ASSOC-LANGUAGE"],gt=Je.CHANNELS,ut=Je.CHARACTERISTICS,mt=Je["INSTREAM-ID"],ei={attrs:Je,bitrate:0,id:Xe++,groupId:Je["GROUP-ID"]||"",name:Je.NAME||lt||"",type:tt,default:Je.bool("DEFAULT"),autoselect:Je.bool("AUTOSELECT"),forced:Je.bool("FORCED"),lang:lt,url:Je.URI?M3U8Parser.resolve(Je.URI,ee):""};if(ct&&(ei.assocLang=ct),gt&&(ei.channels=gt),ut&&(ei.characteristics=ut),mt&&(ei.instreamId=mt),it!=null&&it.length){const ni=M3U8Parser.findGroup(it,ei.groupId)||it[0];assignCodec(ei,ni,"audioCodec"),assignCodec(ei,ni,"textCodec")}st.push(ei)}}return ve}static parseLevelPlaylist(Z,ee,ae,ye,ve,be){const Qe=new LevelDetails(ee),Xe=Qe.fragments;let Je=null,tt=0,it=0,st=0,lt=0,ct=null,gt=new Fragment(ye,ee),ut,mt,ei,ni=-1,ri=!1,si=null;for(LEVEL_PLAYLIST_REGEX_FAST.lastIndex=0,Qe.m3u8=Z,Qe.hasVariableRefs=hasVariableReferences(Z);(ut=LEVEL_PLAYLIST_REGEX_FAST.exec(Z))!==null;){ri&&(ri=!1,gt=new Fragment(ye,ee),gt.start=st,gt.sn=tt,gt.cc=lt,gt.level=ae,Je&&(gt.initSegment=Je,gt.rawProgramDateTime=Je.rawProgramDateTime,Je.rawProgramDateTime=null,si&&(gt.setByteRange(si),si=null)));const Ci=ut[1];if(Ci){gt.duration=parseFloat(Ci);const pi=(" "+ut[2]).slice(1);gt.title=pi||null,gt.tagList.push(pi?["INF",Ci,pi]:["INF",Ci])}else if(ut[3]){if(isFiniteNumber(gt.duration)){gt.start=st,ei&&setFragLevelKeys(gt,ei,Qe),gt.sn=tt,gt.level=ae,gt.cc=lt,Xe.push(gt);const pi=(" "+ut[3]).slice(1);gt.relurl=substituteVariables(Qe,pi),assignProgramDateTime(gt,ct),ct=gt,st+=gt.duration,tt++,it=0,ri=!0}}else if(ut[4]){const pi=(" "+ut[4]).slice(1);ct?gt.setByteRange(pi,ct):gt.setByteRange(pi)}else if(ut[5])gt.rawProgramDateTime=(" "+ut[5]).slice(1),gt.tagList.push(["PROGRAM-DATE-TIME",gt.rawProgramDateTime]),ni===-1&&(ni=Xe.length);else{if(ut=ut[0].match(LEVEL_PLAYLIST_REGEX_SLOW),!ut){logger.warn("No matches on slow regex match for level playlist!");continue}for(mt=1;mt<ut.length&&!(typeof ut[mt]<"u");mt++);const pi=(" "+ut[mt]).slice(1),gi=(" "+ut[mt+1]).slice(1),_i=ut[mt+2]?(" "+ut[mt+2]).slice(1):"";switch(pi){case"PLAYLIST-TYPE":Qe.type=gi.toUpperCase();break;case"MEDIA-SEQUENCE":tt=Qe.startSN=parseInt(gi);break;case"SKIP":{const bi=new AttrList(gi);substituteVariablesInAttributes(Qe,bi,["RECENTLY-REMOVED-DATERANGES"]);const Mi=bi.decimalInteger("SKIPPED-SEGMENTS");if(isFiniteNumber(Mi)){Qe.skippedSegments=Mi;for(let Ti=Mi;Ti--;)Xe.unshift(null);tt+=Mi}const yi=bi.enumeratedString("RECENTLY-REMOVED-DATERANGES");yi&&(Qe.recentlyRemovedDateranges=yi.split("	"));break}case"TARGETDURATION":Qe.targetduration=Math.max(parseInt(gi),1);break;case"VERSION":Qe.version=parseInt(gi);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":Qe.live=!1;break;case"#":(gi||_i)&&gt.tagList.push(_i?[gi,_i]:[gi]);break;case"DISCONTINUITY":lt++,gt.tagList.push(["DIS"]);break;case"GAP":gt.gap=!0,gt.tagList.push([pi]);break;case"BITRATE":gt.tagList.push([pi,gi]);break;case"DATERANGE":{const bi=new AttrList(gi);substituteVariablesInAttributes(Qe,bi,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),substituteVariablesInAttributes(Qe,bi,bi.clientAttrs);const Mi=new DateRange(bi,Qe.dateRanges[bi.ID]);Mi.isValid||Qe.skippedSegments?Qe.dateRanges[Mi.id]=Mi:logger.warn(`Ignoring invalid DATERANGE tag: "${gi}"`),gt.tagList.push(["EXT-X-DATERANGE",gi]);break}case"DEFINE":{{const bi=new AttrList(gi);substituteVariablesInAttributes(Qe,bi,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in bi?importVariableDefinition(Qe,bi,be):addVariableDefinition(Qe,bi,ee)}break}case"DISCONTINUITY-SEQUENCE":lt=parseInt(gi);break;case"KEY":{const bi=parseKey(gi,ee,Qe);if(bi.isSupported()){if(bi.method==="NONE"){ei=void 0;break}ei||(ei={}),ei[bi.keyFormat]&&(ei=_extends({},ei)),ei[bi.keyFormat]=bi}else logger.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${gi}"`);break}case"START":Qe.startTimeOffset=parseStartTimeOffset(gi);break;case"MAP":{const bi=new AttrList(gi);if(substituteVariablesInAttributes(Qe,bi,["BYTERANGE","URI"]),gt.duration){const Mi=new Fragment(ye,ee);setInitSegment(Mi,bi,ae,ei),Je=Mi,gt.initSegment=Je,Je.rawProgramDateTime&&!gt.rawProgramDateTime&&(gt.rawProgramDateTime=Je.rawProgramDateTime)}else{const Mi=gt.byteRangeEndOffset;if(Mi){const yi=gt.byteRangeStartOffset;si=`${Mi-yi}@${yi}`}else si=null;setInitSegment(gt,bi,ae,ei),Je=gt,ri=!0}break}case"SERVER-CONTROL":{const bi=new AttrList(gi);Qe.canBlockReload=bi.bool("CAN-BLOCK-RELOAD"),Qe.canSkipUntil=bi.optionalFloat("CAN-SKIP-UNTIL",0),Qe.canSkipDateRanges=Qe.canSkipUntil>0&&bi.bool("CAN-SKIP-DATERANGES"),Qe.partHoldBack=bi.optionalFloat("PART-HOLD-BACK",0),Qe.holdBack=bi.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const bi=new AttrList(gi);Qe.partTarget=bi.decimalFloatingPoint("PART-TARGET");break}case"PART":{let bi=Qe.partList;bi||(bi=Qe.partList=[]);const Mi=it>0?bi[bi.length-1]:void 0,yi=it++,Ti=new AttrList(gi);substituteVariablesInAttributes(Qe,Ti,["BYTERANGE","URI"]);const Ii=new Part(Ti,gt,ee,yi,Mi);bi.push(Ii),gt.duration+=Ii.duration;break}case"PRELOAD-HINT":{const bi=new AttrList(gi);substituteVariablesInAttributes(Qe,bi,["URI"]),Qe.preloadHint=bi;break}case"RENDITION-REPORT":{const bi=new AttrList(gi);substituteVariablesInAttributes(Qe,bi,["URI"]),Qe.renditionReports=Qe.renditionReports||[],Qe.renditionReports.push(bi);break}default:logger.warn(`line parsed but not handled: ${ut}`);break}}}ct&&!ct.relurl?(Xe.pop(),st-=ct.duration,Qe.partList&&(Qe.fragmentHint=ct)):Qe.partList&&(assignProgramDateTime(gt,ct),gt.cc=lt,Qe.fragmentHint=gt,ei&&setFragLevelKeys(gt,ei,Qe));const li=Xe.length,ai=Xe[0],ci=Xe[li-1];if(st+=Qe.skippedSegments*Qe.targetduration,st>0&&li&&ci){Qe.averagetargetduration=st/li;const Ci=ci.sn;Qe.endSN=Ci!=="initSegment"?Ci:0,Qe.live||(ci.endList=!0),ai&&(Qe.startCC=ai.cc)}else Qe.endSN=0,Qe.startCC=0;return Qe.fragmentHint&&(st+=Qe.fragmentHint.duration),Qe.totalduration=st,Qe.endCC=lt,ni>0&&backfillProgramDateTimes(Xe,ni),Qe}}function parseKey(ie,Z,ee){var ae,ye;const ve=new AttrList(ie);substituteVariablesInAttributes(ee,ve,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const be=(ae=ve.METHOD)!=null?ae:"",Qe=ve.URI,Xe=ve.hexadecimalInteger("IV"),Je=ve.KEYFORMATVERSIONS,tt=(ye=ve.KEYFORMAT)!=null?ye:"identity";Qe&&ve.IV&&!Xe&&logger.error(`Invalid IV: ${ve.IV}`);const it=Qe?M3U8Parser.resolve(Qe,Z):"",st=(Je||"1").split("/").map(Number).filter(Number.isFinite);return new LevelKey(be,it,tt,st,Xe)}function parseStartTimeOffset(ie){const ee=new AttrList(ie).decimalFloatingPoint("TIME-OFFSET");return isFiniteNumber(ee)?ee:null}function setCodecs(ie,Z){let ee=(ie||"").split(/[ ,]+/).filter(ae=>ae);["video","audio","text"].forEach(ae=>{const ye=ee.filter(ve=>isCodecType(ve,ae));ye.length&&(Z[`${ae}Codec`]=ye.join(","),ee=ee.filter(ve=>ye.indexOf(ve)===-1))}),Z.unknownCodecs=ee}function assignCodec(ie,Z,ee){const ae=Z[ee];ae&&(ie[ee]=ae)}function backfillProgramDateTimes(ie,Z){let ee=ie[Z];for(let ae=Z;ae--;){const ye=ie[ae];if(!ye)return;ye.programDateTime=ee.programDateTime-ye.duration*1e3,ee=ye}}function assignProgramDateTime(ie,Z){ie.rawProgramDateTime?ie.programDateTime=Date.parse(ie.rawProgramDateTime):Z!=null&&Z.programDateTime&&(ie.programDateTime=Z.endProgramDateTime),isFiniteNumber(ie.programDateTime)||(ie.programDateTime=null,ie.rawProgramDateTime=null)}function setInitSegment(ie,Z,ee,ae){ie.relurl=Z.URI,Z.BYTERANGE&&ie.setByteRange(Z.BYTERANGE),ie.level=ee,ie.sn="initSegment",ae&&(ie.levelkeys=ae),ie.initSegment=null}function setFragLevelKeys(ie,Z,ee){ie.levelkeys=Z;const{encryptedFragments:ae}=ee;(!ae.length||ae[ae.length-1].levelkeys!==Z)&&Object.keys(Z).some(ye=>Z[ye].isCommonEncryption)&&ae.push(ie)}var PlaylistContextType={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},PlaylistLevelType={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function mapContextToLevelType(ie){const{type:Z}=ie;switch(Z){case PlaylistContextType.AUDIO_TRACK:return PlaylistLevelType.AUDIO;case PlaylistContextType.SUBTITLE_TRACK:return PlaylistLevelType.SUBTITLE;default:return PlaylistLevelType.MAIN}}function getResponseUrl(ie,Z){let ee=ie.url;return(ee===void 0||ee.indexOf("data:")===0)&&(ee=Z.url),ee}class PlaylistLoader{constructor(Z){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=Z,this.registerListeners()}startLoad(Z){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:Z}=this;Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Z.on(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),Z.on(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:Z}=this;Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.LEVEL_LOADING,this.onLevelLoading,this),Z.off(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),Z.off(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(Z){const ee=this.hls.config,ae=ee.pLoader,ye=ee.loader,ve=ae||ye,be=new ve(ee);return this.loaders[Z.type]=be,be}getInternalLoader(Z){return this.loaders[Z.type]}resetInternalLoader(Z){this.loaders[Z]&&delete this.loaders[Z]}destroyInternalLoaders(){for(const Z in this.loaders){const ee=this.loaders[Z];ee&&ee.destroy(),this.resetInternalLoader(Z)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(Z,ee){const{url:ae}=ee;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:PlaylistContextType.MANIFEST,url:ae,deliveryDirectives:null})}onLevelLoading(Z,ee){const{id:ae,level:ye,pathwayId:ve,url:be,deliveryDirectives:Qe}=ee;this.load({id:ae,level:ye,pathwayId:ve,responseType:"text",type:PlaylistContextType.LEVEL,url:be,deliveryDirectives:Qe})}onAudioTrackLoading(Z,ee){const{id:ae,groupId:ye,url:ve,deliveryDirectives:be}=ee;this.load({id:ae,groupId:ye,level:null,responseType:"text",type:PlaylistContextType.AUDIO_TRACK,url:ve,deliveryDirectives:be})}onSubtitleTrackLoading(Z,ee){const{id:ae,groupId:ye,url:ve,deliveryDirectives:be}=ee;this.load({id:ae,groupId:ye,level:null,responseType:"text",type:PlaylistContextType.SUBTITLE_TRACK,url:ve,deliveryDirectives:be})}load(Z){var ee;const ae=this.hls.config;let ye=this.getInternalLoader(Z);if(ye){const Je=ye.context;if(Je&&Je.url===Z.url&&Je.level===Z.level){logger.trace("[playlist-loader]: playlist request ongoing");return}logger.log(`[playlist-loader]: aborting previous loader for type: ${Z.type}`),ye.abort()}let ve;if(Z.type===PlaylistContextType.MANIFEST?ve=ae.manifestLoadPolicy.default:ve=_extends({},ae.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),ye=this.createInternalLoader(Z),isFiniteNumber((ee=Z.deliveryDirectives)==null?void 0:ee.part)){let Je;if(Z.type===PlaylistContextType.LEVEL&&Z.level!==null?Je=this.hls.levels[Z.level].details:Z.type===PlaylistContextType.AUDIO_TRACK&&Z.id!==null?Je=this.hls.audioTracks[Z.id].details:Z.type===PlaylistContextType.SUBTITLE_TRACK&&Z.id!==null&&(Je=this.hls.subtitleTracks[Z.id].details),Je){const tt=Je.partTarget,it=Je.targetduration;if(tt&&it){const st=Math.max(tt*3,it*.8)*1e3;ve=_extends({},ve,{maxTimeToFirstByteMs:Math.min(st,ve.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(st,ve.maxTimeToFirstByteMs)})}}}const be=ve.errorRetry||ve.timeoutRetry||{},Qe={loadPolicy:ve,timeout:ve.maxLoadTimeMs,maxRetry:be.maxNumRetry||0,retryDelay:be.retryDelayMs||0,maxRetryDelay:be.maxRetryDelayMs||0},Xe={onSuccess:(Je,tt,it,st)=>{const lt=this.getInternalLoader(it);this.resetInternalLoader(it.type);const ct=Je.data;if(ct.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(Je,it,new Error("no EXTM3U delimiter"),st||null,tt);return}tt.parsing.start=performance.now(),M3U8Parser.isMediaPlaylist(ct)?this.handleTrackOrLevelPlaylist(Je,tt,it,st||null,lt):this.handleMasterPlaylist(Je,tt,it,st)},onError:(Je,tt,it,st)=>{this.handleNetworkError(tt,it,!1,Je,st)},onTimeout:(Je,tt,it)=>{this.handleNetworkError(tt,it,!0,void 0,Je)}};ye.load(Z,Qe,Xe)}handleMasterPlaylist(Z,ee,ae,ye){const ve=this.hls,be=Z.data,Qe=getResponseUrl(Z,ae),Xe=M3U8Parser.parseMasterPlaylist(be,Qe);if(Xe.playlistParsingError){this.handleManifestParsingError(Z,ae,Xe.playlistParsingError,ye,ee);return}const{contentSteering:Je,levels:tt,sessionData:it,sessionKeys:st,startTimeOffset:lt,variableList:ct}=Xe;this.variableList=ct;const{AUDIO:gt=[],SUBTITLES:ut,"CLOSED-CAPTIONS":mt}=M3U8Parser.parseMasterPlaylistMedia(be,Qe,Xe);gt.length&&!gt.some(ni=>!ni.url)&&tt[0].audioCodec&&!tt[0].attrs.AUDIO&&(logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),gt.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new AttrList({}),bitrate:0,url:""})),ve.trigger(Events.MANIFEST_LOADED,{levels:tt,audioTracks:gt,subtitles:ut,captions:mt,contentSteering:Je,url:Qe,stats:ee,networkDetails:ye,sessionData:it,sessionKeys:st,startTimeOffset:lt,variableList:ct})}handleTrackOrLevelPlaylist(Z,ee,ae,ye,ve){const be=this.hls,{id:Qe,level:Xe,type:Je}=ae,tt=getResponseUrl(Z,ae),it=0,st=isFiniteNumber(Xe)?Xe:isFiniteNumber(Qe)?Qe:0,lt=mapContextToLevelType(ae),ct=M3U8Parser.parseLevelPlaylist(Z.data,tt,st,lt,it,this.variableList);if(Je===PlaylistContextType.MANIFEST){const gt={attrs:new AttrList({}),bitrate:0,details:ct,name:"",url:tt};be.trigger(Events.MANIFEST_LOADED,{levels:[gt],audioTracks:[],url:tt,stats:ee,networkDetails:ye,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}ee.parsing.end=performance.now(),ae.levelDetails=ct,this.handlePlaylistLoaded(ct,Z,ee,ae,ye,ve)}handleManifestParsingError(Z,ee,ae,ye,ve){this.hls.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.MANIFEST_PARSING_ERROR,fatal:ee.type===PlaylistContextType.MANIFEST,url:Z.url,err:ae,error:ae,reason:ae.message,response:Z,context:ee,networkDetails:ye,stats:ve})}handleNetworkError(Z,ee,ae=!1,ye,ve){let be=`A network ${ae?"timeout":"error"+(ye?" (status "+ye.code+")":"")} occurred while loading ${Z.type}`;Z.type===PlaylistContextType.LEVEL?be+=`: ${Z.level} id: ${Z.id}`:(Z.type===PlaylistContextType.AUDIO_TRACK||Z.type===PlaylistContextType.SUBTITLE_TRACK)&&(be+=` id: ${Z.id} group-id: "${Z.groupId}"`);const Qe=new Error(be);logger.warn(`[playlist-loader]: ${be}`);let Xe=ErrorDetails.UNKNOWN,Je=!1;const tt=this.getInternalLoader(Z);switch(Z.type){case PlaylistContextType.MANIFEST:Xe=ae?ErrorDetails.MANIFEST_LOAD_TIMEOUT:ErrorDetails.MANIFEST_LOAD_ERROR,Je=!0;break;case PlaylistContextType.LEVEL:Xe=ae?ErrorDetails.LEVEL_LOAD_TIMEOUT:ErrorDetails.LEVEL_LOAD_ERROR,Je=!1;break;case PlaylistContextType.AUDIO_TRACK:Xe=ae?ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,Je=!1;break;case PlaylistContextType.SUBTITLE_TRACK:Xe=ae?ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:ErrorDetails.SUBTITLE_LOAD_ERROR,Je=!1;break}tt&&this.resetInternalLoader(Z.type);const it={type:ErrorTypes.NETWORK_ERROR,details:Xe,fatal:Je,url:Z.url,loader:tt,context:Z,error:Qe,networkDetails:ee,stats:ve};if(ye){const st=(ee==null?void 0:ee.url)||Z.url;it.response=_objectSpread2({url:st,data:void 0},ye)}this.hls.trigger(Events.ERROR,it)}handlePlaylistLoaded(Z,ee,ae,ye,ve,be){const Qe=this.hls,{type:Xe,level:Je,id:tt,groupId:it,deliveryDirectives:st}=ye,lt=getResponseUrl(ee,ye),ct=mapContextToLevelType(ye),gt=typeof ye.level=="number"&&ct===PlaylistLevelType.MAIN?Je:void 0;if(!Z.fragments.length){const mt=new Error("No Segments found in Playlist");Qe.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:lt,error:mt,reason:mt.message,response:ee,context:ye,level:gt,parent:ct,networkDetails:ve,stats:ae});return}Z.targetduration||(Z.playlistParsingError=new Error("Missing Target Duration"));const ut=Z.playlistParsingError;if(ut){Qe.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_PARSING_ERROR,fatal:!1,url:lt,error:ut,reason:ut.message,response:ee,context:ye,level:gt,parent:ct,networkDetails:ve,stats:ae});return}switch(Z.live&&be&&(be.getCacheAge&&(Z.ageHeader=be.getCacheAge()||0),(!be.getCacheAge||isNaN(Z.ageHeader))&&(Z.ageHeader=0)),Xe){case PlaylistContextType.MANIFEST:case PlaylistContextType.LEVEL:Qe.trigger(Events.LEVEL_LOADED,{details:Z,level:gt||0,id:tt||0,stats:ae,networkDetails:ve,deliveryDirectives:st});break;case PlaylistContextType.AUDIO_TRACK:Qe.trigger(Events.AUDIO_TRACK_LOADED,{details:Z,id:tt||0,groupId:it||"",stats:ae,networkDetails:ve,deliveryDirectives:st});break;case PlaylistContextType.SUBTITLE_TRACK:Qe.trigger(Events.SUBTITLE_TRACK_LOADED,{details:Z,id:tt||0,groupId:it||"",stats:ae,networkDetails:ve,deliveryDirectives:st});break}}}function sendAddTrackEvent(ie,Z){let ee;try{ee=new Event("addtrack")}catch{ee=document.createEvent("Event"),ee.initEvent("addtrack",!1,!1)}ee.track=ie,Z.dispatchEvent(ee)}function addCueToTrack(ie,Z){const ee=ie.mode;if(ee==="disabled"&&(ie.mode="hidden"),ie.cues&&!ie.cues.getCueById(Z.id))try{if(ie.addCue(Z),!ie.cues.getCueById(Z.id))throw new Error(`addCue is failed for: ${Z}`)}catch(ae){logger.debug(`[texttrack-utils]: ${ae}`);try{const ye=new self.TextTrackCue(Z.startTime,Z.endTime,Z.text);ye.id=Z.id,ie.addCue(ye)}catch(ye){logger.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${ye}`)}}ee==="disabled"&&(ie.mode=ee)}function clearCurrentCues(ie){const Z=ie.mode;if(Z==="disabled"&&(ie.mode="hidden"),ie.cues)for(let ee=ie.cues.length;ee--;)ie.removeCue(ie.cues[ee]);Z==="disabled"&&(ie.mode=Z)}function removeCuesInRange(ie,Z,ee,ae){const ye=ie.mode;if(ye==="disabled"&&(ie.mode="hidden"),ie.cues&&ie.cues.length>0){const ve=getCuesInRange(ie.cues,Z,ee);for(let be=0;be<ve.length;be++)(!ae||ae(ve[be]))&&ie.removeCue(ve[be])}ye==="disabled"&&(ie.mode=ye)}function getFirstCueIndexAfterTime(ie,Z){if(Z<ie[0].startTime)return 0;const ee=ie.length-1;if(Z>ie[ee].endTime)return-1;let ae=0,ye=ee;for(;ae<=ye;){const ve=Math.floor((ye+ae)/2);if(Z<ie[ve].startTime)ye=ve-1;else if(Z>ie[ve].startTime&&ae<ee)ae=ve+1;else return ve}return ie[ae].startTime-Z<Z-ie[ye].startTime?ae:ye}function getCuesInRange(ie,Z,ee){const ae=[],ye=getFirstCueIndexAfterTime(ie,Z);if(ye>-1)for(let ve=ye,be=ie.length;ve<be;ve++){const Qe=ie[ve];if(Qe.startTime>=Z&&Qe.endTime<=ee)ae.push(Qe);else if(Qe.startTime>ee)return ae}return ae}function filterSubtitleTracks(ie){const Z=[];for(let ee=0;ee<ie.length;ee++){const ae=ie[ee];(ae.kind==="subtitles"||ae.kind==="captions")&&ae.label&&Z.push(ie[ee])}return Z}var MetadataSchema={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const MIN_CUE_DURATION=.25;function getCueClass(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function createCueWithDataFields(ie,Z,ee,ae,ye){let ve=new ie(Z,ee,"");try{ve.value=ae,ye&&(ve.type=ye)}catch{ve=new ie(Z,ee,JSON.stringify(ye?_objectSpread2({type:ye},ae):ae))}return ve}const MAX_CUE_ENDTIME=(()=>{const ie=getCueClass();try{ie&&new ie(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function dateRangeDateToTimelineSeconds(ie,Z){return ie.getTime()/1e3-Z}function hexToArrayBuffer(ie){return Uint8Array.from(ie.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class ID3TrackController{constructor(Z){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=Z,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:Z}=this;Z.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),Z.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:Z}=this;Z.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),Z.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(Z,ee){this.media=ee.media}onMediaDetaching(){this.id3Track&&(clearCurrentCues(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(Z){const ee=this.getID3Track(Z.textTracks);return ee.mode="hidden",ee}getID3Track(Z){if(this.media){for(let ee=0;ee<Z.length;ee++){const ae=Z[ee];if(ae.kind==="metadata"&&ae.label==="id3")return sendAddTrackEvent(ae,this.media),ae}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(Z,ee){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:ae,enableID3MetadataCues:ye}}}=this;if(!ae&&!ye)return;const{samples:ve}=ee;this.id3Track||(this.id3Track=this.createTrack(this.media));const be=getCueClass();if(be)for(let Qe=0;Qe<ve.length;Qe++){const Xe=ve[Qe].type;if(Xe===MetadataSchema.emsg&&!ae||!ye)continue;const Je=getID3Frames(ve[Qe].data);if(Je){const tt=ve[Qe].pts;let it=tt+ve[Qe].duration;it>MAX_CUE_ENDTIME&&(it=MAX_CUE_ENDTIME),it-tt<=0&&(it=tt+MIN_CUE_DURATION);for(let lt=0;lt<Je.length;lt++){const ct=Je[lt];if(!isTimeStampFrame(ct)){this.updateId3CueEnds(tt,Xe);const gt=createCueWithDataFields(be,tt,it,ct,Xe);gt&&this.id3Track.addCue(gt)}}}}}updateId3CueEnds(Z,ee){var ae;const ye=(ae=this.id3Track)==null?void 0:ae.cues;if(ye)for(let ve=ye.length;ve--;){const be=ye[ve];be.type===ee&&be.startTime<Z&&be.endTime===MAX_CUE_ENDTIME&&(be.endTime=Z)}}onBufferFlushing(Z,{startOffset:ee,endOffset:ae,type:ye}){const{id3Track:ve,hls:be}=this;if(!be)return;const{config:{enableEmsgMetadataCues:Qe,enableID3MetadataCues:Xe}}=be;if(ve&&(Qe||Xe)){let Je;ye==="audio"?Je=tt=>tt.type===MetadataSchema.audioId3&&Xe:ye==="video"?Je=tt=>tt.type===MetadataSchema.emsg&&Qe:Je=tt=>tt.type===MetadataSchema.audioId3&&Xe||tt.type===MetadataSchema.emsg&&Qe,removeCuesInRange(ve,ee,ae,Je)}}onLevelUpdated(Z,{details:ee}){if(!this.media||!ee.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:ae,id3Track:ye}=this,{dateRanges:ve}=ee,be=Object.keys(ve);if(ye){const tt=Object.keys(ae).filter(it=>!be.includes(it));for(let it=tt.length;it--;){const st=tt[it];Object.keys(ae[st].cues).forEach(lt=>{ye.removeCue(ae[st].cues[lt])}),delete ae[st]}}const Qe=ee.fragments[ee.fragments.length-1];if(be.length===0||!isFiniteNumber(Qe==null?void 0:Qe.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const Xe=Qe.programDateTime/1e3-Qe.start,Je=getCueClass();for(let tt=0;tt<be.length;tt++){const it=be[tt],st=ve[it],lt=dateRangeDateToTimelineSeconds(st.startDate,Xe),ct=ae[it],gt=(ct==null?void 0:ct.cues)||{};let ut=(ct==null?void 0:ct.durationKnown)||!1,mt=MAX_CUE_ENDTIME;const ei=st.endDate;if(ei)mt=dateRangeDateToTimelineSeconds(ei,Xe),ut=!0;else if(st.endOnNext&&!ut){const ri=be.reduce((si,li)=>{if(li!==st.id){const ai=ve[li];if(ai.class===st.class&&ai.startDate>st.startDate&&(!si||st.startDate<si.startDate))return ai}return si},null);ri&&(mt=dateRangeDateToTimelineSeconds(ri.startDate,Xe),ut=!0)}const ni=Object.keys(st.attr);for(let ri=0;ri<ni.length;ri++){const si=ni[ri];if(!isDateRangeCueAttribute(si))continue;const li=gt[si];if(li)ut&&!ct.durationKnown&&(li.endTime=mt);else if(Je){let ai=st.attr[si];isSCTE35Attribute(si)&&(ai=hexToArrayBuffer(ai));const ci=createCueWithDataFields(Je,lt,mt,{key:si,data:ai},MetadataSchema.dateRange);ci&&(ci.id=it,this.id3Track.addCue(ci),gt[si]=ci)}}ae[it]={cues:gt,dateRange:st,durationKnown:ut}}}}class LatencyController{constructor(Z){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=Z,this.config=Z.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:Z,levelDetails:ee}=this;return Z.liveMaxLatencyDuration!==void 0?Z.liveMaxLatencyDuration:ee?Z.liveMaxLatencyDurationCount*ee.targetduration:0}get targetLatency(){const{levelDetails:Z}=this;if(Z===null)return null;const{holdBack:ee,partHoldBack:ae,targetduration:ye}=Z,{liveSyncDuration:ve,liveSyncDurationCount:be,lowLatencyMode:Qe}=this.config,Xe=this.hls.userConfig;let Je=Qe&&ae||ee;(Xe.liveSyncDuration||Xe.liveSyncDurationCount||Je===0)&&(Je=ve!==void 0?ve:be*ye);const tt=ye;return Je+Math.min(this.stallCount*1,tt)}get liveSyncPosition(){const Z=this.estimateLiveEdge(),ee=this.targetLatency,ae=this.levelDetails;if(Z===null||ee===null||ae===null)return null;const ye=ae.edge,ve=Z-ee-this.edgeStalled,be=ye-ae.totalduration,Qe=ye-(this.config.lowLatencyMode&&ae.partTarget||ae.targetduration);return Math.min(Math.max(be,ve),Qe)}get drift(){const{levelDetails:Z}=this;return Z===null?1:Z.drift}get edgeStalled(){const{levelDetails:Z}=this;if(Z===null)return 0;const ee=(this.config.lowLatencyMode&&Z.partTarget||Z.targetduration)*3;return Math.max(Z.age-ee,0)}get forwardBufferLength(){const{media:Z,levelDetails:ee}=this;if(!Z||!ee)return 0;const ae=Z.buffered.length;return(ae?Z.buffered.end(ae-1):ee.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Events.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Events.ERROR,this.onError,this)}onMediaAttached(Z,ee){this.media=ee.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(Z,{details:ee}){this.levelDetails=ee,ee.advanced&&this.timeupdate(),!ee.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(Z,ee){var ae;ee.details===ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,(ae=this.levelDetails)!=null&&ae.live&&logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:Z,levelDetails:ee}=this;if(!Z||!ee)return;this.currentTime=Z.currentTime;const ae=this.computeLatency();if(ae===null)return;this._latency=ae;const{lowLatencyMode:ye,maxLiveSyncPlaybackRate:ve}=this.config;if(!ye||ve===1||!ee.live)return;const be=this.targetLatency;if(be===null)return;const Qe=ae-be,Xe=Math.min(this.maxLatency,be+ee.targetduration);if(Qe<Xe&&Qe>.05&&this.forwardBufferLength>1){const tt=Math.min(2,Math.max(1,ve)),it=Math.round(2/(1+Math.exp(-.75*Qe-this.edgeStalled))*20)/20;Z.playbackRate=Math.min(tt,Math.max(1,it))}else Z.playbackRate!==1&&Z.playbackRate!==0&&(Z.playbackRate=1)}estimateLiveEdge(){const{levelDetails:Z}=this;return Z===null?null:Z.edge+Z.age}computeLatency(){const Z=this.estimateLiveEdge();return Z===null?null:Z-this.currentTime}}const HdcpLevels=["NONE","TYPE-0","TYPE-1",null];function isHdcpLevel(ie){return HdcpLevels.indexOf(ie)>-1}const VideoRangeValues=["SDR","PQ","HLG"];function isVideoRange(ie){return!!ie&&VideoRangeValues.indexOf(ie)>-1}var HlsSkip={No:"",Yes:"YES",v2:"v2"};function getSkipValue(ie,Z){const{canSkipUntil:ee,canSkipDateRanges:ae,endSN:ye}=ie,ve=Z!==void 0?Z-ye:0;return ee&&ve<ee?ae?HlsSkip.v2:HlsSkip.Yes:HlsSkip.No}class HlsUrlParameters{constructor(Z,ee,ae){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=Z,this.part=ee,this.skip=ae}addDirectives(Z){const ee=new self.URL(Z);return this.msn!==void 0&&ee.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&ee.searchParams.set("_HLS_part",this.part.toString()),this.skip&&ee.searchParams.set("_HLS_skip",this.skip),ee.href}}class Level{constructor(Z){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[Z.url],this._attrs=[Z.attrs],this.bitrate=Z.bitrate,Z.details&&(this.details=Z.details),this.id=Z.id||0,this.name=Z.name,this.width=Z.width||0,this.height=Z.height||0,this.frameRate=Z.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=Z.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=Z.audioCodec,this.videoCodec=Z.videoCodec,this.codecSet=[Z.videoCodec,Z.audioCodec].filter(ee=>!!ee).map(ee=>ee.substring(0,4)).join(","),this.addGroupId("audio",Z.attrs.AUDIO),this.addGroupId("text",Z.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(Z){return hasGroup(this._audioGroups,Z)}hasSubtitleGroup(Z){return hasGroup(this._subtitleGroups,Z)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(Z,ee){if(ee){if(Z==="audio"){let ae=this._audioGroups;ae||(ae=this._audioGroups=[]),ae.indexOf(ee)===-1&&ae.push(ee)}else if(Z==="text"){let ae=this._subtitleGroups;ae||(ae=this._subtitleGroups=[]),ae.indexOf(ee)===-1&&ae.push(ee)}}}get urlId(){return 0}set urlId(Z){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var Z;return(Z=this.audioGroups)==null?void 0:Z[0]}get textGroupId(){var Z;return(Z=this.subtitleGroups)==null?void 0:Z[0]}addFallback(){}}function hasGroup(ie,Z){return!Z||!ie?!1:ie.indexOf(Z)!==-1}function updateFromToPTS(ie,Z){const ee=Z.startPTS;if(isFiniteNumber(ee)){let ae=0,ye;Z.sn>ie.sn?(ae=ee-ie.start,ye=ie):(ae=ie.start-ee,ye=Z),ye.duration!==ae&&(ye.duration=ae)}else Z.sn>ie.sn?ie.cc===Z.cc&&ie.minEndPTS?Z.start=ie.start+(ie.minEndPTS-ie.start):Z.start=ie.start+ie.duration:Z.start=Math.max(ie.start-Z.duration,0)}function updateFragPTSDTS(ie,Z,ee,ae,ye,ve){ae-ee<=0&&(logger.warn("Fragment should have a positive duration",Z),ae=ee+Z.duration,ve=ye+Z.duration);let Qe=ee,Xe=ae;const Je=Z.startPTS,tt=Z.endPTS;if(isFiniteNumber(Je)){const ut=Math.abs(Je-ee);isFiniteNumber(Z.deltaPTS)?Z.deltaPTS=Math.max(ut,Z.deltaPTS):Z.deltaPTS=ut,Qe=Math.max(ee,Je),ee=Math.min(ee,Je),ye=Math.min(ye,Z.startDTS),Xe=Math.min(ae,tt),ae=Math.max(ae,tt),ve=Math.max(ve,Z.endDTS)}const it=ee-Z.start;Z.start!==0&&(Z.start=ee),Z.duration=ae-Z.start,Z.startPTS=ee,Z.maxStartPTS=Qe,Z.startDTS=ye,Z.endPTS=ae,Z.minEndPTS=Xe,Z.endDTS=ve;const st=Z.sn;if(!ie||st<ie.startSN||st>ie.endSN)return 0;let lt;const ct=st-ie.startSN,gt=ie.fragments;for(gt[ct]=Z,lt=ct;lt>0;lt--)updateFromToPTS(gt[lt],gt[lt-1]);for(lt=ct;lt<gt.length-1;lt++)updateFromToPTS(gt[lt],gt[lt+1]);return ie.fragmentHint&&updateFromToPTS(gt[gt.length-1],ie.fragmentHint),ie.PTSKnown=ie.alignedSliding=!0,it}function mergeDetails(ie,Z){let ee=null;const ae=ie.fragments;for(let Xe=ae.length-1;Xe>=0;Xe--){const Je=ae[Xe].initSegment;if(Je){ee=Je;break}}ie.fragmentHint&&delete ie.fragmentHint.endPTS;let ye=0,ve;if(mapFragmentIntersection(ie,Z,(Xe,Je)=>{Xe.relurl&&(ye=Xe.cc-Je.cc),isFiniteNumber(Xe.startPTS)&&isFiniteNumber(Xe.endPTS)&&(Je.start=Je.startPTS=Xe.startPTS,Je.startDTS=Xe.startDTS,Je.maxStartPTS=Xe.maxStartPTS,Je.endPTS=Xe.endPTS,Je.endDTS=Xe.endDTS,Je.minEndPTS=Xe.minEndPTS,Je.duration=Xe.endPTS-Xe.startPTS,Je.duration&&(ve=Je),Z.PTSKnown=Z.alignedSliding=!0),Je.elementaryStreams=Xe.elementaryStreams,Je.loader=Xe.loader,Je.stats=Xe.stats,Xe.initSegment&&(Je.initSegment=Xe.initSegment,ee=Xe.initSegment)}),ee&&(Z.fragmentHint?Z.fragments.concat(Z.fragmentHint):Z.fragments).forEach(Je=>{var tt;Je&&(!Je.initSegment||Je.initSegment.relurl===((tt=ee)==null?void 0:tt.relurl))&&(Je.initSegment=ee)}),Z.skippedSegments)if(Z.deltaUpdateFailed=Z.fragments.some(Xe=>!Xe),Z.deltaUpdateFailed){logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let Xe=Z.skippedSegments;Xe--;)Z.fragments.shift();Z.startSN=Z.fragments[0].sn,Z.startCC=Z.fragments[0].cc}else Z.canSkipDateRanges&&(Z.dateRanges=mergeDateRanges(ie.dateRanges,Z.dateRanges,Z.recentlyRemovedDateranges));const be=Z.fragments;if(ye){logger.warn("discontinuity sliding from playlist, take drift into account");for(let Xe=0;Xe<be.length;Xe++)be[Xe].cc+=ye}Z.skippedSegments&&(Z.startCC=Z.fragments[0].cc),mapPartIntersection(ie.partList,Z.partList,(Xe,Je)=>{Je.elementaryStreams=Xe.elementaryStreams,Je.stats=Xe.stats}),ve?updateFragPTSDTS(Z,ve,ve.startPTS,ve.endPTS,ve.startDTS,ve.endDTS):adjustSliding(ie,Z),be.length&&(Z.totalduration=Z.edge-be[0].start),Z.driftStartTime=ie.driftStartTime,Z.driftStart=ie.driftStart;const Qe=Z.advancedDateTime;if(Z.advanced&&Qe){const Xe=Z.edge;Z.driftStart||(Z.driftStartTime=Qe,Z.driftStart=Xe),Z.driftEndTime=Qe,Z.driftEnd=Xe}else Z.driftEndTime=ie.driftEndTime,Z.driftEnd=ie.driftEnd,Z.advancedDateTime=ie.advancedDateTime}function mergeDateRanges(ie,Z,ee){const ae=_extends({},ie);return ee&&ee.forEach(ye=>{delete ae[ye]}),Object.keys(Z).forEach(ye=>{const ve=new DateRange(Z[ye].attr,ae[ye]);ve.isValid?ae[ye]=ve:logger.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(Z[ye].attr)}"`)}),ae}function mapPartIntersection(ie,Z,ee){if(ie&&Z){let ae=0;for(let ye=0,ve=ie.length;ye<=ve;ye++){const be=ie[ye],Qe=Z[ye+ae];be&&Qe&&be.index===Qe.index&&be.fragment.sn===Qe.fragment.sn?ee(be,Qe):ae--}}}function mapFragmentIntersection(ie,Z,ee){const ae=Z.skippedSegments,ye=Math.max(ie.startSN,Z.startSN)-Z.startSN,ve=(ie.fragmentHint?1:0)+(ae?Z.endSN:Math.min(ie.endSN,Z.endSN))-Z.startSN,be=Z.startSN-ie.startSN,Qe=Z.fragmentHint?Z.fragments.concat(Z.fragmentHint):Z.fragments,Xe=ie.fragmentHint?ie.fragments.concat(ie.fragmentHint):ie.fragments;for(let Je=ye;Je<=ve;Je++){const tt=Xe[be+Je];let it=Qe[Je];ae&&!it&&Je<ae&&(it=Z.fragments[Je]=tt),tt&&it&&ee(tt,it)}}function adjustSliding(ie,Z){const ee=Z.startSN+Z.skippedSegments-ie.startSN,ae=ie.fragments;ee<0||ee>=ae.length||addSliding(Z,ae[ee].start)}function addSliding(ie,Z){if(Z){const ee=ie.fragments;for(let ae=ie.skippedSegments;ae<ee.length;ae++)ee[ae].start+=Z;ie.fragmentHint&&(ie.fragmentHint.start+=Z)}}function computeReloadInterval(ie,Z=1/0){let ee=1e3*ie.targetduration;if(ie.updated){const ae=ie.fragments;if(ae.length&&ee*4>Z){const ve=ae[ae.length-1].duration*1e3;ve<ee&&(ee=ve)}}else ee/=2;return Math.round(ee)}function getFragmentWithSN(ie,Z,ee){if(!(ie!=null&&ie.details))return null;const ae=ie.details;let ye=ae.fragments[Z-ae.startSN];return ye||(ye=ae.fragmentHint,ye&&ye.sn===Z)?ye:Z<ae.startSN&&ee&&ee.sn===Z?ee:null}function getPartWith(ie,Z,ee){var ae;return ie!=null&&ie.details?findPart((ae=ie.details)==null?void 0:ae.partList,Z,ee):null}function findPart(ie,Z,ee){if(ie)for(let ae=ie.length;ae--;){const ye=ie[ae];if(ye.index===ee&&ye.fragment.sn===Z)return ye}return null}function reassignFragmentLevelIndexes(ie){ie.forEach((Z,ee)=>{const{details:ae}=Z;ae!=null&&ae.fragments&&ae.fragments.forEach(ye=>{ye.level=ee})})}function isTimeoutError(ie){switch(ie.details){case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_TIMEOUT:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function getRetryConfig(ie,Z){const ee=isTimeoutError(Z);return ie.default[`${ee?"timeout":"error"}Retry`]}function getRetryDelay(ie,Z){const ee=ie.backoff==="linear"?1:Math.pow(2,Z);return Math.min(ee*ie.retryDelayMs,ie.maxRetryDelayMs)}function getLoaderConfigWithoutReties(ie){return _objectSpread2(_objectSpread2({},ie),{errorRetry:null,timeoutRetry:null})}function shouldRetry(ie,Z,ee,ae){if(!ie)return!1;const ye=ae==null?void 0:ae.code,ve=Z<ie.maxNumRetry&&(retryForHttpStatus(ye)||!!ee);return ie.shouldRetry?ie.shouldRetry(ie,Z,ee,ae,ve):ve}function retryForHttpStatus(ie){return ie===0&&navigator.onLine===!1||!!ie&&(ie<400||ie>499)}const BinarySearch={search:function(ie,Z){let ee=0,ae=ie.length-1,ye=null,ve=null;for(;ee<=ae;){ye=(ee+ae)/2|0,ve=ie[ye];const be=Z(ve);if(be>0)ee=ye+1;else if(be<0)ae=ye-1;else return ve}return null}};function findFragmentByPDT(ie,Z,ee){if(Z===null||!Array.isArray(ie)||!ie.length||!isFiniteNumber(Z))return null;const ae=ie[0].programDateTime;if(Z<(ae||0))return null;const ye=ie[ie.length-1].endProgramDateTime;if(Z>=(ye||0))return null;ee=ee||0;for(let ve=0;ve<ie.length;++ve){const be=ie[ve];if(pdtWithinToleranceTest(Z,ee,be))return be}return null}function findFragmentByPTS(ie,Z,ee=0,ae=0){let ye=null;if(ie){ye=Z[ie.sn-Z[0].sn+1]||null;const be=ie.endDTS-ee;be>0&&be<15e-7&&(ee+=15e-7)}else ee===0&&Z[0].start===0&&(ye=Z[0]);if(ye&&(!ie||ie.level===ye.level)&&fragmentWithinToleranceTest(ee,ae,ye)===0)return ye;const ve=BinarySearch.search(Z,fragmentWithinToleranceTest.bind(null,ee,ae));return ve&&(ve!==ie||!ye)?ve:ye}function fragmentWithinToleranceTest(ie=0,Z=0,ee){if(ee.start<=ie&&ee.start+ee.duration>ie)return 0;const ae=Math.min(Z,ee.duration+(ee.deltaPTS?ee.deltaPTS:0));return ee.start+ee.duration-ae<=ie?1:ee.start-ae>ie&&ee.start?-1:0}function pdtWithinToleranceTest(ie,Z,ee){const ae=Math.min(Z,ee.duration+(ee.deltaPTS?ee.deltaPTS:0))*1e3;return(ee.endProgramDateTime||0)-ae>ie}function findFragWithCC(ie,Z){return BinarySearch.search(ie,ee=>ee.cc<Z?1:ee.cc>Z?-1:0)}var NetworkErrorAction={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ErrorActionFlags={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ErrorController{constructor(Z){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=Z,this.log=logger.log.bind(logger,"[info]:"),this.warn=logger.warn.bind(logger,"[warning]:"),this.error=logger.error.bind(logger,"[error]:"),this.registerListeners()}registerListeners(){const Z=this.hls;Z.on(Events.ERROR,this.onError,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const Z=this.hls;Z&&(Z.off(Events.ERROR,this.onError,this),Z.off(Events.ERROR,this.onErrorOut,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(Z){}stopLoad(){this.playlistError=0}getVariantLevelIndex(Z){return(Z==null?void 0:Z.type)===PlaylistLevelType.MAIN?Z.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(Z,ee){var ae,ye;if(ee.fatal)return;const ve=this.hls,be=ee.context;switch(ee.details){case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:ee.errorAction=this.getFragRetryOrSwitchAction(ee);return;case ErrorDetails.FRAG_PARSING_ERROR:if((ae=ee.frag)!=null&&ae.gap){ee.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_DECRYPT_ERROR:{ee.errorAction=this.getFragRetryOrSwitchAction(ee),ee.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox;return}case ErrorDetails.LEVEL_EMPTY_ERROR:case ErrorDetails.LEVEL_PARSING_ERROR:{var Qe,Xe;const Je=ee.parent===PlaylistLevelType.MAIN?ee.level:ve.loadLevel;ee.details===ErrorDetails.LEVEL_EMPTY_ERROR&&((Qe=ee.context)!=null&&(Xe=Qe.levelDetails)!=null&&Xe.live)?ee.errorAction=this.getPlaylistRetryOrSwitchAction(ee,Je):(ee.levelRetry=!1,ee.errorAction=this.getLevelSwitchAction(ee,Je))}return;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:typeof(be==null?void 0:be.level)=="number"&&(ee.errorAction=this.getPlaylistRetryOrSwitchAction(ee,be.level));return;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.SUBTITLE_LOAD_ERROR:case ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:if(be){const Je=ve.levels[ve.loadLevel];if(Je&&(be.type===PlaylistContextType.AUDIO_TRACK&&Je.hasAudioGroup(be.groupId)||be.type===PlaylistContextType.SUBTITLE_TRACK&&Je.hasSubtitleGroup(be.groupId))){ee.errorAction=this.getPlaylistRetryOrSwitchAction(ee,ve.loadLevel),ee.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox,ee.errorAction.flags=ErrorActionFlags.MoveAllAlternatesMatchingHost;return}}return;case ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const Je=ve.levels[ve.loadLevel],tt=Je==null?void 0:Je.attrs["HDCP-LEVEL"];tt?ee.errorAction={action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHDCP,hdcpLevel:tt}:this.keySystemError(ee)}return;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.REMUX_ALLOC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:ee.errorAction=this.getLevelSwitchAction(ee,(ye=ee.level)!=null?ye:ve.loadLevel);return;case ErrorDetails.INTERNAL_EXCEPTION:case ErrorDetails.BUFFER_APPENDING_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:case ErrorDetails.LEVEL_SWITCH_ERROR:case ErrorDetails.BUFFER_STALLED_ERROR:case ErrorDetails.BUFFER_SEEK_OVER_HOLE:case ErrorDetails.BUFFER_NUDGE_ON_STALL:ee.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}ee.type===ErrorTypes.KEY_SYSTEM_ERROR&&this.keySystemError(ee)}keySystemError(Z){const ee=this.getVariantLevelIndex(Z.frag);Z.levelRetry=!1,Z.errorAction=this.getLevelSwitchAction(Z,ee)}getPlaylistRetryOrSwitchAction(Z,ee){const ae=this.hls,ye=getRetryConfig(ae.config.playlistLoadPolicy,Z),ve=this.playlistError++;if(shouldRetry(ye,ve,isTimeoutError(Z),Z.response))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:ye,retryCount:ve};const Qe=this.getLevelSwitchAction(Z,ee);return ye&&(Qe.retryConfig=ye,Qe.retryCount=ve),Qe}getFragRetryOrSwitchAction(Z){const ee=this.hls,ae=this.getVariantLevelIndex(Z.frag),ye=ee.levels[ae],{fragLoadPolicy:ve,keyLoadPolicy:be}=ee.config,Qe=getRetryConfig(Z.details.startsWith("key")?be:ve,Z),Xe=ee.levels.reduce((tt,it)=>tt+it.fragmentError,0);if(ye&&(Z.details!==ErrorDetails.FRAG_GAP&&ye.fragmentError++,shouldRetry(Qe,Xe,isTimeoutError(Z),Z.response)))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:Qe,retryCount:Xe};const Je=this.getLevelSwitchAction(Z,ae);return Qe&&(Je.retryConfig=Qe,Je.retryCount=Xe),Je}getLevelSwitchAction(Z,ee){const ae=this.hls;ee==null&&(ee=ae.loadLevel);const ye=this.hls.levels[ee];if(ye){var ve,be;const Je=Z.details;ye.loadError++,Je===ErrorDetails.BUFFER_APPEND_ERROR&&ye.fragmentError++;let tt=-1;const{levels:it,loadLevel:st,minAutoLevel:lt,maxAutoLevel:ct}=ae;ae.autoLevelEnabled||(ae.loadLevel=-1);const gt=(ve=Z.frag)==null?void 0:ve.type,mt=(gt===PlaylistLevelType.AUDIO&&Je===ErrorDetails.FRAG_PARSING_ERROR||Z.sourceBufferName==="audio"&&(Je===ErrorDetails.BUFFER_ADD_CODEC_ERROR||Je===ErrorDetails.BUFFER_APPEND_ERROR))&&it.some(({audioCodec:li})=>ye.audioCodec!==li),ni=Z.sourceBufferName==="video"&&(Je===ErrorDetails.BUFFER_ADD_CODEC_ERROR||Je===ErrorDetails.BUFFER_APPEND_ERROR)&&it.some(({codecSet:li,audioCodec:ai})=>ye.codecSet!==li&&ye.audioCodec===ai),{type:ri,groupId:si}=(be=Z.context)!=null?be:{};for(let li=it.length;li--;){const ai=(li+st)%it.length;if(ai!==st&&ai>=lt&&ai<=ct&&it[ai].loadError===0){var Qe,Xe;const ci=it[ai];if(Je===ErrorDetails.FRAG_GAP&&Z.frag){const Ci=it[ai].details;if(Ci){const pi=findFragmentByPTS(Z.frag,Ci.fragments,Z.frag.start);if(pi!=null&&pi.gap)continue}}else{if(ri===PlaylistContextType.AUDIO_TRACK&&ci.hasAudioGroup(si)||ri===PlaylistContextType.SUBTITLE_TRACK&&ci.hasSubtitleGroup(si))continue;if(gt===PlaylistLevelType.AUDIO&&(Qe=ye.audioGroups)!=null&&Qe.some(Ci=>ci.hasAudioGroup(Ci))||gt===PlaylistLevelType.SUBTITLE&&(Xe=ye.subtitleGroups)!=null&&Xe.some(Ci=>ci.hasSubtitleGroup(Ci))||mt&&ye.audioCodec===ci.audioCodec||!mt&&ye.audioCodec!==ci.audioCodec||ni&&ye.codecSet===ci.codecSet)continue}tt=ai;break}}if(tt>-1&&ae.loadLevel!==tt)return Z.levelRetry=!0,this.playlistError=0,{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.None,nextAutoLevel:tt}}return{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHost}}onErrorOut(Z,ee){var ae;switch((ae=ee.errorAction)==null?void 0:ae.action){case NetworkErrorAction.DoNothing:break;case NetworkErrorAction.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(ee),!ee.errorAction.resolved&&ee.details!==ErrorDetails.FRAG_GAP?ee.fatal=!0:/MediaSource readyState: ended/.test(ee.error.message)&&(this.warn(`MediaSource ended after "${ee.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(ee.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(Z){const ee=this.hls,ae=Z.errorAction;if(!ae)return;const{flags:ye,hdcpLevel:ve,nextAutoLevel:be}=ae;switch(ye){case ErrorActionFlags.None:this.switchLevel(Z,be);break;case ErrorActionFlags.MoveAllAlternatesMatchingHDCP:ve&&(ee.maxHdcpLevel=HdcpLevels[HdcpLevels.indexOf(ve)-1],ae.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${ee.maxHdcpLevel}" or lower`);break}ae.resolved||this.switchLevel(Z,be)}switchLevel(Z,ee){ee!==void 0&&Z.errorAction&&(this.warn(`switching to level ${ee} after ${Z.details}`),this.hls.nextAutoLevel=ee,Z.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class BasePlaylistController{constructor(Z,ee){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=logger.log.bind(logger,`${ee}:`),this.warn=logger.warn.bind(logger,`${ee}:`),this.hls=Z}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(Z,ee){const ae=ee==null?void 0:ee.renditionReports;if(ae){let ye=-1;for(let ve=0;ve<ae.length;ve++){const be=ae[ve];let Qe;try{Qe=new self.URL(be.URI,ee.url).href}catch(Xe){logger.warn(`Could not construct new URL for Rendition Report: ${Xe}`),Qe=be.URI||""}if(Qe===Z){ye=ve;break}else Qe===Z.substring(0,Qe.length)&&(ye=ve)}if(ye!==-1){const ve=ae[ye],be=parseInt(ve["LAST-MSN"])||(ee==null?void 0:ee.lastPartSn);let Qe=parseInt(ve["LAST-PART"])||(ee==null?void 0:ee.lastPartIndex);if(this.hls.config.lowLatencyMode){const Xe=Math.min(ee.age-ee.partTarget,ee.targetduration);Qe>=0&&Xe>ee.partTarget&&(Qe+=1)}return new HlsUrlParameters(be,Qe>=0?Qe:void 0,HlsSkip.No)}}}loadPlaylist(Z){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(Z){return this.canLoad&&!!Z&&!!Z.url&&(!Z.details||Z.details.live)}shouldReloadPlaylist(Z){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(Z)}playlistLoaded(Z,ee,ae){const{details:ye,stats:ve}=ee,be=self.performance.now(),Qe=ve.loading.first?Math.max(0,be-ve.loading.first):0;if(ye.advancedDateTime=Date.now()-Qe,ye.live||ae!=null&&ae.live){if(ye.reloaded(ae),ae&&this.log(`live playlist ${Z} ${ye.advanced?"REFRESHED "+ye.lastPartSn+"-"+ye.lastPartIndex:ye.updated?"UPDATED":"MISSED"}`),ae&&ye.fragments.length>0&&mergeDetails(ae,ye),!this.canLoad||!ye.live)return;let Xe,Je,tt;if(ye.canBlockReload&&ye.endSN&&ye.advanced){const ut=this.hls.config.lowLatencyMode,mt=ye.lastPartSn,ei=ye.endSN,ni=ye.lastPartIndex,ri=ni!==-1,si=mt===ei,li=ut?0:ni;ri?(Je=si?ei+1:mt,tt=si?li:ni+1):Je=ei+1;const ai=ye.age,ci=ai+ye.ageHeader;let Ci=Math.min(ci-ye.partTarget,ye.targetduration*1.5);if(Ci>0){if(ae&&Ci>ae.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${ae.tuneInGoal} to: ${Ci} with playlist age: ${ye.age}`),Ci=0;else{const pi=Math.floor(Ci/ye.targetduration);if(Je+=pi,tt!==void 0){const gi=Math.round(Ci%ye.targetduration/ye.partTarget);tt+=gi}this.log(`CDN Tune-in age: ${ye.ageHeader}s last advanced ${ai.toFixed(2)}s goal: ${Ci} skip sn ${pi} to part ${tt}`)}ye.tuneInGoal=Ci}if(Xe=this.getDeliveryDirectives(ye,ee.deliveryDirectives,Je,tt),ut||!si){this.loadPlaylist(Xe);return}}else(ye.canBlockReload||ye.canSkipUntil)&&(Xe=this.getDeliveryDirectives(ye,ee.deliveryDirectives,Je,tt));const it=this.hls.mainForwardBufferInfo,st=it?it.end-it.len:0,lt=(ye.edge-st)*1e3,ct=computeReloadInterval(ye,lt);ye.updated&&be>this.requestScheduled+ct&&(this.requestScheduled=ve.loading.start),Je!==void 0&&ye.canBlockReload?this.requestScheduled=ve.loading.first+ct-(ye.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+ct<be?this.requestScheduled=be:this.requestScheduled-be<=0&&(this.requestScheduled+=ct);let gt=this.requestScheduled-be;gt=Math.max(0,gt),this.log(`reload live playlist ${Z} in ${Math.round(gt)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(Xe),gt)}else this.clearTimer()}getDeliveryDirectives(Z,ee,ae,ye){let ve=getSkipValue(Z,ae);return ee!=null&&ee.skip&&Z.deltaUpdateFailed&&(ae=ee.msn,ye=ee.part,ve=HlsSkip.No),new HlsUrlParameters(ae,ye,ve)}checkRetry(Z){const ee=Z.details,ae=isTimeoutError(Z),ye=Z.errorAction,{action:ve,retryCount:be=0,retryConfig:Qe}=ye||{},Xe=!!ye&&!!Qe&&(ve===NetworkErrorAction.RetryRequest||!ye.resolved&&ve===NetworkErrorAction.SendAlternateToPenaltyBox);if(Xe){var Je;if(this.requestScheduled=-1,be>=Qe.maxNumRetry)return!1;if(ae&&(Je=Z.context)!=null&&Je.deliveryDirectives)this.warn(`Retrying playlist loading ${be+1}/${Qe.maxNumRetry} after "${ee}" without delivery-directives`),this.loadPlaylist();else{const tt=getRetryDelay(Qe,be);this.timer=self.setTimeout(()=>this.loadPlaylist(),tt),this.warn(`Retrying playlist loading ${be+1}/${Qe.maxNumRetry} after "${ee}" in ${tt}ms`)}Z.levelRetry=!0,ye.resolved=!0}return Xe}}class EWMA{constructor(Z,ee=0,ae=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=Z,this.alpha_=Z?Math.exp(Math.log(.5)/Z):0,this.estimate_=ee,this.totalWeight_=ae}sample(Z,ee){const ae=Math.pow(this.alpha_,Z);this.estimate_=ee*(1-ae)+ae*this.estimate_,this.totalWeight_+=Z}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const Z=1-Math.pow(this.alpha_,this.totalWeight_);if(Z)return this.estimate_/Z}return this.estimate_}}class EwmaBandWidthEstimator{constructor(Z,ee,ae,ye=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=ae,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new EWMA(Z),this.fast_=new EWMA(ee),this.defaultTTFB_=ye,this.ttfb_=new EWMA(Z)}update(Z,ee){const{slow_:ae,fast_:ye,ttfb_:ve}=this;ae.halfLife!==Z&&(this.slow_=new EWMA(Z,ae.getEstimate(),ae.getTotalWeight())),ye.halfLife!==ee&&(this.fast_=new EWMA(ee,ye.getEstimate(),ye.getTotalWeight())),ve.halfLife!==Z&&(this.ttfb_=new EWMA(Z,ve.getEstimate(),ve.getTotalWeight()))}sample(Z,ee){Z=Math.max(Z,this.minDelayMs_);const ae=8*ee,ye=Z/1e3,ve=ae/ye;this.fast_.sample(ye,ve),this.slow_.sample(ye,ve)}sampleTTFB(Z){const ee=Z/1e3,ae=Math.sqrt(2)*Math.exp(-Math.pow(ee,2)/2);this.ttfb_.sample(ae,Math.max(Z,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const SUPPORTED_INFO_DEFAULT={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},SUPPORTED_INFO_CACHE={};function requiresMediaCapabilitiesDecodingInfo(ie,Z,ee,ae,ye,ve){const be=ie.audioCodec?ie.audioGroups:null,Qe=ve==null?void 0:ve.audioCodec,Xe=ve==null?void 0:ve.channels,Je=Xe?parseInt(Xe):Qe?1/0:2;let tt=null;if(be!=null&&be.length)try{be.length===1&&be[0]?tt=Z.groups[be[0]].channels:tt=be.reduce((it,st)=>{if(st){const lt=Z.groups[st];if(!lt)throw new Error(`Audio track group ${st} not found`);Object.keys(lt.channels).forEach(ct=>{it[ct]=(it[ct]||0)+lt.channels[ct]})}return it},{2:0})}catch{return!0}return ie.videoCodec!==void 0&&(ie.width>1920&&ie.height>1088||ie.height>1920&&ie.width>1088||ie.frameRate>Math.max(ae,30)||ie.videoRange!=="SDR"&&ie.videoRange!==ee||ie.bitrate>Math.max(ye,8e6))||!!tt&&isFiniteNumber(Je)&&Object.keys(tt).some(it=>parseInt(it)>Je)}function getMediaDecodingInfoPromise(ie,Z,ee){const ae=ie.videoCodec,ye=ie.audioCodec;if(!ae||!ye||!ee)return Promise.resolve(SUPPORTED_INFO_DEFAULT);const ve={width:ie.width,height:ie.height,bitrate:Math.ceil(Math.max(ie.bitrate*.9,ie.averageBitrate)),framerate:ie.frameRate||30},be=ie.videoRange;be!=="SDR"&&(ve.transferFunction=be.toLowerCase());const Qe=ae.split(",").map(Xe=>({type:"media-source",video:_objectSpread2(_objectSpread2({},ve),{},{contentType:mimeTypeForCodec(Xe,"video")})}));return ye&&ie.audioGroups&&ie.audioGroups.forEach(Xe=>{var Je;Xe&&((Je=Z.groups[Xe])==null||Je.tracks.forEach(tt=>{if(tt.groupId===Xe){const it=tt.channels||"",st=parseFloat(it);isFiniteNumber(st)&&st>2&&Qe.push.apply(Qe,ye.split(",").map(lt=>({type:"media-source",audio:{contentType:mimeTypeForCodec(lt,"audio"),channels:""+st}})))}}))}),Promise.all(Qe.map(Xe=>{const Je=getMediaDecodingInfoKey(Xe);return SUPPORTED_INFO_CACHE[Je]||(SUPPORTED_INFO_CACHE[Je]=ee.decodingInfo(Xe))})).then(Xe=>({supported:!Xe.some(Je=>!Je.supported),configurations:Qe,decodingInfoResults:Xe})).catch(Xe=>({supported:!1,configurations:Qe,decodingInfoResults:[],error:Xe}))}function getMediaDecodingInfoKey(ie){const{audio:Z,video:ee}=ie,ae=ee||Z;if(ae){const ye=ae.contentType.split('"')[1];if(ee)return`r${ee.height}x${ee.width}f${Math.ceil(ee.framerate)}${ee.transferFunction||"sd"}_${ye}_${Math.ceil(ee.bitrate/1e5)}`;if(Z)return`c${Z.channels}${Z.spatialRendering?"s":"n"}_${ye}`}return""}function isHdrSupported(){if(typeof matchMedia=="function"){const ie=matchMedia("(dynamic-range: high)"),Z=matchMedia("bad query");if(ie.media!==Z.media)return ie.matches===!0}return!1}function getVideoSelectionOptions(ie,Z){let ee=!1,ae=[];return ie&&(ee=ie!=="SDR",ae=[ie]),Z&&(ae=Z.allowedVideoRanges||VideoRangeValues.slice(0),ee=Z.preferHDR!==void 0?Z.preferHDR:isHdrSupported(),ee?ae=ae.filter(ye=>ye!=="SDR"):ae=["SDR"]),{preferHDR:ee,allowedVideoRanges:ae}}function getStartCodecTier(ie,Z,ee,ae,ye){const ve=Object.keys(ie),be=ae==null?void 0:ae.channels,Qe=ae==null?void 0:ae.audioCodec,Xe=be&&parseInt(be)===2;let Je=!0,tt=!1,it=1/0,st=1/0,lt=1/0,ct=0,gt=[];const{preferHDR:ut,allowedVideoRanges:mt}=getVideoSelectionOptions(Z,ye);for(let si=ve.length;si--;){const li=ie[ve[si]];Je=li.channels[2]>0,it=Math.min(it,li.minHeight),st=Math.min(st,li.minFramerate),lt=Math.min(lt,li.minBitrate);const ai=mt.filter(ci=>li.videoRanges[ci]>0);ai.length>0&&(tt=!0,gt=ai)}it=isFiniteNumber(it)?it:0,st=isFiniteNumber(st)?st:0;const ei=Math.max(1080,it),ni=Math.max(30,st);return lt=isFiniteNumber(lt)?lt:ee,ee=Math.max(lt,ee),tt||(Z=void 0,gt=[]),{codecSet:ve.reduce((si,li)=>{const ai=ie[li];if(li===si)return si;if(ai.minBitrate>ee)return logStartCodecCandidateIgnored(li,`min bitrate of ${ai.minBitrate} > current estimate of ${ee}`),si;if(!ai.hasDefaultAudio)return logStartCodecCandidateIgnored(li,"no renditions with default or auto-select sound found"),si;if(Qe&&li.indexOf(Qe.substring(0,4))%5!==0)return logStartCodecCandidateIgnored(li,`audio codec preference "${Qe}" not found`),si;if(be&&!Xe){if(!ai.channels[be])return logStartCodecCandidateIgnored(li,`no renditions with ${be} channel sound found (channels options: ${Object.keys(ai.channels)})`),si}else if((!Qe||Xe)&&Je&&ai.channels[2]===0)return logStartCodecCandidateIgnored(li,"no renditions with stereo sound found"),si;return ai.minHeight>ei?(logStartCodecCandidateIgnored(li,`min resolution of ${ai.minHeight} > maximum of ${ei}`),si):ai.minFramerate>ni?(logStartCodecCandidateIgnored(li,`min framerate of ${ai.minFramerate} > maximum of ${ni}`),si):gt.some(ci=>ai.videoRanges[ci]>0)?ai.maxScore<ct?(logStartCodecCandidateIgnored(li,`max score of ${ai.maxScore} < selected max of ${ct}`),si):si&&(codecsSetSelectionPreferenceValue(li)>=codecsSetSelectionPreferenceValue(si)||ai.fragmentError>ie[si].fragmentError)?si:(ct=ai.maxScore,li):(logStartCodecCandidateIgnored(li,`no variants with VIDEO-RANGE of ${JSON.stringify(gt)} found`),si)},void 0),videoRanges:gt,preferHDR:ut,minFramerate:st,minBitrate:lt}}function logStartCodecCandidateIgnored(ie,Z){logger.log(`[abr] start candidates with "${ie}" ignored because ${Z}`)}function getAudioTracksByGroup(ie){return ie.reduce((Z,ee)=>{let ae=Z.groups[ee.groupId];ae||(ae=Z.groups[ee.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),ae.tracks.push(ee);const ye=ee.channels||"2";return ae.channels[ye]=(ae.channels[ye]||0)+1,ae.hasDefault=ae.hasDefault||ee.default,ae.hasAutoSelect=ae.hasAutoSelect||ee.autoselect,ae.hasDefault&&(Z.hasDefaultAudio=!0),ae.hasAutoSelect&&(Z.hasAutoSelectAudio=!0),Z},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function getCodecTiers(ie,Z,ee,ae){return ie.slice(ee,ae+1).reduce((ye,ve)=>{if(!ve.codecSet)return ye;const be=ve.audioGroups;let Qe=ye[ve.codecSet];Qe||(ye[ve.codecSet]=Qe={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!be,fragmentError:0}),Qe.minBitrate=Math.min(Qe.minBitrate,ve.bitrate);const Xe=Math.min(ve.height,ve.width);return Qe.minHeight=Math.min(Qe.minHeight,Xe),Qe.minFramerate=Math.min(Qe.minFramerate,ve.frameRate),Qe.maxScore=Math.max(Qe.maxScore,ve.score),Qe.fragmentError+=ve.fragmentError,Qe.videoRanges[ve.videoRange]=(Qe.videoRanges[ve.videoRange]||0)+1,be&&be.forEach(Je=>{if(!Je)return;const tt=Z.groups[Je];Qe.hasDefaultAudio=Qe.hasDefaultAudio||Z.hasDefaultAudio?tt.hasDefault:tt.hasAutoSelect||!Z.hasDefaultAudio&&!Z.hasAutoSelectAudio,Object.keys(tt.channels).forEach(it=>{Qe.channels[it]=(Qe.channels[it]||0)+tt.channels[it]})}),ye},{})}function findMatchingOption(ie,Z,ee){if("attrs"in ie){const ae=Z.indexOf(ie);if(ae!==-1)return ae}for(let ae=0;ae<Z.length;ae++){const ye=Z[ae];if(matchesOption(ie,ye,ee))return ae}return-1}function matchesOption(ie,Z,ee){const{groupId:ae,name:ye,lang:ve,assocLang:be,characteristics:Qe,default:Xe}=ie,Je=ie.forced;return(ae===void 0||Z.groupId===ae)&&(ye===void 0||Z.name===ye)&&(ve===void 0||Z.lang===ve)&&(ve===void 0||Z.assocLang===be)&&(Xe===void 0||Z.default===Xe)&&(Je===void 0||Z.forced===Je)&&(Qe===void 0||characteristicsMatch(Qe,Z.characteristics))&&(ee===void 0||ee(ie,Z))}function characteristicsMatch(ie,Z=""){const ee=ie.split(","),ae=Z.split(",");return ee.length===ae.length&&!ee.some(ye=>ae.indexOf(ye)===-1)}function audioMatchPredicate(ie,Z){const{audioCodec:ee,channels:ae}=ie;return(ee===void 0||(Z.audioCodec||"").substring(0,4)===ee.substring(0,4))&&(ae===void 0||ae===(Z.channels||"2"))}function findClosestLevelWithAudioGroup(ie,Z,ee,ae,ye){const ve=Z[ae],Qe=Z.reduce((st,lt,ct)=>{const gt=lt.uri;return(st[gt]||(st[gt]=[])).push(ct),st},{})[ve.uri];Qe.length>1&&(ae=Math.max.apply(Math,Qe));const Xe=ve.videoRange,Je=ve.frameRate,tt=ve.codecSet.substring(0,4),it=searchDownAndUpList(Z,ae,st=>{if(st.videoRange!==Xe||st.frameRate!==Je||st.codecSet.substring(0,4)!==tt)return!1;const lt=st.audioGroups,ct=ee.filter(gt=>!lt||lt.indexOf(gt.groupId)!==-1);return findMatchingOption(ie,ct,ye)>-1});return it>-1?it:searchDownAndUpList(Z,ae,st=>{const lt=st.audioGroups,ct=ee.filter(gt=>!lt||lt.indexOf(gt.groupId)!==-1);return findMatchingOption(ie,ct,ye)>-1})}function searchDownAndUpList(ie,Z,ee){for(let ae=Z;ae;ae--)if(ee(ie[ae]))return ae;for(let ae=Z+1;ae<ie.length;ae++)if(ee(ie[ae]))return ae;return-1}class AbrController{constructor(Z){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:ee,partCurrent:ae,hls:ye}=this,{autoLevelEnabled:ve,media:be}=ye;if(!ee||!be)return;const Qe=performance.now(),Xe=ae?ae.stats:ee.stats,Je=ae?ae.duration:ee.duration,tt=Qe-Xe.loading.start,it=ye.minAutoLevel;if(Xe.aborted||Xe.loaded&&Xe.loaded===Xe.total||ee.level<=it){this.clearTimer(),this._nextAutoLevel=-1;return}if(!ve||be.paused||!be.playbackRate||!be.readyState)return;const st=ye.mainForwardBufferInfo;if(st===null)return;const lt=this.bwEstimator.getEstimateTTFB(),ct=Math.abs(be.playbackRate);if(tt<=Math.max(lt,1e3*(Je/(ct*2))))return;const gt=st.len/ct,ut=Xe.loading.first?Xe.loading.first-Xe.loading.start:-1,mt=Xe.loaded&&ut>-1,ei=this.getBwEstimate(),ni=ye.levels,ri=ni[ee.level],si=Xe.total||Math.max(Xe.loaded,Math.round(Je*ri.averageBitrate/8));let li=mt?tt-ut:tt;li<1&&mt&&(li=Math.min(tt,Xe.loaded*8/ei));const ai=mt?Xe.loaded*1e3/li:0,ci=ai?(si-Xe.loaded)/ai:si*8/ei+lt/1e3;if(ci<=gt)return;const Ci=ai?ai*8:ei;let pi=Number.POSITIVE_INFINITY,gi;for(gi=ee.level-1;gi>it;gi--){const bi=ni[gi].maxBitrate;if(pi=this.getTimeToLoadFrag(lt/1e3,Ci,Je*bi,!ni[gi].details),pi<gt)break}if(pi>=ci||pi>Je*10)return;ye.nextLoadLevel=ye.nextAutoLevel=gi,mt?this.bwEstimator.sample(tt-Math.min(lt,ut),Xe.loaded):this.bwEstimator.sampleTTFB(tt);const _i=ni[gi].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>_i&&this.resetEstimator(_i),this.clearTimer(),logger.warn(`[abr] Fragment ${ee.sn}${ae?" part "+ae.index:""} of level ${ee.level} is loading too slowly;
      Time to underbuffer: ${gt.toFixed(3)} s
      Estimated load time for current fragment: ${ci.toFixed(3)} s
      Estimated load time for down switch fragment: ${pi.toFixed(3)} s
      TTFB estimate: ${ut|0} ms
      Current BW estimate: ${isFiniteNumber(ei)?ei|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${gi} @ ${_i|0} bps`),ye.trigger(Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:ee,part:ae,stats:Xe})},this.hls=Z,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(Z){Z&&(logger.log(`setting initial bwe to ${Z}`),this.hls.config.abrEwmaDefaultEstimate=Z),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const Z=this.hls.config;return new EwmaBandWidthEstimator(Z.abrEwmaSlowVoD,Z.abrEwmaFastVoD,Z.abrEwmaDefaultEstimate)}registerListeners(){const{hls:Z}=this;Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.FRAG_LOADING,this.onFragLoading,this),Z.on(Events.FRAG_LOADED,this.onFragLoaded,this),Z.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),Z.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Z.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.on(Events.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),Z.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:Z}=this;Z&&(Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.FRAG_LOADING,this.onFragLoading,this),Z.off(Events.FRAG_LOADED,this.onFragLoaded,this),Z.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),Z.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Z.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.off(Events.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),Z.off(Events.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(Z,ee){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(Z,ee){const ae=ee.frag;if(!this.ignoreFragment(ae)){if(!ae.bitrateTest){var ye;this.fragCurrent=ae,this.partCurrent=(ye=ee.part)!=null?ye:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(Z,ee){this.clearTimer()}onError(Z,ee){if(!ee.fatal)switch(ee.details){case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ErrorDetails.FRAG_LOAD_TIMEOUT:{const ae=ee.frag,{fragCurrent:ye,partCurrent:ve}=this;if(ae&&ye&&ae.sn===ye.sn&&ae.level===ye.level){const be=performance.now(),Qe=ve?ve.stats:ae.stats,Xe=be-Qe.loading.start,Je=Qe.loading.first?Qe.loading.first-Qe.loading.start:-1;if(Qe.loaded&&Je>-1){const it=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(Xe-Math.min(it,Je),Qe.loaded)}else this.bwEstimator.sampleTTFB(Xe)}break}}}getTimeToLoadFrag(Z,ee,ae,ye){const ve=Z+ae/ee,be=ye?this.lastLevelLoadSec:0;return ve+be}onLevelLoaded(Z,ee){const ae=this.hls.config,{loading:ye}=ee.stats,ve=ye.end-ye.start;isFiniteNumber(ve)&&(this.lastLevelLoadSec=ve/1e3),ee.details.live?this.bwEstimator.update(ae.abrEwmaSlowLive,ae.abrEwmaFastLive):this.bwEstimator.update(ae.abrEwmaSlowVoD,ae.abrEwmaFastVoD)}onFragLoaded(Z,{frag:ee,part:ae}){const ye=ae?ae.stats:ee.stats;if(ee.type===PlaylistLevelType.MAIN&&this.bwEstimator.sampleTTFB(ye.loading.first-ye.loading.start),!this.ignoreFragment(ee)){if(this.clearTimer(),ee.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const ve=ae?ae.duration:ee.duration,be=this.hls.levels[ee.level],Qe=(be.loaded?be.loaded.bytes:0)+ye.loaded,Xe=(be.loaded?be.loaded.duration:0)+ve;be.loaded={bytes:Qe,duration:Xe},be.realBitrate=Math.round(8*Qe/Xe)}if(ee.bitrateTest){const ve={stats:ye,frag:ee,part:ae,id:ee.type};this.onFragBuffered(Events.FRAG_BUFFERED,ve),ee.bitrateTest=!1}else this.lastLoadedFragLevel=ee.level}}onFragBuffered(Z,ee){const{frag:ae,part:ye}=ee,ve=ye!=null&&ye.stats.loaded?ye.stats:ae.stats;if(ve.aborted||this.ignoreFragment(ae))return;const be=ve.parsing.end-ve.loading.start-Math.min(ve.loading.first-ve.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(be,ve.loaded),ve.bwEstimate=this.getBwEstimate(),ae.bitrateTest?this.bitrateTestDelay=be/1e3:this.bitrateTestDelay=0}ignoreFragment(Z){return Z.type!==PlaylistLevelType.MAIN||Z.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:Z,minAutoLevel:ee}=this.hls,ae=this.getBwEstimate(),ye=this.hls.config.maxStarvationDelay,ve=this.findBestLevel(ae,ee,Z,0,ye,1,1);if(ve>-1)return ve;const be=this.hls.firstLevel,Qe=Math.min(Math.max(be,ee),Z);return logger.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${be} clamped to ${Qe}`),Qe}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const Z=this.forcedAutoLevel,ae=this.bwEstimator.canEstimate(),ye=this.lastLoadedFragLevel>-1;if(Z!==-1&&(!ae||!ye||this.nextAutoLevelKey===this.getAutoLevelKey()))return Z;const ve=ae&&ye?this.getNextABRAutoLevel():this.firstAutoLevel;if(Z!==-1){const be=this.hls.levels;if(be.length>Math.max(Z,ve)&&be[Z].loadError<=be[ve].loadError)return Z}return this._nextAutoLevel=ve,this.nextAutoLevelKey=this.getAutoLevelKey(),ve}getAutoLevelKey(){var Z;return`${this.getBwEstimate()}_${(Z=this.hls.mainForwardBufferInfo)==null?void 0:Z.len}`}getNextABRAutoLevel(){const{fragCurrent:Z,partCurrent:ee,hls:ae}=this,{maxAutoLevel:ye,config:ve,minAutoLevel:be,media:Qe}=ae,Xe=ee?ee.duration:Z?Z.duration:0,Je=Qe&&Qe.playbackRate!==0?Math.abs(Qe.playbackRate):1,tt=this.getBwEstimate(),it=ae.mainForwardBufferInfo,st=(it?it.len:0)/Je;let lt=ve.abrBandWidthFactor,ct=ve.abrBandWidthUpFactor;if(st){const ni=this.findBestLevel(tt,be,ye,st,0,lt,ct);if(ni>=0)return ni}let gt=Xe?Math.min(Xe,ve.maxStarvationDelay):ve.maxStarvationDelay;if(!st){const ni=this.bitrateTestDelay;ni&&(gt=(Xe?Math.min(Xe,ve.maxLoadingDelay):ve.maxLoadingDelay)-ni,logger.info(`[abr] bitrate test took ${Math.round(1e3*ni)}ms, set first fragment max fetchDuration to ${Math.round(1e3*gt)} ms`),lt=ct=1)}const ut=this.findBestLevel(tt,be,ye,st,gt,lt,ct);if(logger.info(`[abr] ${st?"rebuffering expected":"buffer is empty"}, optimal quality level ${ut}`),ut>-1)return ut;const mt=ae.levels[be],ei=ae.levels[ae.loadLevel];return(mt==null?void 0:mt.bitrate)<(ei==null?void 0:ei.bitrate)?be:ae.loadLevel}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(Z,ee,ae,ye,ve,be,Qe){var Xe;const Je=ye+ve,tt=this.lastLoadedFragLevel,it=tt===-1?this.hls.firstLevel:tt,{fragCurrent:st,partCurrent:lt}=this,{levels:ct,allAudioTracks:gt,loadLevel:ut,config:mt}=this.hls;if(ct.length===1)return 0;const ei=ct[it],ni=!!(ei!=null&&(Xe=ei.details)!=null&&Xe.live),ri=ut===-1||tt===-1;let si,li="SDR",ai=(ei==null?void 0:ei.frameRate)||0;const{audioPreference:ci,videoPreference:Ci}=mt,pi=this.audioTracksByGroup||(this.audioTracksByGroup=getAudioTracksByGroup(gt));if(ri){if(this.firstSelection!==-1)return this.firstSelection;const yi=this.codecTiers||(this.codecTiers=getCodecTiers(ct,pi,ee,ae)),Ti=getStartCodecTier(yi,li,Z,ci,Ci),{codecSet:Ii,videoRanges:Ri,minFramerate:Pi,minBitrate:xi,preferHDR:ki}=Ti;si=Ii,li=ki?Ri[Ri.length-1]:Ri[0],ai=Pi,Z=Math.max(Z,xi),logger.log(`[abr] picked start tier ${JSON.stringify(Ti)}`)}else si=ei==null?void 0:ei.codecSet,li=ei==null?void 0:ei.videoRange;const gi=lt?lt.duration:st?st.duration:0,_i=this.bwEstimator.getEstimateTTFB()/1e3,bi=[];for(let yi=ae;yi>=ee;yi--){var Mi;const Ti=ct[yi],Ii=yi>it;if(!Ti)continue;if(mt.useMediaCapabilities&&!Ti.supportedResult&&!Ti.supportedPromise){const Ui=navigator.mediaCapabilities;typeof(Ui==null?void 0:Ui.decodingInfo)=="function"&&requiresMediaCapabilitiesDecodingInfo(Ti,pi,li,ai,Z,ci)?(Ti.supportedPromise=getMediaDecodingInfoPromise(Ti,pi,Ui),Ti.supportedPromise.then(Vi=>{Ti.supportedResult=Vi;const Kr=this.hls.levels,Wi=Kr.indexOf(Ti);Vi.error?logger.warn(`[abr] MediaCapabilities decodingInfo error: "${Vi.error}" for level ${Wi} ${JSON.stringify(Vi)}`):Vi.supported||(logger.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${Wi} ${JSON.stringify(Vi)}`),Wi>-1&&Kr.length>1&&(logger.log(`[abr] Removing unsupported level ${Wi}`),this.hls.removeLevel(Wi)))})):Ti.supportedResult=SUPPORTED_INFO_DEFAULT}if(si&&Ti.codecSet!==si||li&&Ti.videoRange!==li||Ii&&ai>Ti.frameRate||!Ii&&ai>0&&ai<Ti.frameRate||Ti.supportedResult&&!((Mi=Ti.supportedResult.decodingInfoResults)!=null&&Mi[0].smooth)){bi.push(yi);continue}const Ri=Ti.details,Pi=(lt?Ri==null?void 0:Ri.partTarget:Ri==null?void 0:Ri.averagetargetduration)||gi;let xi;Ii?xi=Qe*Z:xi=be*Z;const ki=gi&&ye>=gi*2&&ve===0?ct[yi].averageBitrate:ct[yi].maxBitrate,Li=this.getTimeToLoadFrag(_i,xi,ki*Pi,Ri===void 0);if(xi>=ki&&(yi===tt||Ti.loadError===0&&Ti.fragmentError===0)&&(Li<=_i||!isFiniteNumber(Li)||ni&&!this.bitrateTestDelay||Li<Je)){const Ui=this.forcedAutoLevel;return yi!==ut&&(Ui===-1||Ui!==ut)&&(bi.length&&logger.trace(`[abr] Skipped level(s) ${bi.join(",")} of ${ae} max with CODECS and VIDEO-RANGE:"${ct[bi[0]].codecs}" ${ct[bi[0]].videoRange}; not compatible with "${ei.codecs}" ${li}`),logger.info(`[abr] switch candidate:${it}->${yi} adjustedbw(${Math.round(xi)})-bitrate=${Math.round(xi-ki)} ttfb:${_i.toFixed(1)} avgDuration:${Pi.toFixed(1)} maxFetchDuration:${Je.toFixed(1)} fetchDuration:${Li.toFixed(1)} firstSelection:${ri} codecSet:${si} videoRange:${li} hls.loadLevel:${ut}`)),ri&&(this.firstSelection=yi),yi}}return-1}set nextAutoLevel(Z){const ee=Math.max(this.hls.minAutoLevel,Z);this._nextAutoLevel!=ee&&(this.nextAutoLevelKey="",this._nextAutoLevel=ee)}}class TaskLoop{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(Z){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,Z),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class FragmentTracker{constructor(Z){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=Z,this._registerListeners()}_registerListeners(){const{hls:Z}=this;Z.on(Events.BUFFER_APPENDED,this.onBufferAppended,this),Z.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),Z.on(Events.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:Z}=this;Z.off(Events.BUFFER_APPENDED,this.onBufferAppended,this),Z.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),Z.off(Events.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(Z,ee){const ae=this.activePartLists[ee];if(ae)for(let ye=ae.length;ye--;){const ve=ae[ye];if(!ve)break;const be=ve.end;if(ve.start<=Z&&be!==null&&Z<=be)return ve}return this.getBufferedFrag(Z,ee)}getBufferedFrag(Z,ee){const{fragments:ae}=this,ye=Object.keys(ae);for(let ve=ye.length;ve--;){const be=ae[ye[ve]];if((be==null?void 0:be.body.type)===ee&&be.buffered){const Qe=be.body;if(Qe.start<=Z&&Z<=Qe.end)return Qe}}return null}detectEvictedFragments(Z,ee,ae,ye){this.timeRanges&&(this.timeRanges[Z]=ee);const ve=(ye==null?void 0:ye.fragment.sn)||-1;Object.keys(this.fragments).forEach(be=>{const Qe=this.fragments[be];if(!Qe||ve>=Qe.body.sn)return;if(!Qe.buffered&&!Qe.loaded){Qe.body.type===ae&&this.removeFragment(Qe.body);return}const Xe=Qe.range[Z];Xe&&Xe.time.some(Je=>{const tt=!this.isTimeBuffered(Je.startPTS,Je.endPTS,ee);return tt&&this.removeFragment(Qe.body),tt})})}detectPartialFragments(Z){const ee=this.timeRanges,{frag:ae,part:ye}=Z;if(!ee||ae.sn==="initSegment")return;const ve=getFragmentKey(ae),be=this.fragments[ve];if(!be||be.buffered&&ae.gap)return;const Qe=!ae.relurl;Object.keys(ee).forEach(Xe=>{const Je=ae.elementaryStreams[Xe];if(!Je)return;const tt=ee[Xe],it=Qe||Je.partial===!0;be.range[Xe]=this.getBufferedTimes(ae,ye,it,tt)}),be.loaded=null,Object.keys(be.range).length?(be.buffered=!0,(be.body.endList=ae.endList||be.body.endList)&&(this.endListFragments[be.body.type]=be),isPartial(be)||this.removeParts(ae.sn-1,ae.type)):this.removeFragment(be.body)}removeParts(Z,ee){const ae=this.activePartLists[ee];ae&&(this.activePartLists[ee]=ae.filter(ye=>ye.fragment.sn>=Z))}fragBuffered(Z,ee){const ae=getFragmentKey(Z);let ye=this.fragments[ae];!ye&&ee&&(ye=this.fragments[ae]={body:Z,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},Z.gap&&(this.hasGaps=!0)),ye&&(ye.loaded=null,ye.buffered=!0)}getBufferedTimes(Z,ee,ae,ye){const ve={time:[],partial:ae},be=Z.start,Qe=Z.end,Xe=Z.minEndPTS||Qe,Je=Z.maxStartPTS||be;for(let tt=0;tt<ye.length;tt++){const it=ye.start(tt)-this.bufferPadding,st=ye.end(tt)+this.bufferPadding;if(Je>=it&&Xe<=st){ve.time.push({startPTS:Math.max(be,ye.start(tt)),endPTS:Math.min(Qe,ye.end(tt))});break}else if(be<st&&Qe>it){const lt=Math.max(be,ye.start(tt)),ct=Math.min(Qe,ye.end(tt));ct>lt&&(ve.partial=!0,ve.time.push({startPTS:lt,endPTS:ct}))}else if(Qe<=it)break}return ve}getPartialFragment(Z){let ee=null,ae,ye,ve,be=0;const{bufferPadding:Qe,fragments:Xe}=this;return Object.keys(Xe).forEach(Je=>{const tt=Xe[Je];tt&&isPartial(tt)&&(ye=tt.body.start-Qe,ve=tt.body.end+Qe,Z>=ye&&Z<=ve&&(ae=Math.min(Z-ye,ve-Z),be<=ae&&(ee=tt.body,be=ae)))}),ee}isEndListAppended(Z){const ee=this.endListFragments[Z];return ee!==void 0&&(ee.buffered||isPartial(ee))}getState(Z){const ee=getFragmentKey(Z),ae=this.fragments[ee];return ae?ae.buffered?isPartial(ae)?FragmentState.PARTIAL:FragmentState.OK:FragmentState.APPENDING:FragmentState.NOT_LOADED}isTimeBuffered(Z,ee,ae){let ye,ve;for(let be=0;be<ae.length;be++){if(ye=ae.start(be)-this.bufferPadding,ve=ae.end(be)+this.bufferPadding,Z>=ye&&ee<=ve)return!0;if(ee<=ye)return!1}return!1}onFragLoaded(Z,ee){const{frag:ae,part:ye}=ee;if(ae.sn==="initSegment"||ae.bitrateTest)return;const ve=ye?null:ee,be=getFragmentKey(ae);this.fragments[be]={body:ae,appendedPTS:null,loaded:ve,buffered:!1,range:Object.create(null)}}onBufferAppended(Z,ee){const{frag:ae,part:ye,timeRanges:ve}=ee;if(ae.sn==="initSegment")return;const be=ae.type;if(ye){let Qe=this.activePartLists[be];Qe||(this.activePartLists[be]=Qe=[]),Qe.push(ye)}this.timeRanges=ve,Object.keys(ve).forEach(Qe=>{const Xe=ve[Qe];this.detectEvictedFragments(Qe,Xe,be,ye)})}onFragBuffered(Z,ee){this.detectPartialFragments(ee)}hasFragment(Z){const ee=getFragmentKey(Z);return!!this.fragments[ee]}hasParts(Z){var ee;return!!((ee=this.activePartLists[Z])!=null&&ee.length)}removeFragmentsInRange(Z,ee,ae,ye,ve){ye&&!this.hasGaps||Object.keys(this.fragments).forEach(be=>{const Qe=this.fragments[be];if(!Qe)return;const Xe=Qe.body;Xe.type!==ae||ye&&!Xe.gap||Xe.start<ee&&Xe.end>Z&&(Qe.buffered||ve)&&this.removeFragment(Xe)})}removeFragment(Z){const ee=getFragmentKey(Z);Z.stats.loaded=0,Z.clearElementaryStreamInfo();const ae=this.activePartLists[Z.type];if(ae){const ye=Z.sn;this.activePartLists[Z.type]=ae.filter(ve=>ve.fragment.sn!==ye)}delete this.fragments[ee],Z.endList&&delete this.endListFragments[Z.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function isPartial(ie){var Z,ee,ae;return ie.buffered&&(ie.body.gap||((Z=ie.range.video)==null?void 0:Z.partial)||((ee=ie.range.audio)==null?void 0:ee.partial)||((ae=ie.range.audiovideo)==null?void 0:ae.partial))}function getFragmentKey(ie){return`${ie.type}_${ie.level}_${ie.sn}`}const noopBuffered={length:0,start:()=>0,end:()=>0};class BufferHelper{static isBuffered(Z,ee){try{if(Z){const ae=BufferHelper.getBuffered(Z);for(let ye=0;ye<ae.length;ye++)if(ee>=ae.start(ye)&&ee<=ae.end(ye))return!0}}catch{}return!1}static bufferInfo(Z,ee,ae){try{if(Z){const ye=BufferHelper.getBuffered(Z),ve=[];let be;for(be=0;be<ye.length;be++)ve.push({start:ye.start(be),end:ye.end(be)});return this.bufferedInfo(ve,ee,ae)}}catch{}return{len:0,start:ee,end:ee,nextStart:void 0}}static bufferedInfo(Z,ee,ae){ee=Math.max(0,ee),Z.sort(function(Je,tt){const it=Je.start-tt.start;return it||tt.end-Je.end});let ye=[];if(ae)for(let Je=0;Je<Z.length;Je++){const tt=ye.length;if(tt){const it=ye[tt-1].end;Z[Je].start-it<ae?Z[Je].end>it&&(ye[tt-1].end=Z[Je].end):ye.push(Z[Je])}else ye.push(Z[Je])}else ye=Z;let ve=0,be,Qe=ee,Xe=ee;for(let Je=0;Je<ye.length;Je++){const tt=ye[Je].start,it=ye[Je].end;if(ee+ae>=tt&&ee<it)Qe=tt,Xe=it,ve=Xe-ee;else if(ee+ae<tt){be=tt;break}}return{len:ve,start:Qe||0,end:Xe||0,nextStart:be}}static getBuffered(Z){try{return Z.buffered}catch(ee){return logger.log("failed to get media.buffered",ee),noopBuffered}}}class ChunkMetadata{constructor(Z,ee,ae,ye=0,ve=-1,be=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=getNewPerformanceTiming(),this.buffering={audio:getNewPerformanceTiming(),video:getNewPerformanceTiming(),audiovideo:getNewPerformanceTiming()},this.level=Z,this.sn=ee,this.id=ae,this.size=ye,this.part=ve,this.partial=be}}function getNewPerformanceTiming(){return{start:0,executeStart:0,executeEnd:0,end:0}}function findFirstFragWithCC(ie,Z){for(let ae=0,ye=ie.length;ae<ye;ae++){var ee;if(((ee=ie[ae])==null?void 0:ee.cc)===Z)return ie[ae]}return null}function shouldAlignOnDiscontinuities(ie,Z,ee){return!!(Z&&(ee.endCC>ee.startCC||ie&&ie.cc<ee.startCC))}function findDiscontinuousReferenceFrag(ie,Z){const ee=ie.fragments,ae=Z.fragments;if(!ae.length||!ee.length){logger.log("No fragments to align");return}const ye=findFirstFragWithCC(ee,ae[0].cc);if(!ye||ye&&!ye.startPTS){logger.log("No frag in previous level to align on");return}return ye}function adjustFragmentStart(ie,Z){if(ie){const ee=ie.start+Z;ie.start=ie.startPTS=ee,ie.endPTS=ee+ie.duration}}function adjustSlidingStart(ie,Z){const ee=Z.fragments;for(let ae=0,ye=ee.length;ae<ye;ae++)adjustFragmentStart(ee[ae],ie);Z.fragmentHint&&adjustFragmentStart(Z.fragmentHint,ie),Z.alignedSliding=!0}function alignStream(ie,Z,ee){Z&&(alignDiscontinuities(ie,ee,Z),!ee.alignedSliding&&Z&&alignMediaPlaylistByPDT(ee,Z),!ee.alignedSliding&&Z&&!ee.skippedSegments&&adjustSliding(Z,ee))}function alignDiscontinuities(ie,Z,ee){if(shouldAlignOnDiscontinuities(ie,ee,Z)){const ae=findDiscontinuousReferenceFrag(ee,Z);ae&&isFiniteNumber(ae.start)&&(logger.log(`Adjusting PTS using last level due to CC increase within current level ${Z.url}`),adjustSlidingStart(ae.start,Z))}}function alignMediaPlaylistByPDT(ie,Z){if(!ie.hasProgramDateTime||!Z.hasProgramDateTime)return;const ee=ie.fragments,ae=Z.fragments;if(!ee.length||!ae.length)return;let ye,ve;const be=Math.min(Z.endCC,ie.endCC);Z.startCC<be&&ie.startCC<be&&(ye=findFirstFragWithCC(ae,be),ve=findFirstFragWithCC(ee,be)),(!ye||!ve)&&(ye=ae[Math.floor(ae.length/2)],ve=findFirstFragWithCC(ee,ye.cc)||ee[Math.floor(ee.length/2)]);const Qe=ye.programDateTime,Xe=ve.programDateTime;if(!Qe||!Xe)return;const Je=(Xe-Qe)/1e3-(ve.start-ye.start);adjustSlidingStart(Je,ie)}const MIN_CHUNK_SIZE=Math.pow(2,17);class FragmentLoader{constructor(Z){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=Z}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(Z,ee){const ae=Z.url;if(!ae)return Promise.reject(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:Z,error:new Error(`Fragment does not have a ${ae?"part list":"url"}`),networkDetails:null}));this.abort();const ye=this.config,ve=ye.fLoader,be=ye.loader;return new Promise((Qe,Xe)=>{if(this.loader&&this.loader.destroy(),Z.gap)if(Z.tagList.some(lt=>lt[0]==="GAP")){Xe(createGapLoadError(Z));return}else Z.gap=!1;const Je=this.loader=Z.loader=ve?new ve(ye):new be(ye),tt=createLoaderContext(Z),it=getLoaderConfigWithoutReties(ye.fragLoadPolicy.default),st={loadPolicy:it,timeout:it.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Z.sn==="initSegment"?1/0:MIN_CHUNK_SIZE};Z.stats=Je.stats,Je.load(tt,st,{onSuccess:(lt,ct,gt,ut)=>{this.resetLoader(Z,Je);let mt=lt.data;gt.resetIV&&Z.decryptdata&&(Z.decryptdata.iv=new Uint8Array(mt.slice(0,16)),mt=mt.slice(16)),Qe({frag:Z,part:null,payload:mt,networkDetails:ut})},onError:(lt,ct,gt,ut)=>{this.resetLoader(Z,Je),Xe(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:Z,response:_objectSpread2({url:ae,data:void 0},lt),error:new Error(`HTTP Error ${lt.code} ${lt.text}`),networkDetails:gt,stats:ut}))},onAbort:(lt,ct,gt)=>{this.resetLoader(Z,Je),Xe(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:Z,error:new Error("Aborted"),networkDetails:gt,stats:lt}))},onTimeout:(lt,ct,gt)=>{this.resetLoader(Z,Je),Xe(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:Z,error:new Error(`Timeout after ${st.timeout}ms`),networkDetails:gt,stats:lt}))},onProgress:(lt,ct,gt,ut)=>{ee&&ee({frag:Z,part:null,payload:gt,networkDetails:ut})}})})}loadPart(Z,ee,ae){this.abort();const ye=this.config,ve=ye.fLoader,be=ye.loader;return new Promise((Qe,Xe)=>{if(this.loader&&this.loader.destroy(),Z.gap||ee.gap){Xe(createGapLoadError(Z,ee));return}const Je=this.loader=Z.loader=ve?new ve(ye):new be(ye),tt=createLoaderContext(Z,ee),it=getLoaderConfigWithoutReties(ye.fragLoadPolicy.default),st={loadPolicy:it,timeout:it.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:MIN_CHUNK_SIZE};ee.stats=Je.stats,Je.load(tt,st,{onSuccess:(lt,ct,gt,ut)=>{this.resetLoader(Z,Je),this.updateStatsFromPart(Z,ee);const mt={frag:Z,part:ee,payload:lt.data,networkDetails:ut};ae(mt),Qe(mt)},onError:(lt,ct,gt,ut)=>{this.resetLoader(Z,Je),Xe(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:Z,part:ee,response:_objectSpread2({url:tt.url,data:void 0},lt),error:new Error(`HTTP Error ${lt.code} ${lt.text}`),networkDetails:gt,stats:ut}))},onAbort:(lt,ct,gt)=>{Z.stats.aborted=ee.stats.aborted,this.resetLoader(Z,Je),Xe(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:Z,part:ee,error:new Error("Aborted"),networkDetails:gt,stats:lt}))},onTimeout:(lt,ct,gt)=>{this.resetLoader(Z,Je),Xe(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:Z,part:ee,error:new Error(`Timeout after ${st.timeout}ms`),networkDetails:gt,stats:lt}))}})})}updateStatsFromPart(Z,ee){const ae=Z.stats,ye=ee.stats,ve=ye.total;if(ae.loaded+=ye.loaded,ve){const Xe=Math.round(Z.duration/ee.duration),Je=Math.min(Math.round(ae.loaded/ve),Xe),it=(Xe-Je)*Math.round(ae.loaded/Je);ae.total=ae.loaded+it}else ae.total=Math.max(ae.loaded,ae.total);const be=ae.loading,Qe=ye.loading;be.start?be.first+=Qe.first-Qe.start:(be.start=Qe.start,be.first=Qe.first),be.end=Qe.end}resetLoader(Z,ee){Z.loader=null,this.loader===ee&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),ee.destroy()}}function createLoaderContext(ie,Z=null){const ee=Z||ie,ae={frag:ie,part:Z,responseType:"arraybuffer",url:ee.url,headers:{},rangeStart:0,rangeEnd:0},ye=ee.byteRangeStartOffset,ve=ee.byteRangeEndOffset;if(isFiniteNumber(ye)&&isFiniteNumber(ve)){var be;let Qe=ye,Xe=ve;if(ie.sn==="initSegment"&&((be=ie.decryptdata)==null?void 0:be.method)==="AES-128"){const Je=ve-ye;Je%16&&(Xe=ve+(16-Je%16)),ye!==0&&(ae.resetIV=!0,Qe=ye-16)}ae.rangeStart=Qe,ae.rangeEnd=Xe}return ae}function createGapLoadError(ie,Z){const ee=new Error(`GAP ${ie.gap?"tag":"attribute"} found`),ae={type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_GAP,fatal:!1,frag:ie,error:ee,networkDetails:null};return Z&&(ae.part=Z),(Z||ie).stats.aborted=!0,new LoadError(ae)}class LoadError extends Error{constructor(Z){super(Z.error.message),this.data=void 0,this.data=Z}}class AESCrypto{constructor(Z,ee){this.subtle=void 0,this.aesIV=void 0,this.subtle=Z,this.aesIV=ee}decrypt(Z,ee){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},ee,Z)}}class FastAESKey{constructor(Z,ee){this.subtle=void 0,this.key=void 0,this.subtle=Z,this.key=ee}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function removePadding(ie){const Z=ie.byteLength,ee=Z&&new DataView(ie.buffer).getUint8(Z-1);return ee?sliceUint8(ie,0,Z-ee):ie}class AESDecryptor{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(Z){const ee=new DataView(Z),ae=new Uint32Array(4);for(let ye=0;ye<4;ye++)ae[ye]=ee.getUint32(ye*4);return ae}initTable(){const Z=this.sBox,ee=this.invSBox,ae=this.subMix,ye=ae[0],ve=ae[1],be=ae[2],Qe=ae[3],Xe=this.invSubMix,Je=Xe[0],tt=Xe[1],it=Xe[2],st=Xe[3],lt=new Uint32Array(256);let ct=0,gt=0,ut=0;for(ut=0;ut<256;ut++)ut<128?lt[ut]=ut<<1:lt[ut]=ut<<1^283;for(ut=0;ut<256;ut++){let mt=gt^gt<<1^gt<<2^gt<<3^gt<<4;mt=mt>>>8^mt&255^99,Z[ct]=mt,ee[mt]=ct;const ei=lt[ct],ni=lt[ei],ri=lt[ni];let si=lt[mt]*257^mt*16843008;ye[ct]=si<<24|si>>>8,ve[ct]=si<<16|si>>>16,be[ct]=si<<8|si>>>24,Qe[ct]=si,si=ri*16843009^ni*65537^ei*257^ct*16843008,Je[mt]=si<<24|si>>>8,tt[mt]=si<<16|si>>>16,it[mt]=si<<8|si>>>24,st[mt]=si,ct?(ct=ei^lt[lt[lt[ri^ei]]],gt^=lt[lt[gt]]):ct=gt=1}}expandKey(Z){const ee=this.uint8ArrayToUint32Array_(Z);let ae=!0,ye=0;for(;ye<ee.length&&ae;)ae=ee[ye]===this.key[ye],ye++;if(ae)return;this.key=ee;const ve=this.keySize=ee.length;if(ve!==4&&ve!==6&&ve!==8)throw new Error("Invalid aes key size="+ve);const be=this.ksRows=(ve+6+1)*4;let Qe,Xe;const Je=this.keySchedule=new Uint32Array(be),tt=this.invKeySchedule=new Uint32Array(be),it=this.sBox,st=this.rcon,lt=this.invSubMix,ct=lt[0],gt=lt[1],ut=lt[2],mt=lt[3];let ei,ni;for(Qe=0;Qe<be;Qe++){if(Qe<ve){ei=Je[Qe]=ee[Qe];continue}ni=ei,Qe%ve===0?(ni=ni<<8|ni>>>24,ni=it[ni>>>24]<<24|it[ni>>>16&255]<<16|it[ni>>>8&255]<<8|it[ni&255],ni^=st[Qe/ve|0]<<24):ve>6&&Qe%ve===4&&(ni=it[ni>>>24]<<24|it[ni>>>16&255]<<16|it[ni>>>8&255]<<8|it[ni&255]),Je[Qe]=ei=(Je[Qe-ve]^ni)>>>0}for(Xe=0;Xe<be;Xe++)Qe=be-Xe,Xe&3?ni=Je[Qe]:ni=Je[Qe-4],Xe<4||Qe<=4?tt[Xe]=ni:tt[Xe]=ct[it[ni>>>24]]^gt[it[ni>>>16&255]]^ut[it[ni>>>8&255]]^mt[it[ni&255]],tt[Xe]=tt[Xe]>>>0}networkToHostOrderSwap(Z){return Z<<24|(Z&65280)<<8|(Z&16711680)>>8|Z>>>24}decrypt(Z,ee,ae){const ye=this.keySize+6,ve=this.invKeySchedule,be=this.invSBox,Qe=this.invSubMix,Xe=Qe[0],Je=Qe[1],tt=Qe[2],it=Qe[3],st=this.uint8ArrayToUint32Array_(ae);let lt=st[0],ct=st[1],gt=st[2],ut=st[3];const mt=new Int32Array(Z),ei=new Int32Array(mt.length);let ni,ri,si,li,ai,ci,Ci,pi,gi,_i,bi,Mi,yi,Ti;const Ii=this.networkToHostOrderSwap;for(;ee<mt.length;){for(gi=Ii(mt[ee]),_i=Ii(mt[ee+1]),bi=Ii(mt[ee+2]),Mi=Ii(mt[ee+3]),ai=gi^ve[0],ci=Mi^ve[1],Ci=bi^ve[2],pi=_i^ve[3],yi=4,Ti=1;Ti<ye;Ti++)ni=Xe[ai>>>24]^Je[ci>>16&255]^tt[Ci>>8&255]^it[pi&255]^ve[yi],ri=Xe[ci>>>24]^Je[Ci>>16&255]^tt[pi>>8&255]^it[ai&255]^ve[yi+1],si=Xe[Ci>>>24]^Je[pi>>16&255]^tt[ai>>8&255]^it[ci&255]^ve[yi+2],li=Xe[pi>>>24]^Je[ai>>16&255]^tt[ci>>8&255]^it[Ci&255]^ve[yi+3],ai=ni,ci=ri,Ci=si,pi=li,yi=yi+4;ni=be[ai>>>24]<<24^be[ci>>16&255]<<16^be[Ci>>8&255]<<8^be[pi&255]^ve[yi],ri=be[ci>>>24]<<24^be[Ci>>16&255]<<16^be[pi>>8&255]<<8^be[ai&255]^ve[yi+1],si=be[Ci>>>24]<<24^be[pi>>16&255]<<16^be[ai>>8&255]<<8^be[ci&255]^ve[yi+2],li=be[pi>>>24]<<24^be[ai>>16&255]<<16^be[ci>>8&255]<<8^be[Ci&255]^ve[yi+3],ei[ee]=Ii(ni^lt),ei[ee+1]=Ii(li^ct),ei[ee+2]=Ii(si^gt),ei[ee+3]=Ii(ri^ut),lt=gi,ct=_i,gt=bi,ut=Mi,ee=ee+4}return ei.buffer}}const CHUNK_SIZE=16;class Decrypter{constructor(Z,{removePKCS7Padding:ee=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=Z.enableSoftwareAES,this.removePKCS7Padding=ee,ee)try{const ae=self.crypto;ae&&(this.subtle=ae.subtle||ae.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:Z,remainderData:ee}=this;if(!Z||ee)return this.reset(),null;const ae=new Uint8Array(Z);return this.reset(),this.removePKCS7Padding?removePadding(ae):ae}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(Z,ee,ae){return this.useSoftware?new Promise((ye,ve)=>{this.softwareDecrypt(new Uint8Array(Z),ee,ae);const be=this.flush();be?ye(be.buffer):ve(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(Z),ee,ae)}softwareDecrypt(Z,ee,ae){const{currentIV:ye,currentResult:ve,remainderData:be}=this;this.logOnce("JS AES decrypt"),be&&(Z=appendUint8Array(be,Z),this.remainderData=null);const Qe=this.getValidChunk(Z);if(!Qe.length)return null;ye&&(ae=ye);let Xe=this.softwareDecrypter;Xe||(Xe=this.softwareDecrypter=new AESDecryptor),Xe.expandKey(ee);const Je=ve;return this.currentResult=Xe.decrypt(Qe.buffer,0,ae),this.currentIV=sliceUint8(Qe,-16).buffer,Je||null}webCryptoDecrypt(Z,ee,ae){const ye=this.subtle;return(this.key!==ee||!this.fastAesKey)&&(this.key=ee,this.fastAesKey=new FastAESKey(ye,ee)),this.fastAesKey.expandKey().then(ve=>ye?(this.logOnce("WebCrypto AES decrypt"),new AESCrypto(ye,new Uint8Array(ae)).decrypt(Z.buffer,ve)):Promise.reject(new Error("web crypto not initialized"))).catch(ve=>(logger.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${ve.name}: ${ve.message}`),this.onWebCryptoError(Z,ee,ae)))}onWebCryptoError(Z,ee,ae){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(Z,ee,ae);const ye=this.flush();if(ye)return ye.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(Z){let ee=Z;const ae=Z.length-Z.length%CHUNK_SIZE;return ae!==Z.length&&(ee=sliceUint8(Z,0,ae),this.remainderData=sliceUint8(Z,ae)),ee}logOnce(Z){this.logEnabled&&(logger.log(`[decrypter]: ${Z}`),this.logEnabled=!1)}}const TimeRanges={toString:function(ie){let Z="";const ee=ie.length;for(let ae=0;ae<ee;ae++)Z+=`[${ie.start(ae).toFixed(3)}-${ie.end(ae).toFixed(3)}]`;return Z}},State={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class BaseStreamController extends TaskLoop{constructor(Z,ee,ae,ye,ve){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=State.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=ve,this.logPrefix=ye,this.log=logger.log.bind(logger,`${ye}:`),this.warn=logger.warn.bind(logger,`${ye}:`),this.hls=Z,this.fragmentLoader=new FragmentLoader(Z.config),this.keyLoader=ae,this.fragmentTracker=ee,this.config=Z.config,this.decrypter=new Decrypter(Z.config),Z.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(Z){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const Z=this.fragCurrent;Z!=null&&Z.loader&&(Z.abortRequests(),this.fragmentTracker.removeFragment(Z)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=State.STOPPED}_streamEnded(Z,ee){if(ee.live||Z.nextStart||!Z.end||!this.media)return!1;const ae=ee.partList;if(ae!=null&&ae.length){const ve=ae[ae.length-1];return BufferHelper.isBuffered(this.media,ve.start+ve.duration/2)}const ye=ee.fragments[ee.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(ye)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var Z;return(Z=this.levelLastLoaded)==null?void 0:Z.details}}onMediaAttached(Z,ee){const ae=this.media=this.mediaBuffer=ee.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),ae.addEventListener("seeking",this.onvseeking),ae.addEventListener("ended",this.onvended);const ye=this.config;this.levels&&ye.autoStartLoad&&this.state===State.STOPPED&&this.startLoad(ye.startPosition)}onMediaDetaching(){const Z=this.media;Z!=null&&Z.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Z&&this.onvseeking&&this.onvended&&(Z.removeEventListener("seeking",this.onvseeking),Z.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:Z,fragCurrent:ee,media:ae,mediaBuffer:ye,state:ve}=this,be=ae?ae.currentTime:0,Qe=BufferHelper.bufferInfo(ye||ae,be,Z.maxBufferHole);if(this.log(`media seeking to ${isFiniteNumber(be)?be.toFixed(3):be}, state: ${ve}`),this.state===State.ENDED)this.resetLoadingState();else if(ee){const Xe=Z.maxFragLookUpTolerance,Je=ee.start-Xe,tt=ee.start+ee.duration+Xe;if(!Qe.len||tt<Qe.start||Je>Qe.end){const it=be>tt;(be<Je||it)&&(it&&ee.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),ee.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}ae&&(this.fragmentTracker.removeFragmentsInRange(be,1/0,this.playlistType,!0),this.lastCurrentTime=be),!this.loadedmetadata&&!Qe.len&&(this.nextLoadPosition=this.startPosition=be),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(Z,ee){this.startTimeOffset=ee.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=State.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(Z,ee,ae){this._loadFragForPlayback(Z,ee,ae)}_loadFragForPlayback(Z,ee,ae){const ye=ve=>{if(this.fragContextChanged(Z)){this.warn(`Fragment ${Z.sn}${ve.part?" p: "+ve.part.index:""} of level ${Z.level} was dropped during download.`),this.fragmentTracker.removeFragment(Z);return}Z.stats.chunkCount++,this._handleFragmentLoadProgress(ve)};this._doFragLoad(Z,ee,ae,ye).then(ve=>{if(!ve)return;const be=this.state;if(this.fragContextChanged(Z)){(be===State.FRAG_LOADING||!this.fragCurrent&&be===State.PARSING)&&(this.fragmentTracker.removeFragment(Z),this.state=State.IDLE);return}"payload"in ve&&(this.log(`Loaded fragment ${Z.sn} of level ${Z.level}`),this.hls.trigger(Events.FRAG_LOADED,ve)),this._handleFragmentLoadComplete(ve)}).catch(ve=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(ve),this.resetFragmentLoading(Z))})}clearTrackerIfNeeded(Z){var ee;const{fragmentTracker:ae}=this;if(ae.getState(Z)===FragmentState.APPENDING){const ve=Z.type,be=this.getFwdBufferInfo(this.mediaBuffer,ve),Qe=Math.max(Z.duration,be?be.len:this.config.maxBufferLength);this.reduceMaxBufferLength(Qe)&&ae.removeFragment(Z)}else((ee=this.mediaBuffer)==null?void 0:ee.buffered.length)===0?ae.removeAllFragments():ae.hasParts(Z.type)&&(ae.detectPartialFragments({frag:Z,part:null,stats:Z.stats,id:Z.type}),ae.getState(Z)===FragmentState.PARTIAL&&ae.removeFragment(Z))}checkLiveUpdate(Z){if(Z.updated&&!Z.live){const ee=Z.fragments[Z.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:ee,part:null,stats:ee.stats,id:ee.type})}Z.fragments[0]||(Z.deltaUpdateFailed=!0)}flushMainBuffer(Z,ee,ae=null){if(!(Z-ee))return;const ye={startOffset:Z,endOffset:ee,type:ae};this.hls.trigger(Events.BUFFER_FLUSHING,ye)}_loadInitSegment(Z,ee){this._doFragLoad(Z,ee).then(ae=>{if(!ae||this.fragContextChanged(Z)||!this.levels)throw new Error("init load aborted");return ae}).then(ae=>{const{hls:ye}=this,{payload:ve}=ae,be=Z.decryptdata;if(ve&&ve.byteLength>0&&be!=null&&be.key&&be.iv&&be.method==="AES-128"){const Qe=self.performance.now();return this.decrypter.decrypt(new Uint8Array(ve),be.key.buffer,be.iv.buffer).catch(Xe=>{throw ye.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:Xe,reason:Xe.message,frag:Z}),Xe}).then(Xe=>{const Je=self.performance.now();return ye.trigger(Events.FRAG_DECRYPTED,{frag:Z,payload:Xe,stats:{tstart:Qe,tdecrypt:Je}}),ae.payload=Xe,this.completeInitSegmentLoad(ae)})}return this.completeInitSegmentLoad(ae)}).catch(ae=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(ae),this.resetFragmentLoading(Z))})}completeInitSegmentLoad(Z){const{levels:ee}=this;if(!ee)throw new Error("init load aborted, missing levels");const ae=Z.frag.stats;this.state=State.IDLE,Z.frag.data=new Uint8Array(Z.payload),ae.parsing.start=ae.buffering.start=self.performance.now(),ae.parsing.end=ae.buffering.end=self.performance.now(),this.tick()}fragContextChanged(Z){const{fragCurrent:ee}=this;return!Z||!ee||Z.sn!==ee.sn||Z.level!==ee.level}fragBufferedComplete(Z,ee){var ae,ye,ve,be;const Qe=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${Z.type} sn: ${Z.sn}${ee?" part: "+ee.index:""} of ${this.playlistType===PlaylistLevelType.MAIN?"level":"track"} ${Z.level} (frag:[${((ae=Z.startPTS)!=null?ae:NaN).toFixed(3)}-${((ye=Z.endPTS)!=null?ye:NaN).toFixed(3)}] > buffer:${Qe?TimeRanges.toString(BufferHelper.getBuffered(Qe)):"(detached)"})`),Z.sn!=="initSegment"){var Xe;if(Z.type!==PlaylistLevelType.SUBTITLE){const tt=Z.elementaryStreams;if(!Object.keys(tt).some(it=>!!tt[it])){this.state=State.IDLE;return}}const Je=(Xe=this.levels)==null?void 0:Xe[Z.level];Je!=null&&Je.fragmentError&&(this.log(`Resetting level fragment error count of ${Je.fragmentError} on frag buffered`),Je.fragmentError=0)}this.state=State.IDLE,Qe&&(!this.loadedmetadata&&Z.type==PlaylistLevelType.MAIN&&Qe.buffered.length&&((ve=this.fragCurrent)==null?void 0:ve.sn)===((be=this.fragPrevious)==null?void 0:be.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(Z){const{transmuxer:ee}=this;if(!ee)return;const{frag:ae,part:ye,partsLoaded:ve}=Z,be=!ve||ve.length===0||ve.some(Xe=>!Xe),Qe=new ChunkMetadata(ae.level,ae.sn,ae.stats.chunkCount+1,0,ye?ye.index:-1,!be);ee.flush(Qe)}_handleFragmentLoadProgress(Z){}_doFragLoad(Z,ee,ae=null,ye){var ve;const be=ee==null?void 0:ee.details;if(!this.levels||!be)throw new Error(`frag load aborted, missing level${be?"":" detail"}s`);let Qe=null;if(Z.encrypted&&!((ve=Z.decryptdata)!=null&&ve.key)?(this.log(`Loading key for ${Z.sn} of [${be.startSN}-${be.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${Z.level}`),this.state=State.KEY_LOADING,this.fragCurrent=Z,Qe=this.keyLoader.load(Z).then(tt=>{if(!this.fragContextChanged(tt.frag))return this.hls.trigger(Events.KEY_LOADED,tt),this.state===State.KEY_LOADING&&(this.state=State.IDLE),tt}),this.hls.trigger(Events.KEY_LOADING,{frag:Z}),this.fragCurrent===null&&(Qe=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!Z.encrypted&&be.encryptedFragments.length&&this.keyLoader.loadClear(Z,be.encryptedFragments),ae=Math.max(Z.start,ae||0),this.config.lowLatencyMode&&Z.sn!=="initSegment"){const tt=be.partList;if(tt&&ye){ae>Z.end&&be.fragmentHint&&(Z=be.fragmentHint);const it=this.getNextPart(tt,Z,ae);if(it>-1){const st=tt[it];this.log(`Loading part sn: ${Z.sn} p: ${st.index} cc: ${Z.cc} of playlist [${be.startSN}-${be.endSN}] parts [0-${it}-${tt.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${Z.level}, target: ${parseFloat(ae.toFixed(3))}`),this.nextLoadPosition=st.start+st.duration,this.state=State.FRAG_LOADING;let lt;return Qe?lt=Qe.then(ct=>!ct||this.fragContextChanged(ct.frag)?null:this.doFragPartsLoad(Z,st,ee,ye)).catch(ct=>this.handleFragLoadError(ct)):lt=this.doFragPartsLoad(Z,st,ee,ye).catch(ct=>this.handleFragLoadError(ct)),this.hls.trigger(Events.FRAG_LOADING,{frag:Z,part:st,targetBufferTime:ae}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):lt}else if(!Z.url||this.loadedEndOfParts(tt,ae))return Promise.resolve(null)}}this.log(`Loading fragment ${Z.sn} cc: ${Z.cc} ${be?"of ["+be.startSN+"-"+be.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${Z.level}, target: ${parseFloat(ae.toFixed(3))}`),isFiniteNumber(Z.sn)&&!this.bitrateTest&&(this.nextLoadPosition=Z.start+Z.duration),this.state=State.FRAG_LOADING;const Xe=this.config.progressive;let Je;return Xe&&Qe?Je=Qe.then(tt=>!tt||this.fragContextChanged(tt==null?void 0:tt.frag)?null:this.fragmentLoader.load(Z,ye)).catch(tt=>this.handleFragLoadError(tt)):Je=Promise.all([this.fragmentLoader.load(Z,Xe?ye:void 0),Qe]).then(([tt])=>(!Xe&&tt&&ye&&ye(tt),tt)).catch(tt=>this.handleFragLoadError(tt)),this.hls.trigger(Events.FRAG_LOADING,{frag:Z,targetBufferTime:ae}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):Je}doFragPartsLoad(Z,ee,ae,ye){return new Promise((ve,be)=>{var Qe;const Xe=[],Je=(Qe=ae.details)==null?void 0:Qe.partList,tt=it=>{this.fragmentLoader.loadPart(Z,it,ye).then(st=>{Xe[it.index]=st;const lt=st.part;this.hls.trigger(Events.FRAG_LOADED,st);const ct=getPartWith(ae,Z.sn,it.index+1)||findPart(Je,Z.sn,it.index+1);if(ct)tt(ct);else return ve({frag:Z,part:lt,partsLoaded:Xe})}).catch(be)};tt(ee)})}handleFragLoadError(Z){if("data"in Z){const ee=Z.data;Z.data&&ee.details===ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(ee.frag,ee.part):this.hls.trigger(Events.ERROR,ee)}else this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,err:Z,error:Z,fatal:!0});return null}_handleTransmuxerFlush(Z){const ee=this.getCurrentContext(Z);if(!ee||this.state!==State.PARSING){!this.fragCurrent&&this.state!==State.STOPPED&&this.state!==State.ERROR&&(this.state=State.IDLE);return}const{frag:ae,part:ye,level:ve}=ee,be=self.performance.now();ae.stats.parsing.end=be,ye&&(ye.stats.parsing.end=be),this.updateLevelTiming(ae,ye,ve,Z.partial)}getCurrentContext(Z){const{levels:ee,fragCurrent:ae}=this,{level:ye,sn:ve,part:be}=Z;if(!(ee!=null&&ee[ye]))return this.warn(`Levels object was unset while buffering fragment ${ve} of level ${ye}. The current chunk will not be buffered.`),null;const Qe=ee[ye],Xe=be>-1?getPartWith(Qe,ve,be):null,Je=Xe?Xe.fragment:getFragmentWithSN(Qe,ve,ae);return Je?(ae&&ae!==Je&&(Je.stats=ae.stats),{frag:Je,part:Xe,level:Qe}):null}bufferFragmentData(Z,ee,ae,ye,ve){var be;if(!Z||this.state!==State.PARSING)return;const{data1:Qe,data2:Xe}=Z;let Je=Qe;if(Qe&&Xe&&(Je=appendUint8Array(Qe,Xe)),!((be=Je)!=null&&be.length))return;const tt={type:Z.type,frag:ee,part:ae,chunkMeta:ye,parent:ee.type,data:Je};if(this.hls.trigger(Events.BUFFER_APPENDING,tt),Z.dropped&&Z.independent&&!ae){if(ve)return;this.flushBufferGap(ee)}}flushBufferGap(Z){const ee=this.media;if(!ee)return;if(!BufferHelper.isBuffered(ee,ee.currentTime)){this.flushMainBuffer(0,Z.start);return}const ae=ee.currentTime,ye=BufferHelper.bufferInfo(ee,ae,0),ve=Z.duration,be=Math.min(this.config.maxFragLookUpTolerance*2,ve*.25),Qe=Math.max(Math.min(Z.start-be,ye.end-be),ae+be);Z.start-Qe>be&&this.flushMainBuffer(Qe,Z.start)}getFwdBufferInfo(Z,ee){const ae=this.getLoadPosition();return isFiniteNumber(ae)?this.getFwdBufferInfoAtPos(Z,ae,ee):null}getFwdBufferInfoAtPos(Z,ee,ae){const{config:{maxBufferHole:ye}}=this,ve=BufferHelper.bufferInfo(Z,ee,ye);if(ve.len===0&&ve.nextStart!==void 0){const be=this.fragmentTracker.getBufferedFrag(ee,ae);if(be&&ve.nextStart<be.end)return BufferHelper.bufferInfo(Z,ee,Math.max(ve.nextStart,ye))}return ve}getMaxBufferLength(Z){const{config:ee}=this;let ae;return Z?ae=Math.max(8*ee.maxBufferSize/Z,ee.maxBufferLength):ae=ee.maxBufferLength,Math.min(ae,ee.maxMaxBufferLength)}reduceMaxBufferLength(Z){const ee=this.config,ae=Z||ee.maxBufferLength;return ee.maxMaxBufferLength>=ae?(ee.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${ee.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(Z,ee=PlaylistLevelType.MAIN){const ae=this.fragmentTracker.getAppendedFrag(Z,PlaylistLevelType.MAIN);return ae&&"fragment"in ae?ae.fragment:ae}getNextFragment(Z,ee){const ae=ee.fragments,ye=ae.length;if(!ye)return null;const{config:ve}=this,be=ae[0].start;let Qe;if(ee.live){const Xe=ve.initialLiveManifestSize;if(ye<Xe)return this.warn(`Not enough fragments to start playback (have: ${ye}, need: ${Xe})`),null;(!ee.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||Z<be)&&(Qe=this.getInitialLiveFragment(ee,ae),this.startPosition=this.nextLoadPosition=Qe?this.hls.liveSyncPosition||Qe.start:Z)}else Z<=be&&(Qe=ae[0]);if(!Qe){const Xe=ve.lowLatencyMode?ee.partEnd:ee.fragmentEnd;Qe=this.getFragmentAtPosition(Z,Xe,ee)}return this.mapToInitFragWhenRequired(Qe)}isLoopLoading(Z,ee){const ae=this.fragmentTracker.getState(Z);return(ae===FragmentState.OK||ae===FragmentState.PARTIAL&&!!Z.gap)&&this.nextLoadPosition>ee}getNextFragmentLoopLoading(Z,ee,ae,ye,ve){const be=Z.gap,Qe=this.getNextFragment(this.nextLoadPosition,ee);if(Qe===null)return Qe;if(Z=Qe,be&&Z&&!Z.gap&&ae.nextStart){const Xe=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,ae.nextStart,ye);if(Xe!==null&&ae.len+Xe.len>=ve)return this.log(`buffer full after gaps in "${ye}" playlist starting at sn: ${Z.sn}`),null}return Z}mapToInitFragWhenRequired(Z){return Z!=null&&Z.initSegment&&!(Z!=null&&Z.initSegment.data)&&!this.bitrateTest?Z.initSegment:Z}getNextPart(Z,ee,ae){let ye=-1,ve=!1,be=!0;for(let Qe=0,Xe=Z.length;Qe<Xe;Qe++){const Je=Z[Qe];if(be=be&&!Je.independent,ye>-1&&ae<Je.start)break;const tt=Je.loaded;tt?ye=-1:(ve||Je.independent||be)&&Je.fragment===ee&&(ye=Qe),ve=tt}return ye}loadedEndOfParts(Z,ee){const ae=Z[Z.length-1];return ae&&ee>ae.start&&ae.loaded}getInitialLiveFragment(Z,ee){const ae=this.fragPrevious;let ye=null;if(ae){if(Z.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${ae.programDateTime}`),ye=findFragmentByPDT(ee,ae.endProgramDateTime,this.config.maxFragLookUpTolerance)),!ye){const ve=ae.sn+1;if(ve>=Z.startSN&&ve<=Z.endSN){const be=ee[ve-Z.startSN];ae.cc===be.cc&&(ye=be,this.log(`Live playlist, switching playlist, load frag with next SN: ${ye.sn}`))}ye||(ye=findFragWithCC(ee,ae.cc),ye&&this.log(`Live playlist, switching playlist, load frag with same CC: ${ye.sn}`))}}else{const ve=this.hls.liveSyncPosition;ve!==null&&(ye=this.getFragmentAtPosition(ve,this.bitrateTest?Z.fragmentEnd:Z.edge,Z))}return ye}getFragmentAtPosition(Z,ee,ae){const{config:ye}=this;let{fragPrevious:ve}=this,{fragments:be,endSN:Qe}=ae;const{fragmentHint:Xe}=ae,Je=ye.maxFragLookUpTolerance,tt=ae.partList,it=!!(ye.lowLatencyMode&&tt!=null&&tt.length&&Xe);it&&Xe&&!this.bitrateTest&&(be=be.concat(Xe),Qe=Xe.sn);let st;if(Z<ee){const lt=Z>ee-Je?0:Je;st=findFragmentByPTS(ve,be,Z,lt)}else st=be[be.length-1];if(st){const lt=st.sn-ae.startSN,ct=this.fragmentTracker.getState(st);if((ct===FragmentState.OK||ct===FragmentState.PARTIAL&&st.gap)&&(ve=st),ve&&st.sn===ve.sn&&(!it||tt[0].fragment.sn>st.sn)&&ve&&st.level===ve.level){const ut=be[lt+1];st.sn<Qe&&this.fragmentTracker.getState(ut)!==FragmentState.OK?st=ut:st=null}}return st}synchronizeToLiveEdge(Z){const{config:ee,media:ae}=this;if(!ae)return;const ye=this.hls.liveSyncPosition,ve=ae.currentTime,be=Z.fragments[0].start,Qe=Z.edge,Xe=ve>=be-ee.maxFragLookUpTolerance&&ve<=Qe;if(ye!==null&&ae.duration>ye&&(ve<ye||!Xe)){const Je=ee.liveMaxLatencyDuration!==void 0?ee.liveMaxLatencyDuration:ee.liveMaxLatencyDurationCount*Z.targetduration;(!Xe&&ae.readyState<4||ve<Qe-Je)&&(this.loadedmetadata||(this.nextLoadPosition=ye),ae.readyState&&(this.warn(`Playback: ${ve.toFixed(3)} is located too far from the end of live sliding playlist: ${Qe}, reset currentTime to : ${ye.toFixed(3)}`),ae.currentTime=ye))}}alignPlaylists(Z,ee,ae){const ye=Z.fragments.length;if(!ye)return this.warn("No fragments in live playlist"),0;const ve=Z.fragments[0].start,be=!ee,Qe=Z.alignedSliding&&isFiniteNumber(ve);if(be||!Qe&&!ve){const{fragPrevious:Xe}=this;alignStream(Xe,ae,Z);const Je=Z.fragments[0].start;return this.log(`Live playlist sliding: ${Je.toFixed(2)} start-sn: ${ee?ee.startSN:"na"}->${Z.startSN} prev-sn: ${Xe?Xe.sn:"na"} fragments: ${ye}`),Je}return ve}waitForCdnTuneIn(Z){return Z.live&&Z.canBlockReload&&Z.partTarget&&Z.tuneInGoal>Math.max(Z.partHoldBack,Z.partTarget*3)}setStartPosition(Z,ee){let ae=this.startPosition;if(ae<ee&&(ae=-1),ae===-1||this.lastCurrentTime===-1){const ye=this.startTimeOffset!==null,ve=ye?this.startTimeOffset:Z.startTimeOffset;ve!==null&&isFiniteNumber(ve)?(ae=ee+ve,ve<0&&(ae+=Z.totalduration),ae=Math.min(Math.max(ee,ae),ee+Z.totalduration),this.log(`Start time offset ${ve} found in ${ye?"multivariant":"media"} playlist, adjust startPosition to ${ae}`),this.startPosition=ae):Z.live?ae=this.hls.liveSyncPosition||ee:this.startPosition=ae=0,this.lastCurrentTime=ae}this.nextLoadPosition=ae}getLoadPosition(){const{media:Z}=this;let ee=0;return this.loadedmetadata&&Z?ee=Z.currentTime:this.nextLoadPosition&&(ee=this.nextLoadPosition),ee}handleFragLoadAborted(Z,ee){this.transmuxer&&Z.sn!=="initSegment"&&Z.stats.aborted&&(this.warn(`Fragment ${Z.sn}${ee?" part "+ee.index:""} of level ${Z.level} was aborted`),this.resetFragmentLoading(Z))}resetFragmentLoading(Z){(!this.fragCurrent||!this.fragContextChanged(Z)&&this.state!==State.FRAG_LOADING_WAITING_RETRY)&&(this.state=State.IDLE)}onFragmentOrKeyLoadError(Z,ee){if(ee.chunkMeta&&!ee.frag){const tt=this.getCurrentContext(ee.chunkMeta);tt&&(ee.frag=tt.frag)}const ae=ee.frag;if(!ae||ae.type!==Z||!this.levels)return;if(this.fragContextChanged(ae)){var ye;this.warn(`Frag load error must match current frag to retry ${ae.url} > ${(ye=this.fragCurrent)==null?void 0:ye.url}`);return}const ve=ee.details===ErrorDetails.FRAG_GAP;ve&&this.fragmentTracker.fragBuffered(ae,!0);const be=ee.errorAction,{action:Qe,retryCount:Xe=0,retryConfig:Je}=be||{};if(be&&Qe===NetworkErrorAction.RetryRequest&&Je){this.resetStartWhenNotLoaded(this.levelLastLoaded);const tt=getRetryDelay(Je,Xe);this.warn(`Fragment ${ae.sn} of ${Z} ${ae.level} errored with ${ee.details}, retrying loading ${Xe+1}/${Je.maxNumRetry} in ${tt}ms`),be.resolved=!0,this.retryDate=self.performance.now()+tt,this.state=State.FRAG_LOADING_WAITING_RETRY}else if(Je&&be)if(this.resetFragmentErrors(Z),Xe<Je.maxNumRetry)!ve&&Qe!==NetworkErrorAction.RemoveAlternatePermanently&&(be.resolved=!0);else{logger.warn(`${ee.details} reached or exceeded max retry (${Xe})`);return}else(be==null?void 0:be.action)===NetworkErrorAction.SendAlternateToPenaltyBox?this.state=State.WAITING_LEVEL:this.state=State.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(Z){if(this.state===State.PARSING||this.state===State.PARSED){const ee=Z.parent,ae=this.getFwdBufferInfo(this.mediaBuffer,ee),ye=ae&&ae.len>.5;ye&&this.reduceMaxBufferLength(ae.len);const ve=!ye;return ve&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${ee} buffer`),Z.frag&&(this.fragmentTracker.removeFragment(Z.frag),this.nextLoadPosition=Z.frag.start),this.resetLoadingState(),ve}return!1}resetFragmentErrors(Z){Z===PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==State.STOPPED&&(this.state=State.IDLE)}afterBufferFlushed(Z,ee,ae){if(!Z)return;const ye=BufferHelper.getBuffered(Z);this.fragmentTracker.detectEvictedFragments(ee,ye,ae),this.state===State.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=State.IDLE}resetStartWhenNotLoaded(Z){if(!this.loadedmetadata){this.startFragRequested=!1;const ee=Z?Z.details:null;ee!=null&&ee.live?(this.startPosition=-1,this.setStartPosition(ee,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(Z){this.warn(`The loading context changed while buffering fragment ${Z.sn} of level ${Z.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(Z=0){this.fragmentTracker.removeFragmentsInRange(Z,1/0,this.playlistType,!1,!0)}updateLevelTiming(Z,ee,ae,ye){var ve;const be=ae.details;if(!be){this.warn("level.details undefined");return}if(!Object.keys(Z.elementaryStreams).reduce((Xe,Je)=>{const tt=Z.elementaryStreams[Je];if(tt){const it=tt.endPTS-tt.startPTS;if(it<=0)return this.warn(`Could not parse fragment ${Z.sn} ${Je} duration reliably (${it})`),Xe||!1;const st=ye?0:updateFragPTSDTS(be,Z,tt.startPTS,tt.endPTS,tt.startDTS,tt.endDTS);return this.hls.trigger(Events.LEVEL_PTS_UPDATED,{details:be,level:ae,drift:st,type:Je,frag:Z,start:tt.startPTS,end:tt.endPTS}),!0}return Xe},!1)&&((ve=this.transmuxer)==null?void 0:ve.error)===null){const Xe=new Error(`Found no media in fragment ${Z.sn} of level ${Z.level} resetting transmuxer to fallback to playlist timing`);if(ae.fragmentError===0&&(ae.fragmentError++,Z.gap=!0,this.fragmentTracker.removeFragment(Z),this.fragmentTracker.fragBuffered(Z,!0)),this.warn(Xe.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:Xe,frag:Z,reason:`Found no media in msn ${Z.sn} of level "${ae.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=State.PARSED,this.hls.trigger(Events.FRAG_PARSED,{frag:Z,part:ee})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(Z){Z.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(Z){const ee=this._state;ee!==Z&&(this._state=Z,this.log(`${ee}->${Z}`))}get state(){return this._state}}class ChunkCache{constructor(){this.chunks=[],this.dataLength=0}push(Z){this.chunks.push(Z),this.dataLength+=Z.length}flush(){const{chunks:Z,dataLength:ee}=this;let ae;if(Z.length)Z.length===1?ae=Z[0]:ae=concatUint8Arrays(Z,ee);else return new Uint8Array(0);return this.reset(),ae}reset(){this.chunks.length=0,this.dataLength=0}}function concatUint8Arrays(ie,Z){const ee=new Uint8Array(Z);let ae=0;for(let ye=0;ye<ie.length;ye++){const ve=ie[ye];ee.set(ve,ae),ae+=ve.length}return ee}function hasUMDWorker(){return typeof __HLS_WORKER_BUNDLE__=="function"}function injectWorker(){const ie=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),Z=self.URL.createObjectURL(ie);return{worker:new self.Worker(Z),objectURL:Z}}function loadWorker(ie){const Z=new self.URL(ie,self.location.href).href;return{worker:new self.Worker(Z),scriptURL:Z}}function dummyTrack(ie="",Z=9e4){return{type:ie,id:-1,pid:-1,inputTimeScale:Z,sequenceNumber:-1,samples:[],dropped:0}}class BaseAudioDemuxer{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(Z,ee,ae,ye){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(Z){this.initPTS=Z,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(Z,ee){return!1}appendFrame(Z,ee,ae){}demux(Z,ee){this.cachedData&&(Z=appendUint8Array(this.cachedData,Z),this.cachedData=null);let ae=getID3Data(Z,0),ye=ae?ae.length:0,ve;const be=this._audioTrack,Qe=this._id3Track,Xe=ae?getTimeStamp(ae):void 0,Je=Z.length;for((this.basePTS===null||this.frameIndex===0&&isFiniteNumber(Xe))&&(this.basePTS=initPTSFn(Xe,ee,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),ae&&ae.length>0&&Qe.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:ae,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});ye<Je;){if(this.canParse(Z,ye)){const tt=this.appendFrame(be,Z,ye);tt?(this.frameIndex++,this.lastPTS=tt.sample.pts,ye+=tt.length,ve=ye):ye=Je}else canParse$2(Z,ye)?(ae=getID3Data(Z,ye),Qe.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:ae,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),ye+=ae.length,ve=ye):ye++;if(ye===Je&&ve!==Je){const tt=sliceUint8(Z,ve);this.cachedData?this.cachedData=appendUint8Array(this.cachedData,tt):this.cachedData=tt}}return{audioTrack:be,videoTrack:dummyTrack(),id3Track:Qe,textTrack:dummyTrack()}}demuxSampleAes(Z,ee,ae){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(Z){const ee=this.cachedData;return ee&&(this.cachedData=null,this.demux(ee,0)),{audioTrack:this._audioTrack,videoTrack:dummyTrack(),id3Track:this._id3Track,textTrack:dummyTrack()}}destroy(){}}const initPTSFn=(ie,Z,ee)=>{if(isFiniteNumber(ie))return ie*90;const ae=ee?ee.baseTime*9e4/ee.timescale:0;return Z*9e4+ae};function getAudioConfig(ie,Z,ee,ae){let ye,ve,be,Qe;const Xe=navigator.userAgent.toLowerCase(),Je=ae,tt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ye=((Z[ee+2]&192)>>>6)+1;const it=(Z[ee+2]&60)>>>2;if(it>tt.length-1){const st=new Error(`invalid ADTS sampling index:${it}`);ie.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,error:st,reason:st.message});return}return be=(Z[ee+2]&1)<<2,be|=(Z[ee+3]&192)>>>6,logger.log(`manifest codec:${ae}, ADTS type:${ye}, samplingIndex:${it}`),/firefox/i.test(Xe)?it>=6?(ye=5,Qe=new Array(4),ve=it-3):(ye=2,Qe=new Array(2),ve=it):Xe.indexOf("android")!==-1?(ye=2,Qe=new Array(2),ve=it):(ye=5,Qe=new Array(4),ae&&(ae.indexOf("mp4a.40.29")!==-1||ae.indexOf("mp4a.40.5")!==-1)||!ae&&it>=6?ve=it-3:((ae&&ae.indexOf("mp4a.40.2")!==-1&&(it>=6&&be===1||/vivaldi/i.test(Xe))||!ae&&be===1)&&(ye=2,Qe=new Array(2)),ve=it)),Qe[0]=ye<<3,Qe[0]|=(it&14)>>1,Qe[1]|=(it&1)<<7,Qe[1]|=be<<3,ye===5&&(Qe[1]|=(ve&14)>>1,Qe[2]=(ve&1)<<7,Qe[2]|=8,Qe[3]=0),{config:Qe,samplerate:tt[it],channelCount:be,codec:"mp4a.40."+ye,manifestCodec:Je}}function isHeaderPattern$1(ie,Z){return ie[Z]===255&&(ie[Z+1]&246)===240}function getHeaderLength(ie,Z){return ie[Z+1]&1?7:9}function getFullFrameLength(ie,Z){return(ie[Z+3]&3)<<11|ie[Z+4]<<3|(ie[Z+5]&224)>>>5}function canGetFrameLength(ie,Z){return Z+5<ie.length}function isHeader$1(ie,Z){return Z+1<ie.length&&isHeaderPattern$1(ie,Z)}function canParse$1(ie,Z){return canGetFrameLength(ie,Z)&&isHeaderPattern$1(ie,Z)&&getFullFrameLength(ie,Z)<=ie.length-Z}function probe$1(ie,Z){if(isHeader$1(ie,Z)){const ee=getHeaderLength(ie,Z);if(Z+ee>=ie.length)return!1;const ae=getFullFrameLength(ie,Z);if(ae<=ee)return!1;const ye=Z+ae;return ye===ie.length||isHeader$1(ie,ye)}return!1}function initTrackConfig(ie,Z,ee,ae,ye){if(!ie.samplerate){const ve=getAudioConfig(Z,ee,ae,ye);if(!ve)return;ie.config=ve.config,ie.samplerate=ve.samplerate,ie.channelCount=ve.channelCount,ie.codec=ve.codec,ie.manifestCodec=ve.manifestCodec,logger.log(`parsed codec:${ie.codec}, rate:${ve.samplerate}, channels:${ve.channelCount}`)}}function getFrameDuration(ie){return 1024*9e4/ie}function parseFrameHeader(ie,Z){const ee=getHeaderLength(ie,Z);if(Z+ee<=ie.length){const ae=getFullFrameLength(ie,Z)-ee;if(ae>0)return{headerLength:ee,frameLength:ae}}}function appendFrame$2(ie,Z,ee,ae,ye){const ve=getFrameDuration(ie.samplerate),be=ae+ye*ve,Qe=parseFrameHeader(Z,ee);let Xe;if(Qe){const{frameLength:it,headerLength:st}=Qe,lt=st+it,ct=Math.max(0,ee+lt-Z.length);ct?(Xe=new Uint8Array(lt-st),Xe.set(Z.subarray(ee+st,Z.length),0)):Xe=Z.subarray(ee+st,ee+lt);const gt={unit:Xe,pts:be};return ct||ie.samples.push(gt),{sample:gt,length:lt,missing:ct}}const Je=Z.length-ee;return Xe=new Uint8Array(Je),Xe.set(Z.subarray(ee,Z.length),0),{sample:{unit:Xe,pts:be},length:Je,missing:-1}}let chromeVersion$1=null;const BitratesMap=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot=[0,1,1,4];function appendFrame$1(ie,Z,ee,ae,ye){if(ee+24>Z.length)return;const ve=parseHeader(Z,ee);if(ve&&ee+ve.frameLength<=Z.length){const be=ve.samplesPerFrame*9e4/ve.sampleRate,Qe=ae+ye*be,Xe={unit:Z.subarray(ee,ee+ve.frameLength),pts:Qe,dts:Qe};return ie.config=[],ie.channelCount=ve.channelCount,ie.samplerate=ve.sampleRate,ie.samples.push(Xe),{sample:Xe,length:ve.frameLength,missing:0}}}function parseHeader(ie,Z){const ee=ie[Z+1]>>3&3,ae=ie[Z+1]>>1&3,ye=ie[Z+2]>>4&15,ve=ie[Z+2]>>2&3;if(ee!==1&&ye!==0&&ye!==15&&ve!==3){const be=ie[Z+2]>>1&1,Qe=ie[Z+3]>>6,Xe=ee===3?3-ae:ae===3?3:4,Je=BitratesMap[Xe*14+ye-1]*1e3,it=SamplingRateMap[(ee===3?0:ee===2?1:2)*3+ve],st=Qe===3?1:2,lt=SamplesCoefficients[ee][ae],ct=BytesInSlot[ae],gt=lt*8*ct,ut=Math.floor(lt*Je/it+be)*ct;if(chromeVersion$1===null){const ni=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion$1=ni?parseInt(ni[1]):0}return!!chromeVersion$1&&chromeVersion$1<=87&&ae===2&&Je>=224e3&&Qe===0&&(ie[Z+3]=ie[Z+3]|128),{sampleRate:it,channelCount:st,frameLength:ut,samplesPerFrame:gt}}}function isHeaderPattern(ie,Z){return ie[Z]===255&&(ie[Z+1]&224)===224&&(ie[Z+1]&6)!==0}function isHeader(ie,Z){return Z+1<ie.length&&isHeaderPattern(ie,Z)}function canParse(ie,Z){return isHeaderPattern(ie,Z)&&4<=ie.length-Z}function probe(ie,Z){if(Z+1<ie.length&&isHeaderPattern(ie,Z)){const ae=parseHeader(ie,Z);let ye=4;ae!=null&&ae.frameLength&&(ye=ae.frameLength);const ve=Z+ye;return ve===ie.length||isHeader(ie,ve)}return!1}class AACDemuxer extends BaseAudioDemuxer{constructor(Z,ee){super(),this.observer=void 0,this.config=void 0,this.observer=Z,this.config=ee}resetInitSegment(Z,ee,ae,ye){super.resetInitSegment(Z,ee,ae,ye),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:ee,duration:ye,inputTimeScale:9e4,dropped:0}}static probe(Z){if(!Z)return!1;const ee=getID3Data(Z,0);let ae=(ee==null?void 0:ee.length)||0;if(probe(Z,ae))return!1;for(let ye=Z.length;ae<ye;ae++)if(probe$1(Z,ae))return logger.log("ADTS sync word found !"),!0;return!1}canParse(Z,ee){return canParse$1(Z,ee)}appendFrame(Z,ee,ae){initTrackConfig(Z,this.observer,ee,ae,Z.manifestCodec);const ye=appendFrame$2(Z,ee,ae,this.basePTS,this.frameIndex);if(ye&&ye.missing===0)return ye}}const emsgSchemePattern=/\/emsg[-/]ID3/i;class MP4Demuxer{constructor(Z,ee){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=ee}resetTimeStamp(){}resetInitSegment(Z,ee,ae,ye){const ve=this.videoTrack=dummyTrack("video",1),be=this.audioTrack=dummyTrack("audio",1),Qe=this.txtTrack=dummyTrack("text",1);if(this.id3Track=dummyTrack("id3",1),this.timeOffset=0,!(Z!=null&&Z.byteLength))return;const Xe=parseInitSegment(Z);if(Xe.video){const{id:Je,timescale:tt,codec:it}=Xe.video;ve.id=Je,ve.timescale=Qe.timescale=tt,ve.codec=it}if(Xe.audio){const{id:Je,timescale:tt,codec:it}=Xe.audio;be.id=Je,be.timescale=tt,be.codec=it}Qe.id=RemuxerTrackIdConfig.text,ve.sampleDuration=0,ve.duration=be.duration=ye}resetContiguity(){this.remainderData=null}static probe(Z){return hasMoofData(Z)}demux(Z,ee){this.timeOffset=ee;let ae=Z;const ye=this.videoTrack,ve=this.txtTrack;if(this.config.progressive){this.remainderData&&(ae=appendUint8Array(this.remainderData,Z));const Qe=segmentValidRange(ae);this.remainderData=Qe.remainder,ye.samples=Qe.valid||new Uint8Array}else ye.samples=ae;const be=this.extractID3Track(ye,ee);return ve.samples=parseSamples(ee,ye),{videoTrack:ye,audioTrack:this.audioTrack,id3Track:be,textTrack:this.txtTrack}}flush(){const Z=this.timeOffset,ee=this.videoTrack,ae=this.txtTrack;ee.samples=this.remainderData||new Uint8Array,this.remainderData=null;const ye=this.extractID3Track(ee,this.timeOffset);return ae.samples=parseSamples(Z,ee),{videoTrack:ee,audioTrack:dummyTrack(),id3Track:ye,textTrack:dummyTrack()}}extractID3Track(Z,ee){const ae=this.id3Track;if(Z.samples.length){const ye=findBox(Z.samples,["emsg"]);ye&&ye.forEach(ve=>{const be=parseEmsg(ve);if(emsgSchemePattern.test(be.schemeIdUri)){const Qe=isFiniteNumber(be.presentationTime)?be.presentationTime/be.timeScale:ee+be.presentationTimeDelta/be.timeScale;let Xe=be.eventDuration===4294967295?Number.POSITIVE_INFINITY:be.eventDuration/be.timeScale;Xe<=.001&&(Xe=Number.POSITIVE_INFINITY);const Je=be.payload;ae.samples.push({data:Je,len:Je.byteLength,dts:Qe,pts:Qe,type:MetadataSchema.emsg,duration:Xe})}})}return ae}demuxSampleAes(Z,ee,ae){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const getAudioBSID=(ie,Z)=>{let ee=0,ae=5;Z+=ae;const ye=new Uint32Array(1),ve=new Uint32Array(1),be=new Uint8Array(1);for(;ae>0;){be[0]=ie[Z];const Qe=Math.min(ae,8),Xe=8-Qe;ve[0]=4278190080>>>24+Xe<<Xe,ye[0]=(be[0]&ve[0])>>Xe,ee=ee?ee<<Qe|ye[0]:ye[0],Z+=1,ae-=Qe}return ee};class AC3Demuxer extends BaseAudioDemuxer{constructor(Z){super(),this.observer=void 0,this.observer=Z}resetInitSegment(Z,ee,ae,ye){super.resetInitSegment(Z,ee,ae,ye),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:ee,duration:ye,inputTimeScale:9e4,dropped:0}}canParse(Z,ee){return ee+64<Z.length}appendFrame(Z,ee,ae){const ye=appendFrame(Z,ee,ae,this.basePTS,this.frameIndex);if(ye!==-1)return{sample:Z.samples[Z.samples.length-1],length:ye,missing:0}}static probe(Z){if(!Z)return!1;const ee=getID3Data(Z,0);if(!ee)return!1;const ae=ee.length;return Z[ae]===11&&Z[ae+1]===119&&getTimeStamp(ee)!==void 0&&getAudioBSID(Z,ae)<16}}function appendFrame(ie,Z,ee,ae,ye){if(ee+8>Z.length||Z[ee]!==11||Z[ee+1]!==119)return-1;const ve=Z[ee+4]>>6;if(ve>=3)return-1;const Qe=[48e3,44100,32e3][ve],Xe=Z[ee+4]&63,tt=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][Xe*3+ve]*2;if(ee+tt>Z.length)return-1;const it=Z[ee+6]>>5;let st=0;it===2?st+=2:(it&1&&it!==1&&(st+=2),it&4&&(st+=2));const lt=(Z[ee+6]<<8|Z[ee+7])>>12-st&1,gt=[2,1,2,3,3,4,4,5][it]+lt,ut=Z[ee+5]>>3,mt=Z[ee+5]&7,ei=new Uint8Array([ve<<6|ut<<1|mt>>2,(mt&3)<<6|it<<3|lt<<2|Xe>>4,Xe<<4&224]),ni=1536/Qe*9e4,ri=ae+ye*ni,si=Z.subarray(ee,ee+tt);return ie.config=ei,ie.channelCount=gt,ie.samplerate=Qe,ie.samples.push({unit:si,pts:ri}),tt}class BaseVideoParser{constructor(){this.VideoSample=null}createVideoSample(Z,ee,ae,ye){return{key:Z,frame:!1,pts:ee,dts:ae,units:[],debug:ye,length:0}}getLastNalUnit(Z){var ee;let ae=this.VideoSample,ye;if((!ae||ae.units.length===0)&&(ae=Z[Z.length-1]),(ee=ae)!=null&&ee.units){const ve=ae.units;ye=ve[ve.length-1]}return ye}pushAccessUnit(Z,ee){if(Z.units.length&&Z.frame){if(Z.pts===void 0){const ae=ee.samples,ye=ae.length;if(ye){const ve=ae[ye-1];Z.pts=ve.pts,Z.dts=ve.dts}else{ee.dropped++;return}}ee.samples.push(Z)}Z.debug.length&&logger.log(Z.pts+"/"+Z.dts+":"+Z.debug)}}class ExpGolomb{constructor(Z){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=Z,this.bytesAvailable=Z.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const Z=this.data,ee=this.bytesAvailable,ae=Z.byteLength-ee,ye=new Uint8Array(4),ve=Math.min(4,ee);if(ve===0)throw new Error("no bytes available");ye.set(Z.subarray(ae,ae+ve)),this.word=new DataView(ye.buffer).getUint32(0),this.bitsAvailable=ve*8,this.bytesAvailable-=ve}skipBits(Z){let ee;Z=Math.min(Z,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>Z?(this.word<<=Z,this.bitsAvailable-=Z):(Z-=this.bitsAvailable,ee=Z>>3,Z-=ee<<3,this.bytesAvailable-=ee,this.loadWord(),this.word<<=Z,this.bitsAvailable-=Z)}readBits(Z){let ee=Math.min(this.bitsAvailable,Z);const ae=this.word>>>32-ee;if(Z>32&&logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=ee,this.bitsAvailable>0)this.word<<=ee;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return ee=Z-ee,ee>0&&this.bitsAvailable?ae<<ee|this.readBits(ee):ae}skipLZ(){let Z;for(Z=0;Z<this.bitsAvailable;++Z)if(this.word&2147483648>>>Z)return this.word<<=Z,this.bitsAvailable-=Z,Z;return this.loadWord(),Z+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const Z=this.skipLZ();return this.readBits(Z+1)-1}readEG(){const Z=this.readUEG();return 1&Z?1+Z>>>1:-1*(Z>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(Z){let ee=8,ae=8,ye;for(let ve=0;ve<Z;ve++)ae!==0&&(ye=this.readEG(),ae=(ee+ye+256)%256),ee=ae===0?ee:ae}readSPS(){let Z=0,ee=0,ae=0,ye=0,ve,be,Qe;const Xe=this.readUByte.bind(this),Je=this.readBits.bind(this),tt=this.readUEG.bind(this),it=this.readBoolean.bind(this),st=this.skipBits.bind(this),lt=this.skipEG.bind(this),ct=this.skipUEG.bind(this),gt=this.skipScalingList.bind(this);Xe();const ut=Xe();if(Je(5),st(3),Xe(),ct(),ut===100||ut===110||ut===122||ut===244||ut===44||ut===83||ut===86||ut===118||ut===128){const li=tt();if(li===3&&st(1),ct(),ct(),st(1),it())for(be=li!==3?8:12,Qe=0;Qe<be;Qe++)it()&&(Qe<6?gt(16):gt(64))}ct();const mt=tt();if(mt===0)tt();else if(mt===1)for(st(1),lt(),lt(),ve=tt(),Qe=0;Qe<ve;Qe++)lt();ct(),st(1);const ei=tt(),ni=tt(),ri=Je(1);ri===0&&st(1),st(1),it()&&(Z=tt(),ee=tt(),ae=tt(),ye=tt());let si=[1,1];if(it()&&it())switch(Xe()){case 1:si=[1,1];break;case 2:si=[12,11];break;case 3:si=[10,11];break;case 4:si=[16,11];break;case 5:si=[40,33];break;case 6:si=[24,11];break;case 7:si=[20,11];break;case 8:si=[32,11];break;case 9:si=[80,33];break;case 10:si=[18,11];break;case 11:si=[15,11];break;case 12:si=[64,33];break;case 13:si=[160,99];break;case 14:si=[4,3];break;case 15:si=[3,2];break;case 16:si=[2,1];break;case 255:{si=[Xe()<<8|Xe(),Xe()<<8|Xe()];break}}return{width:Math.ceil((ei+1)*16-Z*2-ee*2),height:(2-ri)*(ni+1)*16-(ri?2:4)*(ae+ye),pixelRatio:si}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class AvcVideoParser extends BaseVideoParser{parseAVCPES(Z,ee,ae,ye,ve){const be=this.parseAVCNALu(Z,ae.data);let Qe=this.VideoSample,Xe,Je=!1;ae.data=null,Qe&&be.length&&!Z.audFound&&(this.pushAccessUnit(Qe,Z),Qe=this.VideoSample=this.createVideoSample(!1,ae.pts,ae.dts,"")),be.forEach(tt=>{var it;switch(tt.type){case 1:{let gt=!1;Xe=!0;const ut=tt.data;if(Je&&ut.length>4){const mt=new ExpGolomb(ut).readSliceType();(mt===2||mt===4||mt===7||mt===9)&&(gt=!0)}if(gt){var st;(st=Qe)!=null&&st.frame&&!Qe.key&&(this.pushAccessUnit(Qe,Z),Qe=this.VideoSample=null)}Qe||(Qe=this.VideoSample=this.createVideoSample(!0,ae.pts,ae.dts,"")),Qe.frame=!0,Qe.key=gt;break}case 5:Xe=!0,(it=Qe)!=null&&it.frame&&!Qe.key&&(this.pushAccessUnit(Qe,Z),Qe=this.VideoSample=null),Qe||(Qe=this.VideoSample=this.createVideoSample(!0,ae.pts,ae.dts,"")),Qe.key=!0,Qe.frame=!0;break;case 6:{Xe=!0,parseSEIMessageFromNALu(tt.data,1,ae.pts,ee.samples);break}case 7:{var lt,ct;Xe=!0,Je=!0;const gt=tt.data,mt=new ExpGolomb(gt).readSPS();if(!Z.sps||Z.width!==mt.width||Z.height!==mt.height||((lt=Z.pixelRatio)==null?void 0:lt[0])!==mt.pixelRatio[0]||((ct=Z.pixelRatio)==null?void 0:ct[1])!==mt.pixelRatio[1]){Z.width=mt.width,Z.height=mt.height,Z.pixelRatio=mt.pixelRatio,Z.sps=[gt],Z.duration=ve;const ei=gt.subarray(1,4);let ni="avc1.";for(let ri=0;ri<3;ri++){let si=ei[ri].toString(16);si.length<2&&(si="0"+si),ni+=si}Z.codec=ni}break}case 8:Xe=!0,Z.pps=[tt.data];break;case 9:Xe=!0,Z.audFound=!0,Qe&&this.pushAccessUnit(Qe,Z),Qe=this.VideoSample=this.createVideoSample(!1,ae.pts,ae.dts,"");break;case 12:Xe=!0;break;default:Xe=!1,Qe&&(Qe.debug+="unknown NAL "+tt.type+" ");break}Qe&&Xe&&Qe.units.push(tt)}),ye&&Qe&&(this.pushAccessUnit(Qe,Z),this.VideoSample=null)}parseAVCNALu(Z,ee){const ae=ee.byteLength;let ye=Z.naluState||0;const ve=ye,be=[];let Qe=0,Xe,Je,tt,it=-1,st=0;for(ye===-1&&(it=0,st=ee[0]&31,ye=0,Qe=1);Qe<ae;){if(Xe=ee[Qe++],!ye){ye=Xe?0:1;continue}if(ye===1){ye=Xe?0:2;continue}if(!Xe)ye=3;else if(Xe===1){if(Je=Qe-ye-1,it>=0){const lt={data:ee.subarray(it,Je),type:st};be.push(lt)}else{const lt=this.getLastNalUnit(Z.samples);lt&&(ve&&Qe<=4-ve&&lt.state&&(lt.data=lt.data.subarray(0,lt.data.byteLength-ve)),Je>0&&(lt.data=appendUint8Array(lt.data,ee.subarray(0,Je)),lt.state=0))}Qe<ae?(tt=ee[Qe]&31,it=Qe,st=tt,ye=0):ye=-1}else ye=0}if(it>=0&&ye>=0){const lt={data:ee.subarray(it,ae),type:st,state:ye};be.push(lt)}if(be.length===0){const lt=this.getLastNalUnit(Z.samples);lt&&(lt.data=appendUint8Array(lt.data,ee))}return Z.naluState=ye,be}}class SampleAesDecrypter{constructor(Z,ee,ae){this.keyData=void 0,this.decrypter=void 0,this.keyData=ae,this.decrypter=new Decrypter(ee,{removePKCS7Padding:!1})}decryptBuffer(Z){return this.decrypter.decrypt(Z,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(Z,ee,ae){const ye=Z[ee].unit;if(ye.length<=16)return;const ve=ye.subarray(16,ye.length-ye.length%16),be=ve.buffer.slice(ve.byteOffset,ve.byteOffset+ve.length);this.decryptBuffer(be).then(Qe=>{const Xe=new Uint8Array(Qe);ye.set(Xe,16),this.decrypter.isSync()||this.decryptAacSamples(Z,ee+1,ae)})}decryptAacSamples(Z,ee,ae){for(;;ee++){if(ee>=Z.length){ae();return}if(!(Z[ee].unit.length<32)&&(this.decryptAacSample(Z,ee,ae),!this.decrypter.isSync()))return}}getAvcEncryptedData(Z){const ee=Math.floor((Z.length-48)/160)*16+16,ae=new Int8Array(ee);let ye=0;for(let ve=32;ve<Z.length-16;ve+=160,ye+=16)ae.set(Z.subarray(ve,ve+16),ye);return ae}getAvcDecryptedUnit(Z,ee){const ae=new Uint8Array(ee);let ye=0;for(let ve=32;ve<Z.length-16;ve+=160,ye+=16)Z.set(ae.subarray(ye,ye+16),ve);return Z}decryptAvcSample(Z,ee,ae,ye,ve){const be=discardEPB(ve.data),Qe=this.getAvcEncryptedData(be);this.decryptBuffer(Qe.buffer).then(Xe=>{ve.data=this.getAvcDecryptedUnit(be,Xe),this.decrypter.isSync()||this.decryptAvcSamples(Z,ee,ae+1,ye)})}decryptAvcSamples(Z,ee,ae,ye){if(Z instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;ee++,ae=0){if(ee>=Z.length){ye();return}const ve=Z[ee].units;for(;!(ae>=ve.length);ae++){const be=ve[ae];if(!(be.data.length<=48||be.type!==1&&be.type!==5)&&(this.decryptAvcSample(Z,ee,ae,ye,be),!this.decrypter.isSync()))return}}}}const PACKET_LENGTH=188;class TSDemuxer{constructor(Z,ee,ae){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=Z,this.config=ee,this.typeSupported=ae,this.videoParser=new AvcVideoParser}static probe(Z){const ee=TSDemuxer.syncOffset(Z);return ee>0&&logger.warn(`MPEG2-TS detected but first sync word found @ offset ${ee}`),ee!==-1}static syncOffset(Z){const ee=Z.length;let ae=Math.min(PACKET_LENGTH*5,ee-PACKET_LENGTH)+1,ye=0;for(;ye<ae;){let ve=!1,be=-1,Qe=0;for(let Xe=ye;Xe<ee;Xe+=PACKET_LENGTH)if(Z[Xe]===71&&(ee-Xe===PACKET_LENGTH||Z[Xe+PACKET_LENGTH]===71)){if(Qe++,be===-1&&(be=Xe,be!==0&&(ae=Math.min(be+PACKET_LENGTH*99,Z.length-PACKET_LENGTH)+1)),ve||(ve=parsePID(Z,Xe)===0),ve&&Qe>1&&(be===0&&Qe>2||Xe+PACKET_LENGTH>ae))return be}else{if(Qe)return-1;break}ye++}return-1}static createTrack(Z,ee){return{container:Z==="video"||Z==="audio"?"video/mp2t":void 0,type:Z,id:RemuxerTrackIdConfig[Z],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:Z==="audio"?ee:void 0}}resetInitSegment(Z,ee,ae,ye){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=TSDemuxer.createTrack("video"),this._audioTrack=TSDemuxer.createTrack("audio",ye),this._id3Track=TSDemuxer.createTrack("id3"),this._txtTrack=TSDemuxer.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=ee,this.videoCodec=ae,this._duration=ye}resetTimeStamp(){}resetContiguity(){const{_audioTrack:Z,_videoTrack:ee,_id3Track:ae}=this;Z&&(Z.pesData=null),ee&&(ee.pesData=null),ae&&(ae.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(Z,ee,ae=!1,ye=!1){ae||(this.sampleAes=null);let ve;const be=this._videoTrack,Qe=this._audioTrack,Xe=this._id3Track,Je=this._txtTrack;let tt=be.pid,it=be.pesData,st=Qe.pid,lt=Xe.pid,ct=Qe.pesData,gt=Xe.pesData,ut=null,mt=this.pmtParsed,ei=this._pmtId,ni=Z.length;if(this.remainderData&&(Z=appendUint8Array(this.remainderData,Z),ni=Z.length,this.remainderData=null),ni<PACKET_LENGTH&&!ye)return this.remainderData=Z,{audioTrack:Qe,videoTrack:be,id3Track:Xe,textTrack:Je};const ri=Math.max(0,TSDemuxer.syncOffset(Z));ni-=(ni-ri)%PACKET_LENGTH,ni<Z.byteLength&&!ye&&(this.remainderData=new Uint8Array(Z.buffer,ni,Z.buffer.byteLength-ni));let si=0;for(let ai=ri;ai<ni;ai+=PACKET_LENGTH)if(Z[ai]===71){const ci=!!(Z[ai+1]&64),Ci=parsePID(Z,ai),pi=(Z[ai+3]&48)>>4;let gi;if(pi>1){if(gi=ai+5+Z[ai+4],gi===ai+PACKET_LENGTH)continue}else gi=ai+4;switch(Ci){case tt:ci&&(it&&(ve=parsePES(it))&&this.videoParser.parseAVCPES(be,Je,ve,!1,this._duration),it={data:[],size:0}),it&&(it.data.push(Z.subarray(gi,ai+PACKET_LENGTH)),it.size+=ai+PACKET_LENGTH-gi);break;case st:if(ci){if(ct&&(ve=parsePES(ct)))switch(Qe.segmentCodec){case"aac":this.parseAACPES(Qe,ve);break;case"mp3":this.parseMPEGPES(Qe,ve);break;case"ac3":this.parseAC3PES(Qe,ve);break}ct={data:[],size:0}}ct&&(ct.data.push(Z.subarray(gi,ai+PACKET_LENGTH)),ct.size+=ai+PACKET_LENGTH-gi);break;case lt:ci&&(gt&&(ve=parsePES(gt))&&this.parseID3PES(Xe,ve),gt={data:[],size:0}),gt&&(gt.data.push(Z.subarray(gi,ai+PACKET_LENGTH)),gt.size+=ai+PACKET_LENGTH-gi);break;case 0:ci&&(gi+=Z[gi]+1),ei=this._pmtId=parsePAT(Z,gi);break;case ei:{ci&&(gi+=Z[gi]+1);const _i=parsePMT(Z,gi,this.typeSupported,ae);tt=_i.videoPid,tt>0&&(be.pid=tt,be.segmentCodec=_i.segmentVideoCodec),st=_i.audioPid,st>0&&(Qe.pid=st,Qe.segmentCodec=_i.segmentAudioCodec),lt=_i.id3Pid,lt>0&&(Xe.pid=lt),ut!==null&&!mt&&(logger.warn(`MPEG-TS PMT found at ${ai} after unknown PID '${ut}'. Backtracking to sync byte @${ri} to parse all TS packets.`),ut=null,ai=ri-188),mt=this.pmtParsed=!0;break}case 17:case 8191:break;default:ut=Ci;break}}else si++;if(si>0){const ai=new Error(`Found ${si} TS packet/s that do not start with 0x47`);this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:ai,reason:ai.message})}be.pesData=it,Qe.pesData=ct,Xe.pesData=gt;const li={audioTrack:Qe,videoTrack:be,id3Track:Xe,textTrack:Je};return ye&&this.extractRemainingSamples(li),li}flush(){const{remainderData:Z}=this;this.remainderData=null;let ee;return Z?ee=this.demux(Z,-1,!1,!0):ee={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(ee),this.sampleAes?this.decrypt(ee,this.sampleAes):ee}extractRemainingSamples(Z){const{audioTrack:ee,videoTrack:ae,id3Track:ye,textTrack:ve}=Z,be=ae.pesData,Qe=ee.pesData,Xe=ye.pesData;let Je;if(be&&(Je=parsePES(be))?(this.videoParser.parseAVCPES(ae,ve,Je,!0,this._duration),ae.pesData=null):ae.pesData=be,Qe&&(Je=parsePES(Qe))){switch(ee.segmentCodec){case"aac":this.parseAACPES(ee,Je);break;case"mp3":this.parseMPEGPES(ee,Je);break;case"ac3":this.parseAC3PES(ee,Je);break}ee.pesData=null}else Qe!=null&&Qe.size&&logger.log("last AAC PES packet truncated,might overlap between fragments"),ee.pesData=Qe;Xe&&(Je=parsePES(Xe))?(this.parseID3PES(ye,Je),ye.pesData=null):ye.pesData=Xe}demuxSampleAes(Z,ee,ae){const ye=this.demux(Z,ae,!0,!this.config.progressive),ve=this.sampleAes=new SampleAesDecrypter(this.observer,this.config,ee);return this.decrypt(ye,ve)}decrypt(Z,ee){return new Promise(ae=>{const{audioTrack:ye,videoTrack:ve}=Z;ye.samples&&ye.segmentCodec==="aac"?ee.decryptAacSamples(ye.samples,0,()=>{ve.samples?ee.decryptAvcSamples(ve.samples,0,0,()=>{ae(Z)}):ae(Z)}):ve.samples&&ee.decryptAvcSamples(ve.samples,0,0,()=>{ae(Z)})})}destroy(){this._duration=0}parseAACPES(Z,ee){let ae=0;const ye=this.aacOverFlow;let ve=ee.data;if(ye){this.aacOverFlow=null;const it=ye.missing,st=ye.sample.unit.byteLength;if(it===-1)ve=appendUint8Array(ye.sample.unit,ve);else{const lt=st-it;ye.sample.unit.set(ve.subarray(0,it),lt),Z.samples.push(ye.sample),ae=ye.missing}}let be,Qe;for(be=ae,Qe=ve.length;be<Qe-1&&!isHeader$1(ve,be);be++);if(be!==ae){let it;const st=be<Qe-1;st?it=`AAC PES did not start with ADTS header,offset:${be}`:it="No ADTS header found in AAC PES";const lt=new Error(it);if(logger.warn(`parsing error: ${it}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,levelRetry:st,error:lt,reason:it}),!st)return}initTrackConfig(Z,this.observer,ve,be,this.audioCodec);let Xe;if(ee.pts!==void 0)Xe=ee.pts;else if(ye){const it=getFrameDuration(Z.samplerate);Xe=ye.sample.pts+it}else{logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let Je=0,tt;for(;be<Qe;)if(tt=appendFrame$2(Z,ve,be,Xe,Je),be+=tt.length,tt.missing){this.aacOverFlow=tt;break}else for(Je++;be<Qe-1&&!isHeader$1(ve,be);be++);}parseMPEGPES(Z,ee){const ae=ee.data,ye=ae.length;let ve=0,be=0;const Qe=ee.pts;if(Qe===void 0){logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;be<ye;)if(isHeader(ae,be)){const Xe=appendFrame$1(Z,ae,be,Qe,ve);if(Xe)be+=Xe.length,ve++;else break}else be++}parseAC3PES(Z,ee){{const ae=ee.data,ye=ee.pts;if(ye===void 0){logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const ve=ae.length;let be=0,Qe=0,Xe;for(;Qe<ve&&(Xe=appendFrame(Z,ae,Qe,ye,be++))>0;)Qe+=Xe}}parseID3PES(Z,ee){if(ee.pts===void 0){logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const ae=_extends({},ee,{type:this._videoTrack?MetadataSchema.emsg:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});Z.samples.push(ae)}}function parsePID(ie,Z){return((ie[Z+1]&31)<<8)+ie[Z+2]}function parsePAT(ie,Z){return(ie[Z+10]&31)<<8|ie[Z+11]}function parsePMT(ie,Z,ee,ae){const ye={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},ve=(ie[Z+1]&15)<<8|ie[Z+2],be=Z+3+ve-4,Qe=(ie[Z+10]&15)<<8|ie[Z+11];for(Z+=12+Qe;Z<be;){const Xe=parsePID(ie,Z),Je=(ie[Z+3]&15)<<8|ie[Z+4];switch(ie[Z]){case 207:if(!ae){logEncryptedSamplesFoundInUnencryptedStream("ADTS AAC");break}case 15:ye.audioPid===-1&&(ye.audioPid=Xe);break;case 21:ye.id3Pid===-1&&(ye.id3Pid=Xe);break;case 219:if(!ae){logEncryptedSamplesFoundInUnencryptedStream("H.264");break}case 27:ye.videoPid===-1&&(ye.videoPid=Xe,ye.segmentVideoCodec="avc");break;case 3:case 4:!ee.mpeg&&!ee.mp3?logger.log("MPEG audio found, not supported in this browser"):ye.audioPid===-1&&(ye.audioPid=Xe,ye.segmentAudioCodec="mp3");break;case 193:if(!ae){logEncryptedSamplesFoundInUnencryptedStream("AC-3");break}case 129:ee.ac3?ye.audioPid===-1&&(ye.audioPid=Xe,ye.segmentAudioCodec="ac3"):logger.log("AC-3 audio found, not supported in this browser");break;case 6:if(ye.audioPid===-1&&Je>0){let tt=Z+5,it=Je;for(;it>2;){switch(ie[tt]){case 106:ee.ac3!==!0?logger.log("AC-3 audio found, not supported in this browser for now"):(ye.audioPid=Xe,ye.segmentAudioCodec="ac3");break}const lt=ie[tt+1]+2;tt+=lt,it-=lt}}break;case 194:case 135:logger.warn("Unsupported EC-3 in M2TS found");break;case 36:logger.warn("Unsupported HEVC in M2TS found");break}Z+=Je+5}return ye}function logEncryptedSamplesFoundInUnencryptedStream(ie){logger.log(`${ie} with AES-128-CBC encryption found in unencrypted stream`)}function parsePES(ie){let Z=0,ee,ae,ye,ve,be;const Qe=ie.data;if(!ie||ie.size===0)return null;for(;Qe[0].length<19&&Qe.length>1;)Qe[0]=appendUint8Array(Qe[0],Qe[1]),Qe.splice(1,1);if(ee=Qe[0],(ee[0]<<16)+(ee[1]<<8)+ee[2]===1){if(ae=(ee[4]<<8)+ee[5],ae&&ae>ie.size-6)return null;const Je=ee[7];Je&192&&(ve=(ee[9]&14)*536870912+(ee[10]&255)*4194304+(ee[11]&254)*16384+(ee[12]&255)*128+(ee[13]&254)/2,Je&64?(be=(ee[14]&14)*536870912+(ee[15]&255)*4194304+(ee[16]&254)*16384+(ee[17]&255)*128+(ee[18]&254)/2,ve-be>60*9e4&&(logger.warn(`${Math.round((ve-be)/9e4)}s delta between PTS and DTS, align them`),ve=be)):be=ve),ye=ee[8];let tt=ye+9;if(ie.size<=tt)return null;ie.size-=tt;const it=new Uint8Array(ie.size);for(let st=0,lt=Qe.length;st<lt;st++){ee=Qe[st];let ct=ee.byteLength;if(tt)if(tt>ct){tt-=ct;continue}else ee=ee.subarray(tt),ct-=tt,tt=0;it.set(ee,Z),Z+=ct}return ae&&(ae-=ye+3),{data:it,pts:ve,dts:be,len:ae}}return null}class MP3Demuxer extends BaseAudioDemuxer{resetInitSegment(Z,ee,ae,ye){super.resetInitSegment(Z,ee,ae,ye),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:ee,duration:ye,inputTimeScale:9e4,dropped:0}}static probe(Z){if(!Z)return!1;const ee=getID3Data(Z,0);let ae=(ee==null?void 0:ee.length)||0;if(ee&&Z[ae]===11&&Z[ae+1]===119&&getTimeStamp(ee)!==void 0&&getAudioBSID(Z,ae)<=16)return!1;for(let ye=Z.length;ae<ye;ae++)if(probe(Z,ae))return logger.log("MPEG Audio sync word found !"),!0;return!1}canParse(Z,ee){return canParse(Z,ee)}appendFrame(Z,ee,ae){if(this.basePTS!==null)return appendFrame$1(Z,ee,ae,this.basePTS,this.frameIndex)}}class AAC{static getSilentFrame(Z,ee){switch(Z){case"mp4a.40.2":if(ee===1)return new Uint8Array([0,200,0,128,35,128]);if(ee===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(ee===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(ee===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(ee===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(ee===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(ee===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(ee===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(ee===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const UINT32_MAX=Math.pow(2,32)-1;class MP4{static init(){MP4.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let Z;for(Z in MP4.types)MP4.types.hasOwnProperty(Z)&&(MP4.types[Z]=[Z.charCodeAt(0),Z.charCodeAt(1),Z.charCodeAt(2),Z.charCodeAt(3)]);const ee=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ae=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:ee,audio:ae};const ye=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ve=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=ve,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const be=new Uint8Array([105,115,111,109]),Qe=new Uint8Array([97,118,99,49]),Xe=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,be,Xe,be,Qe),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,ye))}static box(Z,...ee){let ae=8,ye=ee.length;const ve=ye;for(;ye--;)ae+=ee[ye].byteLength;const be=new Uint8Array(ae);for(be[0]=ae>>24&255,be[1]=ae>>16&255,be[2]=ae>>8&255,be[3]=ae&255,be.set(Z,4),ye=0,ae=8;ye<ve;ye++)be.set(ee[ye],ae),ae+=ee[ye].byteLength;return be}static hdlr(Z){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[Z])}static mdat(Z){return MP4.box(MP4.types.mdat,Z)}static mdhd(Z,ee){ee*=Z;const ae=Math.floor(ee/(UINT32_MAX+1)),ye=Math.floor(ee%(UINT32_MAX+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Z>>24&255,Z>>16&255,Z>>8&255,Z&255,ae>>24,ae>>16&255,ae>>8&255,ae&255,ye>>24,ye>>16&255,ye>>8&255,ye&255,85,196,0,0]))}static mdia(Z){return MP4.box(MP4.types.mdia,MP4.mdhd(Z.timescale,Z.duration),MP4.hdlr(Z.type),MP4.minf(Z))}static mfhd(Z){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,Z>>24,Z>>16&255,Z>>8&255,Z&255]))}static minf(Z){return Z.type==="audio"?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(Z)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(Z))}static moof(Z,ee,ae){return MP4.box(MP4.types.moof,MP4.mfhd(Z),MP4.traf(ae,ee))}static moov(Z){let ee=Z.length;const ae=[];for(;ee--;)ae[ee]=MP4.trak(Z[ee]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(Z[0].timescale,Z[0].duration)].concat(ae).concat(MP4.mvex(Z)))}static mvex(Z){let ee=Z.length;const ae=[];for(;ee--;)ae[ee]=MP4.trex(Z[ee]);return MP4.box.apply(null,[MP4.types.mvex,...ae])}static mvhd(Z,ee){ee*=Z;const ae=Math.floor(ee/(UINT32_MAX+1)),ye=Math.floor(ee%(UINT32_MAX+1)),ve=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Z>>24&255,Z>>16&255,Z>>8&255,Z&255,ae>>24,ae>>16&255,ae>>8&255,ae&255,ye>>24,ye>>16&255,ye>>8&255,ye&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,ve)}static sdtp(Z){const ee=Z.samples||[],ae=new Uint8Array(4+ee.length);let ye,ve;for(ye=0;ye<ee.length;ye++)ve=ee[ye].flags,ae[ye+4]=ve.dependsOn<<4|ve.isDependedOn<<2|ve.hasRedundancy;return MP4.box(MP4.types.sdtp,ae)}static stbl(Z){return MP4.box(MP4.types.stbl,MP4.stsd(Z),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))}static avc1(Z){let ee=[],ae=[],ye,ve,be;for(ye=0;ye<Z.sps.length;ye++)ve=Z.sps[ye],be=ve.byteLength,ee.push(be>>>8&255),ee.push(be&255),ee=ee.concat(Array.prototype.slice.call(ve));for(ye=0;ye<Z.pps.length;ye++)ve=Z.pps[ye],be=ve.byteLength,ae.push(be>>>8&255),ae.push(be&255),ae=ae.concat(Array.prototype.slice.call(ve));const Qe=MP4.box(MP4.types.avcC,new Uint8Array([1,ee[3],ee[4],ee[5],255,224|Z.sps.length].concat(ee).concat([Z.pps.length]).concat(ae))),Xe=Z.width,Je=Z.height,tt=Z.pixelRatio[0],it=Z.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Xe>>8&255,Xe&255,Je>>8&255,Je&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Qe,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([tt>>24,tt>>16&255,tt>>8&255,tt&255,it>>24,it>>16&255,it>>8&255,it&255])))}static esds(Z){const ee=Z.config.length;return new Uint8Array([0,0,0,0,3,23+ee,0,1,0,4,15+ee,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([ee]).concat(Z.config).concat([6,1,2]))}static audioStsd(Z){const ee=Z.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Z.channelCount,0,16,0,0,0,0,ee>>8&255,ee&255,0,0])}static mp4a(Z){return MP4.box(MP4.types.mp4a,MP4.audioStsd(Z),MP4.box(MP4.types.esds,MP4.esds(Z)))}static mp3(Z){return MP4.box(MP4.types[".mp3"],MP4.audioStsd(Z))}static ac3(Z){return MP4.box(MP4.types["ac-3"],MP4.audioStsd(Z),MP4.box(MP4.types.dac3,Z.config))}static stsd(Z){return Z.type==="audio"?Z.segmentCodec==="mp3"&&Z.codec==="mp3"?MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(Z)):Z.segmentCodec==="ac3"?MP4.box(MP4.types.stsd,MP4.STSD,MP4.ac3(Z)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(Z)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(Z))}static tkhd(Z){const ee=Z.id,ae=Z.duration*Z.timescale,ye=Z.width,ve=Z.height,be=Math.floor(ae/(UINT32_MAX+1)),Qe=Math.floor(ae%(UINT32_MAX+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,ee>>24&255,ee>>16&255,ee>>8&255,ee&255,0,0,0,0,be>>24,be>>16&255,be>>8&255,be&255,Qe>>24,Qe>>16&255,Qe>>8&255,Qe&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,ye>>8&255,ye&255,0,0,ve>>8&255,ve&255,0,0]))}static traf(Z,ee){const ae=MP4.sdtp(Z),ye=Z.id,ve=Math.floor(ee/(UINT32_MAX+1)),be=Math.floor(ee%(UINT32_MAX+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,ye>>24,ye>>16&255,ye>>8&255,ye&255])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,ve>>24,ve>>16&255,ve>>8&255,ve&255,be>>24,be>>16&255,be>>8&255,be&255])),MP4.trun(Z,ae.length+16+20+8+16+8+8),ae)}static trak(Z){return Z.duration=Z.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(Z),MP4.mdia(Z))}static trex(Z){const ee=Z.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,ee>>24,ee>>16&255,ee>>8&255,ee&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(Z,ee){const ae=Z.samples||[],ye=ae.length,ve=12+16*ye,be=new Uint8Array(ve);let Qe,Xe,Je,tt,it,st;for(ee+=8+ve,be.set([Z.type==="video"?1:0,0,15,1,ye>>>24&255,ye>>>16&255,ye>>>8&255,ye&255,ee>>>24&255,ee>>>16&255,ee>>>8&255,ee&255],0),Qe=0;Qe<ye;Qe++)Xe=ae[Qe],Je=Xe.duration,tt=Xe.size,it=Xe.flags,st=Xe.cts,be.set([Je>>>24&255,Je>>>16&255,Je>>>8&255,Je&255,tt>>>24&255,tt>>>16&255,tt>>>8&255,tt&255,it.isLeading<<2|it.dependsOn,it.isDependedOn<<6|it.hasRedundancy<<4|it.paddingValue<<1|it.isNonSync,it.degradPrio&61440,it.degradPrio&15,st>>>24&255,st>>>16&255,st>>>8&255,st&255],12+16*Qe);return MP4.box(MP4.types.trun,be)}static initSegment(Z){MP4.types||MP4.init();const ee=MP4.moov(Z);return appendUint8Array(MP4.FTYP,ee)}}MP4.types=void 0,MP4.HDLR_TYPES=void 0,MP4.STTS=void 0,MP4.STSC=void 0,MP4.STCO=void 0,MP4.STSZ=void 0,MP4.VMHD=void 0,MP4.SMHD=void 0,MP4.STSD=void 0,MP4.FTYP=void 0,MP4.DINF=void 0;const MPEG_TS_CLOCK_FREQ_HZ=9e4;function toTimescaleFromBase(ie,Z,ee=1,ae=!1){const ye=ie*Z*ee;return ae?Math.round(ye):ye}function toTimescaleFromScale(ie,Z,ee=1,ae=!1){return toTimescaleFromBase(ie,Z,1/ee,ae)}function toMsFromMpegTsClock(ie,Z=!1){return toTimescaleFromBase(ie,1e3,1/MPEG_TS_CLOCK_FREQ_HZ,Z)}function toMpegTsClockFromTimescale(ie,Z=1){return toTimescaleFromBase(ie,MPEG_TS_CLOCK_FREQ_HZ,1/Z)}const MAX_SILENT_FRAME_DURATION=10*1e3,AAC_SAMPLES_PER_FRAME=1024,MPEG_AUDIO_SAMPLE_PER_FRAME=1152,AC3_SAMPLES_PER_FRAME=1536;let chromeVersion=null,safariWebkitVersion=null;class MP4Remuxer{constructor(Z,ee,ae,ye=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=Z,this.config=ee,this.typeSupported=ae,this.ISGenerated=!1,chromeVersion===null){const be=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion=be?parseInt(be[1]):0}if(safariWebkitVersion===null){const ve=navigator.userAgent.match(/Safari\/(\d+)/i);safariWebkitVersion=ve?parseInt(ve[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(Z){logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=Z}resetNextTimestamp(){logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(Z){let ee=!1;const ae=Z.reduce((ye,ve)=>{const be=ve.pts-ye;return be<-4294967296?(ee=!0,normalizePts(ye,ve.pts)):be>0?ye:ve.pts},Z[0].pts);return ee&&logger.debug("PTS rollover detected"),ae}remux(Z,ee,ae,ye,ve,be,Qe,Xe){let Je,tt,it,st,lt,ct,gt=ve,ut=ve;const mt=Z.pid>-1,ei=ee.pid>-1,ni=ee.samples.length,ri=Z.samples.length>0,si=Qe&&ni>0||ni>1;if((!mt||ri)&&(!ei||si)||this.ISGenerated||Qe){if(this.ISGenerated){var ai,ci,Ci,pi;const Mi=this.videoTrackConfig;Mi&&(ee.width!==Mi.width||ee.height!==Mi.height||((ai=ee.pixelRatio)==null?void 0:ai[0])!==((ci=Mi.pixelRatio)==null?void 0:ci[0])||((Ci=ee.pixelRatio)==null?void 0:Ci[1])!==((pi=Mi.pixelRatio)==null?void 0:pi[1]))&&this.resetInitSegment()}else it=this.generateIS(Z,ee,ve,be);const gi=this.isVideoContiguous;let _i=-1,bi;if(si&&(_i=findKeyframeIndex(ee.samples),!gi&&this.config.forceKeyFrameOnDiscontinuity))if(ct=!0,_i>0){logger.warn(`[mp4-remuxer]: Dropped ${_i} out of ${ni} video samples due to a missing keyframe`);const Mi=this.getVideoStartPts(ee.samples);ee.samples=ee.samples.slice(_i),ee.dropped+=_i,ut+=(ee.samples[0].pts-Mi)/ee.inputTimeScale,bi=ut}else _i===-1&&(logger.warn(`[mp4-remuxer]: No keyframe found out of ${ni} video samples`),ct=!1);if(this.ISGenerated){if(ri&&si){const Mi=this.getVideoStartPts(ee.samples),Ti=(normalizePts(Z.samples[0].pts,Mi)-Mi)/ee.inputTimeScale;gt+=Math.max(0,Ti),ut+=Math.max(0,-Ti)}if(ri){if(Z.samplerate||(logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),it=this.generateIS(Z,ee,ve,be)),tt=this.remuxAudio(Z,gt,this.isAudioContiguous,be,ei||si||Xe===PlaylistLevelType.AUDIO?ut:void 0),si){const Mi=tt?tt.endPTS-tt.startPTS:0;ee.inputTimeScale||(logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),it=this.generateIS(Z,ee,ve,be)),Je=this.remuxVideo(ee,ut,gi,Mi)}}else si&&(Je=this.remuxVideo(ee,ut,gi,0));Je&&(Je.firstKeyFrame=_i,Je.independent=_i!==-1,Je.firstKeyFramePTS=bi)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(ae.samples.length&&(lt=flushTextTrackMetadataCueSamples(ae,ve,this._initPTS,this._initDTS)),ye.samples.length&&(st=flushTextTrackUserdataCueSamples(ye,ve,this._initPTS))),{audio:tt,video:Je,initSegment:it,independent:ct,text:st,id3:lt}}generateIS(Z,ee,ae,ye){const ve=Z.samples,be=ee.samples,Qe=this.typeSupported,Xe={},Je=this._initPTS;let tt=!Je||ye,it="audio/mp4",st,lt,ct;if(tt&&(st=lt=1/0),Z.config&&ve.length){switch(Z.timescale=Z.samplerate,Z.segmentCodec){case"mp3":Qe.mpeg?(it="audio/mpeg",Z.codec=""):Qe.mp3&&(Z.codec="mp3");break;case"ac3":Z.codec="ac-3";break}Xe.audio={id:"audio",container:it,codec:Z.codec,initSegment:Z.segmentCodec==="mp3"&&Qe.mpeg?new Uint8Array(0):MP4.initSegment([Z]),metadata:{channelCount:Z.channelCount}},tt&&(ct=Z.inputTimeScale,!Je||ct!==Je.timescale?st=lt=ve[0].pts-Math.round(ct*ae):tt=!1)}if(ee.sps&&ee.pps&&be.length){if(ee.timescale=ee.inputTimeScale,Xe.video={id:"main",container:"video/mp4",codec:ee.codec,initSegment:MP4.initSegment([ee]),metadata:{width:ee.width,height:ee.height}},tt)if(ct=ee.inputTimeScale,!Je||ct!==Je.timescale){const gt=this.getVideoStartPts(be),ut=Math.round(ct*ae);lt=Math.min(lt,normalizePts(be[0].dts,gt)-ut),st=Math.min(st,gt-ut)}else tt=!1;this.videoTrackConfig={width:ee.width,height:ee.height,pixelRatio:ee.pixelRatio}}if(Object.keys(Xe).length)return this.ISGenerated=!0,tt?(this._initPTS={baseTime:st,timescale:ct},this._initDTS={baseTime:lt,timescale:ct}):st=ct=void 0,{tracks:Xe,initPTS:st,timescale:ct}}remuxVideo(Z,ee,ae,ye){const ve=Z.inputTimeScale,be=Z.samples,Qe=[],Xe=be.length,Je=this._initPTS;let tt=this.nextAvcDts,it=8,st=this.videoSampleDuration,lt,ct,gt=Number.POSITIVE_INFINITY,ut=Number.NEGATIVE_INFINITY,mt=!1;if(!ae||tt===null){const Pi=ee*ve,xi=be[0].pts-normalizePts(be[0].dts,be[0].pts);chromeVersion&&tt!==null&&Math.abs(Pi-xi-tt)<15e3?ae=!0:tt=Pi-xi}const ei=Je.baseTime*ve/Je.timescale;for(let Pi=0;Pi<Xe;Pi++){const xi=be[Pi];xi.pts=normalizePts(xi.pts-ei,tt),xi.dts=normalizePts(xi.dts-ei,tt),xi.dts<be[Pi>0?Pi-1:Pi].dts&&(mt=!0)}mt&&be.sort(function(Pi,xi){const ki=Pi.dts-xi.dts,Li=Pi.pts-xi.pts;return ki||Li}),lt=be[0].dts,ct=be[be.length-1].dts;const ni=ct-lt,ri=ni?Math.round(ni/(Xe-1)):st||Z.inputTimeScale/30;if(ae){const Pi=lt-tt,xi=Pi>ri,ki=Pi<-1;if((xi||ki)&&(xi?logger.warn(`AVC: ${toMsFromMpegTsClock(Pi,!0)} ms (${Pi}dts) hole between fragments detected at ${ee.toFixed(3)}`):logger.warn(`AVC: ${toMsFromMpegTsClock(-Pi,!0)} ms (${Pi}dts) overlapping between fragments detected at ${ee.toFixed(3)}`),!ki||tt>=be[0].pts||chromeVersion)){lt=tt;const Li=be[0].pts-Pi;if(xi)be[0].dts=lt,be[0].pts=Li;else for(let Yr=0;Yr<be.length&&!(be[Yr].dts>Li);Yr++)be[Yr].dts-=Pi,be[Yr].pts-=Pi;logger.log(`Video: Initial PTS/DTS adjusted: ${toMsFromMpegTsClock(Li,!0)}/${toMsFromMpegTsClock(lt,!0)}, delta: ${toMsFromMpegTsClock(Pi,!0)} ms`)}}lt=Math.max(0,lt);let si=0,li=0,ai=lt;for(let Pi=0;Pi<Xe;Pi++){const xi=be[Pi],ki=xi.units,Li=ki.length;let Yr=0;for(let Ui=0;Ui<Li;Ui++)Yr+=ki[Ui].data.length;li+=Yr,si+=Li,xi.length=Yr,xi.dts<ai?(xi.dts=ai,ai+=ri/4|0||1):ai=xi.dts,gt=Math.min(xi.pts,gt),ut=Math.max(xi.pts,ut)}ct=be[Xe-1].dts;const ci=li+4*si+8;let Ci;try{Ci=new Uint8Array(ci)}catch(Pi){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:Pi,bytes:ci,reason:`fail allocating video mdat ${ci}`});return}const pi=new DataView(Ci.buffer);pi.setUint32(0,ci),Ci.set(MP4.types.mdat,4);let gi=!1,_i=Number.POSITIVE_INFINITY,bi=Number.POSITIVE_INFINITY,Mi=Number.NEGATIVE_INFINITY,yi=Number.NEGATIVE_INFINITY;for(let Pi=0;Pi<Xe;Pi++){const xi=be[Pi],ki=xi.units;let Li=0;for(let Vi=0,Kr=ki.length;Vi<Kr;Vi++){const Wi=ki[Vi],Zr=Wi.data,ps=Wi.data.byteLength;pi.setUint32(it,ps),it+=4,Ci.set(Zr,it),it+=ps,Li+=4+ps}let Yr;if(Pi<Xe-1)st=be[Pi+1].dts-xi.dts,Yr=be[Pi+1].pts-xi.pts;else{const Vi=this.config,Kr=Pi>0?xi.dts-be[Pi-1].dts:ri;if(Yr=Pi>0?xi.pts-be[Pi-1].pts:ri,Vi.stretchShortVideoTrack&&this.nextAudioPts!==null){const Wi=Math.floor(Vi.maxBufferHole*ve),Zr=(ye?gt+ye*ve:this.nextAudioPts)-xi.pts;Zr>Wi?(st=Zr-Kr,st<0?st=Kr:gi=!0,logger.log(`[mp4-remuxer]: It is approximately ${Zr/90} ms to the next segment; using duration ${st/90} ms for the last video frame.`)):st=Kr}else st=Kr}const Ui=Math.round(xi.pts-xi.dts);_i=Math.min(_i,st),Mi=Math.max(Mi,st),bi=Math.min(bi,Yr),yi=Math.max(yi,Yr),Qe.push(new Mp4Sample(xi.key,st,Li,Ui))}if(Qe.length){if(chromeVersion){if(chromeVersion<70){const Pi=Qe[0].flags;Pi.dependsOn=2,Pi.isNonSync=0}}else if(safariWebkitVersion&&yi-bi<Mi-_i&&ri/Mi<.025&&Qe[0].cts===0){logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Pi=lt;for(let xi=0,ki=Qe.length;xi<ki;xi++){const Li=Pi+Qe[xi].duration,Yr=Pi+Qe[xi].cts;if(xi<ki-1){const Ui=Li+Qe[xi+1].cts;Qe[xi].duration=Ui-Yr}else Qe[xi].duration=xi?Qe[xi-1].duration:ri;Qe[xi].cts=0,Pi=Li}}}st=gi||!st?ri:st,this.nextAvcDts=tt=ct+st,this.videoSampleDuration=st,this.isVideoContiguous=!0;const Ri={data1:MP4.moof(Z.sequenceNumber++,lt,_extends({},Z,{samples:Qe})),data2:Ci,startPTS:gt/ve,endPTS:(ut+st)/ve,startDTS:lt/ve,endDTS:tt/ve,type:"video",hasAudio:!1,hasVideo:!0,nb:Qe.length,dropped:Z.dropped};return Z.samples=[],Z.dropped=0,Ri}getSamplesPerFrame(Z){switch(Z.segmentCodec){case"mp3":return MPEG_AUDIO_SAMPLE_PER_FRAME;case"ac3":return AC3_SAMPLES_PER_FRAME;default:return AAC_SAMPLES_PER_FRAME}}remuxAudio(Z,ee,ae,ye,ve){const be=Z.inputTimeScale,Qe=Z.samplerate?Z.samplerate:be,Xe=be/Qe,Je=this.getSamplesPerFrame(Z),tt=Je*Xe,it=this._initPTS,st=Z.segmentCodec==="mp3"&&this.typeSupported.mpeg,lt=[],ct=ve!==void 0;let gt=Z.samples,ut=st?0:8,mt=this.nextAudioPts||-1;const ei=ee*be,ni=it.baseTime*be/it.timescale;if(this.isAudioContiguous=ae=ae||gt.length&&mt>0&&(ye&&Math.abs(ei-mt)<9e3||Math.abs(normalizePts(gt[0].pts-ni,ei)-mt)<20*tt),gt.forEach(function(Ti){Ti.pts=normalizePts(Ti.pts-ni,ei)}),!ae||mt<0){if(gt=gt.filter(Ti=>Ti.pts>=0),!gt.length)return;ve===0?mt=0:ye&&!ct?mt=Math.max(0,ei):mt=gt[0].pts}if(Z.segmentCodec==="aac"){const Ti=this.config.maxAudioFramesDrift;for(let Ii=0,Ri=mt;Ii<gt.length;Ii++){const Pi=gt[Ii],xi=Pi.pts,ki=xi-Ri,Li=Math.abs(1e3*ki/be);if(ki<=-Ti*tt&&ct)Ii===0&&(logger.warn(`Audio frame @ ${(xi/be).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*ki/be)} ms.`),this.nextAudioPts=mt=Ri=xi);else if(ki>=Ti*tt&&Li<MAX_SILENT_FRAME_DURATION&&ct){let Yr=Math.round(ki/tt);Ri=xi-Yr*tt,Ri<0&&(Yr--,Ri+=tt),Ii===0&&(this.nextAudioPts=mt=Ri),logger.warn(`[mp4-remuxer]: Injecting ${Yr} audio frame @ ${(Ri/be).toFixed(3)}s due to ${Math.round(1e3*ki/be)} ms gap.`);for(let Ui=0;Ui<Yr;Ui++){const Vi=Math.max(Ri,0);let Kr=AAC.getSilentFrame(Z.manifestCodec||Z.codec,Z.channelCount);Kr||(logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Kr=Pi.unit.subarray()),gt.splice(Ii,0,{unit:Kr,pts:Vi}),Ri+=tt,Ii++}}Pi.pts=Ri,Ri+=tt}}let ri=null,si=null,li,ai=0,ci=gt.length;for(;ci--;)ai+=gt[ci].unit.byteLength;for(let Ti=0,Ii=gt.length;Ti<Ii;Ti++){const Ri=gt[Ti],Pi=Ri.unit;let xi=Ri.pts;if(si!==null){const Li=lt[Ti-1];Li.duration=Math.round((xi-si)/Xe)}else if(ae&&Z.segmentCodec==="aac"&&(xi=mt),ri=xi,ai>0){ai+=ut;try{li=new Uint8Array(ai)}catch(Li){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:Li,bytes:ai,reason:`fail allocating audio mdat ${ai}`});return}st||(new DataView(li.buffer).setUint32(0,ai),li.set(MP4.types.mdat,4))}else return;li.set(Pi,ut);const ki=Pi.byteLength;ut+=ki,lt.push(new Mp4Sample(!0,Je,ki,0)),si=xi}const Ci=lt.length;if(!Ci)return;const pi=lt[lt.length-1];this.nextAudioPts=mt=si+Xe*pi.duration;const gi=st?new Uint8Array(0):MP4.moof(Z.sequenceNumber++,ri/Xe,_extends({},Z,{samples:lt}));Z.samples=[];const _i=ri/be,bi=mt/be,yi={data1:gi,data2:li,startPTS:_i,endPTS:bi,startDTS:_i,endDTS:bi,type:"audio",hasAudio:!0,hasVideo:!1,nb:Ci};return this.isAudioContiguous=!0,yi}remuxEmptyAudio(Z,ee,ae,ye){const ve=Z.inputTimeScale,be=Z.samplerate?Z.samplerate:ve,Qe=ve/be,Xe=this.nextAudioPts,Je=this._initDTS,tt=Je.baseTime*9e4/Je.timescale,it=(Xe!==null?Xe:ye.startDTS*ve)+tt,st=ye.endDTS*ve+tt,lt=Qe*AAC_SAMPLES_PER_FRAME,ct=Math.ceil((st-it)/lt),gt=AAC.getSilentFrame(Z.manifestCodec||Z.codec,Z.channelCount);if(logger.warn("[mp4-remuxer]: remux empty Audio"),!gt){logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const ut=[];for(let mt=0;mt<ct;mt++){const ei=it+mt*lt;ut.push({unit:gt,pts:ei,dts:ei})}return Z.samples=ut,this.remuxAudio(Z,ee,ae,!1)}}function normalizePts(ie,Z){let ee;if(Z===null)return ie;for(Z<ie?ee=-8589934592:ee=8589934592;Math.abs(ie-Z)>4294967296;)ie+=ee;return ie}function findKeyframeIndex(ie){for(let Z=0;Z<ie.length;Z++)if(ie[Z].key)return Z;return-1}function flushTextTrackMetadataCueSamples(ie,Z,ee,ae){const ye=ie.samples.length;if(!ye)return;const ve=ie.inputTimeScale;for(let Qe=0;Qe<ye;Qe++){const Xe=ie.samples[Qe];Xe.pts=normalizePts(Xe.pts-ee.baseTime*ve/ee.timescale,Z*ve)/ve,Xe.dts=normalizePts(Xe.dts-ae.baseTime*ve/ae.timescale,Z*ve)/ve}const be=ie.samples;return ie.samples=[],{samples:be}}function flushTextTrackUserdataCueSamples(ie,Z,ee){const ae=ie.samples.length;if(!ae)return;const ye=ie.inputTimeScale;for(let be=0;be<ae;be++){const Qe=ie.samples[be];Qe.pts=normalizePts(Qe.pts-ee.baseTime*ye/ee.timescale,Z*ye)/ye}ie.samples.sort((be,Qe)=>be.pts-Qe.pts);const ve=ie.samples;return ie.samples=[],{samples:ve}}class Mp4Sample{constructor(Z,ee,ae,ye){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=ee,this.size=ae,this.cts=ye,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:Z?2:1,isNonSync:Z?0:1}}}class PassThroughRemuxer{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(Z){this.initPTS=Z,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(Z,ee,ae,ye){this.audioCodec=ee,this.videoCodec=ae,this.generateInitSegment(patchEncyptionData(Z,ye)),this.emitInitSegment=!0}generateInitSegment(Z){let{audioCodec:ee,videoCodec:ae}=this;if(!(Z!=null&&Z.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const ye=this.initData=parseInitSegment(Z);ye.audio&&(ee=getParsedTrackCodec(ye.audio,ElementaryStreamTypes.AUDIO)),ye.video&&(ae=getParsedTrackCodec(ye.video,ElementaryStreamTypes.VIDEO));const ve={};ye.audio&&ye.video?ve.audiovideo={container:"video/mp4",codec:ee+","+ae,initSegment:Z,id:"main"}:ye.audio?ve.audio={container:"audio/mp4",codec:ee,initSegment:Z,id:"audio"}:ye.video?ve.video={container:"video/mp4",codec:ae,initSegment:Z,id:"main"}:logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=ve}remux(Z,ee,ae,ye,ve,be){var Qe,Xe;let{initPTS:Je,lastEndTime:tt}=this;const it={audio:void 0,video:void 0,text:ye,id3:ae,initSegment:void 0};isFiniteNumber(tt)||(tt=this.lastEndTime=ve||0);const st=ee.samples;if(!(st!=null&&st.length))return it;const lt={initPTS:void 0,timescale:1};let ct=this.initData;if((Qe=ct)!=null&&Qe.length||(this.generateInitSegment(st),ct=this.initData),!((Xe=ct)!=null&&Xe.length))return logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),it;this.emitInitSegment&&(lt.tracks=this.initTracks,this.emitInitSegment=!1);const gt=getDuration(st,ct),ut=getStartDTS(ct,st),mt=ut===null?ve:ut;(isInvalidInitPts(Je,mt,ve,gt)||lt.timescale!==Je.timescale&&be)&&(lt.initPTS=mt-ve,Je&&Je.timescale===1&&logger.warn(`Adjusting initPTS by ${lt.initPTS-Je.baseTime}`),this.initPTS=Je={baseTime:lt.initPTS,timescale:1});const ei=Z?mt-Je.baseTime/Je.timescale:tt,ni=ei+gt;offsetStartDTS(ct,st,Je.baseTime/Je.timescale),gt>0?this.lastEndTime=ni:(logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const ri=!!ct.audio,si=!!ct.video;let li="";ri&&(li+="audio"),si&&(li+="video");const ai={data1:st,startPTS:ei,startDTS:ei,endPTS:ni,endDTS:ni,type:li,hasAudio:ri,hasVideo:si,nb:1,dropped:0};return it.audio=ai.type==="audio"?ai:void 0,it.video=ai.type!=="audio"?ai:void 0,it.initSegment=lt,it.id3=flushTextTrackMetadataCueSamples(ae,ve,Je,Je),ye.samples.length&&(it.text=flushTextTrackUserdataCueSamples(ye,ve,Je)),it}}function isInvalidInitPts(ie,Z,ee,ae){if(ie===null)return!0;const ye=Math.max(ae,1),ve=Z-ie.baseTime/ie.timescale;return Math.abs(ve-ee)>ye}function getParsedTrackCodec(ie,Z){const ee=ie==null?void 0:ie.codec;if(ee&&ee.length>4)return ee;if(Z===ElementaryStreamTypes.AUDIO){if(ee==="ec-3"||ee==="ac-3"||ee==="alac")return ee;if(ee==="fLaC"||ee==="Opus")return getCodecCompatibleName(ee,!1);const ae="mp4a.40.5";return logger.info(`Parsed audio codec "${ee}" or audio object type not handled. Using "${ae}"`),ae}return logger.warn(`Unhandled video codec "${ee}"`),ee==="hvc1"||ee==="hev1"?"hvc1.1.6.L120.90":ee==="av01"?"av01.0.04M.08":"avc1.42e01e"}let now;try{now=self.performance.now.bind(self.performance)}catch(ie){logger.debug("Unable to use Performance API on this environment"),now=optionalSelf==null?void 0:optionalSelf.Date.now}const muxConfig=[{demux:MP4Demuxer,remux:PassThroughRemuxer},{demux:TSDemuxer,remux:MP4Remuxer},{demux:AACDemuxer,remux:MP4Remuxer},{demux:MP3Demuxer,remux:MP4Remuxer}];muxConfig.splice(2,0,{demux:AC3Demuxer,remux:MP4Remuxer});class Transmuxer{constructor(Z,ee,ae,ye,ve){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=Z,this.typeSupported=ee,this.config=ae,this.vendor=ye,this.id=ve}configure(Z){this.transmuxConfig=Z,this.decrypter&&this.decrypter.reset()}push(Z,ee,ae,ye){const ve=ae.transmuxing;ve.executeStart=now();let be=new Uint8Array(Z);const{currentTransmuxState:Qe,transmuxConfig:Xe}=this;ye&&(this.currentTransmuxState=ye);const{contiguous:Je,discontinuity:tt,trackSwitch:it,accurateTimeOffset:st,timeOffset:lt,initSegmentChange:ct}=ye||Qe,{audioCodec:gt,videoCodec:ut,defaultInitPts:mt,duration:ei,initSegmentData:ni}=Xe,ri=getEncryptionType(be,ee);if(ri&&ri.method==="AES-128"){const ci=this.getDecrypter();if(ci.isSync()){let Ci=ci.softwareDecrypt(be,ri.key.buffer,ri.iv.buffer);if(ae.part>-1&&(Ci=ci.flush()),!Ci)return ve.executeEnd=now(),emptyResult(ae);be=new Uint8Array(Ci)}else return this.decryptionPromise=ci.webCryptoDecrypt(be,ri.key.buffer,ri.iv.buffer).then(Ci=>{const pi=this.push(Ci,null,ae);return this.decryptionPromise=null,pi}),this.decryptionPromise}const si=this.needsProbing(tt,it);if(si){const ci=this.configureTransmuxer(be);if(ci)return logger.warn(`[transmuxer] ${ci.message}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:ci,reason:ci.message}),ve.executeEnd=now(),emptyResult(ae)}(tt||it||ct||si)&&this.resetInitSegment(ni,gt,ut,ei,ee),(tt||ct||si)&&this.resetInitialTimestamp(mt),Je||this.resetContiguity();const li=this.transmux(be,ri,lt,st,ae),ai=this.currentTransmuxState;return ai.contiguous=!0,ai.discontinuity=!1,ai.trackSwitch=!1,ve.executeEnd=now(),li}flush(Z){const ee=Z.transmuxing;ee.executeStart=now();const{decrypter:ae,currentTransmuxState:ye,decryptionPromise:ve}=this;if(ve)return ve.then(()=>this.flush(Z));const be=[],{timeOffset:Qe}=ye;if(ae){const it=ae.flush();it&&be.push(this.push(it,null,Z))}const{demuxer:Xe,remuxer:Je}=this;if(!Xe||!Je)return ee.executeEnd=now(),[emptyResult(Z)];const tt=Xe.flush(Qe);return isPromise(tt)?tt.then(it=>(this.flushRemux(be,it,Z),be)):(this.flushRemux(be,tt,Z),be)}flushRemux(Z,ee,ae){const{audioTrack:ye,videoTrack:ve,id3Track:be,textTrack:Qe}=ee,{accurateTimeOffset:Xe,timeOffset:Je}=this.currentTransmuxState;logger.log(`[transmuxer.ts]: Flushed fragment ${ae.sn}${ae.part>-1?" p: "+ae.part:""} of level ${ae.level}`);const tt=this.remuxer.remux(ye,ve,be,Qe,Je,Xe,!0,this.id);Z.push({remuxResult:tt,chunkMeta:ae}),ae.transmuxing.executeEnd=now()}resetInitialTimestamp(Z){const{demuxer:ee,remuxer:ae}=this;!ee||!ae||(ee.resetTimeStamp(Z),ae.resetTimeStamp(Z))}resetContiguity(){const{demuxer:Z,remuxer:ee}=this;!Z||!ee||(Z.resetContiguity(),ee.resetNextTimestamp())}resetInitSegment(Z,ee,ae,ye,ve){const{demuxer:be,remuxer:Qe}=this;!be||!Qe||(be.resetInitSegment(Z,ee,ae,ye),Qe.resetInitSegment(Z,ee,ae,ve))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(Z,ee,ae,ye,ve){let be;return ee&&ee.method==="SAMPLE-AES"?be=this.transmuxSampleAes(Z,ee,ae,ye,ve):be=this.transmuxUnencrypted(Z,ae,ye,ve),be}transmuxUnencrypted(Z,ee,ae,ye){const{audioTrack:ve,videoTrack:be,id3Track:Qe,textTrack:Xe}=this.demuxer.demux(Z,ee,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(ve,be,Qe,Xe,ee,ae,!1,this.id),chunkMeta:ye}}transmuxSampleAes(Z,ee,ae,ye,ve){return this.demuxer.demuxSampleAes(Z,ee,ae).then(be=>({remuxResult:this.remuxer.remux(be.audioTrack,be.videoTrack,be.id3Track,be.textTrack,ae,ye,!1,this.id),chunkMeta:ve}))}configureTransmuxer(Z){const{config:ee,observer:ae,typeSupported:ye,vendor:ve}=this;let be;for(let st=0,lt=muxConfig.length;st<lt;st++){var Qe;if((Qe=muxConfig[st].demux)!=null&&Qe.probe(Z)){be=muxConfig[st];break}}if(!be)return new Error("Failed to find demuxer by probing fragment data");const Xe=this.demuxer,Je=this.remuxer,tt=be.remux,it=be.demux;(!Je||!(Je instanceof tt))&&(this.remuxer=new tt(ae,ee,ye,ve)),(!Xe||!(Xe instanceof it))&&(this.demuxer=new it(ae,ee,ye),this.probe=it.probe)}needsProbing(Z,ee){return!this.demuxer||!this.remuxer||Z||ee}getDecrypter(){let Z=this.decrypter;return Z||(Z=this.decrypter=new Decrypter(this.config)),Z}}function getEncryptionType(ie,Z){let ee=null;return ie.byteLength>0&&(Z==null?void 0:Z.key)!=null&&Z.iv!==null&&Z.method!=null&&(ee=Z),ee}const emptyResult=ie=>({remuxResult:{},chunkMeta:ie});function isPromise(ie){return"then"in ie&&ie.then instanceof Function}class TransmuxConfig{constructor(Z,ee,ae,ye,ve){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=Z,this.videoCodec=ee,this.initSegmentData=ae,this.duration=ye,this.defaultInitPts=ve||null}}class TransmuxState{constructor(Z,ee,ae,ye,ve,be){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=Z,this.contiguous=ee,this.accurateTimeOffset=ae,this.trackSwitch=ye,this.timeOffset=ve,this.initSegmentChange=be}}var eventemitter3={exports:{}};(function(ie){var Z=Object.prototype.hasOwnProperty,ee="~";function ae(){}Object.create&&(ae.prototype=Object.create(null),new ae().__proto__||(ee=!1));function ye(Xe,Je,tt){this.fn=Xe,this.context=Je,this.once=tt||!1}function ve(Xe,Je,tt,it,st){if(typeof tt!="function")throw new TypeError("The listener must be a function");var lt=new ye(tt,it||Xe,st),ct=ee?ee+Je:Je;return Xe._events[ct]?Xe._events[ct].fn?Xe._events[ct]=[Xe._events[ct],lt]:Xe._events[ct].push(lt):(Xe._events[ct]=lt,Xe._eventsCount++),Xe}function be(Xe,Je){--Xe._eventsCount===0?Xe._events=new ae:delete Xe._events[Je]}function Qe(){this._events=new ae,this._eventsCount=0}Qe.prototype.eventNames=function(){var Je=[],tt,it;if(this._eventsCount===0)return Je;for(it in tt=this._events)Z.call(tt,it)&&Je.push(ee?it.slice(1):it);return Object.getOwnPropertySymbols?Je.concat(Object.getOwnPropertySymbols(tt)):Je},Qe.prototype.listeners=function(Je){var tt=ee?ee+Je:Je,it=this._events[tt];if(!it)return[];if(it.fn)return[it.fn];for(var st=0,lt=it.length,ct=new Array(lt);st<lt;st++)ct[st]=it[st].fn;return ct},Qe.prototype.listenerCount=function(Je){var tt=ee?ee+Je:Je,it=this._events[tt];return it?it.fn?1:it.length:0},Qe.prototype.emit=function(Je,tt,it,st,lt,ct){var gt=ee?ee+Je:Je;if(!this._events[gt])return!1;var ut=this._events[gt],mt=arguments.length,ei,ni;if(ut.fn){switch(ut.once&&this.removeListener(Je,ut.fn,void 0,!0),mt){case 1:return ut.fn.call(ut.context),!0;case 2:return ut.fn.call(ut.context,tt),!0;case 3:return ut.fn.call(ut.context,tt,it),!0;case 4:return ut.fn.call(ut.context,tt,it,st),!0;case 5:return ut.fn.call(ut.context,tt,it,st,lt),!0;case 6:return ut.fn.call(ut.context,tt,it,st,lt,ct),!0}for(ni=1,ei=new Array(mt-1);ni<mt;ni++)ei[ni-1]=arguments[ni];ut.fn.apply(ut.context,ei)}else{var ri=ut.length,si;for(ni=0;ni<ri;ni++)switch(ut[ni].once&&this.removeListener(Je,ut[ni].fn,void 0,!0),mt){case 1:ut[ni].fn.call(ut[ni].context);break;case 2:ut[ni].fn.call(ut[ni].context,tt);break;case 3:ut[ni].fn.call(ut[ni].context,tt,it);break;case 4:ut[ni].fn.call(ut[ni].context,tt,it,st);break;default:if(!ei)for(si=1,ei=new Array(mt-1);si<mt;si++)ei[si-1]=arguments[si];ut[ni].fn.apply(ut[ni].context,ei)}}return!0},Qe.prototype.on=function(Je,tt,it){return ve(this,Je,tt,it,!1)},Qe.prototype.once=function(Je,tt,it){return ve(this,Je,tt,it,!0)},Qe.prototype.removeListener=function(Je,tt,it,st){var lt=ee?ee+Je:Je;if(!this._events[lt])return this;if(!tt)return be(this,lt),this;var ct=this._events[lt];if(ct.fn)ct.fn===tt&&(!st||ct.once)&&(!it||ct.context===it)&&be(this,lt);else{for(var gt=0,ut=[],mt=ct.length;gt<mt;gt++)(ct[gt].fn!==tt||st&&!ct[gt].once||it&&ct[gt].context!==it)&&ut.push(ct[gt]);ut.length?this._events[lt]=ut.length===1?ut[0]:ut:be(this,lt)}return this},Qe.prototype.removeAllListeners=function(Je){var tt;return Je?(tt=ee?ee+Je:Je,this._events[tt]&&be(this,tt)):(this._events=new ae,this._eventsCount=0),this},Qe.prototype.off=Qe.prototype.removeListener,Qe.prototype.addListener=Qe.prototype.on,Qe.prefixed=ee,Qe.EventEmitter=Qe,ie.exports=Qe})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);class TransmuxerInterface{constructor(Z,ee,ae,ye){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const ve=Z.config;this.hls=Z,this.id=ee,this.useWorker=!!ve.enableWorker,this.onTransmuxComplete=ae,this.onFlush=ye;const be=(tt,it)=>{it=it||{},it.frag=this.frag,it.id=this.id,tt===Events.ERROR&&(this.error=it.error),this.hls.trigger(tt,it)};this.observer=new EventEmitter,this.observer.on(Events.FRAG_DECRYPTED,be),this.observer.on(Events.ERROR,be);const Qe=getMediaSource(ve.preferManagedMediaSource)||{isTypeSupported:()=>!1},Xe={mpeg:Qe.isTypeSupported("audio/mpeg"),mp3:Qe.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:Qe.isTypeSupported('audio/mp4; codecs="ac-3"')},Je=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(ve.workerPath||hasUMDWorker())){try{ve.workerPath?(logger.log(`loading Web Worker ${ve.workerPath} for "${ee}"`),this.workerContext=loadWorker(ve.workerPath)):(logger.log(`injecting Web Worker for "${ee}"`),this.workerContext=injectWorker()),this.onwmsg=st=>this.onWorkerMessage(st);const{worker:it}=this.workerContext;it.addEventListener("message",this.onwmsg),it.onerror=st=>{const lt=new Error(`${st.message}  (${st.filename}:${st.lineno})`);ve.enableWorker=!1,logger.warn(`Error in "${ee}" Web Worker, fallback to inline`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:lt})},it.postMessage({cmd:"init",typeSupported:Xe,vendor:Je,id:ee,config:JSON.stringify(ve)})}catch(it){logger.warn(`Error setting up "${ee}" Web Worker, fallback to inline`,it),this.resetWorker(),this.error=null,this.transmuxer=new Transmuxer(this.observer,Xe,ve,Je,ee)}return}this.transmuxer=new Transmuxer(this.observer,Xe,ve,Je,ee)}resetWorker(){if(this.workerContext){const{worker:Z,objectURL:ee}=this.workerContext;ee&&self.URL.revokeObjectURL(ee),Z.removeEventListener("message",this.onwmsg),Z.onerror=null,Z.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const ee=this.transmuxer;ee&&(ee.destroy(),this.transmuxer=null)}const Z=this.observer;Z&&Z.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt){var it,st;Je.transmuxing.start=self.performance.now();const{transmuxer:lt}=this,ct=be?be.start:ve.start,gt=ve.decryptdata,ut=this.frag,mt=!(ut&&ve.cc===ut.cc),ei=!(ut&&Je.level===ut.level),ni=ut?Je.sn-ut.sn:-1,ri=this.part?Je.part-this.part.index:-1,si=ni===0&&Je.id>1&&Je.id===(ut==null?void 0:ut.stats.chunkCount),li=!ei&&(ni===1||ni===0&&(ri===1||si&&ri<=0)),ai=self.performance.now();(ei||ni||ve.stats.parsing.start===0)&&(ve.stats.parsing.start=ai),be&&(ri||!li)&&(be.stats.parsing.start=ai);const ci=!(ut&&((it=ve.initSegment)==null?void 0:it.url)===((st=ut.initSegment)==null?void 0:st.url)),Ci=new TransmuxState(mt,li,Xe,ei,ct,ci);if(!li||mt||ci){logger.log(`[transmuxer-interface, ${ve.type}]: Starting new transmux session for sn: ${Je.sn} p: ${Je.part} level: ${Je.level} id: ${Je.id}
        discontinuity: ${mt}
        trackSwitch: ${ei}
        contiguous: ${li}
        accurateTimeOffset: ${Xe}
        timeOffset: ${ct}
        initSegmentChange: ${ci}`);const pi=new TransmuxConfig(ae,ye,ee,Qe,tt);this.configureTransmuxer(pi)}if(this.frag=ve,this.part=be,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:Z,decryptdata:gt,chunkMeta:Je,state:Ci},Z instanceof ArrayBuffer?[Z]:[]);else if(lt){const pi=lt.push(Z,gt,Je,Ci);isPromise(pi)?(lt.async=!0,pi.then(gi=>{this.handleTransmuxComplete(gi)}).catch(gi=>{this.transmuxerError(gi,Je,"transmuxer-interface push error")})):(lt.async=!1,this.handleTransmuxComplete(pi))}}flush(Z){Z.transmuxing.start=self.performance.now();const{transmuxer:ee}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:Z});else if(ee){let ae=ee.flush(Z);isPromise(ae)||ee.async?(isPromise(ae)||(ae=Promise.resolve(ae)),ae.then(ve=>{this.handleFlushResult(ve,Z)}).catch(ve=>{this.transmuxerError(ve,Z,"transmuxer-interface flush error")})):this.handleFlushResult(ae,Z)}}transmuxerError(Z,ee,ae){this.hls&&(this.error=Z,this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:ee,fatal:!1,error:Z,err:Z,reason:ae}))}handleFlushResult(Z,ee){Z.forEach(ae=>{this.handleTransmuxComplete(ae)}),this.onFlush(ee)}onWorkerMessage(Z){const ee=Z.data,ae=this.hls;switch(ee.event){case"init":{var ye;const ve=(ye=this.workerContext)==null?void 0:ye.objectURL;ve&&self.URL.revokeObjectURL(ve);break}case"transmuxComplete":{this.handleTransmuxComplete(ee.data);break}case"flush":{this.onFlush(ee.data);break}case"workerLog":logger[ee.data.logType]&&logger[ee.data.logType](ee.data.message);break;default:{ee.data=ee.data||{},ee.data.frag=this.frag,ee.data.id=this.id,ae.trigger(ee.event,ee.data);break}}}configureTransmuxer(Z){const{transmuxer:ee}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:Z}):ee&&ee.configure(Z)}handleTransmuxComplete(Z){Z.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(Z)}}function subtitleOptionsIdentical(ie,Z){if(ie.length!==Z.length)return!1;for(let ee=0;ee<ie.length;ee++)if(!mediaAttributesIdentical(ie[ee].attrs,Z[ee].attrs))return!1;return!0}function mediaAttributesIdentical(ie,Z,ee){const ae=ie["STABLE-RENDITION-ID"];return ae&&!ee?ae===Z["STABLE-RENDITION-ID"]:!(ee||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(ye=>ie[ye]!==Z[ye])}function subtitleTrackMatchesTextTrack(ie,Z){return Z.label.toLowerCase()===ie.name.toLowerCase()&&(!Z.language||Z.language.toLowerCase()===(ie.lang||"").toLowerCase())}const TICK_INTERVAL$2=100;class AudioStreamController extends BaseStreamController{constructor(Z,ee,ae){super(Z,ee,ae,"[audio-stream-controller]",PlaylistLevelType.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:Z}=this;Z.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.on(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),Z.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Z.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Z.on(Events.ERROR,this.onError,this),Z.on(Events.BUFFER_RESET,this.onBufferReset,this),Z.on(Events.BUFFER_CREATED,this.onBufferCreated,this),Z.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Z.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Z.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Z}=this;Z.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.off(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),Z.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Z.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Z.off(Events.ERROR,this.onError,this),Z.off(Events.BUFFER_RESET,this.onBufferReset,this),Z.off(Events.BUFFER_CREATED,this.onBufferCreated,this),Z.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Z.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Z.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(Z,{frag:ee,id:ae,initPTS:ye,timescale:ve}){if(ae==="main"){const be=ee.cc;this.initPTS[ee.cc]={baseTime:ye,timescale:ve},this.log(`InitPTS for cc: ${be} found from main: ${ye}`),this.videoTrackCC=be,this.state===State.WAITING_INIT_PTS&&this.tick()}}startLoad(Z){if(!this.levels){this.startPosition=Z,this.state=State.STOPPED;return}const ee=this.lastCurrentTime;this.stopLoad(),this.setInterval(TICK_INTERVAL$2),ee>0&&Z===-1?(this.log(`Override startPosition with lastCurrentTime @${ee.toFixed(3)}`),Z=ee,this.state=State.IDLE):(this.loadedmetadata=!1,this.state=State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Z,this.tick()}doTick(){switch(this.state){case State.IDLE:this.doTickIdle();break;case State.WAITING_TRACK:{var Z;const{levels:ae,trackId:ye}=this,ve=ae==null||(Z=ae[ye])==null?void 0:Z.details;if(ve){if(this.waitForCdnTuneIn(ve))break;this.state=State.WAITING_INIT_PTS}break}case State.FRAG_LOADING_WAITING_RETRY:{var ee;const ae=performance.now(),ye=this.retryDate;if(!ye||ae>=ye||(ee=this.media)!=null&&ee.seeking){const{levels:ve,trackId:be}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((ve==null?void 0:ve[be])||null),this.state=State.IDLE}break}case State.WAITING_INIT_PTS:{const ae=this.waitingData;if(ae){const{frag:ye,part:ve,cache:be,complete:Qe}=ae;if(this.initPTS[ye.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=State.FRAG_LOADING;const Xe=be.flush(),Je={frag:ye,part:ve,payload:Xe,networkDetails:null};this._handleFragmentLoadProgress(Je),Qe&&super._handleFragmentLoadComplete(Je)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${ye.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const Xe=this.getLoadPosition(),Je=BufferHelper.bufferInfo(this.mediaBuffer,Xe,this.config.maxBufferHole);fragmentWithinToleranceTest(Je.end,this.config.maxFragLookUpTolerance,ye)<0&&(this.log(`Waiting fragment cc (${ye.cc}) @ ${ye.start} cancelled because another fragment at ${Je.end} is needed`),this.clearWaitingFragment())}}else this.state=State.IDLE}}this.onTickEnd()}clearWaitingFragment(){const Z=this.waitingData;Z&&(this.fragmentTracker.removeFragment(Z.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=State.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:Z}=this;Z!=null&&Z.readyState&&(this.lastCurrentTime=Z.currentTime)}doTickIdle(){const{hls:Z,levels:ee,media:ae,trackId:ye}=this,ve=Z.config;if(!ae&&(this.startFragRequested||!ve.startFragPrefetch)||!(ee!=null&&ee[ye]))return;const be=ee[ye],Qe=be.details;if(!Qe||Qe.live&&this.levelLastLoaded!==be||this.waitForCdnTuneIn(Qe)){this.state=State.WAITING_TRACK;return}const Xe=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&Xe&&(this.bufferFlushed=!1,this.afterBufferFlushed(Xe,ElementaryStreamTypes.AUDIO,PlaylistLevelType.AUDIO));const Je=this.getFwdBufferInfo(Xe,PlaylistLevelType.AUDIO);if(Je===null)return;const{bufferedTrack:tt,switchingTrack:it}=this;if(!it&&this._streamEnded(Je,Qe)){Z.trigger(Events.BUFFER_EOS,{type:"audio"}),this.state=State.ENDED;return}const st=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,PlaylistLevelType.MAIN),lt=Je.len,ct=this.getMaxBufferLength(st==null?void 0:st.len),gt=Qe.fragments,ut=gt[0].start;let mt=this.flushing?this.getLoadPosition():Je.end;if(it&&ae){const si=this.getLoadPosition();tt&&!mediaAttributesIdentical(it.attrs,tt.attrs)&&(mt=si),Qe.PTSKnown&&si<ut&&(Je.end>ut||Je.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),ae.currentTime=ut+.05)}if(lt>=ct&&!it&&mt<gt[gt.length-1].start)return;let ei=this.getNextFragment(mt,Qe),ni=!1;if(ei&&this.isLoopLoading(ei,mt)&&(ni=!!ei.gap,ei=this.getNextFragmentLoopLoading(ei,Qe,Je,PlaylistLevelType.MAIN,ct)),!ei){this.bufferFlushed=!0;return}const ri=st&&ei.start>st.end+Qe.targetduration;if(ri||!(st!=null&&st.len)&&Je.len){const si=this.getAppendedFrag(ei.start,PlaylistLevelType.MAIN);if(si===null||(ni||(ni=!!si.gap||!!ri&&st.len===0),ri&&!ni||ni&&Je.nextStart&&Je.nextStart<si.end))return}this.loadFragment(ei,be,mt)}getMaxBufferLength(Z){const ee=super.getMaxBufferLength();return Z?Math.min(Math.max(ee,Z),this.config.maxMaxBufferLength):ee}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(Z,{audioTracks:ee}){this.resetTransmuxer(),this.levels=ee.map(ae=>new Level(ae))}onAudioTrackSwitching(Z,ee){const ae=!!ee.url;this.trackId=ee.id;const{fragCurrent:ye}=this;ye&&(ye.abortRequests(),this.removeUnbufferedFrags(ye.start)),this.resetLoadingState(),ae?this.setInterval(TICK_INTERVAL$2):this.resetTransmuxer(),ae?(this.switchingTrack=ee,this.state=State.IDLE,this.flushAudioIfNeeded(ee)):(this.switchingTrack=null,this.bufferedTrack=ee,this.state=State.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(Z,ee){this.mainDetails=ee.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(Z,ee){var ae;if(this.mainDetails==null){this.cachedTrackLoadedData=ee;return}const{levels:ye}=this,{details:ve,id:be}=ee;if(!ye){this.warn(`Audio tracks were reset while loading level ${be}`);return}this.log(`Audio track ${be} loaded [${ve.startSN},${ve.endSN}]${ve.lastPartSn?`[part-${ve.lastPartSn}-${ve.lastPartIndex}]`:""},duration:${ve.totalduration}`);const Qe=ye[be];let Xe=0;if(ve.live||(ae=Qe.details)!=null&&ae.live){this.checkLiveUpdate(ve);const tt=this.mainDetails;if(ve.deltaUpdateFailed||!tt)return;if(!Qe.details&&ve.hasProgramDateTime&&tt.hasProgramDateTime)alignMediaPlaylistByPDT(ve,tt),Xe=ve.fragments[0].start;else{var Je;Xe=this.alignPlaylists(ve,Qe.details,(Je=this.levelLastLoaded)==null?void 0:Je.details)}}Qe.details=ve,this.levelLastLoaded=Qe,!this.startFragRequested&&(this.mainDetails||!ve.live)&&this.setStartPosition(Qe.details,Xe),this.state===State.WAITING_TRACK&&!this.waitForCdnTuneIn(ve)&&(this.state=State.IDLE),this.tick()}_handleFragmentLoadProgress(Z){var ee;const{frag:ae,part:ye,payload:ve}=Z,{config:be,trackId:Qe,levels:Xe}=this;if(!Xe){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${ae.sn} of level ${ae.level} will not be buffered`);return}const Je=Xe[Qe];if(!Je){this.warn("Audio track is undefined on fragment load progress");return}const tt=Je.details;if(!tt){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(ae.start);return}const it=be.defaultAudioCodec||Je.audioCodec||"mp4a.40.2";let st=this.transmuxer;st||(st=this.transmuxer=new TransmuxerInterface(this.hls,PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const lt=this.initPTS[ae.cc],ct=(ee=ae.initSegment)==null?void 0:ee.data;if(lt!==void 0){const ut=ye?ye.index:-1,mt=ut!==-1,ei=new ChunkMetadata(ae.level,ae.sn,ae.stats.chunkCount,ve.byteLength,ut,mt);st.push(ve,ct,it,"",ae,ye,tt.totalduration,!1,ei,lt)}else{this.log(`Unknown video PTS for cc ${ae.cc}, waiting for video PTS before demuxing audio frag ${ae.sn} of [${tt.startSN} ,${tt.endSN}],track ${Qe}`);const{cache:gt}=this.waitingData=this.waitingData||{frag:ae,part:ye,cache:new ChunkCache,complete:!1};gt.push(new Uint8Array(ve)),this.waitingVideoCC=this.videoTrackCC,this.state=State.WAITING_INIT_PTS}}_handleFragmentLoadComplete(Z){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(Z)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(Z,ee){const ae=ee.tracks.audio;ae&&(this.mediaBuffer=ae.buffer||null),ee.tracks.video&&(this.videoBuffer=ee.tracks.video.buffer||null)}onFragBuffered(Z,ee){const{frag:ae,part:ye}=ee;if(ae.type!==PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&ae.type===PlaylistLevelType.MAIN){const ve=this.videoBuffer||this.media;ve&&BufferHelper.getBuffered(ve).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(ae)){this.warn(`Fragment ${ae.sn}${ye?" p: "+ye.index:""} of level ${ae.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(ae.sn!=="initSegment"){this.fragPrevious=ae;const ve=this.switchingTrack;ve&&(this.bufferedTrack=ve,this.switchingTrack=null,this.hls.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},ve)))}this.fragBufferedComplete(ae,ye)}onError(Z,ee){var ae;if(ee.fatal){this.state=State.ERROR;return}switch(ee.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.AUDIO,ee);break;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!ee.levelRetry&&this.state===State.WAITING_TRACK&&((ae=ee.context)==null?void 0:ae.type)===PlaylistContextType.AUDIO_TRACK&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_APPEND_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:if(!ee.parent||ee.parent!=="audio")return;if(ee.details===ErrorDetails.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(ee)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(ee);break}}onBufferFlushing(Z,{type:ee}){ee!==ElementaryStreamTypes.VIDEO&&(this.flushing=!0)}onBufferFlushed(Z,{type:ee}){if(ee!==ElementaryStreamTypes.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===State.ENDED&&(this.state=State.IDLE);const ae=this.mediaBuffer||this.media;ae&&(this.afterBufferFlushed(ae,ee,PlaylistLevelType.AUDIO),this.tick())}}_handleTransmuxComplete(Z){var ee;const ae="audio",{hls:ye}=this,{remuxResult:ve,chunkMeta:be}=Z,Qe=this.getCurrentContext(be);if(!Qe){this.resetWhenMissingContext(be);return}const{frag:Xe,part:Je,level:tt}=Qe,{details:it}=tt,{audio:st,text:lt,id3:ct,initSegment:gt}=ve;if(this.fragContextChanged(Xe)||!it){this.fragmentTracker.removeFragment(Xe);return}if(this.state=State.PARSING,this.switchingTrack&&st&&this.completeAudioSwitch(this.switchingTrack),gt!=null&&gt.tracks){const ut=Xe.initSegment||Xe;this._bufferInitSegment(tt,gt.tracks,ut,be),ye.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:ut,id:ae,tracks:gt.tracks})}if(st){const{startPTS:ut,endPTS:mt,startDTS:ei,endDTS:ni}=st;Je&&(Je.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:ut,endPTS:mt,startDTS:ei,endDTS:ni}),Xe.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,ut,mt,ei,ni),this.bufferFragmentData(st,Xe,Je,be)}if(ct!=null&&(ee=ct.samples)!=null&&ee.length){const ut=_extends({id:ae,frag:Xe,details:it},ct);ye.trigger(Events.FRAG_PARSING_METADATA,ut)}if(lt){const ut=_extends({id:ae,frag:Xe,details:it},lt);ye.trigger(Events.FRAG_PARSING_USERDATA,ut)}}_bufferInitSegment(Z,ee,ae,ye){if(this.state!==State.PARSING)return;ee.video&&delete ee.video;const ve=ee.audio;if(!ve)return;ve.id="audio";const be=Z.audioCodec;this.log(`Init audio buffer, container:${ve.container}, codecs[level/parsed]=[${be}/${ve.codec}]`),be&&be.split(",").length===1&&(ve.levelCodec=be),this.hls.trigger(Events.BUFFER_CODECS,ee);const Qe=ve.initSegment;if(Qe!=null&&Qe.byteLength){const Xe={type:"audio",frag:ae,part:null,chunkMeta:ye,parent:ae.type,data:Qe};this.hls.trigger(Events.BUFFER_APPENDING,Xe)}this.tickImmediate()}loadFragment(Z,ee,ae){const ye=this.fragmentTracker.getState(Z);if(this.fragCurrent=Z,this.switchingTrack||ye===FragmentState.NOT_LOADED||ye===FragmentState.PARTIAL){var ve;if(Z.sn==="initSegment")this._loadInitSegment(Z,ee);else if((ve=ee.details)!=null&&ve.live&&!this.initPTS[Z.cc]){this.log(`Waiting for video PTS in continuity counter ${Z.cc} of live stream before loading audio fragment ${Z.sn} of level ${this.trackId}`),this.state=State.WAITING_INIT_PTS;const be=this.mainDetails;be&&be.fragments[0].start!==ee.details.fragments[0].start&&alignMediaPlaylistByPDT(ee.details,be)}else this.startFragRequested=!0,super.loadFragment(Z,ee,ae)}else this.clearTrackerIfNeeded(Z)}flushAudioIfNeeded(Z){const{media:ee,bufferedTrack:ae}=this,ye=ae==null?void 0:ae.attrs,ve=Z.attrs;ee&&ye&&(ye.CHANNELS!==ve.CHANNELS||ae.name!==Z.name||ae.lang!==Z.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(Z){const{hls:ee}=this;this.flushAudioIfNeeded(Z),this.bufferedTrack=Z,this.switchingTrack=null,ee.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},Z))}}class AudioTrackController extends BasePlaylistController{constructor(Z){super(Z,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:Z}=this;Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Z.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Z.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Z.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:Z}=this;Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.off(Events.LEVEL_LOADING,this.onLevelLoading,this),Z.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Z.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Z.off(Events.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(Z,ee){this.tracks=ee.audioTracks||[]}onAudioTrackLoaded(Z,ee){const{id:ae,groupId:ye,details:ve}=ee,be=this.tracksInGroup[ae];if(!be||be.groupId!==ye){this.warn(`Audio track with id:${ae} and group:${ye} not found in active group ${be==null?void 0:be.groupId}`);return}const Qe=be.details;be.details=ee.details,this.log(`Audio track ${ae} "${be.name}" lang:${be.lang} group:${ye} loaded [${ve.startSN}-${ve.endSN}]`),ae===this.trackId&&this.playlistLoaded(ae,ee,Qe)}onLevelLoading(Z,ee){this.switchLevel(ee.level)}onLevelSwitching(Z,ee){this.switchLevel(ee.level)}switchLevel(Z){const ee=this.hls.levels[Z];if(!ee)return;const ae=ee.audioGroups||null,ye=this.groupIds;let ve=this.currentTrack;if(!ae||(ye==null?void 0:ye.length)!==(ae==null?void 0:ae.length)||ae!=null&&ae.some(Qe=>(ye==null?void 0:ye.indexOf(Qe))===-1)){this.groupIds=ae,this.trackId=-1,this.currentTrack=null;const Qe=this.tracks.filter(st=>!ae||ae.indexOf(st.groupId)!==-1);if(Qe.length)this.selectDefaultTrack&&!Qe.some(st=>st.default)&&(this.selectDefaultTrack=!1),Qe.forEach((st,lt)=>{st.id=lt});else if(!ve&&!this.tracksInGroup.length)return;this.tracksInGroup=Qe;const Xe=this.hls.config.audioPreference;if(!ve&&Xe){const st=findMatchingOption(Xe,Qe,audioMatchPredicate);if(st>-1)ve=Qe[st];else{const lt=findMatchingOption(Xe,this.tracks);ve=this.tracks[lt]}}let Je=this.findTrackId(ve);Je===-1&&ve&&(Je=this.findTrackId(null));const tt={audioTracks:Qe};this.log(`Updating audio tracks, ${Qe.length} track(s) found in group(s): ${ae==null?void 0:ae.join(",")}`),this.hls.trigger(Events.AUDIO_TRACKS_UPDATED,tt);const it=this.trackId;if(Je!==-1&&it===-1)this.setAudioTrack(Je);else if(Qe.length&&it===-1){var be;const st=new Error(`No audio track selected for current audio group-ID(s): ${(be=this.groupIds)==null?void 0:be.join(",")} track count: ${Qe.length}`);this.warn(st.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:st})}}else this.shouldReloadPlaylist(ve)&&this.setAudioTrack(this.trackId)}onError(Z,ee){ee.fatal||!ee.context||ee.context.type===PlaylistContextType.AUDIO_TRACK&&ee.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(ee.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(ee))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(Z){this.selectDefaultTrack=!1,this.setAudioTrack(Z)}setAudioOption(Z){const ee=this.hls;if(ee.config.audioPreference=Z,Z){const ae=this.allAudioTracks;if(this.selectDefaultTrack=!1,ae.length){const ye=this.currentTrack;if(ye&&matchesOption(Z,ye,audioMatchPredicate))return ye;const ve=findMatchingOption(Z,this.tracksInGroup,audioMatchPredicate);if(ve>-1){const be=this.tracksInGroup[ve];return this.setAudioTrack(ve),be}else if(ye){let be=ee.loadLevel;be===-1&&(be=ee.firstAutoLevel);const Qe=findClosestLevelWithAudioGroup(Z,ee.levels,ae,be,audioMatchPredicate);if(Qe===-1)return null;ee.nextLoadLevel=Qe}if(Z.channels||Z.audioCodec){const be=findMatchingOption(Z,ae);if(be>-1)return ae[be]}}}return null}setAudioTrack(Z){const ee=this.tracksInGroup;if(Z<0||Z>=ee.length){this.warn(`Invalid audio track id: ${Z}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const ae=this.currentTrack,ye=ee[Z],ve=ye.details&&!ye.details.live;if(Z===this.trackId&&ye===ae&&ve||(this.log(`Switching to audio-track ${Z} "${ye.name}" lang:${ye.lang} group:${ye.groupId} channels:${ye.channels}`),this.trackId=Z,this.currentTrack=ye,this.hls.trigger(Events.AUDIO_TRACK_SWITCHING,_objectSpread2({},ye)),ve))return;const be=this.switchParams(ye.url,ae==null?void 0:ae.details);this.loadPlaylist(be)}findTrackId(Z){const ee=this.tracksInGroup;for(let ae=0;ae<ee.length;ae++){const ye=ee[ae];if(!(this.selectDefaultTrack&&!ye.default)&&(!Z||matchesOption(Z,ye,audioMatchPredicate)))return ae}if(Z){const{name:ae,lang:ye,assocLang:ve,characteristics:be,audioCodec:Qe,channels:Xe}=Z;for(let Je=0;Je<ee.length;Je++){const tt=ee[Je];if(matchesOption({name:ae,lang:ye,assocLang:ve,characteristics:be,audioCodec:Qe,channels:Xe},tt,audioMatchPredicate))return Je}for(let Je=0;Je<ee.length;Je++){const tt=ee[Je];if(mediaAttributesIdentical(Z.attrs,tt.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return Je}for(let Je=0;Je<ee.length;Je++){const tt=ee[Je];if(mediaAttributesIdentical(Z.attrs,tt.attrs,["LANGUAGE"]))return Je}}return-1}loadPlaylist(Z){const ee=this.currentTrack;if(this.shouldLoadPlaylist(ee)&&ee){super.loadPlaylist();const ae=ee.id,ye=ee.groupId;let ve=ee.url;if(Z)try{ve=Z.addDirectives(ve)}catch(be){this.warn(`Could not construct new URL with HLS Delivery Directives: ${be}`)}this.log(`loading audio-track playlist ${ae} "${ee.name}" lang:${ee.lang} group:${ye}`),this.clearTimer(),this.hls.trigger(Events.AUDIO_TRACK_LOADING,{url:ve,id:ae,groupId:ye,deliveryDirectives:Z||null})}}}const TICK_INTERVAL$1=500;class SubtitleStreamController extends BaseStreamController{constructor(Z,ee,ae){super(Z,ee,ae,"[subtitle-stream-controller]",PlaylistLevelType.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:Z}=this;Z.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.on(Events.ERROR,this.onError,this),Z.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Z.on(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),Z.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Z.on(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),Z.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Z}=this;Z.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.off(Events.ERROR,this.onError,this),Z.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Z.off(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),Z.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Z.off(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),Z.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(Z){this.stopLoad(),this.state=State.IDLE,this.setInterval(TICK_INTERVAL$1),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Z,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(Z,ee){this.mainDetails=ee.details}onSubtitleFragProcessed(Z,ee){const{frag:ae,success:ye}=ee;if(this.fragPrevious=ae,this.state=State.IDLE,!ye)return;const ve=this.tracksBuffered[this.currentTrackId];if(!ve)return;let be;const Qe=ae.start;for(let Je=0;Je<ve.length;Je++)if(Qe>=ve[Je].start&&Qe<=ve[Je].end){be=ve[Je];break}const Xe=ae.start+ae.duration;be?be.end=Xe:(be={start:Qe,end:Xe},ve.push(be)),this.fragmentTracker.fragBuffered(ae),this.fragBufferedComplete(ae,null)}onBufferFlushing(Z,ee){const{startOffset:ae,endOffset:ye}=ee;if(ae===0&&ye!==Number.POSITIVE_INFINITY){const ve=ye-1;if(ve<=0)return;ee.endOffsetSubtitles=Math.max(0,ve),this.tracksBuffered.forEach(be=>{for(let Qe=0;Qe<be.length;){if(be[Qe].end<=ve){be.shift();continue}else if(be[Qe].start<ve)be[Qe].start=ve;else break;Qe++}}),this.fragmentTracker.removeFragmentsInRange(ae,ve,PlaylistLevelType.SUBTITLE)}}onFragBuffered(Z,ee){if(!this.loadedmetadata&&ee.frag.type===PlaylistLevelType.MAIN){var ae;(ae=this.media)!=null&&ae.buffered.length&&(this.loadedmetadata=!0)}}onError(Z,ee){const ae=ee.frag;(ae==null?void 0:ae.type)===PlaylistLevelType.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==State.STOPPED&&(this.state=State.IDLE))}onSubtitleTracksUpdated(Z,{subtitleTracks:ee}){if(!this.levels||subtitleOptionsIdentical(this.levels,ee)){this.levels=ee.map(ae=>new Level(ae));return}this.tracksBuffered=[],this.levels=ee.map(ae=>{const ye=new Level(ae);return this.tracksBuffered[ye.id]=[],ye}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,PlaylistLevelType.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(Z,ee){var ae;if(this.currentTrackId=ee.id,!((ae=this.levels)!=null&&ae.length)||this.currentTrackId===-1){this.clearInterval();return}const ye=this.levels[this.currentTrackId];ye!=null&&ye.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,ye&&this.setInterval(TICK_INTERVAL$1)}onSubtitleTrackLoaded(Z,ee){var ae;const{currentTrackId:ye,levels:ve}=this,{details:be,id:Qe}=ee;if(!ve){this.warn(`Subtitle tracks were reset while loading level ${Qe}`);return}const Xe=ve[ye];if(Qe>=ve.length||Qe!==ye||!Xe)return;this.log(`Subtitle track ${Qe} loaded [${be.startSN},${be.endSN}]${be.lastPartSn?`[part-${be.lastPartSn}-${be.lastPartIndex}]`:""},duration:${be.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let Je=0;if(be.live||(ae=Xe.details)!=null&&ae.live){const it=this.mainDetails;if(be.deltaUpdateFailed||!it)return;const st=it.fragments[0];if(!Xe.details)be.hasProgramDateTime&&it.hasProgramDateTime?(alignMediaPlaylistByPDT(be,it),Je=be.fragments[0].start):st&&(Je=st.start,addSliding(be,Je));else{var tt;Je=this.alignPlaylists(be,Xe.details,(tt=this.levelLastLoaded)==null?void 0:tt.details),Je===0&&st&&(Je=st.start,addSliding(be,Je))}}Xe.details=be,this.levelLastLoaded=Xe,!this.startFragRequested&&(this.mainDetails||!be.live)&&this.setStartPosition(Xe.details,Je),this.tick(),be.live&&!this.fragCurrent&&this.media&&this.state===State.IDLE&&(findFragmentByPTS(null,be.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),Xe.details=void 0))}_handleFragmentLoadComplete(Z){const{frag:ee,payload:ae}=Z,ye=ee.decryptdata,ve=this.hls;if(!this.fragContextChanged(ee)&&ae&&ae.byteLength>0&&ye!=null&&ye.key&&ye.iv&&ye.method==="AES-128"){const be=performance.now();this.decrypter.decrypt(new Uint8Array(ae),ye.key.buffer,ye.iv.buffer).catch(Qe=>{throw ve.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:Qe,reason:Qe.message,frag:ee}),Qe}).then(Qe=>{const Xe=performance.now();ve.trigger(Events.FRAG_DECRYPTED,{frag:ee,payload:Qe,stats:{tstart:be,tdecrypt:Xe}})}).catch(Qe=>{this.warn(`${Qe.name}: ${Qe.message}`),this.state=State.IDLE})}}doTick(){if(!this.media){this.state=State.IDLE;return}if(this.state===State.IDLE){const{currentTrackId:Z,levels:ee}=this,ae=ee==null?void 0:ee[Z];if(!ae||!ee.length||!ae.details)return;const{config:ye}=this,ve=this.getLoadPosition(),be=BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],ve,ye.maxBufferHole),{end:Qe,len:Xe}=be,Je=this.getFwdBufferInfo(this.media,PlaylistLevelType.MAIN),tt=ae.details,it=this.getMaxBufferLength(Je==null?void 0:Je.len)+tt.levelTargetDuration;if(Xe>it)return;const st=tt.fragments,lt=st.length,ct=tt.edge;let gt=null;const ut=this.fragPrevious;if(Qe<ct){const mt=ye.maxFragLookUpTolerance,ei=Qe>ct-mt?0:mt;gt=findFragmentByPTS(ut,st,Math.max(st[0].start,Qe),ei),!gt&&ut&&ut.start<st[0].start&&(gt=st[0])}else gt=st[lt-1];if(!gt)return;if(gt=this.mapToInitFragWhenRequired(gt),gt.sn!=="initSegment"){const mt=gt.sn-tt.startSN,ei=st[mt-1];ei&&ei.cc===gt.cc&&this.fragmentTracker.getState(ei)===FragmentState.NOT_LOADED&&(gt=ei)}this.fragmentTracker.getState(gt)===FragmentState.NOT_LOADED&&this.loadFragment(gt,ae,Qe)}}getMaxBufferLength(Z){const ee=super.getMaxBufferLength();return Z?Math.max(ee,Z):ee}loadFragment(Z,ee,ae){this.fragCurrent=Z,Z.sn==="initSegment"?this._loadInitSegment(Z,ee):(this.startFragRequested=!0,super.loadFragment(Z,ee,ae))}get mediaBufferTimeRanges(){return new BufferableInstance(this.tracksBuffered[this.currentTrackId]||[])}}class BufferableInstance{constructor(Z){this.buffered=void 0;const ee=(ae,ye,ve)=>{if(ye=ye>>>0,ye>ve-1)throw new DOMException(`Failed to execute '${ae}' on 'TimeRanges': The index provided (${ye}) is greater than the maximum bound (${ve})`);return Z[ye][ae]};this.buffered={get length(){return Z.length},end(ae){return ee("end",ae,Z.length)},start(ae){return ee("start",ae,Z.length)}}}}class SubtitleTrackController extends BasePlaylistController{constructor(Z){super(Z,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let ee=null;const ae=filterSubtitleTracks(this.media.textTracks);for(let ve=0;ve<ae.length;ve++)if(ae[ve].mode==="hidden")ee=ae[ve];else if(ae[ve].mode==="showing"){ee=ae[ve];break}const ye=this.findTrackForTextTrack(ee);this.subtitleTrack!==ye&&this.setSubtitleTrack(ye)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(Z){this._subtitleDisplay=Z,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:Z}=this;Z.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Z.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Z.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Z.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:Z}=this;Z.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.off(Events.LEVEL_LOADING,this.onLevelLoading,this),Z.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Z.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Z.off(Events.ERROR,this.onError,this)}onMediaAttached(Z,ee){this.media=ee.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(Z){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,Z)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),filterSubtitleTracks(this.media.textTracks).forEach(ee=>{clearCurrentCues(ee)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(Z,ee){this.tracks=ee.subtitleTracks}onSubtitleTrackLoaded(Z,ee){const{id:ae,groupId:ye,details:ve}=ee,be=this.tracksInGroup[ae];if(!be||be.groupId!==ye){this.warn(`Subtitle track with id:${ae} and group:${ye} not found in active group ${be==null?void 0:be.groupId}`);return}const Qe=be.details;be.details=ee.details,this.log(`Subtitle track ${ae} "${be.name}" lang:${be.lang} group:${ye} loaded [${ve.startSN}-${ve.endSN}]`),ae===this.trackId&&this.playlistLoaded(ae,ee,Qe)}onLevelLoading(Z,ee){this.switchLevel(ee.level)}onLevelSwitching(Z,ee){this.switchLevel(ee.level)}switchLevel(Z){const ee=this.hls.levels[Z];if(!ee)return;const ae=ee.subtitleGroups||null,ye=this.groupIds;let ve=this.currentTrack;if(!ae||(ye==null?void 0:ye.length)!==(ae==null?void 0:ae.length)||ae!=null&&ae.some(be=>(ye==null?void 0:ye.indexOf(be))===-1)){this.groupIds=ae,this.trackId=-1,this.currentTrack=null;const be=this.tracks.filter(tt=>!ae||ae.indexOf(tt.groupId)!==-1);if(be.length)this.selectDefaultTrack&&!be.some(tt=>tt.default)&&(this.selectDefaultTrack=!1),be.forEach((tt,it)=>{tt.id=it});else if(!ve&&!this.tracksInGroup.length)return;this.tracksInGroup=be;const Qe=this.hls.config.subtitlePreference;if(!ve&&Qe){this.selectDefaultTrack=!1;const tt=findMatchingOption(Qe,be);if(tt>-1)ve=be[tt];else{const it=findMatchingOption(Qe,this.tracks);ve=this.tracks[it]}}let Xe=this.findTrackId(ve);Xe===-1&&ve&&(Xe=this.findTrackId(null));const Je={subtitleTracks:be};this.log(`Updating subtitle tracks, ${be.length} track(s) found in "${ae==null?void 0:ae.join(",")}" group-id`),this.hls.trigger(Events.SUBTITLE_TRACKS_UPDATED,Je),Xe!==-1&&this.trackId===-1&&this.setSubtitleTrack(Xe)}else this.shouldReloadPlaylist(ve)&&this.setSubtitleTrack(this.trackId)}findTrackId(Z){const ee=this.tracksInGroup,ae=this.selectDefaultTrack;for(let ye=0;ye<ee.length;ye++){const ve=ee[ye];if(!(ae&&!ve.default||!ae&&!Z)&&(!Z||matchesOption(ve,Z)))return ye}if(Z){for(let ye=0;ye<ee.length;ye++){const ve=ee[ye];if(mediaAttributesIdentical(Z.attrs,ve.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return ye}for(let ye=0;ye<ee.length;ye++){const ve=ee[ye];if(mediaAttributesIdentical(Z.attrs,ve.attrs,["LANGUAGE"]))return ye}}return-1}findTrackForTextTrack(Z){if(Z){const ee=this.tracksInGroup;for(let ae=0;ae<ee.length;ae++){const ye=ee[ae];if(subtitleTrackMatchesTextTrack(ye,Z))return ae}}return-1}onError(Z,ee){ee.fatal||!ee.context||ee.context.type===PlaylistContextType.SUBTITLE_TRACK&&ee.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(ee.context.groupId)!==-1)&&this.checkRetry(ee)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(Z){this.selectDefaultTrack=!1,this.setSubtitleTrack(Z)}setSubtitleOption(Z){if(this.hls.config.subtitlePreference=Z,Z){const ee=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,ee.length){const ae=this.currentTrack;if(ae&&matchesOption(Z,ae))return ae;const ye=findMatchingOption(Z,this.tracksInGroup);if(ye>-1){const ve=this.tracksInGroup[ye];return this.setSubtitleTrack(ye),ve}else{if(ae)return null;{const ve=findMatchingOption(Z,ee);if(ve>-1)return ee[ve]}}}}return null}loadPlaylist(Z){super.loadPlaylist();const ee=this.currentTrack;if(this.shouldLoadPlaylist(ee)&&ee){const ae=ee.id,ye=ee.groupId;let ve=ee.url;if(Z)try{ve=Z.addDirectives(ve)}catch(be){this.warn(`Could not construct new URL with HLS Delivery Directives: ${be}`)}this.log(`Loading subtitle playlist for id ${ae}`),this.hls.trigger(Events.SUBTITLE_TRACK_LOADING,{url:ve,id:ae,groupId:ye,deliveryDirectives:Z||null})}}toggleTrackModes(){const{media:Z}=this;if(!Z)return;const ee=filterSubtitleTracks(Z.textTracks),ae=this.currentTrack;let ye;if(ae&&(ye=ee.filter(ve=>subtitleTrackMatchesTextTrack(ae,ve))[0],ye||this.warn(`Unable to find subtitle TextTrack with name "${ae.name}" and language "${ae.lang}"`)),[].slice.call(ee).forEach(ve=>{ve.mode!=="disabled"&&ve!==ye&&(ve.mode="disabled")}),ye){const ve=this.subtitleDisplay?"showing":"hidden";ye.mode!==ve&&(ye.mode=ve)}}setSubtitleTrack(Z){const ee=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=Z;return}if(Z<-1||Z>=ee.length||!isFiniteNumber(Z)){this.warn(`Invalid subtitle track id: ${Z}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const ae=this.currentTrack,ye=ee[Z]||null;if(this.trackId=Z,this.currentTrack=ye,this.toggleTrackModes(),!ye){this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:Z});return}const ve=!!ye.details&&!ye.details.live;if(Z===this.trackId&&ye===ae&&ve)return;this.log(`Switching to subtitle-track ${Z}`+(ye?` "${ye.name}" lang:${ye.lang} group:${ye.groupId}`:""));const{id:be,groupId:Qe="",name:Xe,type:Je,url:tt}=ye;this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:be,groupId:Qe,name:Xe,type:Je,url:tt});const it=this.switchParams(ye.url,ae==null?void 0:ae.details);this.loadPlaylist(it)}}class BufferOperationQueue{constructor(Z){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=Z}append(Z,ee,ae){const ye=this.queues[ee];ye.push(Z),ye.length===1&&!ae&&this.executeNext(ee)}insertAbort(Z,ee){this.queues[ee].unshift(Z),this.executeNext(ee)}appendBlocker(Z){let ee;const ae=new Promise(ve=>{ee=ve}),ye={execute:ee,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(ye,Z),ae}executeNext(Z){const ee=this.queues[Z];if(ee.length){const ae=ee[0];try{ae.execute()}catch(ye){logger.warn(`[buffer-operation-queue]: Exception executing "${Z}" SourceBuffer operation: ${ye}`),ae.onError(ye);const ve=this.buffers[Z];ve!=null&&ve.updating||this.shiftAndExecuteNext(Z)}}}shiftAndExecuteNext(Z){this.queues[Z].shift(),this.executeNext(Z)}current(Z){return this.queues[Z][0]}}const VIDEO_CODEC_PROFILE_REPLACE=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class BufferController{constructor(Z){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=ae=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=ae=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:ae,mediaSource:ye}=this;this.log("Media source opened"),ae&&(ae.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Events.MEDIA_ATTACHED,{media:ae,mediaSource:ye})),ye&&ye.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:ae,_objectUrl:ye}=this;ae!==ye&&logger.error(`Media element src was set while attaching MediaSource (${ye} > ${ae})`)},this.hls=Z;const ee="[buffer-controller]";this.appendSource=Z.config.preferManagedMediaSource,this.log=logger.log.bind(logger,ee),this.warn=logger.warn.bind(logger,ee),this.error=logger.error.bind(logger,ee),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:Z}=this;Z.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.on(Events.BUFFER_RESET,this.onBufferReset,this),Z.on(Events.BUFFER_APPENDING,this.onBufferAppending,this),Z.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),Z.on(Events.BUFFER_EOS,this.onBufferEos,this),Z.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),Z.on(Events.FRAG_PARSED,this.onFragParsed,this),Z.on(Events.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:Z}=this;Z.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.off(Events.BUFFER_RESET,this.onBufferReset,this),Z.off(Events.BUFFER_APPENDING,this.onBufferAppending,this),Z.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),Z.off(Events.BUFFER_EOS,this.onBufferEos,this),Z.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Z.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),Z.off(Events.FRAG_PARSED,this.onFragParsed,this),Z.off(Events.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new BufferOperationQueue(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(Z,ee){let ae=2;(ee.audio&&!ee.video||!ee.altAudio)&&(ae=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=ae,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(Z,ee){const ae=this.media=ee.media,ye=getMediaSource(this.appendSource);if(ae&&ye){var ve;const be=this.mediaSource=new ye;this.log(`created media source: ${(ve=be.constructor)==null?void 0:ve.name}`),be.addEventListener("sourceopen",this._onMediaSourceOpen),be.addEventListener("sourceended",this._onMediaSourceEnded),be.addEventListener("sourceclose",this._onMediaSourceClose),be.addEventListener("startstreaming",this._onStartStreaming),be.addEventListener("endstreaming",this._onEndStreaming);const Qe=this._objectUrl=self.URL.createObjectURL(be);if(this.appendSource)try{ae.removeAttribute("src");const Xe=self.ManagedMediaSource;ae.disableRemotePlayback=ae.disableRemotePlayback||Xe&&be instanceof Xe,removeSourceChildren(ae),addSource(ae,Qe),ae.load()}catch{ae.src=Qe}else ae.src=Qe;ae.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:Z,mediaSource:ee,_objectUrl:ae}=this;if(ee){if(this.log("media source detaching"),ee.readyState==="open")try{ee.endOfStream()}catch(ye){this.warn(`onMediaDetaching: ${ye.message} while calling endOfStream`)}this.onBufferReset(),ee.removeEventListener("sourceopen",this._onMediaSourceOpen),ee.removeEventListener("sourceended",this._onMediaSourceEnded),ee.removeEventListener("sourceclose",this._onMediaSourceClose),ee.removeEventListener("startstreaming",this._onStartStreaming),ee.removeEventListener("endstreaming",this._onEndStreaming),Z&&(Z.removeEventListener("emptied",this._onMediaEmptied),ae&&self.URL.revokeObjectURL(ae),this.mediaSrc===ae?(Z.removeAttribute("src"),this.appendSource&&removeSourceChildren(Z),Z.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Events.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(Z=>{this.resetBuffer(Z)}),this._initSourceBuffer()}resetBuffer(Z){const ee=this.sourceBuffer[Z];try{if(ee){var ae;this.removeBufferListeners(Z),this.sourceBuffer[Z]=void 0,(ae=this.mediaSource)!=null&&ae.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(ee)}}catch(ye){this.warn(`onBufferReset ${Z}`,ye)}}onBufferCodecs(Z,ee){const ae=this.getSourceBufferTypes().length,ye=Object.keys(ee);if(ye.forEach(be=>{if(ae){const Xe=this.tracks[be];if(Xe&&typeof Xe.buffer.changeType=="function"){var Qe;const{id:Je,codec:tt,levelCodec:it,container:st,metadata:lt}=ee[be],ct=pickMostCompleteCodecName(Xe.codec,Xe.levelCodec),gt=ct==null?void 0:ct.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");let ut=pickMostCompleteCodecName(tt,it);const mt=(Qe=ut)==null?void 0:Qe.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");if(ut&&gt!==mt){be.slice(0,5)==="audio"&&(ut=getCodecCompatibleName(ut,this.hls.config.preferManagedMediaSource));const ei=`${st};codecs=${ut}`;this.appendChangeType(be,ei),this.log(`switching codec ${ct} to ${ut}`),this.tracks[be]={buffer:Xe.buffer,codec:tt,container:st,levelCodec:it,metadata:lt,id:Je}}}}else this.pendingTracks[be]=ee[be]}),ae)return;const ve=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==ve&&(this.log(`${ve} bufferCodec event(s) expected ${ye.join(",")}`),this.bufferCodecEventsExpected=ve),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(Z,ee){const{operationQueue:ae}=this,ye={execute:()=>{const ve=this.sourceBuffer[Z];ve&&(this.log(`changing ${Z} sourceBuffer type to ${ee}`),ve.changeType(ee)),ae.shiftAndExecuteNext(Z)},onStart:()=>{},onComplete:()=>{},onError:ve=>{this.warn(`Failed to change ${Z} SourceBuffer type`,ve)}};ae.append(ye,Z,!!this.pendingTracks[Z])}onBufferAppending(Z,ee){const{hls:ae,operationQueue:ye,tracks:ve}=this,{data:be,type:Qe,frag:Xe,part:Je,chunkMeta:tt}=ee,it=tt.buffering[Qe],st=self.performance.now();it.start=st;const lt=Xe.stats.buffering,ct=Je?Je.stats.buffering:null;lt.start===0&&(lt.start=st),ct&&ct.start===0&&(ct.start=st);const gt=ve.audio;let ut=!1;Qe==="audio"&&(gt==null?void 0:gt.container)==="audio/mpeg"&&(ut=!this.lastMpegAudioChunk||tt.id===1||this.lastMpegAudioChunk.sn!==tt.sn,this.lastMpegAudioChunk=tt);const mt=Xe.start,ei={execute:()=>{if(it.executeStart=self.performance.now(),ut){const ni=this.sourceBuffer[Qe];if(ni){const ri=mt-ni.timestampOffset;Math.abs(ri)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${mt} (delta: ${ri}) sn: ${Xe.sn})`),ni.timestampOffset=mt)}}this.appendExecutor(be,Qe)},onStart:()=>{},onComplete:()=>{const ni=self.performance.now();it.executeEnd=it.end=ni,lt.first===0&&(lt.first=ni),ct&&ct.first===0&&(ct.first=ni);const{sourceBuffer:ri}=this,si={};for(const li in ri)si[li]=BufferHelper.getBuffered(ri[li]);this.appendErrors[Qe]=0,Qe==="audio"||Qe==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Events.BUFFER_APPENDED,{type:Qe,frag:Xe,part:Je,chunkMeta:tt,parent:Xe.type,timeRanges:si})},onError:ni=>{const ri={type:ErrorTypes.MEDIA_ERROR,parent:Xe.type,details:ErrorDetails.BUFFER_APPEND_ERROR,sourceBufferName:Qe,frag:Xe,part:Je,chunkMeta:tt,error:ni,err:ni,fatal:!1};if(ni.code===DOMException.QUOTA_EXCEEDED_ERR)ri.details=ErrorDetails.BUFFER_FULL_ERROR;else{const si=++this.appendErrors[Qe];ri.details=ErrorDetails.BUFFER_APPEND_ERROR,this.warn(`Failed ${si}/${ae.config.appendErrorMaxRetry} times to append segment in "${Qe}" sourceBuffer`),si>=ae.config.appendErrorMaxRetry&&(ri.fatal=!0)}ae.trigger(Events.ERROR,ri)}};ye.append(ei,Qe,!!this.pendingTracks[Qe])}onBufferFlushing(Z,ee){const{operationQueue:ae}=this,ye=ve=>({execute:this.removeExecutor.bind(this,ve,ee.startOffset,ee.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Events.BUFFER_FLUSHED,{type:ve})},onError:be=>{this.warn(`Failed to remove from ${ve} SourceBuffer`,be)}});ee.type?ae.append(ye(ee.type),ee.type):this.getSourceBufferTypes().forEach(ve=>{ae.append(ye(ve),ve)})}onFragParsed(Z,ee){const{frag:ae,part:ye}=ee,ve=[],be=ye?ye.elementaryStreams:ae.elementaryStreams;be[ElementaryStreamTypes.AUDIOVIDEO]?ve.push("audiovideo"):(be[ElementaryStreamTypes.AUDIO]&&ve.push("audio"),be[ElementaryStreamTypes.VIDEO]&&ve.push("video"));const Qe=()=>{const Xe=self.performance.now();ae.stats.buffering.end=Xe,ye&&(ye.stats.buffering.end=Xe);const Je=ye?ye.stats:ae.stats;this.hls.trigger(Events.FRAG_BUFFERED,{frag:ae,part:ye,stats:Je,id:ae.type})};ve.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${ae.type} level: ${ae.level} sn: ${ae.sn}`),this.blockBuffers(Qe,ve)}onFragChanged(Z,ee){this.trimBuffers()}onBufferEos(Z,ee){this.getSourceBufferTypes().reduce((ye,ve)=>{const be=this.sourceBuffer[ve];return be&&(!ee.type||ee.type===ve)&&(be.ending=!0,be.ended||(be.ended=!0,this.log(`${ve} sourceBuffer now EOS`))),ye&&!!(!be||be.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(ve=>{const be=this.sourceBuffer[ve];be&&(be.ending=!1)});const{mediaSource:ye}=this;if(!ye||ye.readyState!=="open"){ye&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${ye.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),ye.endOfStream()}))}onLevelUpdated(Z,{details:ee}){ee.fragments.length&&(this.details=ee,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:Z,details:ee,media:ae}=this;if(!ae||ee===null||!this.getSourceBufferTypes().length)return;const ve=Z.config,be=ae.currentTime,Qe=ee.levelTargetDuration,Xe=ee.live&&ve.liveBackBufferLength!==null?ve.liveBackBufferLength:ve.backBufferLength;if(isFiniteNumber(Xe)&&Xe>0){const Je=Math.max(Xe,Qe),tt=Math.floor(be/Qe)*Qe-Je;this.flushBackBuffer(be,Qe,tt)}if(isFiniteNumber(ve.frontBufferFlushThreshold)&&ve.frontBufferFlushThreshold>0){const Je=Math.max(ve.maxBufferLength,ve.frontBufferFlushThreshold),tt=Math.max(Je,Qe),it=Math.floor(be/Qe)*Qe+tt;this.flushFrontBuffer(be,Qe,it)}}flushBackBuffer(Z,ee,ae){const{details:ye,sourceBuffer:ve}=this;this.getSourceBufferTypes().forEach(Qe=>{const Xe=ve[Qe];if(Xe){const Je=BufferHelper.getBuffered(Xe);if(Je.length>0&&ae>Je.start(0)){if(this.hls.trigger(Events.BACK_BUFFER_REACHED,{bufferEnd:ae}),ye!=null&&ye.live)this.hls.trigger(Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:ae});else if(Xe.ended&&Je.end(Je.length-1)-Z<ee*2){this.log(`Cannot flush ${Qe} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:ae,type:Qe})}}})}flushFrontBuffer(Z,ee,ae){const{sourceBuffer:ye}=this;this.getSourceBufferTypes().forEach(be=>{const Qe=ye[be];if(Qe){const Xe=BufferHelper.getBuffered(Qe),Je=Xe.length;if(Je<2)return;const tt=Xe.start(Je-1),it=Xe.end(Je-1);if(ae>tt||Z>=tt&&Z<=it)return;if(Qe.ended&&Z-it<2*ee){this.log(`Cannot flush ${be} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Events.BUFFER_FLUSHING,{startOffset:tt,endOffset:1/0,type:be})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:Z,hls:ee,media:ae,mediaSource:ye}=this,ve=Z.fragments[0].start+Z.totalduration,be=ae.duration,Qe=isFiniteNumber(ye.duration)?ye.duration:0;Z.live&&ee.config.liveDurationInfinity?(ye.duration=1/0,this.updateSeekableRange(Z)):(ve>Qe&&ve>be||!isFiniteNumber(be))&&(this.log(`Updating Media Source duration to ${ve.toFixed(3)}`),ye.duration=ve)}updateSeekableRange(Z){const ee=this.mediaSource,ae=Z.fragments;if(ae.length&&Z.live&&ee!=null&&ee.setLiveSeekableRange){const ve=Math.max(0,ae[0].start),be=Math.max(ve,ve+Z.totalduration);this.log(`Media Source duration is set to ${ee.duration}. Setting seekable range to ${ve}-${be}.`),ee.setLiveSeekableRange(ve,be)}}checkPendingTracks(){const{bufferCodecEventsExpected:Z,operationQueue:ee,pendingTracks:ae}=this,ye=Object.keys(ae).length;if(ye&&(!Z||ye===2||"audiovideo"in ae)){this.createSourceBuffers(ae),this.pendingTracks={};const ve=this.getSourceBufferTypes();if(ve.length)this.hls.trigger(Events.BUFFER_CREATED,{tracks:this.tracks}),ve.forEach(be=>{ee.executeNext(be)});else{const be=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:be,reason:be.message})}}}createSourceBuffers(Z){const{sourceBuffer:ee,mediaSource:ae}=this;if(!ae)throw Error("createSourceBuffers called when mediaSource was null");for(const ye in Z)if(!ee[ye]){const ve=Z[ye];if(!ve)throw Error(`source buffer exists for track ${ye}, however track does not`);let be=ve.levelCodec||ve.codec;be&&ye.slice(0,5)==="audio"&&(be=getCodecCompatibleName(be,this.hls.config.preferManagedMediaSource));const Qe=`${ve.container};codecs=${be}`;this.log(`creating sourceBuffer(${Qe})`);try{const Xe=ee[ye]=ae.addSourceBuffer(Qe),Je=ye;this.addBufferListener(Je,"updatestart",this._onSBUpdateStart),this.addBufferListener(Je,"updateend",this._onSBUpdateEnd),this.addBufferListener(Je,"error",this._onSBUpdateError),this.addBufferListener(Je,"bufferedchange",(tt,it)=>{const st=it.removedRanges;st!=null&&st.length&&this.hls.trigger(Events.BUFFER_FLUSHED,{type:ye})}),this.tracks[ye]={buffer:Xe,codec:be,container:ve.container,levelCodec:ve.levelCodec,metadata:ve.metadata,id:ve.id}}catch(Xe){this.error(`error while trying to add sourceBuffer: ${Xe.message}`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:Xe,sourceBufferName:ye,mimeType:Qe})}}}get mediaSrc(){var Z;const ee=((Z=this.media)==null?void 0:Z.firstChild)||this.media;return ee==null?void 0:ee.src}_onSBUpdateStart(Z){const{operationQueue:ee}=this;ee.current(Z).onStart()}_onSBUpdateEnd(Z){var ee;if(((ee=this.mediaSource)==null?void 0:ee.readyState)==="closed"){this.resetBuffer(Z);return}const{operationQueue:ae}=this;ae.current(Z).onComplete(),ae.shiftAndExecuteNext(Z)}_onSBUpdateError(Z,ee){var ae;const ye=new Error(`${Z} SourceBuffer error. MediaSource readyState: ${(ae=this.mediaSource)==null?void 0:ae.readyState}`);this.error(`${ye}`,ee),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_APPENDING_ERROR,sourceBufferName:Z,error:ye,fatal:!1});const ve=this.operationQueue.current(Z);ve&&ve.onError(ye)}removeExecutor(Z,ee,ae){const{media:ye,mediaSource:ve,operationQueue:be,sourceBuffer:Qe}=this,Xe=Qe[Z];if(!ye||!ve||!Xe){this.warn(`Attempting to remove from the ${Z} SourceBuffer, but it does not exist`),be.shiftAndExecuteNext(Z);return}const Je=isFiniteNumber(ye.duration)?ye.duration:1/0,tt=isFiniteNumber(ve.duration)?ve.duration:1/0,it=Math.max(0,ee),st=Math.min(ae,Je,tt);st>it&&(!Xe.ending||Xe.ended)?(Xe.ended=!1,this.log(`Removing [${it},${st}] from the ${Z} SourceBuffer`),Xe.remove(it,st)):be.shiftAndExecuteNext(Z)}appendExecutor(Z,ee){const ae=this.sourceBuffer[ee];if(!ae){if(!this.pendingTracks[ee])throw new Error(`Attempting to append to the ${ee} SourceBuffer, but it does not exist`);return}ae.ended=!1,ae.appendBuffer(Z)}blockBuffers(Z,ee=this.getSourceBufferTypes()){if(!ee.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(Z);return}const{operationQueue:ae}=this,ye=ee.map(ve=>ae.appendBlocker(ve));Promise.all(ye).then(()=>{Z(),ee.forEach(ve=>{const be=this.sourceBuffer[ve];be!=null&&be.updating||ae.shiftAndExecuteNext(ve)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(Z,ee,ae){const ye=this.sourceBuffer[Z];if(!ye)return;const ve=ae.bind(this,Z);this.listeners[Z].push({event:ee,listener:ve}),ye.addEventListener(ee,ve)}removeBufferListeners(Z){const ee=this.sourceBuffer[Z];ee&&this.listeners[Z].forEach(ae=>{ee.removeEventListener(ae.event,ae.listener)})}}function removeSourceChildren(ie){const Z=ie.querySelectorAll("source");[].slice.call(Z).forEach(ee=>{ie.removeChild(ee)})}function addSource(ie,Z){const ee=self.document.createElement("source");ee.type="video/mp4",ee.src=Z,ie.appendChild(ee)}const specialCea608CharsCodes={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},getCharForByte=function(Z){let ee=Z;return specialCea608CharsCodes.hasOwnProperty(Z)&&(ee=specialCea608CharsCodes[Z]),String.fromCharCode(ee)},NR_ROWS=15,NR_COLS=100,rowsLowCh1={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},rowsHighCh1={17:2,18:4,21:6,22:8,23:10,19:13,20:15},rowsLowCh2={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},rowsHighCh2={25:2,26:4,29:6,30:8,31:10,27:13,28:15},backgroundColors=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class CaptionsLogger{constructor(){this.time=null,this.verboseLevel=0}log(Z,ee){if(this.verboseLevel>=Z){const ae=typeof ee=="function"?ee():ee;logger.log(`${this.time} [${Z}] ${ae}`)}}}const numArrayToHexArray=function(Z){const ee=[];for(let ae=0;ae<Z.length;ae++)ee.push(Z[ae].toString(16));return ee};class PenState{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(Z){const ee=["foreground","underline","italics","background","flash"];for(let ae=0;ae<ee.length;ae++){const ye=ee[ae];Z.hasOwnProperty(ye)&&(this[ye]=Z[ye])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(Z){return this.foreground===Z.foreground&&this.underline===Z.underline&&this.italics===Z.italics&&this.background===Z.background&&this.flash===Z.flash}copy(Z){this.foreground=Z.foreground,this.underline=Z.underline,this.italics=Z.italics,this.background=Z.background,this.flash=Z.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class StyledUnicodeChar{constructor(){this.uchar=" ",this.penState=new PenState}reset(){this.uchar=" ",this.penState.reset()}setChar(Z,ee){this.uchar=Z,this.penState.copy(ee)}setPenState(Z){this.penState.copy(Z)}equals(Z){return this.uchar===Z.uchar&&this.penState.equals(Z.penState)}copy(Z){this.uchar=Z.uchar,this.penState.copy(Z.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Row{constructor(Z){this.chars=[],this.pos=0,this.currPenState=new PenState,this.cueStartTime=null,this.logger=void 0;for(let ee=0;ee<NR_COLS;ee++)this.chars.push(new StyledUnicodeChar);this.logger=Z}equals(Z){for(let ee=0;ee<NR_COLS;ee++)if(!this.chars[ee].equals(Z.chars[ee]))return!1;return!0}copy(Z){for(let ee=0;ee<NR_COLS;ee++)this.chars[ee].copy(Z.chars[ee])}isEmpty(){let Z=!0;for(let ee=0;ee<NR_COLS;ee++)if(!this.chars[ee].isEmpty()){Z=!1;break}return Z}setCursor(Z){this.pos!==Z&&(this.pos=Z),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>NR_COLS&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=NR_COLS)}moveCursor(Z){const ee=this.pos+Z;if(Z>1)for(let ae=this.pos+1;ae<ee+1;ae++)this.chars[ae].setPenState(this.currPenState);this.setCursor(ee)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(Z){Z>=144&&this.backSpace();const ee=getCharForByte(Z);if(this.pos>=NR_COLS){this.logger.log(0,()=>"Cannot insert "+Z.toString(16)+" ("+ee+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(ee,this.currPenState),this.moveCursor(1)}clearFromPos(Z){let ee;for(ee=Z;ee<NR_COLS;ee++)this.chars[ee].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const Z=[];let ee=!0;for(let ae=0;ae<NR_COLS;ae++){const ye=this.chars[ae].uchar;ye!==" "&&(ee=!1),Z.push(ye)}return ee?"":Z.join("")}setPenStyles(Z){this.currPenState.setStyles(Z),this.chars[this.pos].setPenState(this.currPenState)}}class CaptionScreen{constructor(Z){this.rows=[],this.currRow=NR_ROWS-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let ee=0;ee<NR_ROWS;ee++)this.rows.push(new Row(Z));this.logger=Z}reset(){for(let Z=0;Z<NR_ROWS;Z++)this.rows[Z].clear();this.currRow=NR_ROWS-1}equals(Z){let ee=!0;for(let ae=0;ae<NR_ROWS;ae++)if(!this.rows[ae].equals(Z.rows[ae])){ee=!1;break}return ee}copy(Z){for(let ee=0;ee<NR_ROWS;ee++)this.rows[ee].copy(Z.rows[ee])}isEmpty(){let Z=!0;for(let ee=0;ee<NR_ROWS;ee++)if(!this.rows[ee].isEmpty()){Z=!1;break}return Z}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(Z){this.rows[this.currRow].insertChar(Z)}setPen(Z){this.rows[this.currRow].setPenStyles(Z)}moveCursor(Z){this.rows[this.currRow].moveCursor(Z)}setCursor(Z){this.logger.log(2,"setCursor: "+Z),this.rows[this.currRow].setCursor(Z)}setPAC(Z){this.logger.log(2,()=>"pacData = "+JSON.stringify(Z));let ee=Z.row-1;if(this.nrRollUpRows&&ee<this.nrRollUpRows-1&&(ee=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==ee){for(let Qe=0;Qe<NR_ROWS;Qe++)this.rows[Qe].clear();const ve=this.currRow+1-this.nrRollUpRows,be=this.lastOutputScreen;if(be){const Qe=be.rows[ve].cueStartTime,Xe=this.logger.time;if(Qe!==null&&Xe!==null&&Qe<Xe)for(let Je=0;Je<this.nrRollUpRows;Je++)this.rows[ee-this.nrRollUpRows+Je+1].copy(be.rows[ve+Je])}}this.currRow=ee;const ae=this.rows[this.currRow];if(Z.indent!==null){const ve=Z.indent,be=Math.max(ve-1,0);ae.setCursor(Z.indent),Z.color=ae.chars[be].penState.foreground}const ye={foreground:Z.color,underline:Z.underline,italics:Z.italics,background:"black",flash:!1};this.setPen(ye)}setBkgData(Z){this.logger.log(2,()=>"bkgData = "+JSON.stringify(Z)),this.backSpace(),this.setPen(Z),this.insertChar(32)}setRollUpRows(Z){this.nrRollUpRows=Z}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const Z=this.currRow+1-this.nrRollUpRows,ee=this.rows.splice(Z,1)[0];ee.clear(),this.rows.splice(this.currRow,0,ee),this.logger.log(2,"Rolling up")}getDisplayText(Z){Z=Z||!1;const ee=[];let ae="",ye=-1;for(let ve=0;ve<NR_ROWS;ve++){const be=this.rows[ve].getTextString();be&&(ye=ve+1,Z?ee.push("Row "+ye+": '"+be+"'"):ee.push(be.trim()))}return ee.length>0&&(Z?ae="["+ee.join(" | ")+"]":ae=ee.join(`
`)),ae}getTextAndFormat(){return this.rows}}class Cea608Channel{constructor(Z,ee,ae){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=Z,this.outputFilter=ee,this.mode=null,this.verbose=0,this.displayedMemory=new CaptionScreen(ae),this.nonDisplayedMemory=new CaptionScreen(ae),this.lastOutputScreen=new CaptionScreen(ae),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=ae}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(Z){this.outputFilter=Z}setPAC(Z){this.writeScreen.setPAC(Z)}setBkgData(Z){this.writeScreen.setBkgData(Z)}setMode(Z){Z!==this.mode&&(this.mode=Z,this.logger.log(2,()=>"MODE="+Z),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=Z)}insertChars(Z){for(let ae=0;ae<Z.length;ae++)this.writeScreen.insertChar(Z[ae]);const ee=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>ee+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(Z){this.logger.log(2,"RU("+Z+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(Z)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const Z=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=Z,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(Z){this.logger.log(2,"TO("+Z+") - Tab Offset"),this.writeScreen.moveCursor(Z)}ccMIDROW(Z){const ee={flash:!1};if(ee.underline=Z%2===1,ee.italics=Z>=46,ee.italics)ee.foreground="white";else{const ae=Math.floor(Z/2)-16,ye=["white","green","blue","cyan","red","yellow","magenta"];ee.foreground=ye[ae]}this.logger.log(2,"MIDROW: "+JSON.stringify(ee)),this.writeScreen.setPen(ee)}outputDataUpdate(Z=!1){const ee=this.logger.time;ee!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=ee:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,ee,this.lastOutputScreen),Z&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:ee),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(Z){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,Z,this.displayedMemory),this.cueStartTime=Z))}}class Cea608Parser{constructor(Z,ee,ae){this.channels=void 0,this.currentChannel=0,this.cmdHistory=createCmdHistory(),this.logger=void 0;const ye=this.logger=new CaptionsLogger;this.channels=[null,new Cea608Channel(Z,ee,ye),new Cea608Channel(Z+1,ae,ye)]}getHandler(Z){return this.channels[Z].getHandler()}setHandler(Z,ee){this.channels[Z].setHandler(ee)}addData(Z,ee){let ae,ye,ve,be=!1;this.logger.time=Z;for(let Qe=0;Qe<ee.length;Qe+=2)if(ye=ee[Qe]&127,ve=ee[Qe+1]&127,!(ye===0&&ve===0)){if(this.logger.log(3,"["+numArrayToHexArray([ee[Qe],ee[Qe+1]])+"] -> ("+numArrayToHexArray([ye,ve])+")"),ae=this.parseCmd(ye,ve),ae||(ae=this.parseMidrow(ye,ve)),ae||(ae=this.parsePAC(ye,ve)),ae||(ae=this.parseBackgroundAttributes(ye,ve)),!ae&&(be=this.parseChars(ye,ve),be)){const Xe=this.currentChannel;Xe&&Xe>0?this.channels[Xe].insertChars(be):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!ae&&!be&&this.logger.log(2,"Couldn't parse cleaned data "+numArrayToHexArray([ye,ve])+" orig: "+numArrayToHexArray([ee[Qe],ee[Qe+1]]))}}parseCmd(Z,ee){const{cmdHistory:ae}=this,ye=(Z===20||Z===28||Z===21||Z===29)&&ee>=32&&ee<=47,ve=(Z===23||Z===31)&&ee>=33&&ee<=35;if(!(ye||ve))return!1;if(hasCmdRepeated(Z,ee,ae))return setLastCmd(null,null,ae),this.logger.log(3,"Repeated command ("+numArrayToHexArray([Z,ee])+") is dropped"),!0;const be=Z===20||Z===21||Z===23?1:2,Qe=this.channels[be];return Z===20||Z===21||Z===28||Z===29?ee===32?Qe.ccRCL():ee===33?Qe.ccBS():ee===34?Qe.ccAOF():ee===35?Qe.ccAON():ee===36?Qe.ccDER():ee===37?Qe.ccRU(2):ee===38?Qe.ccRU(3):ee===39?Qe.ccRU(4):ee===40?Qe.ccFON():ee===41?Qe.ccRDC():ee===42?Qe.ccTR():ee===43?Qe.ccRTD():ee===44?Qe.ccEDM():ee===45?Qe.ccCR():ee===46?Qe.ccENM():ee===47&&Qe.ccEOC():Qe.ccTO(ee-32),setLastCmd(Z,ee,ae),this.currentChannel=be,!0}parseMidrow(Z,ee){let ae=0;if((Z===17||Z===25)&&ee>=32&&ee<=47){if(Z===17?ae=1:ae=2,ae!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const ye=this.channels[ae];return ye?(ye.ccMIDROW(ee),this.logger.log(3,"MIDROW ("+numArrayToHexArray([Z,ee])+")"),!0):!1}return!1}parsePAC(Z,ee){let ae;const ye=this.cmdHistory,ve=(Z>=17&&Z<=23||Z>=25&&Z<=31)&&ee>=64&&ee<=127,be=(Z===16||Z===24)&&ee>=64&&ee<=95;if(!(ve||be))return!1;if(hasCmdRepeated(Z,ee,ye))return setLastCmd(null,null,ye),!0;const Qe=Z<=23?1:2;ee>=64&&ee<=95?ae=Qe===1?rowsLowCh1[Z]:rowsLowCh2[Z]:ae=Qe===1?rowsHighCh1[Z]:rowsHighCh2[Z];const Xe=this.channels[Qe];return Xe?(Xe.setPAC(this.interpretPAC(ae,ee)),setLastCmd(Z,ee,ye),this.currentChannel=Qe,!0):!1}interpretPAC(Z,ee){let ae;const ye={color:null,italics:!1,indent:null,underline:!1,row:Z};return ee>95?ae=ee-96:ae=ee-64,ye.underline=(ae&1)===1,ae<=13?ye.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ae/2)]:ae<=15?(ye.italics=!0,ye.color="white"):ye.indent=Math.floor((ae-16)/2)*4,ye}parseChars(Z,ee){let ae,ye=null,ve=null;if(Z>=25?(ae=2,ve=Z-8):(ae=1,ve=Z),ve>=17&&ve<=19){let be;ve===17?be=ee+80:ve===18?be=ee+112:be=ee+144,this.logger.log(2,"Special char '"+getCharForByte(be)+"' in channel "+ae),ye=[be]}else Z>=32&&Z<=127&&(ye=ee===0?[Z]:[Z,ee]);if(ye){const be=numArrayToHexArray(ye);this.logger.log(3,"Char codes =  "+be.join(",")),setLastCmd(Z,ee,this.cmdHistory)}return ye}parseBackgroundAttributes(Z,ee){const ae=(Z===16||Z===24)&&ee>=32&&ee<=47,ye=(Z===23||Z===31)&&ee>=45&&ee<=47;if(!(ae||ye))return!1;let ve;const be={};Z===16||Z===24?(ve=Math.floor((ee-32)/2),be.background=backgroundColors[ve],ee%2===1&&(be.background=be.background+"_semi")):ee===45?be.background="transparent":(be.foreground="black",ee===47&&(be.underline=!0));const Qe=Z<=23?1:2;return this.channels[Qe].setBkgData(be),setLastCmd(Z,ee,this.cmdHistory),!0}reset(){for(let Z=0;Z<Object.keys(this.channels).length;Z++){const ee=this.channels[Z];ee&&ee.reset()}this.cmdHistory=createCmdHistory()}cueSplitAtTime(Z){for(let ee=0;ee<this.channels.length;ee++){const ae=this.channels[ee];ae&&ae.cueSplitAtTime(Z)}}}function setLastCmd(ie,Z,ee){ee.a=ie,ee.b=Z}function hasCmdRepeated(ie,Z,ee){return ee.a===ie&&ee.b===Z}function createCmdHistory(){return{a:null,b:null}}class OutputFilter{constructor(Z,ee){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=Z,this.trackName=ee}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(Z,ee,ae){(this.startTime===null||this.startTime>Z)&&(this.startTime=Z),this.endTime=ee,this.screen=ae,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var VTTCue=function(){if(optionalSelf!=null&&optionalSelf.VTTCue)return self.VTTCue;const ie=["","lr","rl"],Z=["start","middle","end","left","right"];function ee(Qe,Xe){if(typeof Xe!="string"||!Array.isArray(Qe))return!1;const Je=Xe.toLowerCase();return~Qe.indexOf(Je)?Je:!1}function ae(Qe){return ee(ie,Qe)}function ye(Qe){return ee(Z,Qe)}function ve(Qe,...Xe){let Je=1;for(;Je<arguments.length;Je++){const tt=arguments[Je];for(const it in tt)Qe[it]=tt[it]}return Qe}function be(Qe,Xe,Je){const tt=this,it={enumerable:!0};tt.hasBeenReset=!1;let st="",lt=!1,ct=Qe,gt=Xe,ut=Je,mt=null,ei="",ni=!0,ri="auto",si="start",li=50,ai="middle",ci=50,Ci="middle";Object.defineProperty(tt,"id",ve({},it,{get:function(){return st},set:function(pi){st=""+pi}})),Object.defineProperty(tt,"pauseOnExit",ve({},it,{get:function(){return lt},set:function(pi){lt=!!pi}})),Object.defineProperty(tt,"startTime",ve({},it,{get:function(){return ct},set:function(pi){if(typeof pi!="number")throw new TypeError("Start time must be set to a number.");ct=pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"endTime",ve({},it,{get:function(){return gt},set:function(pi){if(typeof pi!="number")throw new TypeError("End time must be set to a number.");gt=pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"text",ve({},it,{get:function(){return ut},set:function(pi){ut=""+pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"region",ve({},it,{get:function(){return mt},set:function(pi){mt=pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"vertical",ve({},it,{get:function(){return ei},set:function(pi){const gi=ae(pi);if(gi===!1)throw new SyntaxError("An invalid or illegal string was specified.");ei=gi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"snapToLines",ve({},it,{get:function(){return ni},set:function(pi){ni=!!pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"line",ve({},it,{get:function(){return ri},set:function(pi){if(typeof pi!="number"&&pi!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");ri=pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"lineAlign",ve({},it,{get:function(){return si},set:function(pi){const gi=ye(pi);if(!gi)throw new SyntaxError("An invalid or illegal string was specified.");si=gi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"position",ve({},it,{get:function(){return li},set:function(pi){if(pi<0||pi>100)throw new Error("Position must be between 0 and 100.");li=pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"positionAlign",ve({},it,{get:function(){return ai},set:function(pi){const gi=ye(pi);if(!gi)throw new SyntaxError("An invalid or illegal string was specified.");ai=gi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"size",ve({},it,{get:function(){return ci},set:function(pi){if(pi<0||pi>100)throw new Error("Size must be between 0 and 100.");ci=pi,this.hasBeenReset=!0}})),Object.defineProperty(tt,"align",ve({},it,{get:function(){return Ci},set:function(pi){const gi=ye(pi);if(!gi)throw new SyntaxError("An invalid or illegal string was specified.");Ci=gi,this.hasBeenReset=!0}})),tt.displayState=void 0}return be.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},be}();class StringDecoder{decode(Z,ee){if(!Z)return"";if(typeof Z!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Z))}}function parseTimeStamp(ie){function Z(ae,ye,ve,be){return(ae|0)*3600+(ye|0)*60+(ve|0)+parseFloat(be||0)}const ee=ie.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return ee?parseFloat(ee[2])>59?Z(ee[2],ee[3],0,ee[4]):Z(ee[1],ee[2],ee[3],ee[4]):null}class Settings{constructor(){this.values=Object.create(null)}set(Z,ee){!this.get(Z)&&ee!==""&&(this.values[Z]=ee)}get(Z,ee,ae){return ae?this.has(Z)?this.values[Z]:ee[ae]:this.has(Z)?this.values[Z]:ee}has(Z){return Z in this.values}alt(Z,ee,ae){for(let ye=0;ye<ae.length;++ye)if(ee===ae[ye]){this.set(Z,ee);break}}integer(Z,ee){/^-?\d+$/.test(ee)&&this.set(Z,parseInt(ee,10))}percent(Z,ee){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(ee)){const ae=parseFloat(ee);if(ae>=0&&ae<=100)return this.set(Z,ae),!0}return!1}}function parseOptions(ie,Z,ee,ae){const ye=ae?ie.split(ae):[ie];for(const ve in ye){if(typeof ye[ve]!="string")continue;const be=ye[ve].split(ee);if(be.length!==2)continue;const Qe=be[0],Xe=be[1];Z(Qe,Xe)}}const defaults=new VTTCue(0,0,""),center=defaults.align==="middle"?"middle":"center";function parseCue$1(ie,Z,ee){const ae=ie;function ye(){const Qe=parseTimeStamp(ie);if(Qe===null)throw new Error("Malformed timestamp: "+ae);return ie=ie.replace(/^[^\sa-zA-Z-]+/,""),Qe}function ve(Qe,Xe){const Je=new Settings;parseOptions(Qe,function(st,lt){let ct;switch(st){case"region":for(let gt=ee.length-1;gt>=0;gt--)if(ee[gt].id===lt){Je.set(st,ee[gt].region);break}break;case"vertical":Je.alt(st,lt,["rl","lr"]);break;case"line":ct=lt.split(","),Je.integer(st,ct[0]),Je.percent(st,ct[0])&&Je.set("snapToLines",!1),Je.alt(st,ct[0],["auto"]),ct.length===2&&Je.alt("lineAlign",ct[1],["start",center,"end"]);break;case"position":ct=lt.split(","),Je.percent(st,ct[0]),ct.length===2&&Je.alt("positionAlign",ct[1],["start",center,"end","line-left","line-right","auto"]);break;case"size":Je.percent(st,lt);break;case"align":Je.alt(st,lt,["start",center,"end","left","right"]);break}},/:/,/\s/),Xe.region=Je.get("region",null),Xe.vertical=Je.get("vertical","");let tt=Je.get("line","auto");tt==="auto"&&defaults.line===-1&&(tt=-1),Xe.line=tt,Xe.lineAlign=Je.get("lineAlign","start"),Xe.snapToLines=Je.get("snapToLines",!0),Xe.size=Je.get("size",100),Xe.align=Je.get("align",center);let it=Je.get("position","auto");it==="auto"&&defaults.position===50&&(it=Xe.align==="start"||Xe.align==="left"?0:Xe.align==="end"||Xe.align==="right"?100:50),Xe.position=it}function be(){ie=ie.replace(/^\s+/,"")}if(be(),Z.startTime=ye(),be(),ie.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+ae);ie=ie.slice(3),be(),Z.endTime=ye(),be(),ve(ie,Z)}function fixLineBreaks(ie){return ie.replace(/<br(?: \/)?>/gi,`
`)}class VTTParser{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new StringDecoder,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(Z){const ee=this;Z&&(ee.buffer+=ee.decoder.decode(Z,{stream:!0}));function ae(){let ve=ee.buffer,be=0;for(ve=fixLineBreaks(ve);be<ve.length&&ve[be]!=="\r"&&ve[be]!==`
`;)++be;const Qe=ve.slice(0,be);return ve[be]==="\r"&&++be,ve[be]===`
`&&++be,ee.buffer=ve.slice(be),Qe}function ye(ve){parseOptions(ve,function(be,Qe){},/:/)}try{let ve="";if(ee.state==="INITIAL"){if(!/\r\n|\n/.test(ee.buffer))return this;ve=ae();const Qe=ve.match(/^()?WEBVTT([ \t].*)?$/);if(!(Qe!=null&&Qe[0]))throw new Error("Malformed WebVTT signature.");ee.state="HEADER"}let be=!1;for(;ee.buffer;){if(!/\r\n|\n/.test(ee.buffer))return this;switch(be?be=!1:ve=ae(),ee.state){case"HEADER":/:/.test(ve)?ye(ve):ve||(ee.state="ID");continue;case"NOTE":ve||(ee.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ve)){ee.state="NOTE";break}if(!ve)continue;if(ee.cue=new VTTCue(0,0,""),ee.state="CUE",ve.indexOf("-->")===-1){ee.cue.id=ve;continue}case"CUE":if(!ee.cue){ee.state="BADCUE";continue}try{parseCue$1(ve,ee.cue,ee.regionList)}catch{ee.cue=null,ee.state="BADCUE";continue}ee.state="CUETEXT";continue;case"CUETEXT":{const Qe=ve.indexOf("-->")!==-1;if(!ve||Qe&&(be=!0)){ee.oncue&&ee.cue&&ee.oncue(ee.cue),ee.cue=null,ee.state="ID";continue}if(ee.cue===null)continue;ee.cue.text&&(ee.cue.text+=`
`),ee.cue.text+=ve}continue;case"BADCUE":ve||(ee.state="ID")}}}catch{ee.state==="CUETEXT"&&ee.cue&&ee.oncue&&ee.oncue(ee.cue),ee.cue=null,ee.state=ee.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const Z=this;try{if((Z.cue||Z.state==="HEADER")&&(Z.buffer+=`

`,Z.parse()),Z.state==="INITIAL"||Z.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(ee){Z.onparsingerror&&Z.onparsingerror(ee)}return Z.onflush&&Z.onflush(),this}}const LINEBREAKS=/\r\n|\n\r|\n|\r/g,startsWith=function(Z,ee,ae=0){return Z.slice(ae,ae+ee.length)===ee},cueString2millis=function(Z){let ee=parseInt(Z.slice(-3));const ae=parseInt(Z.slice(-6,-4)),ye=parseInt(Z.slice(-9,-7)),ve=Z.length>9?parseInt(Z.substring(0,Z.indexOf(":"))):0;if(!isFiniteNumber(ee)||!isFiniteNumber(ae)||!isFiniteNumber(ye)||!isFiniteNumber(ve))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${Z}`);return ee+=1e3*ae,ee+=60*1e3*ye,ee+=60*60*1e3*ve,ee},hash=function(Z){let ee=5381,ae=Z.length;for(;ae;)ee=ee*33^Z.charCodeAt(--ae);return(ee>>>0).toString()};function generateCueId(ie,Z,ee){return hash(ie.toString())+hash(Z.toString())+hash(ee)}const calculateOffset=function(Z,ee,ae){let ye=Z[ee],ve=Z[ye.prevCC];if(!ve||!ve.new&&ye.new){Z.ccOffset=Z.presentationOffset=ye.start,ye.new=!1;return}for(;(be=ve)!=null&&be.new;){var be;Z.ccOffset+=ye.start-ve.start,ye.new=!1,ye=ve,ve=Z[ye.prevCC]}Z.presentationOffset=ae};function parseWebVTT(ie,Z,ee,ae,ye,ve,be){const Qe=new VTTParser,Xe=utf8ArrayToStr(new Uint8Array(ie)).trim().replace(LINEBREAKS,`
`).split(`
`),Je=[],tt=Z?toMpegTsClockFromTimescale(Z.baseTime,Z.timescale):0;let it="00:00.000",st=0,lt=0,ct,gt=!0;Qe.oncue=function(ut){const mt=ee[ae];let ei=ee.ccOffset;const ni=(st-tt)/9e4;if(mt!=null&&mt.new&&(lt!==void 0?ei=ee.ccOffset=mt.start:calculateOffset(ee,ae,ni)),ni){if(!Z){ct=new Error("Missing initPTS for VTT MPEGTS");return}ei=ni-ee.presentationOffset}const ri=ut.endTime-ut.startTime,si=normalizePts((ut.startTime+ei-lt)*9e4,ye*9e4)/9e4;ut.startTime=Math.max(si,0),ut.endTime=Math.max(si+ri,0);const li=ut.text.trim();ut.text=decodeURIComponent(encodeURIComponent(li)),ut.id||(ut.id=generateCueId(ut.startTime,ut.endTime,li)),ut.endTime>0&&Je.push(ut)},Qe.onparsingerror=function(ut){ct=ut},Qe.onflush=function(){if(ct){be(ct);return}ve(Je)},Xe.forEach(ut=>{if(gt)if(startsWith(ut,"X-TIMESTAMP-MAP=")){gt=!1,ut.slice(16).split(",").forEach(mt=>{startsWith(mt,"LOCAL:")?it=mt.slice(6):startsWith(mt,"MPEGTS:")&&(st=parseInt(mt.slice(7)))});try{lt=cueString2millis(it)/1e3}catch(mt){ct=mt}return}else ut===""&&(gt=!1);Qe.parse(ut+`
`)}),Qe.flush()}const IMSC1_CODEC="stpp.ttml.im1t",HMSF_REGEX=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,TIME_UNIT_REGEX=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,textAlignToLineAlign={left:"start",center:"center",right:"end",start:"start",end:"end"};function parseIMSC1(ie,Z,ee,ae){const ye=findBox(new Uint8Array(ie),["mdat"]);if(ye.length===0){ae(new Error("Could not parse IMSC1 mdat"));return}const ve=ye.map(Qe=>utf8ArrayToStr(Qe)),be=toTimescaleFromScale(Z.baseTime,1,Z.timescale);try{ve.forEach(Qe=>ee(parseTTML(Qe,be)))}catch(Qe){ae(Qe)}}function parseTTML(ie,Z){const ye=new DOMParser().parseFromString(ie,"text/xml").getElementsByTagName("tt")[0];if(!ye)throw new Error("Invalid ttml");const ve={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},be=Object.keys(ve).reduce((it,st)=>(it[st]=ye.getAttribute(`ttp:${st}`)||ve[st],it),{}),Qe=ye.getAttribute("xml:space")!=="preserve",Xe=collectionToDictionary(getElementCollection(ye,"styling","style")),Je=collectionToDictionary(getElementCollection(ye,"layout","region")),tt=getElementCollection(ye,"body","[begin]");return[].map.call(tt,it=>{const st=getTextContent(it,Qe);if(!st||!it.hasAttribute("begin"))return null;const lt=parseTtmlTime(it.getAttribute("begin"),be),ct=parseTtmlTime(it.getAttribute("dur"),be);let gt=parseTtmlTime(it.getAttribute("end"),be);if(lt===null)throw timestampParsingError(it);if(gt===null){if(ct===null)throw timestampParsingError(it);gt=lt+ct}const ut=new VTTCue(lt-Z,gt-Z,st);ut.id=generateCueId(ut.startTime,ut.endTime,ut.text);const mt=Je[it.getAttribute("region")],ei=Xe[it.getAttribute("style")],ni=getTtmlStyles(mt,ei,Xe),{textAlign:ri}=ni;if(ri){const si=textAlignToLineAlign[ri];si&&(ut.lineAlign=si),ut.align=ri}return _extends(ut,ni),ut}).filter(it=>it!==null)}function getElementCollection(ie,Z,ee){const ae=ie.getElementsByTagName(Z)[0];return ae?[].slice.call(ae.querySelectorAll(ee)):[]}function collectionToDictionary(ie){return ie.reduce((Z,ee)=>{const ae=ee.getAttribute("xml:id");return ae&&(Z[ae]=ee),Z},{})}function getTextContent(ie,Z){return[].slice.call(ie.childNodes).reduce((ee,ae,ye)=>{var ve;return ae.nodeName==="br"&&ye?ee+`
`:(ve=ae.childNodes)!=null&&ve.length?getTextContent(ae,Z):Z?ee+ae.textContent.trim().replace(/\s+/g," "):ee+ae.textContent},"")}function getTtmlStyles(ie,Z,ee){const ae="http://www.w3.org/ns/ttml#styling";let ye=null;const ve=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],be=ie!=null&&ie.hasAttribute("style")?ie.getAttribute("style"):null;return be&&ee.hasOwnProperty(be)&&(ye=ee[be]),ve.reduce((Qe,Xe)=>{const Je=getAttributeNS(Z,ae,Xe)||getAttributeNS(ie,ae,Xe)||getAttributeNS(ye,ae,Xe);return Je&&(Qe[Xe]=Je),Qe},{})}function getAttributeNS(ie,Z,ee){return ie&&ie.hasAttributeNS(Z,ee)?ie.getAttributeNS(Z,ee):null}function timestampParsingError(ie){return new Error(`Could not parse ttml timestamp ${ie}`)}function parseTtmlTime(ie,Z){if(!ie)return null;let ee=parseTimeStamp(ie);return ee===null&&(HMSF_REGEX.test(ie)?ee=parseHoursMinutesSecondsFrames(ie,Z):TIME_UNIT_REGEX.test(ie)&&(ee=parseTimeUnits(ie,Z))),ee}function parseHoursMinutesSecondsFrames(ie,Z){const ee=HMSF_REGEX.exec(ie),ae=(ee[4]|0)+(ee[5]|0)/Z.subFrameRate;return(ee[1]|0)*3600+(ee[2]|0)*60+(ee[3]|0)+ae/Z.frameRate}function parseTimeUnits(ie,Z){const ee=TIME_UNIT_REGEX.exec(ie),ae=Number(ee[1]);switch(ee[2]){case"h":return ae*3600;case"m":return ae*60;case"ms":return ae*1e3;case"f":return ae/Z.frameRate;case"t":return ae/Z.tickRate}return ae}class TimelineController{constructor(Z){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this.captionsProperties=void 0,this.hls=Z,this.config=Z.config,this.Cues=Z.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},Z.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Z.on(Events.FRAG_LOADING,this.onFragLoading,this),Z.on(Events.FRAG_LOADED,this.onFragLoaded,this),Z.on(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),Z.on(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),Z.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Z.on(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),Z.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:Z}=this;Z.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Z.off(Events.FRAG_LOADING,this.onFragLoading,this),Z.off(Events.FRAG_LOADED,this.onFragLoaded,this),Z.off(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),Z.off(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),Z.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Z.off(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),Z.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const Z=new OutputFilter(this,"textTrack1"),ee=new OutputFilter(this,"textTrack2"),ae=new OutputFilter(this,"textTrack3"),ye=new OutputFilter(this,"textTrack4");this.cea608Parser1=new Cea608Parser(1,Z,ee),this.cea608Parser2=new Cea608Parser(3,ae,ye)}}addCues(Z,ee,ae,ye,ve){let be=!1;for(let Qe=ve.length;Qe--;){const Xe=ve[Qe],Je=intersection(Xe[0],Xe[1],ee,ae);if(Je>=0&&(Xe[0]=Math.min(Xe[0],ee),Xe[1]=Math.max(Xe[1],ae),be=!0,Je/(ae-ee)>.5))return}if(be||ve.push([ee,ae]),this.config.renderTextTracksNatively){const Qe=this.captionsTracks[Z];this.Cues.newCue(Qe,ee,ae,ye)}else{const Qe=this.Cues.newCue(null,ee,ae,ye);this.hls.trigger(Events.CUES_PARSED,{type:"captions",cues:Qe,track:Z})}}onInitPtsFound(Z,{frag:ee,id:ae,initPTS:ye,timescale:ve}){const{unparsedVttFrags:be}=this;ae==="main"&&(this.initPTS[ee.cc]={baseTime:ye,timescale:ve}),be.length&&(this.unparsedVttFrags=[],be.forEach(Qe=>{this.onFragLoaded(Events.FRAG_LOADED,Qe)}))}getExistingTrack(Z,ee){const{media:ae}=this;if(ae)for(let ye=0;ye<ae.textTracks.length;ye++){const ve=ae.textTracks[ye];if(canReuseVttTextTrack(ve,{name:Z,lang:ee,attrs:{}}))return ve}return null}createCaptionsTrack(Z){this.config.renderTextTracksNatively?this.createNativeTrack(Z):this.createNonNativeTrack(Z)}createNativeTrack(Z){if(this.captionsTracks[Z])return;const{captionsProperties:ee,captionsTracks:ae,media:ye}=this,{label:ve,languageCode:be}=ee[Z],Qe=this.getExistingTrack(ve,be);if(Qe)ae[Z]=Qe,clearCurrentCues(ae[Z]),sendAddTrackEvent(ae[Z],ye);else{const Xe=this.createTextTrack("captions",ve,be);Xe&&(Xe[Z]=!0,ae[Z]=Xe)}}createNonNativeTrack(Z){if(this.nonNativeCaptionsTracks[Z])return;const ee=this.captionsProperties[Z];if(!ee)return;const ae=ee.label,ye={_id:Z,label:ae,kind:"captions",default:ee.media?!!ee.media.default:!1,closedCaptions:ee.media};this.nonNativeCaptionsTracks[Z]=ye,this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[ye]})}createTextTrack(Z,ee,ae){const ye=this.media;if(ye)return ye.addTextTrack(Z,ee,ae)}onMediaAttaching(Z,ee){this.media=ee.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:Z}=this;Object.keys(Z).forEach(ee=>{clearCurrentCues(Z[ee]),delete Z[ee]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:Z}=this;if(!Z)return;const ee=Z.textTracks;if(ee)for(let ae=0;ae<ee.length;ae++)clearCurrentCues(ee[ae])}onSubtitleTracksUpdated(Z,ee){const ae=ee.subtitleTracks||[],ye=ae.some(ve=>ve.textCodec===IMSC1_CODEC);if(this.config.enableWebVTT||ye&&this.config.enableIMSC1){if(subtitleOptionsIdentical(this.tracks,ae)){this.tracks=ae;return}if(this.textTracks=[],this.tracks=ae,this.config.renderTextTracksNatively){const be=this.media,Qe=be?filterSubtitleTracks(be.textTracks):null;if(this.tracks.forEach((Xe,Je)=>{let tt;if(Qe){let it=null;for(let st=0;st<Qe.length;st++)if(Qe[st]&&canReuseVttTextTrack(Qe[st],Xe)){it=Qe[st],Qe[st]=null;break}it&&(tt=it)}if(tt)clearCurrentCues(tt);else{const it=captionsOrSubtitlesFromCharacteristics(Xe);tt=this.createTextTrack(it,Xe.name,Xe.lang),tt&&(tt.mode="disabled")}tt&&this.textTracks.push(tt)}),Qe!=null&&Qe.length){const Xe=Qe.filter(Je=>Je!==null).map(Je=>Je.label);Xe.length&&logger.warn(`Media element contains unused subtitle tracks: ${Xe.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const be=this.tracks.map(Qe=>({label:Qe.name,kind:Qe.type.toLowerCase(),default:Qe.default,subtitleTrack:Qe}));this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:be})}}}onManifestLoaded(Z,ee){this.config.enableCEA708Captions&&ee.captions&&ee.captions.forEach(ae=>{const ye=/(?:CC|SERVICE)([1-4])/.exec(ae.instreamId);if(!ye)return;const ve=`textTrack${ye[1]}`,be=this.captionsProperties[ve];be&&(be.label=ae.name,ae.lang&&(be.languageCode=ae.lang),be.media=ae)})}closedCaptionsForLevel(Z){const ee=this.hls.levels[Z.level];return ee==null?void 0:ee.attrs["CLOSED-CAPTIONS"]}onFragLoading(Z,ee){this.initCea608Parsers();const{cea608Parser1:ae,cea608Parser2:ye,lastCc:ve,lastSn:be,lastPartIndex:Qe}=this;if(!(!this.enabled||!ae||!ye)&&ee.frag.type===PlaylistLevelType.MAIN){var Xe,Je;const{cc:tt,sn:it}=ee.frag,st=(Xe=ee==null||(Je=ee.part)==null?void 0:Je.index)!=null?Xe:-1;it===be+1||it===be&&st===Qe+1||tt===ve||(ae.reset(),ye.reset()),this.lastCc=tt,this.lastSn=it,this.lastPartIndex=st}}onFragLoaded(Z,ee){const{frag:ae,payload:ye}=ee;if(ae.type===PlaylistLevelType.SUBTITLE)if(ye.byteLength){const ve=ae.decryptdata,be="stats"in ee;if(ve==null||!ve.encrypted||be){const Qe=this.tracks[ae.level],Xe=this.vttCCs;Xe[ae.cc]||(Xe[ae.cc]={start:ae.start,prevCC:this.prevCC,new:!0},this.prevCC=ae.cc),Qe&&Qe.textCodec===IMSC1_CODEC?this._parseIMSC1(ae,ye):this._parseVTTs(ee)}}else this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:ae,error:new Error("Empty subtitle payload")})}_parseIMSC1(Z,ee){const ae=this.hls;parseIMSC1(ee,this.initPTS[Z.cc],ye=>{this._appendCues(ye,Z.level),ae.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:Z})},ye=>{logger.log(`Failed to parse IMSC1: ${ye}`),ae.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Z,error:ye})})}_parseVTTs(Z){var ee;const{frag:ae,payload:ye}=Z,{initPTS:ve,unparsedVttFrags:be}=this,Qe=ve.length-1;if(!ve[ae.cc]&&Qe===-1){be.push(Z);return}const Xe=this.hls,Je=(ee=ae.initSegment)!=null&&ee.data?appendUint8Array(ae.initSegment.data,new Uint8Array(ye)):ye;parseWebVTT(Je,this.initPTS[ae.cc],this.vttCCs,ae.cc,ae.start,tt=>{this._appendCues(tt,ae.level),Xe.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:ae})},tt=>{const it=tt.message==="Missing initPTS for VTT MPEGTS";it?be.push(Z):this._fallbackToIMSC1(ae,ye),logger.log(`Failed to parse VTT cue: ${tt}`),!(it&&Qe>ae.cc)&&Xe.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:ae,error:tt})})}_fallbackToIMSC1(Z,ee){const ae=this.tracks[Z.level];ae.textCodec||parseIMSC1(ee,this.initPTS[Z.cc],()=>{ae.textCodec=IMSC1_CODEC,this._parseIMSC1(Z,ee)},()=>{ae.textCodec="wvtt"})}_appendCues(Z,ee){const ae=this.hls;if(this.config.renderTextTracksNatively){const ye=this.textTracks[ee];if(!ye||ye.mode==="disabled")return;Z.forEach(ve=>addCueToTrack(ye,ve))}else{const ye=this.tracks[ee];if(!ye)return;const ve=ye.default?"default":"subtitles"+ee;ae.trigger(Events.CUES_PARSED,{type:"subtitles",cues:Z,track:ve})}}onFragDecrypted(Z,ee){const{frag:ae}=ee;ae.type===PlaylistLevelType.SUBTITLE&&this.onFragLoaded(Events.FRAG_LOADED,ee)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(Z,ee){this.initCea608Parsers();const{cea608Parser1:ae,cea608Parser2:ye}=this;if(!this.enabled||!ae||!ye)return;const{frag:ve,samples:be}=ee;if(!(ve.type===PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(ve)==="NONE"))for(let Qe=0;Qe<be.length;Qe++){const Xe=be[Qe].bytes;if(Xe){const Je=this.extractCea608Data(Xe);ae.addData(be[Qe].pts,Je[0]),ye.addData(be[Qe].pts,Je[1])}}}onBufferFlushing(Z,{startOffset:ee,endOffset:ae,endOffsetSubtitles:ye,type:ve}){const{media:be}=this;if(!(!be||be.currentTime<ae)){if(!ve||ve==="video"){const{captionsTracks:Qe}=this;Object.keys(Qe).forEach(Xe=>removeCuesInRange(Qe[Xe],ee,ae))}if(this.config.renderTextTracksNatively&&ee===0&&ye!==void 0){const{textTracks:Qe}=this;Object.keys(Qe).forEach(Xe=>removeCuesInRange(Qe[Xe],ee,ye))}}}extractCea608Data(Z){const ee=[[],[]],ae=Z[0]&31;let ye=2;for(let ve=0;ve<ae;ve++){const be=Z[ye++],Qe=127&Z[ye++],Xe=127&Z[ye++];if(Qe===0&&Xe===0)continue;if((4&be)!==0){const tt=3&be;(tt===0||tt===1)&&(ee[tt].push(Qe),ee[tt].push(Xe))}}return ee}}function captionsOrSubtitlesFromCharacteristics(ie){return ie.characteristics&&/transcribes-spoken-dialog/gi.test(ie.characteristics)&&/describes-music-and-sound/gi.test(ie.characteristics)?"captions":"subtitles"}function canReuseVttTextTrack(ie,Z){return!!ie&&ie.kind===captionsOrSubtitlesFromCharacteristics(Z)&&subtitleTrackMatchesTextTrack(Z,ie)}function intersection(ie,Z,ee,ae){return Math.min(Z,ae)-Math.max(ie,ee)}function newVTTCCs(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class CapLevelController{constructor(Z){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=Z,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(Z){this.streamController=Z}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:Z}=this;Z.on(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Z.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Z.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:Z}=this;Z.off(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Z.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Z.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(Z,ee){const ae=this.hls.levels[ee.droppedLevel];this.isLevelAllowed(ae)&&this.restrictedLevels.push({bitrate:ae.bitrate,height:ae.height,width:ae.width})}onMediaAttaching(Z,ee){this.media=ee.media instanceof HTMLVideoElement?ee.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(Z,ee){const ae=this.hls;this.restrictedLevels=[],this.firstLevel=ee.firstLevel,ae.config.capLevelToPlayerSize&&ee.video&&this.startCapping()}onLevelsUpdated(Z,ee){this.timer&&isFiniteNumber(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(Z,ee){this.hls.config.capLevelToPlayerSize&&ee.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const Z=this.hls.levels;if(Z.length){const ee=this.hls,ae=this.getMaxLevel(Z.length-1);ae!==this.autoLevelCapping&&logger.log(`Setting autoLevelCapping to ${ae}: ${Z[ae].height}p@${Z[ae].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),ee.autoLevelCapping=ae,ee.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=ee.autoLevelCapping}}}getMaxLevel(Z){const ee=this.hls.levels;if(!ee.length)return-1;const ae=ee.filter((ye,ve)=>this.isLevelAllowed(ye)&&ve<=Z);return this.clientRect=null,CapLevelController.getMaxLevelByMediaSize(ae,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const Z=this.media,ee={width:0,height:0};if(Z){const ae=Z.getBoundingClientRect();ee.width=ae.width,ee.height=ae.height,!ee.width&&!ee.height&&(ee.width=ae.right-ae.left||Z.width||0,ee.height=ae.bottom-ae.top||Z.height||0)}return this.clientRect=ee,ee}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let Z=1;if(!this.hls.config.ignoreDevicePixelRatio)try{Z=self.devicePixelRatio}catch{}return Z}isLevelAllowed(Z){return!this.restrictedLevels.some(ae=>Z.bitrate===ae.bitrate&&Z.width===ae.width&&Z.height===ae.height)}static getMaxLevelByMediaSize(Z,ee,ae){if(!(Z!=null&&Z.length))return-1;const ye=(Qe,Xe)=>Xe?Qe.width!==Xe.width||Qe.height!==Xe.height:!0;let ve=Z.length-1;const be=Math.max(ee,ae);for(let Qe=0;Qe<Z.length;Qe+=1){const Xe=Z[Qe];if((Xe.width>=be||Xe.height>=be)&&ye(Xe,Z[Qe+1])){ve=Qe;break}}return ve}}class FPSController{constructor(Z){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=Z,this.registerListeners()}setStreamController(Z){this.streamController=Z}registerListeners(){this.hls.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(Z,ee){const ae=this.hls.config;if(ae.capLevelOnFPSDrop){const ye=ee.media instanceof self.HTMLVideoElement?ee.media:null;this.media=ye,ye&&typeof ye.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),ae.fpsDroppedMonitoringPeriod)}}checkFPS(Z,ee,ae){const ye=performance.now();if(ee){if(this.lastTime){const ve=ye-this.lastTime,be=ae-this.lastDroppedFrames,Qe=ee-this.lastDecodedFrames,Xe=1e3*be/ve,Je=this.hls;if(Je.trigger(Events.FPS_DROP,{currentDropped:be,currentDecoded:Qe,totalDroppedFrames:ae}),Xe>0&&be>Je.config.fpsDroppedMonitoringThreshold*Qe){let tt=Je.currentLevel;logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+tt),tt>0&&(Je.autoLevelCapping===-1||Je.autoLevelCapping>=tt)&&(tt=tt-1,Je.trigger(Events.FPS_DROP_LEVEL_CAPPING,{level:tt,droppedLevel:Je.currentLevel}),Je.autoLevelCapping=tt,this.streamController.nextLevelSwitch())}}this.lastTime=ye,this.lastDroppedFrames=ae,this.lastDecodedFrames=ee}}checkFPSInterval(){const Z=this.media;if(Z)if(this.isVideoPlaybackQualityAvailable){const ee=Z.getVideoPlaybackQuality();this.checkFPS(Z,ee.totalVideoFrames,ee.droppedVideoFrames)}else this.checkFPS(Z,Z.webkitDecodedFrameCount,Z.webkitDroppedFrameCount)}}const LOGGER_PREFIX="[eme]";class EMEController{constructor(Z){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=EMEController.CDMCleanupPromise?[EMEController.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=logger.debug.bind(logger,LOGGER_PREFIX),this.log=logger.log.bind(logger,LOGGER_PREFIX),this.warn=logger.warn.bind(logger,LOGGER_PREFIX),this.error=logger.error.bind(logger,LOGGER_PREFIX),this.hls=Z,this.config=Z.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const Z=this.config;Z.requestMediaKeySystemAccessFunc=null,Z.licenseXhrSetup=Z.licenseResponseCallback=void 0,Z.drmSystems=Z.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(Z){const{drmSystems:ee,widevineLicenseUrl:ae}=this.config,ye=ee[Z];if(ye)return ye.licenseUrl;if(Z===KeySystems.WIDEVINE&&ae)return ae;throw new Error(`no license server URL configured for key-system "${Z}"`)}getServerCertificateUrl(Z){const{drmSystems:ee}=this.config,ae=ee[Z];if(ae)return ae.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${Z}"]`)}attemptKeySystemAccess(Z){const ee=this.hls.levels,ae=(be,Qe,Xe)=>!!be&&Xe.indexOf(be)===Qe,ye=ee.map(be=>be.audioCodec).filter(ae),ve=ee.map(be=>be.videoCodec).filter(ae);return ye.length+ve.length===0&&ve.push("avc1.42e01e"),new Promise((be,Qe)=>{const Xe=Je=>{const tt=Je.shift();this.getMediaKeysPromise(tt,ye,ve).then(it=>be({keySystem:tt,mediaKeys:it})).catch(it=>{Je.length?Xe(Je):it instanceof EMEKeyError?Qe(it):Qe(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:it,fatal:!0},it.message))})};Xe(Z)})}requestMediaKeySystemAccess(Z,ee){const{requestMediaKeySystemAccessFunc:ae}=this.config;if(typeof ae!="function"){let ye=`Configured requestMediaKeySystemAccess is not a function ${ae}`;return requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(ye=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(ye))}return ae(Z,ee)}getMediaKeysPromise(Z,ee,ae){const ye=getSupportedMediaKeySystemConfigurations(Z,ee,ae,this.config.drmSystemOptions),ve=this.keySystemAccessPromises[Z];let be=ve==null?void 0:ve.keySystemAccess;if(!be){this.log(`Requesting encrypted media "${Z}" key-system access with config: ${JSON.stringify(ye)}`),be=this.requestMediaKeySystemAccess(Z,ye);const Qe=this.keySystemAccessPromises[Z]={keySystemAccess:be};return be.catch(Xe=>{this.log(`Failed to obtain access to key-system "${Z}": ${Xe}`)}),be.then(Xe=>{this.log(`Access for key-system "${Xe.keySystem}" obtained`);const Je=this.fetchServerCertificate(Z);return this.log(`Create media-keys for "${Z}"`),Qe.mediaKeys=Xe.createMediaKeys().then(tt=>(this.log(`Media-keys created for "${Z}"`),Je.then(it=>it?this.setMediaKeysServerCertificate(tt,Z,it):tt))),Qe.mediaKeys.catch(tt=>{this.error(`Failed to create media-keys for "${Z}"}: ${tt}`)}),Qe.mediaKeys})}return be.then(()=>ve.mediaKeys)}createMediaKeySessionContext({decryptdata:Z,keySystem:ee,mediaKeys:ae}){this.log(`Creating key-system session "${ee}" keyId: ${Hex.hexDump(Z.keyId||[])}`);const ye=ae.createSession(),ve={decryptdata:Z,keySystem:ee,mediaKeys:ae,mediaKeysSession:ye,keyStatus:"status-pending"};return this.mediaKeySessions.push(ve),ve}renewKeySession(Z){const ee=Z.decryptdata;if(ee.pssh){const ae=this.createMediaKeySessionContext(Z),ye=this.getKeyIdString(ee),ve="cenc";this.keyIdToKeySessionPromise[ye]=this.generateRequestWithPreferredKeySession(ae,ve,ee.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(Z)}getKeyIdString(Z){if(!Z)throw new Error("Could not read keyId of undefined decryptdata");if(Z.keyId===null)throw new Error("keyId is null");return Hex.hexDump(Z.keyId)}updateKeySession(Z,ee){var ae;const ye=Z.mediaKeysSession;return this.log(`Updating key-session "${ye.sessionId}" for keyID ${Hex.hexDump(((ae=Z.decryptdata)==null?void 0:ae.keyId)||[])}
      } (data length: ${ee&&ee.byteLength})`),ye.update(ee)}selectKeySystemFormat(Z){const ee=Object.keys(Z.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${Z.sn} ${Z.type}: ${Z.level}) key formats ${ee.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(ee)),this.keyFormatPromise}getKeyFormatPromise(Z){return new Promise((ee,ae)=>{const ye=getKeySystemsForConfig(this.config),ve=Z.map(keySystemFormatToKeySystemDomain).filter(be=>!!be&&ye.indexOf(be)!==-1);return this.getKeySystemSelectionPromise(ve).then(({keySystem:be})=>{const Qe=keySystemDomainToKeySystemFormat(be);Qe?ee(Qe):ae(new Error(`Unable to find format for key-system "${be}"`))}).catch(ae)})}loadKey(Z){const ee=Z.keyInfo.decryptdata,ae=this.getKeyIdString(ee),ye=`(keyId: ${ae} format: "${ee.keyFormat}" method: ${ee.method} uri: ${ee.uri})`;this.log(`Starting session for key ${ye}`);let ve=this.keyIdToKeySessionPromise[ae];return ve||(ve=this.keyIdToKeySessionPromise[ae]=this.getKeySystemForKeyPromise(ee).then(({keySystem:be,mediaKeys:Qe})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${Z.frag.sn} ${Z.frag.type}: ${Z.frag.level} using key ${ye}`),this.attemptSetMediaKeys(be,Qe).then(()=>{this.throwIfDestroyed();const Xe=this.createMediaKeySessionContext({keySystem:be,mediaKeys:Qe,decryptdata:ee});return this.generateRequestWithPreferredKeySession(Xe,"cenc",ee.pssh,"playlist-key")}))),ve.catch(be=>this.handleError(be))),ve}throwIfDestroyed(Z="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(Z){this.hls&&(this.error(Z.message),Z instanceof EMEKeyError?this.hls.trigger(Events.ERROR,Z.data):this.hls.trigger(Events.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,error:Z,fatal:!0}))}getKeySystemForKeyPromise(Z){const ee=this.getKeyIdString(Z),ae=this.keyIdToKeySessionPromise[ee];if(!ae){const ye=keySystemFormatToKeySystemDomain(Z.keyFormat),ve=ye?[ye]:getKeySystemsForConfig(this.config);return this.attemptKeySystemAccess(ve)}return ae}getKeySystemSelectionPromise(Z){if(Z.length||(Z=getKeySystemsForConfig(this.config)),Z.length===0)throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(Z)}_onMediaEncrypted(Z){const{initDataType:ee,initData:ae}=Z;if(this.debug(`"${Z.type}" event: init data type: "${ee}"`),ae===null)return;let ye,ve;if(ee==="sinf"&&this.config.drmSystems[KeySystems.FAIRPLAY]){const tt=bin2str(new Uint8Array(ae));try{const it=base64Decode(JSON.parse(tt).sinf),st=parseSinf(new Uint8Array(it));if(!st)return;ye=st.subarray(8,24),ve=KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const tt=parsePssh(ae);if(tt===null)return;tt.version===0&&tt.systemId===KeySystemIds.WIDEVINE&&tt.data&&(ye=tt.data.subarray(8,24)),ve=keySystemIdToKeySystemDomain(tt.systemId)}if(!ve||!ye)return;const be=Hex.hexDump(ye),{keyIdToKeySessionPromise:Qe,mediaKeySessions:Xe}=this;let Je=Qe[be];for(let tt=0;tt<Xe.length;tt++){const it=Xe[tt],st=it.decryptdata;if(st.pssh||!st.keyId)continue;const lt=Hex.hexDump(st.keyId);if(be===lt||st.uri.replace(/-/g,"").indexOf(be)!==-1){Je=Qe[lt],delete Qe[lt],st.pssh=new Uint8Array(ae),st.keyId=ye,Je=Qe[be]=Je.then(()=>this.generateRequestWithPreferredKeySession(it,ee,ae,"encrypted-event-key-match"));break}}Je||(Je=Qe[be]=this.getKeySystemSelectionPromise([ve]).then(({keySystem:tt,mediaKeys:it})=>{var st;this.throwIfDestroyed();const lt=new LevelKey("ISO-23001-7",be,(st=keySystemDomainToKeySystemFormat(tt))!=null?st:"");return lt.pssh=new Uint8Array(ae),lt.keyId=ye,this.attemptSetMediaKeys(tt,it).then(()=>{this.throwIfDestroyed();const ct=this.createMediaKeySessionContext({decryptdata:lt,keySystem:tt,mediaKeys:it});return this.generateRequestWithPreferredKeySession(ct,ee,ae,"encrypted-event-no-match")})})),Je.catch(tt=>this.handleError(tt))}_onWaitingForKey(Z){this.log(`"${Z.type}" event`)}attemptSetMediaKeys(Z,ee){const ae=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${Z}"`);const ye=Promise.all(ae).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(ee)});return this.setMediaKeysQueue.push(ye),ye.then(()=>{this.log(`Media-keys set for "${Z}"`),ae.push(ye),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(ve=>ae.indexOf(ve)===-1)})}generateRequestWithPreferredKeySession(Z,ee,ae,ye){var ve,be;const Qe=(ve=this.config.drmSystems)==null||(be=ve[Z.keySystem])==null?void 0:be.generateRequest;if(Qe)try{const ct=Qe.call(this.hls,ee,ae,Z);if(!ct)throw new Error("Invalid response from configured generateRequest filter");ee=ct.initDataType,ae=Z.decryptdata.pssh=ct.initData?new Uint8Array(ct.initData):null}catch(ct){var Xe;if(this.warn(ct.message),(Xe=this.hls)!=null&&Xe.config.debug)throw ct}if(ae===null)return this.log(`Skipping key-session request for "${ye}" (no initData)`),Promise.resolve(Z);const Je=this.getKeyIdString(Z.decryptdata);this.log(`Generating key-session request for "${ye}": ${Je} (init data type: ${ee} length: ${ae?ae.byteLength:null})`);const tt=new EventEmitter,it=Z._onmessage=ct=>{const gt=Z.mediaKeysSession;if(!gt){tt.emit("error",new Error("invalid state"));return}const{messageType:ut,message:mt}=ct;this.log(`"${ut}" message event for session "${gt.sessionId}" message size: ${mt.byteLength}`),ut==="license-request"||ut==="license-renewal"?this.renewLicense(Z,mt).catch(ei=>{this.handleError(ei),tt.emit("error",ei)}):ut==="license-release"?Z.keySystem===KeySystems.FAIRPLAY&&(this.updateKeySession(Z,strToUtf8array("acknowledged")),this.removeSession(Z)):this.warn(`unhandled media key message type "${ut}"`)},st=Z._onkeystatuseschange=ct=>{if(!Z.mediaKeysSession){tt.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(Z);const ut=Z.keyStatus;tt.emit("keyStatus",ut),ut==="expired"&&(this.warn(`${Z.keySystem} expired for key ${Je}`),this.renewKeySession(Z))};Z.mediaKeysSession.addEventListener("message",it),Z.mediaKeysSession.addEventListener("keystatuseschange",st);const lt=new Promise((ct,gt)=>{tt.on("error",gt),tt.on("keyStatus",ut=>{ut.startsWith("usable")?ct():ut==="output-restricted"?gt(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):ut==="internal-error"?gt(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${ut}"`)):ut==="expired"?gt(new Error("key expired while generating request")):this.warn(`unhandled key status change "${ut}"`)})});return Z.mediaKeysSession.generateRequest(ee,ae).then(()=>{var ct;this.log(`Request generated for key-session "${(ct=Z.mediaKeysSession)==null?void 0:ct.sessionId}" keyId: ${Je}`)}).catch(ct=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_SESSION,error:ct,fatal:!1},`Error generating key-session request: ${ct}`)}).then(()=>lt).catch(ct=>{throw tt.removeAllListeners(),this.removeSession(Z),ct}).then(()=>(tt.removeAllListeners(),Z))}onKeyStatusChange(Z){Z.mediaKeysSession.keyStatuses.forEach((ee,ae)=>{this.log(`key status change "${ee}" for keyStatuses keyId: ${Hex.hexDump("buffer"in ae?new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength):new Uint8Array(ae))} session keyId: ${Hex.hexDump(new Uint8Array(Z.decryptdata.keyId||[]))} uri: ${Z.decryptdata.uri}`),Z.keyStatus=ee})}fetchServerCertificate(Z){const ee=this.config,ae=ee.loader,ye=new ae(ee),ve=this.getServerCertificateUrl(Z);return ve?(this.log(`Fetching server certificate for "${Z}"`),new Promise((be,Qe)=>{const Xe={responseType:"arraybuffer",url:ve},Je=ee.certLoadPolicy.default,tt={loadPolicy:Je,timeout:Je.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},it={onSuccess:(st,lt,ct,gt)=>{be(st.data)},onError:(st,lt,ct,gt)=>{Qe(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:ct,response:_objectSpread2({url:Xe.url,data:void 0},st)},`"${Z}" certificate request failed (${ve}). Status: ${st.code} (${st.text})`))},onTimeout:(st,lt,ct)=>{Qe(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:ct,response:{url:Xe.url,data:void 0}},`"${Z}" certificate request timed out (${ve})`))},onAbort:(st,lt,ct)=>{Qe(new Error("aborted"))}};ye.load(Xe,tt,it)})):Promise.resolve()}setMediaKeysServerCertificate(Z,ee,ae){return new Promise((ye,ve)=>{Z.setServerCertificate(ae).then(be=>{this.log(`setServerCertificate ${be?"success":"not supported by CDM"} (${ae==null?void 0:ae.byteLength}) on "${ee}"`),ye(Z)}).catch(be=>{ve(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:be,fatal:!0},be.message))})})}renewLicense(Z,ee){return this.requestLicense(Z,new Uint8Array(ee)).then(ae=>this.updateKeySession(Z,new Uint8Array(ae)).catch(ye=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:ye,fatal:!0},ye.message)}))}unpackPlayReadyKeyMessage(Z,ee){const ae=String.fromCharCode.apply(null,new Uint16Array(ee.buffer));if(!ae.includes("PlayReadyKeyMessage"))return Z.setRequestHeader("Content-Type","text/xml; charset=utf-8"),ee;const ye=new DOMParser().parseFromString(ae,"application/xml"),ve=ye.querySelectorAll("HttpHeader");if(ve.length>0){let tt;for(let it=0,st=ve.length;it<st;it++){var be,Qe;tt=ve[it];const lt=(be=tt.querySelector("name"))==null?void 0:be.textContent,ct=(Qe=tt.querySelector("value"))==null?void 0:Qe.textContent;lt&&ct&&Z.setRequestHeader(lt,ct)}}const Xe=ye.querySelector("Challenge"),Je=Xe==null?void 0:Xe.textContent;if(!Je)throw new Error("Cannot find <Challenge> in key message");return strToUtf8array(atob(Je))}setupLicenseXHR(Z,ee,ae,ye){const ve=this.config.licenseXhrSetup;return ve?Promise.resolve().then(()=>{if(!ae.decryptdata)throw new Error("Key removed");return ve.call(this.hls,Z,ee,ae,ye)}).catch(be=>{if(!ae.decryptdata)throw be;return Z.open("POST",ee,!0),ve.call(this.hls,Z,ee,ae,ye)}).then(be=>(Z.readyState||Z.open("POST",ee,!0),{xhr:Z,licenseChallenge:be||ye})):(Z.open("POST",ee,!0),Promise.resolve({xhr:Z,licenseChallenge:ye}))}requestLicense(Z,ee){const ae=this.config.keyLoadPolicy.default;return new Promise((ye,ve)=>{const be=this.getLicenseServerUrl(Z.keySystem);this.log(`Sending license request to URL: ${be}`);const Qe=new XMLHttpRequest;Qe.responseType="arraybuffer",Qe.onreadystatechange=()=>{if(!this.hls||!Z.mediaKeysSession)return ve(new Error("invalid state"));if(Qe.readyState===4)if(Qe.status===200){this._requestLicenseFailureCount=0;let Xe=Qe.response;this.log(`License received ${Xe instanceof ArrayBuffer?Xe.byteLength:Xe}`);const Je=this.config.licenseResponseCallback;if(Je)try{Xe=Je.call(this.hls,Qe,be,Z)}catch(tt){this.error(tt)}ye(Xe)}else{const Xe=ae.errorRetry,Je=Xe?Xe.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>Je||Qe.status>=400&&Qe.status<500)ve(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:Qe,response:{url:be,data:void 0,code:Qe.status,text:Qe.statusText}},`License Request XHR failed (${be}). Status: ${Qe.status} (${Qe.statusText})`));else{const tt=Je-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${tt} attempts left`),this.requestLicense(Z,ee).then(ye,ve)}}},Z.licenseXhr&&Z.licenseXhr.readyState!==XMLHttpRequest.DONE&&Z.licenseXhr.abort(),Z.licenseXhr=Qe,this.setupLicenseXHR(Qe,be,Z,ee).then(({xhr:Xe,licenseChallenge:Je})=>{Z.keySystem==KeySystems.PLAYREADY&&(Je=this.unpackPlayReadyKeyMessage(Xe,Je)),Xe.send(Je)})})}onMediaAttached(Z,ee){if(!this.config.emeEnabled)return;const ae=ee.media;this.media=ae,ae.addEventListener("encrypted",this.onMediaEncrypted),ae.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const Z=this.media,ee=this.mediaKeySessions;Z&&(Z.removeEventListener("encrypted",this.onMediaEncrypted),Z.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},LevelKey.clearKeyUriToKeyIdMap();const ae=ee.length;EMEController.CDMCleanupPromise=Promise.all(ee.map(ye=>this.removeSession(ye)).concat(Z==null?void 0:Z.setMediaKeys(null).catch(ye=>{this.log(`Could not clear media keys: ${ye}`)}))).then(()=>{ae&&(this.log("finished closing key sessions and clearing media keys"),ee.length=0)}).catch(ye=>{this.log(`Could not close sessions and clear media keys: ${ye}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(Z,{sessionKeys:ee}){if(!(!ee||!this.config.emeEnabled)&&!this.keyFormatPromise){const ae=ee.reduce((ye,ve)=>(ye.indexOf(ve.keyFormat)===-1&&ye.push(ve.keyFormat),ye),[]);this.log(`Selecting key-system from session-keys ${ae.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(ae)}}removeSession(Z){const{mediaKeysSession:ee,licenseXhr:ae}=Z;if(ee){this.log(`Remove licenses and keys and close session ${ee.sessionId}`),Z._onmessage&&(ee.removeEventListener("message",Z._onmessage),Z._onmessage=void 0),Z._onkeystatuseschange&&(ee.removeEventListener("keystatuseschange",Z._onkeystatuseschange),Z._onkeystatuseschange=void 0),ae&&ae.readyState!==XMLHttpRequest.DONE&&ae.abort(),Z.mediaKeysSession=Z.decryptdata=Z.licenseXhr=void 0;const ye=this.mediaKeySessions.indexOf(Z);return ye>-1&&this.mediaKeySessions.splice(ye,1),ee.remove().catch(ve=>{this.log(`Could not remove session: ${ve}`)}).then(()=>ee.close()).catch(ve=>{this.log(`Could not close session: ${ve}`)})}}}EMEController.CDMCleanupPromise=void 0;class EMEKeyError extends Error{constructor(Z,ee){super(ee),this.data=void 0,Z.error||(Z.error=new Error(ee)),this.data=Z,Z.err=Z.error}}var CmObjectType;(function(ie){ie.MANIFEST="m",ie.AUDIO="a",ie.VIDEO="v",ie.MUXED="av",ie.INIT="i",ie.CAPTION="c",ie.TIMED_TEXT="tt",ie.KEY="k",ie.OTHER="o"})(CmObjectType||(CmObjectType={}));var CmStreamingFormat;(function(ie){ie.DASH="d",ie.HLS="h",ie.SMOOTH="s",ie.OTHER="o"})(CmStreamingFormat||(CmStreamingFormat={}));var CmcdHeaderField;(function(ie){ie.OBJECT="CMCD-Object",ie.REQUEST="CMCD-Request",ie.SESSION="CMCD-Session",ie.STATUS="CMCD-Status"})(CmcdHeaderField||(CmcdHeaderField={}));const CmcdHeaderMap={[CmcdHeaderField.OBJECT]:["br","d","ot","tb"],[CmcdHeaderField.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[CmcdHeaderField.SESSION]:["cid","pr","sf","sid","st","v"],[CmcdHeaderField.STATUS]:["bs","rtp"]};class SfItem{constructor(Z,ee){this.value=void 0,this.params=void 0,Array.isArray(Z)&&(Z=Z.map(ae=>ae instanceof SfItem?ae:new SfItem(ae))),this.value=Z,this.params=ee}}class SfToken{constructor(Z){this.description=void 0,this.description=Z}}const DICT$1="Dict";function format(ie){return Array.isArray(ie)?JSON.stringify(ie):ie instanceof Map?"Map{}":ie instanceof Set?"Set{}":typeof ie=="object"?JSON.stringify(ie):String(ie)}function throwError(ie,Z,ee,ae){return new Error(`failed to ${ie} "${format(Z)}" as ${ee}`,{cause:ae})}const BARE_ITEM="Bare Item",BOOLEAN="Boolean",BYTES="Byte Sequence",DECIMAL="Decimal",INTEGER="Integer";function isInvalidInt(ie){return ie<-999999999999999||999999999999999<ie}const STRING_REGEX=/[\x00-\x1f\x7f]+/,TOKEN="Token",KEY="Key";function serializeError(ie,Z,ee){return throwError("serialize",ie,Z,ee)}function serializeBoolean(ie){if(typeof ie!="boolean")throw serializeError(ie,BOOLEAN);return ie?"?1":"?0"}function base64encode(ie){return btoa(String.fromCharCode(...ie))}function serializeByteSequence(ie){if(ArrayBuffer.isView(ie)===!1)throw serializeError(ie,BYTES);return`:${base64encode(ie)}:`}function serializeInteger(ie){if(isInvalidInt(ie))throw serializeError(ie,INTEGER);return ie.toString()}function serializeDate(ie){return`@${serializeInteger(ie.getTime()/1e3)}`}function roundToEven(ie,Z){if(ie<0)return-roundToEven(-ie,Z);const ee=Math.pow(10,Z);if(Math.abs(ie*ee%1-.5)<Number.EPSILON){const ye=Math.floor(ie*ee);return(ye%2===0?ye:ye+1)/ee}else return Math.round(ie*ee)/ee}function serializeDecimal(ie){const Z=roundToEven(ie,3);if(Math.floor(Math.abs(Z)).toString().length>12)throw serializeError(ie,DECIMAL);const ee=Z.toString();return ee.includes(".")?ee:`${ee}.0`}const STRING="String";function serializeString(ie){if(STRING_REGEX.test(ie))throw serializeError(ie,STRING);return`"${ie.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function symbolToStr(ie){return ie.description||ie.toString().slice(7,-1)}function serializeToken(ie){const Z=symbolToStr(ie);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(Z)===!1)throw serializeError(Z,TOKEN);return Z}function serializeBareItem(ie){switch(typeof ie){case"number":if(!isFiniteNumber(ie))throw serializeError(ie,BARE_ITEM);return Number.isInteger(ie)?serializeInteger(ie):serializeDecimal(ie);case"string":return serializeString(ie);case"symbol":return serializeToken(ie);case"boolean":return serializeBoolean(ie);case"object":if(ie instanceof Date)return serializeDate(ie);if(ie instanceof Uint8Array)return serializeByteSequence(ie);if(ie instanceof SfToken)return serializeToken(ie);default:throw serializeError(ie,BARE_ITEM)}}function serializeKey(ie){if(/^[a-z*][a-z0-9\-_.*]*$/.test(ie)===!1)throw serializeError(ie,KEY);return ie}function serializeParams(ie){return ie==null?"":Object.entries(ie).map(([Z,ee])=>ee===!0?`;${serializeKey(Z)}`:`;${serializeKey(Z)}=${serializeBareItem(ee)}`).join("")}function serializeItem(ie){return ie instanceof SfItem?`${serializeBareItem(ie.value)}${serializeParams(ie.params)}`:serializeBareItem(ie)}function serializeInnerList(ie){return`(${ie.value.map(serializeItem).join(" ")})${serializeParams(ie.params)}`}function serializeDict(ie,Z={whitespace:!0}){if(typeof ie!="object")throw serializeError(ie,DICT$1);const ee=ie instanceof Map?ie.entries():Object.entries(ie),ae=Z!=null&&Z.whitespace?" ":"";return Array.from(ee).map(([ye,ve])=>{ve instanceof SfItem||(ve=new SfItem(ve));let be=serializeKey(ye);return ve.value===!0?be+=serializeParams(ve.params):(be+="=",Array.isArray(ve.value)?be+=serializeInnerList(ve):be+=serializeItem(ve)),be}).join(`,${ae}`)}function encodeSfDict(ie,Z){return serializeDict(ie,Z)}const isTokenField=ie=>ie==="ot"||ie==="sf"||ie==="st",isValid=ie=>typeof ie=="number"?isFiniteNumber(ie):ie!=null&&ie!==""&&ie!==!1;function urlToRelativePath(ie,Z){const ee=new URL(ie),ae=new URL(Z);if(ee.origin!==ae.origin)return ie;const ye=ee.pathname.split("/").slice(1),ve=ae.pathname.split("/").slice(1,-1);for(;ye[0]===ve[0];)ye.shift(),ve.shift();for(;ve.length;)ve.shift(),ye.unshift("..");return ye.join("/")}function uuid(){try{return crypto.randomUUID()}catch{try{const Z=URL.createObjectURL(new Blob),ee=Z.toString();return URL.revokeObjectURL(Z),ee.slice(ee.lastIndexOf("/")+1)}catch{let ee=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ye=>{const ve=(ee+Math.random()*16)%16|0;return ee=Math.floor(ee/16),(ye=="x"?ve:ve&3|8).toString(16)})}}}const toRounded=ie=>Math.round(ie),toUrlSafe=(ie,Z)=>(Z!=null&&Z.baseUrl&&(ie=urlToRelativePath(ie,Z.baseUrl)),encodeURIComponent(ie)),toHundred=ie=>toRounded(ie/100)*100,CmcdFormatters={br:toRounded,d:toRounded,bl:toHundred,dl:toHundred,mtp:toHundred,nor:toUrlSafe,rtp:toHundred,tb:toRounded};function processCmcd(ie,Z){const ee={};if(ie==null||typeof ie!="object")return ee;const ae=Object.keys(ie).sort(),ye=_extends({},CmcdFormatters,Z==null?void 0:Z.formatters),ve=Z==null?void 0:Z.filter;return ae.forEach(be=>{if(ve!=null&&ve(be))return;let Qe=ie[be];const Xe=ye[be];Xe&&(Qe=Xe(Qe,Z)),!(be==="v"&&Qe===1)&&(be=="pr"&&Qe===1||isValid(Qe)&&(isTokenField(be)&&typeof Qe=="string"&&(Qe=new SfToken(Qe)),ee[be]=Qe))}),ee}function encodeCmcd(ie,Z={}){return ie?encodeSfDict(processCmcd(ie,Z),_extends({whitespace:!1},Z)):""}function toCmcdHeaders(ie,Z={}){if(!ie)return{};const ee=Object.entries(ie),ae=Object.entries(CmcdHeaderMap).concat(Object.entries((Z==null?void 0:Z.customHeaderMap)||{})),ye=ee.reduce((ve,be)=>{var Qe,Xe;const[Je,tt]=be,it=((Qe=ae.find(st=>st[1].includes(Je)))==null?void 0:Qe[0])||CmcdHeaderField.REQUEST;return(Xe=ve[it])!=null||(ve[it]={}),ve[it][Je]=tt,ve},{});return Object.entries(ye).reduce((ve,[be,Qe])=>(ve[be]=encodeCmcd(Qe,Z),ve),{})}function appendCmcdHeaders(ie,Z,ee){return _extends(ie,toCmcdHeaders(Z,ee))}const CMCD_PARAM="CMCD";function toCmcdQuery(ie,Z={}){if(!ie)return"";const ee=encodeCmcd(ie,Z);return`${CMCD_PARAM}=${encodeURIComponent(ee)}`}const REGEX=/CMCD=[^&#]+/;function appendCmcdQuery(ie,Z,ee){const ae=toCmcdQuery(Z,ee);if(!ae)return ie;if(REGEX.test(ie))return ie.replace(REGEX,ae);const ye=ie.includes("?")?"&":"?";return`${ie}${ye}${ae}`}class CMCDController{constructor(Z){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=ye=>{try{this.apply(ye,{ot:CmObjectType.MANIFEST,su:!this.initialized})}catch(ve){logger.warn("Could not generate manifest CMCD data.",ve)}},this.applyFragmentData=ye=>{try{const ve=ye.frag,be=this.hls.levels[ve.level],Qe=this.getObjectType(ve),Xe={d:ve.duration*1e3,ot:Qe};(Qe===CmObjectType.VIDEO||Qe===CmObjectType.AUDIO||Qe==CmObjectType.MUXED)&&(Xe.br=be.bitrate/1e3,Xe.tb=this.getTopBandwidth(Qe)/1e3,Xe.bl=this.getBufferLength(Qe)),this.apply(ye,Xe)}catch(ve){logger.warn("Could not generate segment CMCD data.",ve)}},this.hls=Z;const ee=this.config=Z.config,{cmcd:ae}=ee;ae!=null&&(ee.pLoader=this.createPlaylistLoader(),ee.fLoader=this.createFragmentLoader(),this.sid=ae.sessionId||uuid(),this.cid=ae.contentId,this.useHeaders=ae.useHeaders===!0,this.includeKeys=ae.includeKeys,this.registerListeners())}registerListeners(){const Z=this.hls;Z.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),Z.on(Events.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const Z=this.hls;Z.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),Z.off(Events.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(Z,ee){this.media=ee.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(Z,ee){var ae,ye;this.audioBuffer=(ae=ee.tracks.audio)==null?void 0:ae.buffer,this.videoBuffer=(ye=ee.tracks.video)==null?void 0:ye.buffer}createData(){var Z;return{v:1,sf:CmStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(Z=this.media)==null?void 0:Z.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(Z,ee={}){_extends(ee,this.createData());const ae=ee.ot===CmObjectType.INIT||ee.ot===CmObjectType.VIDEO||ee.ot===CmObjectType.MUXED;this.starved&&ae&&(ee.bs=!0,ee.su=!0,this.starved=!1),ee.su==null&&(ee.su=this.buffering);const{includeKeys:ye}=this;ye&&(ee=Object.keys(ee).reduce((ve,be)=>(ye.includes(be)&&(ve[be]=ee[be]),ve),{})),this.useHeaders?(Z.headers||(Z.headers={}),appendCmcdHeaders(Z.headers,ee)):Z.url=appendCmcdQuery(Z.url,ee)}getObjectType(Z){const{type:ee}=Z;if(ee==="subtitle")return CmObjectType.TIMED_TEXT;if(Z.sn==="initSegment")return CmObjectType.INIT;if(ee==="audio")return CmObjectType.AUDIO;if(ee==="main")return this.hls.audioTracks.length?CmObjectType.VIDEO:CmObjectType.MUXED}getTopBandwidth(Z){let ee=0,ae;const ye=this.hls;if(Z===CmObjectType.AUDIO)ae=ye.audioTracks;else{const ve=ye.maxAutoLevel,be=ve>-1?ve+1:ye.levels.length;ae=ye.levels.slice(0,be)}for(const ve of ae)ve.bitrate>ee&&(ee=ve.bitrate);return ee>0?ee:NaN}getBufferLength(Z){const ee=this.hls.media,ae=Z===CmObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return!ae||!ee?NaN:BufferHelper.bufferInfo(ae,ee.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:Z}=this.config,ee=this.applyPlaylistData,ae=Z||this.config.loader;return class{constructor(ve){this.loader=void 0,this.loader=new ae(ve)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(ve,be,Qe){ee(ve),this.loader.load(ve,be,Qe)}}}createFragmentLoader(){const{fLoader:Z}=this.config,ee=this.applyFragmentData,ae=Z||this.config.loader;return class{constructor(ve){this.loader=void 0,this.loader=new ae(ve)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(ve,be,Qe){ee(ve),this.loader.load(ve,be,Qe)}}}}const PATHWAY_PENALTY_DURATION_MS=3e5;class ContentSteeringController{constructor(Z){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=Z,this.log=logger.log.bind(logger,"[content-steering]:"),this.registerListeners()}registerListeners(){const Z=this.hls;Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.on(Events.ERROR,this.onError,this)}unregisterListeners(){const Z=this.hls;Z&&(Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.off(Events.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const Z=this.timeToLoad*1e3-(performance.now()-this.updated);if(Z>0){this.scheduleRefresh(this.uri,Z);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(Z){const ee=this.levels;ee&&(this.levels=ee.filter(ae=>ae!==Z))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(Z,ee){const{contentSteering:ae}=ee;ae!==null&&(this.pathwayId=ae.pathwayId,this.uri=ae.uri,this.started&&this.startLoad())}onManifestParsed(Z,ee){this.audioTracks=ee.audioTracks,this.subtitleTracks=ee.subtitleTracks}onError(Z,ee){const{errorAction:ae}=ee;if((ae==null?void 0:ae.action)===NetworkErrorAction.SendAlternateToPenaltyBox&&ae.flags===ErrorActionFlags.MoveAllAlternatesMatchingHost){const ye=this.levels;let ve=this.pathwayPriority,be=this.pathwayId;if(ee.context){const{groupId:Qe,pathwayId:Xe,type:Je}=ee.context;Qe&&ye?be=this.getPathwayForGroupId(Qe,Je,be):Xe&&(be=Xe)}be in this.penalizedPathways||(this.penalizedPathways[be]=performance.now()),!ve&&ye&&(ve=ye.reduce((Qe,Xe)=>(Qe.indexOf(Xe.pathwayId)===-1&&Qe.push(Xe.pathwayId),Qe),[])),ve&&ve.length>1&&(this.updatePathwayPriority(ve),ae.resolved=this.pathwayId!==be),ae.resolved||logger.warn(`Could not resolve ${ee.details} ("${ee.error.message}") with content-steering for Pathway: ${be} levels: ${ye&&ye.length} priorities: ${JSON.stringify(ve)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(Z){this.levels=Z;let ee=this.getLevelsForPathway(this.pathwayId);if(ee.length===0){const ae=Z[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${ae}"`),ee=this.getLevelsForPathway(ae),this.pathwayId=ae}return ee.length!==Z.length?(this.log(`Found ${ee.length}/${Z.length} levels in Pathway "${this.pathwayId}"`),ee):Z}getLevelsForPathway(Z){return this.levels===null?[]:this.levels.filter(ee=>Z===ee.pathwayId)}updatePathwayPriority(Z){this.pathwayPriority=Z;let ee;const ae=this.penalizedPathways,ye=performance.now();Object.keys(ae).forEach(ve=>{ye-ae[ve]>PATHWAY_PENALTY_DURATION_MS&&delete ae[ve]});for(let ve=0;ve<Z.length;ve++){const be=Z[ve];if(be in ae)continue;if(be===this.pathwayId)return;const Qe=this.hls.nextLoadLevel,Xe=this.hls.levels[Qe];if(ee=this.getLevelsForPathway(be),ee.length>0){this.log(`Setting Pathway to "${be}"`),this.pathwayId=be,reassignFragmentLevelIndexes(ee),this.hls.trigger(Events.LEVELS_UPDATED,{levels:ee});const Je=this.hls.levels[Qe];Xe&&Je&&this.levels&&(Je.attrs["STABLE-VARIANT-ID"]!==Xe.attrs["STABLE-VARIANT-ID"]&&Je.bitrate!==Xe.bitrate&&this.log(`Unstable Pathways change from bitrate ${Xe.bitrate} to ${Je.bitrate}`),this.hls.nextLoadLevel=Qe);break}}}getPathwayForGroupId(Z,ee,ae){const ye=this.getLevelsForPathway(ae).concat(this.levels||[]);for(let ve=0;ve<ye.length;ve++)if(ee===PlaylistContextType.AUDIO_TRACK&&ye[ve].hasAudioGroup(Z)||ee===PlaylistContextType.SUBTITLE_TRACK&&ye[ve].hasSubtitleGroup(Z))return ye[ve].pathwayId;return ae}clonePathways(Z){const ee=this.levels;if(!ee)return;const ae={},ye={};Z.forEach(ve=>{const{ID:be,"BASE-ID":Qe,"URI-REPLACEMENT":Xe}=ve;if(ee.some(tt=>tt.pathwayId===be))return;const Je=this.getLevelsForPathway(Qe).map(tt=>{const it=new AttrList(tt.attrs);it["PATHWAY-ID"]=be;const st=it.AUDIO&&`${it.AUDIO}_clone_${be}`,lt=it.SUBTITLES&&`${it.SUBTITLES}_clone_${be}`;st&&(ae[it.AUDIO]=st,it.AUDIO=st),lt&&(ye[it.SUBTITLES]=lt,it.SUBTITLES=lt);const ct=performUriReplacement(tt.uri,it["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",Xe),gt=new Level({attrs:it,audioCodec:tt.audioCodec,bitrate:tt.bitrate,height:tt.height,name:tt.name,url:ct,videoCodec:tt.videoCodec,width:tt.width});if(tt.audioGroups)for(let ut=1;ut<tt.audioGroups.length;ut++)gt.addGroupId("audio",`${tt.audioGroups[ut]}_clone_${be}`);if(tt.subtitleGroups)for(let ut=1;ut<tt.subtitleGroups.length;ut++)gt.addGroupId("text",`${tt.subtitleGroups[ut]}_clone_${be}`);return gt});ee.push(...Je),cloneRenditionGroups(this.audioTracks,ae,Xe,be),cloneRenditionGroups(this.subtitleTracks,ye,Xe,be)})}loadSteeringManifest(Z){const ee=this.hls.config,ae=ee.loader;this.loader&&this.loader.destroy(),this.loader=new ae(ee);let ye;try{ye=new self.URL(Z)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${Z}`);return}if(ye.protocol!=="data:"){const tt=(this.hls.bandwidthEstimate||ee.abrEwmaDefaultEstimate)|0;ye.searchParams.set("_HLS_pathway",this.pathwayId),ye.searchParams.set("_HLS_throughput",""+tt)}const ve={responseType:"json",url:ye.href},be=ee.steeringManifestLoadPolicy.default,Qe=be.errorRetry||be.timeoutRetry||{},Xe={loadPolicy:be,timeout:be.maxLoadTimeMs,maxRetry:Qe.maxNumRetry||0,retryDelay:Qe.retryDelayMs||0,maxRetryDelay:Qe.maxRetryDelayMs||0},Je={onSuccess:(tt,it,st,lt)=>{this.log(`Loaded steering manifest: "${ye}"`);const ct=tt.data;if(ct.VERSION!==1){this.log(`Steering VERSION ${ct.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=ct.TTL;const{"RELOAD-URI":gt,"PATHWAY-CLONES":ut,"PATHWAY-PRIORITY":mt}=ct;if(gt)try{this.uri=new self.URL(gt,ye).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${gt}`);return}this.scheduleRefresh(this.uri||st.url),ut&&this.clonePathways(ut);const ei={steeringManifest:ct,url:ye.toString()};this.hls.trigger(Events.STEERING_MANIFEST_LOADED,ei),mt&&this.updatePathwayPriority(mt)},onError:(tt,it,st,lt)=>{if(this.log(`Error loading steering manifest: ${tt.code} ${tt.text} (${it.url})`),this.stopLoad(),tt.code===410){this.enabled=!1,this.log(`Steering manifest ${it.url} no longer available`);return}let ct=this.timeToLoad*1e3;if(tt.code===429){const gt=this.loader;if(typeof(gt==null?void 0:gt.getResponseHeader)=="function"){const ut=gt.getResponseHeader("Retry-After");ut&&(ct=parseFloat(ut)*1e3)}this.log(`Steering manifest ${it.url} rate limited`);return}this.scheduleRefresh(this.uri||it.url,ct)},onTimeout:(tt,it,st)=>{this.log(`Timeout loading steering manifest (${it.url})`),this.scheduleRefresh(this.uri||it.url)}};this.log(`Requesting steering manifest: ${ye}`),this.loader.load(ve,Xe,Je)}scheduleRefresh(Z,ee=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var ae;const ye=(ae=this.hls)==null?void 0:ae.media;if(ye&&!ye.ended){this.loadSteeringManifest(Z);return}this.scheduleRefresh(Z,this.timeToLoad*1e3)},ee)}}function cloneRenditionGroups(ie,Z,ee,ae){ie&&Object.keys(Z).forEach(ye=>{const ve=ie.filter(be=>be.groupId===ye).map(be=>{const Qe=_extends({},be);return Qe.details=void 0,Qe.attrs=new AttrList(Qe.attrs),Qe.url=Qe.attrs.URI=performUriReplacement(be.url,be.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",ee),Qe.groupId=Qe.attrs["GROUP-ID"]=Z[ye],Qe.attrs["PATHWAY-ID"]=ae,Qe});ie.push(...ve)})}function performUriReplacement(ie,Z,ee,ae){const{HOST:ye,PARAMS:ve,[ee]:be}=ae;let Qe;Z&&(Qe=be==null?void 0:be[Z],Qe&&(ie=Qe));const Xe=new self.URL(ie);return ye&&!Qe&&(Xe.host=ye),ve&&Object.keys(ve).sort().forEach(Je=>{Je&&Xe.searchParams.set(Je,ve[Je])}),Xe.href}const AGE_HEADER_LINE_REGEX=/^age:\s*[\d.]+\s*$/im;class XhrLoader{constructor(Z){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=Z&&Z.xhrSetup||null,this.stats=new LoadStats,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null}abortInternal(){const Z=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),Z&&(Z.onreadystatechange=null,Z.onprogress=null,Z.readyState!==4&&(this.stats.aborted=!0,Z.abort()))}abort(){var Z;this.abortInternal(),(Z=this.callbacks)!=null&&Z.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(Z,ee,ae){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=Z,this.config=ee,this.callbacks=ae,this.loadInternal()}loadInternal(){const{config:Z,context:ee}=this;if(!Z||!ee)return;const ae=this.loader=new self.XMLHttpRequest,ye=this.stats;ye.loading.first=0,ye.loaded=0,ye.aborted=!1;const ve=this.xhrSetup;ve?Promise.resolve().then(()=>{if(!this.stats.aborted)return ve(ae,ee.url)}).catch(be=>(ae.open("GET",ee.url,!0),ve(ae,ee.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(ae,ee,Z)}).catch(be=>{this.callbacks.onError({code:ae.status,text:be.message},ee,ae,ye)}):this.openAndSendXhr(ae,ee,Z)}openAndSendXhr(Z,ee,ae){Z.readyState||Z.open("GET",ee.url,!0);const ye=ee.headers,{maxTimeToFirstByteMs:ve,maxLoadTimeMs:be}=ae.loadPolicy;if(ye)for(const Qe in ye)Z.setRequestHeader(Qe,ye[Qe]);ee.rangeEnd&&Z.setRequestHeader("Range","bytes="+ee.rangeStart+"-"+(ee.rangeEnd-1)),Z.onreadystatechange=this.readystatechange.bind(this),Z.onprogress=this.loadprogress.bind(this),Z.responseType=ee.responseType,self.clearTimeout(this.requestTimeout),ae.timeout=ve&&isFiniteNumber(ve)?ve:be,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),ae.timeout),Z.send()}readystatechange(){const{context:Z,loader:ee,stats:ae}=this;if(!Z||!ee)return;const ye=ee.readyState,ve=this.config;if(!ae.aborted&&ye>=2&&(ae.loading.first===0&&(ae.loading.first=Math.max(self.performance.now(),ae.loading.start),ve.timeout!==ve.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),ve.timeout=ve.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),ve.loadPolicy.maxLoadTimeMs-(ae.loading.first-ae.loading.start)))),ye===4)){self.clearTimeout(this.requestTimeout),ee.onreadystatechange=null,ee.onprogress=null;const be=ee.status,Qe=ee.responseType!=="text";if(be>=200&&be<300&&(Qe&&ee.response||ee.responseText!==null)){ae.loading.end=Math.max(self.performance.now(),ae.loading.first);const Xe=Qe?ee.response:ee.responseText,Je=ee.responseType==="arraybuffer"?Xe.byteLength:Xe.length;if(ae.loaded=ae.total=Je,ae.bwEstimate=ae.total*8e3/(ae.loading.end-ae.loading.first),!this.callbacks)return;const tt=this.callbacks.onProgress;if(tt&&tt(ae,Z,Xe,ee),!this.callbacks)return;const it={url:ee.responseURL,data:Xe,code:be};this.callbacks.onSuccess(it,ae,Z,ee)}else{const Xe=ve.loadPolicy.errorRetry,Je=ae.retry,tt={url:Z.url,data:void 0,code:be};shouldRetry(Xe,Je,!1,tt)?this.retry(Xe):(logger.error(`${be} while loading ${Z.url}`),this.callbacks.onError({code:be,text:ee.statusText},Z,ee,ae))}}}loadtimeout(){var Z;const ee=(Z=this.config)==null?void 0:Z.loadPolicy.timeoutRetry,ae=this.stats.retry;if(shouldRetry(ee,ae,!0))this.retry(ee);else{var ye;logger.warn(`timeout while loading ${(ye=this.context)==null?void 0:ye.url}`);const ve=this.callbacks;ve&&(this.abortInternal(),ve.onTimeout(this.stats,this.context,this.loader))}}retry(Z){const{context:ee,stats:ae}=this;this.retryDelay=getRetryDelay(Z,ae.retry),ae.retry++,logger.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${ee==null?void 0:ee.url}, retrying ${ae.retry}/${Z.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(Z){const ee=this.stats;ee.loaded=Z.loaded,Z.lengthComputable&&(ee.total=Z.total)}getCacheAge(){let Z=null;if(this.loader&&AGE_HEADER_LINE_REGEX.test(this.loader.getAllResponseHeaders())){const ee=this.loader.getResponseHeader("age");Z=ee?parseFloat(ee):null}return Z}getResponseHeader(Z){return this.loader&&new RegExp(`^${Z}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(Z):null}}function fetchSupported(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const BYTERANGE=/(\d+)-(\d+)\/(\d+)/;class FetchLoader{constructor(Z){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=Z.fetchSetup||getRequest,this.controller=new self.AbortController,this.stats=new LoadStats}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var Z;this.abortInternal(),(Z=this.callbacks)!=null&&Z.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(Z,ee,ae){const ye=this.stats;if(ye.loading.start)throw new Error("Loader can only be used once.");ye.loading.start=self.performance.now();const ve=getRequestParameters(Z,this.controller.signal),be=ae.onProgress,Qe=Z.responseType==="arraybuffer",Xe=Qe?"byteLength":"length",{maxTimeToFirstByteMs:Je,maxLoadTimeMs:tt}=ee.loadPolicy;this.context=Z,this.config=ee,this.callbacks=ae,this.request=this.fetchSetup(Z,ve),self.clearTimeout(this.requestTimeout),ee.timeout=Je&&isFiniteNumber(Je)?Je:tt,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),ae.onTimeout(ye,Z,this.response)},ee.timeout),self.fetch(this.request).then(it=>{this.response=this.loader=it;const st=Math.max(self.performance.now(),ye.loading.start);if(self.clearTimeout(this.requestTimeout),ee.timeout=tt,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),ae.onTimeout(ye,Z,this.response)},tt-(st-ye.loading.start)),!it.ok){const{status:lt,statusText:ct}=it;throw new FetchError(ct||"fetch, bad network response",lt,it)}return ye.loading.first=st,ye.total=getContentLength(it.headers)||ye.total,be&&isFiniteNumber(ee.highWaterMark)?this.loadProgressively(it,ye,Z,ee.highWaterMark,be):Qe?it.arrayBuffer():Z.responseType==="json"?it.json():it.text()}).then(it=>{const st=this.response;if(!st)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),ye.loading.end=Math.max(self.performance.now(),ye.loading.first);const lt=it[Xe];lt&&(ye.loaded=ye.total=lt);const ct={url:st.url,data:it,code:st.status};be&&!isFiniteNumber(ee.highWaterMark)&&be(ye,Z,it,st),ae.onSuccess(ct,ye,Z,st)}).catch(it=>{if(self.clearTimeout(this.requestTimeout),ye.aborted)return;const st=it&&it.code||0,lt=it?it.message:null;ae.onError({code:st,text:lt},Z,it?it.details:null,ye)})}getCacheAge(){let Z=null;if(this.response){const ee=this.response.headers.get("age");Z=ee?parseFloat(ee):null}return Z}getResponseHeader(Z){return this.response?this.response.headers.get(Z):null}loadProgressively(Z,ee,ae,ye=0,ve){const be=new ChunkCache,Qe=Z.body.getReader(),Xe=()=>Qe.read().then(Je=>{if(Je.done)return be.dataLength&&ve(ee,ae,be.flush(),Z),Promise.resolve(new ArrayBuffer(0));const tt=Je.value,it=tt.length;return ee.loaded+=it,it<ye||be.dataLength?(be.push(tt),be.dataLength>=ye&&ve(ee,ae,be.flush(),Z)):ve(ee,ae,tt,Z),Xe()}).catch(()=>Promise.reject());return Xe()}}function getRequestParameters(ie,Z){const ee={method:"GET",mode:"cors",credentials:"same-origin",signal:Z,headers:new self.Headers(_extends({},ie.headers))};return ie.rangeEnd&&ee.headers.set("Range","bytes="+ie.rangeStart+"-"+String(ie.rangeEnd-1)),ee}function getByteRangeLength(ie){const Z=BYTERANGE.exec(ie);if(Z)return parseInt(Z[2])-parseInt(Z[1])+1}function getContentLength(ie){const Z=ie.get("Content-Range");if(Z){const ae=getByteRangeLength(Z);if(isFiniteNumber(ae))return ae}const ee=ie.get("Content-Length");if(ee)return parseInt(ee)}function getRequest(ie,Z){return new self.Request(ie.url,Z)}class FetchError extends Error{constructor(Z,ee,ae){super(Z),this.code=void 0,this.details=void 0,this.code=ee,this.details=ae}}const WHITESPACE_CHAR=/\s/,Cues={newCue(ie,Z,ee,ae){const ye=[];let ve,be,Qe,Xe,Je;const tt=self.VTTCue||self.TextTrackCue;for(let st=0;st<ae.rows.length;st++)if(ve=ae.rows[st],Qe=!0,Xe=0,Je="",!ve.isEmpty()){var it;for(let gt=0;gt<ve.chars.length;gt++)WHITESPACE_CHAR.test(ve.chars[gt].uchar)&&Qe?Xe++:(Je+=ve.chars[gt].uchar,Qe=!1);ve.cueStartTime=Z,Z===ee&&(ee+=1e-4),Xe>=16?Xe--:Xe++;const lt=fixLineBreaks(Je.trim()),ct=generateCueId(Z,ee,lt);ie!=null&&(it=ie.cues)!=null&&it.getCueById(ct)||(be=new tt(Z,ee,lt),be.id=ct,be.line=st+1,be.align="left",be.position=10+Math.min(80,Math.floor(Xe*8/32)*10),ye.push(be))}return ie&&ye.length&&(ye.sort((st,lt)=>st.line==="auto"||lt.line==="auto"?0:st.line>8&&lt.line>8?lt.line-st.line:st.line-lt.line),ye.forEach(st=>addCueToTrack(ie,st))),ye}},defaultLoadPolicy={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},hlsDefaultConfig=_objectSpread2(_objectSpread2({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:XhrLoader,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:AbrController,bufferController:BufferController,capLevelController:CapLevelController,errorController:ErrorController,fpsController:FPSController,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:defaultLoadPolicy},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},timelineConfig()),{},{subtitleStreamController:SubtitleStreamController,subtitleTrackController:SubtitleTrackController,timelineController:TimelineController,audioStreamController:AudioStreamController,audioTrackController:AudioTrackController,emeController:EMEController,cmcdController:CMCDController,contentSteeringController:ContentSteeringController});function timelineConfig(){return{cueHandler:Cues,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function mergeConfig(ie,Z){if((Z.liveSyncDurationCount||Z.liveMaxLatencyDurationCount)&&(Z.liveSyncDuration||Z.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(Z.liveMaxLatencyDurationCount!==void 0&&(Z.liveSyncDurationCount===void 0||Z.liveMaxLatencyDurationCount<=Z.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(Z.liveMaxLatencyDuration!==void 0&&(Z.liveSyncDuration===void 0||Z.liveMaxLatencyDuration<=Z.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const ee=deepCpy(ie),ae=["manifest","level","frag"],ye=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return ae.forEach(ve=>{const be=`${ve==="level"?"playlist":ve}LoadPolicy`,Qe=Z[be]===void 0,Xe=[];ye.forEach(Je=>{const tt=`${ve}Loading${Je}`,it=Z[tt];if(it!==void 0&&Qe){Xe.push(tt);const st=ee[be].default;switch(Z[be]={default:st},Je){case"TimeOut":st.maxLoadTimeMs=it,st.maxTimeToFirstByteMs=it;break;case"MaxRetry":st.errorRetry.maxNumRetry=it,st.timeoutRetry.maxNumRetry=it;break;case"RetryDelay":st.errorRetry.retryDelayMs=it,st.timeoutRetry.retryDelayMs=it;break;case"MaxRetryTimeout":st.errorRetry.maxRetryDelayMs=it,st.timeoutRetry.maxRetryDelayMs=it;break}}}),Xe.length&&logger.warn(`hls.js config: "${Xe.join('", "')}" setting(s) are deprecated, use "${be}": ${JSON.stringify(Z[be])}`)}),_objectSpread2(_objectSpread2({},ee),Z)}function deepCpy(ie){return ie&&typeof ie=="object"?Array.isArray(ie)?ie.map(deepCpy):Object.keys(ie).reduce((Z,ee)=>(Z[ee]=deepCpy(ie[ee]),Z),{}):ie}function enableStreamingMode(ie){const Z=ie.loader;Z!==FetchLoader&&Z!==XhrLoader?(logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),ie.progressive=!1):fetchSupported()&&(ie.loader=FetchLoader,ie.progressive=!0,ie.enableSoftwareAES=!0,logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}let chromeOrFirefox;class LevelController extends BasePlaylistController{constructor(Z,ee){super(Z,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=ee,this._registerListeners()}_registerListeners(){const{hls:Z}=this;Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),Z.on(Events.ERROR,this.onError,this)}_unregisterListeners(){const{hls:Z}=this;Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Z.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),Z.off(Events.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(ee=>{ee.loadError=0,ee.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(Z,ee){this.resetLevels()}onManifestLoaded(Z,ee){const ae=this.hls.config.preferManagedMediaSource,ye=[],ve={},be={};let Qe=!1,Xe=!1,Je=!1;ee.levels.forEach(tt=>{var it,st;const lt=tt.attrs;let{audioCodec:ct,videoCodec:gt}=tt;((it=ct)==null?void 0:it.indexOf("mp4a.40.34"))!==-1&&(chromeOrFirefox||(chromeOrFirefox=/chrome|firefox/i.test(navigator.userAgent)),chromeOrFirefox&&(tt.audioCodec=ct=void 0)),ct&&(tt.audioCodec=ct=getCodecCompatibleName(ct,ae)),((st=gt)==null?void 0:st.indexOf("avc1"))===0&&(gt=tt.videoCodec=convertAVC1ToAVCOTI(gt));const{width:ut,height:mt,unknownCodecs:ei}=tt;if(Qe||(Qe=!!(ut&&mt)),Xe||(Xe=!!gt),Je||(Je=!!ct),ei!=null&&ei.length||ct&&!areCodecsMediaSourceSupported(ct,"audio",ae)||gt&&!areCodecsMediaSourceSupported(gt,"video",ae))return;const{CODECS:ni,"FRAME-RATE":ri,"HDCP-LEVEL":si,"PATHWAY-ID":li,RESOLUTION:ai,"VIDEO-RANGE":ci}=lt,pi=`${`${li||"."}-`}${tt.bitrate}-${ai}-${ri}-${ni}-${ci}-${si}`;if(ve[pi])if(ve[pi].uri!==tt.url&&!tt.attrs["PATHWAY-ID"]){const gi=be[pi]+=1;tt.attrs["PATHWAY-ID"]=new Array(gi+1).join(".");const _i=new Level(tt);ve[pi]=_i,ye.push(_i)}else ve[pi].addGroupId("audio",lt.AUDIO),ve[pi].addGroupId("text",lt.SUBTITLES);else{const gi=new Level(tt);ve[pi]=gi,be[pi]=1,ye.push(gi)}}),this.filterAndSortMediaOptions(ye,ee,Qe,Xe,Je)}filterAndSortMediaOptions(Z,ee,ae,ye,ve){let be=[],Qe=[],Xe=Z;if((ae||ye)&&ve&&(Xe=Xe.filter(({videoCodec:ct,videoRange:gt,width:ut,height:mt})=>(!!ct||!!(ut&&mt))&&isVideoRange(gt))),Xe.length===0){Promise.resolve().then(()=>{if(this.hls){ee.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(ee.levels[0].attrs)}`);const ct=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:ee.url,error:ct,reason:ct.message})}});return}if(ee.audioTracks){const{preferManagedMediaSource:ct}=this.hls.config;be=ee.audioTracks.filter(gt=>!gt.audioCodec||areCodecsMediaSourceSupported(gt.audioCodec,"audio",ct)),assignTrackIdsByGroup(be)}ee.subtitles&&(Qe=ee.subtitles,assignTrackIdsByGroup(Qe));const Je=Xe.slice(0);Xe.sort((ct,gt)=>{if(ct.attrs["HDCP-LEVEL"]!==gt.attrs["HDCP-LEVEL"])return(ct.attrs["HDCP-LEVEL"]||"")>(gt.attrs["HDCP-LEVEL"]||"")?1:-1;if(ae&&ct.height!==gt.height)return ct.height-gt.height;if(ct.frameRate!==gt.frameRate)return ct.frameRate-gt.frameRate;if(ct.videoRange!==gt.videoRange)return VideoRangeValues.indexOf(ct.videoRange)-VideoRangeValues.indexOf(gt.videoRange);if(ct.videoCodec!==gt.videoCodec){const ut=videoCodecPreferenceValue(ct.videoCodec),mt=videoCodecPreferenceValue(gt.videoCodec);if(ut!==mt)return mt-ut}if(ct.uri===gt.uri&&ct.codecSet!==gt.codecSet){const ut=codecsSetSelectionPreferenceValue(ct.codecSet),mt=codecsSetSelectionPreferenceValue(gt.codecSet);if(ut!==mt)return mt-ut}return ct.averageBitrate!==gt.averageBitrate?ct.averageBitrate-gt.averageBitrate:0});let tt=Je[0];if(this.steering&&(Xe=this.steering.filterParsedLevels(Xe),Xe.length!==Je.length)){for(let ct=0;ct<Je.length;ct++)if(Je[ct].pathwayId===Xe[0].pathwayId){tt=Je[ct];break}}this._levels=Xe;for(let ct=0;ct<Xe.length;ct++)if(Xe[ct]===tt){var it;this._firstLevel=ct;const gt=tt.bitrate,ut=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${Xe.length} level(s) found, first bitrate: ${gt}`),((it=this.hls.userConfig)==null?void 0:it.abrEwmaDefaultEstimate)===void 0){const mt=Math.min(gt,this.hls.config.abrEwmaDefaultEstimateMax);mt>ut&&ut===hlsDefaultConfig.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=mt)}break}const st=ve&&!ye,lt={levels:Xe,audioTracks:be,subtitleTracks:Qe,sessionData:ee.sessionData,sessionKeys:ee.sessionKeys,firstLevel:this._firstLevel,stats:ee.stats,audio:ve,video:ye,altAudio:!st&&be.some(ct=>!!ct.url)};this.hls.trigger(Events.MANIFEST_PARSED,lt),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(Z){const ee=this._levels;if(ee.length===0)return;if(Z<0||Z>=ee.length){const tt=new Error("invalid level idx"),it=Z<0;if(this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.LEVEL_SWITCH_ERROR,level:Z,fatal:it,error:tt,reason:tt.message}),it)return;Z=Math.min(Z,ee.length-1)}const ae=this.currentLevelIndex,ye=this.currentLevel,ve=ye?ye.attrs["PATHWAY-ID"]:void 0,be=ee[Z],Qe=be.attrs["PATHWAY-ID"];if(this.currentLevelIndex=Z,this.currentLevel=be,ae===Z&&be.details&&ye&&ve===Qe)return;this.log(`Switching to level ${Z} (${be.height?be.height+"p ":""}${be.videoRange?be.videoRange+" ":""}${be.codecSet?be.codecSet+" ":""}@${be.bitrate})${Qe?" with Pathway "+Qe:""} from level ${ae}${ve?" with Pathway "+ve:""}`);const Xe={level:Z,attrs:be.attrs,details:be.details,bitrate:be.bitrate,averageBitrate:be.averageBitrate,maxBitrate:be.maxBitrate,realBitrate:be.realBitrate,width:be.width,height:be.height,codecSet:be.codecSet,audioCodec:be.audioCodec,videoCodec:be.videoCodec,audioGroups:be.audioGroups,subtitleGroups:be.subtitleGroups,loaded:be.loaded,loadError:be.loadError,fragmentError:be.fragmentError,name:be.name,id:be.id,uri:be.uri,url:be.url,urlId:0,audioGroupIds:be.audioGroupIds,textGroupIds:be.textGroupIds};this.hls.trigger(Events.LEVEL_SWITCHING,Xe);const Je=be.details;if(!Je||Je.live){const tt=this.switchParams(be.uri,ye==null?void 0:ye.details);this.loadPlaylist(tt)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(Z){this.manualLevelIndex=Z,this._startLevel===void 0&&(this._startLevel=Z),Z!==-1&&(this.level=Z)}get firstLevel(){return this._firstLevel}set firstLevel(Z){this._firstLevel=Z}get startLevel(){if(this._startLevel===void 0){const Z=this.hls.config.startLevel;return Z!==void 0?Z:this.hls.firstAutoLevel}return this._startLevel}set startLevel(Z){this._startLevel=Z}onError(Z,ee){ee.fatal||!ee.context||ee.context.type===PlaylistContextType.LEVEL&&ee.context.level===this.level&&this.checkRetry(ee)}onFragBuffered(Z,{frag:ee}){if(ee!==void 0&&ee.type===PlaylistLevelType.MAIN){const ae=ee.elementaryStreams;if(!Object.keys(ae).some(ve=>!!ae[ve]))return;const ye=this._levels[ee.level];ye!=null&&ye.loadError&&(this.log(`Resetting level error count of ${ye.loadError} on frag buffered`),ye.loadError=0)}}onLevelLoaded(Z,ee){var ae;const{level:ye,details:ve}=ee,be=this._levels[ye];if(!be){var Qe;this.warn(`Invalid level index ${ye}`),(Qe=ee.deliveryDirectives)!=null&&Qe.skip&&(ve.deltaUpdateFailed=!0);return}ye===this.currentLevelIndex?(be.fragmentError===0&&(be.loadError=0),this.playlistLoaded(ye,ee,be.details)):(ae=ee.deliveryDirectives)!=null&&ae.skip&&(ve.deltaUpdateFailed=!0)}loadPlaylist(Z){super.loadPlaylist();const ee=this.currentLevelIndex,ae=this.currentLevel;if(ae&&this.shouldLoadPlaylist(ae)){let ye=ae.uri;if(Z)try{ye=Z.addDirectives(ye)}catch(be){this.warn(`Could not construct new URL with HLS Delivery Directives: ${be}`)}const ve=ae.attrs["PATHWAY-ID"];this.log(`Loading level index ${ee}${(Z==null?void 0:Z.msn)!==void 0?" at sn "+Z.msn+" part "+Z.part:""} with${ve?" Pathway "+ve:""} ${ye}`),this.clearTimer(),this.hls.trigger(Events.LEVEL_LOADING,{url:ye,level:ee,pathwayId:ae.attrs["PATHWAY-ID"],id:0,deliveryDirectives:Z||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(Z){this.level=Z,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=Z)}removeLevel(Z){var ee;const ae=this._levels.filter((ye,ve)=>ve!==Z?!0:(this.steering&&this.steering.removeLevel(ye),ye===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,ye.details&&ye.details.fragments.forEach(be=>be.level=-1)),!1));reassignFragmentLevelIndexes(ae),this._levels=ae,this.currentLevelIndex>-1&&(ee=this.currentLevel)!=null&&ee.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(Events.LEVELS_UPDATED,{levels:ae})}onLevelsUpdated(Z,{levels:ee}){this._levels=ee}checkMaxAutoUpdated(){const{autoLevelCapping:Z,maxAutoLevel:ee,maxHdcpLevel:ae}=this.hls;this._maxAutoLevel!==ee&&(this._maxAutoLevel=ee,this.hls.trigger(Events.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:Z,levels:this.levels,maxAutoLevel:ee,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:ae}))}}function assignTrackIdsByGroup(ie){const Z={};ie.forEach(ee=>{const ae=ee.groupId||"";ee.id=Z[ae]=Z[ae]||0,Z[ae]++})}class KeyLoader{constructor(Z){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=Z}abort(Z){for(const ae in this.keyUriToKeyInfo){const ye=this.keyUriToKeyInfo[ae].loader;if(ye){var ee;if(Z&&Z!==((ee=ye.context)==null?void 0:ee.frag.type))return;ye.abort()}}}detach(){for(const Z in this.keyUriToKeyInfo){const ee=this.keyUriToKeyInfo[Z];(ee.mediaKeySessionContext||ee.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[Z]}}destroy(){this.detach();for(const Z in this.keyUriToKeyInfo){const ee=this.keyUriToKeyInfo[Z].loader;ee&&ee.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(Z,ee=ErrorDetails.KEY_LOAD_ERROR,ae,ye,ve){return new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ee,fatal:!1,frag:Z,response:ve,error:ae,networkDetails:ye})}loadClear(Z,ee){if(this.emeController&&this.config.emeEnabled){const{sn:ae,cc:ye}=Z;for(let ve=0;ve<ee.length;ve++){const be=ee[ve];if(ye<=be.cc&&(ae==="initSegment"||be.sn==="initSegment"||ae<be.sn)){this.emeController.selectKeySystemFormat(be).then(Qe=>{be.setKeyFormat(Qe)});break}}}}load(Z){return!Z.decryptdata&&Z.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(Z).then(ee=>this.loadInternal(Z,ee)):this.loadInternal(Z)}loadInternal(Z,ee){var ae,ye;ee&&Z.setKeyFormat(ee);const ve=Z.decryptdata;if(!ve){const Je=new Error(ee?`Expected frag.decryptdata to be defined after setting format ${ee}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(Z,ErrorDetails.KEY_LOAD_ERROR,Je))}const be=ve.uri;if(!be)return Promise.reject(this.createKeyLoadError(Z,ErrorDetails.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${be}"`)));let Qe=this.keyUriToKeyInfo[be];if((ae=Qe)!=null&&ae.decryptdata.key)return ve.key=Qe.decryptdata.key,Promise.resolve({frag:Z,keyInfo:Qe});if((ye=Qe)!=null&&ye.keyLoadPromise){var Xe;switch((Xe=Qe.mediaKeySessionContext)==null?void 0:Xe.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return Qe.keyLoadPromise.then(Je=>(ve.key=Je.keyInfo.decryptdata.key,{frag:Z,keyInfo:Qe}))}}switch(Qe=this.keyUriToKeyInfo[be]={decryptdata:ve,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},ve.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return ve.keyFormat==="identity"?this.loadKeyHTTP(Qe,Z):this.loadKeyEME(Qe,Z);case"AES-128":return this.loadKeyHTTP(Qe,Z);default:return Promise.reject(this.createKeyLoadError(Z,ErrorDetails.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${ve.method}"`)))}}loadKeyEME(Z,ee){const ae={frag:ee,keyInfo:Z};if(this.emeController&&this.config.emeEnabled){const ye=this.emeController.loadKey(ae);if(ye)return(Z.keyLoadPromise=ye.then(ve=>(Z.mediaKeySessionContext=ve,ae))).catch(ve=>{throw Z.keyLoadPromise=null,ve})}return Promise.resolve(ae)}loadKeyHTTP(Z,ee){const ae=this.config,ye=ae.loader,ve=new ye(ae);return ee.keyLoader=Z.loader=ve,Z.keyLoadPromise=new Promise((be,Qe)=>{const Xe={keyInfo:Z,frag:ee,responseType:"arraybuffer",url:Z.decryptdata.uri},Je=ae.keyLoadPolicy.default,tt={loadPolicy:Je,timeout:Je.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},it={onSuccess:(st,lt,ct,gt)=>{const{frag:ut,keyInfo:mt,url:ei}=ct;if(!ut.decryptdata||mt!==this.keyUriToKeyInfo[ei])return Qe(this.createKeyLoadError(ut,ErrorDetails.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),gt));mt.decryptdata.key=ut.decryptdata.key=new Uint8Array(st.data),ut.keyLoader=null,mt.loader=null,be({frag:ut,keyInfo:mt})},onError:(st,lt,ct,gt)=>{this.resetLoader(lt),Qe(this.createKeyLoadError(ee,ErrorDetails.KEY_LOAD_ERROR,new Error(`HTTP Error ${st.code} loading key ${st.text}`),ct,_objectSpread2({url:Xe.url,data:void 0},st)))},onTimeout:(st,lt,ct)=>{this.resetLoader(lt),Qe(this.createKeyLoadError(ee,ErrorDetails.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),ct))},onAbort:(st,lt,ct)=>{this.resetLoader(lt),Qe(this.createKeyLoadError(ee,ErrorDetails.INTERNAL_ABORTED,new Error("key loading aborted"),ct))}};ve.load(Xe,tt,it)})}resetLoader(Z){const{frag:ee,keyInfo:ae,url:ye}=Z,ve=ae.loader;ee.keyLoader===ve&&(ee.keyLoader=null,ae.loader=null),delete this.keyUriToKeyInfo[ye],ve&&ve.destroy()}}function getSourceBuffer(){return self.SourceBuffer||self.WebKitSourceBuffer}function isMSESupported(){if(!getMediaSource())return!1;const Z=getSourceBuffer();return!Z||Z.prototype&&typeof Z.prototype.appendBuffer=="function"&&typeof Z.prototype.remove=="function"}function isSupported(){if(!isMSESupported())return!1;const ie=getMediaSource();return typeof(ie==null?void 0:ie.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(Z=>ie.isTypeSupported(mimeTypeForCodec(Z,"video")))||["mp4a.40.2","fLaC"].some(Z=>ie.isTypeSupported(mimeTypeForCodec(Z,"audio"))))}function changeTypeSupported(){var ie;const Z=getSourceBuffer();return typeof(Z==null||(ie=Z.prototype)==null?void 0:ie.changeType)=="function"}const STALL_MINIMUM_DURATION_MS=250,MAX_START_GAP_JUMP=2,SKIP_BUFFER_HOLE_STEP_SECONDS=.1,SKIP_BUFFER_RANGE_START=.05;class GapController{constructor(Z,ee,ae,ye){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=Z,this.media=ee,this.fragmentTracker=ae,this.hls=ye}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(Z,ee){const{config:ae,media:ye,stalled:ve}=this;if(ye===null)return;const{currentTime:be,seeking:Qe}=ye,Xe=this.seeking&&!Qe,Je=!this.seeking&&Qe;if(this.seeking=Qe,be!==Z){if(this.moved=!0,Qe||(this.nudgeRetry=0),ve!==null){if(this.stallReported){const ut=self.performance.now()-ve;logger.warn(`playback not stuck anymore @${be}, after ${Math.round(ut)}ms`),this.stallReported=!1}this.stalled=null}return}if(Je||Xe){this.stalled=null;return}if(ye.paused&&!Qe||ye.ended||ye.playbackRate===0||!BufferHelper.getBuffered(ye).length){this.nudgeRetry=0;return}const tt=BufferHelper.bufferInfo(ye,be,0),it=tt.nextStart||0;if(Qe){const ut=tt.len>MAX_START_GAP_JUMP,mt=!it||ee&&ee.start<=be||it-be>MAX_START_GAP_JUMP&&!this.fragmentTracker.getPartialFragment(be);if(ut||mt)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var st;if(!(tt.len>0)&&!it)return;const mt=Math.max(it,tt.start||0)-be,ei=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,ri=(ei==null||(st=ei.details)==null?void 0:st.live)?ei.details.targetduration*2:MAX_START_GAP_JUMP,si=this.fragmentTracker.getPartialFragment(be);if(mt>0&&(mt<=ri||si)){ye.paused||this._trySkipBufferHole(si);return}}const lt=self.performance.now();if(ve===null){this.stalled=lt;return}const ct=lt-ve;if(!Qe&&ct>=STALL_MINIMUM_DURATION_MS&&(this._reportStall(tt),!this.media))return;const gt=BufferHelper.bufferInfo(ye,be,ae.maxBufferHole);this._tryFixBufferStall(gt,ct)}_tryFixBufferStall(Z,ee){const{config:ae,fragmentTracker:ye,media:ve}=this;if(ve===null)return;const be=ve.currentTime,Qe=ye.getPartialFragment(be);Qe&&(this._trySkipBufferHole(Qe)||!this.media)||(Z.len>ae.maxBufferHole||Z.nextStart&&Z.nextStart-be<ae.maxBufferHole)&&ee>ae.highBufferWatchdogPeriod*1e3&&(logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(Z){const{hls:ee,media:ae,stallReported:ye}=this;if(!ye&&ae){this.stallReported=!0;const ve=new Error(`Playback stalling at @${ae.currentTime} due to low buffer (${JSON.stringify(Z)})`);logger.warn(ve.message),ee.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,error:ve,buffer:Z.len})}}_trySkipBufferHole(Z){const{config:ee,hls:ae,media:ye}=this;if(ye===null)return 0;const ve=ye.currentTime,be=BufferHelper.bufferInfo(ye,ve,0),Qe=ve<be.start?be.start:be.nextStart;if(Qe){const Xe=be.len<=ee.maxBufferHole,Je=be.len>0&&be.len<1&&ye.readyState<3,tt=Qe-ve;if(tt>0&&(Xe||Je)){if(tt>ee.maxBufferHole){const{fragmentTracker:st}=this;let lt=!1;if(ve===0){const ct=st.getAppendedFrag(0,PlaylistLevelType.MAIN);ct&&Qe<ct.end&&(lt=!0)}if(!lt){const ct=Z||st.getAppendedFrag(ve,PlaylistLevelType.MAIN);if(ct){let gt=!1,ut=ct.end;for(;ut<Qe;){const mt=st.getPartialFragment(ut);if(mt)ut+=mt.duration;else{gt=!0;break}}if(gt)return 0}}}const it=Math.max(Qe+SKIP_BUFFER_RANGE_START,ve+SKIP_BUFFER_HOLE_STEP_SECONDS);if(logger.warn(`skipping hole, adjusting currentTime from ${ve} to ${it}`),this.moved=!0,this.stalled=null,ye.currentTime=it,Z&&!Z.gap){const st=new Error(`fragment loaded with buffer holes, seeking from ${ve} to ${it}`);ae.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:st,reason:st.message,frag:Z})}return it}}return 0}_tryNudgeBuffer(){const{config:Z,hls:ee,media:ae,nudgeRetry:ye}=this;if(ae===null)return;const ve=ae.currentTime;if(this.nudgeRetry++,ye<Z.nudgeMaxRetry){const be=ve+(ye+1)*Z.nudgeOffset,Qe=new Error(`Nudging 'currentTime' from ${ve} to ${be}`);logger.warn(Qe.message),ae.currentTime=be,ee.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_NUDGE_ON_STALL,error:Qe,fatal:!1})}else{const be=new Error(`Playhead still not moving while enough data buffered @${ve} after ${Z.nudgeMaxRetry} nudges`);logger.error(be.message),ee.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,error:be,fatal:!0})}}}const TICK_INTERVAL=100;class StreamController extends BaseStreamController{constructor(Z,ee,ae){super(Z,ee,ae,"[stream-controller]",PlaylistLevelType.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:Z}=this;Z.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Z.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.on(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),Z.on(Events.ERROR,this.onError,this),Z.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Z.on(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Z.on(Events.BUFFER_CREATED,this.onBufferCreated,this),Z.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Z.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Z}=this;Z.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Z.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Z.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Z.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Z.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Z.off(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),Z.off(Events.ERROR,this.onError,this),Z.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Z.off(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Z.off(Events.BUFFER_CREATED,this.onBufferCreated,this),Z.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Z.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Z.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(Z){if(this.levels){const{lastCurrentTime:ee,hls:ae}=this;if(this.stopLoad(),this.setInterval(TICK_INTERVAL),this.level=-1,!this.startFragRequested){let ye=ae.startLevel;ye===-1&&(ae.config.testBandwidth&&this.levels.length>1?(ye=0,this.bitrateTest=!0):ye=ae.firstAutoLevel),this.level=ae.nextLoadLevel=ye,this.loadedmetadata=!1}ee>0&&Z===-1&&(this.log(`Override startPosition with lastCurrentTime @${ee.toFixed(3)}`),Z=ee),this.state=State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Z,this.tick()}else this._forceStartLoad=!0,this.state=State.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case State.WAITING_LEVEL:{const{levels:ee,level:ae}=this,ye=ee==null?void 0:ee[ae],ve=ye==null?void 0:ye.details;if(ve&&(!ve.live||this.levelLastLoaded===ye)){if(this.waitForCdnTuneIn(ve))break;this.state=State.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=State.IDLE;break}break}case State.FRAG_LOADING_WAITING_RETRY:{var Z;const ee=self.performance.now(),ae=this.retryDate;if(!ae||ee>=ae||(Z=this.media)!=null&&Z.seeking){const{levels:ye,level:ve}=this,be=ye==null?void 0:ye[ve];this.resetStartWhenNotLoaded(be||null),this.state=State.IDLE}}break}this.state===State.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:Z,levelLastLoaded:ee,levels:ae,media:ye}=this,{config:ve,nextLoadLevel:be}=Z;if(ee===null||!ye&&(this.startFragRequested||!ve.startFragPrefetch)||this.altAudio&&this.audioOnly||!(ae!=null&&ae[be]))return;const Qe=ae[be],Xe=this.getMainFwdBufferInfo();if(Xe===null)return;const Je=this.getLevelDetails();if(Je&&this._streamEnded(Xe,Je)){const ut={};this.altAudio&&(ut.type="video"),this.hls.trigger(Events.BUFFER_EOS,ut),this.state=State.ENDED;return}Z.loadLevel!==be&&Z.manualLevel===-1&&this.log(`Adapting to level ${be} from level ${this.level}`),this.level=Z.nextLoadLevel=be;const tt=Qe.details;if(!tt||this.state===State.WAITING_LEVEL||tt.live&&this.levelLastLoaded!==Qe){this.level=be,this.state=State.WAITING_LEVEL;return}const it=Xe.len,st=this.getMaxBufferLength(Qe.maxBitrate);if(it>=st)return;this.backtrackFragment&&this.backtrackFragment.start>Xe.end&&(this.backtrackFragment=null);const lt=this.backtrackFragment?this.backtrackFragment.start:Xe.end;let ct=this.getNextFragment(lt,tt);if(this.couldBacktrack&&!this.fragPrevious&&ct&&ct.sn!=="initSegment"&&this.fragmentTracker.getState(ct)!==FragmentState.OK){var gt;const mt=((gt=this.backtrackFragment)!=null?gt:ct).sn-tt.startSN,ei=tt.fragments[mt-1];ei&&ct.cc===ei.cc&&(ct=ei,this.fragmentTracker.removeFragment(ei))}else this.backtrackFragment&&Xe.len&&(this.backtrackFragment=null);if(ct&&this.isLoopLoading(ct,lt)){if(!ct.gap){const mt=this.audioOnly&&!this.altAudio?ElementaryStreamTypes.AUDIO:ElementaryStreamTypes.VIDEO,ei=(mt===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;ei&&this.afterBufferFlushed(ei,mt,PlaylistLevelType.MAIN)}ct=this.getNextFragmentLoopLoading(ct,tt,Xe,PlaylistLevelType.MAIN,st)}ct&&(ct.initSegment&&!ct.initSegment.data&&!this.bitrateTest&&(ct=ct.initSegment),this.loadFragment(ct,Qe,lt))}loadFragment(Z,ee,ae){const ye=this.fragmentTracker.getState(Z);this.fragCurrent=Z,ye===FragmentState.NOT_LOADED||ye===FragmentState.PARTIAL?Z.sn==="initSegment"?this._loadInitSegment(Z,ee):this.bitrateTest?(this.log(`Fragment ${Z.sn} of level ${Z.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(Z,ee)):(this.startFragRequested=!0,super.loadFragment(Z,ee,ae)):this.clearTrackerIfNeeded(Z)}getBufferedFrag(Z){return this.fragmentTracker.getBufferedFrag(Z,PlaylistLevelType.MAIN)}followingBufferedFrag(Z){return Z?this.getBufferedFrag(Z.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:Z,media:ee}=this;if(ee!=null&&ee.readyState){let ae;const ye=this.getAppendedFrag(ee.currentTime);ye&&ye.start>1&&this.flushMainBuffer(0,ye.start-1);const ve=this.getLevelDetails();if(ve!=null&&ve.live){const Qe=this.getMainFwdBufferInfo();if(!Qe||Qe.len<ve.targetduration*2)return}if(!ee.paused&&Z){const Qe=this.hls.nextLoadLevel,Xe=Z[Qe],Je=this.fragLastKbps;Je&&this.fragCurrent?ae=this.fragCurrent.duration*Xe.maxBitrate/(1e3*Je)+1:ae=0}else ae=0;const be=this.getBufferedFrag(ee.currentTime+ae);if(be){const Qe=this.followingBufferedFrag(be);if(Qe){this.abortCurrentFrag();const Xe=Qe.maxStartPTS?Qe.maxStartPTS:Qe.start,Je=Qe.duration,tt=Math.max(be.end,Xe+Math.min(Math.max(Je-this.config.maxFragLookUpTolerance,Je*(this.couldBacktrack?.5:.125)),Je*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(tt,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const Z=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,Z&&(Z.abortRequests(),this.fragmentTracker.removeFragment(Z)),this.state){case State.KEY_LOADING:case State.FRAG_LOADING:case State.FRAG_LOADING_WAITING_RETRY:case State.PARSING:case State.PARSED:this.state=State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(Z,ee){super.flushMainBuffer(Z,ee,this.altAudio?"video":null)}onMediaAttached(Z,ee){super.onMediaAttached(Z,ee);const ae=ee.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),ae.addEventListener("playing",this.onvplaying),ae.addEventListener("seeked",this.onvseeked),this.gapController=new GapController(this.config,ae,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:Z}=this;Z&&this.onvplaying&&this.onvseeked&&(Z.removeEventListener("playing",this.onvplaying),Z.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const Z=this.media,ee=Z?Z.currentTime:null;isFiniteNumber(ee)&&this.log(`Media seeked to ${ee.toFixed(3)}`);const ae=this.getMainFwdBufferInfo();if(ae===null||ae.len===0){this.warn(`Main forward buffer length on "seeked" event ${ae?ae.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(Z,ee){let ae=!1,ye=!1;ee.levels.forEach(ve=>{const be=ve.audioCodec;be&&(ae=ae||be.indexOf("mp4a.40.2")!==-1,ye=ye||be.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=ae&&ye&&!changeTypeSupported(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=ee.levels,this.startFragRequested=!1}onLevelLoading(Z,ee){const{levels:ae}=this;if(!ae||this.state!==State.IDLE)return;const ye=ae[ee.level];(!ye.details||ye.details.live&&this.levelLastLoaded!==ye||this.waitForCdnTuneIn(ye.details))&&(this.state=State.WAITING_LEVEL)}onLevelLoaded(Z,ee){var ae;const{levels:ye}=this,ve=ee.level,be=ee.details,Qe=be.totalduration;if(!ye){this.warn(`Levels were reset while loading level ${ve}`);return}this.log(`Level ${ve} loaded [${be.startSN},${be.endSN}]${be.lastPartSn?`[part-${be.lastPartSn}-${be.lastPartIndex}]`:""}, cc [${be.startCC}, ${be.endCC}] duration:${Qe}`);const Xe=ye[ve],Je=this.fragCurrent;Je&&(this.state===State.FRAG_LOADING||this.state===State.FRAG_LOADING_WAITING_RETRY)&&Je.level!==ee.level&&Je.loader&&this.abortCurrentFrag();let tt=0;if(be.live||(ae=Xe.details)!=null&&ae.live){var it;if(this.checkLiveUpdate(be),be.deltaUpdateFailed)return;tt=this.alignPlaylists(be,Xe.details,(it=this.levelLastLoaded)==null?void 0:it.details)}if(Xe.details=be,this.levelLastLoaded=Xe,this.hls.trigger(Events.LEVEL_UPDATED,{details:be,level:ve}),this.state===State.WAITING_LEVEL){if(this.waitForCdnTuneIn(be))return;this.state=State.IDLE}this.startFragRequested?be.live&&this.synchronizeToLiveEdge(be):this.setStartPosition(be,tt),this.tick()}_handleFragmentLoadProgress(Z){var ee;const{frag:ae,part:ye,payload:ve}=Z,{levels:be}=this;if(!be){this.warn(`Levels were reset while fragment load was in progress. Fragment ${ae.sn} of level ${ae.level} will not be buffered`);return}const Qe=be[ae.level],Xe=Qe.details;if(!Xe){this.warn(`Dropping fragment ${ae.sn} of level ${ae.level} after level details were reset`),this.fragmentTracker.removeFragment(ae);return}const Je=Qe.videoCodec,tt=Xe.PTSKnown||!Xe.live,it=(ee=ae.initSegment)==null?void 0:ee.data,st=this._getAudioCodec(Qe),lt=this.transmuxer=this.transmuxer||new TransmuxerInterface(this.hls,PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),ct=ye?ye.index:-1,gt=ct!==-1,ut=new ChunkMetadata(ae.level,ae.sn,ae.stats.chunkCount,ve.byteLength,ct,gt),mt=this.initPTS[ae.cc];lt.push(ve,it,st,Je,ae,ye,Xe.totalduration,tt,ut,mt)}onAudioTrackSwitching(Z,ee){const ae=this.altAudio;if(!!!ee.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const be=this.fragCurrent;be&&(this.log("Switching to main audio track, cancel main fragment load"),be.abortRequests(),this.fragmentTracker.removeFragment(be)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const ve=this.hls;ae&&(ve.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),ve.trigger(Events.AUDIO_TRACK_SWITCHED,ee)}}onAudioTrackSwitched(Z,ee){const ae=ee.id,ye=!!this.hls.audioTracks[ae].url;if(ye){const ve=this.videoBuffer;ve&&this.mediaBuffer!==ve&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=ve)}this.altAudio=ye,this.tick()}onBufferCreated(Z,ee){const ae=ee.tracks;let ye,ve,be=!1;for(const Qe in ae){const Xe=ae[Qe];if(Xe.id==="main"){if(ve=Qe,ye=Xe,Qe==="video"){const Je=ae[Qe];Je&&(this.videoBuffer=Je.buffer)}}else be=!0}be&&ye?(this.log(`Alternate track found, use ${ve}.buffered to schedule main fragment loading`),this.mediaBuffer=ye.buffer):this.mediaBuffer=this.media}onFragBuffered(Z,ee){const{frag:ae,part:ye}=ee;if(ae&&ae.type!==PlaylistLevelType.MAIN)return;if(this.fragContextChanged(ae)){this.warn(`Fragment ${ae.sn}${ye?" p: "+ye.index:""} of level ${ae.level} finished buffering, but was aborted. state: ${this.state}`),this.state===State.PARSED&&(this.state=State.IDLE);return}const ve=ye?ye.stats:ae.stats;this.fragLastKbps=Math.round(8*ve.total/(ve.buffering.end-ve.loading.first)),ae.sn!=="initSegment"&&(this.fragPrevious=ae),this.fragBufferedComplete(ae,ye)}onError(Z,ee){var ae;if(ee.fatal){this.state=State.ERROR;return}switch(ee.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.MAIN,ee);break;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!ee.levelRetry&&this.state===State.WAITING_LEVEL&&((ae=ee.context)==null?void 0:ae.type)===PlaylistContextType.LEVEL&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_APPEND_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:if(!ee.parent||ee.parent!=="main")return;if(ee.details===ErrorDetails.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(ee)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(ee);break}}checkBuffer(){const{media:Z,gapController:ee}=this;if(!(!Z||!ee||!Z.readyState)){if(this.loadedmetadata||!BufferHelper.getBuffered(Z).length){const ae=this.state!==State.IDLE?this.fragCurrent:null;ee.poll(this.lastCurrentTime,ae)}this.lastCurrentTime=Z.currentTime}}onFragLoadEmergencyAborted(){this.state=State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(Z,{type:ee}){if(ee!==ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){const ae=(ee===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(ae,ee,PlaylistLevelType.MAIN),this.tick()}}onLevelsUpdated(Z,ee){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=ee.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:Z}=this;if(!Z)return;const ee=Z.currentTime;let ae=this.startPosition;if(ae>=0&&ee<ae){if(Z.seeking){this.log(`could not seek to ${ae}, already seeking at ${ee}`);return}const ye=BufferHelper.getBuffered(Z),be=(ye.length?ye.start(0):0)-ae;be>0&&(be<this.config.maxBufferHole||be<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${be} to match buffer start`),ae+=be,this.startPosition=ae),this.log(`seek to target start position ${ae} from current time ${ee}`),Z.currentTime=ae}}_getAudioCodec(Z){let ee=this.config.defaultAudioCodec||Z.audioCodec;return this.audioCodecSwap&&ee&&(this.log("Swapping audio codec"),ee.indexOf("mp4a.40.5")!==-1?ee="mp4a.40.2":ee="mp4a.40.5"),ee}_loadBitrateTestFrag(Z,ee){Z.bitrateTest=!0,this._doFragLoad(Z,ee).then(ae=>{const{hls:ye}=this;if(!ae||this.fragContextChanged(Z))return;ee.fragmentError=0,this.state=State.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const ve=Z.stats;ve.parsing.start=ve.parsing.end=ve.buffering.start=ve.buffering.end=self.performance.now(),ye.trigger(Events.FRAG_LOADED,ae),Z.bitrateTest=!1})}_handleTransmuxComplete(Z){var ee;const ae="main",{hls:ye}=this,{remuxResult:ve,chunkMeta:be}=Z,Qe=this.getCurrentContext(be);if(!Qe){this.resetWhenMissingContext(be);return}const{frag:Xe,part:Je,level:tt}=Qe,{video:it,text:st,id3:lt,initSegment:ct}=ve,{details:gt}=tt,ut=this.altAudio?void 0:ve.audio;if(this.fragContextChanged(Xe)){this.fragmentTracker.removeFragment(Xe);return}if(this.state=State.PARSING,ct){if(ct!=null&&ct.tracks){const ni=Xe.initSegment||Xe;this._bufferInitSegment(tt,ct.tracks,ni,be),ye.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:ni,id:ae,tracks:ct.tracks})}const mt=ct.initPTS,ei=ct.timescale;isFiniteNumber(mt)&&(this.initPTS[Xe.cc]={baseTime:mt,timescale:ei},ye.trigger(Events.INIT_PTS_FOUND,{frag:Xe,id:ae,initPTS:mt,timescale:ei}))}if(it&&gt&&Xe.sn!=="initSegment"){const mt=gt.fragments[Xe.sn-1-gt.startSN],ei=Xe.sn===gt.startSN,ni=!mt||Xe.cc>mt.cc;if(ve.independent!==!1){const{startPTS:ri,endPTS:si,startDTS:li,endDTS:ai}=it;if(Je)Je.elementaryStreams[it.type]={startPTS:ri,endPTS:si,startDTS:li,endDTS:ai};else if(it.firstKeyFrame&&it.independent&&be.id===1&&!ni&&(this.couldBacktrack=!0),it.dropped&&it.independent){const ci=this.getMainFwdBufferInfo(),Ci=(ci?ci.end:this.getLoadPosition())+this.config.maxBufferHole,pi=it.firstKeyFramePTS?it.firstKeyFramePTS:ri;if(!ei&&Ci<pi-this.config.maxBufferHole&&!ni){this.backtrack(Xe);return}else ni&&(Xe.gap=!0);Xe.setElementaryStreamInfo(it.type,Xe.start,si,Xe.start,ai,!0)}else ei&&ri>MAX_START_GAP_JUMP&&(Xe.gap=!0);Xe.setElementaryStreamInfo(it.type,ri,si,li,ai),this.backtrackFragment&&(this.backtrackFragment=Xe),this.bufferFragmentData(it,Xe,Je,be,ei||ni)}else if(ei||ni)Xe.gap=!0;else{this.backtrack(Xe);return}}if(ut){const{startPTS:mt,endPTS:ei,startDTS:ni,endDTS:ri}=ut;Je&&(Je.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:mt,endPTS:ei,startDTS:ni,endDTS:ri}),Xe.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,mt,ei,ni,ri),this.bufferFragmentData(ut,Xe,Je,be)}if(gt&&lt!=null&&(ee=lt.samples)!=null&&ee.length){const mt={id:ae,frag:Xe,details:gt,samples:lt.samples};ye.trigger(Events.FRAG_PARSING_METADATA,mt)}if(gt&&st){const mt={id:ae,frag:Xe,details:gt,samples:st.samples};ye.trigger(Events.FRAG_PARSING_USERDATA,mt)}}_bufferInitSegment(Z,ee,ae,ye){if(this.state!==State.PARSING)return;this.audioOnly=!!ee.audio&&!ee.video,this.altAudio&&!this.audioOnly&&delete ee.audio;const{audio:ve,video:be,audiovideo:Qe}=ee;if(ve){let Xe=Z.audioCodec;const Je=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(Xe&&(Xe.indexOf("mp4a.40.5")!==-1?Xe="mp4a.40.2":Xe="mp4a.40.5"),ve.metadata.channelCount!==1&&Je.indexOf("firefox")===-1&&(Xe="mp4a.40.5")),Xe&&Xe.indexOf("mp4a.40.5")!==-1&&Je.indexOf("android")!==-1&&ve.container!=="audio/mpeg"&&(Xe="mp4a.40.2",this.log(`Android: force audio codec to ${Xe}`)),Z.audioCodec&&Z.audioCodec!==Xe&&this.log(`Swapping manifest audio codec "${Z.audioCodec}" for "${Xe}"`),ve.levelCodec=Xe,ve.id="main",this.log(`Init audio buffer, container:${ve.container}, codecs[selected/level/parsed]=[${Xe||""}/${Z.audioCodec||""}/${ve.codec}]`)}be&&(be.levelCodec=Z.videoCodec,be.id="main",this.log(`Init video buffer, container:${be.container}, codecs[level/parsed]=[${Z.videoCodec||""}/${be.codec}]`)),Qe&&this.log(`Init audiovideo buffer, container:${Qe.container}, codecs[level/parsed]=[${Z.codecs}/${Qe.codec}]`),this.hls.trigger(Events.BUFFER_CODECS,ee),Object.keys(ee).forEach(Xe=>{const tt=ee[Xe].initSegment;tt!=null&&tt.byteLength&&this.hls.trigger(Events.BUFFER_APPENDING,{type:Xe,data:tt,frag:ae,part:null,chunkMeta:ye,parent:ae.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,PlaylistLevelType.MAIN)}backtrack(Z){this.couldBacktrack=!0,this.backtrackFragment=Z,this.resetTransmuxer(),this.flushBufferGap(Z),this.fragmentTracker.removeFragment(Z),this.fragPrevious=null,this.nextLoadPosition=Z.start,this.state=State.IDLE}checkFragmentChanged(){const Z=this.media;let ee=null;if(Z&&Z.readyState>1&&Z.seeking===!1){const ae=Z.currentTime;if(BufferHelper.isBuffered(Z,ae)?ee=this.getAppendedFrag(ae):BufferHelper.isBuffered(Z,ae+.1)&&(ee=this.getAppendedFrag(ae+.1)),ee){this.backtrackFragment=null;const ye=this.fragPlaying,ve=ee.level;(!ye||ee.sn!==ye.sn||ye.level!==ve)&&(this.fragPlaying=ee,this.hls.trigger(Events.FRAG_CHANGED,{frag:ee}),(!ye||ye.level!==ve)&&this.hls.trigger(Events.LEVEL_SWITCHED,{level:ve}))}}}get nextLevel(){const Z=this.nextBufferedFrag;return Z?Z.level:-1}get currentFrag(){const Z=this.media;return Z?this.fragPlaying||this.getAppendedFrag(Z.currentTime):null}get currentProgramDateTime(){const Z=this.media;if(Z){const ee=Z.currentTime,ae=this.currentFrag;if(ae&&isFiniteNumber(ee)&&isFiniteNumber(ae.programDateTime)){const ye=ae.programDateTime+(ee-ae.start)*1e3;return new Date(ye)}}return null}get currentLevel(){const Z=this.currentFrag;return Z?Z.level:-1}get nextBufferedFrag(){const Z=this.currentFrag;return Z?this.followingBufferedFrag(Z):null}get forceStartLoad(){return this._forceStartLoad}}class Hls{static get version(){return"1.5.3"}static isMSESupported(){return isMSESupported()}static isSupported(){return isSupported()}static getMediaSource(){return getMediaSource()}static get Events(){return Events}static get ErrorTypes(){return ErrorTypes}static get ErrorDetails(){return ErrorDetails}static get DefaultConfig(){return Hls.defaultConfig?Hls.defaultConfig:hlsDefaultConfig}static set DefaultConfig(Z){Hls.defaultConfig=Z}constructor(Z={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new EventEmitter,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,enableLogs(Z.debug||!1,"Hls instance");const ee=this.config=mergeConfig(Hls.DefaultConfig,Z);this.userConfig=Z,ee.progressive&&enableStreamingMode(ee);const{abrController:ae,bufferController:ye,capLevelController:ve,errorController:be,fpsController:Qe}=ee,Xe=new be(this),Je=this.abrController=new ae(this),tt=this.bufferController=new ye(this),it=this.capLevelController=new ve(this),st=new Qe(this),lt=new PlaylistLoader(this),ct=new ID3TrackController(this),gt=ee.contentSteeringController,ut=gt?new gt(this):null,mt=this.levelController=new LevelController(this,ut),ei=new FragmentTracker(this),ni=new KeyLoader(this.config),ri=this.streamController=new StreamController(this,ei,ni);it.setStreamController(ri),st.setStreamController(ri);const si=[lt,mt,ri];ut&&si.splice(1,0,ut),this.networkControllers=si;const li=[Je,tt,it,st,ct,ei];this.audioTrackController=this.createController(ee.audioTrackController,si);const ai=ee.audioStreamController;ai&&si.push(new ai(this,ei,ni)),this.subtitleTrackController=this.createController(ee.subtitleTrackController,si);const ci=ee.subtitleStreamController;ci&&si.push(new ci(this,ei,ni)),this.createController(ee.timelineController,li),ni.emeController=this.emeController=this.createController(ee.emeController,li),this.cmcdController=this.createController(ee.cmcdController,li),this.latencyController=this.createController(LatencyController,li),this.coreComponents=li,si.push(Xe);const Ci=Xe.onErrorOut;typeof Ci=="function"&&this.on(Events.ERROR,Ci,Xe)}createController(Z,ee){if(Z){const ae=new Z(this);return ee&&ee.push(ae),ae}return null}on(Z,ee,ae=this){this._emitter.on(Z,ee,ae)}once(Z,ee,ae=this){this._emitter.once(Z,ee,ae)}removeAllListeners(Z){this._emitter.removeAllListeners(Z)}off(Z,ee,ae=this,ye){this._emitter.off(Z,ee,ae,ye)}listeners(Z){return this._emitter.listeners(Z)}emit(Z,ee,ae){return this._emitter.emit(Z,ee,ae)}trigger(Z,ee){if(this.config.debug)return this.emit(Z,Z,ee);try{return this.emit(Z,Z,ee)}catch(ae){if(logger.error("An internal error happened while handling event "+Z+'. Error message: "'+ae.message+'". Here is a stacktrace:',ae),!this.triggeringException){this.triggeringException=!0;const ye=Z===Events.ERROR;this.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:ye,event:Z,error:ae}),this.triggeringException=!1}}return!1}listenerCount(Z){return this._emitter.listenerCount(Z)}destroy(){logger.log("destroy"),this.trigger(Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(ee=>ee.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(ee=>ee.destroy()),this.coreComponents.length=0;const Z=this.config;Z.xhrSetup=Z.fetchSetup=void 0,this.userConfig=null}attachMedia(Z){logger.log("attachMedia"),this._media=Z,this.trigger(Events.MEDIA_ATTACHING,{media:Z})}detachMedia(){logger.log("detachMedia"),this.trigger(Events.MEDIA_DETACHING,void 0),this._media=null}loadSource(Z){this.stopLoad();const ee=this.media,ae=this.url,ye=this.url=urlToolkitExports.buildAbsoluteURL(self.location.href,Z,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,logger.log(`loadSource:${ye}`),ee&&ae&&(ae!==ye||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(ee)),this.trigger(Events.MANIFEST_LOADING,{url:Z})}startLoad(Z=-1){logger.log(`startLoad(${Z})`),this.started=!0,this.networkControllers.forEach(ee=>{ee.startLoad(Z)})}stopLoad(){logger.log("stopLoad"),this.started=!1,this.networkControllers.forEach(Z=>{Z.stopLoad()})}resumeBuffering(){this.started&&this.networkControllers.forEach(Z=>{"fragmentLoader"in Z&&Z.startLoad(-1)})}pauseBuffering(){this.networkControllers.forEach(Z=>{"fragmentLoader"in Z&&Z.stopLoad()})}swapAudioCodec(){logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){logger.log("recoverMediaError");const Z=this._media;this.detachMedia(),Z&&this.attachMedia(Z)}removeLevel(Z){this.levelController.removeLevel(Z)}get levels(){const Z=this.levelController.levels;return Z||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(Z){logger.log(`set currentLevel:${Z}`),this.levelController.manualLevel=Z,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(Z){logger.log(`set nextLevel:${Z}`),this.levelController.manualLevel=Z,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(Z){logger.log(`set loadLevel:${Z}`),this.levelController.manualLevel=Z}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(Z){this.levelController.nextLoadLevel=Z}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(Z){logger.log(`set firstLevel:${Z}`),this.levelController.firstLevel=Z}get startLevel(){const Z=this.levelController.startLevel;return Z===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:Z}set startLevel(Z){logger.log(`set startLevel:${Z}`),Z!==-1&&(Z=Math.max(Z,this.minAutoLevel)),this.levelController.startLevel=Z}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(Z){const ee=!!Z;ee!==this.config.capLevelToPlayerSize&&(ee?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=ee)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:Z}=this.abrController;return Z?Z.getEstimate():NaN}set bandwidthEstimate(Z){this.abrController.resetEstimator(Z)}get ttfbEstimate(){const{bwEstimator:Z}=this.abrController;return Z?Z.getEstimateTTFB():NaN}set autoLevelCapping(Z){this._autoLevelCapping!==Z&&(logger.log(`set autoLevelCapping:${Z}`),this._autoLevelCapping=Z,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(Z){isHdcpLevel(Z)&&this._maxHdcpLevel!==Z&&(this._maxHdcpLevel=Z,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:Z,config:{minAutoBitrate:ee}}=this;if(!Z)return 0;const ae=Z.length;for(let ye=0;ye<ae;ye++)if(Z[ye].maxBitrate>=ee)return ye;return 0}get maxAutoLevel(){const{levels:Z,autoLevelCapping:ee,maxHdcpLevel:ae}=this;let ye;if(ee===-1&&Z!=null&&Z.length?ye=Z.length-1:ye=ee,ae)for(let ve=ye;ve--;){const be=Z[ve].attrs["HDCP-LEVEL"];if(be&&be<=ae)return ve}return ye}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(Z){this.abrController.nextAutoLevel=Z}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(Z){var ee;return(ee=this.audioTrackController)==null?void 0:ee.setAudioOption(Z)}setSubtitleOption(Z){var ee;return(ee=this.subtitleTrackController)==null||ee.setSubtitleOption(Z),null}get allAudioTracks(){const Z=this.audioTrackController;return Z?Z.allAudioTracks:[]}get audioTracks(){const Z=this.audioTrackController;return Z?Z.audioTracks:[]}get audioTrack(){const Z=this.audioTrackController;return Z?Z.audioTrack:-1}set audioTrack(Z){const ee=this.audioTrackController;ee&&(ee.audioTrack=Z)}get allSubtitleTracks(){const Z=this.subtitleTrackController;return Z?Z.allSubtitleTracks:[]}get subtitleTracks(){const Z=this.subtitleTrackController;return Z?Z.subtitleTracks:[]}get subtitleTrack(){const Z=this.subtitleTrackController;return Z?Z.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(Z){const ee=this.subtitleTrackController;ee&&(ee.subtitleTrack=Z)}get subtitleDisplay(){const Z=this.subtitleTrackController;return Z?Z.subtitleDisplay:!1}set subtitleDisplay(Z){const ee=this.subtitleTrackController;ee&&(ee.subtitleDisplay=Z)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(Z){this.config.lowLatencyMode=Z}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Hls.defaultConfig=void 0;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let ie=0;ie<256;++ie)byteToHex.push((ie+256).toString(16).slice(1));function unsafeStringify(ie,Z=0){return byteToHex[ie[Z+0]]+byteToHex[ie[Z+1]]+byteToHex[ie[Z+2]]+byteToHex[ie[Z+3]]+"-"+byteToHex[ie[Z+4]]+byteToHex[ie[Z+5]]+"-"+byteToHex[ie[Z+6]]+byteToHex[ie[Z+7]]+"-"+byteToHex[ie[Z+8]]+byteToHex[ie[Z+9]]+"-"+byteToHex[ie[Z+10]]+byteToHex[ie[Z+11]]+byteToHex[ie[Z+12]]+byteToHex[ie[Z+13]]+byteToHex[ie[Z+14]]+byteToHex[ie[Z+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(ie,Z,ee){if(native.randomUUID&&!Z&&!ie)return native.randomUUID();ie=ie||{};const ae=ie.random||(ie.rng||rng)();if(ae[6]=ae[6]&15|64,ae[8]=ae[8]&63|128,Z){ee=ee||0;for(let ye=0;ye<16;++ye)Z[ee+ye]=ae[ye];return Z}return unsafeStringify(ae)}function $db6c3485150b8e66$export$1ab7ae714698c4b8(ie){const[Z,ee]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(ie){ee({width:ie.offsetWidth,height:ie.offsetHeight});const ae=new ResizeObserver(ye=>{if(!Array.isArray(ye)||!ye.length)return;const ve=ye[0];let be,Qe;if("borderBoxSize"in ve){const Xe=ve.borderBoxSize,Je=Array.isArray(Xe)?Xe[0]:Xe;be=Je.inlineSize,Qe=Je.blockSize}else be=ie.offsetWidth,Qe=ie.offsetHeight;ee({width:be,height:Qe})});return ae.observe(ie,{box:"border-box"}),()=>ae.unobserve(ie)}else ee(void 0)},[ie]),Z}function $010c2913dbd2fe3d$export$5cae361ad82dce8b(ie){const Z=reactExports.useRef({value:ie,previous:ie});return reactExports.useMemo(()=>(Z.current.value!==ie&&(Z.current.previous=Z.current.value,Z.current.value=ie),Z.current.previous),[ie])}const $ce77a8961b41be9e$var$RADIO_NAME="Radio",[$ce77a8961b41be9e$var$createRadioContext,$ce77a8961b41be9e$export$67d2296460f1b002]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($ce77a8961b41be9e$var$RADIO_NAME),[$ce77a8961b41be9e$var$RadioProvider,$ce77a8961b41be9e$var$useRadioContext]=$ce77a8961b41be9e$var$createRadioContext($ce77a8961b41be9e$var$RADIO_NAME),$ce77a8961b41be9e$export$d7b12c4107be0d61=reactExports.forwardRef((ie,Z)=>{const{__scopeRadio:ee,name:ae,checked:ye=!1,required:ve,disabled:be,value:Qe="on",onCheck:Xe,...Je}=ie,[tt,it]=reactExports.useState(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,gt=>it(gt)),lt=reactExports.useRef(!1),ct=tt?!!tt.closest("form"):!0;return reactExports.createElement($ce77a8961b41be9e$var$RadioProvider,{scope:ee,checked:ye,disabled:be},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"radio","aria-checked":ye,"data-state":$ce77a8961b41be9e$var$getState(ye),"data-disabled":be?"":void 0,disabled:be,value:Qe},Je,{ref:st,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onClick,gt=>{ye||Xe==null||Xe(),ct&&(lt.current=gt.isPropagationStopped(),lt.current||gt.stopPropagation())})})),ct&&reactExports.createElement($ce77a8961b41be9e$var$BubbleInput,{control:tt,bubbles:!lt.current,name:ae,value:Qe,checked:ye,required:ve,disabled:be,style:{transform:"translateX(-100%)"}}))}),$ce77a8961b41be9e$var$BubbleInput=ie=>{const{control:Z,checked:ee,bubbles:ae=!0,...ye}=ie,ve=reactExports.useRef(null),be=$010c2913dbd2fe3d$export$5cae361ad82dce8b(ee),Qe=$db6c3485150b8e66$export$1ab7ae714698c4b8(Z);return reactExports.useEffect(()=>{const Xe=ve.current,Je=window.HTMLInputElement.prototype,it=Object.getOwnPropertyDescriptor(Je,"checked").set;if(be!==ee&&it){const st=new Event("click",{bubbles:ae});it.call(Xe,ee),Xe.dispatchEvent(st)}},[be,ee,ae]),reactExports.createElement("input",_extends$1({type:"radio","aria-hidden":!0,defaultChecked:ee},ye,{tabIndex:-1,ref:ve,style:{...ie.style,...Qe,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $ce77a8961b41be9e$var$getState(ie){return ie?"checked":"unchecked"}const $f99a8c78507165f7$var$ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$f99a8c78507165f7$var$RADIO_GROUP_NAME="RadioGroup",[$f99a8c78507165f7$var$createRadioGroupContext,$f99a8c78507165f7$export$c547093f11b76da2]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($f99a8c78507165f7$var$RADIO_GROUP_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4,$ce77a8961b41be9e$export$67d2296460f1b002]),$f99a8c78507165f7$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),$f99a8c78507165f7$var$useRadioScope=$ce77a8961b41be9e$export$67d2296460f1b002(),[$f99a8c78507165f7$var$RadioGroupProvider,$f99a8c78507165f7$var$useRadioGroupContext]=$f99a8c78507165f7$var$createRadioGroupContext($f99a8c78507165f7$var$RADIO_GROUP_NAME),$f99a8c78507165f7$export$a98f0dcb43a68a25=reactExports.forwardRef((ie,Z)=>{const{__scopeRadioGroup:ee,name:ae,defaultValue:ye,value:ve,required:be=!1,disabled:Qe=!1,orientation:Xe,dir:Je,loop:tt=!0,onValueChange:it,...st}=ie,lt=$f99a8c78507165f7$var$useRovingFocusGroupScope(ee),ct=$f631663db3294ace$export$b39126d51d94e6f3(Je),[gt,ut]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:ve,defaultProp:ye,onChange:it});return reactExports.createElement($f99a8c78507165f7$var$RadioGroupProvider,{scope:ee,name:ae,required:be,disabled:Qe,value:gt,onValueChange:ut},reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},lt,{orientation:Xe,dir:ct,loop:tt}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"radiogroup","aria-required":be,"aria-orientation":Xe,"data-disabled":Qe?"":void 0,dir:ct},st,{ref:Z}))))}),$f99a8c78507165f7$var$ITEM_NAME="RadioGroupItem",$f99a8c78507165f7$export$9f866c100ef519e4=reactExports.forwardRef((ie,Z)=>{const{__scopeRadioGroup:ee,disabled:ae,...ye}=ie,ve=$f99a8c78507165f7$var$useRadioGroupContext($f99a8c78507165f7$var$ITEM_NAME,ee),be=ve.disabled||ae,Qe=$f99a8c78507165f7$var$useRovingFocusGroupScope(ee),Xe=$f99a8c78507165f7$var$useRadioScope(ee),Je=reactExports.useRef(null),tt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,Je),it=ve.value===ye.value,st=reactExports.useRef(!1);return reactExports.useEffect(()=>{const lt=gt=>{$f99a8c78507165f7$var$ARROW_KEYS.includes(gt.key)&&(st.current=!0)},ct=()=>st.current=!1;return document.addEventListener("keydown",lt),document.addEventListener("keyup",ct),()=>{document.removeEventListener("keydown",lt),document.removeEventListener("keyup",ct)}},[]),reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},Qe,{focusable:!be,active:it}),reactExports.createElement($ce77a8961b41be9e$export$d7b12c4107be0d61,_extends$1({disabled:be,required:ve.required,checked:it},Xe,ye,{name:ve.name,ref:tt,onCheck:()=>ve.onValueChange(ye.value),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(lt=>{lt.key==="Enter"&&lt.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye.onFocus,()=>{var lt;st.current&&((lt=Je.current)===null||lt===void 0||lt.click())})})))}),$f99a8c78507165f7$export$be92b6f5f03c0fe9=$f99a8c78507165f7$export$a98f0dcb43a68a25,$f99a8c78507165f7$export$6d08773d2e66f8f2=$f99a8c78507165f7$export$9f866c100ef519e4;function ParserError(ie,Z){this.message=ie,this.error=Z}ParserError.prototype=Object.create(Error.prototype);const TIMESTAMP_REGEXP=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parse$3(ie,Z){Z||(Z={});const{meta:ee=!1,strict:ae=!0}=Z;if(typeof ie!="string")throw new ParserError("Input must be a string");ie=ie.trim(),ie=ie.replace(/\r\n/g,`
`),ie=ie.replace(/\r/g,`
`);const ye=ie.split(`

`),ve=ye.shift();if(!ve.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');const be=ve.split(`
`),Qe=be[0].replace("WEBVTT","");if(Qe.length>0&&Qe[0]!==" "&&Qe[0]!=="	")throw new ParserError("Header comment must start with space or tab");if(ye.length===0&&be.length===1)return{valid:!0,strict:ae,cues:[],errors:[]};if(!ee&&be.length>1&&be[1]!=="")throw new ParserError("Missing blank line after signature");const{cues:Xe,errors:Je}=parseCues(ye,ae);if(ae&&Je.length>0)throw Je[0];const tt=ee?parseMeta(be):null,it={valid:Je.length===0,strict:ae,cues:Xe,errors:Je};return ee&&(it.meta=tt),it}function parseMeta(ie){const Z={};return ie.slice(1).forEach(ee=>{const ae=ee.indexOf(":"),ye=ee.slice(0,ae).trim(),ve=ee.slice(ae+1).trim();Z[ye]=ve}),Object.keys(Z).length>0?Z:null}function parseCues(ie,Z){const ee=[];return{cues:ie.map((ye,ve)=>{try{return parseCue(ye,ve,Z)}catch(be){return ee.push(be),null}}).filter(Boolean),errors:ee}}function parseCue(ie,Z,ee){let ae="",ye=0,ve=.01,be="",Qe="";const Xe=ie.split(`
`).filter(Boolean);if(Xe.length>0&&Xe[0].trim().startsWith("NOTE"))return null;if(Xe.length===1&&!Xe[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${Z})`);if(Xe.length>1&&!(Xe[0].includes("-->")||Xe[1].includes("-->"))){const tt=`Cue identifier needs to be followed by timestamp (cue #${Z})`;throw new ParserError(tt)}Xe.length>1&&Xe[1].includes("-->")&&(ae=Xe.shift());const Je=typeof Xe[0]=="string"&&Xe[0].split(" --> ");if(Je.length!==2||!validTimestamp(Je[0])||!validTimestamp(Je[1]))throw new ParserError(`Invalid cue timestamp (cue #${Z})`);if(ye=parseTimestamp(Je[0]),ve=parseTimestamp(Je[1]),ee){if(ye>ve)throw new ParserError(`Start timestamp greater than end (cue #${Z})`);if(ve<=ye)throw new ParserError(`End must be greater than start (cue #${Z})`)}if(!ee&&ve<ye)throw new ParserError(`End must be greater or equal to start when not strict (cue #${Z})`);return Qe=Je[1].replace(TIMESTAMP_REGEXP,"").trim(),Xe.shift(),be=Xe.join(`
`),be?{identifier:ae,start:ye,end:ve,text:be,styles:Qe}:!1}function validTimestamp(ie){return TIMESTAMP_REGEXP.test(ie)}function parseTimestamp(ie){const Z=ie.match(TIMESTAMP_REGEXP);let ee=parseFloat(Z[1]||0)*60*60;return ee+=parseFloat(Z[2])*60,ee+=parseFloat(Z[3]),ee}var parser={ParserError,parse:parse$3};function CompilerError(ie,Z){this.message=ie,this.error=Z}CompilerError.prototype=Object.create(Error.prototype);function compile$1(ie){if(!ie)throw new CompilerError("Input must be non-null");if(typeof ie!="object")throw new CompilerError("Input must be an object");if(Array.isArray(ie))throw new CompilerError("Input cannot be array");if(!ie.valid)throw new CompilerError("Input must be valid");let Z=`WEBVTT
`;if(ie.meta){if(typeof ie.meta!="object"||Array.isArray(ie.meta))throw new CompilerError("Metadata must be an object");Object.entries(ie.meta).forEach(ae=>{if(typeof ae[1]!="string")throw new CompilerError(`Metadata value for "${ae[0]}" must be string`);Z+=`${ae[0]}: ${ae[1]}
`})}let ee=null;return ie.cues.forEach((ae,ye)=>{if(ee&&ee>ae.start)throw new CompilerError(`Cue number ${ye} is not in chronological order`);ee=ae.start,Z+=`
`,Z+=compileCue(ae),Z+=`
`}),Z}function compileCue(ie){if(typeof ie!="object")throw new CompilerError("Cue malformed: not of type object");if(typeof ie.identifier!="string"&&typeof ie.identifier!="number"&&ie.identifier!==null)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(ie)}`);if(isNaN(ie.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(ie)}`);if(isNaN(ie.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(ie)}`);if(ie.start>=ie.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(ie)}`);if(typeof ie.text!="string")throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(ie)}`);if(typeof ie.styles!="string")throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(ie)}`);let Z="";ie.identifier.length>0&&(Z+=`${ie.identifier}
`);const ee=convertTimestamp(ie.start),ae=convertTimestamp(ie.end);return Z+=`${ee} --> ${ae}`,Z+=ie.styles?` ${ie.styles}`:"",Z+=`
${ie.text}`,Z}function convertTimestamp(ie){const Z=pad$1(calculateHours(ie),2),ee=pad$1(calculateMinutes(ie),2),ae=pad$1(calculateSeconds(ie),2),ye=pad$1(calculateMs(ie),3);return`${Z}:${ee}:${ae}.${ye}`}function pad$1(ie,Z){let ee=`${ie}`;for(;ee.length<Z;)ee=`0${ee}`;return ee}function calculateHours(ie){return Math.floor(ie/60/60)}function calculateMinutes(ie){return Math.floor(ie/60)%60}function calculateSeconds(ie){return Math.floor(ie%60)}function calculateMs(ie){return Math.floor((ie%1).toFixed(4)*1e3)}var compiler={CompilerError,compile:compile$1};const parse$2=parser.parse;function segment$2(ie,Z){Z=Z||10;const ee=parse$2(ie),ae=[];let ye=[],ve=null,be=0,Qe=0;return ee.cues.forEach((Xe,Je)=>{const tt=Je===0,it=Je===ee.cues.length-1,st=Xe.start,lt=Xe.end,ct=it?1/0:ee.cues[Je+1].start,gt=tt?lt:lt-st,ut=tt?0:st-ee.cues[Je-1].end;be=be+gt+ut,`${Je}`,ae.length+1,ve&&(ye.push(ve),be+=ve.end-Qe,ve=null),ye.push(Xe);let mt=ct-lt<Z&&ut<Z&&be>Z;if(shouldSegment(Qe,Z,ct,ut)){const ei=segmentDuration(it,lt,Z,be,Qe);ae.push({duration:ei,cues:ye}),Qe+=ei,be=0,ye=[]}else mt=!1;mt&&(ve=Xe)}),ae}function shouldSegment(ie,Z,ee,ae){const ye=alignToSegmentLength(ae,Z);return(ae<=Z||ye+ie<ee)&&ee-ie>=Z}function segmentDuration(ie,Z,ee,ae,ye){let ve=ee;return ae>ee&&(ve=alignToSegmentLength(ae-ee,ee)),ie?ve=parseFloat((Z-ye).toFixed(2)):ve=Math.round(ve),ve}function alignToSegmentLength(ie,Z){return ie+=Z-ie%Z,ie}function debug(ie){}var segmenter={segment:segment$2};const segment$1=segmenter.segment;function hlsSegment(ie,Z,ee){typeof ee>"u"&&(ee="900000");const ae=segment$1(ie,Z),ye=[];return ae.forEach((ve,be)=>{const Qe=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${ee},LOCAL:00:00:00.000

${printableCues(ve.cues)}
`,Xe=generateSegmentFilename(be);ye.push({filename:Xe,content:Qe})}),ye}function hlsSegmentPlaylist(ie,Z){const ee=segment$1(ie,Z),ae=printableSegments(ee);return`#EXTM3U
#EXT-X-TARGETDURATION:${Math.round(findLongestSegment(ee))}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${ae}
#EXT-X-ENDLIST
`}function pad(ie,Z){return`${"0".repeat(Math.max(0,Z-ie.toString().length))}${ie}`}function generateSegmentFilename(ie){return`${ie}.vtt`}function printableSegments(ie){const Z=[];return ie.forEach((ee,ae)=>{Z.push(`#EXTINF:${ee.duration.toFixed(5)},
${generateSegmentFilename(ae)}`)}),Z.join(`
`)}function findLongestSegment(ie){let Z=0;return ie.forEach(ee=>{ee.duration>Z&&(Z=ee.duration)}),Z}function printableCues(ie){const Z=[];return ie.forEach(ee=>{Z.push(printableCue(ee))}),Z.join(`

`)}function printableCue(ie){const Z=[];ie.identifier&&Z.push(ie.identifier);const ee=printableTimestamp(ie.start),ae=printableTimestamp(ie.end),ye=ie.styles?`${ie.styles}`:"";return Z.push(`${ee} --> ${ae} ${ye}`),Z.push(ie.text),Z.join(`
`)}function printableTimestamp(ie){const Z=(ie%1).toFixed(3);ie=Math.round(ie-Z);const ee=Math.floor(ie/3600),ae=Math.floor((ie-ee*3600)/60),ye=ie-ee*3600-ae*60;return`${`${pad(ee,2)}:`}${pad(ae,2)}:${pad(ye,2)}.${pad(Z*1e3,3)}`}var hls$1={hlsSegment,hlsSegmentPlaylist};const parse$1=parser.parse,compile=compiler.compile,segment=segmenter.segment,hls=hls$1;var nodeWebvtt={parse:parse$1,compile,segment,hls};function $addc16e1bbe58fd0$export$3a72a57244d6e765(ie,Z=globalThis==null?void 0:globalThis.document){const ee=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ie);reactExports.useEffect(()=>{const ae=ye=>{ye.key==="Escape"&&ee(ye)};return Z.addEventListener("keydown",ae),()=>Z.removeEventListener("keydown",ae)},[ee,Z])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((ie,Z)=>{var ee;const{disableOutsidePointerEvents:ae=!1,onEscapeKeyDown:ye,onPointerDownOutside:ve,onFocusOutside:be,onInteractOutside:Qe,onDismiss:Xe,...Je}=ie,tt=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[it,st]=reactExports.useState(null),lt=(ee=it==null?void 0:it.ownerDocument)!==null&&ee!==void 0?ee:globalThis==null?void 0:globalThis.document,[,ct]=reactExports.useState({}),gt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ci=>st(ci)),ut=Array.from(tt.layers),[mt]=[...tt.layersWithOutsidePointerEventsDisabled].slice(-1),ei=ut.indexOf(mt),ni=it?ut.indexOf(it):-1,ri=tt.layersWithOutsidePointerEventsDisabled.size>0,si=ni>=ei,li=$5cb92bef7577960e$var$usePointerDownOutside(ci=>{const Ci=ci.target,pi=[...tt.branches].some(gi=>gi.contains(Ci));!si||pi||(ve==null||ve(ci),Qe==null||Qe(ci),ci.defaultPrevented||Xe==null||Xe())},lt),ai=$5cb92bef7577960e$var$useFocusOutside(ci=>{const Ci=ci.target;[...tt.branches].some(gi=>gi.contains(Ci))||(be==null||be(ci),Qe==null||Qe(ci),ci.defaultPrevented||Xe==null||Xe())},lt);return $addc16e1bbe58fd0$export$3a72a57244d6e765(ci=>{ni===tt.layers.size-1&&(ye==null||ye(ci),!ci.defaultPrevented&&Xe&&(ci.preventDefault(),Xe()))},lt),reactExports.useEffect(()=>{if(it)return ae&&(tt.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=lt.body.style.pointerEvents,lt.body.style.pointerEvents="none"),tt.layersWithOutsidePointerEventsDisabled.add(it)),tt.layers.add(it),$5cb92bef7577960e$var$dispatchUpdate(),()=>{ae&&tt.layersWithOutsidePointerEventsDisabled.size===1&&(lt.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[it,lt,ae,tt]),reactExports.useEffect(()=>()=>{it&&(tt.layers.delete(it),tt.layersWithOutsidePointerEventsDisabled.delete(it),$5cb92bef7577960e$var$dispatchUpdate())},[it,tt]),reactExports.useEffect(()=>{const ci=()=>ct({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,ci),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,ci)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Je,{ref:gt,style:{pointerEvents:ri?si?"auto":"none":void 0,...ie.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onFocusCapture,ai.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onBlurCapture,ai.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onPointerDownCapture,li.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(ie,Z=globalThis==null?void 0:globalThis.document){const ee=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ie),ae=reactExports.useRef(!1),ye=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const ve=Qe=>{if(Qe.target&&!ae.current){let Je=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,ee,Xe,{discrete:!0})};const Xe={originalEvent:Qe};Qe.pointerType==="touch"?(Z.removeEventListener("click",ye.current),ye.current=Je,Z.addEventListener("click",ye.current,{once:!0})):Je()}else Z.removeEventListener("click",ye.current);ae.current=!1},be=window.setTimeout(()=>{Z.addEventListener("pointerdown",ve)},0);return()=>{window.clearTimeout(be),Z.removeEventListener("pointerdown",ve),Z.removeEventListener("click",ye.current)}},[Z,ee]),{onPointerDownCapture:()=>ae.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(ie,Z=globalThis==null?void 0:globalThis.document){const ee=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ie),ae=reactExports.useRef(!1);return reactExports.useEffect(()=>{const ye=ve=>{ve.target&&!ae.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,ee,{originalEvent:ve},{discrete:!1})};return Z.addEventListener("focusin",ye),()=>Z.removeEventListener("focusin",ye)},[Z,ee]),{onFocusCapture:()=>ae.current=!0,onBlurCapture:()=>ae.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const ie=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(ie)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(ie,Z,ee,{discrete:ae}){const ye=ee.originalEvent.target,ve=new CustomEvent(ie,{bubbles:!1,cancelable:!0,detail:ee});Z&&ye.addEventListener(ie,Z,{once:!0}),ae?$8927f6f2acc4f386$export$6d1a0317bde7de7f(ye,ve):ye.dispatchEvent(ve)}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var ie,Z;const ee=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(ie=ee[0])!==null&&ie!==void 0?ie:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(Z=ee[1])!==null&&Z!==void 0?Z:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(ae=>ae.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const ie=document.createElement("span");return ie.setAttribute("data-radix-focus-guard",""),ie.tabIndex=0,ie.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",ie}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((ie,Z)=>{const{loop:ee=!1,trapped:ae=!1,onMountAutoFocus:ye,onUnmountAutoFocus:ve,...be}=ie,[Qe,Xe]=reactExports.useState(null),Je=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ye),tt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ve),it=reactExports.useRef(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,gt=>Xe(gt)),lt=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(ae){let gt=function(ni){if(lt.paused||!Qe)return;const ri=ni.target;Qe.contains(ri)?it.current=ri:$d3863c46a17e8a28$var$focus(it.current,{select:!0})},ut=function(ni){if(lt.paused||!Qe)return;const ri=ni.relatedTarget;ri!==null&&(Qe.contains(ri)||$d3863c46a17e8a28$var$focus(it.current,{select:!0}))},mt=function(ni){if(document.activeElement===document.body)for(const si of ni)si.removedNodes.length>0&&$d3863c46a17e8a28$var$focus(Qe)};document.addEventListener("focusin",gt),document.addEventListener("focusout",ut);const ei=new MutationObserver(mt);return Qe&&ei.observe(Qe,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",gt),document.removeEventListener("focusout",ut),ei.disconnect()}}},[ae,Qe,lt.paused]),reactExports.useEffect(()=>{if(Qe){$d3863c46a17e8a28$var$focusScopesStack.add(lt);const gt=document.activeElement;if(!Qe.contains(gt)){const mt=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Qe.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,Je),Qe.dispatchEvent(mt),mt.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(Qe)),{select:!0}),document.activeElement===gt&&$d3863c46a17e8a28$var$focus(Qe))}return()=>{Qe.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,Je),setTimeout(()=>{const mt=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Qe.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,tt),Qe.dispatchEvent(mt),mt.defaultPrevented||$d3863c46a17e8a28$var$focus(gt??document.body,{select:!0}),Qe.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,tt),$d3863c46a17e8a28$var$focusScopesStack.remove(lt)},0)}}},[Qe,Je,tt,lt]);const ct=reactExports.useCallback(gt=>{if(!ee&&!ae||lt.paused)return;const ut=gt.key==="Tab"&&!gt.altKey&&!gt.ctrlKey&&!gt.metaKey,mt=document.activeElement;if(ut&&mt){const ei=gt.currentTarget,[ni,ri]=$d3863c46a17e8a28$var$getTabbableEdges(ei);ni&&ri?!gt.shiftKey&&mt===ri?(gt.preventDefault(),ee&&$d3863c46a17e8a28$var$focus(ni,{select:!0})):gt.shiftKey&&mt===ni&&(gt.preventDefault(),ee&&$d3863c46a17e8a28$var$focus(ri,{select:!0})):mt===ei&&gt.preventDefault()}},[ee,ae,lt.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:-1},be,{ref:st,onKeyDown:ct}))});function $d3863c46a17e8a28$var$focusFirst(ie,{select:Z=!1}={}){const ee=document.activeElement;for(const ae of ie)if($d3863c46a17e8a28$var$focus(ae,{select:Z}),document.activeElement!==ee)return}function $d3863c46a17e8a28$var$getTabbableEdges(ie){const Z=$d3863c46a17e8a28$var$getTabbableCandidates(ie),ee=$d3863c46a17e8a28$var$findVisible(Z,ie),ae=$d3863c46a17e8a28$var$findVisible(Z.reverse(),ie);return[ee,ae]}function $d3863c46a17e8a28$var$getTabbableCandidates(ie){const Z=[],ee=document.createTreeWalker(ie,NodeFilter.SHOW_ELEMENT,{acceptNode:ae=>{const ye=ae.tagName==="INPUT"&&ae.type==="hidden";return ae.disabled||ae.hidden||ye?NodeFilter.FILTER_SKIP:ae.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;ee.nextNode();)Z.push(ee.currentNode);return Z}function $d3863c46a17e8a28$var$findVisible(ie,Z){for(const ee of ie)if(!$d3863c46a17e8a28$var$isHidden(ee,{upTo:Z}))return ee}function $d3863c46a17e8a28$var$isHidden(ie,{upTo:Z}){if(getComputedStyle(ie).visibility==="hidden")return!0;for(;ie;){if(Z!==void 0&&ie===Z)return!1;if(getComputedStyle(ie).display==="none")return!0;ie=ie.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(ie){return ie instanceof HTMLInputElement&&"select"in ie}function $d3863c46a17e8a28$var$focus(ie,{select:Z=!1}={}){if(ie&&ie.focus){const ee=document.activeElement;ie.focus({preventScroll:!0}),ie!==ee&&$d3863c46a17e8a28$var$isSelectableInput(ie)&&Z&&ie.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let ie=[];return{add(Z){const ee=ie[0];Z!==ee&&(ee==null||ee.pause()),ie=$d3863c46a17e8a28$var$arrayRemove(ie,Z),ie.unshift(Z)},remove(Z){var ee;ie=$d3863c46a17e8a28$var$arrayRemove(ie,Z),(ee=ie[0])===null||ee===void 0||ee.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(ie,Z){const ee=[...ie],ae=ee.indexOf(Z);return ae!==-1&&ee.splice(ae,1),ee}function $d3863c46a17e8a28$var$removeLinks(ie){return ie.filter(Z=>Z.tagName!=="A")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=ie=>({x:ie,y:ie}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(ie,Z,ee){return max(ie,min(Z,ee))}function evaluate(ie,Z){return typeof ie=="function"?ie(Z):ie}function getSide(ie){return ie.split("-")[0]}function getAlignment(ie){return ie.split("-")[1]}function getOppositeAxis(ie){return ie==="x"?"y":"x"}function getAxisLength(ie){return ie==="y"?"height":"width"}function getSideAxis(ie){return["top","bottom"].includes(getSide(ie))?"y":"x"}function getAlignmentAxis(ie){return getOppositeAxis(getSideAxis(ie))}function getAlignmentSides(ie,Z,ee){ee===void 0&&(ee=!1);const ae=getAlignment(ie),ye=getAlignmentAxis(ie),ve=getAxisLength(ye);let be=ye==="x"?ae===(ee?"end":"start")?"right":"left":ae==="start"?"bottom":"top";return Z.reference[ve]>Z.floating[ve]&&(be=getOppositePlacement(be)),[be,getOppositePlacement(be)]}function getExpandedPlacements(ie){const Z=getOppositePlacement(ie);return[getOppositeAlignmentPlacement(ie),Z,getOppositeAlignmentPlacement(Z)]}function getOppositeAlignmentPlacement(ie){return ie.replace(/start|end/g,Z=>oppositeAlignmentMap[Z])}function getSideList(ie,Z,ee){const ae=["left","right"],ye=["right","left"],ve=["top","bottom"],be=["bottom","top"];switch(ie){case"top":case"bottom":return ee?Z?ye:ae:Z?ae:ye;case"left":case"right":return Z?ve:be;default:return[]}}function getOppositeAxisPlacements(ie,Z,ee,ae){const ye=getAlignment(ie);let ve=getSideList(getSide(ie),ee==="start",ae);return ye&&(ve=ve.map(be=>be+"-"+ye),Z&&(ve=ve.concat(ve.map(getOppositeAlignmentPlacement)))),ve}function getOppositePlacement(ie){return ie.replace(/left|right|bottom|top/g,Z=>oppositeSideMap[Z])}function expandPaddingObject(ie){return{top:0,right:0,bottom:0,left:0,...ie}}function getPaddingObject(ie){return typeof ie!="number"?expandPaddingObject(ie):{top:ie,right:ie,bottom:ie,left:ie}}function rectToClientRect(ie){return{...ie,top:ie.y,left:ie.x,right:ie.x+ie.width,bottom:ie.y+ie.height}}function computeCoordsFromPlacement(ie,Z,ee){let{reference:ae,floating:ye}=ie;const ve=getSideAxis(Z),be=getAlignmentAxis(Z),Qe=getAxisLength(be),Xe=getSide(Z),Je=ve==="y",tt=ae.x+ae.width/2-ye.width/2,it=ae.y+ae.height/2-ye.height/2,st=ae[Qe]/2-ye[Qe]/2;let lt;switch(Xe){case"top":lt={x:tt,y:ae.y-ye.height};break;case"bottom":lt={x:tt,y:ae.y+ae.height};break;case"right":lt={x:ae.x+ae.width,y:it};break;case"left":lt={x:ae.x-ye.width,y:it};break;default:lt={x:ae.x,y:ae.y}}switch(getAlignment(Z)){case"start":lt[be]-=st*(ee&&Je?-1:1);break;case"end":lt[be]+=st*(ee&&Je?-1:1);break}return lt}const computePosition$1=async(ie,Z,ee)=>{const{placement:ae="bottom",strategy:ye="absolute",middleware:ve=[],platform:be}=ee,Qe=ve.filter(Boolean),Xe=await(be.isRTL==null?void 0:be.isRTL(Z));let Je=await be.getElementRects({reference:ie,floating:Z,strategy:ye}),{x:tt,y:it}=computeCoordsFromPlacement(Je,ae,Xe),st=ae,lt={},ct=0;for(let gt=0;gt<Qe.length;gt++){const{name:ut,fn:mt}=Qe[gt],{x:ei,y:ni,data:ri,reset:si}=await mt({x:tt,y:it,initialPlacement:ae,placement:st,strategy:ye,middlewareData:lt,rects:Je,platform:be,elements:{reference:ie,floating:Z}});tt=ei??tt,it=ni??it,lt={...lt,[ut]:{...lt[ut],...ri}},si&&ct<=50&&(ct++,typeof si=="object"&&(si.placement&&(st=si.placement),si.rects&&(Je=si.rects===!0?await be.getElementRects({reference:ie,floating:Z,strategy:ye}):si.rects),{x:tt,y:it}=computeCoordsFromPlacement(Je,st,Xe)),gt=-1)}return{x:tt,y:it,placement:st,strategy:ye,middlewareData:lt}};async function detectOverflow(ie,Z){var ee;Z===void 0&&(Z={});const{x:ae,y:ye,platform:ve,rects:be,elements:Qe,strategy:Xe}=ie,{boundary:Je="clippingAncestors",rootBoundary:tt="viewport",elementContext:it="floating",altBoundary:st=!1,padding:lt=0}=evaluate(Z,ie),ct=getPaddingObject(lt),ut=Qe[st?it==="floating"?"reference":"floating":it],mt=rectToClientRect(await ve.getClippingRect({element:(ee=await(ve.isElement==null?void 0:ve.isElement(ut)))==null||ee?ut:ut.contextElement||await(ve.getDocumentElement==null?void 0:ve.getDocumentElement(Qe.floating)),boundary:Je,rootBoundary:tt,strategy:Xe})),ei=it==="floating"?{...be.floating,x:ae,y:ye}:be.reference,ni=await(ve.getOffsetParent==null?void 0:ve.getOffsetParent(Qe.floating)),ri=await(ve.isElement==null?void 0:ve.isElement(ni))?await(ve.getScale==null?void 0:ve.getScale(ni))||{x:1,y:1}:{x:1,y:1},si=rectToClientRect(ve.convertOffsetParentRelativeRectToViewportRelativeRect?await ve.convertOffsetParentRelativeRectToViewportRelativeRect({elements:Qe,rect:ei,offsetParent:ni,strategy:Xe}):ei);return{top:(mt.top-si.top+ct.top)/ri.y,bottom:(si.bottom-mt.bottom+ct.bottom)/ri.y,left:(mt.left-si.left+ct.left)/ri.x,right:(si.right-mt.right+ct.right)/ri.x}}const arrow$2=ie=>({name:"arrow",options:ie,async fn(Z){const{x:ee,y:ae,placement:ye,rects:ve,platform:be,elements:Qe,middlewareData:Xe}=Z,{element:Je,padding:tt=0}=evaluate(ie,Z)||{};if(Je==null)return{};const it=getPaddingObject(tt),st={x:ee,y:ae},lt=getAlignmentAxis(ye),ct=getAxisLength(lt),gt=await be.getDimensions(Je),ut=lt==="y",mt=ut?"top":"left",ei=ut?"bottom":"right",ni=ut?"clientHeight":"clientWidth",ri=ve.reference[ct]+ve.reference[lt]-st[lt]-ve.floating[ct],si=st[lt]-ve.reference[lt],li=await(be.getOffsetParent==null?void 0:be.getOffsetParent(Je));let ai=li?li[ni]:0;(!ai||!await(be.isElement==null?void 0:be.isElement(li)))&&(ai=Qe.floating[ni]||ve.floating[ct]);const ci=ri/2-si/2,Ci=ai/2-gt[ct]/2-1,pi=min(it[mt],Ci),gi=min(it[ei],Ci),_i=pi,bi=ai-gt[ct]-gi,Mi=ai/2-gt[ct]/2+ci,yi=clamp(_i,Mi,bi),Ti=!Xe.arrow&&getAlignment(ye)!=null&&Mi!==yi&&ve.reference[ct]/2-(Mi<_i?pi:gi)-gt[ct]/2<0,Ii=Ti?Mi<_i?Mi-_i:Mi-bi:0;return{[lt]:st[lt]+Ii,data:{[lt]:yi,centerOffset:Mi-yi-Ii,...Ti&&{alignmentOffset:Ii}},reset:Ti}}}),flip$1=function(ie){return ie===void 0&&(ie={}),{name:"flip",options:ie,async fn(Z){var ee,ae;const{placement:ye,middlewareData:ve,rects:be,initialPlacement:Qe,platform:Xe,elements:Je}=Z,{mainAxis:tt=!0,crossAxis:it=!0,fallbackPlacements:st,fallbackStrategy:lt="bestFit",fallbackAxisSideDirection:ct="none",flipAlignment:gt=!0,...ut}=evaluate(ie,Z);if((ee=ve.arrow)!=null&&ee.alignmentOffset)return{};const mt=getSide(ye),ei=getSide(Qe)===Qe,ni=await(Xe.isRTL==null?void 0:Xe.isRTL(Je.floating)),ri=st||(ei||!gt?[getOppositePlacement(Qe)]:getExpandedPlacements(Qe));!st&&ct!=="none"&&ri.push(...getOppositeAxisPlacements(Qe,gt,ct,ni));const si=[Qe,...ri],li=await detectOverflow(Z,ut),ai=[];let ci=((ae=ve.flip)==null?void 0:ae.overflows)||[];if(tt&&ai.push(li[mt]),it){const _i=getAlignmentSides(ye,be,ni);ai.push(li[_i[0]],li[_i[1]])}if(ci=[...ci,{placement:ye,overflows:ai}],!ai.every(_i=>_i<=0)){var Ci,pi;const _i=(((Ci=ve.flip)==null?void 0:Ci.index)||0)+1,bi=si[_i];if(bi)return{data:{index:_i,overflows:ci},reset:{placement:bi}};let Mi=(pi=ci.filter(yi=>yi.overflows[0]<=0).sort((yi,Ti)=>yi.overflows[1]-Ti.overflows[1])[0])==null?void 0:pi.placement;if(!Mi)switch(lt){case"bestFit":{var gi;const yi=(gi=ci.map(Ti=>[Ti.placement,Ti.overflows.filter(Ii=>Ii>0).reduce((Ii,Ri)=>Ii+Ri,0)]).sort((Ti,Ii)=>Ti[1]-Ii[1])[0])==null?void 0:gi[0];yi&&(Mi=yi);break}case"initialPlacement":Mi=Qe;break}if(ye!==Mi)return{reset:{placement:Mi}}}return{}}}};function getSideOffsets(ie,Z){return{top:ie.top-Z.height,right:ie.right-Z.width,bottom:ie.bottom-Z.height,left:ie.left-Z.width}}function isAnySideFullyClipped(ie){return sides.some(Z=>ie[Z]>=0)}const hide$1=function(ie){return ie===void 0&&(ie={}),{name:"hide",options:ie,async fn(Z){const{rects:ee}=Z,{strategy:ae="referenceHidden",...ye}=evaluate(ie,Z);switch(ae){case"referenceHidden":{const ve=await detectOverflow(Z,{...ye,elementContext:"reference"}),be=getSideOffsets(ve,ee.reference);return{data:{referenceHiddenOffsets:be,referenceHidden:isAnySideFullyClipped(be)}}}case"escaped":{const ve=await detectOverflow(Z,{...ye,altBoundary:!0}),be=getSideOffsets(ve,ee.floating);return{data:{escapedOffsets:be,escaped:isAnySideFullyClipped(be)}}}default:return{}}}}};async function convertValueToCoords(ie,Z){const{placement:ee,platform:ae,elements:ye}=ie,ve=await(ae.isRTL==null?void 0:ae.isRTL(ye.floating)),be=getSide(ee),Qe=getAlignment(ee),Xe=getSideAxis(ee)==="y",Je=["left","top"].includes(be)?-1:1,tt=ve&&Xe?-1:1,it=evaluate(Z,ie);let{mainAxis:st,crossAxis:lt,alignmentAxis:ct}=typeof it=="number"?{mainAxis:it,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...it};return Qe&&typeof ct=="number"&&(lt=Qe==="end"?ct*-1:ct),Xe?{x:lt*tt,y:st*Je}:{x:st*Je,y:lt*tt}}const offset=function(ie){return ie===void 0&&(ie=0),{name:"offset",options:ie,async fn(Z){var ee,ae;const{x:ye,y:ve,placement:be,middlewareData:Qe}=Z,Xe=await convertValueToCoords(Z,ie);return be===((ee=Qe.offset)==null?void 0:ee.placement)&&(ae=Qe.arrow)!=null&&ae.alignmentOffset?{}:{x:ye+Xe.x,y:ve+Xe.y,data:{...Xe,placement:be}}}}},shift$1=function(ie){return ie===void 0&&(ie={}),{name:"shift",options:ie,async fn(Z){const{x:ee,y:ae,placement:ye}=Z,{mainAxis:ve=!0,crossAxis:be=!1,limiter:Qe={fn:ut=>{let{x:mt,y:ei}=ut;return{x:mt,y:ei}}},...Xe}=evaluate(ie,Z),Je={x:ee,y:ae},tt=await detectOverflow(Z,Xe),it=getSideAxis(getSide(ye)),st=getOppositeAxis(it);let lt=Je[st],ct=Je[it];if(ve){const ut=st==="y"?"top":"left",mt=st==="y"?"bottom":"right",ei=lt+tt[ut],ni=lt-tt[mt];lt=clamp(ei,lt,ni)}if(be){const ut=it==="y"?"top":"left",mt=it==="y"?"bottom":"right",ei=ct+tt[ut],ni=ct-tt[mt];ct=clamp(ei,ct,ni)}const gt=Qe.fn({...Z,[st]:lt,[it]:ct});return{...gt,data:{x:gt.x-ee,y:gt.y-ae}}}}},limitShift$1=function(ie){return ie===void 0&&(ie={}),{options:ie,fn(Z){const{x:ee,y:ae,placement:ye,rects:ve,middlewareData:be}=Z,{offset:Qe=0,mainAxis:Xe=!0,crossAxis:Je=!0}=evaluate(ie,Z),tt={x:ee,y:ae},it=getSideAxis(ye),st=getOppositeAxis(it);let lt=tt[st],ct=tt[it];const gt=evaluate(Qe,Z),ut=typeof gt=="number"?{mainAxis:gt,crossAxis:0}:{mainAxis:0,crossAxis:0,...gt};if(Xe){const ni=st==="y"?"height":"width",ri=ve.reference[st]-ve.floating[ni]+ut.mainAxis,si=ve.reference[st]+ve.reference[ni]-ut.mainAxis;lt<ri?lt=ri:lt>si&&(lt=si)}if(Je){var mt,ei;const ni=st==="y"?"width":"height",ri=["top","left"].includes(getSide(ye)),si=ve.reference[it]-ve.floating[ni]+(ri&&((mt=be.offset)==null?void 0:mt[it])||0)+(ri?0:ut.crossAxis),li=ve.reference[it]+ve.reference[ni]+(ri?0:((ei=be.offset)==null?void 0:ei[it])||0)-(ri?ut.crossAxis:0);ct<si?ct=si:ct>li&&(ct=li)}return{[st]:lt,[it]:ct}}}},size$1=function(ie){return ie===void 0&&(ie={}),{name:"size",options:ie,async fn(Z){const{placement:ee,rects:ae,platform:ye,elements:ve}=Z,{apply:be=()=>{},...Qe}=evaluate(ie,Z),Xe=await detectOverflow(Z,Qe),Je=getSide(ee),tt=getAlignment(ee),it=getSideAxis(ee)==="y",{width:st,height:lt}=ae.floating;let ct,gt;Je==="top"||Je==="bottom"?(ct=Je,gt=tt===(await(ye.isRTL==null?void 0:ye.isRTL(ve.floating))?"start":"end")?"left":"right"):(gt=Je,ct=tt==="end"?"top":"bottom");const ut=lt-Xe[ct],mt=st-Xe[gt],ei=!Z.middlewareData.shift;let ni=ut,ri=mt;if(it){const li=st-Xe.left-Xe.right;ri=tt||ei?min(mt,li):li}else{const li=lt-Xe.top-Xe.bottom;ni=tt||ei?min(ut,li):li}if(ei&&!tt){const li=max(Xe.left,0),ai=max(Xe.right,0),ci=max(Xe.top,0),Ci=max(Xe.bottom,0);it?ri=st-2*(li!==0||ai!==0?li+ai:max(Xe.left,Xe.right)):ni=lt-2*(ci!==0||Ci!==0?ci+Ci:max(Xe.top,Xe.bottom))}await be({...Z,availableWidth:ri,availableHeight:ni});const si=await ye.getDimensions(ve.floating);return st!==si.width||lt!==si.height?{reset:{rects:!0}}:{}}}};function getNodeName(ie){return isNode(ie)?(ie.nodeName||"").toLowerCase():"#document"}function getWindow(ie){var Z;return(ie==null||(Z=ie.ownerDocument)==null?void 0:Z.defaultView)||window}function getDocumentElement(ie){var Z;return(Z=(isNode(ie)?ie.ownerDocument:ie.document)||window.document)==null?void 0:Z.documentElement}function isNode(ie){return ie instanceof Node||ie instanceof getWindow(ie).Node}function isElement(ie){return ie instanceof Element||ie instanceof getWindow(ie).Element}function isHTMLElement(ie){return ie instanceof HTMLElement||ie instanceof getWindow(ie).HTMLElement}function isShadowRoot(ie){return typeof ShadowRoot>"u"?!1:ie instanceof ShadowRoot||ie instanceof getWindow(ie).ShadowRoot}function isOverflowElement(ie){const{overflow:Z,overflowX:ee,overflowY:ae,display:ye}=getComputedStyle$1(ie);return/auto|scroll|overlay|hidden|clip/.test(Z+ae+ee)&&!["inline","contents"].includes(ye)}function isTableElement(ie){return["table","td","th"].includes(getNodeName(ie))}function isContainingBlock(ie){const Z=isWebKit(),ee=getComputedStyle$1(ie);return ee.transform!=="none"||ee.perspective!=="none"||(ee.containerType?ee.containerType!=="normal":!1)||!Z&&(ee.backdropFilter?ee.backdropFilter!=="none":!1)||!Z&&(ee.filter?ee.filter!=="none":!1)||["transform","perspective","filter"].some(ae=>(ee.willChange||"").includes(ae))||["paint","layout","strict","content"].some(ae=>(ee.contain||"").includes(ae))}function getContainingBlock(ie){let Z=getParentNode(ie);for(;isHTMLElement(Z)&&!isLastTraversableNode(Z);){if(isContainingBlock(Z))return Z;Z=getParentNode(Z)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(ie){return["html","body","#document"].includes(getNodeName(ie))}function getComputedStyle$1(ie){return getWindow(ie).getComputedStyle(ie)}function getNodeScroll(ie){return isElement(ie)?{scrollLeft:ie.scrollLeft,scrollTop:ie.scrollTop}:{scrollLeft:ie.pageXOffset,scrollTop:ie.pageYOffset}}function getParentNode(ie){if(getNodeName(ie)==="html")return ie;const Z=ie.assignedSlot||ie.parentNode||isShadowRoot(ie)&&ie.host||getDocumentElement(ie);return isShadowRoot(Z)?Z.host:Z}function getNearestOverflowAncestor(ie){const Z=getParentNode(ie);return isLastTraversableNode(Z)?ie.ownerDocument?ie.ownerDocument.body:ie.body:isHTMLElement(Z)&&isOverflowElement(Z)?Z:getNearestOverflowAncestor(Z)}function getOverflowAncestors(ie,Z,ee){var ae;Z===void 0&&(Z=[]),ee===void 0&&(ee=!0);const ye=getNearestOverflowAncestor(ie),ve=ye===((ae=ie.ownerDocument)==null?void 0:ae.body),be=getWindow(ye);return ve?Z.concat(be,be.visualViewport||[],isOverflowElement(ye)?ye:[],be.frameElement&&ee?getOverflowAncestors(be.frameElement):[]):Z.concat(ye,getOverflowAncestors(ye,[],ee))}function getCssDimensions(ie){const Z=getComputedStyle$1(ie);let ee=parseFloat(Z.width)||0,ae=parseFloat(Z.height)||0;const ye=isHTMLElement(ie),ve=ye?ie.offsetWidth:ee,be=ye?ie.offsetHeight:ae,Qe=round(ee)!==ve||round(ae)!==be;return Qe&&(ee=ve,ae=be),{width:ee,height:ae,$:Qe}}function unwrapElement(ie){return isElement(ie)?ie:ie.contextElement}function getScale(ie){const Z=unwrapElement(ie);if(!isHTMLElement(Z))return createCoords(1);const ee=Z.getBoundingClientRect(),{width:ae,height:ye,$:ve}=getCssDimensions(Z);let be=(ve?round(ee.width):ee.width)/ae,Qe=(ve?round(ee.height):ee.height)/ye;return(!be||!Number.isFinite(be))&&(be=1),(!Qe||!Number.isFinite(Qe))&&(Qe=1),{x:be,y:Qe}}const noOffsets=createCoords(0);function getVisualOffsets(ie){const Z=getWindow(ie);return!isWebKit()||!Z.visualViewport?noOffsets:{x:Z.visualViewport.offsetLeft,y:Z.visualViewport.offsetTop}}function shouldAddVisualOffsets(ie,Z,ee){return Z===void 0&&(Z=!1),!ee||Z&&ee!==getWindow(ie)?!1:Z}function getBoundingClientRect(ie,Z,ee,ae){Z===void 0&&(Z=!1),ee===void 0&&(ee=!1);const ye=ie.getBoundingClientRect(),ve=unwrapElement(ie);let be=createCoords(1);Z&&(ae?isElement(ae)&&(be=getScale(ae)):be=getScale(ie));const Qe=shouldAddVisualOffsets(ve,ee,ae)?getVisualOffsets(ve):createCoords(0);let Xe=(ye.left+Qe.x)/be.x,Je=(ye.top+Qe.y)/be.y,tt=ye.width/be.x,it=ye.height/be.y;if(ve){const st=getWindow(ve),lt=ae&&isElement(ae)?getWindow(ae):ae;let ct=st.frameElement;for(;ct&&ae&&lt!==st;){const gt=getScale(ct),ut=ct.getBoundingClientRect(),mt=getComputedStyle$1(ct),ei=ut.left+(ct.clientLeft+parseFloat(mt.paddingLeft))*gt.x,ni=ut.top+(ct.clientTop+parseFloat(mt.paddingTop))*gt.y;Xe*=gt.x,Je*=gt.y,tt*=gt.x,it*=gt.y,Xe+=ei,Je+=ni,ct=getWindow(ct).frameElement}}return rectToClientRect({width:tt,height:it,x:Xe,y:Je})}const topLayerSelectors=[":popover-open",":modal"];function topLayer(ie){let Z=!1,ee=0,ae=0;function ye(ve){try{Z=Z||ie.matches(ve)}catch{}}if(topLayerSelectors.forEach(ve=>{ye(ve)}),Z){const ve=getContainingBlock(ie);if(ve){const be=ve.getBoundingClientRect();ee=be.x,ae=be.y}}return[Z,ee,ae]}function convertOffsetParentRelativeRectToViewportRelativeRect(ie){let{elements:Z,rect:ee,offsetParent:ae,strategy:ye}=ie;const ve=getDocumentElement(ae),[be]=Z?topLayer(Z.floating):[!1];if(ae===ve||be)return ee;let Qe={scrollLeft:0,scrollTop:0},Xe=createCoords(1);const Je=createCoords(0),tt=isHTMLElement(ae);if((tt||!tt&&ye!=="fixed")&&((getNodeName(ae)!=="body"||isOverflowElement(ve))&&(Qe=getNodeScroll(ae)),isHTMLElement(ae))){const it=getBoundingClientRect(ae);Xe=getScale(ae),Je.x=it.x+ae.clientLeft,Je.y=it.y+ae.clientTop}return{width:ee.width*Xe.x,height:ee.height*Xe.y,x:ee.x*Xe.x-Qe.scrollLeft*Xe.x+Je.x,y:ee.y*Xe.y-Qe.scrollTop*Xe.y+Je.y}}function getClientRects(ie){return Array.from(ie.getClientRects())}function getWindowScrollBarX(ie){return getBoundingClientRect(getDocumentElement(ie)).left+getNodeScroll(ie).scrollLeft}function getDocumentRect(ie){const Z=getDocumentElement(ie),ee=getNodeScroll(ie),ae=ie.ownerDocument.body,ye=max(Z.scrollWidth,Z.clientWidth,ae.scrollWidth,ae.clientWidth),ve=max(Z.scrollHeight,Z.clientHeight,ae.scrollHeight,ae.clientHeight);let be=-ee.scrollLeft+getWindowScrollBarX(ie);const Qe=-ee.scrollTop;return getComputedStyle$1(ae).direction==="rtl"&&(be+=max(Z.clientWidth,ae.clientWidth)-ye),{width:ye,height:ve,x:be,y:Qe}}function getViewportRect(ie,Z){const ee=getWindow(ie),ae=getDocumentElement(ie),ye=ee.visualViewport;let ve=ae.clientWidth,be=ae.clientHeight,Qe=0,Xe=0;if(ye){ve=ye.width,be=ye.height;const Je=isWebKit();(!Je||Je&&Z==="fixed")&&(Qe=ye.offsetLeft,Xe=ye.offsetTop)}return{width:ve,height:be,x:Qe,y:Xe}}function getInnerBoundingClientRect(ie,Z){const ee=getBoundingClientRect(ie,!0,Z==="fixed"),ae=ee.top+ie.clientTop,ye=ee.left+ie.clientLeft,ve=isHTMLElement(ie)?getScale(ie):createCoords(1),be=ie.clientWidth*ve.x,Qe=ie.clientHeight*ve.y,Xe=ye*ve.x,Je=ae*ve.y;return{width:be,height:Qe,x:Xe,y:Je}}function getClientRectFromClippingAncestor(ie,Z,ee){let ae;if(Z==="viewport")ae=getViewportRect(ie,ee);else if(Z==="document")ae=getDocumentRect(getDocumentElement(ie));else if(isElement(Z))ae=getInnerBoundingClientRect(Z,ee);else{const ye=getVisualOffsets(ie);ae={...Z,x:Z.x-ye.x,y:Z.y-ye.y}}return rectToClientRect(ae)}function hasFixedPositionAncestor(ie,Z){const ee=getParentNode(ie);return ee===Z||!isElement(ee)||isLastTraversableNode(ee)?!1:getComputedStyle$1(ee).position==="fixed"||hasFixedPositionAncestor(ee,Z)}function getClippingElementAncestors(ie,Z){const ee=Z.get(ie);if(ee)return ee;let ae=getOverflowAncestors(ie,[],!1).filter(Qe=>isElement(Qe)&&getNodeName(Qe)!=="body"),ye=null;const ve=getComputedStyle$1(ie).position==="fixed";let be=ve?getParentNode(ie):ie;for(;isElement(be)&&!isLastTraversableNode(be);){const Qe=getComputedStyle$1(be),Xe=isContainingBlock(be);!Xe&&Qe.position==="fixed"&&(ye=null),(ve?!Xe&&!ye:!Xe&&Qe.position==="static"&&!!ye&&["absolute","fixed"].includes(ye.position)||isOverflowElement(be)&&!Xe&&hasFixedPositionAncestor(ie,be))?ae=ae.filter(tt=>tt!==be):ye=Qe,be=getParentNode(be)}return Z.set(ie,ae),ae}function getClippingRect(ie){let{element:Z,boundary:ee,rootBoundary:ae,strategy:ye}=ie;const be=[...ee==="clippingAncestors"?getClippingElementAncestors(Z,this._c):[].concat(ee),ae],Qe=be[0],Xe=be.reduce((Je,tt)=>{const it=getClientRectFromClippingAncestor(Z,tt,ye);return Je.top=max(it.top,Je.top),Je.right=min(it.right,Je.right),Je.bottom=min(it.bottom,Je.bottom),Je.left=max(it.left,Je.left),Je},getClientRectFromClippingAncestor(Z,Qe,ye));return{width:Xe.right-Xe.left,height:Xe.bottom-Xe.top,x:Xe.left,y:Xe.top}}function getDimensions(ie){const{width:Z,height:ee}=getCssDimensions(ie);return{width:Z,height:ee}}function getRectRelativeToOffsetParent(ie,Z,ee,ae){const ye=isHTMLElement(Z),ve=getDocumentElement(Z),be=ee==="fixed",Qe=getBoundingClientRect(ie,!0,be,Z);let Xe={scrollLeft:0,scrollTop:0};const Je=createCoords(0);if(ye||!ye&&!be)if((getNodeName(Z)!=="body"||isOverflowElement(ve))&&(Xe=getNodeScroll(Z)),ye){const gt=getBoundingClientRect(Z,!0,be,Z);Je.x=gt.x+Z.clientLeft,Je.y=gt.y+Z.clientTop}else ve&&(Je.x=getWindowScrollBarX(ve));let tt=Qe.left+Xe.scrollLeft-Je.x,it=Qe.top+Xe.scrollTop-Je.y;const[st,lt,ct]=topLayer(ae);return st&&(tt+=lt,it+=ct,ye&&(tt+=Z.clientLeft,it+=Z.clientTop)),{x:tt,y:it,width:Qe.width,height:Qe.height}}function getTrueOffsetParent(ie,Z){return!isHTMLElement(ie)||getComputedStyle$1(ie).position==="fixed"?null:Z?Z(ie):ie.offsetParent}function getOffsetParent(ie,Z){const ee=getWindow(ie);if(!isHTMLElement(ie))return ee;let ae=getTrueOffsetParent(ie,Z);for(;ae&&isTableElement(ae)&&getComputedStyle$1(ae).position==="static";)ae=getTrueOffsetParent(ae,Z);return ae&&(getNodeName(ae)==="html"||getNodeName(ae)==="body"&&getComputedStyle$1(ae).position==="static"&&!isContainingBlock(ae))?ee:ae||getContainingBlock(ie)||ee}const getElementRects=async function(ie){const Z=this.getOffsetParent||getOffsetParent,ee=this.getDimensions;return{reference:getRectRelativeToOffsetParent(ie.reference,await Z(ie.floating),ie.strategy,ie.floating),floating:{x:0,y:0,...await ee(ie.floating)}}};function isRTL(ie){return getComputedStyle$1(ie).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(ie,Z){let ee=null,ae;const ye=getDocumentElement(ie);function ve(){var Qe;clearTimeout(ae),(Qe=ee)==null||Qe.disconnect(),ee=null}function be(Qe,Xe){Qe===void 0&&(Qe=!1),Xe===void 0&&(Xe=1),ve();const{left:Je,top:tt,width:it,height:st}=ie.getBoundingClientRect();if(Qe||Z(),!it||!st)return;const lt=floor(tt),ct=floor(ye.clientWidth-(Je+it)),gt=floor(ye.clientHeight-(tt+st)),ut=floor(Je),ei={rootMargin:-lt+"px "+-ct+"px "+-gt+"px "+-ut+"px",threshold:max(0,min(1,Xe))||1};let ni=!0;function ri(si){const li=si[0].intersectionRatio;if(li!==Xe){if(!ni)return be();li?be(!1,li):ae=setTimeout(()=>{be(!1,1e-7)},100)}ni=!1}try{ee=new IntersectionObserver(ri,{...ei,root:ye.ownerDocument})}catch{ee=new IntersectionObserver(ri,ei)}ee.observe(ie)}return be(!0),ve}function autoUpdate(ie,Z,ee,ae){ae===void 0&&(ae={});const{ancestorScroll:ye=!0,ancestorResize:ve=!0,elementResize:be=typeof ResizeObserver=="function",layoutShift:Qe=typeof IntersectionObserver=="function",animationFrame:Xe=!1}=ae,Je=unwrapElement(ie),tt=ye||ve?[...Je?getOverflowAncestors(Je):[],...getOverflowAncestors(Z)]:[];tt.forEach(mt=>{ye&&mt.addEventListener("scroll",ee,{passive:!0}),ve&&mt.addEventListener("resize",ee)});const it=Je&&Qe?observeMove(Je,ee):null;let st=-1,lt=null;be&&(lt=new ResizeObserver(mt=>{let[ei]=mt;ei&&ei.target===Je&&lt&&(lt.unobserve(Z),cancelAnimationFrame(st),st=requestAnimationFrame(()=>{var ni;(ni=lt)==null||ni.observe(Z)})),ee()}),Je&&!Xe&&lt.observe(Je),lt.observe(Z));let ct,gt=Xe?getBoundingClientRect(ie):null;Xe&&ut();function ut(){const mt=getBoundingClientRect(ie);gt&&(mt.x!==gt.x||mt.y!==gt.y||mt.width!==gt.width||mt.height!==gt.height)&&ee(),gt=mt,ct=requestAnimationFrame(ut)}return ee(),()=>{var mt;tt.forEach(ei=>{ye&&ei.removeEventListener("scroll",ee),ve&&ei.removeEventListener("resize",ee)}),it==null||it(),(mt=lt)==null||mt.disconnect(),lt=null,Xe&&cancelAnimationFrame(ct)}}const shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow$1=arrow$2,limitShift=limitShift$1,computePosition=(ie,Z,ee)=>{const ae=new Map,ye={platform,...ee},ve={...ye.platform,_c:ae};return computePosition$1(ie,Z,{...ye,platform:ve})},arrow=ie=>{function Z(ee){return{}.hasOwnProperty.call(ee,"current")}return{name:"arrow",options:ie,fn(ee){const{element:ae,padding:ye}=typeof ie=="function"?ie(ee):ie;return ae&&Z(ae)?ae.current!=null?arrow$1({element:ae.current,padding:ye}).fn(ee):{}:ae?arrow$1({element:ae,padding:ye}).fn(ee):{}}}};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(ie,Z){if(ie===Z)return!0;if(typeof ie!=typeof Z)return!1;if(typeof ie=="function"&&ie.toString()===Z.toString())return!0;let ee,ae,ye;if(ie&&Z&&typeof ie=="object"){if(Array.isArray(ie)){if(ee=ie.length,ee!==Z.length)return!1;for(ae=ee;ae--!==0;)if(!deepEqual(ie[ae],Z[ae]))return!1;return!0}if(ye=Object.keys(ie),ee=ye.length,ee!==Object.keys(Z).length)return!1;for(ae=ee;ae--!==0;)if(!{}.hasOwnProperty.call(Z,ye[ae]))return!1;for(ae=ee;ae--!==0;){const ve=ye[ae];if(!(ve==="_owner"&&ie.$$typeof)&&!deepEqual(ie[ve],Z[ve]))return!1}return!0}return ie!==ie&&Z!==Z}function getDPR(ie){return typeof window>"u"?1:(ie.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(ie,Z){const ee=getDPR(ie);return Math.round(Z*ee)/ee}function useLatestRef(ie){const Z=reactExports.useRef(ie);return index(()=>{Z.current=ie}),Z}function useFloating(ie){ie===void 0&&(ie={});const{placement:Z="bottom",strategy:ee="absolute",middleware:ae=[],platform:ye,elements:{reference:ve,floating:be}={},transform:Qe=!0,whileElementsMounted:Xe,open:Je}=ie,[tt,it]=reactExports.useState({x:0,y:0,strategy:ee,placement:Z,middlewareData:{},isPositioned:!1}),[st,lt]=reactExports.useState(ae);deepEqual(st,ae)||lt(ae);const[ct,gt]=reactExports.useState(null),[ut,mt]=reactExports.useState(null),ei=reactExports.useCallback(Ii=>{Ii!==li.current&&(li.current=Ii,gt(Ii))},[]),ni=reactExports.useCallback(Ii=>{Ii!==ai.current&&(ai.current=Ii,mt(Ii))},[]),ri=ve||ct,si=be||ut,li=reactExports.useRef(null),ai=reactExports.useRef(null),ci=reactExports.useRef(tt),Ci=Xe!=null,pi=useLatestRef(Xe),gi=useLatestRef(ye),_i=reactExports.useCallback(()=>{if(!li.current||!ai.current)return;const Ii={placement:Z,strategy:ee,middleware:st};gi.current&&(Ii.platform=gi.current),computePosition(li.current,ai.current,Ii).then(Ri=>{const Pi={...Ri,isPositioned:!0};bi.current&&!deepEqual(ci.current,Pi)&&(ci.current=Pi,reactDomExports.flushSync(()=>{it(Pi)}))})},[st,Z,ee,gi]);index(()=>{Je===!1&&ci.current.isPositioned&&(ci.current.isPositioned=!1,it(Ii=>({...Ii,isPositioned:!1})))},[Je]);const bi=reactExports.useRef(!1);index(()=>(bi.current=!0,()=>{bi.current=!1}),[]),index(()=>{if(ri&&(li.current=ri),si&&(ai.current=si),ri&&si){if(pi.current)return pi.current(ri,si,_i);_i()}},[ri,si,_i,pi,Ci]);const Mi=reactExports.useMemo(()=>({reference:li,floating:ai,setReference:ei,setFloating:ni}),[ei,ni]),yi=reactExports.useMemo(()=>({reference:ri,floating:si}),[ri,si]),Ti=reactExports.useMemo(()=>{const Ii={position:ee,left:0,top:0};if(!yi.floating)return Ii;const Ri=roundByDPR(yi.floating,tt.x),Pi=roundByDPR(yi.floating,tt.y);return Qe?{...Ii,transform:"translate("+Ri+"px, "+Pi+"px)",...getDPR(yi.floating)>=1.5&&{willChange:"transform"}}:{position:ee,left:Ri,top:Pi}},[ee,Qe,yi.floating,tt.x,tt.y]);return reactExports.useMemo(()=>({...tt,update:_i,refs:Mi,elements:yi,floatingStyles:Ti}),[tt,_i,Mi,yi,Ti])}const $7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((ie,Z)=>{const{children:ee,width:ae=10,height:ye=5,...ve}=ie;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$1({},ve,{ref:Z,width:ae,height:ye,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),ie.asChild?ee:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5,$cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=ie=>{const{__scopePopper:Z,children:ee}=ie,[ae,ye]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:Z,anchor:ae,onAnchorChange:ye},ee)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((ie,Z)=>{const{__scopePopper:ee,virtualRef:ae,...ye}=ie,ve=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,ee),be=reactExports.useRef(null),Qe=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,be);return reactExports.useEffect(()=>{ve.onAnchorChange((ae==null?void 0:ae.current)||be.current)}),ae?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},ye,{ref:Qe}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((ie,Z)=>{var ee,ae,ye,ve,be,Qe,Xe,Je;const{__scopePopper:tt,side:it="bottom",sideOffset:st=0,align:lt="center",alignOffset:ct=0,arrowPadding:gt=0,avoidCollisions:ut=!0,collisionBoundary:mt=[],collisionPadding:ei=0,sticky:ni="partial",hideWhenDetached:ri=!1,updatePositionStrategy:si="optimized",onPlaced:li,...ai}=ie,ci=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,tt),[Ci,pi]=reactExports.useState(null),gi=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,qi=>pi(qi)),[_i,bi]=reactExports.useState(null),Mi=$db6c3485150b8e66$export$1ab7ae714698c4b8(_i),yi=(ee=Mi==null?void 0:Mi.width)!==null&&ee!==void 0?ee:0,Ti=(ae=Mi==null?void 0:Mi.height)!==null&&ae!==void 0?ae:0,Ii=it+(lt!=="center"?"-"+lt:""),Ri=typeof ei=="number"?ei:{top:0,right:0,bottom:0,left:0,...ei},Pi=Array.isArray(mt)?mt:[mt],xi=Pi.length>0,ki={padding:Ri,boundary:Pi.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:xi},{refs:Li,floatingStyles:Yr,placement:Ui,isPositioned:Vi,middlewareData:Kr}=useFloating({strategy:"fixed",placement:Ii,whileElementsMounted:(...qi)=>autoUpdate(...qi,{animationFrame:si==="always"}),elements:{reference:ci.anchor},middleware:[offset({mainAxis:st+Ti,alignmentAxis:ct}),ut&&shift({mainAxis:!0,crossAxis:!1,limiter:ni==="partial"?limitShift():void 0,...ki}),ut&&flip({...ki}),size({...ki,apply:({elements:qi,rects:Xr,availableWidth:rs,availableHeight:Os})=>{const{width:gs,height:zs}=Xr.reference,$s=qi.floating.style;$s.setProperty("--radix-popper-available-width",`${rs}px`),$s.setProperty("--radix-popper-available-height",`${Os}px`),$s.setProperty("--radix-popper-anchor-width",`${gs}px`),$s.setProperty("--radix-popper-anchor-height",`${zs}px`)}}),_i&&arrow({element:_i,padding:gt}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:yi,arrowHeight:Ti}),ri&&hide({strategy:"referenceHidden",...ki})]}),[Wi,Zr]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(Ui),ps=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(li);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{Vi&&(ps==null||ps())},[Vi,ps]);const Is=(ye=Kr.arrow)===null||ye===void 0?void 0:ye.x,_s=(ve=Kr.arrow)===null||ve===void 0?void 0:ve.y,ws=((be=Kr.arrow)===null||be===void 0?void 0:be.centerOffset)!==0,[hi,Bi]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{Ci&&Bi(window.getComputedStyle(Ci).zIndex)},[Ci]),reactExports.createElement("div",{ref:Li.setFloating,"data-radix-popper-content-wrapper":"",style:{...Yr,transform:Vi?Yr.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:hi,"--radix-popper-transform-origin":[(Qe=Kr.transformOrigin)===null||Qe===void 0?void 0:Qe.x,(Xe=Kr.transformOrigin)===null||Xe===void 0?void 0:Xe.y].join(" ")},dir:ie.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:tt,placedSide:Wi,onArrowChange:bi,arrowX:Is,arrowY:_s,shouldHideArrow:ws},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":Wi,"data-align":Zr},ai,{ref:gi,style:{...ai.style,animation:Vi?void 0:"none",opacity:(Je=Kr.hide)!==null&&Je!==void 0&&Je.referenceHidden?0:void 0}}))))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function(Z,ee){const{__scopePopper:ae,...ye}=Z,ve=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,ae),be=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[ve.placedSide];return reactExports.createElement("span",{ref:ve.onArrowChange,style:{position:"absolute",left:ve.arrowX,top:ve.arrowY,[be]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[ve.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[ve.placedSide],visibility:ve.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$1({},ye,{ref:ee,style:{...ye.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(ie){return ie!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=ie=>({name:"transformOrigin",options:ie,fn(Z){var ee,ae,ye,ve,be;const{placement:Qe,rects:Xe,middlewareData:Je}=Z,it=((ee=Je.arrow)===null||ee===void 0?void 0:ee.centerOffset)!==0,st=it?0:ie.arrowWidth,lt=it?0:ie.arrowHeight,[ct,gt]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(Qe),ut={start:"0%",center:"50%",end:"100%"}[gt],mt=((ae=(ye=Je.arrow)===null||ye===void 0?void 0:ye.x)!==null&&ae!==void 0?ae:0)+st/2,ei=((ve=(be=Je.arrow)===null||be===void 0?void 0:be.y)!==null&&ve!==void 0?ve:0)+lt/2;let ni="",ri="";return ct==="bottom"?(ni=it?ut:`${mt}px`,ri=`${-lt}px`):ct==="top"?(ni=it?ut:`${mt}px`,ri=`${Xe.floating.height+lt}px`):ct==="right"?(ni=`${-lt}px`,ri=it?ut:`${ei}px`):ct==="left"&&(ni=`${Xe.floating.width+lt}px`,ri=it?ut:`${ei}px`),{data:{x:ni,y:ri}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(ie){const[Z,ee="center"]=ie.split("-");return[Z,ee]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0,$f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((ie,Z)=>{var ee;const{container:ae=globalThis==null||(ee=globalThis.document)===null||ee===void 0?void 0:ee.body,...ye}=ie;return ae?$7SXl2$reactdom.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},ye,{ref:Z})),ae):null});var getDefaultParent=function(ie){if(typeof document>"u")return null;var Z=Array.isArray(ie)?ie[0]:ie;return Z.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(ie){return ie&&(ie.host||unwrapHost(ie.parentNode))},correctTargets=function(ie,Z){return Z.map(function(ee){if(ie.contains(ee))return ee;var ae=unwrapHost(ee);return ae&&ie.contains(ae)?ae:(console.error("aria-hidden",ee,"in not contained inside",ie,". Doing nothing"),null)}).filter(function(ee){return!!ee})},applyAttributeToOthers=function(ie,Z,ee,ae){var ye=correctTargets(Z,Array.isArray(ie)?ie:[ie]);markerMap[ee]||(markerMap[ee]=new WeakMap);var ve=markerMap[ee],be=[],Qe=new Set,Xe=new Set(ye),Je=function(it){!it||Qe.has(it)||(Qe.add(it),Je(it.parentNode))};ye.forEach(Je);var tt=function(it){!it||Xe.has(it)||Array.prototype.forEach.call(it.children,function(st){if(Qe.has(st))tt(st);else{var lt=st.getAttribute(ae),ct=lt!==null&&lt!=="false",gt=(counterMap.get(st)||0)+1,ut=(ve.get(st)||0)+1;counterMap.set(st,gt),ve.set(st,ut),be.push(st),gt===1&&ct&&uncontrolledNodes.set(st,!0),ut===1&&st.setAttribute(ee,"true"),ct||st.setAttribute(ae,"true")}})};return tt(Z),Qe.clear(),lockCount++,function(){be.forEach(function(it){var st=counterMap.get(it)-1,lt=ve.get(it)-1;counterMap.set(it,st),ve.set(it,lt),st||(uncontrolledNodes.has(it)||it.removeAttribute(ae),uncontrolledNodes.delete(it)),lt||it.removeAttribute(ee)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(ie,Z,ee){ee===void 0&&(ee="data-aria-hidden");var ae=Array.from(Array.isArray(ie)?ie:[ie]),ye=Z||getDefaultParent(ie);return ye?(ae.push.apply(ae,Array.from(ye.querySelectorAll("[aria-live]"))),applyAttributeToOthers(ae,ye,ee,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(Z){for(var ee,ae=1,ye=arguments.length;ae<ye;ae++){ee=arguments[ae];for(var ve in ee)Object.prototype.hasOwnProperty.call(ee,ve)&&(Z[ve]=ee[ve])}return Z},__assign.apply(this,arguments)};function __rest(ie,Z){var ee={};for(var ae in ie)Object.prototype.hasOwnProperty.call(ie,ae)&&Z.indexOf(ae)<0&&(ee[ae]=ie[ae]);if(ie!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ye=0,ae=Object.getOwnPropertySymbols(ie);ye<ae.length;ye++)Z.indexOf(ae[ye])<0&&Object.prototype.propertyIsEnumerable.call(ie,ae[ye])&&(ee[ae[ye]]=ie[ae[ye]]);return ee}function __spreadArray(ie,Z,ee){if(ee||arguments.length===2)for(var ae=0,ye=Z.length,ve;ae<ye;ae++)(ve||!(ae in Z))&&(ve||(ve=Array.prototype.slice.call(Z,0,ae)),ve[ae]=Z[ae]);return ie.concat(ve||Array.prototype.slice.call(Z))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(ie,Z){return typeof ie=="function"?ie(Z):ie&&(ie.current=Z),ie}function useCallbackRef(ie,Z){var ee=reactExports.useState(function(){return{value:ie,callback:Z,facade:{get current(){return ee.value},set current(ae){var ye=ee.value;ye!==ae&&(ee.value=ae,ee.callback(ae,ye))}}}})[0];return ee.callback=Z,ee.facade}var currentValues=new WeakMap;function useMergeRefs(ie,Z){var ee=useCallbackRef(Z||null,function(ae){return ie.forEach(function(ye){return assignRef(ye,ae)})});return reactExports.useLayoutEffect(function(){var ae=currentValues.get(ee);if(ae){var ye=new Set(ae),ve=new Set(ie),be=ee.current;ye.forEach(function(Qe){ve.has(Qe)||assignRef(Qe,null)}),ve.forEach(function(Qe){ye.has(Qe)||assignRef(Qe,be)})}currentValues.set(ee,ie)},[ie]),ee}function ItoI(ie){return ie}function innerCreateMedium(ie,Z){Z===void 0&&(Z=ItoI);var ee=[],ae=!1,ye={read:function(){if(ae)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return ee.length?ee[ee.length-1]:ie},useMedium:function(ve){var be=Z(ve,ae);return ee.push(be),function(){ee=ee.filter(function(Qe){return Qe!==be})}},assignSyncMedium:function(ve){for(ae=!0;ee.length;){var be=ee;ee=[],be.forEach(ve)}ee={push:function(Qe){return ve(Qe)},filter:function(){return ee}}},assignMedium:function(ve){ae=!0;var be=[];if(ee.length){var Qe=ee;ee=[],Qe.forEach(ve),be=ee}var Xe=function(){var tt=be;be=[],tt.forEach(ve)},Je=function(){return Promise.resolve().then(Xe)};Je(),ee={push:function(tt){be.push(tt),Je()},filter:function(tt){return be=be.filter(tt),ee}}}};return ye}function createSidecarMedium(ie){ie===void 0&&(ie={});var Z=innerCreateMedium(null);return Z.options=__assign({async:!0,ssr:!1},ie),Z}var SideCar$1=function(ie){var Z=ie.sideCar,ee=__rest(ie,["sideCar"]);if(!Z)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var ae=Z.read();if(!ae)throw new Error("Sidecar medium not found");return reactExports.createElement(ae,__assign({},ee))};SideCar$1.isSideCarExport=!0;function exportSidecar(ie,Z){return ie.useMedium(Z),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(ie,Z){var ee=reactExports.useRef(null),ae=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),ye=ae[0],ve=ae[1],be=ie.forwardProps,Qe=ie.children,Xe=ie.className,Je=ie.removeScrollBar,tt=ie.enabled,it=ie.shards,st=ie.sideCar,lt=ie.noIsolation,ct=ie.inert,gt=ie.allowPinchZoom,ut=ie.as,mt=ut===void 0?"div":ut,ei=__rest(ie,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),ni=st,ri=useMergeRefs([ee,Z]),si=__assign(__assign({},ei),ye);return reactExports.createElement(reactExports.Fragment,null,tt&&reactExports.createElement(ni,{sideCar:effectCar,removeScrollBar:Je,shards:it,noIsolation:lt,inert:ct,setCallbacks:ve,allowPinchZoom:!!gt,lockRef:ee}),be?reactExports.cloneElement(reactExports.Children.only(Qe),__assign(__assign({},si),{ref:ri})):reactExports.createElement(mt,__assign({},si,{className:Xe,ref:ri}),Qe))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var ie=document.createElement("style");ie.type="text/css";var Z=getNonce();return Z&&ie.setAttribute("nonce",Z),ie}function injectStyles(ie,Z){ie.styleSheet?ie.styleSheet.cssText=Z:ie.appendChild(document.createTextNode(Z))}function insertStyleTag(ie){var Z=document.head||document.getElementsByTagName("head")[0];Z.appendChild(ie)}var stylesheetSingleton=function(){var ie=0,Z=null;return{add:function(ee){ie==0&&(Z=makeStyleTag())&&(injectStyles(Z,ee),insertStyleTag(Z)),ie++},remove:function(){ie--,!ie&&Z&&(Z.parentNode&&Z.parentNode.removeChild(Z),Z=null)}}},styleHookSingleton=function(){var ie=stylesheetSingleton();return function(Z,ee){reactExports.useEffect(function(){return ie.add(Z),function(){ie.remove()}},[Z&&ee])}},styleSingleton=function(){var ie=styleHookSingleton(),Z=function(ee){var ae=ee.styles,ye=ee.dynamic;return ie(ae,ye),null};return Z},zeroGap={left:0,top:0,right:0,gap:0},parse=function(ie){return parseInt(ie||"",10)||0},getOffset=function(ie){var Z=window.getComputedStyle(document.body),ee=Z[ie==="padding"?"paddingLeft":"marginLeft"],ae=Z[ie==="padding"?"paddingTop":"marginTop"],ye=Z[ie==="padding"?"paddingRight":"marginRight"];return[parse(ee),parse(ae),parse(ye)]},getGapWidth=function(ie){if(ie===void 0&&(ie="margin"),typeof window>"u")return zeroGap;var Z=getOffset(ie),ee=document.documentElement.clientWidth,ae=window.innerWidth;return{left:Z[0],top:Z[1],right:Z[2],gap:Math.max(0,ae-ee+Z[2]-Z[0])}},Style=styleSingleton(),getStyles=function(ie,Z,ee,ae){var ye=ie.left,ve=ie.top,be=ie.right,Qe=ie.gap;return ee===void 0&&(ee="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(ae,`;
   padding-right: `).concat(Qe,"px ").concat(ae,`;
  }
  body {
    overflow: hidden `).concat(ae,`;
    overscroll-behavior: contain;
    `).concat([Z&&"position: relative ".concat(ae,";"),ee==="margin"&&`
    padding-left: `.concat(ye,`px;
    padding-top: `).concat(ve,`px;
    padding-right: `).concat(be,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(Qe,"px ").concat(ae,`;
    `),ee==="padding"&&"padding-right: ".concat(Qe,"px ").concat(ae,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(Qe,"px ").concat(ae,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(Qe,"px ").concat(ae,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(ae,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(ae,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(Qe,`px;
  }
`)},RemoveScrollBar=function(ie){var Z=ie.noRelative,ee=ie.noImportant,ae=ie.gapMode,ye=ae===void 0?"margin":ae,ve=reactExports.useMemo(function(){return getGapWidth(ye)},[ye]);return reactExports.createElement(Style,{styles:getStyles(ve,!Z,ye,ee?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(ie){return ie.tagName==="TEXTAREA"},elementCanBeScrolled=function(ie,Z){var ee=window.getComputedStyle(ie);return ee[Z]!=="hidden"&&!(ee.overflowY===ee.overflowX&&!alwaysContainsScroll(ie)&&ee[Z]==="visible")},elementCouldBeVScrolled=function(ie){return elementCanBeScrolled(ie,"overflowY")},elementCouldBeHScrolled=function(ie){return elementCanBeScrolled(ie,"overflowX")},locationCouldBeScrolled=function(ie,Z){var ee=Z;do{typeof ShadowRoot<"u"&&ee instanceof ShadowRoot&&(ee=ee.host);var ae=elementCouldBeScrolled(ie,ee);if(ae){var ye=getScrollVariables(ie,ee),ve=ye[1],be=ye[2];if(ve>be)return!0}ee=ee.parentNode}while(ee&&ee!==document.body);return!1},getVScrollVariables=function(ie){var Z=ie.scrollTop,ee=ie.scrollHeight,ae=ie.clientHeight;return[Z,ee,ae]},getHScrollVariables=function(ie){var Z=ie.scrollLeft,ee=ie.scrollWidth,ae=ie.clientWidth;return[Z,ee,ae]},elementCouldBeScrolled=function(ie,Z){return ie==="v"?elementCouldBeVScrolled(Z):elementCouldBeHScrolled(Z)},getScrollVariables=function(ie,Z){return ie==="v"?getVScrollVariables(Z):getHScrollVariables(Z)},getDirectionFactor=function(ie,Z){return ie==="h"&&Z==="rtl"?-1:1},handleScroll=function(ie,Z,ee,ae,ye){var ve=getDirectionFactor(ie,window.getComputedStyle(Z).direction),be=ve*ae,Qe=ee.target,Xe=Z.contains(Qe),Je=!1,tt=be>0,it=0,st=0;do{var lt=getScrollVariables(ie,Qe),ct=lt[0],gt=lt[1],ut=lt[2],mt=gt-ut-ve*ct;(ct||mt)&&elementCouldBeScrolled(ie,Qe)&&(it+=mt,st+=ct),Qe=Qe.parentNode}while(!Xe&&Qe!==document.body||Xe&&(Z.contains(Qe)||Z===Qe));return(tt&&(ye&&it===0||!ye&&be>it)||!tt&&(ye&&st===0||!ye&&-be>st))&&(Je=!0),Je},getTouchXY=function(ie){return"changedTouches"in ie?[ie.changedTouches[0].clientX,ie.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(ie){return[ie.deltaX,ie.deltaY]},extractRef=function(ie){return ie&&"current"in ie?ie.current:ie},deltaCompare=function(ie,Z){return ie[0]===Z[0]&&ie[1]===Z[1]},generateStyle=function(ie){return`
  .block-interactivity-`.concat(ie,` {pointer-events: none;}
  .allow-interactivity-`).concat(ie,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(ie){var Z=reactExports.useRef([]),ee=reactExports.useRef([0,0]),ae=reactExports.useRef(),ye=reactExports.useState(idCounter++)[0],ve=reactExports.useState(function(){return styleSingleton()})[0],be=reactExports.useRef(ie);reactExports.useEffect(function(){be.current=ie},[ie]),reactExports.useEffect(function(){if(ie.inert){document.body.classList.add("block-interactivity-".concat(ye));var gt=__spreadArray([ie.lockRef.current],(ie.shards||[]).map(extractRef),!0).filter(Boolean);return gt.forEach(function(ut){return ut.classList.add("allow-interactivity-".concat(ye))}),function(){document.body.classList.remove("block-interactivity-".concat(ye)),gt.forEach(function(ut){return ut.classList.remove("allow-interactivity-".concat(ye))})}}},[ie.inert,ie.lockRef.current,ie.shards]);var Qe=reactExports.useCallback(function(gt,ut){if("touches"in gt&&gt.touches.length===2)return!be.current.allowPinchZoom;var mt=getTouchXY(gt),ei=ee.current,ni="deltaX"in gt?gt.deltaX:ei[0]-mt[0],ri="deltaY"in gt?gt.deltaY:ei[1]-mt[1],si,li=gt.target,ai=Math.abs(ni)>Math.abs(ri)?"h":"v";if("touches"in gt&&ai==="h"&&li.type==="range")return!1;var ci=locationCouldBeScrolled(ai,li);if(!ci)return!0;if(ci?si=ai:(si=ai==="v"?"h":"v",ci=locationCouldBeScrolled(ai,li)),!ci)return!1;if(!ae.current&&"changedTouches"in gt&&(ni||ri)&&(ae.current=si),!si)return!0;var Ci=ae.current||si;return handleScroll(Ci,ut,gt,Ci==="h"?ni:ri,!0)},[]),Xe=reactExports.useCallback(function(gt){var ut=gt;if(!(!lockStack.length||lockStack[lockStack.length-1]!==ve)){var mt="deltaY"in ut?getDeltaXY(ut):getTouchXY(ut),ei=Z.current.filter(function(si){return si.name===ut.type&&si.target===ut.target&&deltaCompare(si.delta,mt)})[0];if(ei&&ei.should){ut.cancelable&&ut.preventDefault();return}if(!ei){var ni=(be.current.shards||[]).map(extractRef).filter(Boolean).filter(function(si){return si.contains(ut.target)}),ri=ni.length>0?Qe(ut,ni[0]):!be.current.noIsolation;ri&&ut.cancelable&&ut.preventDefault()}}},[]),Je=reactExports.useCallback(function(gt,ut,mt,ei){var ni={name:gt,delta:ut,target:mt,should:ei};Z.current.push(ni),setTimeout(function(){Z.current=Z.current.filter(function(ri){return ri!==ni})},1)},[]),tt=reactExports.useCallback(function(gt){ee.current=getTouchXY(gt),ae.current=void 0},[]),it=reactExports.useCallback(function(gt){Je(gt.type,getDeltaXY(gt),gt.target,Qe(gt,ie.lockRef.current))},[]),st=reactExports.useCallback(function(gt){Je(gt.type,getTouchXY(gt),gt.target,Qe(gt,ie.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(ve),ie.setCallbacks({onScrollCapture:it,onWheelCapture:it,onTouchMoveCapture:st}),document.addEventListener("wheel",Xe,nonPassive),document.addEventListener("touchmove",Xe,nonPassive),document.addEventListener("touchstart",tt,nonPassive),function(){lockStack=lockStack.filter(function(gt){return gt!==ve}),document.removeEventListener("wheel",Xe,nonPassive),document.removeEventListener("touchmove",Xe,nonPassive),document.removeEventListener("touchstart",tt,nonPassive)}},[]);var lt=ie.removeScrollBar,ct=ie.inert;return reactExports.createElement(reactExports.Fragment,null,ct?reactExports.createElement(ve,{styles:generateStyle(ye)}):null,lt?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(ie,Z){return reactExports.createElement(RemoveScroll,__assign({},ie,{ref:Z,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $01b9c$RemoveScroll=ReactRemoveScroll,$cb5cc270b50c6fcd$var$POPOVER_NAME="Popover",[$cb5cc270b50c6fcd$var$createPopoverContext,$cb5cc270b50c6fcd$export$c8393c9e73286932]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cb5cc270b50c6fcd$var$POPOVER_NAME,[$cf1ac5d9fe0e8206$export$722aac194ae923]),$cb5cc270b50c6fcd$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cb5cc270b50c6fcd$var$PopoverProvider,$cb5cc270b50c6fcd$var$usePopoverContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$POPOVER_NAME),$cb5cc270b50c6fcd$export$5b6b19405a83ff9d=ie=>{const{__scopePopover:Z,children:ee,open:ae,defaultOpen:ye,onOpenChange:ve,modal:be=!1}=ie,Qe=$cb5cc270b50c6fcd$var$usePopperScope(Z),Xe=reactExports.useRef(null),[Je,tt]=reactExports.useState(!1),[it=!1,st]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:ae,defaultProp:ye,onChange:ve});return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,Qe,reactExports.createElement($cb5cc270b50c6fcd$var$PopoverProvider,{scope:Z,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:Xe,open:it,onOpenChange:st,onOpenToggle:reactExports.useCallback(()=>st(lt=>!lt),[st]),hasCustomAnchor:Je,onCustomAnchorAdd:reactExports.useCallback(()=>tt(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>tt(!1),[]),modal:be},ee))},$cb5cc270b50c6fcd$var$TRIGGER_NAME="PopoverTrigger",$cb5cc270b50c6fcd$export$7dacb05d26466c3=reactExports.forwardRef((ie,Z)=>{const{__scopePopover:ee,...ae}=ie,ye=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$TRIGGER_NAME,ee),ve=$cb5cc270b50c6fcd$var$usePopperScope(ee),be=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ye.triggerRef),Qe=reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-haspopup":"dialog","aria-expanded":ye.open,"aria-controls":ye.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(ye.open)},ae,{ref:be,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onClick,ye.onOpenToggle)}));return ye.hasCustomAnchor?Qe:reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},ve),Qe)}),$cb5cc270b50c6fcd$var$PORTAL_NAME="PopoverPortal",[$cb5cc270b50c6fcd$var$PortalProvider,$cb5cc270b50c6fcd$var$usePortalContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$PORTAL_NAME,{forceMount:void 0}),$cb5cc270b50c6fcd$var$CONTENT_NAME="PopoverContent",$cb5cc270b50c6fcd$export$d7e1f420b25549ff=reactExports.forwardRef((ie,Z)=>{const ee=$cb5cc270b50c6fcd$var$usePortalContext($cb5cc270b50c6fcd$var$CONTENT_NAME,ie.__scopePopover),{forceMount:ae=ee.forceMount,...ye}=ie,ve=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,ie.__scopePopover);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:ae||ve.open},ve.modal?reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentModal,_extends$1({},ye,{ref:Z})):reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentNonModal,_extends$1({},ye,{ref:Z})))}),$cb5cc270b50c6fcd$var$PopoverContentModal=reactExports.forwardRef((ie,Z)=>{const ee=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,ie.__scopePopover),ae=reactExports.useRef(null),ye=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ae),ve=reactExports.useRef(!1);return reactExports.useEffect(()=>{const be=ae.current;if(be)return hideOthers(be)},[]),reactExports.createElement($01b9c$RemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},ie,{ref:ye,trapFocus:ee.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onCloseAutoFocus,be=>{var Qe;be.preventDefault(),ve.current||(Qe=ee.triggerRef.current)===null||Qe===void 0||Qe.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onPointerDownOutside,be=>{const Qe=be.detail.originalEvent,Xe=Qe.button===0&&Qe.ctrlKey===!0,Je=Qe.button===2||Xe;ve.current=Je},{checkForDefaultPrevented:!1}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onFocusOutside,be=>be.preventDefault(),{checkForDefaultPrevented:!1})})))}),$cb5cc270b50c6fcd$var$PopoverContentNonModal=reactExports.forwardRef((ie,Z)=>{const ee=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,ie.__scopePopover),ae=reactExports.useRef(!1),ye=reactExports.useRef(!1);return reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},ie,{ref:Z,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:ve=>{var be;if((be=ie.onCloseAutoFocus)===null||be===void 0||be.call(ie,ve),!ve.defaultPrevented){var Qe;ae.current||(Qe=ee.triggerRef.current)===null||Qe===void 0||Qe.focus(),ve.preventDefault()}ae.current=!1,ye.current=!1},onInteractOutside:ve=>{var be,Qe;(be=ie.onInteractOutside)===null||be===void 0||be.call(ie,ve),ve.defaultPrevented||(ae.current=!0,ve.detail.originalEvent.type==="pointerdown"&&(ye.current=!0));const Xe=ve.target;((Qe=ee.triggerRef.current)===null||Qe===void 0?void 0:Qe.contains(Xe))&&ve.preventDefault(),ve.detail.originalEvent.type==="focusin"&&ye.current&&ve.preventDefault()}}))}),$cb5cc270b50c6fcd$var$PopoverContentImpl=reactExports.forwardRef((ie,Z)=>{const{__scopePopover:ee,trapFocus:ae,onOpenAutoFocus:ye,onCloseAutoFocus:ve,disableOutsidePointerEvents:be,onEscapeKeyDown:Qe,onPointerDownOutside:Xe,onFocusOutside:Je,onInteractOutside:tt,...it}=ie,st=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,ee),lt=$cb5cc270b50c6fcd$var$usePopperScope(ee);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:ae,onMountAutoFocus:ye,onUnmountAutoFocus:ve},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:be,onInteractOutside:tt,onEscapeKeyDown:Qe,onPointerDownOutside:Xe,onFocusOutside:Je,onDismiss:()=>st.onOpenChange(!1)},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({"data-state":$cb5cc270b50c6fcd$var$getState(st.open),role:"dialog",id:st.contentId},lt,it,{ref:Z,style:{...it.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),$cb5cc270b50c6fcd$var$CLOSE_NAME="PopoverClose",$cb5cc270b50c6fcd$export$d6ac43ebaa40d53e=reactExports.forwardRef((ie,Z)=>{const{__scopePopover:ee,...ae}=ie,ye=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CLOSE_NAME,ee);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button"},ae,{ref:Z,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onClick,()=>ye.onOpenChange(!1))}))}),$cb5cc270b50c6fcd$export$3152841115e061b2=reactExports.forwardRef((ie,Z)=>{const{__scopePopover:ee,...ae}=ie,ye=$cb5cc270b50c6fcd$var$usePopperScope(ee);return reactExports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends$1({},ye,ae,{ref:Z}))});function $cb5cc270b50c6fcd$var$getState(ie){return ie?"open":"closed"}const $cb5cc270b50c6fcd$export$be92b6f5f03c0fe9=$cb5cc270b50c6fcd$export$5b6b19405a83ff9d,$cb5cc270b50c6fcd$export$41fb9f06171c75f4=$cb5cc270b50c6fcd$export$7dacb05d26466c3,$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2=$cb5cc270b50c6fcd$export$d7e1f420b25549ff,$cb5cc270b50c6fcd$export$f39c2d165cd861fe=$cb5cc270b50c6fcd$export$d6ac43ebaa40d53e,$cb5cc270b50c6fcd$export$21b07c8f274aebd5=$cb5cc270b50c6fcd$export$3152841115e061b2;function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(ie,[Z,ee]){return Math.min(ee,Math.max(Z,ie))}const $ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((ie,Z)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},ie,{ref:Z,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...ie.style}}))),$cc7e05a45900e73f$var$OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],$cc7e05a45900e73f$var$SELECTION_KEYS=[" ","Enter"],$cc7e05a45900e73f$var$SELECT_NAME="Select",[$cc7e05a45900e73f$var$Collection,$cc7e05a45900e73f$var$useCollection,$cc7e05a45900e73f$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$createSelectContext,$cc7e05a45900e73f$export$286727a75dc039bd]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cc7e05a45900e73f$var$SELECT_NAME,[$cc7e05a45900e73f$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923]),$cc7e05a45900e73f$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cc7e05a45900e73f$var$SelectProvider,$cc7e05a45900e73f$var$useSelectContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$SelectNativeOptionsProvider,$cc7e05a45900e73f$var$useSelectNativeOptionsContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),$cc7e05a45900e73f$export$ef9b1a59e592288f=ie=>{const{__scopeSelect:Z,children:ee,open:ae,defaultOpen:ye,onOpenChange:ve,value:be,defaultValue:Qe,onValueChange:Xe,dir:Je,name:tt,autoComplete:it,disabled:st,required:lt}=ie,ct=$cc7e05a45900e73f$var$usePopperScope(Z),[gt,ut]=reactExports.useState(null),[mt,ei]=reactExports.useState(null),[ni,ri]=reactExports.useState(!1),si=$f631663db3294ace$export$b39126d51d94e6f3(Je),[li=!1,ai]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:ae,defaultProp:ye,onChange:ve}),[ci,Ci]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:be,defaultProp:Qe,onChange:Xe}),pi=reactExports.useRef(null),gi=gt?!!gt.closest("form"):!0,[_i,bi]=reactExports.useState(new Set),Mi=Array.from(_i).map(yi=>yi.props.value).join(";");return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,ct,reactExports.createElement($cc7e05a45900e73f$var$SelectProvider,{required:lt,scope:Z,trigger:gt,onTriggerChange:ut,valueNode:mt,onValueNodeChange:ei,valueNodeHasChildren:ni,onValueNodeHasChildrenChange:ri,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),value:ci,onValueChange:Ci,open:li,onOpenChange:ai,dir:si,triggerPointerDownPosRef:pi,disabled:st},reactExports.createElement($cc7e05a45900e73f$var$Collection.Provider,{scope:Z},reactExports.createElement($cc7e05a45900e73f$var$SelectNativeOptionsProvider,{scope:ie.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(yi=>{bi(Ti=>new Set(Ti).add(yi))},[]),onNativeOptionRemove:reactExports.useCallback(yi=>{bi(Ti=>{const Ii=new Set(Ti);return Ii.delete(yi),Ii})},[])},ee)),gi?reactExports.createElement($cc7e05a45900e73f$var$BubbleSelect,{key:Mi,"aria-hidden":!0,required:lt,tabIndex:-1,name:tt,autoComplete:it,value:ci,onChange:yi=>Ci(yi.target.value),disabled:st},ci===void 0?reactExports.createElement("option",{value:""}):null,Array.from(_i)):null))},$cc7e05a45900e73f$var$TRIGGER_NAME="SelectTrigger",$cc7e05a45900e73f$export$3ac1e88a1c0b9f1=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,disabled:ae=!1,...ye}=ie,ve=$cc7e05a45900e73f$var$usePopperScope(ee),be=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$TRIGGER_NAME,ee),Qe=be.disabled||ae,Xe=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,be.onTriggerChange),Je=$cc7e05a45900e73f$var$useCollection(ee),[tt,it,st]=$cc7e05a45900e73f$var$useTypeaheadSearch(ct=>{const gt=Je().filter(ei=>!ei.disabled),ut=gt.find(ei=>ei.value===be.value),mt=$cc7e05a45900e73f$var$findNextItem(gt,ct,ut);mt!==void 0&&be.onValueChange(mt.value)}),lt=()=>{Qe||(be.onOpenChange(!0),st())};return reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},ve),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"combobox","aria-controls":be.contentId,"aria-expanded":be.open,"aria-required":be.required,"aria-autocomplete":"none",dir:be.dir,"data-state":be.open?"open":"closed",disabled:Qe,"data-disabled":Qe?"":void 0,"data-placeholder":$cc7e05a45900e73f$var$shouldShowPlaceholder(be.value)?"":void 0},ye,{ref:Xe,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye.onClick,ct=>{ct.currentTarget.focus()}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye.onPointerDown,ct=>{const gt=ct.target;gt.hasPointerCapture(ct.pointerId)&&gt.releasePointerCapture(ct.pointerId),ct.button===0&&ct.ctrlKey===!1&&(lt(),be.triggerPointerDownPosRef.current={x:Math.round(ct.pageX),y:Math.round(ct.pageY)},ct.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye.onKeyDown,ct=>{const gt=tt.current!=="";!(ct.ctrlKey||ct.altKey||ct.metaKey)&&ct.key.length===1&&it(ct.key),!(gt&&ct.key===" ")&&$cc7e05a45900e73f$var$OPEN_KEYS.includes(ct.key)&&(lt(),ct.preventDefault())})})))}),$cc7e05a45900e73f$var$VALUE_NAME="SelectValue",$cc7e05a45900e73f$export$e288731fd71264f0=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,className:ae,style:ye,children:ve,placeholder:be="",...Qe}=ie,Xe=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$VALUE_NAME,ee),{onValueNodeHasChildrenChange:Je}=Xe,tt=ve!==void 0,it=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,Xe.onValueNodeChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{Je(tt)},[Je,tt]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},Qe,{ref:it,style:{pointerEvents:"none"}}),$cc7e05a45900e73f$var$shouldShowPlaceholder(Xe.value)?reactExports.createElement(reactExports.Fragment,null,be):ve)}),$cc7e05a45900e73f$export$99b400cabb58c515=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,children:ae,...ye}=ie;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},ye,{ref:Z}),ae||"")}),$cc7e05a45900e73f$export$b2af6c9944296213=ie=>reactExports.createElement($f1701beae083dbae$export$602eac185826482c,_extends$1({asChild:!0},ie)),$cc7e05a45900e73f$var$CONTENT_NAME="SelectContent",$cc7e05a45900e73f$export$c973a4b3cb86a03d=reactExports.forwardRef((ie,Z)=>{const ee=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,ie.__scopeSelect),[ae,ye]=reactExports.useState();if($9f79659886946c16$export$e5c5a5f917a5871c(()=>{ye(new DocumentFragment)},[]),!ee.open){const ve=ae;return ve?reactDomExports.createPortal(reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:ie.__scopeSelect},reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:ie.__scopeSelect},reactExports.createElement("div",null,ie.children))),ve):null}return reactExports.createElement($cc7e05a45900e73f$var$SelectContentImpl,_extends$1({},ie,{ref:Z}))}),$cc7e05a45900e73f$var$CONTENT_MARGIN=10,[$cc7e05a45900e73f$var$SelectContentProvider,$cc7e05a45900e73f$var$useSelectContentContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME),$cc7e05a45900e73f$var$SelectContentImpl=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,position:ae="item-aligned",onCloseAutoFocus:ye,onEscapeKeyDown:ve,onPointerDownOutside:be,side:Qe,sideOffset:Xe,align:Je,alignOffset:tt,arrowPadding:it,collisionBoundary:st,collisionPadding:lt,sticky:ct,hideWhenDetached:gt,avoidCollisions:ut,...mt}=ie,ei=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,ee),[ni,ri]=reactExports.useState(null),[si,li]=reactExports.useState(null),ai=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,Wi=>ri(Wi)),[ci,Ci]=reactExports.useState(null),[pi,gi]=reactExports.useState(null),_i=$cc7e05a45900e73f$var$useCollection(ee),[bi,Mi]=reactExports.useState(!1),yi=reactExports.useRef(!1);reactExports.useEffect(()=>{if(ni)return hideOthers(ni)},[ni]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c();const Ti=reactExports.useCallback(Wi=>{const[Zr,...ps]=_i().map(ws=>ws.ref.current),[Is]=ps.slice(-1),_s=document.activeElement;for(const ws of Wi)if(ws===_s||(ws==null||ws.scrollIntoView({block:"nearest"}),ws===Zr&&si&&(si.scrollTop=0),ws===Is&&si&&(si.scrollTop=si.scrollHeight),ws==null||ws.focus(),document.activeElement!==_s))return},[_i,si]),Ii=reactExports.useCallback(()=>Ti([ci,ni]),[Ti,ci,ni]);reactExports.useEffect(()=>{bi&&Ii()},[bi,Ii]);const{onOpenChange:Ri,triggerPointerDownPosRef:Pi}=ei;reactExports.useEffect(()=>{if(ni){let Wi={x:0,y:0};const Zr=Is=>{var _s,ws,hi,Bi;Wi={x:Math.abs(Math.round(Is.pageX)-((_s=(ws=Pi.current)===null||ws===void 0?void 0:ws.x)!==null&&_s!==void 0?_s:0)),y:Math.abs(Math.round(Is.pageY)-((hi=(Bi=Pi.current)===null||Bi===void 0?void 0:Bi.y)!==null&&hi!==void 0?hi:0))}},ps=Is=>{Wi.x<=10&&Wi.y<=10?Is.preventDefault():ni.contains(Is.target)||Ri(!1),document.removeEventListener("pointermove",Zr),Pi.current=null};return Pi.current!==null&&(document.addEventListener("pointermove",Zr),document.addEventListener("pointerup",ps,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Zr),document.removeEventListener("pointerup",ps,{capture:!0})}}},[ni,Ri,Pi]),reactExports.useEffect(()=>{const Wi=()=>Ri(!1);return window.addEventListener("blur",Wi),window.addEventListener("resize",Wi),()=>{window.removeEventListener("blur",Wi),window.removeEventListener("resize",Wi)}},[Ri]);const[xi,ki]=$cc7e05a45900e73f$var$useTypeaheadSearch(Wi=>{const Zr=_i().filter(_s=>!_s.disabled),ps=Zr.find(_s=>_s.ref.current===document.activeElement),Is=$cc7e05a45900e73f$var$findNextItem(Zr,Wi,ps);Is&&setTimeout(()=>Is.ref.current.focus())}),Li=reactExports.useCallback((Wi,Zr,ps)=>{const Is=!yi.current&&!ps;(ei.value!==void 0&&ei.value===Zr||Is)&&(Ci(Wi),Is&&(yi.current=!0))},[ei.value]),Yr=reactExports.useCallback(()=>ni==null?void 0:ni.focus(),[ni]),Ui=reactExports.useCallback((Wi,Zr,ps)=>{const Is=!yi.current&&!ps;(ei.value!==void 0&&ei.value===Zr||Is)&&gi(Wi)},[ei.value]),Vi=ae==="popper"?$cc7e05a45900e73f$var$SelectPopperPosition:$cc7e05a45900e73f$var$SelectItemAlignedPosition,Kr=Vi===$cc7e05a45900e73f$var$SelectPopperPosition?{side:Qe,sideOffset:Xe,align:Je,alignOffset:tt,arrowPadding:it,collisionBoundary:st,collisionPadding:lt,sticky:ct,hideWhenDetached:gt,avoidCollisions:ut}:{};return reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:ee,content:ni,viewport:si,onViewportChange:li,itemRefCallback:Li,selectedItem:ci,onItemLeave:Yr,itemTextRefCallback:Ui,focusSelectedItem:Ii,selectedItemText:pi,position:ae,isPositioned:bi,searchRef:xi},reactExports.createElement($01b9c$RemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:ei.open,onMountAutoFocus:Wi=>{Wi.preventDefault()},onUnmountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye,Wi=>{var Zr;(Zr=ei.trigger)===null||Zr===void 0||Zr.focus({preventScroll:!0}),Wi.preventDefault()})},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ve,onPointerDownOutside:be,onFocusOutside:Wi=>Wi.preventDefault(),onDismiss:()=>ei.onOpenChange(!1)},reactExports.createElement(Vi,_extends$1({role:"listbox",id:ei.contentId,"data-state":ei.open?"open":"closed",dir:ei.dir,onContextMenu:Wi=>Wi.preventDefault()},mt,Kr,{onPlaced:()=>Mi(!0),ref:ai,style:{display:"flex",flexDirection:"column",outline:"none",...mt.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mt.onKeyDown,Wi=>{const Zr=Wi.ctrlKey||Wi.altKey||Wi.metaKey;if(Wi.key==="Tab"&&Wi.preventDefault(),!Zr&&Wi.key.length===1&&ki(Wi.key),["ArrowUp","ArrowDown","Home","End"].includes(Wi.key)){let Is=_i().filter(_s=>!_s.disabled).map(_s=>_s.ref.current);if(["ArrowUp","End"].includes(Wi.key)&&(Is=Is.slice().reverse()),["ArrowUp","ArrowDown"].includes(Wi.key)){const _s=Wi.target,ws=Is.indexOf(_s);Is=Is.slice(ws+1)}setTimeout(()=>Ti(Is)),Wi.preventDefault()}})}))))))}),$cc7e05a45900e73f$var$SelectItemAlignedPosition=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,onPlaced:ae,...ye}=ie,ve=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,ee),be=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$CONTENT_NAME,ee),[Qe,Xe]=reactExports.useState(null),[Je,tt]=reactExports.useState(null),it=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ai=>tt(ai)),st=$cc7e05a45900e73f$var$useCollection(ee),lt=reactExports.useRef(!1),ct=reactExports.useRef(!0),{viewport:gt,selectedItem:ut,selectedItemText:mt,focusSelectedItem:ei}=be,ni=reactExports.useCallback(()=>{if(ve.trigger&&ve.valueNode&&Qe&&Je&&gt&&ut&&mt){const ai=ve.trigger.getBoundingClientRect(),ci=Je.getBoundingClientRect(),Ci=ve.valueNode.getBoundingClientRect(),pi=mt.getBoundingClientRect();if(ve.dir!=="rtl"){const _s=pi.left-ci.left,ws=Ci.left-_s,hi=ai.left-ws,Bi=ai.width+hi,qi=Math.max(Bi,ci.width),Xr=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,rs=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(ws,[$cc7e05a45900e73f$var$CONTENT_MARGIN,Xr-qi]);Qe.style.minWidth=Bi+"px",Qe.style.left=rs+"px"}else{const _s=ci.right-pi.right,ws=window.innerWidth-Ci.right-_s,hi=window.innerWidth-ai.right-ws,Bi=ai.width+hi,qi=Math.max(Bi,ci.width),Xr=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,rs=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(ws,[$cc7e05a45900e73f$var$CONTENT_MARGIN,Xr-qi]);Qe.style.minWidth=Bi+"px",Qe.style.right=rs+"px"}const gi=st(),_i=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,bi=gt.scrollHeight,Mi=window.getComputedStyle(Je),yi=parseInt(Mi.borderTopWidth,10),Ti=parseInt(Mi.paddingTop,10),Ii=parseInt(Mi.borderBottomWidth,10),Ri=parseInt(Mi.paddingBottom,10),Pi=yi+Ti+bi+Ri+Ii,xi=Math.min(ut.offsetHeight*5,Pi),ki=window.getComputedStyle(gt),Li=parseInt(ki.paddingTop,10),Yr=parseInt(ki.paddingBottom,10),Ui=ai.top+ai.height/2-$cc7e05a45900e73f$var$CONTENT_MARGIN,Vi=_i-Ui,Kr=ut.offsetHeight/2,Wi=ut.offsetTop+Kr,Zr=yi+Ti+Wi,ps=Pi-Zr;if(Zr<=Ui){const _s=ut===gi[gi.length-1].ref.current;Qe.style.bottom="0px";const ws=Je.clientHeight-gt.offsetTop-gt.offsetHeight,hi=Math.max(Vi,Kr+(_s?Yr:0)+ws+Ii),Bi=Zr+hi;Qe.style.height=Bi+"px"}else{const _s=ut===gi[0].ref.current;Qe.style.top="0px";const hi=Math.max(Ui,yi+gt.offsetTop+(_s?Li:0)+Kr)+ps;Qe.style.height=hi+"px",gt.scrollTop=Zr-Ui+gt.offsetTop}Qe.style.margin=`${$cc7e05a45900e73f$var$CONTENT_MARGIN}px 0`,Qe.style.minHeight=xi+"px",Qe.style.maxHeight=_i+"px",ae==null||ae(),requestAnimationFrame(()=>lt.current=!0)}},[st,ve.trigger,ve.valueNode,Qe,Je,gt,ut,mt,ve.dir,ae]);$9f79659886946c16$export$e5c5a5f917a5871c(()=>ni(),[ni]);const[ri,si]=reactExports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{Je&&si(window.getComputedStyle(Je).zIndex)},[Je]);const li=reactExports.useCallback(ai=>{ai&&ct.current===!0&&(ni(),ei==null||ei(),ct.current=!1)},[ni,ei]);return reactExports.createElement($cc7e05a45900e73f$var$SelectViewportProvider,{scope:ee,contentWrapper:Qe,shouldExpandOnScrollRef:lt,onScrollButtonChange:li},reactExports.createElement("div",{ref:Xe,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ri}},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},ye,{ref:it,style:{boxSizing:"border-box",maxHeight:"100%",...ye.style}}))))}),$cc7e05a45900e73f$var$SelectPopperPosition=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,align:ae="start",collisionPadding:ye=$cc7e05a45900e73f$var$CONTENT_MARGIN,...ve}=ie,be=$cc7e05a45900e73f$var$usePopperScope(ee);return reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({},be,ve,{ref:Z,align:ae,collisionPadding:ye,style:{boxSizing:"border-box",...ve.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[$cc7e05a45900e73f$var$SelectViewportProvider,$cc7e05a45900e73f$var$useSelectViewportContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,{}),$cc7e05a45900e73f$var$VIEWPORT_NAME="SelectViewport",$cc7e05a45900e73f$export$9ed6e7b40248d36d=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,...ae}=ie,ye=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$VIEWPORT_NAME,ee),ve=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$VIEWPORT_NAME,ee),be=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ye.onViewportChange),Qe=reactExports.useRef(0);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:ee},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-radix-select-viewport":"",role:"presentation"},ae,{ref:be,style:{position:"relative",flex:1,overflow:"auto",...ae.style},onScroll:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ae.onScroll,Xe=>{const Je=Xe.currentTarget,{contentWrapper:tt,shouldExpandOnScrollRef:it}=ve;if(it!=null&&it.current&&tt){const st=Math.abs(Qe.current-Je.scrollTop);if(st>0){const lt=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,ct=parseFloat(tt.style.minHeight),gt=parseFloat(tt.style.height),ut=Math.max(ct,gt);if(ut<lt){const mt=ut+st,ei=Math.min(lt,mt),ni=mt-ei;tt.style.height=ei+"px",tt.style.bottom==="0px"&&(Je.scrollTop=ni>0?ni:0,tt.style.justifyContent="flex-end")}}}Qe.current=Je.scrollTop})}))))}),$cc7e05a45900e73f$var$GROUP_NAME="SelectGroup",[$cc7e05a45900e73f$var$SelectGroupContextProvider,$cc7e05a45900e73f$var$useSelectGroupContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$GROUP_NAME),$cc7e05a45900e73f$export$ee25a334c55de1f4=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,...ae}=ie,ye=$1746a345f3d73bb7$export$f680877a34711e37();return reactExports.createElement($cc7e05a45900e73f$var$SelectGroupContextProvider,{scope:ee,id:ye},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"group","aria-labelledby":ye},ae,{ref:Z})))}),$cc7e05a45900e73f$var$LABEL_NAME="SelectLabel",$cc7e05a45900e73f$export$f67338d29bd972f8=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,...ae}=ie,ye=$cc7e05a45900e73f$var$useSelectGroupContext($cc7e05a45900e73f$var$LABEL_NAME,ee);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({id:ye.id},ae,{ref:Z}))}),$cc7e05a45900e73f$var$ITEM_NAME="SelectItem",[$cc7e05a45900e73f$var$SelectItemContextProvider,$cc7e05a45900e73f$var$useSelectItemContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$ITEM_NAME),$cc7e05a45900e73f$export$13ef48a934230896=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,value:ae,disabled:ye=!1,textValue:ve,...be}=ie,Qe=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_NAME,ee),Xe=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_NAME,ee),Je=Qe.value===ae,[tt,it]=reactExports.useState(ve??""),[st,lt]=reactExports.useState(!1),ct=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,mt=>{var ei;return(ei=Xe.itemRefCallback)===null||ei===void 0?void 0:ei.call(Xe,mt,ae,ye)}),gt=$1746a345f3d73bb7$export$f680877a34711e37(),ut=()=>{ye||(Qe.onValueChange(ae),Qe.onOpenChange(!1))};if(ae==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return reactExports.createElement($cc7e05a45900e73f$var$SelectItemContextProvider,{scope:ee,value:ae,disabled:ye,textId:gt,isSelected:Je,onItemTextChange:reactExports.useCallback(mt=>{it(ei=>{var ni;return ei||((ni=mt==null?void 0:mt.textContent)!==null&&ni!==void 0?ni:"").trim()})},[])},reactExports.createElement($cc7e05a45900e73f$var$Collection.ItemSlot,{scope:ee,value:ae,disabled:ye,textValue:tt},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"option","aria-labelledby":gt,"data-highlighted":st?"":void 0,"aria-selected":Je&&st,"data-state":Je?"checked":"unchecked","aria-disabled":ye||void 0,"data-disabled":ye?"":void 0,tabIndex:ye?void 0:-1},be,{ref:ct,onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(be.onFocus,()=>lt(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(be.onBlur,()=>lt(!1)),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(be.onPointerUp,ut),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(be.onPointerMove,mt=>{if(ye){var ei;(ei=Xe.onItemLeave)===null||ei===void 0||ei.call(Xe)}else mt.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(be.onPointerLeave,mt=>{if(mt.currentTarget===document.activeElement){var ei;(ei=Xe.onItemLeave)===null||ei===void 0||ei.call(Xe)}}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(be.onKeyDown,mt=>{var ei;((ei=Xe.searchRef)===null||ei===void 0?void 0:ei.current)!==""&&mt.key===" "||($cc7e05a45900e73f$var$SELECTION_KEYS.includes(mt.key)&&ut(),mt.key===" "&&mt.preventDefault())})}))))}),$cc7e05a45900e73f$var$ITEM_TEXT_NAME="SelectItemText",$cc7e05a45900e73f$export$3572fb0fb821ff49=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,className:ae,style:ye,...ve}=ie,be=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,ee),Qe=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,ee),Xe=$cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,ee),Je=$cc7e05a45900e73f$var$useSelectNativeOptionsContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,ee),[tt,it]=reactExports.useState(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,mt=>it(mt),Xe.onItemTextChange,mt=>{var ei;return(ei=Qe.itemTextRefCallback)===null||ei===void 0?void 0:ei.call(Qe,mt,Xe.value,Xe.disabled)}),lt=tt==null?void 0:tt.textContent,ct=reactExports.useMemo(()=>reactExports.createElement("option",{key:Xe.value,value:Xe.value,disabled:Xe.disabled},lt),[Xe.disabled,Xe.value,lt]),{onNativeOptionAdd:gt,onNativeOptionRemove:ut}=Je;return $9f79659886946c16$export$e5c5a5f917a5871c(()=>(gt(ct),()=>ut(ct)),[gt,ut,ct]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({id:Xe.textId},ve,{ref:st})),Xe.isSelected&&be.valueNode&&!be.valueNodeHasChildren?reactDomExports.createPortal(ve.children,be.valueNode):null)}),$cc7e05a45900e73f$var$ITEM_INDICATOR_NAME="SelectItemIndicator",$cc7e05a45900e73f$export$6b9198de19accfe6=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,...ae}=ie;return $cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_INDICATOR_NAME,ee).isSelected?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},ae,{ref:Z})):null}),$cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",$cc7e05a45900e73f$export$d8117927658af6d7=reactExports.forwardRef((ie,Z)=>{const ee=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,ie.__scopeSelect),ae=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,ie.__scopeSelect),[ye,ve]=reactExports.useState(!1),be=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ae.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(ee.viewport&&ee.isPositioned){let Xe=function(){const Je=Qe.scrollTop>0;ve(Je)};const Qe=ee.viewport;return Xe(),Qe.addEventListener("scroll",Xe),()=>Qe.removeEventListener("scroll",Xe)}},[ee.viewport,ee.isPositioned]),ye?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},ie,{ref:be,onAutoScroll:()=>{const{viewport:Qe,selectedItem:Xe}=ee;Qe&&Xe&&(Qe.scrollTop=Qe.scrollTop-Xe.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",$cc7e05a45900e73f$export$ff951e476c12189=reactExports.forwardRef((ie,Z)=>{const ee=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,ie.__scopeSelect),ae=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,ie.__scopeSelect),[ye,ve]=reactExports.useState(!1),be=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ae.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(ee.viewport&&ee.isPositioned){let Xe=function(){const Je=Qe.scrollHeight-Qe.clientHeight,tt=Math.ceil(Qe.scrollTop)<Je;ve(tt)};const Qe=ee.viewport;return Xe(),Qe.addEventListener("scroll",Xe),()=>Qe.removeEventListener("scroll",Xe)}},[ee.viewport,ee.isPositioned]),ye?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},ie,{ref:be,onAutoScroll:()=>{const{viewport:Qe,selectedItem:Xe}=ee;Qe&&Xe&&(Qe.scrollTop=Qe.scrollTop+Xe.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SelectScrollButtonImpl=reactExports.forwardRef((ie,Z)=>{const{__scopeSelect:ee,onAutoScroll:ae,...ye}=ie,ve=$cc7e05a45900e73f$var$useSelectContentContext("SelectScrollButton",ee),be=reactExports.useRef(null),Qe=$cc7e05a45900e73f$var$useCollection(ee),Xe=reactExports.useCallback(()=>{be.current!==null&&(window.clearInterval(be.current),be.current=null)},[]);return reactExports.useEffect(()=>()=>Xe(),[Xe]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{var Je;const tt=Qe().find(it=>it.ref.current===document.activeElement);tt==null||(Je=tt.ref.current)===null||Je===void 0||Je.scrollIntoView({block:"nearest"})},[Qe]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"aria-hidden":!0},ye,{ref:Z,style:{flexShrink:0,...ye.style},onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye.onPointerDown,()=>{be.current===null&&(be.current=window.setInterval(ae,50))}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye.onPointerMove,()=>{var Je;(Je=ve.onItemLeave)===null||Je===void 0||Je.call(ve),be.current===null&&(be.current=window.setInterval(ae,50))}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ye.onPointerLeave,()=>{Xe()})}))});function $cc7e05a45900e73f$var$shouldShowPlaceholder(ie){return ie===""||ie===void 0}const $cc7e05a45900e73f$var$BubbleSelect=reactExports.forwardRef((ie,Z)=>{const{value:ee,...ae}=ie,ye=reactExports.useRef(null),ve=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ye),be=$010c2913dbd2fe3d$export$5cae361ad82dce8b(ee);return reactExports.useEffect(()=>{const Qe=ye.current,Xe=window.HTMLSelectElement.prototype,tt=Object.getOwnPropertyDescriptor(Xe,"value").set;if(be!==ee&&tt){const it=new Event("change",{bubbles:!0});tt.call(Qe,ee),Qe.dispatchEvent(it)}},[be,ee]),reactExports.createElement($ea1ef594cf570d83$export$439d29a4e110a164,{asChild:!0},reactExports.createElement("select",_extends$1({},ae,{ref:ve,defaultValue:ee})))});$cc7e05a45900e73f$var$BubbleSelect.displayName="BubbleSelect";function $cc7e05a45900e73f$var$useTypeaheadSearch(ie){const Z=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ie),ee=reactExports.useRef(""),ae=reactExports.useRef(0),ye=reactExports.useCallback(be=>{const Qe=ee.current+be;Z(Qe),function Xe(Je){ee.current=Je,window.clearTimeout(ae.current),Je!==""&&(ae.current=window.setTimeout(()=>Xe(""),1e3))}(Qe)},[Z]),ve=reactExports.useCallback(()=>{ee.current="",window.clearTimeout(ae.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(ae.current),[]),[ee,ye,ve]}function $cc7e05a45900e73f$var$findNextItem(ie,Z,ee){const ye=Z.length>1&&Array.from(Z).every(Je=>Je===Z[0])?Z[0]:Z,ve=ee?ie.indexOf(ee):-1;let be=$cc7e05a45900e73f$var$wrapArray(ie,Math.max(ve,0));ye.length===1&&(be=be.filter(Je=>Je!==ee));const Xe=be.find(Je=>Je.textValue.toLowerCase().startsWith(ye.toLowerCase()));return Xe!==ee?Xe:void 0}function $cc7e05a45900e73f$var$wrapArray(ie,Z){return ie.map((ee,ae)=>ie[(Z+ae)%ie.length])}const $cc7e05a45900e73f$export$be92b6f5f03c0fe9=$cc7e05a45900e73f$export$ef9b1a59e592288f,$cc7e05a45900e73f$export$41fb9f06171c75f4=$cc7e05a45900e73f$export$3ac1e88a1c0b9f1,$cc7e05a45900e73f$export$7c6e2c02157bb7d2=$cc7e05a45900e73f$export$c973a4b3cb86a03d,$cc7e05a45900e73f$export$b04be29aa201d4f5=$cc7e05a45900e73f$export$f67338d29bd972f8,$cc7e05a45900e73f$export$6d08773d2e66f8f2=$cc7e05a45900e73f$export$13ef48a934230896;var openseadragon={exports:{}};(function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(ie){return new OpenSeadragon.Viewer(ie)}(function(ie){ie.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var Z={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},ee=Object.prototype.toString,ae=Object.prototype.hasOwnProperty;ie.isFunction=function(ye){return ie.type(ye)==="function"},ie.isArray=Array.isArray||function(ye){return ie.type(ye)==="array"},ie.isWindow=function(ye){return ye&&typeof ye=="object"&&"setInterval"in ye},ie.type=function(ye){return ye==null?String(ye):Z[ee.call(ye)]||"object"},ie.isPlainObject=function(ye){if(!ye||OpenSeadragon.type(ye)!=="object"||ye.nodeType||ie.isWindow(ye)||ye.constructor&&!ae.call(ye,"constructor")&&!ae.call(ye.constructor.prototype,"isPrototypeOf"))return!1;var ve;for(var be in ye)ve=be;return ve===void 0||ae.call(ye,ve)},ie.isEmptyObject=function(ye){for(var ve in ye)return!1;return!0},ie.freezeObject=function(ye){return Object.freeze?ie.freezeObject=Object.freeze:ie.freezeObject=function(ve){return ve},ie.freezeObject(ye)},ie.supportsCanvas=function(){var ye=document.createElement("canvas");return!!(ie.isFunction(ye.getContext)&&ye.getContext("2d"))}(),ie.isCanvasTainted=function(ye){var ve=!1;try{ye.getContext("2d").getImageData(0,0,1,1)}catch{ve=!0}return ve},ie.pixelDensityRatio=function(){if(ie.supportsCanvas){var ye=document.createElement("canvas").getContext("2d"),ve=window.devicePixelRatio||1,be=ye.webkitBackingStorePixelRatio||ye.mozBackingStorePixelRatio||ye.msBackingStorePixelRatio||ye.oBackingStorePixelRatio||ye.backingStorePixelRatio||1;return Math.max(ve,1)/be}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var ie,Z,ee,ae,ye,ve,be=arguments[0]||{},Qe=arguments.length,Xe=!1,Je=1;for(typeof be=="boolean"&&(Xe=be,be=arguments[1]||{},Je=2),typeof be!="object"&&!OpenSeadragon.isFunction(be)&&(be={}),Qe===Je&&(be=this,--Je);Je<Qe;Je++)if(ie=arguments[Je],ie!==null||ie!==void 0)for(Z in ie)ee=be[Z],ae=ie[Z],be!==ae&&(Xe&&ae&&(OpenSeadragon.isPlainObject(ae)||(ye=OpenSeadragon.isArray(ae)))?(ye?(ye=!1,ve=ee&&OpenSeadragon.isArray(ee)?ee:[]):ve=ee&&OpenSeadragon.isPlainObject(ee)?ee:{},be[Z]=OpenSeadragon.extend(Xe,ve,ae)):ae!==void 0&&(be[Z]=ae));return be};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var ie=navigator.userAgent;return typeof ie!="string"?!1:ie.indexOf("iPhone")!==-1||ie.indexOf("iPad")!==-1||ie.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(ie,Z){return function(){var ee=arguments;return ee===void 0&&(ee=[]),Z.apply(ie,ee)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(ie){return typeof ie=="string"&&(ie=document.getElementById(ie)),ie},getElementPosition:function(ie){var Z=new $.Point,ee,ae;for(ie=$.getElement(ie),ee=$.getElementStyle(ie).position=="fixed",ae=getOffsetParent(ie,ee);ae;)Z.x+=ie.offsetLeft,Z.y+=ie.offsetTop,ee&&(Z=Z.plus($.getPageScroll())),ie=ae,ee=$.getElementStyle(ie).position=="fixed",ae=getOffsetParent(ie,ee);return Z},getElementOffset:function(ie){ie=$.getElement(ie);var Z=ie&&ie.ownerDocument,ee,ae,ye={top:0,left:0};return Z?(ee=Z.documentElement,typeof ie.getBoundingClientRect<"u"&&(ye=ie.getBoundingClientRect()),ae=Z==Z.window?Z:Z.nodeType===9?Z.defaultView||Z.parentWindow:!1,new $.Point(ye.left+(ae.pageXOffset||ee.scrollLeft)-(ee.clientLeft||0),ye.top+(ae.pageYOffset||ee.scrollTop)-(ee.clientTop||0))):new $.Point},getElementSize:function(ie){return ie=$.getElement(ie),new $.Point(ie.clientWidth,ie.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(ie){return ie=$.getElement(ie),ie.currentStyle}:function(ie){return ie=$.getElement(ie),window.getComputedStyle(ie,"")},getCssPropertyWithVendorPrefix:function(ie){var Z={};return $.getCssPropertyWithVendorPrefix=function(ee){if(Z[ee]!==void 0)return Z[ee];var ae=document.createElement("div").style,ye=null;if(ae[ee]!==void 0)ye=ee;else for(var ve=["Webkit","Moz","MS","O","webkit","moz","ms","o"],be=$.capitalizeFirstLetter(ee),Qe=0;Qe<ve.length;Qe++){var Xe=ve[Qe]+be;if(ae[Xe]!==void 0){ye=Xe;break}}return Z[ee]=ye,ye},$.getCssPropertyWithVendorPrefix(ie)},capitalizeFirstLetter:function(ie){return ie.charAt(0).toUpperCase()+ie.slice(1)},positiveModulo:function(ie,Z){var ee=ie%Z;return ee<0&&(ee+=Z),ee},pointInElement:function(ie,Z){ie=$.getElement(ie);var ee=$.getElementOffset(ie),ae=$.getElementSize(ie);return Z.x>=ee.x&&Z.x<ee.x+ae.x&&Z.y<ee.y+ae.y&&Z.y>=ee.y},getEvent:function(ie){return ie?$.getEvent=function(Z){return Z}:$.getEvent=function(){return window.event},$.getEvent(ie)},getMousePosition:function(ie){if(typeof ie.pageX=="number")$.getMousePosition=function(Z){var ee=new $.Point;return Z=$.getEvent(Z),ee.x=Z.pageX,ee.y=Z.pageY,ee};else if(typeof ie.clientX=="number")$.getMousePosition=function(Z){var ee=new $.Point;return Z=$.getEvent(Z),ee.x=Z.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,ee.y=Z.clientY+document.body.scrollTop+document.documentElement.scrollTop,ee};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(ie)},getPageScroll:function(){var ie=document.documentElement||{},Z=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(Z.scrollLeft||Z.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(ie.scrollLeft||ie.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(ie){if(typeof window.scrollTo<"u")$.setPageScroll=function(ae){window.scrollTo(ae.x,ae.y)};else{var Z=$.getPageScroll();if(Z.x===ie.x&&Z.y===ie.y)return;document.body.scrollLeft=ie.x,document.body.scrollTop=ie.y;var ee=$.getPageScroll();if(ee.x!==Z.x&&ee.y!==Z.y){$.setPageScroll=function(ae){document.body.scrollLeft=ae.x,document.body.scrollTop=ae.y};return}if(document.documentElement.scrollLeft=ie.x,document.documentElement.scrollTop=ie.y,ee=$.getPageScroll(),ee.x!==Z.x&&ee.y!==Z.y){$.setPageScroll=function(ae){document.documentElement.scrollLeft=ae.x,document.documentElement.scrollTop=ae.y};return}$.setPageScroll=function(ae){}}return $.setPageScroll(ie)},getWindowSize:function(){var ie=document.documentElement||{},Z=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(ie.clientWidth||ie.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(Z.clientWidth||Z.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(ie){ie=$.getElement(ie);var Z=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(Z[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(Z[1].style,{display:"table-row"}),$.extend(Z[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),Z[0].appendChild(Z[1]),Z[1].appendChild(Z[2]),Z[2].appendChild(ie),Z[0]},makeNeutralElement:function(ie){var Z=document.createElement(ie),ee=Z.style;return ee.background="transparent none",ee.border="none",ee.margin="0px",ee.padding="0px",ee.position="static",Z},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(ie){return $.makeTransparentImage=function(Z){var ee=$.makeNeutralElement("img");return ee.src=Z,ee},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(Z){var ee=$.makeNeutralElement("img"),ae=null;return ae=$.makeNeutralElement("span"),ae.style.display="inline-block",ee.onload=function(){ae.style.width=ae.style.width||ee.width+"px",ae.style.height=ae.style.height||ee.height+"px",ee.onload=null,ee=null},ee.src=Z,ae.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+Z+"', sizingMethod='scale')",ae}),$.makeTransparentImage(ie)},setElementOpacity:function(ie,Z,ee){var ae,ye;ie=$.getElement(ie),ee&&!$.Browser.alpha&&(Z=Math.round(Z)),$.Browser.opacity?ie.style.opacity=Z<1?Z:"":Z<1?(ae=Math.round(100*Z),ye="alpha(opacity="+ae+")",ie.style.filter=ye):ie.style.filter=""},setElementTouchActionNone:function(ie){ie=$.getElement(ie),typeof ie.style.touchAction<"u"?ie.style.touchAction="none":typeof ie.style.msTouchAction<"u"&&(ie.style.msTouchAction="none")},addClass:function(ie,Z){ie=$.getElement(ie),ie.className?(" "+ie.className+" ").indexOf(" "+Z+" ")===-1&&(ie.className+=" "+Z):ie.className=Z},indexOf:function(ie,Z,ee){return Array.prototype.indexOf?this.indexOf=function(ae,ye,ve){return ae.indexOf(ye,ve)}:this.indexOf=function(ae,ye,ve){var be,Qe=ve||0,Xe;if(!ae)throw new TypeError;if(Xe=ae.length,Xe===0||Qe>=Xe)return-1;for(Qe<0&&(Qe=Xe-Math.abs(Qe)),be=Qe;be<Xe;be++)if(ae[be]===ye)return be;return-1},this.indexOf(ie,Z,ee)},removeClass:function(ie,Z){var ee,ae=[],ye;for(ie=$.getElement(ie),ee=ie.className.split(/\s+/),ye=0;ye<ee.length;ye++)ee[ye]&&ee[ye]!==Z&&ae.push(ee[ye]);ie.className=ae.join(" ")},addEvent:function(){if(window.addEventListener)return function(ie,Z,ee,ae){ie=$.getElement(ie),ie.addEventListener(Z,ee,ae)};if(window.attachEvent)return function(ie,Z,ee,ae){ie=$.getElement(ie),ie.attachEvent("on"+Z,ee)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(ie,Z,ee,ae){ie=$.getElement(ie),ie.removeEventListener(Z,ee,ae)};if(window.detachEvent)return function(ie,Z,ee,ae){ie=$.getElement(ie),ie.detachEvent("on"+Z,ee)};throw new Error("No known event model.")}(),cancelEvent:function(ie){ie=$.getEvent(ie),ie.preventDefault?$.cancelEvent=function(Z){Z.preventDefault()}:$.cancelEvent=function(Z){Z=$.getEvent(Z),Z.cancel=!0,Z.returnValue=!1},$.cancelEvent(ie)},stopEvent:function(ie){ie=$.getEvent(ie),ie.stopPropagation?$.stopEvent=function(Z){Z.stopPropagation()}:$.stopEvent=function(Z){Z=$.getEvent(Z),Z.cancelBubble=!0},$.stopEvent(ie)},createCallback:function(ie,Z){var ee=[],ae;for(ae=2;ae<arguments.length;ae++)ee.push(arguments[ae]);return function(){var ye=ee.concat([]),ve;for(ve=0;ve<arguments.length;ve++)ye.push(arguments[ve]);return Z.apply(ie,ye)}},getUrlParameter:function(ie){var Z=URLPARAMS[ie];return Z||null},getUrlProtocol:function(ie){var Z=ie.match(/^([a-z]+:)\/\//i);return Z===null?window.location.protocol:Z[1].toLowerCase()},createAjaxRequest:function(ie){var Z;try{Z=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{Z=!1}if(Z)window.XMLHttpRequest?$.createAjaxRequest=function(ee){return ee?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(ie)},makeAjaxRequest:function(ie,Z,ee){var ae,ye,ve;$.isPlainObject(ie)&&(Z=ie.success,ee=ie.error,ae=ie.withCredentials,ye=ie.headers,ve=ie.responseType||null,ie=ie.url);var be=$.getUrlProtocol(ie),Qe=$.createAjaxRequest(be==="file:");if(!$.isFunction(Z))throw new Error("makeAjaxRequest requires a success callback");Qe.onreadystatechange=function(){Qe.readyState==4&&(Qe.onreadystatechange=function(){},Qe.status>=200&&Qe.status<300||Qe.status===0&&be!=="http:"&&be!=="https:"?Z(Qe):($.console.log("AJAX request returned %d: %s",Qe.status,ie),$.isFunction(ee)&&ee(Qe)))};try{if(Qe.open("GET",ie,!0),ve&&(Qe.responseType=ve),ye)for(var Xe in ye)Object.prototype.hasOwnProperty.call(ye,Xe)&&ye[Xe]&&Qe.setRequestHeader(Xe,ye[Xe]);ae&&(Qe.withCredentials=!0),Qe.send(null)}catch(st){var Je=st.message,tt=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(tt&&typeof st.number<"u"&&st.number==-2147024891&&(Je+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",st.name,Je),Qe.onreadystatechange=function(){},window.XDomainRequest){var it=new window.XDomainRequest;if(it){it.onload=function(lt){$.isFunction(Z)&&Z({responseText:it.responseText,status:200,statusText:"OK"})},it.onerror=function(lt){$.isFunction(ee)&&ee({responseText:it.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{it.open("GET",ie),it.send()}catch{$.isFunction(ee)&&ee(Qe,st)}}}else $.isFunction(ee)&&ee(Qe,st)}return Qe},jsonp:function(ie){var Z,ee=ie.url,ae=document.head||document.getElementsByTagName("head")[0]||document.documentElement,ye=ie.callbackName||"openseadragon"+$.now(),ve=window[ye],be="$1"+ye+"$2",Qe=ie.param||"callback",Xe=ie.callback;ee=ee.replace(/(\=)\?(&|$)|\?\?/i,be),ee+=(/\?/.test(ee)?"&":"?")+Qe+"="+ye,window[ye]=function(Je){if(ve)window[ye]=ve;else try{delete window[ye]}catch{}Xe&&$.isFunction(Xe)&&Xe(Je)},Z=document.createElement("script"),(ie.async!==void 0||ie.async!==!1)&&(Z.async="async"),ie.scriptCharset&&(Z.charset=ie.scriptCharset),Z.src=ee,Z.onload=Z.onreadystatechange=function(Je,tt){(tt||!Z.readyState||/loaded|complete/.test(Z.readyState))&&(Z.onload=Z.onreadystatechange=null,ae&&Z.parentNode&&ae.removeChild(Z),Z=void 0)},ae.insertBefore(Z,ae.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(ie){if(window.DOMParser)$.parseXml=function(Z){var ee=null,ae;return ae=new DOMParser,ee=ae.parseFromString(Z,"text/xml"),ee};else if(window.ActiveXObject)$.parseXml=function(Z){var ee=null;return ee=new ActiveXObject("Microsoft.XMLDOM"),ee.async=!1,ee.loadXML(Z),ee};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(ie)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(ie){return ie=ie||"",!!FILEFORMATS[ie.toLowerCase()]}});var nullfunction=function(ie){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var ie=navigator.appVersion,Z=navigator.userAgent,ee;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(Z.substring(Z.indexOf("MSIE")+5,Z.indexOf(";",Z.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(Z.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(Z.substring(Z.indexOf("Firefox")+8))):Z.indexOf("Safari")>=0?($.Browser.vendor=Z.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(Z.substring(Z.substring(0,Z.indexOf("Safari")).lastIndexOf("/")+1,Z.indexOf("Safari")))):(ee=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),ee.exec(Z)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(ie);break}var ae=window.location.search.substring(1),ye=ae.split("&"),ve,be,Qe;for(Qe=0;Qe<ye.length;Qe++)if(ve=ye[Qe],be=ve.indexOf("="),be>0){var Xe=ve.substring(0,be),Je=ve.substring(be+1);try{URLPARAMS[Xe]=decodeURIComponent(Je)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",Xe,Je)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(ie){var Z=ie.requestAnimationFrame||ie.mozRequestAnimationFrame||ie.webkitRequestAnimationFrame||ie.msRequestAnimationFrame,ee=ie.cancelAnimationFrame||ie.mozCancelAnimationFrame||ie.webkitCancelAnimationFrame||ie.msCancelAnimationFrame;if(Z&&ee)$.requestAnimationFrame=function(){return Z.apply(ie,arguments)},$.cancelAnimationFrame=function(){return ee.apply(ie,arguments)};else{var ae=[],ye=[],ve=0,be;$.requestAnimationFrame=function(Qe){return ae.push([++ve,Qe]),be||(be=setInterval(function(){if(ae.length){var Xe=$.now(),Je=ye;for(ye=ae,ae=Je;ye.length;)ye.shift()[1](Xe)}else clearInterval(be),be=void 0},1e3/50)),ve},$.cancelAnimationFrame=function(Qe){var Xe,Je;for(Xe=0,Je=ae.length;Xe<Je;Xe+=1)if(ae[Xe][0]===Qe){ae.splice(Xe,1);return}for(Xe=0,Je=ye.length;Xe<Je;Xe+=1)if(ye[Xe][0]===Qe){ye.splice(Xe,1);return}}}}(window);function getOffsetParent(ie,Z){return Z&&ie!=document.body?document.body:ie.offsetParent}}(OpenSeadragon),function(ie,Z){module.exports?module.exports=Z():ie.OpenSeadragon=Z()}(commonjsGlobal,function(){return OpenSeadragon}),function(ie){var Z={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(Z.supportsFullScreen=!0,Z.getFullScreenElement=function(){return document.fullscreenElement},Z.requestFullScreen=function(ee){return ee.requestFullscreen()},Z.exitFullScreen=function(){document.exitFullscreen()},Z.fullScreenEventName="fullscreenchange",Z.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(Z.supportsFullScreen=!0,Z.getFullScreenElement=function(){return document.msFullscreenElement},Z.requestFullScreen=function(ee){return ee.msRequestFullscreen()},Z.exitFullScreen=function(){document.msExitFullscreen()},Z.fullScreenEventName="MSFullscreenChange",Z.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(Z.supportsFullScreen=!0,Z.getFullScreenElement=function(){return document.webkitFullscreenElement},Z.requestFullScreen=function(ee){return ee.webkitRequestFullscreen()},Z.exitFullScreen=function(){document.webkitExitFullscreen()},Z.fullScreenEventName="webkitfullscreenchange",Z.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(Z.supportsFullScreen=!0,Z.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},Z.requestFullScreen=function(ee){return ee.webkitRequestFullScreen()},Z.exitFullScreen=function(){document.webkitCancelFullScreen()},Z.fullScreenEventName="webkitfullscreenchange",Z.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(Z.supportsFullScreen=!0,Z.getFullScreenElement=function(){return document.mozFullScreenElement},Z.requestFullScreen=function(ee){return ee.mozRequestFullScreen()},Z.exitFullScreen=function(){document.mozCancelFullScreen()},Z.fullScreenEventName="mozfullscreenchange",Z.fullScreenErrorEventName="mozfullscreenerror"),Z.isFullScreen=function(){return Z.getFullScreenElement()!==null},Z.cancelFullScreen=function(){ie.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),Z.exitFullScreen()},ie.extend(ie,Z)}(OpenSeadragon),function(ie){ie.EventSource=function(){this.events={}},ie.EventSource.prototype={addOnceHandler:function(Z,ee,ae,ye){var ve=this;ye=ye||1;var be=0,Qe=function(Xe){be++,be===ye&&ve.removeHandler(Z,Qe),ee(Xe)};this.addHandler(Z,Qe,ae)},addHandler:function(Z,ee,ae){var ye=this.events[Z];ye||(this.events[Z]=ye=[]),ee&&ie.isFunction(ee)&&(ye[ye.length]={handler:ee,userData:ae||null})},removeHandler:function(Z,ee){var ae=this.events[Z],ye=[],ve;if(ae&&ie.isArray(ae)){for(ve=0;ve<ae.length;ve++)ae[ve].handler!==ee&&ye.push(ae[ve]);this.events[Z]=ye}},removeAllHandlers:function(Z){if(Z)this.events[Z]=[];else for(var ee in this.events)this.events[ee]=[]},getHandler:function(Z){var ee=this.events[Z];return!ee||!ee.length?null:(ee=ee.length===1?[ee[0]]:Array.apply(null,ee),function(ae,ye){var ve,be=ee.length;for(ve=0;ve<be;ve++)ee[ve]&&(ye.eventSource=ae,ye.userData=ee[ve].userData,ee[ve].handler(ye))})},raiseEvent:function(Z,ee){var ae=this.getHandler(Z);ae&&(ee||(ee={}),ae(this,ee))}}}(OpenSeadragon),function(ie){var Z=[],ee={};ie.MouseTracker=function(vi){Z.push(this);var mi=arguments;ie.isPlainObject(vi)||(vi={element:mi[0],clickTimeThreshold:mi[1],clickDistThreshold:mi[2]}),this.hash=Math.random(),this.element=ie.getElement(vi.element),this.clickTimeThreshold=vi.clickTimeThreshold||ie.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=vi.clickDistThreshold||ie.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=vi.dblClickTimeThreshold||ie.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=vi.dblClickDistThreshold||ie.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=vi.userData||null,this.stopDelay=vi.stopDelay||50,this.enterHandler=vi.enterHandler||null,this.exitHandler=vi.exitHandler||null,this.pressHandler=vi.pressHandler||null,this.nonPrimaryPressHandler=vi.nonPrimaryPressHandler||null,this.releaseHandler=vi.releaseHandler||null,this.nonPrimaryReleaseHandler=vi.nonPrimaryReleaseHandler||null,this.moveHandler=vi.moveHandler||null,this.scrollHandler=vi.scrollHandler||null,this.clickHandler=vi.clickHandler||null,this.dblClickHandler=vi.dblClickHandler||null,this.dragHandler=vi.dragHandler||null,this.dragEndHandler=vi.dragEndHandler||null,this.pinchHandler=vi.pinchHandler||null,this.stopHandler=vi.stopHandler||null,this.keyDownHandler=vi.keyDownHandler||null,this.keyUpHandler=vi.keyUpHandler||null,this.keyHandler=vi.keyHandler||null,this.focusHandler=vi.focusHandler||null,this.blurHandler=vi.blurHandler||null;var Fi=this;ee[this.hash]={click:function(Ni){ct(Fi,Ni)},dblclick:function(Ni){gt(Fi,Ni)},keydown:function(Ni){ut(Fi,Ni)},keyup:function(Ni){mt(Fi,Ni)},keypress:function(Ni){ei(Fi,Ni)},focus:function(Ni){ni(Fi,Ni)},blur:function(Ni){ri(Fi,Ni)},wheel:function(Ni){si(Fi,Ni)},mousewheel:function(Ni){li(Fi,Ni)},DOMMouseScroll:function(Ni){li(Fi,Ni)},MozMousePixelScroll:function(Ni){li(Fi,Ni)},mouseenter:function(Ni){Ci(Fi,Ni)},mouseleave:function(Ni){_i(Fi,Ni)},mouseover:function(Ni){pi(Fi,Ni)},mouseout:function(Ni){bi(Fi,Ni)},mousedown:function(Ni){Ti(Fi,Ni)},mouseup:function(Ni){Ii(Fi,Ni)},mouseupcaptured:function(Ni){Ri(Fi,Ni)},mousemove:function(Ni){xi(Fi,Ni)},mousemovecaptured:function(Ni){ki(Fi,Ni)},touchstart:function(Ni){Ui(Fi,Ni)},touchend:function(Ni){Vi(Fi,Ni)},touchendcaptured:function(Ni){Kr(Fi,Ni)},touchmove:function(Ni){Zr(Fi,Ni)},touchmovecaptured:function(Ni){ps(Fi,Ni)},touchcancel:function(Ni){_s(Fi,Ni)},gesturestart:function(Ni){ws(Fi,Ni)},gesturechange:function(Ni){hi(Fi,Ni)},pointerover:function(Ni){Bi(Fi,Ni)},MSPointerOver:function(Ni){Bi(Fi,Ni)},pointerout:function(Ni){qi(Fi,Ni)},MSPointerOut:function(Ni){qi(Fi,Ni)},pointerdown:function(Ni){Xr(Fi,Ni)},MSPointerDown:function(Ni){Xr(Fi,Ni)},pointerup:function(Ni){rs(Fi,Ni)},MSPointerUp:function(Ni){rs(Fi,Ni)},pointermove:function(Ni){zs(Fi,Ni)},MSPointerMove:function(Ni){zs(Fi,Ni)},pointercancel:function(Ni){xs(Fi,Ni)},MSPointerCancel:function(Ni){xs(Fi,Ni)},pointerupcaptured:function(Ni){Os(Fi,Ni)},pointermovecaptured:function(Ni){$s(Fi,Ni)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},vi.startDisabled||this.setTracking(!0)},ie.MouseTracker.prototype={destroy:function(){var vi;for(ve(this),this.element=null,vi=0;vi<Z.length;vi++)if(Z[vi]===this){Z.splice(vi,1);break}ee[this.hash]=null,delete ee[this.hash]},isTracking:function(){return ee[this.hash].tracking},setTracking:function(vi){return vi?ye(this):ve(this),this},getActivePointersListsExceptType:function(vi){for(var mi=ee[this.hash],Fi=[],Ni=0;Ni<mi.activePointersLists.length;++Ni)mi.activePointersLists[Ni].type!==vi&&Fi.push(mi.activePointersLists[Ni]);return Fi},getActivePointersListByType:function(vi){var mi=ee[this.hash],Fi,Ni=mi.activePointersLists.length,is;for(Fi=0;Fi<Ni;Fi++)if(mi.activePointersLists[Fi].type===vi)return mi.activePointersLists[Fi];return is=new ie.MouseTracker.GesturePointList(vi),mi.activePointersLists.push(is),is},getActivePointerCount:function(){var vi=ee[this.hash],mi,Fi=vi.activePointersLists.length,Ni=0;for(mi=0;mi<Fi;mi++)Ni+=vi.activePointersLists[mi].getLength();return Ni},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},ie.MouseTracker.resetAllMouseTrackers=function(){for(var vi=0;vi<Z.length;vi++)Z[vi].isTracking()&&(Z[vi].setTracking(!1),Z[vi].setTracking(!0))},ie.MouseTracker.gesturePointVelocityTracker=function(){var vi=[],mi=0,Fi=0,Ni=function(as,js){return as.hash.toString()+js.type+js.id.toString()},is=function(){var as,js=vi.length,ea,Vs,ya=ie.now(),Ns,fo,ja;for(Ns=ya-Fi,Fi=ya,as=0;as<js;as++)ea=vi[as],Vs=ea.gPoint,Vs.direction=Math.atan2(Vs.currentPos.y-ea.lastPos.y,Vs.currentPos.x-ea.lastPos.x),fo=ea.lastPos.distanceTo(Vs.currentPos),ea.lastPos=Vs.currentPos,ja=1e3*fo/(Ns+1),Vs.speed=.75*ja+.25*Vs.speed},vs=function(as,js){var ea=Ni(as,js);vi.push({guid:ea,gPoint:js,lastPos:js.currentPos}),vi.length===1&&(Fi=ie.now(),mi=window.setInterval(is,50))},us=function(as,js){var ea=Ni(as,js),Vs,ya=vi.length;for(Vs=0;Vs<ya;Vs++)if(vi[Vs].guid===ea){vi.splice(Vs,1),ya--,ya===0&&window.clearInterval(mi);break}};return{addPoint:vs,removePoint:us}}(),ie.MouseTracker.captureElement=document,ie.MouseTracker.wheelEventName=ie.Browser.vendor==ie.BROWSERS.IE&&ie.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",ie.MouseTracker.supportsMouseCapture=function(){var vi=document.createElement("div");return ie.isFunction(vi.setCapture)&&ie.isFunction(vi.releaseCapture)}(),ie.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",ie.MouseTracker.wheelEventName],ie.MouseTracker.wheelEventName=="DOMMouseScroll"&&ie.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||ie.Browser.vendor!==ie.BROWSERS.IE)?(ie.MouseTracker.havePointerEvents=!0,ie.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),ie.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?ie.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:ie.MouseTracker.maxTouchPoints=0,ie.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(ie.MouseTracker.havePointerEvents=!0,ie.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),ie.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?ie.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:ie.MouseTracker.maxTouchPoints=0,ie.MouseTracker.haveMouseEnter=!1):(ie.MouseTracker.havePointerEvents=!1,ie.Browser.vendor===ie.BROWSERS.IE&&ie.Browser.version<9?(ie.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),ie.MouseTracker.haveMouseEnter=!0):(ie.MouseTracker.subscribeEvents.push("mouseover","mouseout"),ie.MouseTracker.haveMouseEnter=!1),ie.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&ie.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&ie.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),ie.MouseTracker.mousePointerId="legacy-mouse",ie.MouseTracker.maxTouchPoints=10),ie.MouseTracker.GesturePointList=function(vi){this._gPoints=[],this.type=vi,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},ie.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(vi){return this._gPoints.push(vi)},removeById:function(vi){var mi,Fi=this._gPoints.length;for(mi=0;mi<Fi;mi++)if(this._gPoints[mi].id===vi){this._gPoints.splice(mi,1);break}return this._gPoints.length},getByIndex:function(vi){return vi<this._gPoints.length?this._gPoints[vi]:null},getById:function(vi){var mi,Fi=this._gPoints.length;for(mi=0;mi<Fi;mi++)if(this._gPoints[mi].id===vi)return this._gPoints[mi];return null},getPrimary:function(vi){var mi,Fi=this._gPoints.length;for(mi=0;mi<Fi;mi++)if(this._gPoints[mi].isPrimary)return this._gPoints[mi];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function ae(vi){var mi=ee[vi.hash],Fi,Ni=mi.activePointersLists.length;for(Fi=0;Fi<Ni;Fi++)mi.activePointersLists[Fi].captureCount>0&&(ie.removeEvent(ie.MouseTracker.captureElement,"mousemove",mi.mousemovecaptured,!0),ie.removeEvent(ie.MouseTracker.captureElement,"mouseup",mi.mouseupcaptured,!0),ie.removeEvent(ie.MouseTracker.captureElement,ie.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",mi.pointermovecaptured,!0),ie.removeEvent(ie.MouseTracker.captureElement,ie.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",mi.pointerupcaptured,!0),ie.removeEvent(ie.MouseTracker.captureElement,"touchmove",mi.touchmovecaptured,!0),ie.removeEvent(ie.MouseTracker.captureElement,"touchend",mi.touchendcaptured,!0),mi.activePointersLists[Fi].captureCount=0);for(Fi=0;Fi<Ni;Fi++)mi.activePointersLists.pop()}function ye(vi){var mi=ee[vi.hash],Fi,Ni;if(!mi.tracking){for(Ni=0;Ni<ie.MouseTracker.subscribeEvents.length;Ni++)Fi=ie.MouseTracker.subscribeEvents[Ni],ie.addEvent(vi.element,Fi,mi[Fi],!1);ae(vi),mi.tracking=!0}}function ve(vi){var mi=ee[vi.hash],Fi,Ni;if(mi.tracking){for(Ni=0;Ni<ie.MouseTracker.subscribeEvents.length;Ni++)Fi=ie.MouseTracker.subscribeEvents[Ni],ie.removeEvent(vi.element,Fi,mi[Fi],!1);ae(vi),mi.tracking=!1}}function be(vi,mi){var Fi=ee[vi.hash];if(mi==="pointerevent")return{upName:ie.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:Fi.pointerupcaptured,moveName:ie.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:Fi.pointermovecaptured};if(mi==="mouse")return{upName:"mouseup",upHandler:Fi.mouseupcaptured,moveName:"mousemove",moveHandler:Fi.mousemovecaptured};if(mi==="touch")return{upName:"touchend",upHandler:Fi.touchendcaptured,moveName:"touchmove",moveHandler:Fi.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function Qe(vi,mi,Fi){var Ni=vi.getActivePointersListByType(mi),is;Ni.captureCount+=Fi||1,Ni.captureCount===1&&(ie.Browser.vendor===ie.BROWSERS.IE&&ie.Browser.version<9?vi.element.setCapture(!0):(is=be(vi,ie.MouseTracker.havePointerEvents?"pointerevent":mi),ca&&Ta(window.top)&&ie.addEvent(window.top,is.upName,is.upHandler,!0),ie.addEvent(ie.MouseTracker.captureElement,is.upName,is.upHandler,!0),ie.addEvent(ie.MouseTracker.captureElement,is.moveName,is.moveHandler,!0)))}function Xe(vi,mi,Fi){var Ni=vi.getActivePointersListByType(mi),is;Ni.captureCount-=Fi||1,Ni.captureCount===0&&(ie.Browser.vendor===ie.BROWSERS.IE&&ie.Browser.version<9?vi.element.releaseCapture():(is=be(vi,ie.MouseTracker.havePointerEvents?"pointerevent":mi),ca&&Ta(window.top)&&ie.removeEvent(window.top,is.upName,is.upHandler,!0),ie.removeEvent(ie.MouseTracker.captureElement,is.moveName,is.moveHandler,!0),ie.removeEvent(ie.MouseTracker.captureElement,is.upName,is.upHandler,!0)))}function Je(vi){var mi;if(ie.MouseTracker.unprefixedPointerEvents)mi=vi.pointerType;else switch(vi.pointerType){case 2:mi="touch";break;case 3:mi="pen";break;case 4:mi="mouse";break;default:mi=""}return mi}function tt(vi){return ie.getMousePosition(vi)}function it(vi,mi){return st(tt(vi),mi)}function st(vi,mi){var Fi=ie.getElementOffset(mi);return vi.minus(Fi)}function lt(vi,mi){return new ie.Point((vi.x+mi.x)/2,(vi.y+mi.y)/2)}function ct(vi,mi){vi.clickHandler&&ie.cancelEvent(mi)}function gt(vi,mi){vi.dblClickHandler&&ie.cancelEvent(mi)}function ut(vi,mi){var Fi;vi.keyDownHandler&&(mi=ie.getEvent(mi),Fi=vi.keyDownHandler({eventSource:vi,keyCode:mi.keyCode?mi.keyCode:mi.charCode,ctrl:mi.ctrlKey,shift:mi.shiftKey,alt:mi.altKey,meta:mi.metaKey,originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),Fi||ie.cancelEvent(mi))}function mt(vi,mi){var Fi;vi.keyUpHandler&&(mi=ie.getEvent(mi),Fi=vi.keyUpHandler({eventSource:vi,keyCode:mi.keyCode?mi.keyCode:mi.charCode,ctrl:mi.ctrlKey,shift:mi.shiftKey,alt:mi.altKey,meta:mi.metaKey,originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),Fi||ie.cancelEvent(mi))}function ei(vi,mi){var Fi;vi.keyHandler&&(mi=ie.getEvent(mi),Fi=vi.keyHandler({eventSource:vi,keyCode:mi.keyCode?mi.keyCode:mi.charCode,ctrl:mi.ctrlKey,shift:mi.shiftKey,alt:mi.altKey,meta:mi.metaKey,originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),Fi||ie.cancelEvent(mi))}function ni(vi,mi){var Fi;vi.focusHandler&&(mi=ie.getEvent(mi),Fi=vi.focusHandler({eventSource:vi,originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),Fi===!1&&ie.cancelEvent(mi))}function ri(vi,mi){var Fi;vi.blurHandler&&(mi=ie.getEvent(mi),Fi=vi.blurHandler({eventSource:vi,originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),Fi===!1&&ie.cancelEvent(mi))}function si(vi,mi){ai(vi,mi,mi)}function li(vi,mi){mi=ie.getEvent(mi);var Fi={target:mi.target||mi.srcElement,type:"wheel",shiftKey:mi.shiftKey||!1,clientX:mi.clientX,clientY:mi.clientY,pageX:mi.pageX?mi.pageX:mi.clientX,pageY:mi.pageY?mi.pageY:mi.clientY,deltaMode:mi.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};ie.MouseTracker.wheelEventName=="mousewheel"?Fi.deltaY=-mi.wheelDelta/ie.DEFAULT_SETTINGS.pixelsPerWheelLine:Fi.deltaY=mi.detail,ai(vi,Fi,mi)}function ai(vi,mi,Fi){var Ni=0,is;Ni=mi.deltaY<0?1:-1,vi.scrollHandler&&(is=vi.scrollHandler({eventSource:vi,pointerType:"mouse",position:it(mi,vi.element),scroll:Ni,shift:mi.shiftKey,isTouchEvent:!1,originalEvent:Fi,preventDefaultAction:!1,userData:vi.userData}),is===!1&&ie.cancelEvent(Fi))}function ci(vi,mi){if(vi===mi)return!1;for(;mi&&mi!==vi;)mi=mi.parentNode;return mi===vi}function Ci(vi,mi){mi=ie.getEvent(mi),gi(vi,mi)}function pi(vi,mi){mi=ie.getEvent(mi),!(mi.currentTarget===mi.relatedTarget||ci(mi.currentTarget,mi.relatedTarget))&&gi(vi,mi)}function gi(vi,mi){var Fi={id:ie.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:tt(mi),currentTime:ie.now()};ma(vi,mi,[Fi])}function _i(vi,mi){mi=ie.getEvent(mi),Mi(vi,mi)}function bi(vi,mi){mi=ie.getEvent(mi),!(mi.currentTarget===mi.relatedTarget||ci(mi.currentTarget,mi.relatedTarget))&&Mi(vi,mi)}function Mi(vi,mi){var Fi={id:ie.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:tt(mi),currentTime:ie.now()};ha(vi,mi,[Fi])}function yi(vi){return ie.Browser.vendor===ie.BROWSERS.IE&&ie.Browser.version<9?vi===1?0:vi===2?2:vi===4?1:-1:vi}function Ti(vi,mi){var Fi;mi=ie.getEvent(mi),Fi={id:ie.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:tt(mi),currentTime:ie.now()},za(vi,mi,[Fi],yi(mi.button))&&(ie.stopEvent(mi),Qe(vi,"mouse")),(vi.clickHandler||vi.dblClickHandler||vi.pressHandler||vi.dragHandler||vi.dragEndHandler)&&ie.cancelEvent(mi)}function Ii(vi,mi){Pi(vi,mi)}function Ri(vi,mi){Pi(vi,mi),ie.stopEvent(mi)}function Pi(vi,mi){var Fi;mi=ie.getEvent(mi),Fi={id:ie.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:tt(mi),currentTime:ie.now()},Io(vi,mi,[Fi],yi(mi.button))&&Xe(vi,"mouse")}function xi(vi,mi){Li(vi,mi)}function ki(vi,mi){Li(vi,mi),ie.stopEvent(mi)}function Li(vi,mi){var Fi;mi=ie.getEvent(mi),Fi={id:ie.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:tt(mi),currentTime:ie.now()},wo(vi,mi,[Fi])}function Yr(vi,mi,Fi){var Ni,is=Fi.getLength(),vs=[];if(Fi.type==="touch"||Fi.contacts>0){for(Ni=0;Ni<is;Ni++)vs.push(Fi.getByIndex(Ni));vs.length>0&&(Io(vi,mi,vs,0),Fi.captureCount=1,Xe(vi,Fi.type),ha(vi,mi,vs))}}function Ui(vi,mi){var Fi,Ni,is,vs=mi.changedTouches.length,us=[],as,js=vi.getActivePointersListByType("touch");for(Fi=ie.now(),js.getLength()>mi.touches.length-vs&&(ie.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),Yr(vi,mi,js)),Ni=0;Ni<vs;Ni++)us.push({id:mi.changedTouches[Ni].identifier,type:"touch",currentPos:tt(mi.changedTouches[Ni]),currentTime:Fi});for(ma(vi,mi,us),Ni=0;Ni<Z.length;Ni++)if(Z[Ni]!==vi&&Z[Ni].isTracking()&&ci(Z[Ni].element,vi.element)){for(as=[],is=0;is<vs;is++)as.push({id:mi.changedTouches[is].identifier,type:"touch",currentPos:tt(mi.changedTouches[is]),currentTime:Fi});ma(Z[Ni],mi,as)}za(vi,mi,us,0)&&(ie.stopEvent(mi),Qe(vi,"touch",vs)),ie.cancelEvent(mi)}function Vi(vi,mi){Wi(vi,mi)}function Kr(vi,mi){Wi(vi,mi),ie.stopEvent(mi)}function Wi(vi,mi){var Fi,Ni,is,vs=mi.changedTouches.length,us=[],as;for(Fi=ie.now(),Ni=0;Ni<vs;Ni++)us.push({id:mi.changedTouches[Ni].identifier,type:"touch",currentPos:tt(mi.changedTouches[Ni]),currentTime:Fi});for(Io(vi,mi,us,0)&&Xe(vi,"touch",vs),ha(vi,mi,us),Ni=0;Ni<Z.length;Ni++)if(Z[Ni]!==vi&&Z[Ni].isTracking()&&ci(Z[Ni].element,vi.element)){for(as=[],is=0;is<vs;is++)as.push({id:mi.changedTouches[is].identifier,type:"touch",currentPos:tt(mi.changedTouches[is]),currentTime:Fi});ha(Z[Ni],mi,as)}ie.cancelEvent(mi)}function Zr(vi,mi){Is(vi,mi)}function ps(vi,mi){Is(vi,mi),ie.stopEvent(mi)}function Is(vi,mi){var Fi,Ni=mi.changedTouches.length,is=[];for(Fi=0;Fi<Ni;Fi++)is.push({id:mi.changedTouches[Fi].identifier,type:"touch",currentPos:tt(mi.changedTouches[Fi]),currentTime:ie.now()});wo(vi,mi,is),ie.cancelEvent(mi)}function _s(vi,mi){var Fi=vi.getActivePointersListByType("touch");Yr(vi,mi,Fi)}function ws(vi,mi){return mi.stopPropagation(),mi.preventDefault(),!1}function hi(vi,mi){return mi.stopPropagation(),mi.preventDefault(),!1}function Bi(vi,mi){var Fi;mi.currentTarget===mi.relatedTarget||ci(mi.currentTarget,mi.relatedTarget)||(Fi={id:mi.pointerId,type:Je(mi),isPrimary:mi.isPrimary,currentPos:tt(mi),currentTime:ie.now()},ma(vi,mi,[Fi]))}function qi(vi,mi){var Fi;mi.currentTarget===mi.relatedTarget||ci(mi.currentTarget,mi.relatedTarget)||(Fi={id:mi.pointerId,type:Je(mi),isPrimary:mi.isPrimary,currentPos:tt(mi),currentTime:ie.now()},ha(vi,mi,[Fi]))}function Xr(vi,mi){var Fi;Fi={id:mi.pointerId,type:Je(mi),isPrimary:mi.isPrimary,currentPos:tt(mi),currentTime:ie.now()},za(vi,mi,[Fi],mi.button)&&(ie.stopEvent(mi),Qe(vi,Fi.type)),(vi.clickHandler||vi.dblClickHandler||vi.pressHandler||vi.dragHandler||vi.dragEndHandler||vi.pinchHandler)&&ie.cancelEvent(mi)}function rs(vi,mi){gs(vi,mi)}function Os(vi,mi){var Fi=vi.getActivePointersListByType(Je(mi));Fi.getById(mi.pointerId)&&gs(vi,mi),ie.stopEvent(mi)}function gs(vi,mi){var Fi;Fi={id:mi.pointerId,type:Je(mi),isPrimary:mi.isPrimary,currentPos:tt(mi),currentTime:ie.now()},Io(vi,mi,[Fi],mi.button)&&Xe(vi,Fi.type)}function zs(vi,mi){Us(vi,mi)}function $s(vi,mi){var Fi=vi.getActivePointersListByType(Je(mi));Fi.getById(mi.pointerId)&&Us(vi,mi),ie.stopEvent(mi)}function Us(vi,mi){var Fi;Fi={id:mi.pointerId,type:Je(mi),isPrimary:mi.isPrimary,currentPos:tt(mi),currentTime:ie.now()},wo(vi,mi,[Fi])}function xs(vi,mi){var Fi;Fi={id:mi.pointerId,type:Je(mi)},hs(vi,mi,[Fi])}function sa(vi,mi){return Object.prototype.hasOwnProperty.call(mi,"isPrimary")||(vi.getLength()===0?mi.isPrimary=!0:mi.isPrimary=!1),mi.speed=0,mi.direction=0,mi.contactPos=mi.currentPos,mi.contactTime=mi.currentTime,mi.lastPos=mi.currentPos,mi.lastTime=mi.currentTime,vi.add(mi)}function Gs(vi,mi){var Fi,Ni;return vi.getById(mi.id)?(Fi=vi.removeById(mi.id),Object.prototype.hasOwnProperty.call(mi,"isPrimary")||(Ni=vi.getPrimary(),Ni||(Ni=vi.getByIndex(0),Ni&&(Ni.isPrimary=!0)))):Fi=vi.getLength(),Fi}function ma(vi,mi,Fi){var Ni=vi.getActivePointersListByType(Fi[0].type),is,vs=Fi.length,us,as,js;for(is=0;is<vs;is++)us=Fi[is],as=Ni.getById(us.id),as?(as.insideElement=!0,as.lastPos=as.currentPos,as.lastTime=as.currentTime,as.currentPos=us.currentPos,as.currentTime=us.currentTime,us=as):(us.captured=!1,us.insideElementPressed=!1,us.insideElement=!0,sa(Ni,us)),vi.enterHandler&&(js=vi.enterHandler({eventSource:vi,pointerType:us.type,position:st(us.currentPos,vi.element),buttons:Ni.buttons,pointers:vi.getActivePointerCount(),insideElementPressed:us.insideElementPressed,buttonDownAny:Ni.buttons!==0,isTouchEvent:us.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),js===!1&&ie.cancelEvent(mi))}function ha(vi,mi,Fi){var Ni=vi.getActivePointersListByType(Fi[0].type),is,vs=Fi.length,us,as,js;for(is=0;is<vs;is++)us=Fi[is],as=Ni.getById(us.id),as&&(as.captured?(as.insideElement=!1,as.lastPos=as.currentPos,as.lastTime=as.currentTime,as.currentPos=us.currentPos,as.currentTime=us.currentTime):Gs(Ni,as),us=as),vi.exitHandler&&(js=vi.exitHandler({eventSource:vi,pointerType:us.type,position:us.currentPos&&st(us.currentPos,vi.element),buttons:Ni.buttons,pointers:vi.getActivePointerCount(),insideElementPressed:as?as.insideElementPressed:!1,buttonDownAny:Ni.buttons!==0,isTouchEvent:us.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),js===!1&&ie.cancelEvent(mi))}function za(vi,mi,Fi,Ni){var is=ee[vi.hash],vs,us=vi.getActivePointersListByType(Fi[0].type),as,js=Fi.length,ea,Vs;typeof mi.buttons<"u"?us.buttons=mi.buttons:ie.Browser.vendor===ie.BROWSERS.IE&&ie.Browser.version<9?Ni===0?us.buttons+=1:Ni===1?us.buttons+=4:Ni===2?us.buttons+=2:Ni===3?us.buttons+=8:Ni===4?us.buttons+=16:Ni===5&&(us.buttons+=32):Ni===0?us.buttons|=1:Ni===1?us.buttons|=4:Ni===2?us.buttons|=2:Ni===3?us.buttons|=8:Ni===4?us.buttons|=16:Ni===5&&(us.buttons|=32);var ya=vi.getActivePointersListsExceptType(Fi[0].type);for(as=0;as<ya.length;as++)Yr(vi,mi,ya[as]);if(Ni!==0)return vi.nonPrimaryPressHandler&&(vs=vi.nonPrimaryPressHandler({eventSource:vi,pointerType:Fi[0].type,position:st(Fi[0].currentPos,vi.element),button:Ni,buttons:us.buttons,isTouchEvent:Fi[0].type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),vs===!1&&ie.cancelEvent(mi)),!1;for(as=0;as<js;as++)ea=Fi[as],Vs=us.getById(ea.id),Vs?(Vs.captured=!0,Vs.insideElementPressed=!0,Vs.insideElement=!0,Vs.contactPos=ea.currentPos,Vs.contactTime=ea.currentTime,Vs.lastPos=Vs.currentPos,Vs.lastTime=Vs.currentTime,Vs.currentPos=ea.currentPos,Vs.currentTime=ea.currentTime,ea=Vs):(ea.captured=!0,ea.insideElementPressed=!0,ea.insideElement=!0,sa(us,ea)),us.addContact(),(vi.dragHandler||vi.dragEndHandler||vi.pinchHandler)&&ie.MouseTracker.gesturePointVelocityTracker.addPoint(vi,ea),us.contacts===1?vi.pressHandler&&(vs=vi.pressHandler({eventSource:vi,pointerType:ea.type,position:st(ea.contactPos,vi.element),buttons:us.buttons,isTouchEvent:ea.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),vs===!1&&ie.cancelEvent(mi)):us.contacts===2&&vi.pinchHandler&&ea.type==="touch"&&(is.pinchGPoints=us.asArray(),is.lastPinchDist=is.currentPinchDist=is.pinchGPoints[0].currentPos.distanceTo(is.pinchGPoints[1].currentPos),is.lastPinchCenter=is.currentPinchCenter=lt(is.pinchGPoints[0].currentPos,is.pinchGPoints[1].currentPos));return!0}function Io(vi,mi,Fi,Ni){var is=ee[vi.hash],vs=vi.getActivePointersListByType(Fi[0].type),us,as,js,ea,Vs=Fi.length,ya,Ns,fo=!1,ja=!1,xo;if(typeof mi.buttons<"u"?vs.buttons=mi.buttons:ie.Browser.vendor===ie.BROWSERS.IE&&ie.Browser.version<9?Ni===0?vs.buttons-=1:Ni===1?vs.buttons-=4:Ni===2?vs.buttons-=2:Ni===3?vs.buttons-=8:Ni===4?vs.buttons-=16:Ni===5&&(vs.buttons-=32):Ni===0?vs.buttons^=-2:Ni===1?vs.buttons^=-5:Ni===2?vs.buttons^=-3:Ni===3?vs.buttons^=-9:Ni===4?vs.buttons^=-17:Ni===5&&(vs.buttons^=-33),Ni!==0){vi.nonPrimaryReleaseHandler&&(us=vi.nonPrimaryReleaseHandler({eventSource:vi,pointerType:Fi[0].type,position:st(Fi[0].currentPos,vi.element),button:Ni,buttons:vs.buttons,isTouchEvent:Fi[0].type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),us===!1&&ie.cancelEvent(mi));var ll=vi.getActivePointersListByType("mouse");return Yr(vi,mi,ll),!1}if(typeof Fi[0].currentPos>"u")return Yr(vi,mi,vs),!1;for(ea=0;ea<Vs;ea++)ya=Fi[ea],Ns=vs.getById(ya.id),Ns&&(Ns.captured&&(Ns.captured=!1,fo=!0,ja=!0),Ns.lastPos=Ns.currentPos,Ns.lastTime=Ns.currentTime,Ns.currentPos=ya.currentPos,Ns.currentTime=ya.currentTime,Ns.insideElement||Gs(vs,Ns),as=Ns.currentPos,js=Ns.currentTime,ja?(vs.removeContact(),(vi.dragHandler||vi.dragEndHandler||vi.pinchHandler)&&ie.MouseTracker.gesturePointVelocityTracker.removePoint(vi,Ns),vs.contacts===0?(vi.releaseHandler&&(us=vi.releaseHandler({eventSource:vi,pointerType:Ns.type,position:st(as,vi.element),buttons:vs.buttons,insideElementPressed:Ns.insideElementPressed,insideElementReleased:Ns.insideElement,isTouchEvent:Ns.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),us===!1&&ie.cancelEvent(mi)),vi.dragEndHandler&&!Ns.currentPos.equals(Ns.contactPos)&&(us=vi.dragEndHandler({eventSource:vi,pointerType:Ns.type,position:st(Ns.currentPos,vi.element),speed:Ns.speed,direction:Ns.direction,shift:mi.shiftKey,isTouchEvent:Ns.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),us===!1&&ie.cancelEvent(mi)),(vi.clickHandler||vi.dblClickHandler)&&Ns.insideElement&&(xo=js-Ns.contactTime<=vi.clickTimeThreshold&&Ns.contactPos.distanceTo(as)<=vi.clickDistThreshold,vi.clickHandler&&(us=vi.clickHandler({eventSource:vi,pointerType:Ns.type,position:st(Ns.currentPos,vi.element),quick:xo,shift:mi.shiftKey,isTouchEvent:Ns.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),us===!1&&ie.cancelEvent(mi)),vi.dblClickHandler&&xo&&(vs.clicks++,vs.clicks===1?(is.lastClickPos=as,is.dblClickTimeOut=setTimeout(function(){vs.clicks=0},vi.dblClickTimeThreshold)):vs.clicks===2&&(clearTimeout(is.dblClickTimeOut),vs.clicks=0,is.lastClickPos.distanceTo(as)<=vi.dblClickDistThreshold&&(us=vi.dblClickHandler({eventSource:vi,pointerType:Ns.type,position:st(Ns.currentPos,vi.element),shift:mi.shiftKey,isTouchEvent:Ns.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),us===!1&&ie.cancelEvent(mi)),is.lastClickPos=null)))):vs.contacts===2&&vi.pinchHandler&&Ns.type==="touch"&&(is.pinchGPoints=vs.asArray(),is.lastPinchDist=is.currentPinchDist=is.pinchGPoints[0].currentPos.distanceTo(is.pinchGPoints[1].currentPos),is.lastPinchCenter=is.currentPinchCenter=lt(is.pinchGPoints[0].currentPos,is.pinchGPoints[1].currentPos))):vi.releaseHandler&&(us=vi.releaseHandler({eventSource:vi,pointerType:Ns.type,position:st(as,vi.element),buttons:vs.buttons,insideElementPressed:Ns.insideElementPressed,insideElementReleased:Ns.insideElement,isTouchEvent:Ns.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),us===!1&&ie.cancelEvent(mi)));return fo}function wo(vi,mi,Fi){var Ni=ee[vi.hash],is=vi.getActivePointersListByType(Fi[0].type),vs,us=Fi.length,as,js,ea,Vs,ya;for(typeof mi.buttons<"u"&&(is.buttons=mi.buttons),vs=0;vs<us;vs++)as=Fi[vs],js=is.getById(as.id),js?(Object.prototype.hasOwnProperty.call(as,"isPrimary")&&(js.isPrimary=as.isPrimary),js.lastPos=js.currentPos,js.lastTime=js.currentTime,js.currentPos=as.currentPos,js.currentTime=as.currentTime):(as.captured=!1,as.insideElementPressed=!1,as.insideElement=!0,sa(is,as));vi.stopHandler&&Fi[0].type==="mouse"&&(clearTimeout(vi.stopTimeOut),vi.stopTimeOut=setTimeout(function(){Fs(vi,mi,Fi[0].type)},vi.stopDelay)),is.contacts===0?vi.moveHandler&&(ya=vi.moveHandler({eventSource:vi,pointerType:Fi[0].type,position:st(Fi[0].currentPos,vi.element),buttons:is.buttons,isTouchEvent:Fi[0].type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),ya===!1&&ie.cancelEvent(mi)):is.contacts===1?(vi.moveHandler&&(js=is.asArray()[0],ya=vi.moveHandler({eventSource:vi,pointerType:js.type,position:st(js.currentPos,vi.element),buttons:is.buttons,isTouchEvent:js.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),ya===!1&&ie.cancelEvent(mi)),vi.dragHandler&&(js=is.asArray()[0],Vs=js.currentPos.minus(js.lastPos),ya=vi.dragHandler({eventSource:vi,pointerType:js.type,position:st(js.currentPos,vi.element),buttons:is.buttons,delta:Vs,speed:js.speed,direction:js.direction,shift:mi.shiftKey,isTouchEvent:js.type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),ya===!1&&ie.cancelEvent(mi))):is.contacts===2&&(vi.moveHandler&&(ea=is.asArray(),ya=vi.moveHandler({eventSource:vi,pointerType:ea[0].type,position:st(lt(ea[0].currentPos,ea[1].currentPos),vi.element),buttons:is.buttons,isTouchEvent:ea[0].type==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),ya===!1&&ie.cancelEvent(mi)),vi.pinchHandler&&Fi[0].type==="touch"&&(Vs=Ni.pinchGPoints[0].currentPos.distanceTo(Ni.pinchGPoints[1].currentPos),Vs!=Ni.currentPinchDist&&(Ni.lastPinchDist=Ni.currentPinchDist,Ni.currentPinchDist=Vs,Ni.lastPinchCenter=Ni.currentPinchCenter,Ni.currentPinchCenter=lt(Ni.pinchGPoints[0].currentPos,Ni.pinchGPoints[1].currentPos),ya=vi.pinchHandler({eventSource:vi,pointerType:"touch",gesturePoints:Ni.pinchGPoints,lastCenter:st(Ni.lastPinchCenter,vi.element),center:st(Ni.currentPinchCenter,vi.element),lastDistance:Ni.lastPinchDist,distance:Ni.currentPinchDist,shift:mi.shiftKey,originalEvent:mi,preventDefaultAction:!1,userData:vi.userData}),ya===!1&&ie.cancelEvent(mi))))}function hs(vi,mi,Fi){Io(vi,mi,Fi,0),ha(vi,mi,Fi)}function Fs(vi,mi,Fi){vi.stopHandler&&vi.stopHandler({eventSource:vi,pointerType:Fi,position:it(mi,vi.element),buttons:vi.getActivePointersListByType(Fi).buttons,isTouchEvent:Fi==="touch",originalEvent:mi,preventDefaultAction:!1,userData:vi.userData})}var ca=function(){try{return window.self!==window.top}catch{return!0}}();function Ta(vi){try{return vi.addEventListener&&vi.removeEventListener}catch{return!1}}}(OpenSeadragon),function(ie){ie.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},ie.Control=function(Z,ee,ae){var ye=Z.parentNode;typeof ee=="number"&&(ie.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),ee={anchor:ee}),ee.attachToViewer=typeof ee.attachToViewer>"u"?!0:ee.attachToViewer,this.autoFade=typeof ee.autoFade>"u"?!0:ee.autoFade,this.element=Z,this.anchor=ee.anchor,this.container=ae,this.anchor==ie.ControlAnchor.ABSOLUTE?(this.wrapper=ie.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof ee.top=="number"?ee.top+"px":ee.top,this.wrapper.style.left=typeof ee.left=="number"?ee.left+"px":ee.left,this.wrapper.style.height=typeof ee.height=="number"?ee.height+"px":ee.height,this.wrapper.style.width=typeof ee.width=="number"?ee.width+"px":ee.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=ie.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==ie.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),ee.attachToViewer?this.anchor==ie.ControlAnchor.TOP_RIGHT||this.anchor==ie.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):ye.appendChild(this.wrapper)},ie.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(Z){this.wrapper.style.display=Z?this.anchor==ie.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(Z){this.element[ie.SIGNAL]&&ie.Browser.vendor==ie.BROWSERS.IE?ie.setElementOpacity(this.element,Z,!0):ie.setElementOpacity(this.wrapper,Z,!0)}}}(OpenSeadragon),function(ie){ie.ControlDock=function(ee){var ae=["topleft","topright","bottomright","bottomleft"],ye,ve;for(ie.extend(!0,this,{id:"controldock-"+ie.now()+"-"+Math.floor(Math.random()*1e6),container:ie.makeNeutralElement("div"),controls:[]},ee),this.container.onsubmit=function(){return!1},this.element&&(this.element=ie.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),ve=0;ve<ae.length;ve++)ye=ae[ve],this.controls[ye]=ie.makeNeutralElement("div"),this.controls[ye].style.position="absolute",ye.match("left")&&(this.controls[ye].style.left="0px"),ye.match("right")&&(this.controls[ye].style.right="0px"),ye.match("top")&&(this.controls[ye].style.top="0px"),ye.match("bottom")&&(this.controls[ye].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},ie.ControlDock.prototype={addControl:function(ee,ae){ee=ie.getElement(ee);var ye=null;if(!(Z(this,ee)>=0)){switch(ae.anchor){case ie.ControlAnchor.TOP_RIGHT:ye=this.controls.topright,ee.style.position="relative",ee.style.paddingRight="0px",ee.style.paddingTop="0px";break;case ie.ControlAnchor.BOTTOM_RIGHT:ye=this.controls.bottomright,ee.style.position="relative",ee.style.paddingRight="0px",ee.style.paddingBottom="0px";break;case ie.ControlAnchor.BOTTOM_LEFT:ye=this.controls.bottomleft,ee.style.position="relative",ee.style.paddingLeft="0px",ee.style.paddingBottom="0px";break;case ie.ControlAnchor.TOP_LEFT:ye=this.controls.topleft,ee.style.position="relative",ee.style.paddingLeft="0px",ee.style.paddingTop="0px";break;case ie.ControlAnchor.ABSOLUTE:ye=this.container,ee.style.margin="0px",ee.style.padding="0px";break;default:case ie.ControlAnchor.NONE:ye=this.container,ee.style.margin="0px",ee.style.padding="0px";break}this.controls.push(new ie.Control(ee,ae,ye)),ee.style.display="inline-block"}},removeControl:function(ee){ee=ie.getElement(ee);var ae=Z(this,ee);return ae>=0&&(this.controls[ae].destroy(),this.controls.splice(ae,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var ee;for(ee=this.controls.length-1;ee>=0;ee--)if(this.controls[ee].isVisible())return!0;return!1},setControlsEnabled:function(ee){var ae;for(ae=this.controls.length-1;ae>=0;ae--)this.controls[ae].setVisible(ee);return this}};function Z(ee,ae){var ye=ee.controls,ve;for(ve=ye.length-1;ve>=0;ve--)if(ye[ve].element==ae)return ve;return-1}}(OpenSeadragon),function(ie){ie.Placement=ie.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(ie){var Z={},ee=1;ie.Viewer=function(hi){var Bi=arguments,qi=this,Xr;if(ie.isPlainObject(hi)||(hi={id:Bi[0],xmlPath:Bi.length>1?Bi[1]:void 0,prefixUrl:Bi.length>2?Bi[2]:void 0,controls:Bi.length>3?Bi[3]:void 0,overlays:Bi.length>4?Bi[4]:void 0}),hi.config&&(ie.extend(!0,hi,hi.config),delete hi.config),ie.extend(!0,this,{id:hi.id,hash:hi.hash||ee++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},ie.DEFAULT_SETTINGS,hi),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof Z[this.hash]<"u"&&ie.console.warn("Hash "+this.hash+" has already been used."),Z[this.hash]={fsBoundsDelta:new ie.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=ie.now(),ie.EventSource.call(this),this.addHandler("open-failed",function(rs){var Os=ie.getString("Errors.OpenFailed",rs.eventSource,rs.message);qi._showMessage(Os)}),ie.ControlDock.call(this,hi),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=ie.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(rs){rs.width="100%",rs.height="100%",rs.overflow="hidden",rs.position="absolute",rs.top="0px",rs.left="0px"}(this.canvas.style),ie.setElementTouchActionNone(this.canvas),hi.tabIndex!==""&&(this.canvas.tabIndex=hi.tabIndex===void 0?0:hi.tabIndex),this.container.className="openseadragon-container",function(rs){rs.width="100%",rs.height="100%",rs.position="relative",rs.overflow="hidden",rs.left="0px",rs.top="0px",rs.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new ie.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:ie.delegate(this,ct),keyHandler:ie.delegate(this,gt),clickHandler:ie.delegate(this,ut),dblClickHandler:ie.delegate(this,mt),dragHandler:ie.delegate(this,ei),dragEndHandler:ie.delegate(this,ni),enterHandler:ie.delegate(this,ri),exitHandler:ie.delegate(this,si),pressHandler:ie.delegate(this,li),releaseHandler:ie.delegate(this,ai),nonPrimaryPressHandler:ie.delegate(this,ci),nonPrimaryReleaseHandler:ie.delegate(this,Ci),scrollHandler:ie.delegate(this,gi),pinchHandler:ie.delegate(this,pi)}),this.outerTracker=new ie.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:ie.delegate(this,_i),exitHandler:ie.delegate(this,bi)}),this.toolbar&&(this.toolbar=new ie.ControlDock({element:this.toolbar})),this.bindStandardControls(),Z[this.hash].prevContainerSize=ae(this.container),this.world=new ie.World({viewer:this}),this.world.addHandler("add-item",function(rs){qi.source=qi.world.getItemAt(0).source,Z[qi.hash].forceRedraw=!0,qi._updateRequestId||(qi._updateRequestId=Qe(qi,Mi))}),this.world.addHandler("remove-item",function(rs){qi.world.getItemCount()?qi.source=qi.world.getItemAt(0).source:qi.source=null,Z[qi.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(rs){qi.viewport&&qi.viewport._setContentBounds(qi.world.getHomeBounds(),qi.world.getContentFactor())}),this.world.addHandler("item-index-change",function(rs){qi.source=qi.world.getItemAt(0).source}),this.viewport=new ie.Viewport({containerSize:Z[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new ie.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:hi.timeout}),this.tileCache=new ie.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new ie.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=ie.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(Xr=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(Xr,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(Xr=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(Xr,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new ie.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),Xr=0;Xr<this.customControls.length;Xr++)this.addControl(this.customControls[Xr].id,{anchor:this.customControls[Xr].anchor});ie.requestAnimationFrame(function(){Je(qi)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},ie.extend(ie.Viewer.prototype,ie.EventSource.prototype,ie.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(hi){return ie.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(hi)},openTileSource:function(hi){return ie.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(hi)},open:function(hi,Bi){var qi=this;if(this.close(),!!hi){if(this.sequenceMode&&ie.isArray(hi)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof Bi<"u"&&!isNaN(Bi)&&(this.initialPage=Bi),this.tileSources=hi,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(ie.isArray(hi)||(hi=[hi]),!!hi.length){this._opening=!0;for(var Xr=hi.length,rs=0,Os=0,gs,zs=function(){if(rs+Os===Xr)if(rs){(qi._firstOpen||!qi.preserveViewport)&&(qi.viewport.goHome(!0),qi.viewport.update()),qi._firstOpen=!1;var xs=hi[0];if(xs.tileSource&&(xs=xs.tileSource),qi.overlays&&!qi.preserveOverlays)for(var sa=0;sa<qi.overlays.length;sa++)qi.currentOverlays[sa]=ve(qi,qi.overlays[sa]);qi._drawOverlays(),qi._opening=!1,qi.raiseEvent("open",{source:xs})}else qi._opening=!1,qi.raiseEvent("open-failed",gs)},$s=function(xs){(!ie.isPlainObject(xs)||!xs.tileSource)&&(xs={tileSource:xs}),xs.index!==void 0&&(ie.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete xs.index),xs.collectionImmediately===void 0&&(xs.collectionImmediately=!0);var sa=xs.success;xs.success=function(ma){if(rs++,xs.tileSource.overlays)for(var ha=0;ha<xs.tileSource.overlays.length;ha++)qi.addOverlay(xs.tileSource.overlays[ha]);sa&&sa(ma),zs()};var Gs=xs.error;xs.error=function(ma){Os++,gs||(gs=ma),Gs&&Gs(ma),zs()},qi.addTiledImage(xs)},Us=0;Us<hi.length;Us++)$s(hi[Us]);return this}}},close:function(){return Z[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),Z[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(Z[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(ie.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),Z[this.hash]=null,delete Z[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(hi){return this.innerTracker.setTracking(hi),this.outerTracker.setTracking(hi),this.raiseEvent("mouse-enabled",{enabled:hi}),this},areControlsEnabled:function(){var hi=this.controls.length,Bi;for(Bi=0;Bi<this.controls.length;Bi++)hi=hi&&this.controls[Bi].isVisible();return hi},setControlsEnabled:function(hi){return hi?it(this):Je(this),this.raiseEvent("controls-enabled",{enabled:hi}),this},setDebugMode:function(hi){for(var Bi=0;Bi<this.world.getItemCount();Bi++)this.world.getItemAt(Bi).debugMode=hi;this.debugMode=hi,this.forceRedraw()},isFullPage:function(){return Z[this.hash].fullPage},setFullPage:function(hi){var Bi=document.body,qi=Bi.style,Xr=document.documentElement.style,rs=this,Os,gs;if(hi==this.isFullPage())return this;var zs={fullPage:hi,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",zs),zs.preventDefaultAction)return this;if(hi){for(this.elementSize=ie.getElementSize(this.element),this.pageScroll=ie.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=qi.margin,this.docMargin=Xr.margin,qi.margin="0",Xr.margin="0",this.bodyPadding=qi.padding,this.docPadding=Xr.padding,qi.padding="0",Xr.padding="0",this.bodyWidth=qi.width,this.docWidth=Xr.width,qi.width="100%",Xr.width="100%",this.bodyHeight=qi.height,this.docHeight=Xr.height,qi.height="100%",Xr.height="100%",this.previousBody=[],Z[this.hash].prevElementParent=this.element.parentNode,Z[this.hash].prevNextSibling=this.element.nextSibling,Z[this.hash].prevElementWidth=this.element.style.width,Z[this.hash].prevElementHeight=this.element.style.height,Os=Bi.childNodes.length,gs=0;gs<Os;gs++)this.previousBody.push(Bi.childNodes[0]),Bi.removeChild(Bi.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,Bi.appendChild(this.toolbar.element),ie.addClass(this.toolbar.element,"fullpage")),ie.addClass(this.element,"fullpage"),Bi.appendChild(this.element),this.element.style.height=ie.getWindowSize().y+"px",this.element.style.width=ie.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=ie.getElementSize(this.element).y-ie.getElementSize(this.toolbar.element).y+"px"),Z[this.hash].fullPage=!0,ie.delegate(this,_i)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,qi.margin=this.bodyMargin,Xr.margin=this.docMargin,qi.padding=this.bodyPadding,Xr.padding=this.docPadding,qi.width=this.bodyWidth,Xr.width=this.docWidth,qi.height=this.bodyHeight,Xr.height=this.docHeight,Bi.removeChild(this.element),Os=this.previousBody.length,gs=0;gs<Os;gs++)Bi.appendChild(this.previousBody.shift());ie.removeClass(this.element,"fullpage"),Z[this.hash].prevElementParent.insertBefore(this.element,Z[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(Bi.removeChild(this.toolbar.element),ie.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=Z[this.hash].prevElementWidth,this.element.style.height=Z[this.hash].prevElementHeight;var $s=0,Us=function(){ie.setPageScroll(rs.pageScroll);var xs=ie.getPageScroll();$s++,$s<10&&(xs.x!==rs.pageScroll.x||xs.y!==rs.pageScroll.y)&&ie.requestAnimationFrame(Us)};ie.requestAnimationFrame(Us),Z[this.hash].fullPage=!1,ie.delegate(this,bi)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:hi}),this},setFullScreen:function(hi){var Bi=this;if(!ie.supportsFullScreen)return this.setFullPage(hi);if(ie.isFullScreen()===hi)return this;var qi={fullScreen:hi,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",qi),qi.preventDefaultAction)return this;if(hi){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var Xr=function(){var rs=ie.isFullScreen();rs||(ie.removeEvent(document,ie.fullScreenEventName,Xr),ie.removeEvent(document,ie.fullScreenErrorEventName,Xr),Bi.setFullPage(!1),Bi.isFullPage()&&(Bi.element.style.width=Bi.fullPageStyleWidth,Bi.element.style.height=Bi.fullPageStyleHeight)),Bi.navigator&&Bi.viewport&&setTimeout(function(){Bi.navigator.update(Bi.viewport)}),Bi.raiseEvent("full-screen",{fullScreen:rs})};ie.addEvent(document,ie.fullScreenEventName,Xr),ie.addEvent(document,ie.fullScreenErrorEventName,Xr),ie.requestFullScreen(document.body)}else ie.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(hi){return this.container.style.visibility=hi?"":"hidden",this.raiseEvent("visible",{visible:hi}),this},addTiledImage:function(hi){ie.console.assert(hi,"[Viewer.addTiledImage] options is required"),ie.console.assert(hi.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),ie.console.assert(!hi.replace||hi.index>-1&&hi.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var Bi=this;hi.replace&&(hi.replaceItem=Bi.world.getItemAt(hi.index)),this._hideMessage(),hi.placeholderFillStyle===void 0&&(hi.placeholderFillStyle=this.placeholderFillStyle),hi.opacity===void 0&&(hi.opacity=this.opacity),hi.preload===void 0&&(hi.preload=this.preload),hi.compositeOperation===void 0&&(hi.compositeOperation=this.compositeOperation),hi.crossOriginPolicy===void 0&&(hi.crossOriginPolicy=hi.tileSource.crossOriginPolicy!==void 0?hi.tileSource.crossOriginPolicy:this.crossOriginPolicy),hi.ajaxWithCredentials===void 0&&(hi.ajaxWithCredentials=this.ajaxWithCredentials),hi.loadTilesWithAjax===void 0&&(hi.loadTilesWithAjax=this.loadTilesWithAjax),hi.ajaxHeaders===void 0||hi.ajaxHeaders===null?hi.ajaxHeaders=this.ajaxHeaders:ie.isPlainObject(hi.ajaxHeaders)&&ie.isPlainObject(this.ajaxHeaders)&&(hi.ajaxHeaders=ie.extend({},this.ajaxHeaders,hi.ajaxHeaders));var qi={options:hi};function Xr(gs){for(var zs=0;zs<Bi._loadQueue.length;zs++)if(Bi._loadQueue[zs]===qi){Bi._loadQueue.splice(zs,1);break}Bi._loadQueue.length===0&&rs(qi),Bi.raiseEvent("add-item-failed",gs),hi.error&&hi.error(gs)}function rs(gs){Bi.collectionMode&&(Bi.world.arrange({immediately:gs.options.collectionImmediately,rows:Bi.collectionRows,columns:Bi.collectionColumns,layout:Bi.collectionLayout,tileSize:Bi.collectionTileSize,tileMargin:Bi.collectionTileMargin}),Bi.world.setAutoRefigureSizes(!0))}if(ie.isArray(hi.tileSource)){setTimeout(function(){Xr({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:hi.tileSource,options:hi})});return}this._loadQueue.push(qi);function Os(){for(var gs,zs,$s;Bi._loadQueue.length&&(gs=Bi._loadQueue[0],!!gs.tileSource);){if(Bi._loadQueue.splice(0,1),gs.options.replace){var Us=Bi.world.getIndexOfItem(gs.options.replaceItem);Us!=-1&&(gs.options.index=Us),Bi.world.removeItem(gs.options.replaceItem)}zs=new ie.TiledImage({viewer:Bi,source:gs.tileSource,viewport:Bi.viewport,drawer:Bi.drawer,tileCache:Bi.tileCache,imageLoader:Bi.imageLoader,x:gs.options.x,y:gs.options.y,width:gs.options.width,height:gs.options.height,fitBounds:gs.options.fitBounds,fitBoundsPlacement:gs.options.fitBoundsPlacement,clip:gs.options.clip,placeholderFillStyle:gs.options.placeholderFillStyle,opacity:gs.options.opacity,preload:gs.options.preload,degrees:gs.options.degrees,compositeOperation:gs.options.compositeOperation,springStiffness:Bi.springStiffness,animationTime:Bi.animationTime,minZoomImageRatio:Bi.minZoomImageRatio,wrapHorizontal:Bi.wrapHorizontal,wrapVertical:Bi.wrapVertical,immediateRender:Bi.immediateRender,blendTime:Bi.blendTime,alwaysBlend:Bi.alwaysBlend,minPixelRatio:Bi.minPixelRatio,smoothTileEdgesMinZoom:Bi.smoothTileEdgesMinZoom,iOSDevice:Bi.iOSDevice,crossOriginPolicy:gs.options.crossOriginPolicy,ajaxWithCredentials:gs.options.ajaxWithCredentials,loadTilesWithAjax:gs.options.loadTilesWithAjax,ajaxHeaders:gs.options.ajaxHeaders,debugMode:Bi.debugMode}),Bi.collectionMode&&Bi.world.setAutoRefigureSizes(!1),Bi.world.addItem(zs,{index:gs.options.index}),Bi._loadQueue.length===0&&rs(gs),Bi.world.getItemCount()===1&&!Bi.preserveViewport&&Bi.viewport.goHome(!0),Bi.navigator&&($s=ie.extend({},gs.options,{replace:!1,originalTiledImage:zs,tileSource:gs.tileSource}),Bi.navigator.addTiledImage($s)),gs.options.success&&gs.options.success({item:zs})}}ye(this,hi.tileSource,hi,function(gs){qi.tileSource=gs,Os()},function(gs){gs.options=hi,Xr(gs),Os()})},addSimpleImage:function(hi){ie.console.assert(hi,"[Viewer.addSimpleImage] options is required"),ie.console.assert(hi.url,"[Viewer.addSimpleImage] options.url is required");var Bi=ie.extend({},hi,{tileSource:{type:"image",url:hi.url}});delete Bi.url,this.addTiledImage(Bi)},addLayer:function(hi){var Bi=this;ie.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var qi=ie.extend({},hi,{success:function(Xr){Bi.raiseEvent("add-layer",{options:hi,drawer:Xr.item})},error:function(Xr){Bi.raiseEvent("add-layer-failed",Xr)}});return this.addTiledImage(qi),this},getLayerAtLevel:function(hi){return ie.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(hi)},getLevelOfLayer:function(hi){return ie.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(hi)},getLayersCount:function(){return ie.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(hi,Bi){return ie.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(hi,Bi)},removeLayer:function(hi){return ie.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(hi)},forceRedraw:function(){return Z[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var hi=ie.delegate(this,st),Bi=ie.delegate(this,lt),qi=ie.delegate(this,ws),Xr=ie.delegate(this,_s),rs=this.navImages,Os=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(Os=!1),this.previousButton=new ie.Button({element:this.previousButton?ie.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.PreviousPage"),srcRest:Ii(this.prefixUrl,rs.previous.REST),srcGroup:Ii(this.prefixUrl,rs.previous.GROUP),srcHover:Ii(this.prefixUrl,rs.previous.HOVER),srcDown:Ii(this.prefixUrl,rs.previous.DOWN),onRelease:Xr,onFocus:hi,onBlur:Bi}),this.nextButton=new ie.Button({element:this.nextButton?ie.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.NextPage"),srcRest:Ii(this.prefixUrl,rs.next.REST),srcGroup:Ii(this.prefixUrl,rs.next.GROUP),srcHover:Ii(this.prefixUrl,rs.next.HOVER),srcDown:Ii(this.prefixUrl,rs.next.DOWN),onRelease:qi,onFocus:hi,onBlur:Bi}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),Os&&(this.paging=new ie.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:ie.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||ie.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var hi=ie.delegate(this,Ri),Bi=ie.delegate(this,xi),qi=ie.delegate(this,Yr),Xr=ie.delegate(this,Pi),rs=ie.delegate(this,Ui),Os=ie.delegate(this,Kr),gs=ie.delegate(this,Wi),zs=ie.delegate(this,Zr),$s=ie.delegate(this,ps),Us=ie.delegate(this,Is),xs=ie.delegate(this,st),sa=ie.delegate(this,lt),Gs=this.navImages,ma=[],ha=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(ha=!1),this.showZoomControl&&(ma.push(this.zoomInButton=new ie.Button({element:this.zoomInButton?ie.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.ZoomIn"),srcRest:Ii(this.prefixUrl,Gs.zoomIn.REST),srcGroup:Ii(this.prefixUrl,Gs.zoomIn.GROUP),srcHover:Ii(this.prefixUrl,Gs.zoomIn.HOVER),srcDown:Ii(this.prefixUrl,Gs.zoomIn.DOWN),onPress:hi,onRelease:Bi,onClick:qi,onEnter:hi,onExit:Bi,onFocus:xs,onBlur:sa})),ma.push(this.zoomOutButton=new ie.Button({element:this.zoomOutButton?ie.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.ZoomOut"),srcRest:Ii(this.prefixUrl,Gs.zoomOut.REST),srcGroup:Ii(this.prefixUrl,Gs.zoomOut.GROUP),srcHover:Ii(this.prefixUrl,Gs.zoomOut.HOVER),srcDown:Ii(this.prefixUrl,Gs.zoomOut.DOWN),onPress:Xr,onRelease:Bi,onClick:rs,onEnter:Xr,onExit:Bi,onFocus:xs,onBlur:sa}))),this.showHomeControl&&ma.push(this.homeButton=new ie.Button({element:this.homeButton?ie.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.Home"),srcRest:Ii(this.prefixUrl,Gs.home.REST),srcGroup:Ii(this.prefixUrl,Gs.home.GROUP),srcHover:Ii(this.prefixUrl,Gs.home.HOVER),srcDown:Ii(this.prefixUrl,Gs.home.DOWN),onRelease:Os,onFocus:xs,onBlur:sa})),this.showFullPageControl&&ma.push(this.fullPageButton=new ie.Button({element:this.fullPageButton?ie.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.FullPage"),srcRest:Ii(this.prefixUrl,Gs.fullpage.REST),srcGroup:Ii(this.prefixUrl,Gs.fullpage.GROUP),srcHover:Ii(this.prefixUrl,Gs.fullpage.HOVER),srcDown:Ii(this.prefixUrl,Gs.fullpage.DOWN),onRelease:gs,onFocus:xs,onBlur:sa})),this.showRotationControl&&(ma.push(this.rotateLeftButton=new ie.Button({element:this.rotateLeftButton?ie.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.RotateLeft"),srcRest:Ii(this.prefixUrl,Gs.rotateleft.REST),srcGroup:Ii(this.prefixUrl,Gs.rotateleft.GROUP),srcHover:Ii(this.prefixUrl,Gs.rotateleft.HOVER),srcDown:Ii(this.prefixUrl,Gs.rotateleft.DOWN),onRelease:zs,onFocus:xs,onBlur:sa})),ma.push(this.rotateRightButton=new ie.Button({element:this.rotateRightButton?ie.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.RotateRight"),srcRest:Ii(this.prefixUrl,Gs.rotateright.REST),srcGroup:Ii(this.prefixUrl,Gs.rotateright.GROUP),srcHover:Ii(this.prefixUrl,Gs.rotateright.HOVER),srcDown:Ii(this.prefixUrl,Gs.rotateright.DOWN),onRelease:$s,onFocus:xs,onBlur:sa}))),this.showFlipControl&&ma.push(this.flipButton=new ie.Button({element:this.flipButton?ie.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:ie.getString("Tooltips.Flip"),srcRest:Ii(this.prefixUrl,Gs.flip.REST),srcGroup:Ii(this.prefixUrl,Gs.flip.GROUP),srcHover:Ii(this.prefixUrl,Gs.flip.HOVER),srcDown:Ii(this.prefixUrl,Gs.flip.DOWN),onRelease:Us,onFocus:xs,onBlur:sa})),ha&&(this.buttons=new ie.ButtonGroup({buttons:ma,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",ie.delegate(this,Vi)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||ie.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||ie.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(hi){return this.tileSources&&hi>=0&&hi<this.tileSources.length&&(this._sequenceIndex=hi,this._updateSequenceButtons(hi),this.open(this.tileSources[hi]),this.referenceStrip&&this.referenceStrip.setFocus(hi),this.raiseEvent("page",{page:hi})),this},addOverlay:function(hi,Bi,qi,Xr){var rs;if(ie.isPlainObject(hi)?rs=hi:rs={element:hi,location:Bi,placement:qi,onDraw:Xr},hi=ie.getElement(rs.element),be(this.currentOverlays,hi)>=0)return this;var Os=ve(this,rs);return this.currentOverlays.push(Os),Os.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:hi,location:rs.location,placement:rs.placement}),this},updateOverlay:function(hi,Bi,qi){var Xr;return hi=ie.getElement(hi),Xr=be(this.currentOverlays,hi),Xr>=0&&(this.currentOverlays[Xr].update(Bi,qi),Z[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:hi,location:Bi,placement:qi})),this},removeOverlay:function(hi){var Bi;return hi=ie.getElement(hi),Bi=be(this.currentOverlays,hi),Bi>=0&&(this.currentOverlays[Bi].destroy(),this.currentOverlays.splice(Bi,1),Z[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:hi})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return Z[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(hi){var Bi;return hi=ie.getElement(hi),Bi=be(this.currentOverlays,hi),Bi>=0?this.currentOverlays[Bi]:null},_updateSequenceButtons:function(hi){this.nextButton&&(!this.tileSources||this.tileSources.length-1===hi?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(hi>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(hi){this._hideMessage();var Bi=ie.makeNeutralElement("div");Bi.appendChild(document.createTextNode(hi)),this.messageDiv=ie.makeCenteredNode(Bi),ie.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var hi=this.messageDiv;hi&&(hi.parentNode.removeChild(hi),delete this.messageDiv)},gestureSettingsByDeviceType:function(hi){switch(hi){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var hi,Bi=this.currentOverlays.length;for(hi=0;hi<Bi;hi++)this.currentOverlays[hi].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new ie.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else ie.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function ae(hi){return hi=ie.getElement(hi),new ie.Point(hi.clientWidth===0?1:hi.clientWidth,hi.clientHeight===0?1:hi.clientHeight)}function ye(hi,Bi,qi,Xr,rs){var Os=hi;if(ie.type(Bi)=="string"){if(Bi.match(/^\s*<.*>\s*$/))Bi=ie.parseXml(Bi);else if(Bi.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var gs=ie.parseJSON(Bi);Bi=gs}catch{}}function zs($s,Us){$s.ready?Xr($s):($s.addHandler("ready",function(){Xr($s)}),$s.addHandler("open-failed",function(xs){rs({message:xs.message,source:Us})}))}setTimeout(function(){if(ie.type(Bi)=="string")Bi=new ie.TileSource({url:Bi,crossOriginPolicy:qi.crossOriginPolicy!==void 0?qi.crossOriginPolicy:hi.crossOriginPolicy,ajaxWithCredentials:hi.ajaxWithCredentials,ajaxHeaders:hi.ajaxHeaders,useCanvas:hi.useCanvas,success:function(sa){Xr(sa.tileSource)}}),Bi.addHandler("open-failed",function(sa){rs(sa)});else if(ie.isPlainObject(Bi)||Bi.nodeType)if(Bi.crossOriginPolicy===void 0&&(qi.crossOriginPolicy!==void 0||hi.crossOriginPolicy!==void 0)&&(Bi.crossOriginPolicy=qi.crossOriginPolicy!==void 0?qi.crossOriginPolicy:hi.crossOriginPolicy),Bi.ajaxWithCredentials===void 0&&(Bi.ajaxWithCredentials=hi.ajaxWithCredentials),Bi.useCanvas===void 0&&(Bi.useCanvas=hi.useCanvas),ie.isFunction(Bi.getTileUrl)){var $s=new ie.TileSource(Bi);$s.getTileUrl=Bi.getTileUrl,Xr($s)}else{var Us=ie.TileSource.determineType(Os,Bi);if(!Us){rs({message:"Unable to load TileSource",source:Bi});return}var xs=Us.prototype.configure.apply(Os,[Bi]);zs(new Us(xs),Bi)}else zs(Bi,Bi)})}function ve(hi,Bi){if(Bi instanceof ie.Overlay)return Bi;var qi=null;if(Bi.element)qi=ie.getElement(Bi.element);else{var Xr=Bi.id?Bi.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);qi=ie.getElement(Bi.id),qi||(qi=document.createElement("a"),qi.href="#/overlay/"+Xr),qi.id=Xr,ie.addClass(qi,Bi.className?Bi.className:"openseadragon-overlay")}var rs=Bi.location,Os=Bi.width,gs=Bi.height;if(!rs){var zs=Bi.x,$s=Bi.y;if(Bi.px!==void 0){var Us=hi.viewport.imageToViewportRectangle(new ie.Rect(Bi.px,Bi.py,Os||0,gs||0));zs=Us.x,$s=Us.y,Os=Os!==void 0?Us.width:void 0,gs=gs!==void 0?Us.height:void 0}rs=new ie.Point(zs,$s)}var xs=Bi.placement;return xs&&ie.type(xs)==="string"&&(xs=ie.Placement[Bi.placement.toUpperCase()]),new ie.Overlay({element:qi,location:rs,placement:xs,onDraw:Bi.onDraw,checkResize:Bi.checkResize,width:Os,height:gs,rotationMode:Bi.rotationMode})}function be(hi,Bi){var qi;for(qi=hi.length-1;qi>=0;qi--)if(hi[qi].element===Bi)return qi;return-1}function Qe(hi,Bi){return ie.requestAnimationFrame(function(){Bi(hi)})}function Xe(hi){ie.requestAnimationFrame(function(){tt(hi)})}function Je(hi){hi.autoHideControls&&(hi.controlsShouldFade=!0,hi.controlsFadeBeginTime=ie.now()+hi.controlsFadeDelay,window.setTimeout(function(){Xe(hi)},hi.controlsFadeDelay))}function tt(hi){var Bi,qi,Xr,rs;if(hi.controlsShouldFade){for(Bi=ie.now(),qi=Bi-hi.controlsFadeBeginTime,Xr=1-qi/hi.controlsFadeLength,Xr=Math.min(1,Xr),Xr=Math.max(0,Xr),rs=hi.controls.length-1;rs>=0;rs--)hi.controls[rs].autoFade&&hi.controls[rs].setOpacity(Xr);Xr>0&&Xe(hi)}}function it(hi){var Bi;for(hi.controlsShouldFade=!1,Bi=hi.controls.length-1;Bi>=0;Bi--)hi.controls[Bi].setOpacity(1)}function st(){it(this)}function lt(){Je(this)}function ct(hi){var Bi={originalEvent:hi.originalEvent,preventDefaultAction:hi.preventDefaultAction,preventVerticalPan:hi.preventVerticalPan,preventHorizontalPan:hi.preventHorizontalPan};if(this.raiseEvent("canvas-key",Bi),!Bi.preventDefaultAction&&!hi.ctrl&&!hi.alt&&!hi.meta)switch(hi.keyCode){case 38:return Bi.preventVerticalPan||(hi.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return Bi.preventVerticalPan||(hi.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return Bi.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return Bi.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function gt(hi){var Bi={originalEvent:hi.originalEvent,preventDefaultAction:hi.preventDefaultAction,preventVerticalPan:hi.preventVerticalPan,preventHorizontalPan:hi.preventHorizontalPan};if(this.raiseEvent("canvas-key",Bi),!Bi.preventDefaultAction&&!hi.ctrl&&!hi.alt&&!hi.meta)switch(hi.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return Bi.preventVerticalPan||(hi.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return Bi.preventVerticalPan||(hi.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return Bi.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return Bi.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new ie.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(ie.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(ie.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(ie.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(ie.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function ut(hi){var Bi,qi=document.activeElement==this.canvas;qi||this.canvas.focus(),this.viewport.flipped&&(hi.position.x=this.viewport.getContainerSize().x-hi.position.x);var Xr={tracker:hi.eventSource,position:hi.position,quick:hi.quick,shift:hi.shift,originalEvent:hi.originalEvent,preventDefaultAction:hi.preventDefaultAction};this.raiseEvent("canvas-click",Xr),!Xr.preventDefaultAction&&this.viewport&&hi.quick&&(Bi=this.gestureSettingsByDeviceType(hi.pointerType),Bi.clickToZoom&&(this.viewport.zoomBy(hi.shift?1/this.zoomPerClick:this.zoomPerClick,Bi.zoomToRefPoint?this.viewport.pointFromPixel(hi.position,!0):null),this.viewport.applyConstraints()))}function mt(hi){var Bi,qi={tracker:hi.eventSource,position:hi.position,shift:hi.shift,originalEvent:hi.originalEvent,preventDefaultAction:hi.preventDefaultAction};this.raiseEvent("canvas-double-click",qi),!qi.preventDefaultAction&&this.viewport&&(Bi=this.gestureSettingsByDeviceType(hi.pointerType),Bi.dblClickToZoom&&(this.viewport.zoomBy(hi.shift?1/this.zoomPerClick:this.zoomPerClick,Bi.zoomToRefPoint?this.viewport.pointFromPixel(hi.position,!0):null),this.viewport.applyConstraints()))}function ei(hi){var Bi,qi={tracker:hi.eventSource,position:hi.position,delta:hi.delta,speed:hi.speed,direction:hi.direction,shift:hi.shift,originalEvent:hi.originalEvent,preventDefaultAction:hi.preventDefaultAction};if(this.raiseEvent("canvas-drag",qi),!qi.preventDefaultAction&&this.viewport){if(Bi=this.gestureSettingsByDeviceType(hi.pointerType),this.panHorizontal||(hi.delta.x=0),this.panVertical||(hi.delta.y=0),this.viewport.flipped&&(hi.delta.x=-hi.delta.x),this.constrainDuringPan){var Xr=this.viewport.deltaPointsFromPixels(hi.delta.negate());this.viewport.centerSpringX.target.value+=Xr.x,this.viewport.centerSpringY.target.value+=Xr.y;var rs=this.viewport.getBounds(),Os=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Xr.x,this.viewport.centerSpringY.target.value-=Xr.y,rs.x!=Os.x&&(hi.delta.x=0),rs.y!=Os.y&&(hi.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(hi.delta.negate()),Bi.flickEnabled&&!this.constrainDuringPan)}}function ni(hi){if(!hi.preventDefaultAction&&this.viewport){var Bi=this.gestureSettingsByDeviceType(hi.pointerType);if(Bi.flickEnabled&&hi.speed>=Bi.flickMinSpeed){var qi=0;this.panHorizontal&&(qi=Bi.flickMomentum*hi.speed*Math.cos(hi.direction));var Xr=0;this.panVertical&&(Xr=Bi.flickMomentum*hi.speed*Math.sin(hi.direction));var rs=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),Os=this.viewport.pointFromPixel(new ie.Point(rs.x-qi,rs.y-Xr));this.viewport.panTo(Os,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:hi.eventSource,position:hi.position,speed:hi.speed,direction:hi.direction,shift:hi.shift,originalEvent:hi.originalEvent})}function ri(hi){this.raiseEvent("canvas-enter",{tracker:hi.eventSource,pointerType:hi.pointerType,position:hi.position,buttons:hi.buttons,pointers:hi.pointers,insideElementPressed:hi.insideElementPressed,buttonDownAny:hi.buttonDownAny,originalEvent:hi.originalEvent})}function si(hi){window.location!=window.parent.location&&ie.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:hi.eventSource,pointerType:hi.pointerType,position:hi.position,buttons:hi.buttons,pointers:hi.pointers,insideElementPressed:hi.insideElementPressed,buttonDownAny:hi.buttonDownAny,originalEvent:hi.originalEvent})}function li(hi){this.raiseEvent("canvas-press",{tracker:hi.eventSource,pointerType:hi.pointerType,position:hi.position,insideElementPressed:hi.insideElementPressed,insideElementReleased:hi.insideElementReleased,originalEvent:hi.originalEvent})}function ai(hi){this.raiseEvent("canvas-release",{tracker:hi.eventSource,pointerType:hi.pointerType,position:hi.position,insideElementPressed:hi.insideElementPressed,insideElementReleased:hi.insideElementReleased,originalEvent:hi.originalEvent})}function ci(hi){this.raiseEvent("canvas-nonprimary-press",{tracker:hi.eventSource,position:hi.position,pointerType:hi.pointerType,button:hi.button,buttons:hi.buttons,originalEvent:hi.originalEvent})}function Ci(hi){this.raiseEvent("canvas-nonprimary-release",{tracker:hi.eventSource,position:hi.position,pointerType:hi.pointerType,button:hi.button,buttons:hi.buttons,originalEvent:hi.originalEvent})}function pi(hi){var Bi,qi,Xr,rs;if(!hi.preventDefaultAction&&this.viewport&&(Bi=this.gestureSettingsByDeviceType(hi.pointerType),Bi.pinchToZoom&&(qi=this.viewport.pointFromPixel(hi.center,!0),Xr=this.viewport.pointFromPixel(hi.lastCenter,!0),rs=Xr.minus(qi),this.panHorizontal||(rs.x=0),this.panVertical||(rs.y=0),this.viewport.zoomBy(hi.distance/hi.lastDistance,qi,!0),Bi.zoomToRefPoint&&this.viewport.panBy(rs,!0),this.viewport.applyConstraints()),Bi.pinchRotate)){var Os=Math.atan2(hi.gesturePoints[0].currentPos.y-hi.gesturePoints[1].currentPos.y,hi.gesturePoints[0].currentPos.x-hi.gesturePoints[1].currentPos.x),gs=Math.atan2(hi.gesturePoints[0].lastPos.y-hi.gesturePoints[1].lastPos.y,hi.gesturePoints[0].lastPos.x-hi.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(Os-gs)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:hi.eventSource,gesturePoints:hi.gesturePoints,lastCenter:hi.lastCenter,center:hi.center,lastDistance:hi.lastDistance,distance:hi.distance,shift:hi.shift,originalEvent:hi.originalEvent}),!1}function gi(hi){var Bi,qi,Xr,rs;if(Xr=ie.now(),rs=Xr-this._lastScrollTime,rs>this.minScrollDeltaTime){if(this._lastScrollTime=Xr,this.viewport.flipped&&(hi.position.x=this.viewport.getContainerSize().x-hi.position.x),!hi.preventDefaultAction&&this.viewport&&(Bi=this.gestureSettingsByDeviceType(hi.pointerType),Bi.scrollToZoom&&(qi=Math.pow(this.zoomPerScroll,hi.scroll),this.viewport.zoomBy(qi,Bi.zoomToRefPoint?this.viewport.pointFromPixel(hi.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:hi.eventSource,position:hi.position,scroll:hi.scroll,shift:hi.shift,originalEvent:hi.originalEvent}),Bi&&Bi.scrollToZoom)return!1}else if(Bi=this.gestureSettingsByDeviceType(hi.pointerType),Bi&&Bi.scrollToZoom)return!1}function _i(hi){Z[this.hash].mouseInside=!0,it(this),this.raiseEvent("container-enter",{tracker:hi.eventSource,position:hi.position,buttons:hi.buttons,pointers:hi.pointers,insideElementPressed:hi.insideElementPressed,buttonDownAny:hi.buttonDownAny,originalEvent:hi.originalEvent})}function bi(hi){hi.pointers<1&&(Z[this.hash].mouseInside=!1,Z[this.hash].animating||Je(this)),this.raiseEvent("container-exit",{tracker:hi.eventSource,position:hi.position,buttons:hi.buttons,pointers:hi.pointers,insideElementPressed:hi.insideElementPressed,buttonDownAny:hi.buttonDownAny,originalEvent:hi.originalEvent})}function Mi(hi){yi(hi),hi.isOpen()?hi._updateRequestId=Qe(hi,Mi):hi._updateRequestId=!1}function yi(hi){if(!hi._opening){if(hi.autoResize){var Bi=ae(hi.container),qi=Z[hi.hash].prevContainerSize;if(!Bi.equals(qi)){var Xr=hi.viewport;if(hi.preserveImageSizeOnResize){var rs=qi.x/Bi.x,Os=Xr.getZoom()*rs,gs=Xr.getCenter();Xr.resize(Bi,!1),Xr.zoomTo(Os,null,!0),Xr.panTo(gs,!0)}else{var zs=Xr.getBounds();Xr.resize(Bi,!0),Xr.fitBoundsWithConstraints(zs,!0)}Z[hi.hash].prevContainerSize=Bi,Z[hi.hash].forceRedraw=!0}}var $s=hi.viewport.update(),Us=hi.world.update()||$s;$s&&hi.raiseEvent("viewport-change"),hi.referenceStrip&&(Us=hi.referenceStrip.update(hi.viewport)||Us),!Z[hi.hash].animating&&Us&&(hi.raiseEvent("animation-start"),it(hi)),(Us||Z[hi.hash].forceRedraw||hi.world.needsDraw())&&(Ti(hi),hi._drawOverlays(),hi.navigator&&hi.navigator.update(hi.viewport),Z[hi.hash].forceRedraw=!1,Us&&hi.raiseEvent("animation")),Z[hi.hash].animating&&!Us&&(hi.raiseEvent("animation-finish"),Z[hi.hash].mouseInside||Je(hi)),Z[hi.hash].animating=Us}}function Ti(hi){hi.imageLoader.clear(),hi.drawer.clear(),hi.world.draw(),hi.raiseEvent("update-viewport",{})}function Ii(hi,Bi){return hi?hi+Bi:Bi}function Ri(){Z[this.hash].lastZoomTime=ie.now(),Z[this.hash].zoomFactor=this.zoomPerSecond,Z[this.hash].zooming=!0,ki(this)}function Pi(){Z[this.hash].lastZoomTime=ie.now(),Z[this.hash].zoomFactor=1/this.zoomPerSecond,Z[this.hash].zooming=!0,ki(this)}function xi(){Z[this.hash].zooming=!1}function ki(hi){ie.requestAnimationFrame(ie.delegate(hi,Li))}function Li(){var hi,Bi,qi;Z[this.hash].zooming&&this.viewport&&(hi=ie.now(),Bi=hi-Z[this.hash].lastZoomTime,qi=Math.pow(Z[this.hash].zoomFactor,Bi/1e3),this.viewport.zoomBy(qi),this.viewport.applyConstraints(),Z[this.hash].lastZoomTime=hi,ki(this))}function Yr(){this.viewport&&(Z[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Ui(){this.viewport&&(Z[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Vi(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function Kr(){this.viewport&&this.viewport.goHome()}function Wi(){this.isFullPage()&&!ie.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Zr(){if(this.viewport){var hi=this.viewport.getRotation();this.viewport.flipped?hi=ie.positiveModulo(hi+this.rotationIncrement,360):hi=ie.positiveModulo(hi-this.rotationIncrement,360),this.viewport.setRotation(hi)}}function ps(){if(this.viewport){var hi=this.viewport.getRotation();this.viewport.flipped?hi=ie.positiveModulo(hi-this.rotationIncrement,360):hi=ie.positiveModulo(hi+this.rotationIncrement,360),this.viewport.setRotation(hi)}}function Is(){this.viewport.toggleFlip()}function _s(){var hi=this._sequenceIndex-1;this.navPrevNextWrap&&hi<0&&(hi+=this.tileSources.length),this.goToPage(hi)}function ws(){var hi=this._sequenceIndex+1;this.navPrevNextWrap&&hi>=this.tileSources.length&&(hi=0),this.goToPage(hi)}}(OpenSeadragon),function(ie){ie.Navigator=function(Qe){var Xe=Qe.viewer,Je=this,tt,it;Qe.id?(this.element=document.getElementById(Qe.id),Qe.controlOptions={anchor:ie.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(Qe.id="navigator-"+ie.now(),this.element=ie.makeNeutralElement("div"),Qe.controlOptions={anchor:ie.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:Qe.autoFade},Qe.position&&(Qe.position=="BOTTOM_RIGHT"?Qe.controlOptions.anchor=ie.ControlAnchor.BOTTOM_RIGHT:Qe.position=="BOTTOM_LEFT"?Qe.controlOptions.anchor=ie.ControlAnchor.BOTTOM_LEFT:Qe.position=="TOP_RIGHT"?Qe.controlOptions.anchor=ie.ControlAnchor.TOP_RIGHT:Qe.position=="TOP_LEFT"?Qe.controlOptions.anchor=ie.ControlAnchor.TOP_LEFT:Qe.position=="ABSOLUTE"&&(Qe.controlOptions.anchor=ie.ControlAnchor.ABSOLUTE,Qe.controlOptions.top=Qe.top,Qe.controlOptions.left=Qe.left,Qe.controlOptions.height=Qe.height,Qe.controlOptions.width=Qe.width))),this.element.id=Qe.id,this.element.className+=" navigator",Qe=ie.extend(!0,{sizeRatio:ie.DEFAULT_SETTINGS.navigatorSizeRatio},Qe,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:Qe.autoResize,minZoomImageRatio:1,background:Qe.background,opacity:Qe.opacity,borderColor:Qe.borderColor,displayRegionColor:Qe.displayRegionColor}),Qe.minPixelRatio=this.minPixelRatio=Xe.minPixelRatio,ie.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new ie.Point(1,1),this.totalBorderWidths=new ie.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),Qe.controlOptions.anchor!=ie.ControlAnchor.NONE&&function(ct,gt){ct.margin="0px",ct.border=gt+"px solid "+Qe.borderColor,ct.padding="0px",ct.background=Qe.background,ct.opacity=Qe.opacity,ct.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=ie.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(ct,gt){ct.position="relative",ct.top="0px",ct.left="0px",ct.fontSize="0px",ct.overflow="hidden",ct.border=gt+"px solid "+Qe.displayRegionColor,ct.margin="0px",ct.padding="0px",ct.background="transparent",ct.float="left",ct.cssFloat="left",ct.styleFloat="left",ct.zIndex=999999999,ct.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=ie.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",Xe.addControl(this.element,Qe.controlOptions),this._resizeWithViewer=Qe.controlOptions.anchor!=ie.ControlAnchor.ABSOLUTE&&Qe.controlOptions.anchor!=ie.ControlAnchor.NONE,Qe.width&&Qe.height?(this.setWidth(Qe.width),this.setHeight(Qe.height)):this._resizeWithViewer&&(tt=ie.getElementSize(Xe.element),this.element.style.height=Math.round(tt.y*Qe.sizeRatio)+"px",this.element.style.width=Math.round(tt.x*Qe.sizeRatio)+"px",this.oldViewerSize=tt,it=ie.getElementSize(this.element),this.elementArea=it.x*it.y),this.oldContainerSize=new ie.Point(0,0),ie.Viewer.apply(this,[Qe]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function st(ct){ve(Je.displayRegionContainer,ct),ve(Je.displayRegion,-ct),Je.viewport.setRotation(ct)}if(Qe.navigatorRotate){var lt=Qe.viewer.viewport?Qe.viewer.viewport.getRotation():Qe.viewer.degrees||0;st(lt),Qe.viewer.addHandler("rotate",function(ct){st(ct.degrees)})}this.innerTracker.destroy(),this.innerTracker=new ie.MouseTracker({element:this.element,dragHandler:ie.delegate(this,ee),clickHandler:ie.delegate(this,Z),releaseHandler:ie.delegate(this,ae),scrollHandler:ie.delegate(this,ye)}),this.addHandler("reset-size",function(){Je.viewport&&Je.viewport.goHome(!0)}),Xe.world.addHandler("item-index-change",function(ct){window.setTimeout(function(){var gt=Je.world.getItemAt(ct.previousIndex);Je.world.setItemIndex(gt,ct.newIndex)},1)}),Xe.world.addHandler("remove-item",function(ct){var gt=ct.item,ut=Je._getMatchingItem(gt);ut&&Je.world.removeItem(ut)}),this.update(Xe.viewport)},ie.extend(ie.Navigator.prototype,ie.EventSource.prototype,ie.Viewer.prototype,{updateSize:function(){if(this.viewport){var Qe=new ie.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);Qe.equals(this.oldContainerSize)||(this.viewport.resize(Qe,!0),this.viewport.goHome(!0),this.oldContainerSize=Qe,this.drawer.clear(),this.world.draw())}},setWidth:function(Qe){this.width=Qe,this.element.style.width=typeof Qe=="number"?Qe+"px":Qe,this._resizeWithViewer=!1},setHeight:function(Qe){this.height=Qe,this.element.style.height=typeof Qe=="number"?Qe+"px":Qe,this._resizeWithViewer=!1},setFlip:function(Qe){return this.viewport.setFlip(Qe),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(Qe){be(this.displayRegion,Qe),be(this.canvas,Qe),be(this.element,Qe)},update:function(Qe){var Xe,Je,tt,it,st,lt;if(Xe=ie.getElementSize(this.viewer.element),this._resizeWithViewer&&Xe.x&&Xe.y&&!Xe.equals(this.oldViewerSize)&&(this.oldViewerSize=Xe,this.maintainSizeRatio||!this.elementArea?(Je=Xe.x*this.sizeRatio,tt=Xe.y*this.sizeRatio):(Je=Math.sqrt(this.elementArea*(Xe.x/Xe.y)),tt=this.elementArea/Je),this.element.style.width=Math.round(Je)+"px",this.element.style.height=Math.round(tt)+"px",this.elementArea||(this.elementArea=Je*tt),this.updateSize()),Qe&&this.viewport){it=Qe.getBoundsNoRotate(!0),st=this.viewport.pixelFromPointNoRotate(it.getTopLeft(),!1),lt=this.viewport.pixelFromPointNoRotate(it.getBottomRight(),!1).minus(this.totalBorderWidths);var ct=this.displayRegion.style;ct.display=this.world.getItemCount()?"block":"none",ct.top=Math.round(st.y)+"px",ct.left=Math.round(st.x)+"px";var gt=Math.abs(st.x-lt.x),ut=Math.abs(st.y-lt.y);ct.width=Math.round(Math.max(gt,0))+"px",ct.height=Math.round(Math.max(ut,0))+"px"}},addTiledImage:function(Qe){var Xe=this,Je=Qe.originalTiledImage;delete Qe.original;var tt=ie.extend({},Qe,{success:function(it){var st=it.item;st._originalForNavigator=Je,Xe._matchBounds(st,Je,!0);function lt(){Xe._matchBounds(st,Je)}function ct(){Xe._matchOpacity(st,Je)}function gt(){Xe._matchCompositeOperation(st,Je)}Je.addHandler("bounds-change",lt),Je.addHandler("clip-change",lt),Je.addHandler("opacity-change",ct),Je.addHandler("composite-operation-change",gt)}});return ie.Viewer.prototype.addTiledImage.apply(this,[tt])},_getMatchingItem:function(Qe){for(var Xe=this.world.getItemCount(),Je,tt=0;tt<Xe;tt++)if(Je=this.world.getItemAt(tt),Je._originalForNavigator===Qe)return Je;return null},_matchBounds:function(Qe,Xe,Je){var tt=Xe.getBoundsNoRotate();Qe.setPosition(tt.getTopLeft(),Je),Qe.setWidth(tt.width,Je),Qe.setRotation(Xe.getRotation(),Je),Qe.setClip(Xe.getClip())},_matchOpacity:function(Qe,Xe){Qe.setOpacity(Xe.opacity)},_matchCompositeOperation:function(Qe,Xe){Qe.setCompositeOperation(Xe.compositeOperation)}});function Z(Qe){var Xe={tracker:Qe.eventSource,position:Qe.position,quick:Qe.quick,shift:Qe.shift,originalEvent:Qe.originalEvent,preventDefaultAction:Qe.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",Xe),!Xe.preventDefaultAction&&Qe.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(Qe.position.x=this.viewport.getContainerSize().x-Qe.position.x);var Je=this.viewport.pointFromPixel(Qe.position);this.panVertical?this.panHorizontal||(Je.x=this.viewer.viewport.getCenter(!0).x):Je.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(Je),this.viewer.viewport.applyConstraints()}}function ee(Qe){var Xe={tracker:Qe.eventSource,position:Qe.position,delta:Qe.delta,speed:Qe.speed,direction:Qe.direction,shift:Qe.shift,originalEvent:Qe.originalEvent,preventDefaultAction:Qe.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",Xe),!Xe.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(Qe.delta.x=0),this.panVertical||(Qe.delta.y=0),this.viewer.viewport.flipped&&(Qe.delta.x=-Qe.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(Qe.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function ae(Qe){Qe.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function ye(Qe){return this.viewer.raiseEvent("navigator-scroll",{tracker:Qe.eventSource,position:Qe.position,scroll:Qe.scroll,shift:Qe.shift,originalEvent:Qe.originalEvent}),!1}function ve(Qe,Xe){be(Qe,"rotate("+Xe+"deg)")}function be(Qe,Xe){Qe.style.webkitTransform=Xe,Qe.style.mozTransform=Xe,Qe.style.msTransform=Xe,Qe.style.oTransform=Xe,Qe.style.transform=Xe}}(OpenSeadragon),function(ie){var Z={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};ie.extend(ie,{getString:function(ee){var ae=ee.split("."),ye=null,ve=arguments,be=Z,Qe;for(Qe=0;Qe<ae.length-1;Qe++)be=be[ae[Qe]]||{};return ye=be[ae[Qe]],typeof ye!="string"&&(ie.console.log("Untranslated source string:",ee),ye=""),ye.replace(/\{\d+\}/g,function(Xe){var Je=parseInt(Xe.match(/\d+/),10)+1;return Je<ve.length?ve[Je]:""})},setString:function(ee,ae){var ye=ee.split("."),ve=Z,be;for(be=0;be<ye.length-1;be++)ve[ye[be]]||(ve[ye[be]]={}),ve=ve[ye[be]];ve[ye[be]]=ae}})}(OpenSeadragon),function(ie){ie.Point=function(Z,ee){this.x=typeof Z=="number"?Z:0,this.y=typeof ee=="number"?ee:0},ie.Point.prototype={clone:function(){return new ie.Point(this.x,this.y)},plus:function(Z){return new ie.Point(this.x+Z.x,this.y+Z.y)},minus:function(Z){return new ie.Point(this.x-Z.x,this.y-Z.y)},times:function(Z){return new ie.Point(this.x*Z,this.y*Z)},divide:function(Z){return new ie.Point(this.x/Z,this.y/Z)},negate:function(){return new ie.Point(-this.x,-this.y)},distanceTo:function(Z){return Math.sqrt(Math.pow(this.x-Z.x,2)+Math.pow(this.y-Z.y,2))},squaredDistanceTo:function(Z){return Math.pow(this.x-Z.x,2)+Math.pow(this.y-Z.y,2)},apply:function(Z){return new ie.Point(Z(this.x),Z(this.y))},equals:function(Z){return Z instanceof ie.Point&&this.x===Z.x&&this.y===Z.y},rotate:function(Z,ee){ee=ee||new ie.Point(0,0);var ae,ye;if(Z%90===0){var ve=ie.positiveModulo(Z,360);switch(ve){case 0:ae=1,ye=0;break;case 90:ae=0,ye=1;break;case 180:ae=-1,ye=0;break;case 270:ae=0,ye=-1;break}}else{var be=Z*Math.PI/180;ae=Math.cos(be),ye=Math.sin(be)}var Qe=ae*(this.x-ee.x)-ye*(this.y-ee.y)+ee.x,Xe=ye*(this.x-ee.x)+ae*(this.y-ee.y)+ee.y;return new ie.Point(Qe,Xe)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(ie){ie.TileSource=function(ee,ae,ye,ve,be,Qe){var Xe=this,Je=arguments,tt,it;if(ie.isPlainObject(ee)?tt=ee:tt={width:Je[0],height:Je[1],tileSize:Je[2],tileOverlap:Je[3],minLevel:Je[4],maxLevel:Je[5]},ie.EventSource.call(this),ie.extend(!0,this,tt),!this.success){for(it=0;it<arguments.length;it++)if(ie.isFunction(arguments[it])){this.success=arguments[it];break}}this.success&&this.addHandler("ready",function(st){Xe.success(st)}),ie.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new ie.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=tt.width&&tt.height?tt.width/tt.height:1,this.dimensions=new ie.Point(tt.width,tt.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=tt.tileOverlap?tt.tileOverlap:0,this.minLevel=tt.minLevel?tt.minLevel:0,this.maxLevel=tt.maxLevel!==void 0&&tt.maxLevel!==null?tt.maxLevel:tt.width&&tt.height?Math.ceil(Math.log(Math.max(tt.width,tt.height))/Math.log(2)):0,this.success&&ie.isFunction(this.success)&&this.success(this))},ie.TileSource.prototype={getTileSize:function(ee){return ie.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(ee){return this._tileWidth?this._tileWidth:this.getTileSize(ee)},getTileHeight:function(ee){return this._tileHeight?this._tileHeight:this.getTileSize(ee)},getLevelScale:function(ee){var ae={},ye;for(ye=0;ye<=this.maxLevel;ye++)ae[ye]=1/Math.pow(2,this.maxLevel-ye);return this.getLevelScale=function(ve){return ae[ve]},this.getLevelScale(ee)},getNumTiles:function(ee){var ae=this.getLevelScale(ee),ye=Math.ceil(ae*this.dimensions.x/this.getTileWidth(ee)),ve=Math.ceil(ae*this.dimensions.y/this.getTileHeight(ee));return new ie.Point(ye,ve)},getPixelRatio:function(ee){var ae=this.dimensions.times(this.getLevelScale(ee)),ye=1/ae.x,ve=1/ae.y;return new ie.Point(ye,ve)},getClosestLevel:function(){var ee,ae;for(ee=this.minLevel+1;ee<=this.maxLevel&&(ae=this.getNumTiles(ee),!(ae.x>1||ae.y>1));ee++);return ee-1},getTileAtPoint:function(ee,ae){var ye=ae.x>=0&&ae.x<=1&&ae.y>=0&&ae.y<=1/this.aspectRatio;ie.console.assert(ye,"[TileSource.getTileAtPoint] must be called with a valid point.");var ve=this.dimensions.x*this.getLevelScale(ee),be=ae.x*ve,Qe=ae.y*ve,Xe=Math.floor(be/this.getTileWidth(ee)),Je=Math.floor(Qe/this.getTileHeight(ee));ae.x>=1&&(Xe=this.getNumTiles(ee).x-1);var tt=1e-15;return ae.y>=1/this.aspectRatio-tt&&(Je=this.getNumTiles(ee).y-1),new ie.Point(Xe,Je)},getTileBounds:function(ee,ae,ye,ve){var be=this.dimensions.times(this.getLevelScale(ee)),Qe=this.getTileWidth(ee),Xe=this.getTileHeight(ee),Je=ae===0?0:Qe*ae-this.tileOverlap,tt=ye===0?0:Xe*ye-this.tileOverlap,it=Qe+(ae===0?1:2)*this.tileOverlap,st=Xe+(ye===0?1:2)*this.tileOverlap,lt=1/be.x;return it=Math.min(it,be.x-Je),st=Math.min(st,be.y-tt),ve?new ie.Rect(0,0,it,st):new ie.Rect(Je*lt,tt*lt,it*lt,st*lt)},getImageInfo:function(ee){var ae=this,ye,ve,be,Qe,Xe,Je,tt;ee&&(Xe=ee.split("/"),Je=Xe[Xe.length-1],tt=Je.lastIndexOf("."),tt>-1&&(Xe[Xe.length-1]=Je.slice(0,tt))),ve=function(it){typeof it=="string"&&(it=ie.parseXml(it));var st=ie.TileSource.determineType(ae,it,ee);if(!st){ae.raiseEvent("open-failed",{message:"Unable to load TileSource",source:ee});return}Qe=st.prototype.configure.apply(ae,[it,ee]),Qe.ajaxWithCredentials===void 0&&(Qe.ajaxWithCredentials=ae.ajaxWithCredentials),be=new st(Qe),ae.ready=!0,ae.raiseEvent("ready",{tileSource:be})},ee.match(/\.js$/)?(ye=ee.split("/").pop().replace(".js",""),ie.jsonp({url:ee,async:!1,callbackName:ye,callback:ve})):ie.makeAjaxRequest({url:ee,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(it){var st=Z(it);ve(st)},error:function(it,st){var lt;try{lt="HTTP "+it.status+" attempting to load TileSource"}catch{var ct;typeof st>"u"||!st.toString?ct="Unknown error":ct=st.toString(),lt=ct+" attempting to load TileSource"}ae.raiseEvent("open-failed",{message:lt,source:ee})}})},supports:function(ee,ae){return!1},configure:function(ee,ae){throw new Error("Method not implemented.")},getTileUrl:function(ee,ae,ye){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(ee,ae,ye){return{}},tileExists:function(ee,ae,ye){var ve=this.getNumTiles(ee);return ee>=this.minLevel&&ee<=this.maxLevel&&ae>=0&&ye>=0&&ae<ve.x&&ye<ve.y}},ie.extend(!0,ie.TileSource.prototype,ie.EventSource.prototype);function Z(ee){var ae=ee.responseText,ye=ee.status,ve,be;if(ee){if(ee.status!==200&&ee.status!==0)throw ye=ee.status,ve=ye==404?"Not Found":ee.statusText,new Error(ie.getString("Errors.Status",ye,ve))}else throw new Error(ie.getString("Errors.Security"));if(ae.match(/\s*<.*/))try{be=ee.responseXML&&ee.responseXML.documentElement?ee.responseXML:ie.parseXml(ae)}catch{be=ee.responseText}else if(ae.match(/\s*[\{\[].*/))try{be=ie.parseJSON(ae)}catch{be=ae}else be=ae;return be}ie.TileSource.determineType=function(ee,ae,ye){var ve;for(ve in OpenSeadragon)if(ve.match(/.+TileSource$/)&&ie.isFunction(OpenSeadragon[ve])&&ie.isFunction(OpenSeadragon[ve].prototype.supports)&&OpenSeadragon[ve].prototype.supports.call(ee,ae,ye))return OpenSeadragon[ve];ie.console.error("No TileSource was able to open %s %s",ye,ae)}}(OpenSeadragon),function(ie){ie.DziTileSource=function(ae,ye,ve,be,Qe,Xe,Je,tt,it){var st,lt,ct,gt;if(ie.isPlainObject(ae)?gt=ae:gt={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=gt.tilesUrl,this.fileFormat=gt.fileFormat,this.displayRects=gt.displayRects,this.displayRects)for(st=this.displayRects.length-1;st>=0;st--)for(lt=this.displayRects[st],ct=lt.minLevel;ct<=lt.maxLevel;ct++)this._levelRects[ct]||(this._levelRects[ct]=[]),this._levelRects[ct].push(lt);ie.TileSource.apply(this,[gt])},ie.extend(ie.DziTileSource.prototype,ie.TileSource.prototype,{supports:function(ae,ye){var ve;return ae.Image?ve=ae.Image.xmlns:ae.documentElement&&(ae.documentElement.localName=="Image"||ae.documentElement.tagName=="Image")&&(ve=ae.documentElement.namespaceURI),ve=(ve||"").toLowerCase(),ve.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||ve.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(ae,ye){var ve;return ie.isPlainObject(ae)?ve=ee(this,ae):ve=Z(this,ae),ye&&!ve.tilesUrl&&(ve.tilesUrl=ye.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),ye.search(/\.(dzi|xml|js)\?/)!=-1?ve.queryParams=ye.match(/\?.*/):ve.queryParams=""),ve},getTileUrl:function(ae,ye,ve){return[this.tilesUrl,ae,"/",ye,"_",ve,".",this.fileFormat,this.queryParams].join("")},tileExists:function(ae,ye,ve){var be=this._levelRects[ae],Qe,Xe,Je,tt,it,st,lt;if(this.minLevel&&ae<this.minLevel||this.maxLevel&&ae>this.maxLevel)return!1;if(!be||!be.length)return!0;for(lt=be.length-1;lt>=0;lt--)if(Qe=be[lt],!(ae<Qe.minLevel||ae>Qe.maxLevel)&&(Xe=this.getLevelScale(ae),Je=Qe.x*Xe,tt=Qe.y*Xe,it=Je+Qe.width*Xe,st=tt+Qe.height*Xe,Je=Math.floor(Je/this._tileWidth),tt=Math.floor(tt/this._tileWidth),it=Math.ceil(it/this._tileWidth),st=Math.ceil(st/this._tileWidth),Je<=ye&&ye<it&&tt<=ve&&ve<st))return!0;return!1}});function Z(ae,ye){if(!ye||!ye.documentElement)throw new Error(ie.getString("Errors.Xml"));var ve=ye.documentElement,be=ve.localName||ve.tagName,Qe=ye.documentElement.namespaceURI,Xe=null,Je=[],tt,it,st,lt,ct;if(be=="Image")try{if(lt=ve.getElementsByTagName("Size")[0],lt===void 0&&(lt=ve.getElementsByTagNameNS(Qe,"Size")[0]),Xe={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:ve.getAttribute("Url"),Format:ve.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(ve.getAttribute("Overlap"),10),TileSize:parseInt(ve.getAttribute("TileSize"),10),Size:{Height:parseInt(lt.getAttribute("Height"),10),Width:parseInt(lt.getAttribute("Width"),10)}}},!ie.imageFormatSupported(Xe.Image.Format))throw new Error(ie.getString("Errors.ImageFormat",Xe.Image.Format.toUpperCase()));for(tt=ve.getElementsByTagName("DisplayRect"),tt===void 0&&(tt=ve.getElementsByTagNameNS(Qe,"DisplayRect")[0]),ct=0;ct<tt.length;ct++)it=tt[ct],st=it.getElementsByTagName("Rect")[0],st===void 0&&(st=it.getElementsByTagNameNS(Qe,"Rect")[0]),Je.push({Rect:{X:parseInt(st.getAttribute("X"),10),Y:parseInt(st.getAttribute("Y"),10),Width:parseInt(st.getAttribute("Width"),10),Height:parseInt(st.getAttribute("Height"),10),MinLevel:parseInt(it.getAttribute("MinLevel"),10),MaxLevel:parseInt(it.getAttribute("MaxLevel"),10)}});return Je.length&&(Xe.Image.DisplayRect=Je),ee(ae,Xe)}catch(mt){throw mt instanceof Error?mt:new Error(ie.getString("Errors.Dzi"))}else{if(be=="Collection")throw new Error(ie.getString("Errors.Dzc"));if(be=="Error"){var gt=ve.getElementsByTagName("Message")[0],ut=gt.firstChild.nodeValue;throw new Error(ut)}}throw new Error(ie.getString("Errors.Dzi"))}function ee(ae,ye){var ve=ye.Image,be=ve.Url,Qe=ve.Format,Xe=ve.Size,Je=ve.DisplayRect||[],tt=parseInt(Xe.Width,10),it=parseInt(Xe.Height,10),st=parseInt(ve.TileSize,10),lt=parseInt(ve.Overlap,10),ct=[],gt,ut;for(ut=0;ut<Je.length;ut++)gt=Je[ut].Rect,ct.push(new ie.DisplayRect(parseInt(gt.X,10),parseInt(gt.Y,10),parseInt(gt.Width,10),parseInt(gt.Height,10),parseInt(gt.MinLevel,10),parseInt(gt.MaxLevel,10)));return ie.extend(!0,{width:tt,height:it,tileSize:st,tileOverlap:lt,minLevel:null,maxLevel:null,tilesUrl:be,fileFormat:Qe,displayRects:ct},ye)}}(OpenSeadragon),function(ie){ie.IIIFTileSource=function(ve){if(ie.extend(!0,this,ve),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(ve.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=ve.version,this.tile_width&&this.tile_height)ve.tileWidth=this.tile_width,ve.tileHeight=this.tile_height;else if(this.tile_width)ve.tileSize=this.tile_width;else if(this.tile_height)ve.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)ve.tileWidth=this.tiles[0].width,ve.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var be=0;be<this.tiles.length;be++)for(var Qe=0;Qe<this.tiles[be].scaleFactors.length;Qe++){var Xe=this.tiles[be].scaleFactors[Qe];this.scale_factors.push(Xe),ve.tileSizePerScaleFactor[Xe]={width:this.tiles[be].width,height:this.tiles[be].height||this.tiles[be].width}}}else if(Z(ve)){for(var Je=Math.min(this.height,this.width),tt=[256,512,1024],it=[],st=0;st<tt.length;st++)tt[st]<=Je&&it.push(tt[st]);it.length>0?ve.tileSize=Math.max.apply(null,it):ve.tileSize=Je}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,ve.levels=ee(this),ie.extend(!0,ve,{width:ve.levels[ve.levels.length-1].width,height:ve.levels[ve.levels.length-1].height,tileSize:Math.max(ve.height,ve.width),tileOverlap:0,minLevel:0,maxLevel:ve.levels.length-1}),this.levels=ve.levels):ie.console.error("Nothing in the info.json to construct image pyramids from");if(!ve.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)ve.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var lt=Math.max.apply(null,this.scale_factors);ve.maxLevel=Math.round(Math.log(lt)*Math.LOG2E)}ie.TileSource.apply(this,[ve])},ie.extend(ie.IIIFTileSource.prototype,ie.TileSource.prototype,{supports:function(ve,be){return ve.protocol&&ve.protocol=="http://iiif.io/api/image"||ve["@context"]&&(ve["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||ve["@context"]=="http://iiif.io/api/image/1/context.json")||ve.profile&&ve.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||ve.identifier&&ve.width&&ve.height?!0:!!(ve.documentElement&&ve.documentElement.tagName=="info"&&ve.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(ve,be){if(ie.isPlainObject(ve)){if(!ve["@context"])ve["@context"]="http://iiif.io/api/image/1.0/context.json",ve["@id"]=be.replace("/info.json",""),ve.version=1;else{var Xe=ve["@context"];if(Array.isArray(Xe)){for(var Je=0;Je<Xe.length;Je++)if(typeof Xe[Je]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(Xe[Je])||Xe[Je]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){Xe=Xe[Je];break}}switch(Xe){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":ve.version=1;break;case"http://iiif.io/api/image/2/context.json":ve.version=2;break;case"http://iiif.io/api/image/3/context.json":ve.version=3;break;default:ie.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!ve["@id"]&&ve.id&&(ve["@id"]=ve.id),ve.preferredFormats){for(var tt=0;tt<ve.preferredFormats.length;tt++)if(OpenSeadragon.imageFormatSupported(ve.preferredFormats[tt])){ve.tileFormat=ve.preferredFormats[tt];break}}return ve}else{var Qe=ae(ve);return Qe["@context"]="http://iiif.io/api/image/1.0/context.json",Qe["@id"]=be.replace("/info.xml",""),Qe.version=1,Qe}},getTileWidth:function(ve){if(this.emulateLegacyImagePyramid)return ie.TileSource.prototype.getTileWidth.call(this,ve);var be=Math.pow(2,this.maxLevel-ve);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[be]?this.tileSizePerScaleFactor[be].width:this._tileWidth},getTileHeight:function(ve){if(this.emulateLegacyImagePyramid)return ie.TileSource.prototype.getTileHeight.call(this,ve);var be=Math.pow(2,this.maxLevel-ve);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[be]?this.tileSizePerScaleFactor[be].height:this._tileHeight},getLevelScale:function(ve){if(this.emulateLegacyImagePyramid){var be=NaN;return this.levels.length>0&&ve>=this.minLevel&&ve<=this.maxLevel&&(be=this.levels[ve].width/this.levels[this.maxLevel].width),be}return ie.TileSource.prototype.getLevelScale.call(this,ve)},getNumTiles:function(ve){if(this.emulateLegacyImagePyramid){var be=this.getLevelScale(ve);return be?new ie.Point(1,1):new ie.Point(0,0)}return ie.TileSource.prototype.getNumTiles.call(this,ve)},getTileAtPoint:function(ve,be){return this.emulateLegacyImagePyramid?new ie.Point(0,0):ie.TileSource.prototype.getTileAtPoint.call(this,ve,be)},getTileUrl:function(ve,be,Qe){if(this.emulateLegacyImagePyramid){var Xe=null;return this.levels.length>0&&ve>=this.minLevel&&ve<=this.maxLevel&&(Xe=this.levels[ve].url),Xe}var Je="0",tt=Math.pow(.5,this.maxLevel-ve),it=Math.ceil(this.width*tt),st=Math.ceil(this.height*tt),lt,ct,gt,ut,mt,ei,ni,ri,si,li,ai,ci,Ci,pi;return lt=this.getTileWidth(ve),ct=this.getTileHeight(ve),gt=Math.ceil(lt/tt),ut=Math.ceil(ct/tt),this.version===1?Ci="native."+this.tileFormat:Ci="default."+this.tileFormat,it<lt&&st<ct?(this.version===2&&it===this.width||this.version===3&&it===this.width&&st===this.height?li="max":this.version===3?li=it+","+st:li=it+",",mt="full"):(ei=be*gt,ni=Qe*ut,ri=Math.min(gt,this.width-ei),si=Math.min(ut,this.height-ni),be===0&&Qe===0&&ri===this.width&&si===this.height?mt="full":mt=[ei,ni,ri,si].join(","),ai=Math.ceil(ri*tt),ci=Math.ceil(si*tt),this.version===2&&ai===this.width||this.version===3&&ai===this.width&&ci===this.height?li="max":this.version===3?li=ai+","+ci:li=ai+","),pi=[this["@id"],mt,li,Je,Ci].join("/"),pi},__testonly__:{canBeTiled:Z,constructLevels:ee}});function Z(ve){var be=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],Qe=Array.isArray(ve.profile)?ve.profile[0]:ve.profile,Xe=be.indexOf(Qe)!==-1,Je=!1;return ve.version===2&&ve.profile.length>1&&ve.profile[1].supports&&(Je=ve.profile[1].supports.indexOf("sizeByW")!==-1),ve.version===3&&ve.extraFeatures&&(Je=ve.extraFeatures.indexOf("sizeByWh")!==-1),!Xe||Je}function ee(ve){for(var be=[],Qe=0;Qe<ve.sizes.length;Qe++)be.push({url:ve["@id"]+"/full/"+ve.sizes[Qe].width+","+(ve.version===3?ve.sizes[Qe].height:"")+"/0/default."+ve.tileFormat,width:ve.sizes[Qe].width,height:ve.sizes[Qe].height});return be.sort(function(Xe,Je){return Xe.width-Je.width})}function ae(ve){if(!ve||!ve.documentElement)throw new Error(ie.getString("Errors.Xml"));var be=ve.documentElement,Qe=be.tagName,Xe=null;if(Qe=="info")try{return Xe={},ye(be,Xe),Xe}catch(Je){throw Je instanceof Error?Je:new Error(ie.getString("Errors.IIIF"))}throw new Error(ie.getString("Errors.IIIF"))}function ye(ve,be,Qe){var Xe,Je;if(ve.nodeType==3&&Qe)Je=ve.nodeValue.trim(),Je.match(/^\d*$/)&&(Je=Number(Je)),be[Qe]?(ie.isArray(be[Qe])||(be[Qe]=[be[Qe]]),be[Qe].push(Je)):be[Qe]=Je;else if(ve.nodeType==1)for(Xe=0;Xe<ve.childNodes.length;Xe++)ye(ve.childNodes[Xe],be,ve.nodeName)}}(OpenSeadragon),function(ie){ie.OsmTileSource=function(Z,ee,ae,ye,ve){var be;ie.isPlainObject(Z)?be=Z:be={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!be.width||!be.height)&&(be.width=65572864,be.height=65572864),be.tileSize||(be.tileSize=256,be.tileOverlap=0),be.tilesUrl||(be.tilesUrl="http://tile.openstreetmap.org/"),be.minLevel=8,ie.TileSource.apply(this,[be])},ie.extend(ie.OsmTileSource.prototype,ie.TileSource.prototype,{supports:function(Z,ee){return Z.type&&Z.type=="openstreetmaps"},configure:function(Z,ee){return Z},getTileUrl:function(Z,ee,ae){return this.tilesUrl+(Z-8)+"/"+ee+"/"+ae+".png"}})}(OpenSeadragon),function(ie){ie.TmsTileSource=function(Z,ee,ae,ye,ve){var be;ie.isPlainObject(Z)?be=Z:be={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var Qe=Math.ceil(be.width/256)*256,Xe=Math.ceil(be.height/256)*256,Je;Qe>Xe?Je=Qe/256:Je=Xe/256,be.maxLevel=Math.ceil(Math.log(Je)/Math.log(2))-1,be.tileSize=256,be.width=Qe,be.height=Xe,ie.TileSource.apply(this,[be])},ie.extend(ie.TmsTileSource.prototype,ie.TileSource.prototype,{supports:function(Z,ee){return Z.type&&Z.type=="tiledmapservice"},configure:function(Z,ee){return Z},getTileUrl:function(Z,ee,ae){var ye=this.getNumTiles(Z).y-1;return this.tilesUrl+Z+"/"+ee+"/"+(ye-ae)+".png"}})}(OpenSeadragon),function(ie){ie.ZoomifyTileSource=function(Z){Z.tileSize=256;var ee={x:Z.width,y:Z.height};for(Z.imageSizes=[{x:Z.width,y:Z.height}],Z.gridSize=[this._getGridSize(Z.width,Z.height,Z.tileSize)];parseInt(ee.x,10)>Z.tileSize||parseInt(ee.y,10)>Z.tileSize;)ee.x=Math.floor(ee.x/2),ee.y=Math.floor(ee.y/2),Z.imageSizes.push({x:ee.x,y:ee.y}),Z.gridSize.push(this._getGridSize(ee.x,ee.y,Z.tileSize));Z.imageSizes.reverse(),Z.gridSize.reverse(),Z.minLevel=0,Z.maxLevel=Z.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[Z])},ie.extend(ie.ZoomifyTileSource.prototype,ie.TileSource.prototype,{_getGridSize:function(Z,ee,ae){return{x:Math.ceil(Z/ae),y:Math.ceil(ee/ae)}},_calculateAbsoluteTileNumber:function(Z,ee,ae){for(var ye=0,ve={},be=0;be<Z;be++)ve=this.gridSize[be],ye+=ve.x*ve.y;return ve=this.gridSize[Z],ye+=ve.x*ae+ee,ye},supports:function(Z,ee){return Z.type&&Z.type=="zoomifytileservice"},configure:function(Z,ee){return Z},getTileUrl:function(Z,ee,ae){var ye=0,ve=this._calculateAbsoluteTileNumber(Z,ee,ae);return ye=Math.floor(ve/256),this.tilesUrl+"TileGroup"+ye+"/"+Z+"-"+ee+"-"+ae+".jpg"}})}(OpenSeadragon),function(ie){ie.LegacyTileSource=function(ye){var ve,be,Qe;ie.isArray(ye)&&(ve={type:"legacy-image-pyramid",levels:ye}),ve.levels=Z(ve.levels),ve.levels.length>0?(be=ve.levels[ve.levels.length-1].width,Qe=ve.levels[ve.levels.length-1].height):(be=0,Qe=0,ie.console.error("No supported image formats found")),ie.extend(!0,ve,{width:be,height:Qe,tileSize:Math.max(Qe,be),tileOverlap:0,minLevel:0,maxLevel:ve.levels.length>0?ve.levels.length-1:0}),ie.TileSource.apply(this,[ve]),this.levels=ve.levels},ie.extend(ie.LegacyTileSource.prototype,ie.TileSource.prototype,{supports:function(ye,ve){return ye.type&&ye.type=="legacy-image-pyramid"||ye.documentElement&&ye.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(ye,ve){var be;return ie.isPlainObject(ye)?be=ae(this,ye):be=ee(this,ye),be},getLevelScale:function(ye){var ve=NaN;return this.levels.length>0&&ye>=this.minLevel&&ye<=this.maxLevel&&(ve=this.levels[ye].width/this.levels[this.maxLevel].width),ve},getNumTiles:function(ye){var ve=this.getLevelScale(ye);return ve?new ie.Point(1,1):new ie.Point(0,0)},getTileUrl:function(ye,ve,be){var Qe=null;return this.levels.length>0&&ye>=this.minLevel&&ye<=this.maxLevel&&(Qe=this.levels[ye].url),Qe}});function Z(ye){var ve=[],be,Qe;for(Qe=0;Qe<ye.length;Qe++)be=ye[Qe],be.height&&be.width&&be.url?ve.push({url:be.url,width:Number(be.width),height:Number(be.height)}):ie.console.error("Unsupported image format: %s",be.url?be.url:"<no URL>");return ve.sort(function(Xe,Je){return Xe.height-Je.height})}function ee(ye,ve){if(!ve||!ve.documentElement)throw new Error(ie.getString("Errors.Xml"));var be=ve.documentElement,Qe=be.tagName,Xe=null,Je=[],tt,it;if(Qe=="image")try{for(Xe={type:be.getAttribute("type"),levels:[]},Je=be.getElementsByTagName("level"),it=0;it<Je.length;it++)tt=Je[it],Xe.levels.push({url:tt.getAttribute("url"),width:parseInt(tt.getAttribute("width"),10),height:parseInt(tt.getAttribute("height"),10)});return ae(ye,Xe)}catch(st){throw st instanceof Error?st:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(Qe=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(Qe=="error")throw new Error("Error: "+ve)}throw new Error("Unknown element "+Qe)}function ae(ye,ve){return ve.levels}}(OpenSeadragon),function(ie){ie.ImageTileSource=function(Z){Z=ie.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},Z),ie.TileSource.apply(this,[Z])},ie.extend(ie.ImageTileSource.prototype,ie.TileSource.prototype,{supports:function(Z,ee){return Z.type&&Z.type==="image"},configure:function(Z,ee){return Z},getImageInfo:function(Z){var ee=this._image=new Image,ae=this;this.crossOriginPolicy&&(ee.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(ee.useCredentials=this.ajaxWithCredentials),ie.addEvent(ee,"load",function(){ae.width=Object.prototype.hasOwnProperty.call(ee,"naturalWidth")?ee.naturalWidth:ee.width,ae.height=Object.prototype.hasOwnProperty.call(ee,"naturalHeight")?ee.naturalHeight:ee.height,ae.aspectRatio=ae.width/ae.height,ae.dimensions=new ie.Point(ae.width,ae.height),ae._tileWidth=ae.width,ae._tileHeight=ae.height,ae.tileOverlap=0,ae.minLevel=0,ae.levels=ae._buildLevels(),ae.maxLevel=ae.levels.length-1,ae.ready=!0,ae.raiseEvent("ready",{tileSource:ae})}),ie.addEvent(ee,"error",function(){ae.raiseEvent("open-failed",{message:"Error loading image at "+Z,source:Z})}),ee.src=Z},getLevelScale:function(Z){var ee=NaN;return Z>=this.minLevel&&Z<=this.maxLevel&&(ee=this.levels[Z].width/this.levels[this.maxLevel].width),ee},getNumTiles:function(Z){var ee=this.getLevelScale(Z);return ee?new ie.Point(1,1):new ie.Point(0,0)},getTileUrl:function(Z,ee,ae){var ye=null;return Z>=this.minLevel&&Z<=this.maxLevel&&(ye=this.levels[Z].url),ye},getContext2D:function(Z,ee,ae){var ye=null;return Z>=this.minLevel&&Z<=this.maxLevel&&(ye=this.levels[Z].context2D),ye},_buildLevels:function(){var Z=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!ie.supportsCanvas||!this.useCanvas)return delete this._image,Z;var ee=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,ae=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,ye=document.createElement("canvas"),ve=ye.getContext("2d");if(ye.width=ee,ye.height=ae,ve.drawImage(this._image,0,0,ee,ae),Z[0].context2D=ve,delete this._image,ie.isCanvasTainted(ye))return Z;for(;ee>=2&&ae>=2;){ee=Math.floor(ee/2),ae=Math.floor(ae/2);var be=document.createElement("canvas"),Qe=be.getContext("2d");be.width=ee,be.height=ae,Qe.drawImage(ye,0,0,ee,ae),Z.splice(0,0,{context2D:Qe,width:ee,height:ae}),ye=be,ve=Qe}return Z}})}(OpenSeadragon),function(ie){ie.TileSourceCollection=function(Z,ee,ae,ye){ie.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(ie){ie.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},ie.Button=function(Qe){var Xe=this;ie.EventSource.call(this),ie.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:ie.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:ie.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},Qe),this.element=Qe.element||ie.makeNeutralElement("div"),Qe.element||(this.imgRest=ie.makeTransparentImage(this.srcRest),this.imgGroup=ie.makeTransparentImage(this.srcGroup),this.imgHover=ie.makeTransparentImage(this.srcHover),this.imgDown=ie.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",ie.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",ie.Browser.vendor==ie.BROWSERS.FIREFOX&&ie.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=ie.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new ie.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Je){Je.insideElementPressed?(ve(Xe,ie.ButtonState.DOWN),Xe.raiseEvent("enter",{originalEvent:Je.originalEvent})):Je.buttonDownAny||ve(Xe,ie.ButtonState.HOVER)},focusHandler:function(Je){this.enterHandler(Je),Xe.raiseEvent("focus",{originalEvent:Je.originalEvent})},exitHandler:function(Je){be(Xe,ie.ButtonState.GROUP),Je.insideElementPressed&&Xe.raiseEvent("exit",{originalEvent:Je.originalEvent})},blurHandler:function(Je){this.exitHandler(Je),Xe.raiseEvent("blur",{originalEvent:Je.originalEvent})},pressHandler:function(Je){ve(Xe,ie.ButtonState.DOWN),Xe.raiseEvent("press",{originalEvent:Je.originalEvent})},releaseHandler:function(Je){Je.insideElementPressed&&Je.insideElementReleased?(be(Xe,ie.ButtonState.HOVER),Xe.raiseEvent("release",{originalEvent:Je.originalEvent})):Je.insideElementPressed?be(Xe,ie.ButtonState.GROUP):ve(Xe,ie.ButtonState.HOVER)},clickHandler:function(Je){Je.quick&&Xe.raiseEvent("click",{originalEvent:Je.originalEvent})},keyHandler:function(Je){return Je.keyCode===13?(Xe.raiseEvent("click",{originalEvent:Je.originalEvent}),Xe.raiseEvent("release",{originalEvent:Je.originalEvent}),!1):!0}}),be(this,ie.ButtonState.REST)},ie.extend(ie.Button.prototype,ie.EventSource.prototype,{notifyGroupEnter:function(){ve(this,ie.ButtonState.GROUP)},notifyGroupExit:function(){be(this,ie.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,ie.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,ie.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function Z(Qe){ie.requestAnimationFrame(function(){ee(Qe)})}function ee(Qe){var Xe,Je,tt;Qe.shouldFade&&(Xe=ie.now(),Je=Xe-Qe.fadeBeginTime,tt=1-Je/Qe.fadeLength,tt=Math.min(1,tt),tt=Math.max(0,tt),Qe.imgGroup&&ie.setElementOpacity(Qe.imgGroup,tt,!0),tt>0&&Z(Qe))}function ae(Qe){Qe.shouldFade=!0,Qe.fadeBeginTime=ie.now()+Qe.fadeDelay,window.setTimeout(function(){Z(Qe)},Qe.fadeDelay)}function ye(Qe){Qe.shouldFade=!1,Qe.imgGroup&&ie.setElementOpacity(Qe.imgGroup,1,!0)}function ve(Qe,Xe){Qe.element.disabled||(Xe>=ie.ButtonState.GROUP&&Qe.currentState==ie.ButtonState.REST&&(ye(Qe),Qe.currentState=ie.ButtonState.GROUP),Xe>=ie.ButtonState.HOVER&&Qe.currentState==ie.ButtonState.GROUP&&(Qe.imgHover&&(Qe.imgHover.style.visibility=""),Qe.currentState=ie.ButtonState.HOVER),Xe>=ie.ButtonState.DOWN&&Qe.currentState==ie.ButtonState.HOVER&&(Qe.imgDown&&(Qe.imgDown.style.visibility=""),Qe.currentState=ie.ButtonState.DOWN))}function be(Qe,Xe){Qe.element.disabled||(Xe<=ie.ButtonState.HOVER&&Qe.currentState==ie.ButtonState.DOWN&&(Qe.imgDown&&(Qe.imgDown.style.visibility="hidden"),Qe.currentState=ie.ButtonState.HOVER),Xe<=ie.ButtonState.GROUP&&Qe.currentState==ie.ButtonState.HOVER&&(Qe.imgHover&&(Qe.imgHover.style.visibility="hidden"),Qe.currentState=ie.ButtonState.GROUP),Xe<=ie.ButtonState.REST&&Qe.currentState==ie.ButtonState.GROUP&&(ae(Qe),Qe.currentState=ie.ButtonState.REST))}}(OpenSeadragon),function(ie){ie.ButtonGroup=function(Z){ie.extend(!0,this,{buttons:[],clickTimeThreshold:ie.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:ie.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},Z);var ee=this.buttons.concat([]),ae=this,ye;if(this.element=Z.element||ie.makeNeutralElement("div"),!Z.group)for(this.element.style.display="inline-block",ye=0;ye<ee.length;ye++)this.element.appendChild(ee[ye].element);ie.setElementTouchActionNone(this.element),this.tracker=new ie.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(ve){var be;for(be=0;be<ae.buttons.length;be++)ae.buttons[be].notifyGroupEnter()},exitHandler:function(ve){var be;if(!ve.insideElementPressed)for(be=0;be<ae.buttons.length;be++)ae.buttons[be].notifyGroupExit()}})},ie.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(ie){ie.Rect=function(Z,ee,ae,ye,ve){this.x=typeof Z=="number"?Z:0,this.y=typeof ee=="number"?ee:0,this.width=typeof ae=="number"?ae:0,this.height=typeof ye=="number"?ye:0,this.degrees=typeof ve=="number"?ve:0,this.degrees=ie.positiveModulo(this.degrees,360);var be,Qe;this.degrees>=270?(be=this.getTopRight(),this.x=be.x,this.y=be.y,Qe=this.height,this.height=this.width,this.width=Qe,this.degrees-=270):this.degrees>=180?(be=this.getBottomRight(),this.x=be.x,this.y=be.y,this.degrees-=180):this.degrees>=90&&(be=this.getBottomLeft(),this.x=be.x,this.y=be.y,Qe=this.height,this.height=this.width,this.width=Qe,this.degrees-=90)},ie.Rect.fromSummits=function(Z,ee,ae){var ye=Z.distanceTo(ee),ve=Z.distanceTo(ae),be=ee.minus(Z),Qe=Math.atan(be.y/be.x);return be.x<0?Qe+=Math.PI:be.y<0&&(Qe+=2*Math.PI),new ie.Rect(Z.x,Z.y,ye,ve,Qe/Math.PI*180)},ie.Rect.prototype={clone:function(){return new ie.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new ie.Point(this.x,this.y)},getBottomRight:function(){return new ie.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new ie.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new ie.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new ie.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new ie.Point(this.width,this.height)},equals:function(Z){return Z instanceof ie.Rect&&this.x===Z.x&&this.y===Z.y&&this.width===Z.width&&this.height===Z.height&&this.degrees===Z.degrees},times:function(Z){return new ie.Rect(this.x*Z,this.y*Z,this.width*Z,this.height*Z,this.degrees)},translate:function(Z){return new ie.Rect(this.x+Z.x,this.y+Z.y,this.width,this.height,this.degrees)},union:function(Z){var ee=this.getBoundingBox(),ae=Z.getBoundingBox(),ye=Math.min(ee.x,ae.x),ve=Math.min(ee.y,ae.y),be=Math.max(ee.x+ee.width,ae.x+ae.width),Qe=Math.max(ee.y+ee.height,ae.y+ae.height);return new ie.Rect(ye,ve,be-ye,Qe-ve)},intersection:function(Z){var ee=1e-10,ae=[],ye=this.getTopLeft();Z.containsPoint(ye,ee)&&ae.push(ye);var ve=this.getTopRight();Z.containsPoint(ve,ee)&&ae.push(ve);var be=this.getBottomLeft();Z.containsPoint(be,ee)&&ae.push(be);var Qe=this.getBottomRight();Z.containsPoint(Qe,ee)&&ae.push(Qe);var Xe=Z.getTopLeft();this.containsPoint(Xe,ee)&&ae.push(Xe);var Je=Z.getTopRight();this.containsPoint(Je,ee)&&ae.push(Je);var tt=Z.getBottomLeft();this.containsPoint(tt,ee)&&ae.push(tt);var it=Z.getBottomRight();this.containsPoint(it,ee)&&ae.push(it);for(var st=this._getSegments(),lt=Z._getSegments(),ct=0;ct<st.length;ct++)for(var gt=st[ct],ut=0;ut<lt.length;ut++){var mt=lt[ut],ei=ni(gt[0],gt[1],mt[0],mt[1]);ei&&ae.push(ei)}function ni(pi,gi,_i,bi){var Mi=gi.minus(pi),yi=bi.minus(_i),Ti=-yi.x*Mi.y+Mi.x*yi.y;if(Ti===0)return null;var Ii=(Mi.x*(pi.y-_i.y)-Mi.y*(pi.x-_i.x))/Ti,Ri=(yi.x*(pi.y-_i.y)-yi.y*(pi.x-_i.x))/Ti;return-ee<=Ii&&Ii<=1-ee&&-ee<=Ri&&Ri<=1-ee?new ie.Point(pi.x+Ri*Mi.x,pi.y+Ri*Mi.y):null}if(ae.length===0)return null;for(var ri=ae[0].x,si=ae[0].x,li=ae[0].y,ai=ae[0].y,ci=1;ci<ae.length;ci++){var Ci=ae[ci];Ci.x<ri&&(ri=Ci.x),Ci.x>si&&(si=Ci.x),Ci.y<li&&(li=Ci.y),Ci.y>ai&&(ai=Ci.y)}return new ie.Rect(ri,li,si-ri,ai-li)},_getSegments:function(){var Z=this.getTopLeft(),ee=this.getTopRight(),ae=this.getBottomLeft(),ye=this.getBottomRight();return[[Z,ee],[ee,ye],[ye,ae],[ae,Z]]},rotate:function(Z,ee){if(Z=ie.positiveModulo(Z,360),Z===0)return this.clone();ee=ee||this.getCenter();var ae=this.getTopLeft().rotate(Z,ee),ye=this.getTopRight().rotate(Z,ee),ve=ye.minus(ae);ve=ve.apply(function(Qe){var Xe=1e-15;return Math.abs(Qe)<Xe?0:Qe});var be=Math.atan(ve.y/ve.x);return ve.x<0?be+=Math.PI:ve.y<0&&(be+=2*Math.PI),new ie.Rect(ae.x,ae.y,this.width,this.height,be/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var Z=this.getTopLeft(),ee=this.getTopRight(),ae=this.getBottomLeft(),ye=this.getBottomRight(),ve=Math.min(Z.x,ee.x,ae.x,ye.x),be=Math.max(Z.x,ee.x,ae.x,ye.x),Qe=Math.min(Z.y,ee.y,ae.y,ye.y),Xe=Math.max(Z.y,ee.y,ae.y,ye.y);return new ie.Rect(ve,Qe,be-ve,Xe-Qe)},getIntegerBoundingBox:function(){var Z=this.getBoundingBox(),ee=Math.floor(Z.x),ae=Math.floor(Z.y),ye=Math.ceil(Z.width+Z.x-ee),ve=Math.ceil(Z.height+Z.y-ae);return new ie.Rect(ee,ae,ye,ve)},containsPoint:function(Z,ee){ee=ee||0;var ae=this.getTopLeft(),ye=this.getTopRight(),ve=this.getBottomLeft(),be=ye.minus(ae),Qe=ve.minus(ae);return(Z.x-ae.x)*be.x+(Z.y-ae.y)*be.y>=-ee&&(Z.x-ye.x)*be.x+(Z.y-ye.y)*be.y<=ee&&(Z.x-ae.x)*Qe.x+(Z.y-ae.y)*Qe.y>=-ee&&(Z.x-ve.x)*Qe.x+(Z.y-ve.y)*Qe.y<=ee},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(ie){var Z={};ie.ReferenceStrip=function(Je){var tt=this,it=Je.viewer,st=ie.getElementSize(it.element),lt,ct,gt;for(Je.id||(Je.id="referencestrip-"+ie.now(),this.element=ie.makeNeutralElement("div"),this.element.id=Je.id,this.element.className="referencestrip"),Je=ie.extend(!0,{sizeRatio:ie.DEFAULT_SETTINGS.referenceStripSizeRatio,position:ie.DEFAULT_SETTINGS.referenceStripPosition,scroll:ie.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:ie.DEFAULT_SETTINGS.clickTimeThreshold},Je,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),ie.extend(this,Je),Z[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,ct=this.element.style,ct.marginTop="0px",ct.marginRight="0px",ct.marginBottom="0px",ct.marginLeft="0px",ct.left="0px",ct.bottom="0px",ct.border="0px",ct.background="#000",ct.position="relative",ie.setElementTouchActionNone(this.element),ie.setElementOpacity(this.element,.8),this.viewer=it,this.innerTracker=new ie.MouseTracker({element:this.element,dragHandler:ie.delegate(this,ee),scrollHandler:ie.delegate(this,ae),enterHandler:ie.delegate(this,ve),exitHandler:ie.delegate(this,be),keyDownHandler:ie.delegate(this,Qe),keyHandler:ie.delegate(this,Xe)}),Je.width&&Je.height?(this.element.style.width=Je.width+"px",this.element.style.height=Je.height+"px",it.addControl(this.element,{anchor:ie.ControlAnchor.BOTTOM_LEFT})):Je.scroll=="horizontal"?(this.element.style.width=st.x*Je.sizeRatio*it.tileSources.length+12*it.tileSources.length+"px",this.element.style.height=st.y*Je.sizeRatio+"px",it.addControl(this.element,{anchor:ie.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=st.y*Je.sizeRatio*it.tileSources.length+12*it.tileSources.length+"px",this.element.style.width=st.x*Je.sizeRatio+"px",it.addControl(this.element,{anchor:ie.ControlAnchor.TOP_LEFT})),this.panelWidth=st.x*this.sizeRatio+8,this.panelHeight=st.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},gt=0;gt<it.tileSources.length;gt++)lt=ie.makeNeutralElement("div"),lt.id=this.element.id+"-"+gt,lt.style.width=tt.panelWidth+"px",lt.style.height=tt.panelHeight+"px",lt.style.display="inline",lt.style.float="left",lt.style.cssFloat="left",lt.style.styleFloat="left",lt.style.padding="2px",ie.setElementTouchActionNone(lt),lt.innerTracker=new ie.MouseTracker({element:lt,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(ut){ut.eventSource.dragging=ie.now()},releaseHandler:function(ut){var mt=ut.eventSource,ei=mt.element.id,ni=Number(ei.split("-")[2]),ri=ie.now();ut.insideElementPressed&&ut.insideElementReleased&&mt.dragging&&ri-mt.dragging<mt.clickTimeThreshold&&(mt.dragging=null,it.goToPage(ni))}}),this.element.appendChild(lt),lt.activePanel=!1,this.panels.push(lt);ye(this,this.scroll=="vertical"?st.y:st.x,0),this.setFocus(0)},ie.extend(ie.ReferenceStrip.prototype,ie.EventSource.prototype,ie.Viewer.prototype,{setFocus:function(Je){var tt=this.element.querySelector("#"+this.element.id+"-"+Je),it=ie.getElementSize(this.viewer.canvas),st=Number(this.element.style.width.replace("px","")),lt=Number(this.element.style.height.replace("px","")),ct=-Number(this.element.style.marginLeft.replace("px","")),gt=-Number(this.element.style.marginTop.replace("px","")),ut;this.currentSelected!==tt&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=tt,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(ut=Number(Je)*(this.panelWidth+3),ut>ct+it.x-this.panelWidth?(ut=Math.min(ut,st-it.x),this.element.style.marginLeft=-ut+"px",ye(this,it.x,-ut)):ut<ct&&(ut=Math.max(0,ut-it.x/2),this.element.style.marginLeft=-ut+"px",ye(this,it.x,-ut))):(ut=Number(Je)*(this.panelHeight+3),ut>gt+it.y-this.panelHeight?(ut=Math.min(ut,lt-it.y),this.element.style.marginTop=-ut+"px",ye(this,it.y,-ut)):ut<gt&&(ut=Math.max(0,ut-it.y/2),this.element.style.marginTop=-ut+"px",ye(this,it.y,-ut))),this.currentPage=Je,ve.call(this,{eventSource:this.innerTracker}))},update:function(){return Z[this.id].animating?(ie.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var Je in this.miniViewers)this.miniViewers[Je].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function ee(Je){var tt=Number(this.element.style.marginLeft.replace("px","")),it=Number(this.element.style.marginTop.replace("px","")),st=Number(this.element.style.width.replace("px","")),lt=Number(this.element.style.height.replace("px","")),ct=ie.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-Je.delta.x>0?tt>-(st-ct.x)&&(this.element.style.marginLeft=tt+Je.delta.x*2+"px",ye(this,ct.x,tt+Je.delta.x*2)):-Je.delta.x<0&&tt<0&&(this.element.style.marginLeft=tt+Je.delta.x*2+"px",ye(this,ct.x,tt+Je.delta.x*2)):-Je.delta.y>0?it>-(lt-ct.y)&&(this.element.style.marginTop=it+Je.delta.y*2+"px",ye(this,ct.y,it+Je.delta.y*2)):-Je.delta.y<0&&it<0&&(this.element.style.marginTop=it+Je.delta.y*2+"px",ye(this,ct.y,it+Je.delta.y*2))),!1}function ae(Je){var tt=Number(this.element.style.marginLeft.replace("px","")),it=Number(this.element.style.marginTop.replace("px","")),st=Number(this.element.style.width.replace("px","")),lt=Number(this.element.style.height.replace("px","")),ct=ie.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?Je.scroll>0?tt>-(st-ct.x)&&(this.element.style.marginLeft=tt-Je.scroll*60+"px",ye(this,ct.x,tt-Je.scroll*60)):Je.scroll<0&&tt<0&&(this.element.style.marginLeft=tt-Je.scroll*60+"px",ye(this,ct.x,tt-Je.scroll*60)):Je.scroll<0?it>ct.y-lt&&(this.element.style.marginTop=it+Je.scroll*60+"px",ye(this,ct.y,it+Je.scroll*60)):Je.scroll>0&&it<0&&(this.element.style.marginTop=it+Je.scroll*60+"px",ye(this,ct.y,it+Je.scroll*60))),!1}function ye(Je,tt,it){var st,lt,ct,gt,ut,mt,ei;for(Je.scroll=="horizontal"?st=Je.panelWidth:st=Je.panelHeight,lt=Math.ceil(tt/st)+5,ct=Math.ceil((Math.abs(it)+tt)/st)+1,lt=ct-lt,lt=lt<0?0:lt,mt=lt;mt<ct&&mt<Je.panels.length;mt++)if(ei=Je.panels[mt],!ei.activePanel){var ni,ri=Je.viewer.tileSources[mt];ri.referenceStripThumbnailUrl?ni={type:"image",url:ri.referenceStripThumbnailUrl}:ni=ri,gt=new ie.Viewer({id:ei.id,tileSources:[ni],element:ei,navigatorSizeRatio:Je.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:Je.viewer.loadTilesWithAjax,ajaxHeaders:Je.viewer.ajaxHeaders,useCanvas:Je.useCanvas}),gt.displayRegion=ie.makeNeutralElement("div"),gt.displayRegion.id=ei.id+"-displayregion",gt.displayRegion.className="displayregion",ut=gt.displayRegion.style,ut.position="relative",ut.top="0px",ut.left="0px",ut.fontSize="0px",ut.overflow="hidden",ut.float="left",ut.cssFloat="left",ut.styleFloat="left",ut.zIndex=999999999,ut.cursor="default",ut.width=Je.panelWidth-4+"px",ut.height=Je.panelHeight-4+"px",gt.displayRegion.innerTracker=new ie.MouseTracker({element:gt.displayRegion,startDisabled:!0}),ei.getElementsByTagName("div")[0].appendChild(gt.displayRegion),Je.miniViewers[ei.id]=gt,ei.activePanel=!0}}function ve(Je){var tt=Je.eventSource.element;return this.scroll=="horizontal"?tt.style.marginBottom="0px":tt.style.marginLeft="0px",!1}function be(Je){var tt=Je.eventSource.element;return this.scroll=="horizontal"?tt.style.marginBottom="-"+ie.getElementSize(tt).y/2+"px":tt.style.marginLeft="-"+ie.getElementSize(tt).x/2+"px",!1}function Qe(Je){if(!Je.preventDefaultAction&&!Je.ctrl&&!Je.alt&&!Je.meta)switch(Je.keyCode){case 38:return ae.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return ae.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return ae.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return ae.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function Xe(Je){if(!Je.preventDefaultAction&&!Je.ctrl&&!Je.alt&&!Je.meta)switch(Je.keyCode){case 61:return ae.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return ae.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return ae.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return ae.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return ae.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return ae.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(ie){ie.DisplayRect=function(Z,ee,ae,ye,ve,be){ie.Rect.apply(this,[Z,ee,ae,ye]),this.minLevel=ve,this.maxLevel=be},ie.extend(ie.DisplayRect.prototype,ie.Rect.prototype)}(OpenSeadragon),function(ie){ie.Spring=function(ee){var ae=arguments;typeof ee!="object"&&(ee={initial:ae.length&&typeof ae[0]=="number"?ae[0]:void 0,springStiffness:ae.length>1?ae[1].springStiffness:5,animationTime:ae.length>1?ae[1].animationTime:1.5}),ie.console.assert(typeof ee.springStiffness=="number"&&ee.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),ie.console.assert(typeof ee.animationTime=="number"&&ee.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),ee.exponential&&(this._exponential=!0,delete ee.exponential),ie.extend(!0,this,ee),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:ie.now()},ie.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},ie.Spring.prototype={resetTo:function(ee){ie.console.assert(!this._exponential||ee!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=ee,this.start.time=this.target.time=this.current.time=ie.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(ee){ie.console.assert(!this._exponential||ee!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=ee,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(ee){this.start.value+=ee,this.target.value+=ee,this._exponential&&(ie.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(ee){this._exponential=ee,this._exponential&&(ie.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=ie.now();var ee,ae;this._exponential?(ee=this.start._logValue,ae=this.target._logValue):(ee=this.start.value,ae=this.target.value);var ye=this.current.time>=this.target.time?ae:ee+(ae-ee)*Z(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),ve=this.current.value;return this._exponential?this.current.value=Math.exp(ye):this.current.value=ye,ve!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function Z(ee,ae){return(1-Math.exp(ee*-ae))/(1-Math.exp(-ee))}}(OpenSeadragon),function(ie){function Z(ae){ie.extend(!0,this,{timeout:ie.DEFAULT_SETTINGS.timeout,jobId:null},ae),this.image=null}Z.prototype={errorMsg:null,start:function(){var ae=this,ye=this.abort;this.image=new Image,this.image.onload=function(){ae.finish(!0)},this.image.onabort=this.image.onerror=function(){ae.errorMsg="Image load aborted",ae.finish(!1)},this.jobId=window.setTimeout(function(){ae.errorMsg="Image load exceeded timeout ("+ae.timeout+" ms)",ae.finish(!1)},this.timeout),this.loadWithAjax?(this.request=ie.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(ve){var be;try{be=new window.Blob([ve.response])}catch(tt){var Qe=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(tt.name==="TypeError"&&Qe){var Xe=new Qe;Xe.append(ve.response),be=Xe.getBlob()}}be.size===0&&(ae.errorMsg="Empty image response.",ae.finish(!1));var Je=(window.URL||window.webkitURL).createObjectURL(be);ae.image.src=Je},error:function(ve){ae.errorMsg="Image load aborted - XHR error",ae.finish(!1)}}),this.abort=function(){ae.request.abort(),typeof ye=="function"&&ye()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(ae){this.image.onload=this.image.onerror=this.image.onabort=null,ae||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},ie.ImageLoader=function(ae){ie.extend(!0,this,{jobLimit:ie.DEFAULT_SETTINGS.imageLoaderLimit,timeout:ie.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},ae)},ie.ImageLoader.prototype={addJob:function(ae){var ye=this,ve=function(Xe){ee(ye,Xe,ae.callback)},be={src:ae.src,loadWithAjax:ae.loadWithAjax,ajaxHeaders:ae.loadWithAjax?ae.ajaxHeaders:null,crossOriginPolicy:ae.crossOriginPolicy,ajaxWithCredentials:ae.ajaxWithCredentials,callback:ve,abort:ae.abort,timeout:this.timeout},Qe=new Z(be);!this.jobLimit||this.jobsInProgress<this.jobLimit?(Qe.start(),this.jobsInProgress++):this.jobQueue.push(Qe)},clear:function(){for(var ae=0;ae<this.jobQueue.length;ae++){var ye=this.jobQueue[ae];typeof ye.abort=="function"&&ye.abort()}this.jobQueue=[]}};function ee(ae,ye,ve){var be;ae.jobsInProgress--,(!ae.jobLimit||ae.jobsInProgress<ae.jobLimit)&&ae.jobQueue.length>0&&(be=ae.jobQueue.shift(),be.start(),ae.jobsInProgress++),ve(ye.image,ye.errorMsg,ye.request)}}(OpenSeadragon),function(ie){ie.Tile=function(Z,ee,ae,ye,ve,be,Qe,Xe,Je,tt){this.level=Z,this.x=ee,this.y=ae,this.bounds=ye,this.sourceBounds=tt,this.exists=ve,this.url=be,this.context2D=Qe,this.loadWithAjax=Xe,this.ajaxHeaders=Je,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},ie.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(Z){if(!this.cacheImageRecord){ie.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){ie.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=ie.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=Z&&Z.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",ie.setElementOpacity(this.element,this.opacity)},drawCanvas:function(Z,ee,ae,ye){var ve=this.position.times(ie.pixelDensityRatio),be=this.size.times(ie.pixelDensityRatio),Qe;if(!this.context2D&&!this.cacheImageRecord){ie.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(Qe=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!Qe){ie.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}Z.save(),Z.globalAlpha=this.opacity,typeof ae=="number"&&ae!==1&&(ve=ve.times(ae),be=be.times(ae)),ye instanceof ie.Point&&(ve=ve.plus(ye)),Z.globalAlpha===1&&this._hasTransparencyChannel()&&Z.clearRect(ve.x,ve.y,be.x,be.y),ee({context:Z,tile:this,rendered:Qe});var Xe,Je;this.sourceBounds?(Xe=Math.min(this.sourceBounds.width,Qe.canvas.width),Je=Math.min(this.sourceBounds.height,Qe.canvas.height)):(Xe=Qe.canvas.width,Je=Qe.canvas.height),Z.drawImage(Qe.canvas,0,0,Xe,Je,ve.x,ve.y,be.x,be.y),Z.restore()},getScaleForEdgeSmoothing:function(){var Z;if(this.cacheImageRecord)Z=this.cacheImageRecord.getRenderedContext();else if(this.context2D)Z=this.context2D;else return ie.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return Z.canvas.width/(this.size.x*ie.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(Z,ee,ae){var ye=Math.max(1,Math.ceil((ae.x-ee.x)/2)),ve=Math.max(1,Math.ceil((ae.y-ee.y)/2));return new ie.Point(ye,ve).minus(this.position.times(ie.pixelDensityRatio).times(Z||1).apply(function(be){return be%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(ie){ie.OverlayPlacement=ie.Placement,ie.OverlayRotationMode=ie.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),ie.Overlay=function(Z,ee,ae){var ye;ie.isPlainObject(Z)?ye=Z:ye={element:Z,location:ee,placement:ae},this.element=ye.element,this.style=ye.element.style,this._init(ye)},ie.Overlay.prototype={_init:function(Z){this.location=Z.location,this.placement=Z.placement===void 0?ie.Placement.TOP_LEFT:Z.placement,this.onDraw=Z.onDraw,this.checkResize=Z.checkResize===void 0?!0:Z.checkResize,this.width=Z.width===void 0?null:Z.width,this.height=Z.height===void 0?null:Z.height,this.rotationMode=Z.rotationMode||ie.OverlayRotationMode.EXACT,this.location instanceof ie.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=ie.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new ie.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(Z,ee){var ae=ie.Placement.properties[this.placement];ae&&(ae.isHorizontallyCentered?Z.x-=ee.x/2:ae.isRight&&(Z.x-=ee.x),ae.isVerticallyCentered?Z.y-=ee.y/2:ae.isBottom&&(Z.y-=ee.y))},destroy:function(){var Z=this.element,ee=this.style;Z.parentNode&&(Z.parentNode.removeChild(Z),Z.prevElementParent&&(ee.display="none",document.body.appendChild(Z))),this.onDraw=null,ee.top="",ee.left="",ee.position="",this.width!==null&&(ee.width=""),this.height!==null&&(ee.height="");var ae=ie.getCssPropertyWithVendorPrefix("transformOrigin"),ye=ie.getCssPropertyWithVendorPrefix("transform");ae&&ye&&(ee[ae]="",ee[ye]="")},drawHTML:function(Z,ee){var ae=this.element;ae.parentNode!==Z&&(ae.prevElementParent=ae.parentNode,ae.prevNextSibling=ae.nextSibling,Z.appendChild(ae),this.style.position="absolute",this.size=ie.getElementSize(ae));var ye=this._getOverlayPositionAndSize(ee),ve=ye.position,be=this.size=ye.size,Qe=ye.rotate;if(this.onDraw)this.onDraw(ve,be,this.element);else{var Xe=this.style;Xe.left=ve.x+"px",Xe.top=ve.y+"px",this.width!==null&&(Xe.width=be.x+"px"),this.height!==null&&(Xe.height=be.y+"px");var Je=ie.getCssPropertyWithVendorPrefix("transformOrigin"),tt=ie.getCssPropertyWithVendorPrefix("transform");Je&&tt&&(Qe?(Xe[Je]=this._getTransformOrigin(),Xe[tt]="rotate("+Qe+"deg)"):(Xe[Je]="",Xe[tt]="")),Xe.display!=="none"&&(Xe.display="block")}},_getOverlayPositionAndSize:function(Z){var ee=Z.pixelFromPoint(this.location,!0),ae=this._getSizeInPixels(Z);this.adjust(ee,ae);var ye=0;if(Z.degrees&&this.rotationMode!==ie.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===ie.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var ve=new ie.Rect(ee.x,ee.y,ae.x,ae.y),be=this._getBoundingBox(ve,Z.degrees);ee=be.getTopLeft(),ae=be.getSize()}else ye=Z.degrees;return{position:ee,size:ae,rotate:ye}},_getSizeInPixels:function(Z){var ee=this.size.x,ae=this.size.y;if(this.width!==null||this.height!==null){var ye=Z.deltaPixelsFromPointsNoRotate(new ie.Point(this.width||0,this.height||0),!0);this.width!==null&&(ee=ye.x),this.height!==null&&(ae=ye.y)}if(this.checkResize&&(this.width===null||this.height===null)){var ve=this.size=ie.getElementSize(this.element);this.width===null&&(ee=ve.x),this.height===null&&(ae=ve.y)}return new ie.Point(ee,ae)},_getBoundingBox:function(Z,ee){var ae=this._getPlacementPoint(Z);return Z.rotate(ee,ae).getBoundingBox()},_getPlacementPoint:function(Z){var ee=new ie.Point(Z.x,Z.y),ae=ie.Placement.properties[this.placement];return ae&&(ae.isHorizontallyCentered?ee.x+=Z.width/2:ae.isRight&&(ee.x+=Z.width),ae.isVerticallyCentered?ee.y+=Z.height/2:ae.isBottom&&(ee.y+=Z.height)),ee},_getTransformOrigin:function(){var Z="",ee=ie.Placement.properties[this.placement];return ee&&(ee.isLeft?Z="left":ee.isRight&&(Z="right"),ee.isTop?Z+=" top":ee.isBottom&&(Z+=" bottom")),Z},update:function(Z,ee){var ae=ie.isPlainObject(Z)?Z:{location:Z,placement:ee};this._init({location:ae.location||this.location,placement:ae.placement!==void 0?ae.placement:this.placement,onDraw:ae.onDraw||this.onDraw,checkResize:ae.checkResize||this.checkResize,width:ae.width!==void 0?ae.width:this.width,height:ae.height!==void 0?ae.height:this.height,rotationMode:ae.rotationMode||this.rotationMode})},getBounds:function(Z){ie.console.assert(Z,"A viewport must now be passed to Overlay.getBounds.");var ee=this.width,ae=this.height;if(ee===null||ae===null){var ye=Z.deltaPointsFromPixelsNoRotate(this.size,!0);ee===null&&(ee=ye.x),ae===null&&(ae=ye.y)}var ve=this.location.clone();return this.adjust(ve,new ie.Point(ee,ae)),this._adjustBoundsForRotation(Z,new ie.Rect(ve.x,ve.y,ee,ae))},_adjustBoundsForRotation:function(Z,ee){if(!Z||Z.degrees===0||this.rotationMode===ie.OverlayRotationMode.EXACT)return ee;if(this.rotationMode===ie.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return ee;var ae=this._getOverlayPositionAndSize(Z);return Z.viewerElementToViewportRectangle(new ie.Rect(ae.position.x,ae.position.y,ae.size.x,ae.size.y))}return ee.rotate(-Z.degrees,this._getPlacementPoint(ee))}}}(OpenSeadragon),function(ie){ie.Drawer=function(Z){ie.console.assert(Z.viewer,"[Drawer] options.viewer is required");var ee=arguments;if(ie.isPlainObject(Z)||(Z={source:ee[0],viewport:ee[1],element:ee[2]}),ie.console.assert(Z.viewport,"[Drawer] options.viewport is required"),ie.console.assert(Z.element,"[Drawer] options.element is required"),Z.source&&ie.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=Z.viewer,this.viewport=Z.viewport,this.debugGridColor=typeof Z.debugGridColor=="string"?[Z.debugGridColor]:Z.debugGridColor||ie.DEFAULT_SETTINGS.debugGridColor,Z.opacity&&ie.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=ie.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=ie.getElement(Z.element),this.canvas=ie.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var ae=this._calculateCanvasSize();this.canvas.width=ae.x,this.canvas.height=ae.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",ie.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},ie.Drawer.prototype={addOverlay:function(Z,ee,ae,ye){return ie.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(Z,ee,ae,ye),this},updateOverlay:function(Z,ee,ae){return ie.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(Z,ee,ae),this},removeOverlay:function(Z){return ie.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(Z),this},clearOverlays:function(){return ie.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(Z){var ee=this.viewport.pixelFromPointNoRotate(Z,!0);return new ie.Point(ee.x*ie.pixelDensityRatio,ee.y*ie.pixelDensityRatio)},clipWithPolygons:function(Z,ee){if(this.useCanvas){var ae=this._getContext(ee);ae.beginPath(),Z.forEach(function(ye){ye.forEach(function(ve,be){ae[be===0?"moveTo":"lineTo"](ve.x,ve.y)})}),ae.clip()}},setOpacity:function(Z){ie.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var ee=this.viewer.world,ae=0;ae<ee.getItemCount();ae++)ee.getItemAt(ae).setOpacity(Z);return this},getOpacity:function(){ie.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var Z=this.viewer.world,ee=0,ae=0;ae<Z.getItemCount();ae++){var ye=Z.getItemAt(ae).getOpacity();ye>ee&&(ee=ye)}return ee},needsUpdate:function(){return ie.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return ie.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return ie.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return ie.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var Z=this._calculateCanvasSize();if((this.canvas.width!=Z.x||this.canvas.height!=Z.y)&&(this.canvas.width=Z.x,this.canvas.height=Z.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var ee=this._calculateSketchCanvasSize();this.sketchCanvas.width=ee.x,this.sketchCanvas.height=ee.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(Z,ee){if(this.useCanvas){var ae=this._getContext(Z);if(ee)ae.clearRect(ee.x,ee.y,ee.width,ee.height);else{var ye=ae.canvas;ae.clearRect(0,0,ye.width,ye.height)}}},viewportToDrawerRectangle:function(Z){var ee=this.viewport.pixelFromPointNoRotate(Z.getTopLeft(),!0),ae=this.viewport.deltaPixelsFromPointsNoRotate(Z.getSize(),!0);return new ie.Rect(ee.x*ie.pixelDensityRatio,ee.y*ie.pixelDensityRatio,ae.x*ie.pixelDensityRatio,ae.y*ie.pixelDensityRatio)},drawTile:function(Z,ee,ae,ye,ve){if(ie.console.assert(Z,"[Drawer.drawTile] tile is required"),ie.console.assert(ee,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var be=this._getContext(ae);ye=ye||1,Z.drawCanvas(be,ee,ye,ve)}else Z.drawHTML(this.canvas)},_getContext:function(Z){var ee=this.context;if(Z){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var ae=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=ae.x,this.sketchCanvas.height=ae.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var ye=this;this.viewer.addHandler("rotate",function ve(){if(ye.viewport.getRotation()!==0){ye.viewer.removeHandler("rotate",ve);var be=ye._calculateSketchCanvasSize();ye.sketchCanvas.width=be.x,ye.sketchCanvas.height=be.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}ee=this.sketchContext}return ee},saveContext:function(Z){this.useCanvas&&this._getContext(Z).save()},restoreContext:function(Z){this.useCanvas&&this._getContext(Z).restore()},setClip:function(Z,ee){if(this.useCanvas){var ae=this._getContext(ee);ae.beginPath(),ae.rect(Z.x,Z.y,Z.width,Z.height),ae.clip()}},drawRectangle:function(Z,ee,ae){if(this.useCanvas){var ye=this._getContext(ae);ye.save(),ye.fillStyle=ee,ye.fillRect(Z.x,Z.y,Z.width,Z.height),ye.restore()}},blendSketch:function(Z,ee,ae,ye){var ve=Z;if(ie.isPlainObject(ve)||(ve={opacity:Z,scale:ee,translate:ae,compositeOperation:ye}),!(!this.useCanvas||!this.sketchCanvas)){Z=ve.opacity,ye=ve.compositeOperation;var be=ve.bounds;if(this.context.save(),this.context.globalAlpha=Z,ye&&(this.context.globalCompositeOperation=ye),be)be.x<0&&(be.width+=be.x,be.x=0),be.x+be.width>this.canvas.width&&(be.width=this.canvas.width-be.x),be.y<0&&(be.height+=be.y,be.y=0),be.y+be.height>this.canvas.height&&(be.height=this.canvas.height-be.y),this.context.drawImage(this.sketchCanvas,be.x,be.y,be.width,be.height,be.x,be.y,be.width,be.height);else{ee=ve.scale||1,ae=ve.translate;var Qe=ae instanceof ie.Point?ae:new ie.Point(0,0),Xe=0,Je=0;if(ae){var tt=this.sketchCanvas.width-this.canvas.width,it=this.sketchCanvas.height-this.canvas.height;Xe=Math.round(tt/2),Je=Math.round(it/2)}this.context.drawImage(this.sketchCanvas,Qe.x-Xe*ee,Qe.y-Je*ee,(this.canvas.width+2*Xe)*ee,(this.canvas.height+2*Je)*ee,-Xe,-Je,this.canvas.width+2*Xe,this.canvas.height+2*Je)}this.context.restore()}},drawDebugInfo:function(Z,ee,ae,ye){if(this.useCanvas){var ve=this.viewer.world.getIndexOfItem(ye)%this.debugGridColor.length,be=this.context;be.save(),be.lineWidth=2*ie.pixelDensityRatio,be.font="small-caps bold "+13*ie.pixelDensityRatio+"px arial",be.strokeStyle=this.debugGridColor[ve],be.fillStyle=this.debugGridColor[ve],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),ye.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:ye.getRotation(!0),point:ye.viewport.pixelFromPointNoRotate(ye._getRotationPoint(!0),!0)}),ye.viewport.degrees===0&&ye.getRotation(!0)%360===0&&ye._drawer.viewer.viewport.getFlip()&&ye._drawer._flip(),be.strokeRect(Z.position.x*ie.pixelDensityRatio,Z.position.y*ie.pixelDensityRatio,Z.size.x*ie.pixelDensityRatio,Z.size.y*ie.pixelDensityRatio);var Qe=(Z.position.x+Z.size.x/2)*ie.pixelDensityRatio,Xe=(Z.position.y+Z.size.y/2)*ie.pixelDensityRatio;be.translate(Qe,Xe),be.rotate(Math.PI/180*-this.viewport.degrees),be.translate(-Qe,-Xe),Z.x===0&&Z.y===0&&(be.fillText("Zoom: "+this.viewport.getZoom(),Z.position.x*ie.pixelDensityRatio,(Z.position.y-30)*ie.pixelDensityRatio),be.fillText("Pan: "+this.viewport.getBounds().toString(),Z.position.x*ie.pixelDensityRatio,(Z.position.y-20)*ie.pixelDensityRatio)),be.fillText("Level: "+Z.level,(Z.position.x+10)*ie.pixelDensityRatio,(Z.position.y+20)*ie.pixelDensityRatio),be.fillText("Column: "+Z.x,(Z.position.x+10)*ie.pixelDensityRatio,(Z.position.y+30)*ie.pixelDensityRatio),be.fillText("Row: "+Z.y,(Z.position.x+10)*ie.pixelDensityRatio,(Z.position.y+40)*ie.pixelDensityRatio),be.fillText("Order: "+ae+" of "+ee,(Z.position.x+10)*ie.pixelDensityRatio,(Z.position.y+50)*ie.pixelDensityRatio),be.fillText("Size: "+Z.size.toString(),(Z.position.x+10)*ie.pixelDensityRatio,(Z.position.y+60)*ie.pixelDensityRatio),be.fillText("Position: "+Z.position.toString(),(Z.position.x+10)*ie.pixelDensityRatio,(Z.position.y+70)*ie.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),ye.getRotation(!0)%360!==0&&this._restoreRotationChanges(),ye.viewport.degrees===0&&ye.getRotation(!0)%360===0&&ye._drawer.viewer.viewport.getFlip()&&ye._drawer._flip(),be.restore()}},debugRect:function(Z){if(this.useCanvas){var ee=this.context;ee.save(),ee.lineWidth=2*ie.pixelDensityRatio,ee.strokeStyle=this.debugGridColor[0],ee.fillStyle=this.debugGridColor[0],ee.strokeRect(Z.x*ie.pixelDensityRatio,Z.y*ie.pixelDensityRatio,Z.width*ie.pixelDensityRatio,Z.height*ie.pixelDensityRatio),ee.restore()}},setImageSmoothingEnabled:function(Z){this.useCanvas&&(this._imageSmoothingEnabled=Z,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(Z){Z.msImageSmoothingEnabled=this._imageSmoothingEnabled,Z.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(Z){var ee=this._getContext(Z).canvas;return new ie.Point(ee.width,ee.height)},getCanvasCenter:function(){return new ie.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(Z){var ee=Z.point?Z.point.times(ie.pixelDensityRatio):this.getCanvasCenter(),ae=this._getContext(Z.useSketch);ae.save(),ae.translate(ee.x,ee.y),this.viewer.viewport.flipped?(ae.rotate(Math.PI/180*-Z.degrees),ae.scale(-1,1)):ae.rotate(Math.PI/180*Z.degrees),ae.translate(-ee.x,-ee.y)},_flip:function(Z){Z=Z||{};var ee=Z.point?Z.point.times(ie.pixelDensityRatio):this.getCanvasCenter(),ae=this._getContext(Z.useSketch);ae.translate(ee.x,0),ae.scale(-1,1),ae.translate(-ee.x,0)},_restoreRotationChanges:function(Z){var ee=this._getContext(Z);ee.restore()},_calculateCanvasSize:function(){var Z=ie.pixelDensityRatio,ee=this.viewport.getContainerSize();return{x:Math.round(ee.x*Z),y:Math.round(ee.y*Z)}},_calculateSketchCanvasSize:function(){var Z=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return Z;var ee=Math.ceil(Math.sqrt(Z.x*Z.x+Z.y*Z.y));return{x:ee,y:ee}}}}(OpenSeadragon),function(ie){ie.Viewport=function(Z){var ee=arguments;ee.length&&ee[0]instanceof ie.Point&&(Z={containerSize:ee[0],contentSize:ee[1],config:ee[2]}),Z.config&&(ie.extend(!0,Z,Z.config),delete Z.config),this._margins=ie.extend({left:0,top:0,right:0,bottom:0},Z.margins||{}),delete Z.margins,ie.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:ie.DEFAULT_SETTINGS.springStiffness,animationTime:ie.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:ie.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:ie.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:ie.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:ie.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:ie.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:ie.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:ie.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:ie.DEFAULT_SETTINGS.maxZoomLevel,degrees:ie.DEFAULT_SETTINGS.degrees,flipped:ie.DEFAULT_SETTINGS.flipped,homeFillsViewer:ie.DEFAULT_SETTINGS.homeFillsViewer},Z),this._updateContainerInnerSize(),this.centerSpringX=new ie.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new ie.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new ie.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new ie.Rect(0,0,1,1),1),this.goHome(!0),this.update()},ie.Viewport.prototype={resetContentSize:function(Z){return ie.console.assert(Z,"[Viewport.resetContentSize] contentSize is required"),ie.console.assert(Z instanceof ie.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),ie.console.assert(Z.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),ie.console.assert(Z.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new ie.Rect(0,0,1,Z.y/Z.x),Z.x),this},setHomeBounds:function(Z,ee){ie.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(Z,ee)},_setContentBounds:function(Z,ee){ie.console.assert(Z,"[Viewport._setContentBounds] bounds is required"),ie.console.assert(Z instanceof ie.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),ie.console.assert(Z.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),ie.console.assert(Z.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=Z.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(ee),this._contentBounds=Z.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(ee),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:ee,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var Z=this._contentAspectRatio/this.getAspectRatio(),ee;return this.homeFillsViewer?ee=Z>=1?Z:1:ee=Z>=1?1:Z,ee/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var Z=this._contentBounds.getCenter(),ee=1/this.getHomeZoom(),ae=ee/this.getAspectRatio();return new ie.Rect(Z.x-ee/2,Z.y-ae/2,ee,ae)},goHome:function(Z){return this.viewer&&this.viewer.raiseEvent("home",{immediately:Z}),this.fitBounds(this.getHomeBounds(),Z)},getMinZoom:function(){var Z=this.getHomeZoom(),ee=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*Z;return ee},getMaxZoom:function(){var Z=this.maxZoomLevel;return Z||(Z=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,Z/=this._contentBounds.width),Math.max(Z,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new ie.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return ie.extend({},this._margins)},setMargins:function(Z){ie.console.assert(ie.type(Z)==="object","[Viewport.setMargins] margins must be an object"),this._margins=ie.extend({left:0,top:0,right:0,bottom:0},Z),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(Z){return this.getBoundsNoRotate(Z).rotate(-this.getRotation())},getBoundsNoRotate:function(Z){var ee=this.getCenter(Z),ae=1/this.getZoom(Z),ye=ae/this.getAspectRatio();return new ie.Rect(ee.x-ae/2,ee.y-ye/2,ae,ye)},getBoundsWithMargins:function(Z){return this.getBoundsNoRotateWithMargins(Z).rotate(-this.getRotation(),this.getCenter(Z))},getBoundsNoRotateWithMargins:function(Z){var ee=this.getBoundsNoRotate(Z),ae=this._containerInnerSize.x*this.getZoom(Z);return ee.x-=this._margins.left/ae,ee.y-=this._margins.top/ae,ee.width+=(this._margins.left+this._margins.right)/ae,ee.height+=(this._margins.top+this._margins.bottom)/ae,ee},getCenter:function(Z){var ee=new ie.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),ae=new ie.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),ye,ve,be,Qe,Xe,Je,tt,it;return Z?ee:this.zoomPoint?(ye=this.pixelFromPoint(this.zoomPoint,!0),ve=this.getZoom(),be=1/ve,Qe=be/this.getAspectRatio(),Xe=new ie.Rect(ee.x-be/2,ee.y-Qe/2,be,Qe),Je=this._pixelFromPoint(this.zoomPoint,Xe),tt=Je.minus(ye),it=tt.divide(this._containerInnerSize.x*ve),ae.plus(it)):ae},getZoom:function(Z){return Z?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(Z){return Math.max(Math.min(Z,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(Z){var ee=new ie.Rect(Z.x,Z.y,Z.width,Z.height);if(!this.wrapHorizontal){var ae=this.visibilityRatio*ee.width,ye=ee.x+ee.width,ve=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,be=this._contentBoundsNoRotate.x-ye+ae,Qe=ve-ee.x-ae;ae>this._contentBoundsNoRotate.width?ee.x+=(be+Qe)/2:Qe<0?ee.x+=Qe:be>0&&(ee.x+=be)}if(!this.wrapVertical){var Xe=this.visibilityRatio*ee.height,Je=ee.y+ee.height,tt=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,it=this._contentBoundsNoRotate.y-Je+Xe,st=tt-ee.y-Xe;Xe>this._contentBoundsNoRotate.height?ee.y+=(it+st)/2:st<0?ee.y+=st:it>0&&(ee.y+=it)}return ee},_raiseConstraintsEvent:function(Z){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:Z})},applyConstraints:function(Z){var ee=this.getZoom(),ae=this._applyZoomConstraints(ee);ee!==ae&&this.zoomTo(ae,this.zoomPoint,Z);var ye=this.getBoundsNoRotate(),ve=this._applyBoundaryConstraints(ye);return this._raiseConstraintsEvent(Z),(ye.x!==ve.x||ye.y!==ve.y||Z)&&this.fitBounds(ve.rotate(-this.getRotation()),Z),this},ensureVisible:function(Z){return this.applyConstraints(Z)},_fitBounds:function(Z,ee){ee=ee||{};var ae=ee.immediately||!1,ye=ee.constraints||!1,ve=this.getAspectRatio(),be=Z.getCenter(),Qe=new ie.Rect(Z.x,Z.y,Z.width,Z.height,Z.degrees+this.getRotation()).getBoundingBox();Qe.getAspectRatio()>=ve?Qe.height=Qe.width/ve:Qe.width=Qe.height*ve,Qe.x=be.x-Qe.width/2,Qe.y=be.y-Qe.height/2;var Xe=1/Qe.width;if(ye){var Je=Qe.getAspectRatio(),tt=this._applyZoomConstraints(Xe);Xe!==tt&&(Xe=tt,Qe.width=1/Xe,Qe.x=be.x-Qe.width/2,Qe.height=Qe.width/Je,Qe.y=be.y-Qe.height/2),Qe=this._applyBoundaryConstraints(Qe),be=Qe.getCenter(),this._raiseConstraintsEvent(ae)}if(ae)return this.panTo(be,!0),this.zoomTo(Xe,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var it=this.getBounds(),st=this.getZoom();if(st===0||Math.abs(Xe/st-1)<1e-8)return this.zoomTo(Xe,!0),this.panTo(be,ae);Qe=Qe.rotate(-this.getRotation());var lt=Qe.getTopLeft().times(Xe).minus(it.getTopLeft().times(st)).divide(Xe-st);return this.zoomTo(Xe,lt,ae)},fitBounds:function(Z,ee){return this._fitBounds(Z,{immediately:ee,constraints:!1})},fitBoundsWithConstraints:function(Z,ee){return this._fitBounds(Z,{immediately:ee,constraints:!0})},fitVertically:function(Z){var ee=new ie.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(ee,Z)},fitHorizontally:function(Z){var ee=new ie.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(ee,Z)},getConstrainedBounds:function(Z){var ee,ae;return ee=this.getBounds(Z),ae=this._applyBoundaryConstraints(ee),ae},panBy:function(Z,ee){var ae=new ie.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(ae.plus(Z),ee)},panTo:function(Z,ee){return ee?(this.centerSpringX.resetTo(Z.x),this.centerSpringY.resetTo(Z.y)):(this.centerSpringX.springTo(Z.x),this.centerSpringY.springTo(Z.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:Z,immediately:ee}),this},zoomBy:function(Z,ee,ae){return this.zoomTo(this.zoomSpring.target.value*Z,ee,ae)},zoomTo:function(Z,ee,ae){var ye=this;return this.zoomPoint=ee instanceof ie.Point&&!isNaN(ee.x)&&!isNaN(ee.y)?ee:null,ae?this._adjustCenterSpringsForZoomPoint(function(){ye.zoomSpring.resetTo(Z)}):this.zoomSpring.springTo(Z),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:Z,refPoint:ee,immediately:ae}),this},setRotation:function(Z){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=ie.positiveModulo(Z,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:Z}),this)},getRotation:function(){return this.degrees},resize:function(Z,ee){var ae=this.getBoundsNoRotate(),ye=ae,ve;return this.containerSize.x=Z.x,this.containerSize.y=Z.y,this._updateContainerInnerSize(),ee&&(ve=Z.x/this.containerSize.x,ye.width=ae.width*ve,ye.height=ye.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:Z,maintain:ee}),this.fitBounds(ye,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new ie.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var Z=this;this._adjustCenterSpringsForZoomPoint(function(){Z.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var ee=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,ee},_adjustCenterSpringsForZoomPoint:function(Z){if(this.zoomPoint){var ee=this.pixelFromPoint(this.zoomPoint,!0);Z();var ae=this.pixelFromPoint(this.zoomPoint,!0),ye=ae.minus(ee),ve=this.deltaPointsFromPixels(ye,!0);this.centerSpringX.shiftBy(ve.x),this.centerSpringY.shiftBy(ve.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else Z()},deltaPixelsFromPointsNoRotate:function(Z,ee){return Z.times(this._containerInnerSize.x*this.getZoom(ee))},deltaPixelsFromPoints:function(Z,ee){return this.deltaPixelsFromPointsNoRotate(Z.rotate(this.getRotation()),ee)},deltaPointsFromPixelsNoRotate:function(Z,ee){return Z.divide(this._containerInnerSize.x*this.getZoom(ee))},deltaPointsFromPixels:function(Z,ee){return this.deltaPointsFromPixelsNoRotate(Z,ee).rotate(-this.getRotation())},pixelFromPointNoRotate:function(Z,ee){return this._pixelFromPointNoRotate(Z,this.getBoundsNoRotate(ee))},pixelFromPoint:function(Z,ee){return this._pixelFromPoint(Z,this.getBoundsNoRotate(ee))},_pixelFromPointNoRotate:function(Z,ee){return Z.minus(ee.getTopLeft()).times(this._containerInnerSize.x/ee.width).plus(new ie.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(Z,ee){return this._pixelFromPointNoRotate(Z.rotate(this.getRotation(),this.getCenter(!0)),ee)},pointFromPixelNoRotate:function(Z,ee){var ae=this.getBoundsNoRotate(ee);return Z.minus(new ie.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/ae.width).plus(ae.getTopLeft())},pointFromPixel:function(Z,ee){return this.pointFromPixelNoRotate(Z,ee).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(Z,ee){var ae=this._contentBoundsNoRotate.width;return new ie.Point(Z*this._contentSizeNoRotate.x/ae,ee*this._contentSizeNoRotate.x/ae)},viewportToImageCoordinates:function(Z,ee){if(Z instanceof ie.Point)return this.viewportToImageCoordinates(Z.x,Z.y);if(this.viewer){var ae=this.viewer.world.getItemCount();if(ae>1)ie.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(ae===1){var ye=this.viewer.world.getItemAt(0);return ye.viewportToImageCoordinates(Z,ee,!0)}}return this._viewportToImageDelta(Z-this._contentBoundsNoRotate.x,ee-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(Z,ee){var ae=this._contentBoundsNoRotate.width;return new ie.Point(Z/this._contentSizeNoRotate.x*ae,ee/this._contentSizeNoRotate.x*ae)},imageToViewportCoordinates:function(Z,ee){if(Z instanceof ie.Point)return this.imageToViewportCoordinates(Z.x,Z.y);if(this.viewer){var ae=this.viewer.world.getItemCount();if(ae>1)ie.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(ae===1){var ye=this.viewer.world.getItemAt(0);return ye.imageToViewportCoordinates(Z,ee,!0)}}var ve=this._imageToViewportDelta(Z,ee);return ve.x+=this._contentBoundsNoRotate.x,ve.y+=this._contentBoundsNoRotate.y,ve},imageToViewportRectangle:function(Z,ee,ae,ye){var ve=Z;if(ve instanceof ie.Rect||(ve=new ie.Rect(Z,ee,ae,ye)),this.viewer){var be=this.viewer.world.getItemCount();if(be>1)ie.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(be===1){var Qe=this.viewer.world.getItemAt(0);return Qe.imageToViewportRectangle(Z,ee,ae,ye,!0)}}var Xe=this.imageToViewportCoordinates(ve.x,ve.y),Je=this._imageToViewportDelta(ve.width,ve.height);return new ie.Rect(Xe.x,Xe.y,Je.x,Je.y,ve.degrees)},viewportToImageRectangle:function(Z,ee,ae,ye){var ve=Z;if(ve instanceof ie.Rect||(ve=new ie.Rect(Z,ee,ae,ye)),this.viewer){var be=this.viewer.world.getItemCount();if(be>1)ie.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(be===1){var Qe=this.viewer.world.getItemAt(0);return Qe.viewportToImageRectangle(Z,ee,ae,ye,!0)}}var Xe=this.viewportToImageCoordinates(ve.x,ve.y),Je=this._viewportToImageDelta(ve.width,ve.height);return new ie.Rect(Xe.x,Xe.y,Je.x,Je.y,ve.degrees)},viewerElementToImageCoordinates:function(Z){var ee=this.pointFromPixel(Z,!0);return this.viewportToImageCoordinates(ee)},imageToViewerElementCoordinates:function(Z){var ee=this.imageToViewportCoordinates(Z);return this.pixelFromPoint(ee,!0)},windowToImageCoordinates:function(Z){ie.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var ee=Z.minus(ie.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(ee)},imageToWindowCoordinates:function(Z){ie.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var ee=this.imageToViewerElementCoordinates(Z);return ee.plus(ie.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(Z){return this.pointFromPixel(Z,!0)},viewportToViewerElementCoordinates:function(Z){return this.pixelFromPoint(Z,!0)},viewerElementToViewportRectangle:function(Z){return ie.Rect.fromSummits(this.pointFromPixel(Z.getTopLeft(),!0),this.pointFromPixel(Z.getTopRight(),!0),this.pointFromPixel(Z.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(Z){return ie.Rect.fromSummits(this.pixelFromPoint(Z.getTopLeft(),!0),this.pixelFromPoint(Z.getTopRight(),!0),this.pixelFromPoint(Z.getBottomLeft(),!0))},windowToViewportCoordinates:function(Z){ie.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var ee=Z.minus(ie.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(ee)},viewportToWindowCoordinates:function(Z){ie.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var ee=this.viewportToViewerElementCoordinates(Z);return ee.plus(ie.getElementPosition(this.viewer.element))},viewportToImageZoom:function(Z){if(this.viewer){var ee=this.viewer.world.getItemCount();if(ee>1)ie.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(ee===1){var ae=this.viewer.world.getItemAt(0);return ae.viewportToImageZoom(Z)}}var ye=this._contentSizeNoRotate.x,ve=this._containerInnerSize.x,be=this._contentBoundsNoRotate.width,Qe=ve/ye*be;return Z*Qe},imageToViewportZoom:function(Z){if(this.viewer){var ee=this.viewer.world.getItemCount();if(ee>1)ie.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(ee===1){var ae=this.viewer.world.getItemAt(0);return ae.imageToViewportZoom(Z)}}var ye=this._contentSizeNoRotate.x,ve=this._containerInnerSize.x,be=this._contentBoundsNoRotate.width,Qe=ye/ve/be;return Z*Qe},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(Z){return this.flipped===Z?this:(this.flipped=Z,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:Z}),this)}}}(OpenSeadragon),function(ie){ie.TiledImage=function(ut){var mt=this;ie.console.assert(ut.tileCache,"[TiledImage] options.tileCache is required"),ie.console.assert(ut.drawer,"[TiledImage] options.drawer is required"),ie.console.assert(ut.viewer,"[TiledImage] options.viewer is required"),ie.console.assert(ut.imageLoader,"[TiledImage] options.imageLoader is required"),ie.console.assert(ut.source,"[TiledImage] options.source is required"),ie.console.assert(!ut.clip||ut.clip instanceof ie.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),ie.EventSource.call(this),this._tileCache=ut.tileCache,delete ut.tileCache,this._drawer=ut.drawer,delete ut.drawer,this._imageLoader=ut.imageLoader,delete ut.imageLoader,ut.clip instanceof ie.Rect&&(this._clip=ut.clip.clone()),delete ut.clip;var ei=ut.x||0;delete ut.x;var ni=ut.y||0;delete ut.y,this.normHeight=ut.source.dimensions.y/ut.source.dimensions.x,this.contentAspectX=ut.source.dimensions.x/ut.source.dimensions.y;var ri=1;ut.width?(ri=ut.width,delete ut.width,ut.height&&(ie.console.error("specifying both width and height to a tiledImage is not supported"),delete ut.height)):ut.height&&(ri=ut.height/this.normHeight,delete ut.height);var si=ut.fitBounds;delete ut.fitBounds;var li=ut.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete ut.fitBoundsPlacement;var ai=ut.degrees||0;delete ut.degrees,ie.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:ie.DEFAULT_SETTINGS.springStiffness,animationTime:ie.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:ie.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:ie.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:ie.DEFAULT_SETTINGS.wrapVertical,immediateRender:ie.DEFAULT_SETTINGS.immediateRender,blendTime:ie.DEFAULT_SETTINGS.blendTime,alwaysBlend:ie.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:ie.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:ie.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:ie.DEFAULT_SETTINGS.iOSDevice,debugMode:ie.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:ie.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:ie.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:ie.DEFAULT_SETTINGS.placeholderFillStyle,opacity:ie.DEFAULT_SETTINGS.opacity,preload:ie.DEFAULT_SETTINGS.preload,compositeOperation:ie.DEFAULT_SETTINGS.compositeOperation},ut),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new ie.Spring({initial:ei,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new ie.Spring({initial:ni,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new ie.Spring({initial:ri,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new ie.Spring({initial:ai,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),si&&this.fitBounds(si,li,!0),this._drawingHandler=function(ci){mt.viewer.raiseEvent("tile-drawing",ie.extend({tiledImage:mt},ci))}},ie.extend(ie.TiledImage.prototype,ie.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(ut){ut!==this._fullyLoaded&&(this._fullyLoaded=ut,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=ie.now(),this._needsDraw=!0},update:function(){var ut=this._xSpring.update(),mt=this._ySpring.update(),ei=this._scaleSpring.update(),ni=this._degreesSpring.update();return ut||mt||ei||ni?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(ut){return this.getBoundsNoRotate(ut).rotate(this.getRotation(ut),this._getRotationPoint(ut))},getBoundsNoRotate:function(ut){return ut?new ie.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new ie.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return ie.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(ut){var mt=this.getBoundsNoRotate(ut);if(this._clip){var ei=ut?this._worldWidthCurrent:this._worldWidthTarget,ni=ei/this.source.dimensions.x,ri=this._clip.times(ni);mt=new ie.Rect(mt.x+ri.x,mt.y+ri.y,ri.width,ri.height)}return mt.rotate(this.getRotation(ut),this._getRotationPoint(ut))},getContentSize:function(){return new ie.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(ut,mt,ei){var ni=ei?this._scaleSpring.current.value:this._scaleSpring.target.value;return new ie.Point(ut*(this.source.dimensions.x/ni),mt*(this.source.dimensions.y*this.contentAspectX/ni))},viewportToImageCoordinates:function(ut,mt,ei){var ni;return ut instanceof ie.Point?(ei=mt,ni=ut):ni=new ie.Point(ut,mt),ni=ni.rotate(-this.getRotation(ei),this._getRotationPoint(ei)),ei?this._viewportToImageDelta(ni.x-this._xSpring.current.value,ni.y-this._ySpring.current.value):this._viewportToImageDelta(ni.x-this._xSpring.target.value,ni.y-this._ySpring.target.value)},_imageToViewportDelta:function(ut,mt,ei){var ni=ei?this._scaleSpring.current.value:this._scaleSpring.target.value;return new ie.Point(ut/this.source.dimensions.x*ni,mt/this.source.dimensions.y/this.contentAspectX*ni)},imageToViewportCoordinates:function(ut,mt,ei){ut instanceof ie.Point&&(ei=mt,mt=ut.y,ut=ut.x);var ni=this._imageToViewportDelta(ut,mt);return ei?(ni.x+=this._xSpring.current.value,ni.y+=this._ySpring.current.value):(ni.x+=this._xSpring.target.value,ni.y+=this._ySpring.target.value),ni.rotate(this.getRotation(ei),this._getRotationPoint(ei))},imageToViewportRectangle:function(ut,mt,ei,ni,ri){var si=ut;si instanceof ie.Rect?ri=mt:si=new ie.Rect(ut,mt,ei,ni);var li=this.imageToViewportCoordinates(si.getTopLeft(),ri),ai=this._imageToViewportDelta(si.width,si.height,ri);return new ie.Rect(li.x,li.y,ai.x,ai.y,si.degrees+this.getRotation(ri))},viewportToImageRectangle:function(ut,mt,ei,ni,ri){var si=ut;ut instanceof ie.Rect?ri=mt:si=new ie.Rect(ut,mt,ei,ni);var li=this.viewportToImageCoordinates(si.getTopLeft(),ri),ai=this._viewportToImageDelta(si.width,si.height,ri);return new ie.Rect(li.x,li.y,ai.x,ai.y,si.degrees-this.getRotation(ri))},viewerElementToImageCoordinates:function(ut){var mt=this.viewport.pointFromPixel(ut,!0);return this.viewportToImageCoordinates(mt)},imageToViewerElementCoordinates:function(ut){var mt=this.imageToViewportCoordinates(ut);return this.viewport.pixelFromPoint(mt,!0)},windowToImageCoordinates:function(ut){var mt=ut.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(mt)},imageToWindowCoordinates:function(ut){var mt=this.imageToViewerElementCoordinates(ut);return mt.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(ut){var mt=this._scaleSpring.current.value;return ut=ut.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new ie.Rect((ut.x-this._xSpring.current.value)/mt,(ut.y-this._ySpring.current.value)/mt,ut.width/mt,ut.height/mt,ut.degrees)},viewportToImageZoom:function(ut){var mt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return mt*ut},imageToViewportZoom:function(ut){var mt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return ut/mt},setPosition:function(ut,mt){var ei=this._xSpring.target.value===ut.x&&this._ySpring.target.value===ut.y;if(mt){if(ei&&this._xSpring.current.value===ut.x&&this._ySpring.current.value===ut.y)return;this._xSpring.resetTo(ut.x),this._ySpring.resetTo(ut.y),this._needsDraw=!0}else{if(ei)return;this._xSpring.springTo(ut.x),this._ySpring.springTo(ut.y),this._needsDraw=!0}ei||this._raiseBoundsChange()},setWidth:function(ut,mt){this._setScale(ut,mt)},setHeight:function(ut,mt){this._setScale(ut/this.normHeight,mt)},setCroppingPolygons:function(ut){var mt=function(ni){return ni instanceof ie.Point||typeof ni.x=="number"&&typeof ni.y=="number"},ei=function(ni){return ni.map(function(ri){try{if(mt(ri))return{x:ri.x,y:ri.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!ie.isArray(ut))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=ut.map(function(ni){return ei(ni)})}catch(ni){ie.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),ie.console.error(ni),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(ut,mt,ei){mt=mt||ie.Placement.CENTER;var ni=ie.Placement.properties[mt],ri=this.contentAspectX,si=0,li=0,ai=1,ci=1;if(this._clip&&(ri=this._clip.getAspectRatio(),ai=this._clip.width/this.source.dimensions.x,ci=this._clip.height/this.source.dimensions.y,ut.getAspectRatio()>ri?(si=this._clip.x/this._clip.height*ut.height,li=this._clip.y/this._clip.height*ut.height):(si=this._clip.x/this._clip.width*ut.width,li=this._clip.y/this._clip.width*ut.width)),ut.getAspectRatio()>ri){var Ci=ut.height/ci,pi=0;ni.isHorizontallyCentered?pi=(ut.width-ut.height*ri)/2:ni.isRight&&(pi=ut.width-ut.height*ri),this.setPosition(new ie.Point(ut.x-si+pi,ut.y-li),ei),this.setHeight(Ci,ei)}else{var gi=ut.width/ai,_i=0;ni.isVerticallyCentered?_i=(ut.height-ut.width/ri)/2:ni.isBottom&&(_i=ut.height-ut.width/ri),this.setPosition(new ie.Point(ut.x-si,ut.y-li+_i),ei),this.setWidth(gi,ei)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(ut){ie.console.assert(!ut||ut instanceof ie.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),ut instanceof ie.Rect?this._clip=ut.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(ut){ut!==this.opacity&&(this.opacity=ut,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(ut){this._preload=!!ut,this._needsDraw=!0},getRotation:function(ut){return ut?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(ut,mt){this._degreesSpring.target.value===ut&&this._degreesSpring.isAtTargetValue()||(mt?this._degreesSpring.resetTo(ut):this._degreesSpring.springTo(ut),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(ut){return this.getBoundsNoRotate(ut).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(ut){ut!==this.compositeOperation&&(this.compositeOperation=ut,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(ut,mt){var ei=this._scaleSpring.target.value===ut;if(mt){if(ei&&this._scaleSpring.current.value===ut)return;this._scaleSpring.resetTo(ut),this._updateForScale(),this._needsDraw=!0}else{if(ei)return;this._scaleSpring.springTo(ut),this._updateForScale(),this._needsDraw=!0}ei||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var ut=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),mt=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,ei=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(mt/this.minPixelRatio)/Math.log(2))));return ei=Math.max(ei,this.source.minLevel||0),ut=Math.min(ut,ei),{lowestLevel:ut,highestLevel:ei}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var ut=this.lastDrawn.pop();ut.beingDrawn=!1}var mt=this.viewport,ei=this._viewportToTiledImageRectangle(mt.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var ni=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(ei=ei.intersection(ni),ei===null)return}for(var ri=this._getLevelsInterval(),si=ri.lowestLevel,li=ri.highestLevel,ai=null,ci=!1,Ci=ie.now(),pi=li;pi>=si;pi--){var gi=!1,_i=mt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(pi),!0).x*this._scaleSpring.current.value;if(pi===si||!ci&&_i>=this.minPixelRatio)gi=!0,ci=!0;else if(!ci)continue;var bi=mt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(pi),!1).x*this._scaleSpring.current.value,Mi=mt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,yi=this.immediateRender?1:Mi,Ti=Math.min(1,(_i-.5)/.5),Ii=yi/Math.abs(yi-bi);if(ai=Z(this,ci,gi,pi,Ti,Ii,ei,Ci,ai),Je(this.coverage,pi))break}ct(this,this.lastDrawn),ai&&!ai.context2D?(ye(this,ai,Ci),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(ut,mt,ei){var ni,ri;this.wrapHorizontal?(ni=ie.positiveModulo(mt.x,1),ri=ie.positiveModulo(ei.x,1)):(ni=Math.max(0,mt.x),ri=Math.min(1,ei.x));var si,li,ai=1/this.source.aspectRatio;this.wrapVertical?(si=ie.positiveModulo(mt.y,ai),li=ie.positiveModulo(ei.y,ai)):(si=Math.max(0,mt.y),li=Math.min(ai,ei.y));var ci=this.source.getTileAtPoint(ut,new ie.Point(ni,si)),Ci=this.source.getTileAtPoint(ut,new ie.Point(ri,li)),pi=this.source.getNumTiles(ut);return this.wrapHorizontal&&(ci.x+=pi.x*Math.floor(mt.x),Ci.x+=pi.x*Math.floor(ei.x)),this.wrapVertical&&(ci.y+=pi.y*Math.floor(mt.y/ai),Ci.y+=pi.y*Math.floor(ei.y/ai)),{topLeft:ci,bottomRight:Ci}}});function Z(ut,mt,ei,ni,ri,si,li,ai,ci){var Ci=li.getBoundingBox().getTopLeft(),pi=li.getBoundingBox().getBottomRight();ut.viewer&&ut.viewer.raiseEvent("update-level",{tiledImage:ut,havedrawn:mt,level:ni,opacity:ri,visibility:si,drawArea:li,topleft:Ci,bottomright:pi,currenttime:ai,best:ci}),st(ut.coverage,ni),st(ut.loadingCoverage,ni);for(var gi=ut._getCornerTiles(ni,Ci,pi),_i=gi.topLeft,bi=gi.bottomRight,Mi=ut.source.getNumTiles(ni),yi=ut.viewport.pixelFromPoint(ut.viewport.getCenter()),Ti=_i.x;Ti<=bi.x;Ti++)for(var Ii=_i.y;Ii<=bi.y;Ii++){if(!ut.wrapHorizontal&&!ut.wrapVertical){var Ri=ut.source.getTileBounds(ni,Ti,Ii);if(li.intersection(Ri)===null)continue}ci=ee(ut,ei,mt,Ti,Ii,ni,ri,si,yi,Mi,ai,ci)}return ci}function ee(ut,mt,ei,ni,ri,si,li,ai,ci,Ci,pi,gi){var _i=ae(ni,ri,si,ut,ut.source,ut.tilesMatrix,pi,Ci,ut._worldWidthCurrent,ut._worldHeightCurrent),bi=ei;ut.viewer&&ut.viewer.raiseEvent("update-tile",{tiledImage:ut,tile:_i}),it(ut.coverage,si,ni,ri,!1);var Mi=_i.loaded||_i.loading||tt(ut.loadingCoverage,si,ni,ri);if(it(ut.loadingCoverage,si,ni,ri,Mi),!_i.exists||(mt&&!bi&&(tt(ut.coverage,si,ni,ri)?it(ut.coverage,si,ni,ri,!0):bi=!0),!bi))return gi;if(Qe(_i,ut.source.tileOverlap,ut.viewport,ci,ai,ut),!_i.loaded)if(_i.context2D)be(ut,_i);else{var yi=ut._tileCache.getImageRecord(_i.cacheKey);if(yi){var Ti=yi.getImage();be(ut,_i,Ti)}}if(_i.loaded){var Ii=Xe(ut,_i,ni,ri,si,li,pi);Ii&&(ut._needsDraw=!0)}else _i.loading?ut._tilesLoading++:Mi||(gi=lt(gi,_i));return gi}function ae(ut,mt,ei,ni,ri,si,li,ai,ci,Ci){var pi,gi,_i,bi,Mi,yi,Ti,Ii,Ri;return si[ei]||(si[ei]={}),si[ei][ut]||(si[ei][ut]={}),si[ei][ut][mt]||(pi=(ai.x+ut%ai.x)%ai.x,gi=(ai.y+mt%ai.y)%ai.y,_i=ri.getTileBounds(ei,pi,gi),bi=ri.getTileBounds(ei,pi,gi,!0),Mi=ri.tileExists(ei,pi,gi),yi=ri.getTileUrl(ei,pi,gi),ni.loadTilesWithAjax?(Ti=ri.getTileAjaxHeaders(ei,pi,gi),ie.isPlainObject(ni.ajaxHeaders)&&(Ti=ie.extend({},ni.ajaxHeaders,Ti))):Ti=null,Ii=ri.getContext2D?ri.getContext2D(ei,pi,gi):void 0,_i.x+=(ut-pi)/ai.x,_i.y+=Ci/ci*((mt-gi)/ai.y),Ri=new ie.Tile(ei,ut,mt,_i,Mi,yi,Ii,ni.loadTilesWithAjax,Ti,bi),pi===ai.x-1&&(Ri.isRightMost=!0),gi===ai.y-1&&(Ri.isBottomMost=!0),si[ei][ut][mt]=Ri),Ri=si[ei][ut][mt],Ri.lastTouchTime=li,Ri}function ye(ut,mt,ei){mt.loading=!0,ut._imageLoader.addJob({src:mt.url,loadWithAjax:mt.loadWithAjax,ajaxHeaders:mt.ajaxHeaders,crossOriginPolicy:ut.crossOriginPolicy,ajaxWithCredentials:ut.ajaxWithCredentials,callback:function(ni,ri,si){ve(ut,mt,ei,ni,ri,si)},abort:function(){mt.loading=!1}})}function ve(ut,mt,ei,ni,ri,si){if(!ni){ie.console.log("Tile %s failed to load: %s - error: %s",mt,mt.url,ri),ut.viewer.raiseEvent("tile-load-failed",{tile:mt,tiledImage:ut,time:ei,message:ri,tileRequest:si}),mt.loading=!1,mt.exists=!1;return}if(ei<ut.lastResetTime){ie.console.log("Ignoring tile %s loaded before reset: %s",mt,mt.url),mt.loading=!1;return}var li=function(){var ai=ut.source.getClosestLevel();be(ut,mt,ni,ai,si)};ut._midDraw?window.setTimeout(li,1):li()}function be(ut,mt,ei,ni,ri){var si=0;function li(){return si++,ai}function ai(){si--,si===0&&(mt.loading=!1,mt.loaded=!0,mt.context2D||ut._tileCache.cacheTile({image:ei,tile:mt,cutoff:ni,tiledImage:ut}),ut._needsDraw=!0)}ut.viewer.raiseEvent("tile-loaded",{tile:mt,tiledImage:ut,tileRequest:ri,image:ei,getCompletionCallback:li}),li()()}function Qe(ut,mt,ei,ni,ri,si){var li=ut.bounds.getTopLeft();li.x*=si._scaleSpring.current.value,li.y*=si._scaleSpring.current.value,li.x+=si._xSpring.current.value,li.y+=si._ySpring.current.value;var ai=ut.bounds.getSize();ai.x*=si._scaleSpring.current.value,ai.y*=si._scaleSpring.current.value;var ci=ei.pixelFromPointNoRotate(li,!0),Ci=ei.pixelFromPointNoRotate(li,!1),pi=ei.deltaPixelsFromPointsNoRotate(ai,!0),gi=ei.deltaPixelsFromPointsNoRotate(ai,!1),_i=Ci.plus(gi.divide(2)),bi=ni.squaredDistanceTo(_i);mt||(pi=pi.plus(new ie.Point(1,1))),ut.isRightMost&&si.wrapHorizontal&&(pi.x+=.75),ut.isBottomMost&&si.wrapVertical&&(pi.y+=.75),ut.position=ci,ut.size=pi,ut.squaredDistance=bi,ut.visibility=ri}function Xe(ut,mt,ei,ni,ri,si,li){var ai=1e3*ut.blendTime,ci,Ci;if(mt.blendStart||(mt.blendStart=li),ci=li-mt.blendStart,Ci=ai?Math.min(1,ci/ai):1,ut.alwaysBlend&&(Ci*=si),mt.opacity=Ci,ut.lastDrawn.push(mt),Ci===1)it(ut.coverage,ri,ei,ni,!0),ut._hasOpaqueTile=!0;else if(ci<ai)return!0;return!1}function Je(ut,mt,ei,ni){var ri,si,li,ai;if(!ut[mt])return!1;if(ei===void 0||ni===void 0){ri=ut[mt];for(li in ri)if(Object.prototype.hasOwnProperty.call(ri,li)){si=ri[li];for(ai in si)if(Object.prototype.hasOwnProperty.call(si,ai)&&!si[ai])return!1}return!0}return ut[mt][ei]===void 0||ut[mt][ei][ni]===void 0||ut[mt][ei][ni]===!0}function tt(ut,mt,ei,ni){return ei===void 0||ni===void 0?Je(ut,mt+1):Je(ut,mt+1,2*ei,2*ni)&&Je(ut,mt+1,2*ei,2*ni+1)&&Je(ut,mt+1,2*ei+1,2*ni)&&Je(ut,mt+1,2*ei+1,2*ni+1)}function it(ut,mt,ei,ni,ri){if(!ut[mt]){ie.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",mt);return}ut[mt][ei]||(ut[mt][ei]={}),ut[mt][ei][ni]=ri}function st(ut,mt){ut[mt]={}}function lt(ut,mt){return!ut||mt.visibility>ut.visibility||mt.visibility==ut.visibility&&mt.squaredDistance<ut.squaredDistance?mt:ut}function ct(ut,mt){if(!(ut.opacity===0||mt.length===0&&!ut.placeholderFillStyle)){var ei=mt[0],ni;ei&&(ni=ut.opacity<1||ut.compositeOperation&&ut.compositeOperation!=="source-over"||!ut._isBottomItem()&&ei._hasTransparencyChannel());var ri,si,li=ut.viewport.getZoom(!0),ai=ut.viewportToImageZoom(li);mt.length>1&&ai>ut.smoothTileEdgesMinZoom&&!ut.iOSDevice&&ut.getRotation(!0)%360===0&&ie.supportsCanvas&&(ni=!0,ri=ei.getScaleForEdgeSmoothing(),si=ei.getTranslationForEdgeSmoothing(ri,ut._drawer.getCanvasSize(!1),ut._drawer.getCanvasSize(!0)));var ci;ni&&(ri||(ci=ut.viewport.viewportToViewerElementRectangle(ut.getClippedBounds(!0)).getIntegerBoundingBox(),ut._drawer.viewer.viewport.getFlip()&&(ut.viewport.degrees!==0||ut.getRotation(!0)%360!==0)&&(ci.x=ut._drawer.viewer.container.clientWidth-(ci.x+ci.width)),ci=ci.times(ie.pixelDensityRatio)),ut._drawer._clear(!0,ci)),ri||(ut.viewport.degrees!==0&&ut._drawer._offsetForRotation({degrees:ut.viewport.degrees,useSketch:ni}),ut.getRotation(!0)%360!==0&&ut._drawer._offsetForRotation({degrees:ut.getRotation(!0),point:ut.viewport.pixelFromPointNoRotate(ut._getRotationPoint(!0),!0),useSketch:ni}),ut.viewport.degrees===0&&ut.getRotation(!0)%360===0&&ut._drawer.viewer.viewport.getFlip()&&ut._drawer._flip());var Ci=!1;if(ut._clip){ut._drawer.saveContext(ni);var pi=ut.imageToViewportRectangle(ut._clip,!0);pi=pi.rotate(-ut.getRotation(!0),ut._getRotationPoint(!0));var gi=ut._drawer.viewportToDrawerRectangle(pi);ri&&(gi=gi.times(ri)),si&&(gi=gi.translate(si)),ut._drawer.setClip(gi,ni),Ci=!0}if(ut._croppingPolygons){ut._drawer.saveContext(ni);try{var _i=ut._croppingPolygons.map(function(Ti){return Ti.map(function(Ii){var Ri=ut.imageToViewportCoordinates(Ii.x,Ii.y,!0).rotate(-ut.getRotation(!0),ut._getRotationPoint(!0)),Pi=ut._drawer.viewportCoordToDrawerCoord(Ri);return ri&&(Pi=Pi.times(ri)),Pi})});ut._drawer.clipWithPolygons(_i,ni)}catch(Ti){ie.console.error(Ti)}Ci=!0}if(ut.placeholderFillStyle&&ut._hasOpaqueTile===!1){var bi=ut._drawer.viewportToDrawerRectangle(ut.getBounds(!0));ri&&(bi=bi.times(ri)),si&&(bi=bi.translate(si));var Mi=null;typeof ut.placeholderFillStyle=="function"?Mi=ut.placeholderFillStyle(ut,ut._drawer.context):Mi=ut.placeholderFillStyle,ut._drawer.drawRectangle(bi,Mi,ni)}for(var yi=mt.length-1;yi>=0;yi--)ei=mt[yi],ut._drawer.drawTile(ei,ut._drawingHandler,ni,ri,si),ei.beingDrawn=!0,ut.viewer&&ut.viewer.raiseEvent("tile-drawn",{tiledImage:ut,tile:ei});Ci&&ut._drawer.restoreContext(ni),ri||(ut.getRotation(!0)%360!==0&&ut._drawer._restoreRotationChanges(ni),ut.viewport.degrees!==0&&ut._drawer._restoreRotationChanges(ni)),ni&&(ri&&(ut.viewport.degrees!==0&&ut._drawer._offsetForRotation({degrees:ut.viewport.degrees,useSketch:!1}),ut.getRotation(!0)%360!==0&&ut._drawer._offsetForRotation({degrees:ut.getRotation(!0),point:ut.viewport.pixelFromPointNoRotate(ut._getRotationPoint(!0),!0),useSketch:!1})),ut._drawer.blendSketch({opacity:ut.opacity,scale:ri,translate:si,compositeOperation:ut.compositeOperation,bounds:ci}),ri&&(ut.getRotation(!0)%360!==0&&ut._drawer._restoreRotationChanges(!1),ut.viewport.degrees!==0&&ut._drawer._restoreRotationChanges(!1))),ri||ut.viewport.degrees===0&&ut.getRotation(!0)%360===0&&ut._drawer.viewer.viewport.getFlip()&&ut._drawer._flip(),gt(ut,mt)}}function gt(ut,mt){if(ut.debugMode)for(var ei=mt.length-1;ei>=0;ei--){var ni=mt[ei];try{ut._drawer.drawDebugInfo(ni,mt.length,ei,ut)}catch(ri){ie.console.error(ri)}}}}(OpenSeadragon),function(ie){var Z=function(ae){ie.console.assert(ae,"[TileCache.cacheTile] options is required"),ie.console.assert(ae.tile,"[TileCache.cacheTile] options.tile is required"),ie.console.assert(ae.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=ae.tile,this.tiledImage=ae.tiledImage},ee=function(ae){ie.console.assert(ae,"[ImageRecord] options is required"),ie.console.assert(ae.image,"[ImageRecord] options.image is required"),this._image=ae.image,this._tiles=[]};ee.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var ae=document.createElement("canvas");ae.width=this._image.width,ae.height=this._image.height,this._renderedContext=ae.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(ae){ie.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=ae},addTile:function(ae){ie.console.assert(ae,"[ImageRecord.addTile] tile is required"),this._tiles.push(ae)},removeTile:function(ae){for(var ye=0;ye<this._tiles.length;ye++)if(this._tiles[ye]===ae){this._tiles.splice(ye,1);return}ie.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",ae)},getTileCount:function(){return this._tiles.length}},ie.TileCache=function(ae){ae=ae||{},this._maxImageCacheCount=ae.maxImageCacheCount||ie.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},ie.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(ae){ie.console.assert(ae,"[TileCache.cacheTile] options is required"),ie.console.assert(ae.tile,"[TileCache.cacheTile] options.tile is required"),ie.console.assert(ae.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),ie.console.assert(ae.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var ye=ae.cutoff||0,ve=this._tilesLoaded.length,be=this._imagesLoaded[ae.tile.cacheKey];if(be||(ie.console.assert(ae.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),be=this._imagesLoaded[ae.tile.cacheKey]=new ee({image:ae.image}),this._imagesLoadedCount++),be.addTile(ae.tile),ae.tile.cacheImageRecord=be,this._imagesLoadedCount>this._maxImageCacheCount){for(var Qe=null,Xe=-1,Je=null,tt,it,st,lt,ct,gt,ut=this._tilesLoaded.length-1;ut>=0;ut--)if(gt=this._tilesLoaded[ut],tt=gt.tile,!(tt.level<=ye||tt.beingDrawn)){if(!Qe){Qe=tt,Xe=ut,Je=gt;continue}lt=tt.lastTouchTime,it=Qe.lastTouchTime,ct=tt.level,st=Qe.level,(lt<it||lt==it&&ct>st)&&(Qe=tt,Xe=ut,Je=gt)}Qe&&Xe>=0&&(this._unloadTile(Je),ve=Xe)}this._tilesLoaded[ve]=new Z({tile:ae.tile,tiledImage:ae.tiledImage})},clearTilesFor:function(ae){ie.console.assert(ae,"[TileCache.clearTilesFor] tiledImage is required");for(var ye,ve=0;ve<this._tilesLoaded.length;++ve)ye=this._tilesLoaded[ve],ye.tiledImage===ae&&(this._unloadTile(ye),this._tilesLoaded.splice(ve,1),ve--)},getImageRecord:function(ae){return ie.console.assert(ae,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[ae]},_unloadTile:function(ae){ie.console.assert(ae,"[TileCache._unloadTile] tileRecord is required");var ye=ae.tile,ve=ae.tiledImage;ye.unload(),ye.cacheImageRecord=null;var be=this._imagesLoaded[ye.cacheKey];be.removeTile(ye),be.getTileCount()||(be.destroy(),delete this._imagesLoaded[ye.cacheKey],this._imagesLoadedCount--),ve.viewer.raiseEvent("tile-unloaded",{tile:ye,tiledImage:ve})}}}(OpenSeadragon),function(ie){ie.World=function(Z){var ee=this;ie.console.assert(Z.viewer,"[World] options.viewer is required"),ie.EventSource.call(this),this.viewer=Z.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(ae){ee._autoRefigureSizes?ee._figureSizes():ee._needsSizesFigured=!0},this._figureSizes()},ie.extend(ie.World.prototype,ie.EventSource.prototype,{addItem:function(Z,ee){if(ie.console.assert(Z,"[World.addItem] item is required"),ie.console.assert(Z instanceof ie.TiledImage,"[World.addItem] only TiledImages supported at this time"),ee=ee||{},ee.index!==void 0){var ae=Math.max(0,Math.min(this._items.length,ee.index));this._items.splice(ae,0,Z)}else this._items.push(Z);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,Z.addHandler("bounds-change",this._delegatedFigureSizes),Z.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:Z})},getItemAt:function(Z){return ie.console.assert(Z!==void 0,"[World.getItemAt] index is required"),this._items[Z]},getIndexOfItem:function(Z){return ie.console.assert(Z,"[World.getIndexOfItem] item is required"),ie.indexOf(this._items,Z)},getItemCount:function(){return this._items.length},setItemIndex:function(Z,ee){ie.console.assert(Z,"[World.setItemIndex] item is required"),ie.console.assert(ee!==void 0,"[World.setItemIndex] index is required");var ae=this.getIndexOfItem(Z);if(ee>=this._items.length)throw new Error("Index bigger than number of layers.");ee===ae||ae===-1||(this._items.splice(ae,1),this._items.splice(ee,0,Z),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:Z,previousIndex:ae,newIndex:ee}))},removeItem:function(Z){ie.console.assert(Z,"[World.removeItem] item is required");var ee=ie.indexOf(this._items,Z);ee!==-1&&(Z.removeHandler("bounds-change",this._delegatedFigureSizes),Z.removeHandler("clip-change",this._delegatedFigureSizes),Z.destroy(),this._items.splice(ee,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(Z))},removeAll:function(){this.viewer._cancelPendingImages();var Z,ee;for(ee=0;ee<this._items.length;ee++)Z=this._items[ee],Z.removeHandler("bounds-change",this._delegatedFigureSizes),Z.removeHandler("clip-change",this._delegatedFigureSizes),Z.destroy();var ae=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,ee=0;ee<ae.length;ee++)Z=ae[ee],this._raiseRemoveItem(Z)},resetItems:function(){for(var Z=0;Z<this._items.length;Z++)this._items[Z].reset()},update:function(){for(var Z=!1,ee=0;ee<this._items.length;ee++)Z=this._items[ee].update()||Z;return Z},draw:function(){for(var Z=0;Z<this._items.length;Z++)this._items[Z].draw();this._needsDraw=!1},needsDraw:function(){for(var Z=0;Z<this._items.length;Z++)if(this._items[Z].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(Z){this._autoRefigureSizes=Z,Z&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(Z){Z=Z||{};var ee=Z.immediately||!1,ae=Z.layout||ie.DEFAULT_SETTINGS.collectionLayout,ye=Z.rows||ie.DEFAULT_SETTINGS.collectionRows,ve=Z.columns||ie.DEFAULT_SETTINGS.collectionColumns,be=Z.tileSize||ie.DEFAULT_SETTINGS.collectionTileSize,Qe=Z.tileMargin||ie.DEFAULT_SETTINGS.collectionTileMargin,Xe=be+Qe,Je;!Z.rows&&ve?Je=ve:Je=Math.ceil(this._items.length/ye);var tt=0,it=0,st,lt,ct,gt,ut;this.setAutoRefigureSizes(!1);for(var mt=0;mt<this._items.length;mt++)mt&&mt%Je===0&&(ae==="horizontal"?(it+=Xe,tt=0):(tt+=Xe,it=0)),st=this._items[mt],lt=st.getBounds(),lt.width>lt.height?ct=be:ct=be*(lt.width/lt.height),gt=ct*(lt.height/lt.width),ut=new ie.Point(tt+(be-ct)/2,it+(be-gt)/2),st.setPosition(ut,ee),st.setWidth(ct,ee),ae==="horizontal"?tt+=Xe:it+=Xe;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var Z=this._homeBounds?this._homeBounds.clone():null,ee=this._contentSize?this._contentSize.clone():null,ae=this._contentFactor||0;if(!this._items.length)this._homeBounds=new ie.Rect(0,0,1,1),this._contentSize=new ie.Point(1,1),this._contentFactor=1;else{var ye=this._items[0],ve=ye.getBounds();this._contentFactor=ye.getContentSize().x/ve.width;for(var be=ye.getClippedBounds().getBoundingBox(),Qe=be.x,Xe=be.y,Je=be.x+be.width,tt=be.y+be.height,it=1;it<this._items.length;it++)ye=this._items[it],ve=ye.getBounds(),this._contentFactor=Math.max(this._contentFactor,ye.getContentSize().x/ve.width),be=ye.getClippedBounds().getBoundingBox(),Qe=Math.min(Qe,be.x),Xe=Math.min(Xe,be.y),Je=Math.max(Je,be.x+be.width),tt=Math.max(tt,be.y+be.height);this._homeBounds=new ie.Rect(Qe,Xe,Je-Qe,tt-Xe),this._contentSize=new ie.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==ae||!this._homeBounds.equals(Z)||!this._contentSize.equals(ee))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(Z){this.raiseEvent("remove-item",{item:Z})}})}(OpenSeadragon)})(openseadragon);var openseadragonExports=openseadragon.exports;const le=getDefaultExportFromCjs$1(openseadragonExports),$6be4966fd9bbc698$var$SWITCH_NAME="Switch",[$6be4966fd9bbc698$var$createSwitchContext,$6be4966fd9bbc698$export$cf7f5f17f69cbd43]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6be4966fd9bbc698$var$SWITCH_NAME),[$6be4966fd9bbc698$var$SwitchProvider,$6be4966fd9bbc698$var$useSwitchContext]=$6be4966fd9bbc698$var$createSwitchContext($6be4966fd9bbc698$var$SWITCH_NAME),$6be4966fd9bbc698$export$b5d5cf8927ab7262=reactExports.forwardRef((ie,Z)=>{const{__scopeSwitch:ee,name:ae,checked:ye,defaultChecked:ve,required:be,disabled:Qe,value:Xe="on",onCheckedChange:Je,...tt}=ie,[it,st]=reactExports.useState(null),lt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z,ei=>st(ei)),ct=reactExports.useRef(!1),gt=it?!!it.closest("form"):!0,[ut=!1,mt]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:ye,defaultProp:ve,onChange:Je});return reactExports.createElement($6be4966fd9bbc698$var$SwitchProvider,{scope:ee,checked:ut,disabled:Qe},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"switch","aria-checked":ut,"aria-required":be,"data-state":$6be4966fd9bbc698$var$getState(ut),"data-disabled":Qe?"":void 0,disabled:Qe,value:Xe},tt,{ref:lt,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ie.onClick,ei=>{mt(ni=>!ni),gt&&(ct.current=ei.isPropagationStopped(),ct.current||ei.stopPropagation())})})),gt&&reactExports.createElement($6be4966fd9bbc698$var$BubbleInput,{control:it,bubbles:!ct.current,name:ae,value:Xe,checked:ut,required:be,disabled:Qe,style:{transform:"translateX(-100%)"}}))}),$6be4966fd9bbc698$var$THUMB_NAME="SwitchThumb",$6be4966fd9bbc698$export$4d07bf653ea69106=reactExports.forwardRef((ie,Z)=>{const{__scopeSwitch:ee,...ae}=ie,ye=$6be4966fd9bbc698$var$useSwitchContext($6be4966fd9bbc698$var$THUMB_NAME,ee);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"data-state":$6be4966fd9bbc698$var$getState(ye.checked),"data-disabled":ye.disabled?"":void 0},ae,{ref:Z}))}),$6be4966fd9bbc698$var$BubbleInput=ie=>{const{control:Z,checked:ee,bubbles:ae=!0,...ye}=ie,ve=reactExports.useRef(null),be=$010c2913dbd2fe3d$export$5cae361ad82dce8b(ee),Qe=$db6c3485150b8e66$export$1ab7ae714698c4b8(Z);return reactExports.useEffect(()=>{const Xe=ve.current,Je=window.HTMLInputElement.prototype,it=Object.getOwnPropertyDescriptor(Je,"checked").set;if(be!==ee&&it){const st=new Event("click",{bubbles:ae});it.call(Xe,ee),Xe.dispatchEvent(st)}},[be,ee,ae]),reactExports.createElement("input",_extends$1({type:"checkbox","aria-hidden":!0,defaultChecked:ee},ye,{tabIndex:-1,ref:ve,style:{...ie.style,...Qe,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $6be4966fd9bbc698$var$getState(ie){return ie?"checked":"unchecked"}const $6be4966fd9bbc698$export$be92b6f5f03c0fe9=$6be4966fd9bbc698$export$b5d5cf8927ab7262,$6be4966fd9bbc698$export$6521433ed15a34db=$6be4966fd9bbc698$export$4d07bf653ea69106,ht=ie=>{const Z=ie.toString().split(":"),ee=Math.ceil(parseInt(Z[0])),ae=Math.ceil(parseInt(Z[1])),ye=xt(Math.ceil(parseInt(Z[2])),2);let ve=`${ee!==0&&ae<10?(ae+"").padStart(2,"0"):ae}:${ye}`;return ee!==0&&(ve=`${ee}:${ve}`),ve},Ee=ie=>{const Z=new Date(ie*1e3).toISOString().substr(11,8);return ht(Z)},we=(ie,Z)=>{if(typeof ie!="object"||ie===null)return Z;for(const ee in Z)typeof Z[ee]=="object"&&Z[ee]!==null&&!Array.isArray(Z[ee])?(ie[ee]||(ie[ee]={}),ie[ee]=we(ie[ee],Z[ee])):ie[ee]=Z[ee];return ie},Ce=(ie,Z)=>Object.hasOwn(ie,Z)?ie[Z].toString():void 0,xt=(ie,Z)=>String(ie).padStart(Z,"0"),j={background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",ignoreCaptionLabels:[],informationPanel:{open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showIIIFBadge:!0,showTitle:!0,withCredentials:!1};var xe;const _={activeCanvas:"",activeManifest:"",collection:{},configOptions:j,customDisplays:[],informationOpen:(xe=j==null?void 0:j.informationPanel)==null?void 0:xe.open,isLoaded:!1,vault:new Vault},Se=e$1.createContext(_),ke=e$1.createContext(_);function vt(ie,Z){switch(Z.type){case"updateActiveCanvas":return Z.canvasId||(Z.canvasId=""),{...ie,activeCanvas:Z.canvasId};case"updateActiveManifest":return{...ie,activeManifest:Z.manifestId};case"updateCollection":return{...ie,collection:Z.collection};case"updateConfigOptions":return{...ie,configOptions:we(ie.configOptions,Z.configOptions)};case"updateInformationOpen":return{...ie,informationOpen:Z.informationOpen};case"updateIsLoaded":return{...ie,isLoaded:Z.isLoaded};default:throw new Error(`Unhandled action type: ${Z.type}`)}}const bt=({initialState:ie=_,children:Z})=>{const[ee,ae]=reactExports.useReducer(vt,ie);return e$1.createElement(Se.Provider,{value:ee},e$1.createElement(ke.Provider,{value:ae},Z))};function k(){const ie=e$1.useContext(Se);if(ie===void 0)throw new Error("useViewerState must be used within a ViewerProvider");return ie}function O(){const ie=e$1.useContext(ke);if(ie===void 0)throw new Error("useViewerDispatch must be used within a ViewerProvider");return ie}const Ie=(ie,Z,ee,ae)=>{var ye,ve;const be={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]},Qe=Xe=>{if(Xe){if(!Xe.body||!Xe.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",Xe);return}let Je=Xe.body;Array.isArray(Je)&&(Je=Je[0]);const tt=ie.get(Je.id);if(!tt)return;switch(ee){case"painting":return Xe.target===Z.id&&Xe.motivation&&Xe.motivation[0]==="painting"&&ae.includes(tt.type)&&(Xe.body=tt),!!Xe;case"supplementing":return;default:throw new Error("Invalid annotation motivation.")}}};if(be.canvas=ie.get(Z),be.canvas&&(be.annotationPage=ie.get(be.canvas.items[0]),be.accompanyingCanvas=(ye=be.canvas)!=null&&ye.accompanyingCanvas?ie.get((ve=be.canvas)==null?void 0:ve.accompanyingCanvas):void 0),be.annotationPage){const Xe=ie.get(be.annotationPage.items).map(tt=>({body:ie.get(tt.body[0].id),motivation:tt.motivation,type:"Annotation"})),Je=[];Xe.forEach(tt=>{tt.body.type==="Choice"?tt.body.items.forEach(it=>Je.push({...tt,id:it.id,body:ie.get(it.id)})):Je.push(tt)}),be.annotations=Je.filter(Qe)}return be},D=(ie,Z="en")=>{if(!ie)return"";if(!ie[Z]){const ee=Object.getOwnPropertyNames(ie);if(ee.length>0)return ie[ee[0]]}return ie[Z]},N=(ie,Z)=>{const ee=Ie(ie,{id:Z,type:"Canvas"},"painting",["Image","Sound","Video"]);if(ee.annotations.length!==0&&ee.annotations&&ee.annotations)return ee.annotations.map(ae=>ae==null?void 0:ae.body)},yt=(ie,Z,ee)=>{const ae=ie.get({id:Z,type:"Canvas"});if(!(ae!=null&&ae.annotations)||!ae.annotations[0])return[];const ye=ie.get(ae.annotations[0]),ve=ie.get(ye.items);return Array.isArray(ve)?ve.filter(be=>{var Qe;if(be.body&&(Qe=be.motivation)!=null&&Qe.includes("supplementing")){let Xe=be.body;Array.isArray(Xe)&&(Xe=Xe[0]);const Je=ie.get(Xe.id);if(Je.format===ee)return be.body=Je,be}}).map(be=>be.body):[]},Et=(ie,Z,ee,ae)=>{const ye=[];if(Z.canvas&&Z.canvas.thumbnail.length>0){const ve=ie.get(Z.canvas.thumbnail[0]);ye.push(ve)}if(Z.annotations[0]){if(Z.annotations[0].thumbnail&&Z.annotations[0].thumbnail.length>0){const be=ie.get(Z.annotations[0].thumbnail[0]);ye.push(be)}if(!Z.annotations[0].body)return;const ve=Z.annotations[0].body;ve.type==="Image"&&ye.push(ve)}return ye.length===0?void 0:{id:ye[0].id,format:ye[0].format,type:ye[0].type,width:ee,height:ae}},X=209,wt={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${X} 100% 38.2%)`,accentMuted:`hsl(${X} 80% 61.8%)`,accentAlt:`hsl(${X} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},te={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:m,css:ro,keyframes:ne,createTheme:oo}=q({theme:wt,media:te}),Ct=m("div",{display:"flex",flexDirection:"column",alignItems:"center"}),St=m("p",{fontWeight:"bold",fontSize:"x-large"}),kt=m("span",{fontSize:"medium"}),It=({error:ie})=>{const{message:Z}=ie;return e$1.createElement(Ct,{role:"alert"},e$1.createElement(St,{"data-testid":"headline"},"Something went wrong"),Z&&e$1.createElement(kt,null,`Error message: ${Z}`," "))},$e=m("div",{position:"relative",zIndex:"0"}),Ae=m("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),Te=m("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),Me=m($409067139f391064$export$41fb9f06171c75f4,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),Re=m($409067139f391064$export$7c6e2c02157bb7d2,{width:"100%",display:"flex"}),$t=m("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),At=m("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${Ae}`]:{flexGrow:"1"},[`& ${Te}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${$e}`]:{display:"none"},[`& ${Me}`]:{margin:"1rem"},[`& ${Re}`]:{height:"100%"}}}}),Tt=m($69cb30bb0017df05$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),Mt=m($69cb30bb0017df05$export$54c2e3dc7acea9f5,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),se=m($69cb30bb0017df05$export$41fb9f06171c75f4,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),ce=m($69cb30bb0017df05$export$7c6e2c02157bb7d2,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),Rt=m("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),zt=m("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),Lt=m("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),ze=(ie,Z="none")=>{if(!ie)return null;if(typeof ie=="string")return[ie];if(!ie[Z]){const ee=Object.getOwnPropertyNames(ie);if(ee.length>0)return ie[ee[0]]}return!ie[Z]||!Array.isArray(ie[Z])?null:ie[Z]},R=(ie,Z="none",ee=", ")=>{const ae=ze(ie,Z);return Array.isArray(ae)?ae.join(`${ee}`):ae};function Ft(ie){return{__html:Pt(ie)}}function T(ie,Z){const ee=Object.keys(ie).filter(ye=>Z.includes(ye)?null:ye),ae=new Object;return ee.forEach(ye=>{ae[ye]=ie[ye]}),ae}function Pt(ie){return at(ie,{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})}const Vt=m("span",{}),L=ie=>{const{as:Z,label:ee}=ie,ae=T(ie,["as","label"]);return e$1.createElement(Vt,{as:Z,...ae},R(ee,ae.lang))},Bt=(ie,Z="200,",ee="full")=>{Array.isArray(ie)&&(ie=ie[0]);const{id:ae,service:ye}=ie;let ve;if(!ye)return ae;if(Array.isArray(ie.service)&&ie.service.length>0&&(ve=ye[0]),ve){if(ve["@id"])return`${ve["@id"]}/${ee}/${Z}/0/default.jpg`;if(ve.id)return`${ve.id}/${ee}/${Z}/0/default.jpg`}},de=m("img",{objectFit:"cover"}),Ht=ie=>{const Z=reactExports.useRef(null),{contentResource:ee,altAsLabel:ae,region:ye="full"}=ie;let ve;ae&&(ve=R(ae));const be=T(ie,["contentResource","altAsLabel"]),{type:Qe,id:Xe,width:Je=200,height:tt=200,duration:it}=ee;reactExports.useEffect(()=>{if(!Xe&&!Z.current||["Image"].includes(Qe)||!Xe.includes("m3u8"))return;const ct=new Hls;return Z.current&&(ct.attachMedia(Z.current),ct.on(Hls.Events.MEDIA_ATTACHED,function(){ct.loadSource(Xe)})),ct.on(Hls.Events.ERROR,function(gt,ut){if(ut.fatal)switch(ut.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${gt} network error encountered, try to recover`),ct.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${gt} media error encountered, try to recover`),ct.recoverMediaError();break;default:ct.destroy();break}}),()=>{ct&&(ct.detachMedia(),ct.destroy())}},[Xe,Qe]);const st=reactExports.useCallback(()=>{if(!Z.current)return;let ct=0,gt=30;if(it&&(gt=it),!Xe.split("#t=")&&it&&(ct=it*.1),Xe.split("#t=").pop()){const mt=Xe.split("#t=").pop();mt&&(ct=parseInt(mt.split(",")[0]))}const ut=Z.current;ut.autoplay=!0,ut.currentTime=ct,setTimeout(()=>st(),gt*1e3)},[it,Xe]);reactExports.useEffect(()=>st(),[st]);const lt=Bt(ee,`${Je},${tt}`,ye);switch(Qe){case"Image":return e$1.createElement(de,{as:"img",alt:ve,css:{width:Je,height:tt},key:Xe,src:lt,...be});case"Video":return e$1.createElement(de,{as:"video",css:{width:Je,height:tt},disablePictureInPicture:!0,key:Xe,loop:!0,muted:!0,onPause:st,ref:Z,src:Xe});default:return console.warn(`Resource type: ${Qe} is not valid or not yet supported in Primitives.`),e$1.createElement(e$1.Fragment,null)}},Ot=m("a",{}),Dt=ie=>{const{children:Z,homepage:ee}=ie,ae=T(ie,["children","homepage"]);return e$1.createElement(e$1.Fragment,null,ee&&ee.map(ye=>{const ve=R(ye.label,ae.lang);return e$1.createElement(Ot,{"aria-label":Z?ve:void 0,href:ye.id,key:ye.id,...ae},Z||ve)}))},Wt={delimiter:", "},re=reactExports.createContext(void 0),Le=()=>{const ie=reactExports.useContext(re);if(ie===void 0)throw new Error("usePrimitivesContext must be used with a PrimitivesProvider");return ie},oe=({children:ie,initialState:Z=Wt})=>{const ee=jt(Z,"delimiter");return e$1.createElement(re.Provider,{value:{delimiter:ee}},ie)},jt=(ie,Z)=>Object.hasOwn(ie,Z)?ie[Z].toString():void 0,Nt=m("span",{}),me=ie=>{const{as:Z,markup:ee}=ie,{delimiter:ae}=Le();if(!ee)return e$1.createElement(e$1.Fragment,null);const ye=T(ie,["as","markup"]),ve=Ft(R(ee,ye.lang,ae));return e$1.createElement(Nt,{as:Z,...ye,dangerouslySetInnerHTML:ve})},Fe=ie=>e$1.useContext(re)?e$1.createElement(me,{...ie}):e$1.createElement(oe,null,e$1.createElement(me,{...ie})),Gt=({as:ie="dd",lang:Z,value:ee})=>e$1.createElement(Fe,{markup:ee,as:ie,lang:Z}),qt=m("span",{}),Ut=({as:ie="dd",customValueContent:Z,lang:ee,value:ae})=>{var ye;const{delimiter:ve}=Le(),be=(ye=ze(ae,ee))==null?void 0:ye.map(Qe=>reactExports.cloneElement(Z,{value:Qe}));return e$1.createElement(qt,{as:ie,lang:ee},be==null?void 0:be.map((Qe,Xe)=>[Xe>0&&`${ve}`,e$1.createElement(reactExports.Fragment,{key:Xe},Qe)]))},Pe=ie=>{var Z;const{item:ee,lang:ae,customValueContent:ye}=ie,{label:ve,value:be}=ee,Qe=(Z=R(ve))==null?void 0:Z.replace(" ","-").toLowerCase();return e$1.createElement("div",{role:"group","data-label":Qe},e$1.createElement(L,{as:"dt",label:ve,lang:ae}),ye?e$1.createElement(Ut,{as:"dd",customValueContent:ye,value:be,lang:ae}):e$1.createElement(Gt,{as:"dd",value:be,lang:ae}))};function _t(ie,Z){const ee=Z.filter(ae=>{const{matchingLabel:ye}=ae,ve=Object.keys(ae.matchingLabel)[0],be=R(ye,ve);if(R(ie,ve)===be)return!0}).map(ae=>ae.Content);if(Array.isArray(ee))return ee[0]}const Zt=m("dl",{}),Xt=ie=>{const{as:Z,customValueContent:ee,metadata:ae}=ie;if(!Array.isArray(ae))return e$1.createElement(e$1.Fragment,null);const ye=Ce(ie,"customValueDelimiter"),ve=T(ie,["as","customValueContent","customValueDelimiter","metadata"]);return e$1.createElement(oe,{...typeof ye=="string"?{initialState:{delimiter:ye}}:void 0},ae.length>0&&e$1.createElement(Zt,{as:Z,...ve},ae.map((be,Qe)=>{const Xe=ee?_t(be.label,ee):void 0;return e$1.createElement(Pe,{customValueContent:Xe,item:be,key:Qe,lang:ve==null?void 0:ve.lang})})))};m("li",{}),m("ul",{});const Yt=m("dl",{}),Kt=ie=>{const{as:Z,requiredStatement:ee}=ie;if(!ee)return e$1.createElement(e$1.Fragment,null);const ae=Ce(ie,"customValueDelimiter"),ye=T(ie,["as","customValueDelimiter","requiredStatement"]);return e$1.createElement(oe,{...typeof ae=="string"?{initialState:{delimiter:ae}}:void 0},e$1.createElement(Yt,{as:Z,...ye},e$1.createElement(Pe,{item:ee,lang:ye.lang})))},Jt=m("li",{}),Qt=m("ul",{}),en=ie=>{const{as:Z,seeAlso:ee}=ie,ae=T(ie,["as","seeAlso"]);return e$1.createElement(Qt,{as:Z},ee&&ee.map(ye=>{const ve=R(ye.label,ae.lang);return e$1.createElement(Jt,{key:ye.id},e$1.createElement("a",{href:ye.id,...ae},ve||ye.id))}))},tn=ie=>{const{as:Z,summary:ee}=ie,ae=T(ie,["as","customValueDelimiter","summary"]);return e$1.createElement(Fe,{as:Z,markup:ee,...ae})},Ve=ie=>{const{thumbnail:Z,region:ee}=ie,ae=T(ie,["thumbnail"]);return e$1.createElement(e$1.Fragment,null,Z&&Z.map(ye=>e$1.createElement(Ht,{contentResource:ye,key:ye.id,region:ee,...ae})))},nn=({homepage:ie})=>(ie==null?void 0:ie.length)===0?e$1.createElement(e$1.Fragment,null):e$1.createElement(e$1.Fragment,null,e$1.createElement("span",{className:"manifest-property-title"},"Homepage"),e$1.createElement(Dt,{homepage:ie})),rn=({id:ie,htmlLabel:Z,parent:ee="manifest"})=>e$1.createElement(e$1.Fragment,null,e$1.createElement("span",{className:"manifest-property-title"},Z),e$1.createElement("a",{href:ie,target:"_blank",id:`iiif-${ee}-id`},ie)),on=({metadata:ie,parent:Z="manifest"})=>ie?e$1.createElement(e$1.Fragment,null,e$1.createElement(Xt,{metadata:ie,id:`iiif-${Z}-metadata`})):e$1.createElement(e$1.Fragment,null),an=({requiredStatement:ie,parent:Z="manifest"})=>ie?e$1.createElement(e$1.Fragment,null,e$1.createElement(Kt,{requiredStatement:ie,id:`iiif-${Z}-required-statement`})):e$1.createElement(e$1.Fragment,null),ln=({rights:ie})=>ie?e$1.createElement(e$1.Fragment,null,e$1.createElement("span",{className:"manifest-property-title"},"Rights"),e$1.createElement("a",{href:ie,target:"_blank"},ie)):e$1.createElement(e$1.Fragment,null),sn=({seeAlso:ie})=>(ie==null?void 0:ie.length)===0?e$1.createElement(e$1.Fragment,null):e$1.createElement(e$1.Fragment,null,e$1.createElement("span",{className:"manifest-property-title"},"See Also"),e$1.createElement(en,{seeAlso:ie})),cn=({summary:ie,parent:Z="manifest"})=>ie?e$1.createElement(e$1.Fragment,null,e$1.createElement(tn,{summary:ie,as:"p",id:`iiif-${Z}-summary`})):e$1.createElement(e$1.Fragment,null),dn=({label:ie,thumbnail:Z})=>(Z==null?void 0:Z.length)===0?e$1.createElement(e$1.Fragment,null):e$1.createElement(e$1.Fragment,null,e$1.createElement(Ve,{altAsLabel:ie||{none:["resource"]},thumbnail:Z,style:{backgroundColor:"#6663",objectFit:"cover"}})),mn=()=>{const ie=k(),{activeManifest:Z,vault:ee}=ie,[ae,ye]=reactExports.useState(),[ve,be]=reactExports.useState([]),[Qe,Xe]=reactExports.useState([]),[Je,tt]=reactExports.useState([]);return reactExports.useEffect(()=>{var it,st,lt;const ct=ee.get(Z);ye(ct),((it=ct.homepage)==null?void 0:it.length)>0&&be(ee.get(ct.homepage)),((st=ct.seeAlso)==null?void 0:st.length)>0&&Xe(ee.get(ct.seeAlso)),((lt=ct.thumbnail)==null?void 0:lt.length)>0&&tt(ee.get(ct.thumbnail))},[Z,ee]),ae?e$1.createElement(Lt,null,e$1.createElement(zt,null,e$1.createElement(dn,{thumbnail:Je,label:ae.label}),e$1.createElement(cn,{summary:ae.summary}),e$1.createElement(on,{metadata:ae.metadata}),e$1.createElement(an,{requiredStatement:ae.requiredStatement}),e$1.createElement(ln,{rights:ae.rights}),e$1.createElement(nn,{homepage:ve}),e$1.createElement(sn,{seeAlso:Qe}),e$1.createElement(rn,{id:ae.id,htmlLabel:"IIIF Manifest"}))):e$1.createElement(e$1.Fragment,null)},un=()=>{function ie(ye){return ye.map(ve=>{const be=ve.identifier||v4();return{...ve,identifier:be}})}function Z(ye){var ve;const be=[],Qe=[],Xe=ie(ye);for(const Je of Xe){for(;Qe.length>0&&Qe[Qe.length-1].end<=Je.start;)Qe.pop();Qe.length>0?(Qe[Qe.length-1].children||(Qe[Qe.length-1].children=[]),(ve=Qe[Qe.length-1].children)==null||ve.push(Je),Qe.push(Je)):(be.push(Je),Qe.push(Je))}return be}function ee(ye,ve=[]){return ve.some(be=>ye.start>=be.start&&ye.end<=be.end)}function ae(ye=[]){return ye.sort((ve,be)=>ve.start-be.start)}return{addIdentifiersToParsedCues:ie,createNestedCues:Z,isChild:ee,orderCuesByTime:ae}},ue=ne({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),pn=m($f99a8c78507165f7$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"column",width:"100%"}),Be=m($f99a8c78507165f7$export$6d08773d2e66f8f2,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:ue,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:ue,boxSizing:"content-box","@sm":{content:"unset"}}}}),fn=({label:ie,start:Z,end:ee})=>{const[ae,ye]=reactExports.useState(!1),ve=document.getElementById("clover-iiif-video");reactExports.useEffect(()=>(ve==null||ve.addEventListener("timeupdate",()=>{const{currentTime:Qe}=ve;ye(Z<=Qe&&Qe<ee)}),()=>document.removeEventListener("timeupdate",()=>{})),[ee,Z,ve]);const be=()=>{ve&&(ve.pause(),ve.currentTime=Z,ve.play())};return e$1.createElement(Be,{"aria-checked":ae,"data-testid":"information-panel-cue",onClick:be,value:ie},ie,e$1.createElement("strong",null,Ee(Z)))},gn=m("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${Be}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),He=({items:ie})=>e$1.createElement(gn,null,ie.map(Z=>{const{text:ee,start:ae,end:ye,children:ve,identifier:be}=Z;return e$1.createElement("li",{key:be},e$1.createElement(fn,{label:ee,start:ae,end:ye}),ve&&e$1.createElement(He,{items:ve}))})),hn=({resource:ie})=>{const[Z,ee]=e$1.useState([]),{id:ae,label:ye}=ie,{createNestedCues:ve,orderCuesByTime:be}=un();return reactExports.useEffect(()=>{ae&&fetch(ae,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(Qe=>Qe.text()).then(Qe=>{const Xe=nodeWebvtt.parse(Qe).cues,Je=be(Xe),tt=ve(Je);ee(tt)}).catch(Qe=>console.error(ae,Qe.toString()))},[ae]),e$1.createElement(pn,{"aria-label":`navigate ${D(ye,"en")}`},e$1.createElement(He,{items:Z}))},xn=({activeCanvas:ie,resources:Z})=>{var ee;const ae=k(),{configOptions:ye}=ae,{informationPanel:ve}=ye,[be,Qe]=reactExports.useState(),Xe=(ve==null?void 0:ve.renderAbout)||((ee=ye==null?void 0:ye.informationPanel)==null?void 0:ee.renderAbout),Je=ve==null?void 0:ve.renderSupplementing;reactExports.useEffect(()=>{Xe?Qe("manifest-about"):Z&&(Z==null?void 0:Z.length)>0&&!Xe&&Qe(Z[0].id)},[ie,Xe,Z]);const tt=it=>{Qe(it)};return Z?e$1.createElement(Tt,{"data-testid":"information-panel",defaultValue:be,onValueChange:tt,orientation:"horizontal",value:be,className:"clover-viewer-information-panel"},e$1.createElement(Mt,{"aria-label":"select chapter","data-testid":"information-panel-list"},Xe&&e$1.createElement(se,{value:"manifest-about"},"About"),Je&&Z&&Z.map(({id:it,label:st})=>e$1.createElement(se,{key:it,value:it},e$1.createElement(L,{label:st})))),e$1.createElement(Rt,null,Xe&&e$1.createElement(ce,{value:"manifest-about"},e$1.createElement(mn,null)),Je&&Z&&Z.map(it=>e$1.createElement(ce,{key:it.id,value:it.id},e$1.createElement(hn,{resource:it}))))):e$1.createElement(e$1.Fragment,null)},Oe=m("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),vn=m("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),Y=m("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),bn=m("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),yn=m("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${Oe}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),En=(ie,Z)=>{reactExports.useEffect(()=>{function ee(ae){ae.key===ie&&Z()}return window.addEventListener("keyup",ee),()=>window.removeEventListener("keyup",ee)},[])},wn=()=>e$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e$1.createElement("title",null,"Arrow Back"),e$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),Cn=()=>e$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e$1.createElement("title",null,"Arrow Forward"),e$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),Sn=()=>e$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e$1.createElement("title",null,"Close"),e$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),kn=()=>e$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e$1.createElement("title",null,"Search"),e$1.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),In=({handleCanvasToggle:ie,handleFilter:Z,activeIndex:ee,canvasLength:ae})=>{const[ye,ve]=reactExports.useState(!1),[be,Qe]=reactExports.useState(!1),[Xe,Je]=reactExports.useState(!1);reactExports.useEffect(()=>{Je(ee===0),ee===ae-1?Qe(!0):Qe(!1)},[ee,ae]),En("Escape",()=>{ve(!1),Z("")});const tt=()=>{ve(st=>!st),Z("")},it=st=>Z(st.target.value);return e$1.createElement(yn,{isToggle:ye},e$1.createElement(Oe,null,ye&&e$1.createElement(vn,{autoFocus:!0,onChange:it,placeholder:"Search"}),!ye&&e$1.createElement(bn,null,e$1.createElement(Y,{onClick:()=>ie(-1),disabled:Xe,type:"button"},e$1.createElement(wn,null)),e$1.createElement("span",null,ee+1," of ",ae),e$1.createElement(Y,{onClick:()=>ie(1),disabled:be,type:"button"},e$1.createElement(Cn,null))),e$1.createElement(Y,{onClick:tt,type:"button"},ye?e$1.createElement(Sn,null):e$1.createElement(kn,null))))},$n=m($f99a8c78507165f7$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),An=()=>e$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),Tn=()=>e$1.createElement(e$1.Fragment,null,e$1.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),e$1.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),e$1.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),Mn=()=>e$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),Rn=()=>e$1.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),zn=()=>e$1.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"}),De=m("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),Ln=({children:ie})=>e$1.createElement("title",null,ie),S=ie=>e$1.createElement(De,{...ie,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},ie.children);S.Title=Ln,S.Add=An,S.Audio=Tn,S.Close=Mn,S.Image=Rn,S.Video=zn;const Fn=ne({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Pn=ne({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),We=m($cb5cc270b50c6fcd$export$21b07c8f274aebd5,{fill:"$secondaryAlt"}),Vn=m($cb5cc270b50c6fcd$export$f39c2d165cd861fe,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),Bn=m($cb5cc270b50c6fcd$export$7c6e2c02157bb7d2,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:Pn},'&[data-side="bottom"]':{animationName:Fn},'&[data-align="end"]':{[`& ${We}`]:{margin:"0 0.7rem"}}}),Hn=m($cb5cc270b50c6fcd$export$41fb9f06171c75f4,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),On=m($cb5cc270b50c6fcd$export$be92b6f5f03c0fe9,{boxSizing:"content-box"}),Dn=ie=>e$1.createElement(Hn,{...ie},ie.children),Wn=ie=>e$1.createElement(Bn,{...ie},e$1.createElement(We,null),e$1.createElement(Vn,null,e$1.createElement(S,{isSmall:!0},e$1.createElement(S.Close,null))),ie.children),W=({children:ie})=>e$1.createElement(On,null,ie);W.Trigger=Dn,W.Content=Wn;const J=m("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${De}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),Q=m("span",{display:"flex"}),jn=m("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),Nn=m("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),Gn=m($f99a8c78507165f7$export$6d08773d2e66f8f2,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${Q}`]:{position:"absolute",right:"0",bottom:"0",[`& ${J}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${Q}`]:{[`& ${J}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),qn=({type:ie})=>{switch(ie){case"Sound":return e$1.createElement(S.Audio,null);case"Image":return e$1.createElement(S.Image,null);case"Video":return e$1.createElement(S.Video,null);default:return e$1.createElement(S.Image,null)}},Un=({canvas:ie,canvasIndex:Z,isActive:ee,thumbnail:ae,type:ye,handleChange:ve})=>e$1.createElement(Gn,{"aria-checked":ee,"data-testid":"media-thumbnail","data-canvas":Z,onClick:()=>ve(ie.id),value:ie.id},e$1.createElement("figure",null,e$1.createElement("div",null,(ae==null?void 0:ae.id)&&e$1.createElement("img",{src:ae.id,alt:ie!=null&&ie.label?D(ie.label):""}),e$1.createElement(Q,null,e$1.createElement(J,{isIcon:!0,"data-testid":"thumbnail-tag"},e$1.createElement(jn,null),e$1.createElement(S,{"aria-label":ye},e$1.createElement(qn,{type:ye})),["Video","Sound"].includes(ye)&&e$1.createElement(Nn,null,Ee(ie.duration))))),(ie==null?void 0:ie.label)&&e$1.createElement("figcaption",{"data-testid":"fig-caption"},e$1.createElement(L,{label:ie.label})))),_n=ie=>ie.body?ie.body.type:"Image",Zn=({items:ie})=>{const Z=O(),ee=k(),{activeCanvas:ae,vault:ye}=ee,[ve,be]=reactExports.useState(""),[Qe,Xe]=reactExports.useState([]),[Je,tt]=reactExports.useState(0),it=e$1.useRef(null),st="painting",lt=ut=>{ae!==ut&&Z({type:"updateActiveCanvas",canvasId:ut})};reactExports.useEffect(()=>{if(!Qe.length){const ut=["Image","Sound","Video"],mt=ie.map(ei=>Ie(ye,ei,st,ut)).filter(ei=>ei.annotations.length>0);Xe(mt)}},[ie,Qe.length,ye]),reactExports.useEffect(()=>{Qe.forEach((ut,mt)=>{ut!=null&&ut.canvas&&ut.canvas.id===ae&&tt(mt)})},[ae,Qe]),reactExports.useEffect(()=>{const ut=document.querySelector(`[data-canvas="${Je}"]`);if(ut instanceof HTMLElement&&it.current){const mt=ut.offsetLeft-it.current.offsetWidth/2+ut.offsetWidth/2;it.current.scrollTo({left:mt,behavior:"smooth"})}},[Je]);const ct=ut=>be(ut),gt=ut=>{const mt=Qe[Je+ut];mt!=null&&mt.canvas&&lt(mt.canvas.id)};return e$1.createElement(e$1.Fragment,null,e$1.createElement(In,{handleFilter:ct,handleCanvasToggle:gt,activeIndex:Je,canvasLength:Qe.length}),e$1.createElement($n,{"aria-label":"select item","data-testid":"media",ref:it},Qe.filter(ut=>{var mt;if((mt=ut.canvas)!=null&&mt.label){const ei=D(ut.canvas.label);if(Array.isArray(ei))return ei[0].toLowerCase().includes(ve.toLowerCase())}}).map((ut,mt)=>{var ei,ni;return e$1.createElement(Un,{canvas:ut.canvas,canvasIndex:mt,handleChange:lt,isActive:ae===((ei=ut==null?void 0:ut.canvas)==null?void 0:ei.id),key:(ni=ut==null?void 0:ut.canvas)==null?void 0:ni.id,thumbnail:Et(ye,ut,200,200),type:_n(ut.annotations[0])})})))},je=m("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),Ne=m("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),Ge=m(Ne,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),Xn=m("div",{position:"relative",zIndex:"0",display:"flex",flexDirection:"column",gap:"1rem","&:hover":{[`${Ge}`]:{backgroundColor:"$accent"},[`${je}`]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}}),Yn=m("div",{}),Kn=m("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),Jn=m($cc7e05a45900e73f$export$41fb9f06171c75f4,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),Qn=m($cc7e05a45900e73f$export$7c6e2c02157bb7d2,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),er=m($cc7e05a45900e73f$export$6d08773d2e66f8f2,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),tr=m($cc7e05a45900e73f$export$b04be29aa201d4f5,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),qe=m($cc7e05a45900e73f$export$be92b6f5f03c0fe9,{position:"relative",zIndex:"5",width:"100%"}),K=({direction:ie,title:Z})=>{const ee=()=>e$1.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),ae=()=>e$1.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"});return e$1.createElement(Kn,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},e$1.createElement("title",null,Z),ie==="up"&&e$1.createElement(ee,null),ie==="down"&&e$1.createElement(ae,null))},Ue=({children:ie,label:Z,maxHeight:ee,onValueChange:ae,value:ye})=>e$1.createElement(qe,{onValueChange:ae,value:ye},e$1.createElement(Jn,{"data-testid":"select-button"},e$1.createElement($cc7e05a45900e73f$export$e288731fd71264f0,{"data-testid":"select-button-value"}),e$1.createElement($cc7e05a45900e73f$export$99b400cabb58c515,null,e$1.createElement(K,{direction:"down",title:"select"}))),e$1.createElement($cc7e05a45900e73f$export$b2af6c9944296213,null,e$1.createElement(Qn,{css:{maxHeight:`${ee} !important`},"data-testid":"select-content"},e$1.createElement($cc7e05a45900e73f$export$d8117927658af6d7,null,e$1.createElement(K,{direction:"up",title:"scroll up for more"})),e$1.createElement($cc7e05a45900e73f$export$9ed6e7b40248d36d,null,e$1.createElement($cc7e05a45900e73f$export$ee25a334c55de1f4,null,Z&&e$1.createElement(tr,null,e$1.createElement(L,{"data-testid":"select-label",label:Z})),ie)),e$1.createElement($cc7e05a45900e73f$export$ff951e476c12189,null,e$1.createElement(K,{direction:"down",title:"scroll down for more"}))))),_e=ie=>e$1.createElement(er,{...ie},ie.thumbnail&&e$1.createElement(Ve,{thumbnail:ie.thumbnail}),e$1.createElement($cc7e05a45900e73f$export$3572fb0fb821ff49,null,e$1.createElement(L,{label:ie.label})),e$1.createElement($cc7e05a45900e73f$export$6b9198de19accfe6,null)),nr=m("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),rr=m("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),or=m("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),z=({id:ie,label:Z,children:ee})=>e$1.createElement(Ne,{id:ie,"data-testid":"openseadragon-button"},e$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${ie}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},e$1.createElement("title",{id:`${ie}-svg-title`},Z),ee)),ar=m("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),ir=()=>e$1.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),lr=()=>e$1.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),sr=()=>e$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),cr=()=>e$1.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),pe=()=>e$1.createElement(e$1.Fragment,null,e$1.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),e$1.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),dr=({hasPlaceholder:ie,options:Z})=>e$1.createElement(ar,{"data-testid":"openseadragon-controls",hasPlaceholder:ie,id:"openseadragon-controls"},Z.showZoomControl&&e$1.createElement(e$1.Fragment,null,e$1.createElement(z,{id:"zoomIn",label:"zoom in"},e$1.createElement(ir,null)),e$1.createElement(z,{id:"zoomOut",label:"zoom out"},e$1.createElement(lr,null))),Z.showFullPageControl&&e$1.createElement(z,{id:"fullPage",label:"full page"},e$1.createElement(sr,null)),Z.showRotationControl&&e$1.createElement(e$1.Fragment,null,e$1.createElement(z,{id:"rotateRight",label:"rotate right"},e$1.createElement(pe,null)),e$1.createElement(z,{id:"rotateLeft",label:"rotate left"},e$1.createElement(pe,null))),Z.showHomeControl&&e$1.createElement(z,{id:"reset",label:"reset"},e$1.createElement(cr,null))),mr=ie=>fetch(`${ie.replace(/\/$/,"")}/info.json`).then(Z=>Z.json()).then(Z=>Z).catch(Z=>{console.error(`The IIIF tilesource ${ie.replace(/\/$/,"")}/info.json failed to load: ${Z}`)}),ur=ie=>{let Z,ee;if(Array.isArray(ie)&&(Z=ie[0],Z)){let ae;"@id"in Z?ae=Z["@id"]:ae=Z.id,ee=ae}return ee},pr=({uri:ie,hasPlaceholder:Z,imageType:ee})=>{const[ae,ye]=reactExports.useState(),[ve,be]=reactExports.useState(),Qe=k(),{configOptions:Xe}=Qe,Je={id:`openseadragon-viewport-${ve}`,loadTilesWithAjax:!0,fullPageButton:"fullPage",homeButton:"reset",rotateLeftButton:"rotateLeft",rotateRightButton:"rotateRight",zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",navigatorId:`openseadragon-navigator-${ve}`,gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!0},...Xe.openSeadragon,ajaxWithCredentials:Xe.withCredentials};return reactExports.useEffect(()=>{ie!==ae&&(ye(ie),be(v4()))},[ae,ie]),reactExports.useEffect(()=>{if(ae)switch(ee){case"simpleImage":le(Je).addSimpleImage({url:ae});break;case"tiledImage":mr(ae).then(tt=>le(Je).addTiledImage({tileSource:tt}));break;default:console.warn(`Unable to render ${ae} in OpenSeadragon as type: "${ee}"`);break}},[ae]),ve?e$1.createElement(or,{css:{backgroundColor:Xe.canvasBackgroundColor,height:Xe.canvasHeight},className:"clover-viewer-osd-wrapper","data-testid":"clover-viewer-osd-wrapper"},e$1.createElement(dr,{hasPlaceholder:Z,options:Je}),e$1.createElement(nr,{id:`openseadragon-navigator-${ve}`}),e$1.createElement(rr,{id:`openseadragon-viewport-${ve}`})):null},fr=({painting:ie,hasPlaceholder:Z})=>{const[ee,ae]=reactExports.useState(),[ye,ve]=reactExports.useState();return reactExports.useEffect(()=>{Array.isArray(ie==null?void 0:ie.service)&&(ie==null?void 0:ie.service.length)>0?(ae("tiledImage"),ve(ur(ie==null?void 0:ie.service))):(ae("simpleImage"),ve(ie==null?void 0:ie.id))},[ie]),e$1.createElement(pr,{uri:ye,key:ye,hasPlaceholder:Z,imageType:ee})},gr=({isMedia:ie,label:Z,placeholderCanvas:ee,setIsInteractive:ae})=>{const{vault:ye}=k(),ve=N(ye,ee),be=ve?ve[0]:void 0,Qe=Z?D(Z):["placeholder image"];return e$1.createElement(je,{onClick:()=>ae(!0),isMedia:ie,className:"clover-viewer-placeholder"},e$1.createElement("img",{src:(be==null?void 0:be.id)||"",alt:Qe.join(),height:be==null?void 0:be.height,width:be==null?void 0:be.width}))},hr=m("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),xr=e$1.forwardRef((ie,Z)=>{const ee=e$1.useRef(null),ae=reactExports.useCallback(()=>{var ve,be;if((ve=Z.current)!=null&&ve.currentTime&&((be=Z.current)==null?void 0:be.currentTime)>0)return;const Qe=Z.current;if(!Qe)return;const Xe=new AudioContext,Je=Xe.createMediaElementSource(Qe),tt=Xe.createAnalyser(),it=ee.current;if(!it)return;it.width=Qe.offsetWidth,it.height=Qe.offsetHeight;const st=it.getContext("2d");Je.connect(tt),tt.connect(Xe.destination),tt.fftSize=256;const lt=tt.frequencyBinCount,ct=new Uint8Array(lt);setInterval(function(){ye(tt,st,lt,ct,it.width,it.height)},20)},[Z]);e$1.useEffect(()=>{!Z||!Z.current||(Z.current.onplay=ae)},[ae,Z]);function ye(ve,be,Qe,Xe,Je,tt){const it=Je/Qe*2.6;let st,lt=0;ve.getByteFrequencyData(Xe),be.fillStyle="#000000",be.fillRect(0,0,Je,tt);for(let ct=0;ct<Qe;ct++)st=Xe[ct]*2,be.fillStyle="rgba(78, 42, 132, 1)",be.fillRect(lt,tt-st,it,st),lt+=it+6}return e$1.createElement(hr,{ref:ee,role:"presentation"})}),vr=m("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),br=({resource:ie,ignoreCaptionLabels:Z})=>{const ee=D(ie.label,"en");return Array.isArray(ee)&&ee.some(ae=>Z.includes(ae))?null:e$1.createElement("track",{key:ie.id,src:ie.id,label:Array.isArray(ee)?ee[0]:ee,srcLang:"en","data-testid":"player-track"})},yr=({allSources:ie,resources:Z,painting:ee})=>{const[ae,ye]=e$1.useState(0),[ve,be]=e$1.useState(),Qe=e$1.useRef(null),Xe=(ee==null?void 0:ee.type)==="Sound",Je=k(),{activeCanvas:tt,configOptions:it,vault:st}=Je;return reactExports.useEffect(()=>{if(!ee.id||!Qe.current)return;if(Qe!=null&&Qe.current){const gt=Qe.current;gt.src=ee.id,gt.load()}if(ee.id.split(".").pop()!=="m3u8")return;const lt={xhrSetup:function(gt,ut){gt.withCredentials=!!it.withCredentials}},ct=new Hls(lt);return ct.attachMedia(Qe.current),ct.on(Hls.Events.MEDIA_ATTACHED,function(){ct.loadSource(ee.id)}),ct.on(Hls.Events.ERROR,function(gt,ut){if(ut.fatal)switch(ut.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${gt} network error encountered, try to recover`),ct.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${gt} media error encountered, try to recover`),ct.recoverMediaError();break;default:ct.destroy();break}}),()=>{if(ct&&Qe.current){const gt=Qe.current;ct.detachMedia(),ct.destroy(),gt.currentTime=0}}},[it.withCredentials,ee.id]),reactExports.useEffect(()=>{var lt,ct,gt,ut;const mt=st.get(tt),ei=(lt=mt.accompanyingCanvas)!=null&&lt.id?N(st,(ct=mt.accompanyingCanvas)==null?void 0:ct.id):null,ni=(gt=mt.placeholderCanvas)!=null&&gt.id?N(st,(ut=mt.placeholderCanvas)==null?void 0:ut.id):null;ei&&ni?be(ae===0?ni[0].id:ei[0].id):(ei&&be(ei[0].id),ni&&be(ni[0].id))},[tt,ae,st]),reactExports.useEffect(()=>{if(Qe!=null&&Qe.current){const lt=Qe.current;return lt==null||lt.addEventListener("timeupdate",()=>ye(lt.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),e$1.createElement(vr,{css:{backgroundColor:it.canvasBackgroundColor,maxHeight:it.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper"},e$1.createElement("video",{id:"clover-iiif-video",key:ee.id,ref:Qe,controls:!0,height:ee.height,width:ee.width,crossOrigin:"anonymous",poster:ve,style:{maxHeight:it.canvasHeight,position:"relative",zIndex:"1"}},ie.map(lt=>e$1.createElement("source",{src:lt.id,type:lt.format,key:lt.id})),Z.length>0&&Z.map(lt=>e$1.createElement(br,{resource:lt,ignoreCaptionLabels:it.ignoreCaptionLabels||[],key:lt.id})),"Sorry, your browser doesn't support embedded videos."),Xe&&e$1.createElement(xr,{ref:Qe}))},Er=()=>e$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},e$1.createElement("title",{id:"close-svg-title"},"close"),e$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),wr=({isMedia:ie})=>e$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},e$1.createElement("title",{id:"open-svg-title"},"open"),ie?e$1.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):e$1.createElement(e$1.Fragment,null,e$1.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),e$1.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),Cr=({handleToggle:ie,isInteractive:Z,isMedia:ee})=>e$1.createElement(Ge,{onClick:ie,isInteractive:Z,isMedia:ee,"data-testid":"placeholder-toggle"},Z?e$1.createElement(Er,null):e$1.createElement(wr,{isMedia:ee})),Sr=({activeCanvas:ie,isMedia:Z,painting:ee,resources:ae})=>{var ye,ve,be;const[Qe,Xe]=e$1.useState(0),[Je,tt]=e$1.useState(!1),{configOptions:it,customDisplays:st,vault:lt}=k(),ct=lt.get(ie),gt=(ye=ct==null?void 0:ct.placeholderCanvas)==null?void 0:ye.id,ut=!!gt,mt=(ee==null?void 0:ee.length)>1,ei=gt&&!Je&&!Z,ni=()=>tt(!Je),ri=ai=>{const ci=ee.findIndex(Ci=>Ci.id===ai);Xe(ci)},si=st.find(ai=>{var ci;let Ci=!1;const{canvasId:pi,paintingFormat:gi}=ai.target;if(Array.isArray(pi)&&pi.length>0&&(Ci=pi.includes(ie)),Array.isArray(gi)&&gi.length>0){const _i=((ci=ee[Qe])==null?void 0:ci.format)||"";Ci=!!(_i&&gi.includes(_i))}return Ci}),li=(ve=si==null?void 0:si.display)==null?void 0:ve.component;return e$1.createElement(Xn,{className:"clover-viewer-painting"},e$1.createElement(Yn,{style:{backgroundColor:it.canvasBackgroundColor,maxHeight:it.canvasHeight}},gt&&!Z&&e$1.createElement(Cr,{handleToggle:ni,isInteractive:Je,isMedia:Z}),ei&&!Z&&e$1.createElement(gr,{isMedia:Z,label:ct==null?void 0:ct.label,placeholderCanvas:gt,setIsInteractive:tt}),!ei&&!si&&(Z?e$1.createElement(yr,{allSources:ee,painting:ee[Qe],resources:ae}):ee&&e$1.createElement(fr,{painting:ee[Qe],hasPlaceholder:ut,key:ie})),!ei&&li&&e$1.createElement(li,{id:ie,annotationBody:ee[Qe],...si==null?void 0:si.display.componentProps})),mt&&e$1.createElement(Ue,{value:(be=ee[Qe])==null?void 0:be.id,onValueChange:ri,maxHeight:"200px"},ee==null?void 0:ee.map(ai=>e$1.createElement(_e,{value:ai==null?void 0:ai.id,key:ai==null?void 0:ai.id,label:ai==null?void 0:ai.label}))))},kr=({activeCanvas:ie,painting:Z,resources:ee,items:ae,isAudioVideo:ye})=>{const{informationOpen:ve,configOptions:be}=k(),{informationPanel:Qe}=be,Xe=(Qe==null?void 0:Qe.renderAbout)||(Qe==null?void 0:Qe.renderSupplementing)&&ee.length>0;return e$1.createElement(Ae,{className:"clover-viewer-content","data-testid":"clover-viewer-content"},e$1.createElement(Te,null,e$1.createElement(Sr,{activeCanvas:ie,isMedia:ye,painting:Z,resources:ee}),Xe&&e$1.createElement(Me,null,e$1.createElement("span",null,ve?"View Items":"More Information")),ae.length>1&&e$1.createElement($e,{className:"clover-viewer-media-wrapper"},e$1.createElement(Zn,{items:ae,activeItem:0}))),ve&&Xe&&e$1.createElement($t,null,e$1.createElement(Re,null,e$1.createElement(xn,{activeCanvas:ie,resources:ee}))))},Ir=m(W.Trigger,{width:"30px",padding:"5px"}),$r=m(W.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),Ar=m("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),Tr=m("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${qe}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),Mr=m("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),Rr=()=>{var ie;const Z=O(),ee=k(),{activeManifest:ae,collection:ye,configOptions:ve,vault:be}=ee,Qe=ve==null?void 0:ve.canvasHeight,Xe=Je=>{Z({type:"updateActiveManifest",manifestId:Je})};return e$1.createElement("div",{style:{margin:"0.75rem"}},e$1.createElement(Ue,{label:ye.label,maxHeight:Qe,value:ae,onValueChange:Xe},(ie=ye==null?void 0:ye.items)==null?void 0:ie.map(Je=>e$1.createElement(_e,{value:Je.id,key:Je.id,thumbnail:Je!=null&&Je.thumbnail?be.get(Je==null?void 0:Je.thumbnail):void 0,label:Je.label}))))},zr=(ie,Z=2500)=>{const[ee,ae]=reactExports.useState(),ye=reactExports.useCallback(()=>{navigator.clipboard.writeText(ie).then(()=>ae("copied"),()=>ae("failed"))},[ie]);return reactExports.useEffect(()=>{if(!ee)return;const ve=setTimeout(()=>ae(void 0),Z);return()=>clearTimeout(ve)},[ee]),[ee,ye]},Lr=m("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),Fr=({status:ie})=>ie?e$1.createElement(Lr,{"data-copy-status":ie},ie):null,fe=({textPrompt:ie,textToCopy:Z})=>{const[ee,ae]=zr(Z);return e$1.createElement("button",{onClick:ae},ie," ",e$1.createElement(Fr,{status:ee}))},Pr=()=>{const ie="#ed1d33",Z="#2873ab";return e$1.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},e$1.createElement("title",null,"IIIF Manifest Options"),e$1.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},e$1.createElement("g",{transform:"scale(0.1)"},e$1.createElement("path",{style:{fill:Z},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),e$1.createElement("path",{style:{fill:Z},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),e$1.createElement("path",{style:{fill:ie},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),e$1.createElement("path",{style:{fill:ie},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),e$1.createElement("path",{style:{fill:Z},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),e$1.createElement("path",{style:{fill:Z},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),e$1.createElement("path",{style:{fill:ie},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},Vr=m($6be4966fd9bbc698$export$be92b6f5f03c0fe9,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),Br=m($6be4966fd9bbc698$export$6521433ed15a34db,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),Hr=m("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),Or=m("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Dr=()=>{var ie;const{configOptions:Z}=k(),ee=O(),[ae,ye]=reactExports.useState((ie=Z==null?void 0:Z.informationPanel)==null?void 0:ie.open);return reactExports.useEffect(()=>{ee({type:"updateInformationOpen",informationOpen:ae})},[ae]),e$1.createElement(Or,null,e$1.createElement(Hr,{htmlFor:"information-toggle",css:ae?{opacity:"1"}:{}},"More Information"),e$1.createElement(Vr,{checked:ae,onCheckedChange:()=>ye(!ae),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},e$1.createElement(Br,null)))},Ze=ie=>{const Z=()=>window.matchMedia?window.matchMedia(ie).matches:!1,[ee,ae]=reactExports.useState(Z);return reactExports.useEffect(()=>{const ye=()=>ae(Z);return window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)}),ee},Wr=({manifestId:ie,manifestLabel:Z})=>{const ee=k(),{collection:ae,configOptions:ye}=ee,{showTitle:ve,showIIIFBadge:be,informationPanel:Qe}=ye,Xe=be||(Qe==null?void 0:Qe.renderToggle),Je=Ze(te.sm);return e$1.createElement(Tr,{className:"clover-viewer-header"},ae!=null&&ae.items?e$1.createElement(Rr,null):e$1.createElement(Ar,{className:ve?"":"visually-hidden"},ve&&e$1.createElement(L,{label:Z,className:"label"})),Xe&&e$1.createElement(Mr,null,be&&e$1.createElement(W,null,e$1.createElement(Ir,null,e$1.createElement(Pr,null)),e$1.createElement($r,null,(ae==null?void 0:ae.items)&&e$1.createElement("button",{onClick:tt=>{tt.preventDefault(),window.open(ae.id,"_blank")}},"View Collection"),e$1.createElement("button",{onClick:tt=>{tt.preventDefault(),window.open(ie,"_blank")}},"View Manifest")," ",(ae==null?void 0:ae.items)&&e$1.createElement(fe,{textPrompt:"Copy Collection URL",textToCopy:ae.id}),e$1.createElement(fe,{textPrompt:"Copy Manifest URL",textToCopy:ie}))),(Qe==null?void 0:Qe.renderToggle)&&!Je&&e$1.createElement(Dr,null)))},jr=(ie=!1)=>{const[Z,ee]=reactExports.useState(ie);return reactExports.useLayoutEffect(()=>{if(!Z)return;const ae=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=ae}},[Z]),reactExports.useEffect(()=>{Z!==ie&&ee(ie)},[ie]),[Z,ee]},Nr=({manifest:ie,theme:Z})=>{var ee;const ae=k(),ye=O(),{activeCanvas:ve,informationOpen:be,vault:Qe,configOptions:Xe}=ae,[Je,tt]=reactExports.useState(!1),[it,st]=reactExports.useState(!1),[lt,ct]=reactExports.useState([]),[gt,ut]=reactExports.useState([]),[mt,ei]=jr(!1),ni=Ze(te.sm),ri=reactExports.useCallback(si=>{ye({type:"updateInformationOpen",informationOpen:si})},[ye]);return reactExports.useEffect(()=>{var si;(si=Xe==null?void 0:Xe.informationPanel)!=null&&si.open&&ri(!ni)},[ni,(ee=Xe==null?void 0:Xe.informationPanel)==null?void 0:ee.open,ri]),reactExports.useEffect(()=>{if(!ni){ei(!1);return}ei(be)},[be,ni,ei]),reactExports.useEffect(()=>{const si=N(Qe,ve),li=yt(Qe,ve,"text/vtt");si&&(st(["Sound","Video"].indexOf(si[0].type)>-1),ct(si)),ut(li),tt(li.length!==0)},[ve,Qe]),e$1.createElement(ErrorBoundary,{FallbackComponent:It},e$1.createElement(At,{className:`${Z} clover-viewer`,css:{background:Xe==null?void 0:Xe.background},"data-body-locked":mt,"data-information-panel":Je,"data-information-panel-open":be},e$1.createElement($409067139f391064$export$be92b6f5f03c0fe9,{open:be,onOpenChange:ri},e$1.createElement(Wr,{manifestLabel:ie.label,manifestId:ie.id}),e$1.createElement(kr,{activeCanvas:ve,painting:lt,resources:gt,items:ie.items,isAudioVideo:it}))))},ge={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function Gr(ie){return{ok:ie.status>=200&&ie.status<300,status:ie.status,statusText:ie.statusText,headers:ie.getAllResponseHeaders(),data:ie.responseText,json:()=>JSON.parse(ie.responseText)}}function he(ie,Z=null){return{ok:!1,status:ie.status,statusText:ie.statusText,headers:ie.getAllResponseHeaders(),data:Z||ie.statusText,json:()=>JSON.parse(Z||ie.statusText)}}function qr(ie,Z=ge){const ee=Z.headers||ge.headers;return new Promise((ae,ye)=>{const ve=new XMLHttpRequest;ve.open("get",ie),ve.withCredentials=Z.withCredentials,ee&&Object.keys(ee).forEach(be=>ve.setRequestHeader(be,ee[be])),ve.onload=()=>{ae(Gr(ve))},ve.onerror=()=>{ye(he(ve,"Failed to make request."))},ve.ontimeout=()=>{ye(he(ve,"Request took longer than expected."))},ve.send()})}const ao=({canvasIdCallback:ie=()=>{},customDisplays:Z=[],customTheme:ee,iiifContent:ae,id:ye,manifestId:ve,options:be})=>{var Qe;let Xe=ae;return ye&&(Xe=ye),ve&&(Xe=ve),e$1.createElement(bt,{initialState:{..._,customDisplays:Z,informationOpen:!!((Qe=be==null?void 0:be.informationPanel)!=null&&Qe.open),vault:new Vault({customFetcher:Je=>qr(Je,{withCredentials:be==null?void 0:be.withCredentials,headers:be==null?void 0:be.requestHeaders}).then(tt=>JSON.parse(tt.data))})}},e$1.createElement(Ur,{iiifContent:Xe,canvasIdCallback:ie,customTheme:ee,options:be}))},Ur=({canvasIdCallback:ie,customTheme:Z,iiifContent:ee,options:ae})=>{const ye=O(),ve=k(),{activeCanvas:be,activeManifest:Qe,isLoaded:Xe,vault:Je}=ve,[tt,it]=reactExports.useState(),[st,lt]=reactExports.useState();let ct={};return Z&&(ct=Q$1("custom",Z)),reactExports.useEffect(()=>{ie&&ie(be)},[be,ie]),reactExports.useEffect(()=>{Qe&&Je.loadManifest(Qe).then(gt=>{lt(gt),ye({type:"updateActiveCanvas",canvasId:gt.items[0]&&gt.items[0].id})}).catch(gt=>{console.error(`Manifest failed to load: ${gt}`)}).finally(()=>{ye({type:"updateIsLoaded",isLoaded:!0})})},[Qe,ye,Je]),reactExports.useEffect(()=>{ye({type:"updateConfigOptions",configOptions:ae}),Je.load(ee).then(gt=>{it(gt)}).catch(gt=>{console.error(`The IIIF resource ${ee} failed to load: ${gt}`)})},[ye,ee,ae,Je]),reactExports.useEffect(()=>{let gt=[];(tt==null?void 0:tt.type)==="Collection"?(ye({type:"updateCollection",collection:tt}),gt=tt.items.filter(ut=>ut.type==="Manifest").map(ut=>ut.id),gt.length>0&&ye({type:"updateActiveManifest",manifestId:gt[0]})):(tt==null?void 0:tt.type)==="Manifest"&&ye({type:"updateActiveManifest",manifestId:tt.id})},[ye,tt]),Xe?!st||!st.items?(console.log(`The IIIF manifest ${ee} failed to load.`),e$1.createElement(e$1.Fragment,null)):st.items.length===0?(console.log(`The IIIF manifest ${ee} does not contain canvases.`),e$1.createElement(e$1.Fragment,null)):e$1.createElement(Nr,{manifest:st,theme:ct,key:st.id}):e$1.createElement(e$1.Fragment,null,"Loading")};class CloverInitializer{constructor(){this.element=document.getElementById("clover-viewer"),this.element&&(this.iiif_content=this.element.attributes.iiif_content.value)}run(){if(!this.iiif_content)return!1;createRoot(document.getElementById("clover-viewer")).render(reactExports.createElement(ao,{id:this.iiif_content,options:this.config}))}get config(){return{showTitle:!1,showIIIFBadge:!1,informationPanel:{renderToggle:!1,renderAbout:!1}}}}class RawDecoder extends BaseDecoder{decodeBlock(Z){return Z}}const raw=Object.freeze(Object.defineProperty({__proto__:null,default:RawDecoder},Symbol.toStringTag,{value:"Module"})),MIN_BITS=9,CLEAR_CODE=256,EOI_CODE=257,MAX_BYTELENGTH=12;function getByte(ie,Z,ee){const ae=Z%8,ye=Math.floor(Z/8),ve=8-ae,be=Z+ee-(ye+1)*8;let Qe=8*(ye+2)-(Z+ee);const Xe=(ye+2)*8-Z;if(Qe=Math.max(0,Qe),ye>=ie.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),EOI_CODE;let Je=ie[ye]&2**(8-ae)-1;Je<<=ee-ve;let tt=Je;if(ye+1<ie.length){let it=ie[ye+1]>>>Qe;it<<=Math.max(0,ee-Xe),tt+=it}if(be>8&&ye+2<ie.length){const it=(ye+3)*8-(Z+ee),st=ie[ye+2]>>>it;tt+=st}return tt}function appendReversed(ie,Z){for(let ee=Z.length-1;ee>=0;ee--)ie.push(Z[ee]);return ie}function decompress(ie){const Z=new Uint16Array(4093),ee=new Uint8Array(4093);for(let ct=0;ct<=257;ct++)Z[ct]=4096,ee[ct]=ct;let ae=258,ye=MIN_BITS,ve=0;function be(){ae=258,ye=MIN_BITS}function Qe(ct){const gt=getByte(ct,ve,ye);return ve+=ye,gt}function Xe(ct,gt){return ee[ae]=gt,Z[ae]=ct,ae++,ae-1}function Je(ct){const gt=[];for(let ut=ct;ut!==4096;ut=Z[ut])gt.push(ee[ut]);return gt}const tt=[];be();const it=new Uint8Array(ie);let st=Qe(it),lt;for(;st!==EOI_CODE;){if(st===CLEAR_CODE){for(be(),st=Qe(it);st===CLEAR_CODE;)st=Qe(it);if(st===EOI_CODE)break;if(st>CLEAR_CODE)throw new Error(`corrupted code at scanline ${st}`);{const ct=Je(st);appendReversed(tt,ct),lt=st}}else if(st<ae){const ct=Je(st);appendReversed(tt,ct),Xe(lt,ct[ct.length-1]),lt=st}else{const ct=Je(lt);if(!ct)throw new Error(`Bogus entry. Not in dictionary, ${lt} / ${ae}, position: ${ve}`);appendReversed(tt,ct),tt.push(ct[ct.length-1]),Xe(lt,ct[ct.length-1]),lt=st}ae+1>=2**ye&&(ye===MAX_BYTELENGTH?lt=void 0:ye++),st=Qe(it)}return new Uint8Array(tt)}class LZWDecoder extends BaseDecoder{decodeBlock(Z){return decompress(Z).buffer}}const lzw=Object.freeze(Object.defineProperty({__proto__:null,default:LZWDecoder},Symbol.toStringTag,{value:"Module"})),dctZigZag=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dctCos1=4017,dctSin1=799,dctCos3=3406,dctSin3=2276,dctCos6=1567,dctSin6=3784,dctSqrt2=5793,dctSqrt1d2=2896;function buildHuffmanTable(ie,Z){let ee=0;const ae=[];let ye=16;for(;ye>0&&!ie[ye-1];)--ye;ae.push({children:[],index:0});let ve=ae[0],be;for(let Qe=0;Qe<ye;Qe++){for(let Xe=0;Xe<ie[Qe];Xe++){for(ve=ae.pop(),ve.children[ve.index]=Z[ee];ve.index>0;)ve=ae.pop();for(ve.index++,ae.push(ve);ae.length<=Qe;)ae.push(be={children:[],index:0}),ve.children[ve.index]=be.children,ve=be;ee++}Qe+1<ye&&(ae.push(be={children:[],index:0}),ve.children[ve.index]=be.children,ve=be)}return ae[0].children}function decodeScan(ie,Z,ee,ae,ye,ve,be,Qe,Xe){const{mcusPerLine:Je,progressive:tt}=ee,it=Z;let st=Z,lt=0,ct=0;function gt(){if(ct>0)return ct--,lt>>ct&1;if(lt=ie[st++],lt===255){const Ui=ie[st++];if(Ui)throw new Error(`unexpected marker: ${(lt<<8|Ui).toString(16)}`)}return ct=7,lt>>>7}function ut(Ui){let Vi=Ui,Kr;for(;(Kr=gt())!==null;){if(Vi=Vi[Kr],typeof Vi=="number")return Vi;if(typeof Vi!="object")throw new Error("invalid huffman sequence")}return null}function mt(Ui){let Vi=Ui,Kr=0;for(;Vi>0;){const Wi=gt();if(Wi===null)return;Kr=Kr<<1|Wi,--Vi}return Kr}function ei(Ui){const Vi=mt(Ui);return Vi>=1<<Ui-1?Vi:Vi+(-1<<Ui)+1}function ni(Ui,Vi){const Kr=ut(Ui.huffmanTableDC),Wi=Kr===0?0:ei(Kr);Ui.pred+=Wi,Vi[0]=Ui.pred;let Zr=1;for(;Zr<64;){const ps=ut(Ui.huffmanTableAC),Is=ps&15,_s=ps>>4;if(Is===0){if(_s<15)break;Zr+=16}else{Zr+=_s;const ws=dctZigZag[Zr];Vi[ws]=ei(Is),Zr++}}}function ri(Ui,Vi){const Kr=ut(Ui.huffmanTableDC),Wi=Kr===0?0:ei(Kr)<<Xe;Ui.pred+=Wi,Vi[0]=Ui.pred}function si(Ui,Vi){Vi[0]|=gt()<<Xe}let li=0;function ai(Ui,Vi){if(li>0){li--;return}let Kr=ve;const Wi=be;for(;Kr<=Wi;){const Zr=ut(Ui.huffmanTableAC),ps=Zr&15,Is=Zr>>4;if(ps===0){if(Is<15){li=mt(Is)+(1<<Is)-1;break}Kr+=16}else{Kr+=Is;const _s=dctZigZag[Kr];Vi[_s]=ei(ps)*(1<<Xe),Kr++}}}let ci=0,Ci;function pi(Ui,Vi){let Kr=ve;const Wi=be;let Zr=0;for(;Kr<=Wi;){const ps=dctZigZag[Kr],Is=Vi[ps]<0?-1:1;switch(ci){case 0:{const _s=ut(Ui.huffmanTableAC),ws=_s&15;if(Zr=_s>>4,ws===0)Zr<15?(li=mt(Zr)+(1<<Zr),ci=4):(Zr=16,ci=1);else{if(ws!==1)throw new Error("invalid ACn encoding");Ci=ei(ws),ci=Zr?2:3}continue}case 1:case 2:Vi[ps]?Vi[ps]+=(gt()<<Xe)*Is:(Zr--,Zr===0&&(ci=ci===2?3:0));break;case 3:Vi[ps]?Vi[ps]+=(gt()<<Xe)*Is:(Vi[ps]=Ci<<Xe,ci=0);break;case 4:Vi[ps]&&(Vi[ps]+=(gt()<<Xe)*Is);break}Kr++}ci===4&&(li--,li===0&&(ci=0))}function gi(Ui,Vi,Kr,Wi,Zr){const ps=Kr/Je|0,Is=Kr%Je,_s=ps*Ui.v+Wi,ws=Is*Ui.h+Zr;Vi(Ui,Ui.blocks[_s][ws])}function _i(Ui,Vi,Kr){const Wi=Kr/Ui.blocksPerLine|0,Zr=Kr%Ui.blocksPerLine;Vi(Ui,Ui.blocks[Wi][Zr])}const bi=ae.length;let Mi,yi,Ti,Ii,Ri,Pi;tt?ve===0?Pi=Qe===0?ri:si:Pi=Qe===0?ai:pi:Pi=ni;let xi=0,ki,Li;bi===1?Li=ae[0].blocksPerLine*ae[0].blocksPerColumn:Li=Je*ee.mcusPerColumn;const Yr=ye||Li;for(;xi<Li;){for(yi=0;yi<bi;yi++)ae[yi].pred=0;if(li=0,bi===1)for(Mi=ae[0],Ri=0;Ri<Yr;Ri++)_i(Mi,Pi,xi),xi++;else for(Ri=0;Ri<Yr;Ri++){for(yi=0;yi<bi;yi++){Mi=ae[yi];const{h:Ui,v:Vi}=Mi;for(Ti=0;Ti<Vi;Ti++)for(Ii=0;Ii<Ui;Ii++)gi(Mi,Pi,xi,Ti,Ii)}if(xi++,xi===Li)break}if(ct=0,ki=ie[st]<<8|ie[st+1],ki<65280)throw new Error("marker was not found");if(ki>=65488&&ki<=65495)st+=2;else break}return st-it}function buildComponentData(ie,Z){const ee=[],{blocksPerLine:ae,blocksPerColumn:ye}=Z,ve=ae<<3,be=new Int32Array(64),Qe=new Uint8Array(64);function Xe(Je,tt,it){const st=Z.quantizationTable;let lt,ct,gt,ut,mt,ei,ni,ri,si;const li=it;let ai;for(ai=0;ai<64;ai++)li[ai]=Je[ai]*st[ai];for(ai=0;ai<8;++ai){const ci=8*ai;if(li[1+ci]===0&&li[2+ci]===0&&li[3+ci]===0&&li[4+ci]===0&&li[5+ci]===0&&li[6+ci]===0&&li[7+ci]===0){si=dctSqrt2*li[0+ci]+512>>10,li[0+ci]=si,li[1+ci]=si,li[2+ci]=si,li[3+ci]=si,li[4+ci]=si,li[5+ci]=si,li[6+ci]=si,li[7+ci]=si;continue}lt=dctSqrt2*li[0+ci]+128>>8,ct=dctSqrt2*li[4+ci]+128>>8,gt=li[2+ci],ut=li[6+ci],mt=dctSqrt1d2*(li[1+ci]-li[7+ci])+128>>8,ri=dctSqrt1d2*(li[1+ci]+li[7+ci])+128>>8,ei=li[3+ci]<<4,ni=li[5+ci]<<4,si=lt-ct+1>>1,lt=lt+ct+1>>1,ct=si,si=gt*dctSin6+ut*dctCos6+128>>8,gt=gt*dctCos6-ut*dctSin6+128>>8,ut=si,si=mt-ni+1>>1,mt=mt+ni+1>>1,ni=si,si=ri+ei+1>>1,ei=ri-ei+1>>1,ri=si,si=lt-ut+1>>1,lt=lt+ut+1>>1,ut=si,si=ct-gt+1>>1,ct=ct+gt+1>>1,gt=si,si=mt*dctSin3+ri*dctCos3+2048>>12,mt=mt*dctCos3-ri*dctSin3+2048>>12,ri=si,si=ei*dctSin1+ni*dctCos1+2048>>12,ei=ei*dctCos1-ni*dctSin1+2048>>12,ni=si,li[0+ci]=lt+ri,li[7+ci]=lt-ri,li[1+ci]=ct+ni,li[6+ci]=ct-ni,li[2+ci]=gt+ei,li[5+ci]=gt-ei,li[3+ci]=ut+mt,li[4+ci]=ut-mt}for(ai=0;ai<8;++ai){const ci=ai;if(li[1*8+ci]===0&&li[2*8+ci]===0&&li[3*8+ci]===0&&li[4*8+ci]===0&&li[5*8+ci]===0&&li[6*8+ci]===0&&li[7*8+ci]===0){si=dctSqrt2*it[ai+0]+8192>>14,li[0*8+ci]=si,li[1*8+ci]=si,li[2*8+ci]=si,li[3*8+ci]=si,li[4*8+ci]=si,li[5*8+ci]=si,li[6*8+ci]=si,li[7*8+ci]=si;continue}lt=dctSqrt2*li[0*8+ci]+2048>>12,ct=dctSqrt2*li[4*8+ci]+2048>>12,gt=li[2*8+ci],ut=li[6*8+ci],mt=dctSqrt1d2*(li[1*8+ci]-li[7*8+ci])+2048>>12,ri=dctSqrt1d2*(li[1*8+ci]+li[7*8+ci])+2048>>12,ei=li[3*8+ci],ni=li[5*8+ci],si=lt-ct+1>>1,lt=lt+ct+1>>1,ct=si,si=gt*dctSin6+ut*dctCos6+2048>>12,gt=gt*dctCos6-ut*dctSin6+2048>>12,ut=si,si=mt-ni+1>>1,mt=mt+ni+1>>1,ni=si,si=ri+ei+1>>1,ei=ri-ei+1>>1,ri=si,si=lt-ut+1>>1,lt=lt+ut+1>>1,ut=si,si=ct-gt+1>>1,ct=ct+gt+1>>1,gt=si,si=mt*dctSin3+ri*dctCos3+2048>>12,mt=mt*dctCos3-ri*dctSin3+2048>>12,ri=si,si=ei*dctSin1+ni*dctCos1+2048>>12,ei=ei*dctCos1-ni*dctSin1+2048>>12,ni=si,li[0*8+ci]=lt+ri,li[7*8+ci]=lt-ri,li[1*8+ci]=ct+ni,li[6*8+ci]=ct-ni,li[2*8+ci]=gt+ei,li[5*8+ci]=gt-ei,li[3*8+ci]=ut+mt,li[4*8+ci]=ut-mt}for(ai=0;ai<64;++ai){const ci=128+(li[ai]+8>>4);ci<0?tt[ai]=0:ci>255?tt[ai]=255:tt[ai]=ci}}for(let Je=0;Je<ye;Je++){const tt=Je<<3;for(let it=0;it<8;it++)ee.push(new Uint8Array(ve));for(let it=0;it<ae;it++){Xe(Z.blocks[Je][it],Qe,be);let st=0;const lt=it<<3;for(let ct=0;ct<8;ct++){const gt=ee[tt+ct];for(let ut=0;ut<8;ut++)gt[lt+ut]=Qe[st++]}}}return ee}class JpegStreamReader{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(Z){let ee=0;function ae(){const Qe=Z[ee]<<8|Z[ee+1];return ee+=2,Qe}function ye(){const Qe=ae(),Xe=Z.subarray(ee,ee+Qe-2);return ee+=Xe.length,Xe}function ve(Qe){let Xe=0,Je=0,tt,it;for(it in Qe.components)Qe.components.hasOwnProperty(it)&&(tt=Qe.components[it],Xe<tt.h&&(Xe=tt.h),Je<tt.v&&(Je=tt.v));const st=Math.ceil(Qe.samplesPerLine/8/Xe),lt=Math.ceil(Qe.scanLines/8/Je);for(it in Qe.components)if(Qe.components.hasOwnProperty(it)){tt=Qe.components[it];const ct=Math.ceil(Math.ceil(Qe.samplesPerLine/8)*tt.h/Xe),gt=Math.ceil(Math.ceil(Qe.scanLines/8)*tt.v/Je),ut=st*tt.h,mt=lt*tt.v,ei=[];for(let ni=0;ni<mt;ni++){const ri=[];for(let si=0;si<ut;si++)ri.push(new Int32Array(64));ei.push(ri)}tt.blocksPerLine=ct,tt.blocksPerColumn=gt,tt.blocks=ei}Qe.maxH=Xe,Qe.maxV=Je,Qe.mcusPerLine=st,Qe.mcusPerColumn=lt}let be=ae();if(be!==65496)throw new Error("SOI not found");for(be=ae();be!==65497;){switch(be){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const Qe=ye();be===65504&&Qe[0]===74&&Qe[1]===70&&Qe[2]===73&&Qe[3]===70&&Qe[4]===0&&(this.jfif={version:{major:Qe[5],minor:Qe[6]},densityUnits:Qe[7],xDensity:Qe[8]<<8|Qe[9],yDensity:Qe[10]<<8|Qe[11],thumbWidth:Qe[12],thumbHeight:Qe[13],thumbData:Qe.subarray(14,14+3*Qe[12]*Qe[13])}),be===65518&&Qe[0]===65&&Qe[1]===100&&Qe[2]===111&&Qe[3]===98&&Qe[4]===101&&Qe[5]===0&&(this.adobe={version:Qe[6],flags0:Qe[7]<<8|Qe[8],flags1:Qe[9]<<8|Qe[10],transformCode:Qe[11]});break}case 65499:{const Xe=ae()+ee-2;for(;ee<Xe;){const Je=Z[ee++],tt=new Int32Array(64);if(Je>>4)if(Je>>4===1)for(let it=0;it<64;it++){const st=dctZigZag[it];tt[st]=ae()}else throw new Error("DQT: invalid table spec");else for(let it=0;it<64;it++){const st=dctZigZag[it];tt[st]=Z[ee++]}this.quantizationTables[Je&15]=tt}break}case 65472:case 65473:case 65474:{ae();const Qe={extended:be===65473,progressive:be===65474,precision:Z[ee++],scanLines:ae(),samplesPerLine:ae(),components:{},componentsOrder:[]},Xe=Z[ee++];let Je;for(let tt=0;tt<Xe;tt++){Je=Z[ee];const it=Z[ee+1]>>4,st=Z[ee+1]&15,lt=Z[ee+2];Qe.componentsOrder.push(Je),Qe.components[Je]={h:it,v:st,quantizationIdx:lt},ee+=3}ve(Qe),this.frames.push(Qe);break}case 65476:{const Qe=ae();for(let Xe=2;Xe<Qe;){const Je=Z[ee++],tt=new Uint8Array(16);let it=0;for(let lt=0;lt<16;lt++,ee++)tt[lt]=Z[ee],it+=tt[lt];const st=new Uint8Array(it);for(let lt=0;lt<it;lt++,ee++)st[lt]=Z[ee];Xe+=17+it,Je>>4?this.huffmanTablesAC[Je&15]=buildHuffmanTable(tt,st):this.huffmanTablesDC[Je&15]=buildHuffmanTable(tt,st)}break}case 65501:ae(),this.resetInterval=ae();break;case 65498:{ae();const Qe=Z[ee++],Xe=[],Je=this.frames[0];for(let ct=0;ct<Qe;ct++){const gt=Je.components[Z[ee++]],ut=Z[ee++];gt.huffmanTableDC=this.huffmanTablesDC[ut>>4],gt.huffmanTableAC=this.huffmanTablesAC[ut&15],Xe.push(gt)}const tt=Z[ee++],it=Z[ee++],st=Z[ee++],lt=decodeScan(Z,ee,Je,Xe,this.resetInterval,tt,it,st>>4,st&15);ee+=lt;break}case 65535:Z[ee]!==255&&ee--;break;default:if(Z[ee-3]===255&&Z[ee-2]>=192&&Z[ee-2]<=254){ee-=3;break}throw new Error(`unknown JPEG marker ${be.toString(16)}`)}be=ae()}}getResult(){const{frames:Z}=this;if(this.frames.length===0)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let tt=0;tt<this.frames.length;tt++){const it=this.frames[tt].components;for(const st of Object.keys(it))it[st].quantizationTable=this.quantizationTables[it[st].quantizationIdx],delete it[st].quantizationIdx}const ee=Z[0],{components:ae,componentsOrder:ye}=ee,ve=[],be=ee.samplesPerLine,Qe=ee.scanLines;for(let tt=0;tt<ye.length;tt++){const it=ae[ye[tt]];ve.push({lines:buildComponentData(ee,it),scaleX:it.h/ee.maxH,scaleY:it.v/ee.maxV})}const Xe=new Uint8Array(be*Qe*ve.length);let Je=0;for(let tt=0;tt<Qe;++tt)for(let it=0;it<be;++it)for(let st=0;st<ve.length;++st){const lt=ve[st];Xe[Je]=lt.lines[0|tt*lt.scaleY][0|it*lt.scaleX],++Je}return Xe}}class JpegDecoder extends BaseDecoder{constructor(Z){super(),this.reader=new JpegStreamReader,Z.JPEGTables&&this.reader.parse(Z.JPEGTables)}decodeBlock(Z){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(Z)),this.reader.getResult().buffer}}const jpeg=Object.freeze(Object.defineProperty({__proto__:null,default:JpegDecoder},Symbol.toStringTag,{value:"Module"}));/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(ie){let Z=ie.length;for(;--Z>=0;)ie[Z]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(ie,Z,ee,ae,ye){this.static_tree=ie,this.extra_bits=Z,this.extra_base=ee,this.elems=ae,this.max_length=ye,this.has_stree=ie&&ie.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(ie,Z){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Z}const d_code=ie=>ie<256?_dist_code[ie]:_dist_code[256+(ie>>>7)],put_short=(ie,Z)=>{ie.pending_buf[ie.pending++]=Z&255,ie.pending_buf[ie.pending++]=Z>>>8&255},send_bits=(ie,Z,ee)=>{ie.bi_valid>Buf_size-ee?(ie.bi_buf|=Z<<ie.bi_valid&65535,put_short(ie,ie.bi_buf),ie.bi_buf=Z>>Buf_size-ie.bi_valid,ie.bi_valid+=ee-Buf_size):(ie.bi_buf|=Z<<ie.bi_valid&65535,ie.bi_valid+=ee)},send_code=(ie,Z,ee)=>{send_bits(ie,ee[Z*2],ee[Z*2+1])},bi_reverse=(ie,Z)=>{let ee=0;do ee|=ie&1,ie>>>=1,ee<<=1;while(--Z>0);return ee>>>1},bi_flush=ie=>{ie.bi_valid===16?(put_short(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):ie.bi_valid>=8&&(ie.pending_buf[ie.pending++]=ie.bi_buf&255,ie.bi_buf>>=8,ie.bi_valid-=8)},gen_bitlen=(ie,Z)=>{const ee=Z.dyn_tree,ae=Z.max_code,ye=Z.stat_desc.static_tree,ve=Z.stat_desc.has_stree,be=Z.stat_desc.extra_bits,Qe=Z.stat_desc.extra_base,Xe=Z.stat_desc.max_length;let Je,tt,it,st,lt,ct,gt=0;for(st=0;st<=MAX_BITS$1;st++)ie.bl_count[st]=0;for(ee[ie.heap[ie.heap_max]*2+1]=0,Je=ie.heap_max+1;Je<HEAP_SIZE$1;Je++)tt=ie.heap[Je],st=ee[ee[tt*2+1]*2+1]+1,st>Xe&&(st=Xe,gt++),ee[tt*2+1]=st,!(tt>ae)&&(ie.bl_count[st]++,lt=0,tt>=Qe&&(lt=be[tt-Qe]),ct=ee[tt*2],ie.opt_len+=ct*(st+lt),ve&&(ie.static_len+=ct*(ye[tt*2+1]+lt)));if(gt!==0){do{for(st=Xe-1;ie.bl_count[st]===0;)st--;ie.bl_count[st]--,ie.bl_count[st+1]+=2,ie.bl_count[Xe]--,gt-=2}while(gt>0);for(st=Xe;st!==0;st--)for(tt=ie.bl_count[st];tt!==0;)it=ie.heap[--Je],!(it>ae)&&(ee[it*2+1]!==st&&(ie.opt_len+=(st-ee[it*2+1])*ee[it*2],ee[it*2+1]=st),tt--)}},gen_codes=(ie,Z,ee)=>{const ae=new Array(MAX_BITS$1+1);let ye=0,ve,be;for(ve=1;ve<=MAX_BITS$1;ve++)ye=ye+ee[ve-1]<<1,ae[ve]=ye;for(be=0;be<=Z;be++){let Qe=ie[be*2+1];Qe!==0&&(ie[be*2]=bi_reverse(ae[Qe]++,Qe))}},tr_static_init=()=>{let ie,Z,ee,ae,ye;const ve=new Array(MAX_BITS$1+1);for(ee=0,ae=0;ae<LENGTH_CODES$1-1;ae++)for(base_length[ae]=ee,ie=0;ie<1<<extra_lbits[ae];ie++)_length_code[ee++]=ae;for(_length_code[ee-1]=ae,ye=0,ae=0;ae<16;ae++)for(base_dist[ae]=ye,ie=0;ie<1<<extra_dbits[ae];ie++)_dist_code[ye++]=ae;for(ye>>=7;ae<D_CODES$1;ae++)for(base_dist[ae]=ye<<7,ie=0;ie<1<<extra_dbits[ae]-7;ie++)_dist_code[256+ye++]=ae;for(Z=0;Z<=MAX_BITS$1;Z++)ve[Z]=0;for(ie=0;ie<=143;)static_ltree[ie*2+1]=8,ie++,ve[8]++;for(;ie<=255;)static_ltree[ie*2+1]=9,ie++,ve[9]++;for(;ie<=279;)static_ltree[ie*2+1]=7,ie++,ve[7]++;for(;ie<=287;)static_ltree[ie*2+1]=8,ie++,ve[8]++;for(gen_codes(static_ltree,L_CODES$1+1,ve),ie=0;ie<D_CODES$1;ie++)static_dtree[ie*2+1]=5,static_dtree[ie*2]=bi_reverse(ie,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=ie=>{let Z;for(Z=0;Z<L_CODES$1;Z++)ie.dyn_ltree[Z*2]=0;for(Z=0;Z<D_CODES$1;Z++)ie.dyn_dtree[Z*2]=0;for(Z=0;Z<BL_CODES$1;Z++)ie.bl_tree[Z*2]=0;ie.dyn_ltree[END_BLOCK*2]=1,ie.opt_len=ie.static_len=0,ie.sym_next=ie.matches=0},bi_windup=ie=>{ie.bi_valid>8?put_short(ie,ie.bi_buf):ie.bi_valid>0&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0},smaller=(ie,Z,ee,ae)=>{const ye=Z*2,ve=ee*2;return ie[ye]<ie[ve]||ie[ye]===ie[ve]&&ae[Z]<=ae[ee]},pqdownheap=(ie,Z,ee)=>{const ae=ie.heap[ee];let ye=ee<<1;for(;ye<=ie.heap_len&&(ye<ie.heap_len&&smaller(Z,ie.heap[ye+1],ie.heap[ye],ie.depth)&&ye++,!smaller(Z,ae,ie.heap[ye],ie.depth));)ie.heap[ee]=ie.heap[ye],ee=ye,ye<<=1;ie.heap[ee]=ae},compress_block=(ie,Z,ee)=>{let ae,ye,ve=0,be,Qe;if(ie.sym_next!==0)do ae=ie.pending_buf[ie.sym_buf+ve++]&255,ae+=(ie.pending_buf[ie.sym_buf+ve++]&255)<<8,ye=ie.pending_buf[ie.sym_buf+ve++],ae===0?send_code(ie,ye,Z):(be=_length_code[ye],send_code(ie,be+LITERALS$1+1,Z),Qe=extra_lbits[be],Qe!==0&&(ye-=base_length[be],send_bits(ie,ye,Qe)),ae--,be=d_code(ae),send_code(ie,be,ee),Qe=extra_dbits[be],Qe!==0&&(ae-=base_dist[be],send_bits(ie,ae,Qe)));while(ve<ie.sym_next);send_code(ie,END_BLOCK,Z)},build_tree=(ie,Z)=>{const ee=Z.dyn_tree,ae=Z.stat_desc.static_tree,ye=Z.stat_desc.has_stree,ve=Z.stat_desc.elems;let be,Qe,Xe=-1,Je;for(ie.heap_len=0,ie.heap_max=HEAP_SIZE$1,be=0;be<ve;be++)ee[be*2]!==0?(ie.heap[++ie.heap_len]=Xe=be,ie.depth[be]=0):ee[be*2+1]=0;for(;ie.heap_len<2;)Je=ie.heap[++ie.heap_len]=Xe<2?++Xe:0,ee[Je*2]=1,ie.depth[Je]=0,ie.opt_len--,ye&&(ie.static_len-=ae[Je*2+1]);for(Z.max_code=Xe,be=ie.heap_len>>1;be>=1;be--)pqdownheap(ie,ee,be);Je=ve;do be=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],pqdownheap(ie,ee,1),Qe=ie.heap[1],ie.heap[--ie.heap_max]=be,ie.heap[--ie.heap_max]=Qe,ee[Je*2]=ee[be*2]+ee[Qe*2],ie.depth[Je]=(ie.depth[be]>=ie.depth[Qe]?ie.depth[be]:ie.depth[Qe])+1,ee[be*2+1]=ee[Qe*2+1]=Je,ie.heap[1]=Je++,pqdownheap(ie,ee,1);while(ie.heap_len>=2);ie.heap[--ie.heap_max]=ie.heap[1],gen_bitlen(ie,Z),gen_codes(ee,Xe,ie.bl_count)},scan_tree=(ie,Z,ee)=>{let ae,ye=-1,ve,be=Z[0*2+1],Qe=0,Xe=7,Je=4;for(be===0&&(Xe=138,Je=3),Z[(ee+1)*2+1]=65535,ae=0;ae<=ee;ae++)ve=be,be=Z[(ae+1)*2+1],!(++Qe<Xe&&ve===be)&&(Qe<Je?ie.bl_tree[ve*2]+=Qe:ve!==0?(ve!==ye&&ie.bl_tree[ve*2]++,ie.bl_tree[REP_3_6*2]++):Qe<=10?ie.bl_tree[REPZ_3_10*2]++:ie.bl_tree[REPZ_11_138*2]++,Qe=0,ye=ve,be===0?(Xe=138,Je=3):ve===be?(Xe=6,Je=3):(Xe=7,Je=4))},send_tree=(ie,Z,ee)=>{let ae,ye=-1,ve,be=Z[0*2+1],Qe=0,Xe=7,Je=4;for(be===0&&(Xe=138,Je=3),ae=0;ae<=ee;ae++)if(ve=be,be=Z[(ae+1)*2+1],!(++Qe<Xe&&ve===be)){if(Qe<Je)do send_code(ie,ve,ie.bl_tree);while(--Qe!==0);else ve!==0?(ve!==ye&&(send_code(ie,ve,ie.bl_tree),Qe--),send_code(ie,REP_3_6,ie.bl_tree),send_bits(ie,Qe-3,2)):Qe<=10?(send_code(ie,REPZ_3_10,ie.bl_tree),send_bits(ie,Qe-3,3)):(send_code(ie,REPZ_11_138,ie.bl_tree),send_bits(ie,Qe-11,7));Qe=0,ye=ve,be===0?(Xe=138,Je=3):ve===be?(Xe=6,Je=3):(Xe=7,Je=4)}},build_bl_tree=ie=>{let Z;for(scan_tree(ie,ie.dyn_ltree,ie.l_desc.max_code),scan_tree(ie,ie.dyn_dtree,ie.d_desc.max_code),build_tree(ie,ie.bl_desc),Z=BL_CODES$1-1;Z>=3&&ie.bl_tree[bl_order[Z]*2+1]===0;Z--);return ie.opt_len+=3*(Z+1)+5+5+4,Z},send_all_trees=(ie,Z,ee,ae)=>{let ye;for(send_bits(ie,Z-257,5),send_bits(ie,ee-1,5),send_bits(ie,ae-4,4),ye=0;ye<ae;ye++)send_bits(ie,ie.bl_tree[bl_order[ye]*2+1],3);send_tree(ie,ie.dyn_ltree,Z-1),send_tree(ie,ie.dyn_dtree,ee-1)},detect_data_type=ie=>{let Z=4093624447,ee;for(ee=0;ee<=31;ee++,Z>>>=1)if(Z&1&&ie.dyn_ltree[ee*2]!==0)return Z_BINARY;if(ie.dyn_ltree[9*2]!==0||ie.dyn_ltree[10*2]!==0||ie.dyn_ltree[13*2]!==0)return Z_TEXT;for(ee=32;ee<LITERALS$1;ee++)if(ie.dyn_ltree[ee*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=ie=>{static_init_done||(tr_static_init(),static_init_done=!0),ie.l_desc=new TreeDesc(ie.dyn_ltree,static_l_desc),ie.d_desc=new TreeDesc(ie.dyn_dtree,static_d_desc),ie.bl_desc=new TreeDesc(ie.bl_tree,static_bl_desc),ie.bi_buf=0,ie.bi_valid=0,init_block(ie)},_tr_stored_block$1=(ie,Z,ee,ae)=>{send_bits(ie,(STORED_BLOCK<<1)+(ae?1:0),3),bi_windup(ie),put_short(ie,ee),put_short(ie,~ee),ee&&ie.pending_buf.set(ie.window.subarray(Z,Z+ee),ie.pending),ie.pending+=ee},_tr_align$1=ie=>{send_bits(ie,STATIC_TREES<<1,3),send_code(ie,END_BLOCK,static_ltree),bi_flush(ie)},_tr_flush_block$1=(ie,Z,ee,ae)=>{let ye,ve,be=0;ie.level>0?(ie.strm.data_type===Z_UNKNOWN$1&&(ie.strm.data_type=detect_data_type(ie)),build_tree(ie,ie.l_desc),build_tree(ie,ie.d_desc),be=build_bl_tree(ie),ye=ie.opt_len+3+7>>>3,ve=ie.static_len+3+7>>>3,ve<=ye&&(ye=ve)):ye=ve=ee+5,ee+4<=ye&&Z!==-1?_tr_stored_block$1(ie,Z,ee,ae):ie.strategy===Z_FIXED$1||ve===ye?(send_bits(ie,(STATIC_TREES<<1)+(ae?1:0),3),compress_block(ie,static_ltree,static_dtree)):(send_bits(ie,(DYN_TREES<<1)+(ae?1:0),3),send_all_trees(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,be+1),compress_block(ie,ie.dyn_ltree,ie.dyn_dtree)),init_block(ie),ae&&bi_windup(ie)},_tr_tally$1=(ie,Z,ee)=>(ie.pending_buf[ie.sym_buf+ie.sym_next++]=Z,ie.pending_buf[ie.sym_buf+ie.sym_next++]=Z>>8,ie.pending_buf[ie.sym_buf+ie.sym_next++]=ee,Z===0?ie.dyn_ltree[ee*2]++:(ie.matches++,Z--,ie.dyn_ltree[(_length_code[ee]+LITERALS$1+1)*2]++,ie.dyn_dtree[d_code(Z)*2]++),ie.sym_next===ie.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(ie,Z,ee,ae)=>{let ye=ie&65535|0,ve=ie>>>16&65535|0,be=0;for(;ee!==0;){be=ee>2e3?2e3:ee,ee-=be;do ye=ye+Z[ae++]|0,ve=ve+ye|0;while(--be);ye%=65521,ve%=65521}return ye|ve<<16|0};var adler32_1=adler32;const makeTable=()=>{let ie,Z=[];for(var ee=0;ee<256;ee++){ie=ee;for(var ae=0;ae<8;ae++)ie=ie&1?3988292384^ie>>>1:ie>>>1;Z[ee]=ie}return Z},crcTable=new Uint32Array(makeTable()),crc32=(ie,Z,ee,ae)=>{const ye=crcTable,ve=ae+ee;ie^=-1;for(let be=ae;be<ve;be++)ie=ie>>>8^ye[(ie^Z[be])&255];return ie^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(ie,Z)=>(ie.msg=messages[Z],Z),rank=ie=>ie*2-(ie>4?9:0),zero=ie=>{let Z=ie.length;for(;--Z>=0;)ie[Z]=0},slide_hash=ie=>{let Z,ee,ae,ye=ie.w_size;Z=ie.hash_size,ae=Z;do ee=ie.head[--ae],ie.head[ae]=ee>=ye?ee-ye:0;while(--Z);Z=ye,ae=Z;do ee=ie.prev[--ae],ie.prev[ae]=ee>=ye?ee-ye:0;while(--Z)};let HASH_ZLIB=(ie,Z,ee)=>(Z<<ie.hash_shift^ee)&ie.hash_mask,HASH=HASH_ZLIB;const flush_pending=ie=>{const Z=ie.state;let ee=Z.pending;ee>ie.avail_out&&(ee=ie.avail_out),ee!==0&&(ie.output.set(Z.pending_buf.subarray(Z.pending_out,Z.pending_out+ee),ie.next_out),ie.next_out+=ee,Z.pending_out+=ee,ie.total_out+=ee,ie.avail_out-=ee,Z.pending-=ee,Z.pending===0&&(Z.pending_out=0))},flush_block_only=(ie,Z)=>{_tr_flush_block(ie,ie.block_start>=0?ie.block_start:-1,ie.strstart-ie.block_start,Z),ie.block_start=ie.strstart,flush_pending(ie.strm)},put_byte=(ie,Z)=>{ie.pending_buf[ie.pending++]=Z},putShortMSB=(ie,Z)=>{ie.pending_buf[ie.pending++]=Z>>>8&255,ie.pending_buf[ie.pending++]=Z&255},read_buf=(ie,Z,ee,ae)=>{let ye=ie.avail_in;return ye>ae&&(ye=ae),ye===0?0:(ie.avail_in-=ye,Z.set(ie.input.subarray(ie.next_in,ie.next_in+ye),ee),ie.state.wrap===1?ie.adler=adler32_1(ie.adler,Z,ye,ee):ie.state.wrap===2&&(ie.adler=crc32_1(ie.adler,Z,ye,ee)),ie.next_in+=ye,ie.total_in+=ye,ye)},longest_match=(ie,Z)=>{let ee=ie.max_chain_length,ae=ie.strstart,ye,ve,be=ie.prev_length,Qe=ie.nice_match;const Xe=ie.strstart>ie.w_size-MIN_LOOKAHEAD?ie.strstart-(ie.w_size-MIN_LOOKAHEAD):0,Je=ie.window,tt=ie.w_mask,it=ie.prev,st=ie.strstart+MAX_MATCH;let lt=Je[ae+be-1],ct=Je[ae+be];ie.prev_length>=ie.good_match&&(ee>>=2),Qe>ie.lookahead&&(Qe=ie.lookahead);do if(ye=Z,!(Je[ye+be]!==ct||Je[ye+be-1]!==lt||Je[ye]!==Je[ae]||Je[++ye]!==Je[ae+1])){ae+=2,ye++;do;while(Je[++ae]===Je[++ye]&&Je[++ae]===Je[++ye]&&Je[++ae]===Je[++ye]&&Je[++ae]===Je[++ye]&&Je[++ae]===Je[++ye]&&Je[++ae]===Je[++ye]&&Je[++ae]===Je[++ye]&&Je[++ae]===Je[++ye]&&ae<st);if(ve=MAX_MATCH-(st-ae),ae=st-MAX_MATCH,ve>be){if(ie.match_start=Z,be=ve,ve>=Qe)break;lt=Je[ae+be-1],ct=Je[ae+be]}}while((Z=it[Z&tt])>Xe&&--ee!==0);return be<=ie.lookahead?be:ie.lookahead},fill_window=ie=>{const Z=ie.w_size;let ee,ae,ye;do{if(ae=ie.window_size-ie.lookahead-ie.strstart,ie.strstart>=Z+(Z-MIN_LOOKAHEAD)&&(ie.window.set(ie.window.subarray(Z,Z+Z-ae),0),ie.match_start-=Z,ie.strstart-=Z,ie.block_start-=Z,ie.insert>ie.strstart&&(ie.insert=ie.strstart),slide_hash(ie),ae+=Z),ie.strm.avail_in===0)break;if(ee=read_buf(ie.strm,ie.window,ie.strstart+ie.lookahead,ae),ie.lookahead+=ee,ie.lookahead+ie.insert>=MIN_MATCH)for(ye=ie.strstart-ie.insert,ie.ins_h=ie.window[ye],ie.ins_h=HASH(ie,ie.ins_h,ie.window[ye+1]);ie.insert&&(ie.ins_h=HASH(ie,ie.ins_h,ie.window[ye+MIN_MATCH-1]),ie.prev[ye&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ye,ye++,ie.insert--,!(ie.lookahead+ie.insert<MIN_MATCH)););}while(ie.lookahead<MIN_LOOKAHEAD&&ie.strm.avail_in!==0)},deflate_stored=(ie,Z)=>{let ee=ie.pending_buf_size-5>ie.w_size?ie.w_size:ie.pending_buf_size-5,ae,ye,ve,be=0,Qe=ie.strm.avail_in;do{if(ae=65535,ve=ie.bi_valid+42>>3,ie.strm.avail_out<ve||(ve=ie.strm.avail_out-ve,ye=ie.strstart-ie.block_start,ae>ye+ie.strm.avail_in&&(ae=ye+ie.strm.avail_in),ae>ve&&(ae=ve),ae<ee&&(ae===0&&Z!==Z_FINISH$3||Z===Z_NO_FLUSH$2||ae!==ye+ie.strm.avail_in)))break;be=Z===Z_FINISH$3&&ae===ye+ie.strm.avail_in?1:0,_tr_stored_block(ie,0,0,be),ie.pending_buf[ie.pending-4]=ae,ie.pending_buf[ie.pending-3]=ae>>8,ie.pending_buf[ie.pending-2]=~ae,ie.pending_buf[ie.pending-1]=~ae>>8,flush_pending(ie.strm),ye&&(ye>ae&&(ye=ae),ie.strm.output.set(ie.window.subarray(ie.block_start,ie.block_start+ye),ie.strm.next_out),ie.strm.next_out+=ye,ie.strm.avail_out-=ye,ie.strm.total_out+=ye,ie.block_start+=ye,ae-=ye),ae&&(read_buf(ie.strm,ie.strm.output,ie.strm.next_out,ae),ie.strm.next_out+=ae,ie.strm.avail_out-=ae,ie.strm.total_out+=ae)}while(be===0);return Qe-=ie.strm.avail_in,Qe&&(Qe>=ie.w_size?(ie.matches=2,ie.window.set(ie.strm.input.subarray(ie.strm.next_in-ie.w_size,ie.strm.next_in),0),ie.strstart=ie.w_size,ie.insert=ie.strstart):(ie.window_size-ie.strstart<=Qe&&(ie.strstart-=ie.w_size,ie.window.set(ie.window.subarray(ie.w_size,ie.w_size+ie.strstart),0),ie.matches<2&&ie.matches++,ie.insert>ie.strstart&&(ie.insert=ie.strstart)),ie.window.set(ie.strm.input.subarray(ie.strm.next_in-Qe,ie.strm.next_in),ie.strstart),ie.strstart+=Qe,ie.insert+=Qe>ie.w_size-ie.insert?ie.w_size-ie.insert:Qe),ie.block_start=ie.strstart),ie.high_water<ie.strstart&&(ie.high_water=ie.strstart),be?BS_FINISH_DONE:Z!==Z_NO_FLUSH$2&&Z!==Z_FINISH$3&&ie.strm.avail_in===0&&ie.strstart===ie.block_start?BS_BLOCK_DONE:(ve=ie.window_size-ie.strstart,ie.strm.avail_in>ve&&ie.block_start>=ie.w_size&&(ie.block_start-=ie.w_size,ie.strstart-=ie.w_size,ie.window.set(ie.window.subarray(ie.w_size,ie.w_size+ie.strstart),0),ie.matches<2&&ie.matches++,ve+=ie.w_size,ie.insert>ie.strstart&&(ie.insert=ie.strstart)),ve>ie.strm.avail_in&&(ve=ie.strm.avail_in),ve&&(read_buf(ie.strm,ie.window,ie.strstart,ve),ie.strstart+=ve,ie.insert+=ve>ie.w_size-ie.insert?ie.w_size-ie.insert:ve),ie.high_water<ie.strstart&&(ie.high_water=ie.strstart),ve=ie.bi_valid+42>>3,ve=ie.pending_buf_size-ve>65535?65535:ie.pending_buf_size-ve,ee=ve>ie.w_size?ie.w_size:ve,ye=ie.strstart-ie.block_start,(ye>=ee||(ye||Z===Z_FINISH$3)&&Z!==Z_NO_FLUSH$2&&ie.strm.avail_in===0&&ye<=ve)&&(ae=ye>ve?ve:ye,be=Z===Z_FINISH$3&&ie.strm.avail_in===0&&ae===ye?1:0,_tr_stored_block(ie,ie.block_start,ae,be),ie.block_start+=ae,flush_pending(ie.strm)),be?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(ie,Z)=>{let ee,ae;for(;;){if(ie.lookahead<MIN_LOOKAHEAD){if(fill_window(ie),ie.lookahead<MIN_LOOKAHEAD&&Z===Z_NO_FLUSH$2)return BS_NEED_MORE;if(ie.lookahead===0)break}if(ee=0,ie.lookahead>=MIN_MATCH&&(ie.ins_h=HASH(ie,ie.ins_h,ie.window[ie.strstart+MIN_MATCH-1]),ee=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart),ee!==0&&ie.strstart-ee<=ie.w_size-MIN_LOOKAHEAD&&(ie.match_length=longest_match(ie,ee)),ie.match_length>=MIN_MATCH)if(ae=_tr_tally(ie,ie.strstart-ie.match_start,ie.match_length-MIN_MATCH),ie.lookahead-=ie.match_length,ie.match_length<=ie.max_lazy_match&&ie.lookahead>=MIN_MATCH){ie.match_length--;do ie.strstart++,ie.ins_h=HASH(ie,ie.ins_h,ie.window[ie.strstart+MIN_MATCH-1]),ee=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart;while(--ie.match_length!==0);ie.strstart++}else ie.strstart+=ie.match_length,ie.match_length=0,ie.ins_h=ie.window[ie.strstart],ie.ins_h=HASH(ie,ie.ins_h,ie.window[ie.strstart+1]);else ae=_tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++;if(ae&&(flush_block_only(ie,!1),ie.strm.avail_out===0))return BS_NEED_MORE}return ie.insert=ie.strstart<MIN_MATCH-1?ie.strstart:MIN_MATCH-1,Z===Z_FINISH$3?(flush_block_only(ie,!0),ie.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):ie.sym_next&&(flush_block_only(ie,!1),ie.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(ie,Z)=>{let ee,ae,ye;for(;;){if(ie.lookahead<MIN_LOOKAHEAD){if(fill_window(ie),ie.lookahead<MIN_LOOKAHEAD&&Z===Z_NO_FLUSH$2)return BS_NEED_MORE;if(ie.lookahead===0)break}if(ee=0,ie.lookahead>=MIN_MATCH&&(ie.ins_h=HASH(ie,ie.ins_h,ie.window[ie.strstart+MIN_MATCH-1]),ee=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart),ie.prev_length=ie.match_length,ie.prev_match=ie.match_start,ie.match_length=MIN_MATCH-1,ee!==0&&ie.prev_length<ie.max_lazy_match&&ie.strstart-ee<=ie.w_size-MIN_LOOKAHEAD&&(ie.match_length=longest_match(ie,ee),ie.match_length<=5&&(ie.strategy===Z_FILTERED||ie.match_length===MIN_MATCH&&ie.strstart-ie.match_start>4096)&&(ie.match_length=MIN_MATCH-1)),ie.prev_length>=MIN_MATCH&&ie.match_length<=ie.prev_length){ye=ie.strstart+ie.lookahead-MIN_MATCH,ae=_tr_tally(ie,ie.strstart-1-ie.prev_match,ie.prev_length-MIN_MATCH),ie.lookahead-=ie.prev_length-1,ie.prev_length-=2;do++ie.strstart<=ye&&(ie.ins_h=HASH(ie,ie.ins_h,ie.window[ie.strstart+MIN_MATCH-1]),ee=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart);while(--ie.prev_length!==0);if(ie.match_available=0,ie.match_length=MIN_MATCH-1,ie.strstart++,ae&&(flush_block_only(ie,!1),ie.strm.avail_out===0))return BS_NEED_MORE}else if(ie.match_available){if(ae=_tr_tally(ie,0,ie.window[ie.strstart-1]),ae&&flush_block_only(ie,!1),ie.strstart++,ie.lookahead--,ie.strm.avail_out===0)return BS_NEED_MORE}else ie.match_available=1,ie.strstart++,ie.lookahead--}return ie.match_available&&(ae=_tr_tally(ie,0,ie.window[ie.strstart-1]),ie.match_available=0),ie.insert=ie.strstart<MIN_MATCH-1?ie.strstart:MIN_MATCH-1,Z===Z_FINISH$3?(flush_block_only(ie,!0),ie.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):ie.sym_next&&(flush_block_only(ie,!1),ie.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(ie,Z)=>{let ee,ae,ye,ve;const be=ie.window;for(;;){if(ie.lookahead<=MAX_MATCH){if(fill_window(ie),ie.lookahead<=MAX_MATCH&&Z===Z_NO_FLUSH$2)return BS_NEED_MORE;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=MIN_MATCH&&ie.strstart>0&&(ye=ie.strstart-1,ae=be[ye],ae===be[++ye]&&ae===be[++ye]&&ae===be[++ye])){ve=ie.strstart+MAX_MATCH;do;while(ae===be[++ye]&&ae===be[++ye]&&ae===be[++ye]&&ae===be[++ye]&&ae===be[++ye]&&ae===be[++ye]&&ae===be[++ye]&&ae===be[++ye]&&ye<ve);ie.match_length=MAX_MATCH-(ve-ye),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=MIN_MATCH?(ee=_tr_tally(ie,1,ie.match_length-MIN_MATCH),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(ee=_tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),ee&&(flush_block_only(ie,!1),ie.strm.avail_out===0))return BS_NEED_MORE}return ie.insert=0,Z===Z_FINISH$3?(flush_block_only(ie,!0),ie.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):ie.sym_next&&(flush_block_only(ie,!1),ie.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(ie,Z)=>{let ee;for(;;){if(ie.lookahead===0&&(fill_window(ie),ie.lookahead===0)){if(Z===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(ie.match_length=0,ee=_tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,ee&&(flush_block_only(ie,!1),ie.strm.avail_out===0))return BS_NEED_MORE}return ie.insert=0,Z===Z_FINISH$3?(flush_block_only(ie,!0),ie.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):ie.sym_next&&(flush_block_only(ie,!1),ie.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(ie,Z,ee,ae,ye){this.good_length=ie,this.max_lazy=Z,this.nice_length=ee,this.max_chain=ae,this.func=ye}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=ie=>{ie.window_size=2*ie.w_size,zero(ie.head),ie.max_lazy_match=configuration_table[ie.level].max_lazy,ie.good_match=configuration_table[ie.level].good_length,ie.nice_match=configuration_table[ie.level].nice_length,ie.max_chain_length=configuration_table[ie.level].max_chain,ie.strstart=0,ie.block_start=0,ie.lookahead=0,ie.insert=0,ie.match_length=ie.prev_length=MIN_MATCH-1,ie.match_available=0,ie.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=ie=>{if(!ie)return 1;const Z=ie.state;return!Z||Z.strm!==ie||Z.status!==INIT_STATE&&Z.status!==GZIP_STATE&&Z.status!==EXTRA_STATE&&Z.status!==NAME_STATE&&Z.status!==COMMENT_STATE&&Z.status!==HCRC_STATE&&Z.status!==BUSY_STATE&&Z.status!==FINISH_STATE?1:0},deflateResetKeep=ie=>{if(deflateStateCheck(ie))return err(ie,Z_STREAM_ERROR$2);ie.total_in=ie.total_out=0,ie.data_type=Z_UNKNOWN;const Z=ie.state;return Z.pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap===2?GZIP_STATE:Z.wrap?INIT_STATE:BUSY_STATE,ie.adler=Z.wrap===2?0:1,Z.last_flush=-2,_tr_init(Z),Z_OK$3},deflateReset=ie=>{const Z=deflateResetKeep(ie);return Z===Z_OK$3&&lm_init(ie.state),Z},deflateSetHeader=(ie,Z)=>deflateStateCheck(ie)||ie.state.wrap!==2?Z_STREAM_ERROR$2:(ie.state.gzhead=Z,Z_OK$3),deflateInit2=(ie,Z,ee,ae,ye,ve)=>{if(!ie)return Z_STREAM_ERROR$2;let be=1;if(Z===Z_DEFAULT_COMPRESSION$1&&(Z=6),ae<0?(be=0,ae=-ae):ae>15&&(be=2,ae-=16),ye<1||ye>MAX_MEM_LEVEL||ee!==Z_DEFLATED$2||ae<8||ae>15||Z<0||Z>9||ve<0||ve>Z_FIXED||ae===8&&be!==1)return err(ie,Z_STREAM_ERROR$2);ae===8&&(ae=9);const Qe=new DeflateState;return ie.state=Qe,Qe.strm=ie,Qe.status=INIT_STATE,Qe.wrap=be,Qe.gzhead=null,Qe.w_bits=ae,Qe.w_size=1<<Qe.w_bits,Qe.w_mask=Qe.w_size-1,Qe.hash_bits=ye+7,Qe.hash_size=1<<Qe.hash_bits,Qe.hash_mask=Qe.hash_size-1,Qe.hash_shift=~~((Qe.hash_bits+MIN_MATCH-1)/MIN_MATCH),Qe.window=new Uint8Array(Qe.w_size*2),Qe.head=new Uint16Array(Qe.hash_size),Qe.prev=new Uint16Array(Qe.w_size),Qe.lit_bufsize=1<<ye+6,Qe.pending_buf_size=Qe.lit_bufsize*4,Qe.pending_buf=new Uint8Array(Qe.pending_buf_size),Qe.sym_buf=Qe.lit_bufsize,Qe.sym_end=(Qe.lit_bufsize-1)*3,Qe.level=Z,Qe.strategy=ve,Qe.method=ee,deflateReset(ie)},deflateInit=(ie,Z)=>deflateInit2(ie,Z,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(ie,Z)=>{if(deflateStateCheck(ie)||Z>Z_BLOCK$1||Z<0)return ie?err(ie,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const ee=ie.state;if(!ie.output||ie.avail_in!==0&&!ie.input||ee.status===FINISH_STATE&&Z!==Z_FINISH$3)return err(ie,ie.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const ae=ee.last_flush;if(ee.last_flush=Z,ee.pending!==0){if(flush_pending(ie),ie.avail_out===0)return ee.last_flush=-1,Z_OK$3}else if(ie.avail_in===0&&rank(Z)<=rank(ae)&&Z!==Z_FINISH$3)return err(ie,Z_BUF_ERROR$1);if(ee.status===FINISH_STATE&&ie.avail_in!==0)return err(ie,Z_BUF_ERROR$1);if(ee.status===INIT_STATE&&ee.wrap===0&&(ee.status=BUSY_STATE),ee.status===INIT_STATE){let ye=Z_DEFLATED$2+(ee.w_bits-8<<4)<<8,ve=-1;if(ee.strategy>=Z_HUFFMAN_ONLY||ee.level<2?ve=0:ee.level<6?ve=1:ee.level===6?ve=2:ve=3,ye|=ve<<6,ee.strstart!==0&&(ye|=PRESET_DICT),ye+=31-ye%31,putShortMSB(ee,ye),ee.strstart!==0&&(putShortMSB(ee,ie.adler>>>16),putShortMSB(ee,ie.adler&65535)),ie.adler=1,ee.status=BUSY_STATE,flush_pending(ie),ee.pending!==0)return ee.last_flush=-1,Z_OK$3}if(ee.status===GZIP_STATE){if(ie.adler=0,put_byte(ee,31),put_byte(ee,139),put_byte(ee,8),ee.gzhead)put_byte(ee,(ee.gzhead.text?1:0)+(ee.gzhead.hcrc?2:0)+(ee.gzhead.extra?4:0)+(ee.gzhead.name?8:0)+(ee.gzhead.comment?16:0)),put_byte(ee,ee.gzhead.time&255),put_byte(ee,ee.gzhead.time>>8&255),put_byte(ee,ee.gzhead.time>>16&255),put_byte(ee,ee.gzhead.time>>24&255),put_byte(ee,ee.level===9?2:ee.strategy>=Z_HUFFMAN_ONLY||ee.level<2?4:0),put_byte(ee,ee.gzhead.os&255),ee.gzhead.extra&&ee.gzhead.extra.length&&(put_byte(ee,ee.gzhead.extra.length&255),put_byte(ee,ee.gzhead.extra.length>>8&255)),ee.gzhead.hcrc&&(ie.adler=crc32_1(ie.adler,ee.pending_buf,ee.pending,0)),ee.gzindex=0,ee.status=EXTRA_STATE;else if(put_byte(ee,0),put_byte(ee,0),put_byte(ee,0),put_byte(ee,0),put_byte(ee,0),put_byte(ee,ee.level===9?2:ee.strategy>=Z_HUFFMAN_ONLY||ee.level<2?4:0),put_byte(ee,OS_CODE),ee.status=BUSY_STATE,flush_pending(ie),ee.pending!==0)return ee.last_flush=-1,Z_OK$3}if(ee.status===EXTRA_STATE){if(ee.gzhead.extra){let ye=ee.pending,ve=(ee.gzhead.extra.length&65535)-ee.gzindex;for(;ee.pending+ve>ee.pending_buf_size;){let Qe=ee.pending_buf_size-ee.pending;if(ee.pending_buf.set(ee.gzhead.extra.subarray(ee.gzindex,ee.gzindex+Qe),ee.pending),ee.pending=ee.pending_buf_size,ee.gzhead.hcrc&&ee.pending>ye&&(ie.adler=crc32_1(ie.adler,ee.pending_buf,ee.pending-ye,ye)),ee.gzindex+=Qe,flush_pending(ie),ee.pending!==0)return ee.last_flush=-1,Z_OK$3;ye=0,ve-=Qe}let be=new Uint8Array(ee.gzhead.extra);ee.pending_buf.set(be.subarray(ee.gzindex,ee.gzindex+ve),ee.pending),ee.pending+=ve,ee.gzhead.hcrc&&ee.pending>ye&&(ie.adler=crc32_1(ie.adler,ee.pending_buf,ee.pending-ye,ye)),ee.gzindex=0}ee.status=NAME_STATE}if(ee.status===NAME_STATE){if(ee.gzhead.name){let ye=ee.pending,ve;do{if(ee.pending===ee.pending_buf_size){if(ee.gzhead.hcrc&&ee.pending>ye&&(ie.adler=crc32_1(ie.adler,ee.pending_buf,ee.pending-ye,ye)),flush_pending(ie),ee.pending!==0)return ee.last_flush=-1,Z_OK$3;ye=0}ee.gzindex<ee.gzhead.name.length?ve=ee.gzhead.name.charCodeAt(ee.gzindex++)&255:ve=0,put_byte(ee,ve)}while(ve!==0);ee.gzhead.hcrc&&ee.pending>ye&&(ie.adler=crc32_1(ie.adler,ee.pending_buf,ee.pending-ye,ye)),ee.gzindex=0}ee.status=COMMENT_STATE}if(ee.status===COMMENT_STATE){if(ee.gzhead.comment){let ye=ee.pending,ve;do{if(ee.pending===ee.pending_buf_size){if(ee.gzhead.hcrc&&ee.pending>ye&&(ie.adler=crc32_1(ie.adler,ee.pending_buf,ee.pending-ye,ye)),flush_pending(ie),ee.pending!==0)return ee.last_flush=-1,Z_OK$3;ye=0}ee.gzindex<ee.gzhead.comment.length?ve=ee.gzhead.comment.charCodeAt(ee.gzindex++)&255:ve=0,put_byte(ee,ve)}while(ve!==0);ee.gzhead.hcrc&&ee.pending>ye&&(ie.adler=crc32_1(ie.adler,ee.pending_buf,ee.pending-ye,ye))}ee.status=HCRC_STATE}if(ee.status===HCRC_STATE){if(ee.gzhead.hcrc){if(ee.pending+2>ee.pending_buf_size&&(flush_pending(ie),ee.pending!==0))return ee.last_flush=-1,Z_OK$3;put_byte(ee,ie.adler&255),put_byte(ee,ie.adler>>8&255),ie.adler=0}if(ee.status=BUSY_STATE,flush_pending(ie),ee.pending!==0)return ee.last_flush=-1,Z_OK$3}if(ie.avail_in!==0||ee.lookahead!==0||Z!==Z_NO_FLUSH$2&&ee.status!==FINISH_STATE){let ye=ee.level===0?deflate_stored(ee,Z):ee.strategy===Z_HUFFMAN_ONLY?deflate_huff(ee,Z):ee.strategy===Z_RLE?deflate_rle(ee,Z):configuration_table[ee.level].func(ee,Z);if((ye===BS_FINISH_STARTED||ye===BS_FINISH_DONE)&&(ee.status=FINISH_STATE),ye===BS_NEED_MORE||ye===BS_FINISH_STARTED)return ie.avail_out===0&&(ee.last_flush=-1),Z_OK$3;if(ye===BS_BLOCK_DONE&&(Z===Z_PARTIAL_FLUSH?_tr_align(ee):Z!==Z_BLOCK$1&&(_tr_stored_block(ee,0,0,!1),Z===Z_FULL_FLUSH$1&&(zero(ee.head),ee.lookahead===0&&(ee.strstart=0,ee.block_start=0,ee.insert=0))),flush_pending(ie),ie.avail_out===0))return ee.last_flush=-1,Z_OK$3}return Z!==Z_FINISH$3?Z_OK$3:ee.wrap<=0?Z_STREAM_END$3:(ee.wrap===2?(put_byte(ee,ie.adler&255),put_byte(ee,ie.adler>>8&255),put_byte(ee,ie.adler>>16&255),put_byte(ee,ie.adler>>24&255),put_byte(ee,ie.total_in&255),put_byte(ee,ie.total_in>>8&255),put_byte(ee,ie.total_in>>16&255),put_byte(ee,ie.total_in>>24&255)):(putShortMSB(ee,ie.adler>>>16),putShortMSB(ee,ie.adler&65535)),flush_pending(ie),ee.wrap>0&&(ee.wrap=-ee.wrap),ee.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=ie=>{if(deflateStateCheck(ie))return Z_STREAM_ERROR$2;const Z=ie.state.status;return ie.state=null,Z===BUSY_STATE?err(ie,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(ie,Z)=>{let ee=Z.length;if(deflateStateCheck(ie))return Z_STREAM_ERROR$2;const ae=ie.state,ye=ae.wrap;if(ye===2||ye===1&&ae.status!==INIT_STATE||ae.lookahead)return Z_STREAM_ERROR$2;if(ye===1&&(ie.adler=adler32_1(ie.adler,Z,ee,0)),ae.wrap=0,ee>=ae.w_size){ye===0&&(zero(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0);let Xe=new Uint8Array(ae.w_size);Xe.set(Z.subarray(ee-ae.w_size,ee),0),Z=Xe,ee=ae.w_size}const ve=ie.avail_in,be=ie.next_in,Qe=ie.input;for(ie.avail_in=ee,ie.next_in=0,ie.input=Z,fill_window(ae);ae.lookahead>=MIN_MATCH;){let Xe=ae.strstart,Je=ae.lookahead-(MIN_MATCH-1);do ae.ins_h=HASH(ae,ae.ins_h,ae.window[Xe+MIN_MATCH-1]),ae.prev[Xe&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=Xe,Xe++;while(--Je);ae.strstart=Xe,ae.lookahead=MIN_MATCH-1,fill_window(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=MIN_MATCH-1,ae.match_available=0,ie.next_in=be,ie.input=Qe,ie.avail_in=ve,ae.wrap=ye,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(ie,Z)=>Object.prototype.hasOwnProperty.call(ie,Z);var assign=function(ie){const Z=Array.prototype.slice.call(arguments,1);for(;Z.length;){const ee=Z.shift();if(ee){if(typeof ee!="object")throw new TypeError(ee+"must be non-object");for(const ae in ee)_has(ee,ae)&&(ie[ae]=ee[ae])}}return ie},flattenChunks=ie=>{let Z=0;for(let ae=0,ye=ie.length;ae<ye;ae++)Z+=ie[ae].length;const ee=new Uint8Array(Z);for(let ae=0,ye=0,ve=ie.length;ae<ve;ae++){let be=ie[ae];ee.set(be,ye),ye+=be.length}return ee},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(ie){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let ie=0;ie<256;ie++)_utf8len[ie]=ie>=252?6:ie>=248?5:ie>=240?4:ie>=224?3:ie>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=ie=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(ie);let Z,ee,ae,ye,ve,be=ie.length,Qe=0;for(ye=0;ye<be;ye++)ee=ie.charCodeAt(ye),(ee&64512)===55296&&ye+1<be&&(ae=ie.charCodeAt(ye+1),(ae&64512)===56320&&(ee=65536+(ee-55296<<10)+(ae-56320),ye++)),Qe+=ee<128?1:ee<2048?2:ee<65536?3:4;for(Z=new Uint8Array(Qe),ve=0,ye=0;ve<Qe;ye++)ee=ie.charCodeAt(ye),(ee&64512)===55296&&ye+1<be&&(ae=ie.charCodeAt(ye+1),(ae&64512)===56320&&(ee=65536+(ee-55296<<10)+(ae-56320),ye++)),ee<128?Z[ve++]=ee:ee<2048?(Z[ve++]=192|ee>>>6,Z[ve++]=128|ee&63):ee<65536?(Z[ve++]=224|ee>>>12,Z[ve++]=128|ee>>>6&63,Z[ve++]=128|ee&63):(Z[ve++]=240|ee>>>18,Z[ve++]=128|ee>>>12&63,Z[ve++]=128|ee>>>6&63,Z[ve++]=128|ee&63);return Z};const buf2binstring=(ie,Z)=>{if(Z<65534&&ie.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,ie.length===Z?ie:ie.subarray(0,Z));let ee="";for(let ae=0;ae<Z;ae++)ee+=String.fromCharCode(ie[ae]);return ee};var buf2string=(ie,Z)=>{const ee=Z||ie.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(ie.subarray(0,Z));let ae,ye;const ve=new Array(ee*2);for(ye=0,ae=0;ae<ee;){let be=ie[ae++];if(be<128){ve[ye++]=be;continue}let Qe=_utf8len[be];if(Qe>4){ve[ye++]=65533,ae+=Qe-1;continue}for(be&=Qe===2?31:Qe===3?15:7;Qe>1&&ae<ee;)be=be<<6|ie[ae++]&63,Qe--;if(Qe>1){ve[ye++]=65533;continue}be<65536?ve[ye++]=be:(be-=65536,ve[ye++]=55296|be>>10&1023,ve[ye++]=56320|be&1023)}return buf2binstring(ve,ye)},utf8border=(ie,Z)=>{Z=Z||ie.length,Z>ie.length&&(Z=ie.length);let ee=Z-1;for(;ee>=0&&(ie[ee]&192)===128;)ee--;return ee<0||ee===0?Z:ee+_utf8len[ie[ee]]>Z?ee:Z},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(ie){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},ie||{});let Z=this.options;Z.raw&&Z.windowBits>0?Z.windowBits=-Z.windowBits:Z.gzip&&Z.windowBits>0&&Z.windowBits<16&&(Z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let ee=deflate_1$2.deflateInit2(this.strm,Z.level,Z.method,Z.windowBits,Z.memLevel,Z.strategy);if(ee!==Z_OK$2)throw new Error(messages[ee]);if(Z.header&&deflate_1$2.deflateSetHeader(this.strm,Z.header),Z.dictionary){let ae;if(typeof Z.dictionary=="string"?ae=strings.string2buf(Z.dictionary):toString$1.call(Z.dictionary)==="[object ArrayBuffer]"?ae=new Uint8Array(Z.dictionary):ae=Z.dictionary,ee=deflate_1$2.deflateSetDictionary(this.strm,ae),ee!==Z_OK$2)throw new Error(messages[ee]);this._dict_set=!0}}Deflate$1.prototype.push=function(ie,Z){const ee=this.strm,ae=this.options.chunkSize;let ye,ve;if(this.ended)return!1;for(Z===~~Z?ve=Z:ve=Z===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof ie=="string"?ee.input=strings.string2buf(ie):toString$1.call(ie)==="[object ArrayBuffer]"?ee.input=new Uint8Array(ie):ee.input=ie,ee.next_in=0,ee.avail_in=ee.input.length;;){if(ee.avail_out===0&&(ee.output=new Uint8Array(ae),ee.next_out=0,ee.avail_out=ae),(ve===Z_SYNC_FLUSH||ve===Z_FULL_FLUSH)&&ee.avail_out<=6){this.onData(ee.output.subarray(0,ee.next_out)),ee.avail_out=0;continue}if(ye=deflate_1$2.deflate(ee,ve),ye===Z_STREAM_END$2)return ee.next_out>0&&this.onData(ee.output.subarray(0,ee.next_out)),ye=deflate_1$2.deflateEnd(this.strm),this.onEnd(ye),this.ended=!0,ye===Z_OK$2;if(ee.avail_out===0){this.onData(ee.output);continue}if(ve>0&&ee.next_out>0){this.onData(ee.output.subarray(0,ee.next_out)),ee.avail_out=0;continue}if(ee.avail_in===0)break}return!0},Deflate$1.prototype.onData=function(ie){this.chunks.push(ie)},Deflate$1.prototype.onEnd=function(ie){ie===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=ie,this.msg=this.strm.msg};const BAD$1=16209,TYPE$1=16191;var inffast=function ie(Z,ee){let ae,ye,ve,be,Qe,Xe,Je,tt,it,st,lt,ct,gt,ut,mt,ei,ni,ri,si,li,ai,ci,Ci,pi;const gi=Z.state;ae=Z.next_in,Ci=Z.input,ye=ae+(Z.avail_in-5),ve=Z.next_out,pi=Z.output,be=ve-(ee-Z.avail_out),Qe=ve+(Z.avail_out-257),Xe=gi.dmax,Je=gi.wsize,tt=gi.whave,it=gi.wnext,st=gi.window,lt=gi.hold,ct=gi.bits,gt=gi.lencode,ut=gi.distcode,mt=(1<<gi.lenbits)-1,ei=(1<<gi.distbits)-1;e:do{ct<15&&(lt+=Ci[ae++]<<ct,ct+=8,lt+=Ci[ae++]<<ct,ct+=8),ni=gt[lt&mt];t:for(;;){if(ri=ni>>>24,lt>>>=ri,ct-=ri,ri=ni>>>16&255,ri===0)pi[ve++]=ni&65535;else if(ri&16){si=ni&65535,ri&=15,ri&&(ct<ri&&(lt+=Ci[ae++]<<ct,ct+=8),si+=lt&(1<<ri)-1,lt>>>=ri,ct-=ri),ct<15&&(lt+=Ci[ae++]<<ct,ct+=8,lt+=Ci[ae++]<<ct,ct+=8),ni=ut[lt&ei];n:for(;;){if(ri=ni>>>24,lt>>>=ri,ct-=ri,ri=ni>>>16&255,ri&16){if(li=ni&65535,ri&=15,ct<ri&&(lt+=Ci[ae++]<<ct,ct+=8,ct<ri&&(lt+=Ci[ae++]<<ct,ct+=8)),li+=lt&(1<<ri)-1,li>Xe){Z.msg="invalid distance too far back",gi.mode=BAD$1;break e}if(lt>>>=ri,ct-=ri,ri=ve-be,li>ri){if(ri=li-ri,ri>tt&&gi.sane){Z.msg="invalid distance too far back",gi.mode=BAD$1;break e}if(ai=0,ci=st,it===0){if(ai+=Je-ri,ri<si){si-=ri;do pi[ve++]=st[ai++];while(--ri);ai=ve-li,ci=pi}}else if(it<ri){if(ai+=Je+it-ri,ri-=it,ri<si){si-=ri;do pi[ve++]=st[ai++];while(--ri);if(ai=0,it<si){ri=it,si-=ri;do pi[ve++]=st[ai++];while(--ri);ai=ve-li,ci=pi}}}else if(ai+=it-ri,ri<si){si-=ri;do pi[ve++]=st[ai++];while(--ri);ai=ve-li,ci=pi}for(;si>2;)pi[ve++]=ci[ai++],pi[ve++]=ci[ai++],pi[ve++]=ci[ai++],si-=3;si&&(pi[ve++]=ci[ai++],si>1&&(pi[ve++]=ci[ai++]))}else{ai=ve-li;do pi[ve++]=pi[ai++],pi[ve++]=pi[ai++],pi[ve++]=pi[ai++],si-=3;while(si>2);si&&(pi[ve++]=pi[ai++],si>1&&(pi[ve++]=pi[ai++]))}}else if(ri&64){Z.msg="invalid distance code",gi.mode=BAD$1;break e}else{ni=ut[(ni&65535)+(lt&(1<<ri)-1)];continue n}break}}else if(ri&64)if(ri&32){gi.mode=TYPE$1;break e}else{Z.msg="invalid literal/length code",gi.mode=BAD$1;break e}else{ni=gt[(ni&65535)+(lt&(1<<ri)-1)];continue t}break}}while(ae<ye&&ve<Qe);si=ct>>3,ae-=si,ct-=si<<3,lt&=(1<<ct)-1,Z.next_in=ae,Z.next_out=ve,Z.avail_in=ae<ye?5+(ye-ae):5-(ae-ye),Z.avail_out=ve<Qe?257+(Qe-ve):257-(ve-Qe),gi.hold=lt,gi.bits=ct};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(ie,Z,ee,ae,ye,ve,be,Qe)=>{const Xe=Qe.bits;let Je=0,tt=0,it=0,st=0,lt=0,ct=0,gt=0,ut=0,mt=0,ei=0,ni,ri,si,li,ai,ci=null,Ci;const pi=new Uint16Array(MAXBITS+1),gi=new Uint16Array(MAXBITS+1);let _i=null,bi,Mi,yi;for(Je=0;Je<=MAXBITS;Je++)pi[Je]=0;for(tt=0;tt<ae;tt++)pi[Z[ee+tt]]++;for(lt=Xe,st=MAXBITS;st>=1&&pi[st]===0;st--);if(lt>st&&(lt=st),st===0)return ye[ve++]=1<<24|64<<16|0,ye[ve++]=1<<24|64<<16|0,Qe.bits=1,0;for(it=1;it<st&&pi[it]===0;it++);for(lt<it&&(lt=it),ut=1,Je=1;Je<=MAXBITS;Je++)if(ut<<=1,ut-=pi[Je],ut<0)return-1;if(ut>0&&(ie===CODES$1||st!==1))return-1;for(gi[1]=0,Je=1;Je<MAXBITS;Je++)gi[Je+1]=gi[Je]+pi[Je];for(tt=0;tt<ae;tt++)Z[ee+tt]!==0&&(be[gi[Z[ee+tt]]++]=tt);if(ie===CODES$1?(ci=_i=be,Ci=20):ie===LENS$1?(ci=lbase,_i=lext,Ci=257):(ci=dbase,_i=dext,Ci=0),ei=0,tt=0,Je=it,ai=ve,ct=lt,gt=0,si=-1,mt=1<<lt,li=mt-1,ie===LENS$1&&mt>ENOUGH_LENS$1||ie===DISTS$1&&mt>ENOUGH_DISTS$1)return 1;for(;;){bi=Je-gt,be[tt]+1<Ci?(Mi=0,yi=be[tt]):be[tt]>=Ci?(Mi=_i[be[tt]-Ci],yi=ci[be[tt]-Ci]):(Mi=96,yi=0),ni=1<<Je-gt,ri=1<<ct,it=ri;do ri-=ni,ye[ai+(ei>>gt)+ri]=bi<<24|Mi<<16|yi|0;while(ri!==0);for(ni=1<<Je-1;ei&ni;)ni>>=1;if(ni!==0?(ei&=ni-1,ei+=ni):ei=0,tt++,--pi[Je]===0){if(Je===st)break;Je=Z[ee+be[tt]]}if(Je>lt&&(ei&li)!==si){for(gt===0&&(gt=lt),ai+=it,ct=Je-gt,ut=1<<ct;ct+gt<st&&(ut-=pi[ct+gt],!(ut<=0));)ct++,ut<<=1;if(mt+=1<<ct,ie===LENS$1&&mt>ENOUGH_LENS$1||ie===DISTS$1&&mt>ENOUGH_DISTS$1)return 1;si=ei&li,ye[si]=lt<<24|ct<<16|ai-ve|0}}return ei!==0&&(ye[ai+ei]=Je-gt<<24|64<<16|0),Qe.bits=lt,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=ie=>(ie>>>24&255)+(ie>>>8&65280)+((ie&65280)<<8)+((ie&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=ie=>{if(!ie)return 1;const Z=ie.state;return!Z||Z.strm!==ie||Z.mode<HEAD||Z.mode>SYNC?1:0},inflateResetKeep=ie=>{if(inflateStateCheck(ie))return Z_STREAM_ERROR$1;const Z=ie.state;return ie.total_in=ie.total_out=Z.total=0,ie.msg="",Z.wrap&&(ie.adler=Z.wrap&1),Z.mode=HEAD,Z.last=0,Z.havedict=0,Z.flags=-1,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new Int32Array(ENOUGH_LENS),Z.distcode=Z.distdyn=new Int32Array(ENOUGH_DISTS),Z.sane=1,Z.back=-1,Z_OK$1},inflateReset=ie=>{if(inflateStateCheck(ie))return Z_STREAM_ERROR$1;const Z=ie.state;return Z.wsize=0,Z.whave=0,Z.wnext=0,inflateResetKeep(ie)},inflateReset2=(ie,Z)=>{let ee;if(inflateStateCheck(ie))return Z_STREAM_ERROR$1;const ae=ie.state;return Z<0?(ee=0,Z=-Z):(ee=(Z>>4)+5,Z<48&&(Z&=15)),Z&&(Z<8||Z>15)?Z_STREAM_ERROR$1:(ae.window!==null&&ae.wbits!==Z&&(ae.window=null),ae.wrap=ee,ae.wbits=Z,inflateReset(ie))},inflateInit2=(ie,Z)=>{if(!ie)return Z_STREAM_ERROR$1;const ee=new InflateState;ie.state=ee,ee.strm=ie,ee.window=null,ee.mode=HEAD;const ae=inflateReset2(ie,Z);return ae!==Z_OK$1&&(ie.state=null),ae},inflateInit=ie=>inflateInit2(ie,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=ie=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let Z=0;for(;Z<144;)ie.lens[Z++]=8;for(;Z<256;)ie.lens[Z++]=9;for(;Z<280;)ie.lens[Z++]=7;for(;Z<288;)ie.lens[Z++]=8;for(inftrees(LENS,ie.lens,0,288,lenfix,0,ie.work,{bits:9}),Z=0;Z<32;)ie.lens[Z++]=5;inftrees(DISTS,ie.lens,0,32,distfix,0,ie.work,{bits:5}),virgin=!1}ie.lencode=lenfix,ie.lenbits=9,ie.distcode=distfix,ie.distbits=5},updatewindow=(ie,Z,ee,ae)=>{let ye;const ve=ie.state;return ve.window===null&&(ve.wsize=1<<ve.wbits,ve.wnext=0,ve.whave=0,ve.window=new Uint8Array(ve.wsize)),ae>=ve.wsize?(ve.window.set(Z.subarray(ee-ve.wsize,ee),0),ve.wnext=0,ve.whave=ve.wsize):(ye=ve.wsize-ve.wnext,ye>ae&&(ye=ae),ve.window.set(Z.subarray(ee-ae,ee-ae+ye),ve.wnext),ae-=ye,ae?(ve.window.set(Z.subarray(ee-ae,ee),0),ve.wnext=ae,ve.whave=ve.wsize):(ve.wnext+=ye,ve.wnext===ve.wsize&&(ve.wnext=0),ve.whave<ve.wsize&&(ve.whave+=ye))),0},inflate$2=(ie,Z)=>{let ee,ae,ye,ve,be,Qe,Xe,Je,tt,it,st,lt,ct,gt,ut=0,mt,ei,ni,ri,si,li,ai,ci;const Ci=new Uint8Array(4);let pi,gi;const _i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(ie)||!ie.output||!ie.input&&ie.avail_in!==0)return Z_STREAM_ERROR$1;ee=ie.state,ee.mode===TYPE&&(ee.mode=TYPEDO),be=ie.next_out,ye=ie.output,Xe=ie.avail_out,ve=ie.next_in,ae=ie.input,Qe=ie.avail_in,Je=ee.hold,tt=ee.bits,it=Qe,st=Xe,ci=Z_OK$1;e:for(;;)switch(ee.mode){case HEAD:if(ee.wrap===0){ee.mode=TYPEDO;break}for(;tt<16;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(ee.wrap&2&&Je===35615){ee.wbits===0&&(ee.wbits=15),ee.check=0,Ci[0]=Je&255,Ci[1]=Je>>>8&255,ee.check=crc32_1(ee.check,Ci,2,0),Je=0,tt=0,ee.mode=FLAGS;break}if(ee.head&&(ee.head.done=!1),!(ee.wrap&1)||(((Je&255)<<8)+(Je>>8))%31){ie.msg="incorrect header check",ee.mode=BAD;break}if((Je&15)!==Z_DEFLATED){ie.msg="unknown compression method",ee.mode=BAD;break}if(Je>>>=4,tt-=4,ai=(Je&15)+8,ee.wbits===0&&(ee.wbits=ai),ai>15||ai>ee.wbits){ie.msg="invalid window size",ee.mode=BAD;break}ee.dmax=1<<ee.wbits,ee.flags=0,ie.adler=ee.check=1,ee.mode=Je&512?DICTID:TYPE,Je=0,tt=0;break;case FLAGS:for(;tt<16;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(ee.flags=Je,(ee.flags&255)!==Z_DEFLATED){ie.msg="unknown compression method",ee.mode=BAD;break}if(ee.flags&57344){ie.msg="unknown header flags set",ee.mode=BAD;break}ee.head&&(ee.head.text=Je>>8&1),ee.flags&512&&ee.wrap&4&&(Ci[0]=Je&255,Ci[1]=Je>>>8&255,ee.check=crc32_1(ee.check,Ci,2,0)),Je=0,tt=0,ee.mode=TIME;case TIME:for(;tt<32;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}ee.head&&(ee.head.time=Je),ee.flags&512&&ee.wrap&4&&(Ci[0]=Je&255,Ci[1]=Je>>>8&255,Ci[2]=Je>>>16&255,Ci[3]=Je>>>24&255,ee.check=crc32_1(ee.check,Ci,4,0)),Je=0,tt=0,ee.mode=OS;case OS:for(;tt<16;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}ee.head&&(ee.head.xflags=Je&255,ee.head.os=Je>>8),ee.flags&512&&ee.wrap&4&&(Ci[0]=Je&255,Ci[1]=Je>>>8&255,ee.check=crc32_1(ee.check,Ci,2,0)),Je=0,tt=0,ee.mode=EXLEN;case EXLEN:if(ee.flags&1024){for(;tt<16;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}ee.length=Je,ee.head&&(ee.head.extra_len=Je),ee.flags&512&&ee.wrap&4&&(Ci[0]=Je&255,Ci[1]=Je>>>8&255,ee.check=crc32_1(ee.check,Ci,2,0)),Je=0,tt=0}else ee.head&&(ee.head.extra=null);ee.mode=EXTRA;case EXTRA:if(ee.flags&1024&&(lt=ee.length,lt>Qe&&(lt=Qe),lt&&(ee.head&&(ai=ee.head.extra_len-ee.length,ee.head.extra||(ee.head.extra=new Uint8Array(ee.head.extra_len)),ee.head.extra.set(ae.subarray(ve,ve+lt),ai)),ee.flags&512&&ee.wrap&4&&(ee.check=crc32_1(ee.check,ae,lt,ve)),Qe-=lt,ve+=lt,ee.length-=lt),ee.length))break e;ee.length=0,ee.mode=NAME;case NAME:if(ee.flags&2048){if(Qe===0)break e;lt=0;do ai=ae[ve+lt++],ee.head&&ai&&ee.length<65536&&(ee.head.name+=String.fromCharCode(ai));while(ai&&lt<Qe);if(ee.flags&512&&ee.wrap&4&&(ee.check=crc32_1(ee.check,ae,lt,ve)),Qe-=lt,ve+=lt,ai)break e}else ee.head&&(ee.head.name=null);ee.length=0,ee.mode=COMMENT;case COMMENT:if(ee.flags&4096){if(Qe===0)break e;lt=0;do ai=ae[ve+lt++],ee.head&&ai&&ee.length<65536&&(ee.head.comment+=String.fromCharCode(ai));while(ai&&lt<Qe);if(ee.flags&512&&ee.wrap&4&&(ee.check=crc32_1(ee.check,ae,lt,ve)),Qe-=lt,ve+=lt,ai)break e}else ee.head&&(ee.head.comment=null);ee.mode=HCRC;case HCRC:if(ee.flags&512){for(;tt<16;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(ee.wrap&4&&Je!==(ee.check&65535)){ie.msg="header crc mismatch",ee.mode=BAD;break}Je=0,tt=0}ee.head&&(ee.head.hcrc=ee.flags>>9&1,ee.head.done=!0),ie.adler=ee.check=0,ee.mode=TYPE;break;case DICTID:for(;tt<32;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}ie.adler=ee.check=zswap32(Je),Je=0,tt=0,ee.mode=DICT;case DICT:if(ee.havedict===0)return ie.next_out=be,ie.avail_out=Xe,ie.next_in=ve,ie.avail_in=Qe,ee.hold=Je,ee.bits=tt,Z_NEED_DICT$1;ie.adler=ee.check=1,ee.mode=TYPE;case TYPE:if(Z===Z_BLOCK||Z===Z_TREES)break e;case TYPEDO:if(ee.last){Je>>>=tt&7,tt-=tt&7,ee.mode=CHECK;break}for(;tt<3;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}switch(ee.last=Je&1,Je>>>=1,tt-=1,Je&3){case 0:ee.mode=STORED;break;case 1:if(fixedtables(ee),ee.mode=LEN_,Z===Z_TREES){Je>>>=2,tt-=2;break e}break;case 2:ee.mode=TABLE;break;case 3:ie.msg="invalid block type",ee.mode=BAD}Je>>>=2,tt-=2;break;case STORED:for(Je>>>=tt&7,tt-=tt&7;tt<32;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if((Je&65535)!==(Je>>>16^65535)){ie.msg="invalid stored block lengths",ee.mode=BAD;break}if(ee.length=Je&65535,Je=0,tt=0,ee.mode=COPY_,Z===Z_TREES)break e;case COPY_:ee.mode=COPY;case COPY:if(lt=ee.length,lt){if(lt>Qe&&(lt=Qe),lt>Xe&&(lt=Xe),lt===0)break e;ye.set(ae.subarray(ve,ve+lt),be),Qe-=lt,ve+=lt,Xe-=lt,be+=lt,ee.length-=lt;break}ee.mode=TYPE;break;case TABLE:for(;tt<14;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(ee.nlen=(Je&31)+257,Je>>>=5,tt-=5,ee.ndist=(Je&31)+1,Je>>>=5,tt-=5,ee.ncode=(Je&15)+4,Je>>>=4,tt-=4,ee.nlen>286||ee.ndist>30){ie.msg="too many length or distance symbols",ee.mode=BAD;break}ee.have=0,ee.mode=LENLENS;case LENLENS:for(;ee.have<ee.ncode;){for(;tt<3;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}ee.lens[_i[ee.have++]]=Je&7,Je>>>=3,tt-=3}for(;ee.have<19;)ee.lens[_i[ee.have++]]=0;if(ee.lencode=ee.lendyn,ee.lenbits=7,pi={bits:ee.lenbits},ci=inftrees(CODES,ee.lens,0,19,ee.lencode,0,ee.work,pi),ee.lenbits=pi.bits,ci){ie.msg="invalid code lengths set",ee.mode=BAD;break}ee.have=0,ee.mode=CODELENS;case CODELENS:for(;ee.have<ee.nlen+ee.ndist;){for(;ut=ee.lencode[Je&(1<<ee.lenbits)-1],mt=ut>>>24,ei=ut>>>16&255,ni=ut&65535,!(mt<=tt);){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(ni<16)Je>>>=mt,tt-=mt,ee.lens[ee.have++]=ni;else{if(ni===16){for(gi=mt+2;tt<gi;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(Je>>>=mt,tt-=mt,ee.have===0){ie.msg="invalid bit length repeat",ee.mode=BAD;break}ai=ee.lens[ee.have-1],lt=3+(Je&3),Je>>>=2,tt-=2}else if(ni===17){for(gi=mt+3;tt<gi;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}Je>>>=mt,tt-=mt,ai=0,lt=3+(Je&7),Je>>>=3,tt-=3}else{for(gi=mt+7;tt<gi;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}Je>>>=mt,tt-=mt,ai=0,lt=11+(Je&127),Je>>>=7,tt-=7}if(ee.have+lt>ee.nlen+ee.ndist){ie.msg="invalid bit length repeat",ee.mode=BAD;break}for(;lt--;)ee.lens[ee.have++]=ai}}if(ee.mode===BAD)break;if(ee.lens[256]===0){ie.msg="invalid code -- missing end-of-block",ee.mode=BAD;break}if(ee.lenbits=9,pi={bits:ee.lenbits},ci=inftrees(LENS,ee.lens,0,ee.nlen,ee.lencode,0,ee.work,pi),ee.lenbits=pi.bits,ci){ie.msg="invalid literal/lengths set",ee.mode=BAD;break}if(ee.distbits=6,ee.distcode=ee.distdyn,pi={bits:ee.distbits},ci=inftrees(DISTS,ee.lens,ee.nlen,ee.ndist,ee.distcode,0,ee.work,pi),ee.distbits=pi.bits,ci){ie.msg="invalid distances set",ee.mode=BAD;break}if(ee.mode=LEN_,Z===Z_TREES)break e;case LEN_:ee.mode=LEN;case LEN:if(Qe>=6&&Xe>=258){ie.next_out=be,ie.avail_out=Xe,ie.next_in=ve,ie.avail_in=Qe,ee.hold=Je,ee.bits=tt,inffast(ie,st),be=ie.next_out,ye=ie.output,Xe=ie.avail_out,ve=ie.next_in,ae=ie.input,Qe=ie.avail_in,Je=ee.hold,tt=ee.bits,ee.mode===TYPE&&(ee.back=-1);break}for(ee.back=0;ut=ee.lencode[Je&(1<<ee.lenbits)-1],mt=ut>>>24,ei=ut>>>16&255,ni=ut&65535,!(mt<=tt);){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(ei&&!(ei&240)){for(ri=mt,si=ei,li=ni;ut=ee.lencode[li+((Je&(1<<ri+si)-1)>>ri)],mt=ut>>>24,ei=ut>>>16&255,ni=ut&65535,!(ri+mt<=tt);){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}Je>>>=ri,tt-=ri,ee.back+=ri}if(Je>>>=mt,tt-=mt,ee.back+=mt,ee.length=ni,ei===0){ee.mode=LIT;break}if(ei&32){ee.back=-1,ee.mode=TYPE;break}if(ei&64){ie.msg="invalid literal/length code",ee.mode=BAD;break}ee.extra=ei&15,ee.mode=LENEXT;case LENEXT:if(ee.extra){for(gi=ee.extra;tt<gi;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}ee.length+=Je&(1<<ee.extra)-1,Je>>>=ee.extra,tt-=ee.extra,ee.back+=ee.extra}ee.was=ee.length,ee.mode=DIST;case DIST:for(;ut=ee.distcode[Je&(1<<ee.distbits)-1],mt=ut>>>24,ei=ut>>>16&255,ni=ut&65535,!(mt<=tt);){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(!(ei&240)){for(ri=mt,si=ei,li=ni;ut=ee.distcode[li+((Je&(1<<ri+si)-1)>>ri)],mt=ut>>>24,ei=ut>>>16&255,ni=ut&65535,!(ri+mt<=tt);){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}Je>>>=ri,tt-=ri,ee.back+=ri}if(Je>>>=mt,tt-=mt,ee.back+=mt,ei&64){ie.msg="invalid distance code",ee.mode=BAD;break}ee.offset=ni,ee.extra=ei&15,ee.mode=DISTEXT;case DISTEXT:if(ee.extra){for(gi=ee.extra;tt<gi;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}ee.offset+=Je&(1<<ee.extra)-1,Je>>>=ee.extra,tt-=ee.extra,ee.back+=ee.extra}if(ee.offset>ee.dmax){ie.msg="invalid distance too far back",ee.mode=BAD;break}ee.mode=MATCH;case MATCH:if(Xe===0)break e;if(lt=st-Xe,ee.offset>lt){if(lt=ee.offset-lt,lt>ee.whave&&ee.sane){ie.msg="invalid distance too far back",ee.mode=BAD;break}lt>ee.wnext?(lt-=ee.wnext,ct=ee.wsize-lt):ct=ee.wnext-lt,lt>ee.length&&(lt=ee.length),gt=ee.window}else gt=ye,ct=be-ee.offset,lt=ee.length;lt>Xe&&(lt=Xe),Xe-=lt,ee.length-=lt;do ye[be++]=gt[ct++];while(--lt);ee.length===0&&(ee.mode=LEN);break;case LIT:if(Xe===0)break e;ye[be++]=ee.length,Xe--,ee.mode=LEN;break;case CHECK:if(ee.wrap){for(;tt<32;){if(Qe===0)break e;Qe--,Je|=ae[ve++]<<tt,tt+=8}if(st-=Xe,ie.total_out+=st,ee.total+=st,ee.wrap&4&&st&&(ie.adler=ee.check=ee.flags?crc32_1(ee.check,ye,st,be-st):adler32_1(ee.check,ye,st,be-st)),st=Xe,ee.wrap&4&&(ee.flags?Je:zswap32(Je))!==ee.check){ie.msg="incorrect data check",ee.mode=BAD;break}Je=0,tt=0}ee.mode=LENGTH;case LENGTH:if(ee.wrap&&ee.flags){for(;tt<32;){if(Qe===0)break e;Qe--,Je+=ae[ve++]<<tt,tt+=8}if(ee.wrap&4&&Je!==(ee.total&4294967295)){ie.msg="incorrect length check",ee.mode=BAD;break}Je=0,tt=0}ee.mode=DONE;case DONE:ci=Z_STREAM_END$1;break e;case BAD:ci=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return ie.next_out=be,ie.avail_out=Xe,ie.next_in=ve,ie.avail_in=Qe,ee.hold=Je,ee.bits=tt,(ee.wsize||st!==ie.avail_out&&ee.mode<BAD&&(ee.mode<CHECK||Z!==Z_FINISH$1))&&updatewindow(ie,ie.output,ie.next_out,st-ie.avail_out),it-=ie.avail_in,st-=ie.avail_out,ie.total_in+=it,ie.total_out+=st,ee.total+=st,ee.wrap&4&&st&&(ie.adler=ee.check=ee.flags?crc32_1(ee.check,ye,st,ie.next_out-st):adler32_1(ee.check,ye,st,ie.next_out-st)),ie.data_type=ee.bits+(ee.last?64:0)+(ee.mode===TYPE?128:0)+(ee.mode===LEN_||ee.mode===COPY_?256:0),(it===0&&st===0||Z===Z_FINISH$1)&&ci===Z_OK$1&&(ci=Z_BUF_ERROR),ci},inflateEnd=ie=>{if(inflateStateCheck(ie))return Z_STREAM_ERROR$1;let Z=ie.state;return Z.window&&(Z.window=null),ie.state=null,Z_OK$1},inflateGetHeader=(ie,Z)=>{if(inflateStateCheck(ie))return Z_STREAM_ERROR$1;const ee=ie.state;return ee.wrap&2?(ee.head=Z,Z.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(ie,Z)=>{const ee=Z.length;let ae,ye,ve;return inflateStateCheck(ie)||(ae=ie.state,ae.wrap!==0&&ae.mode!==DICT)?Z_STREAM_ERROR$1:ae.mode===DICT&&(ye=1,ye=adler32_1(ye,Z,ee,0),ye!==ae.check)?Z_DATA_ERROR$1:(ve=updatewindow(ie,Z,ee,ee),ve?(ae.mode=MEM,Z_MEM_ERROR$1):(ae.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(ie){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},ie||{});const Z=this.options;Z.raw&&Z.windowBits>=0&&Z.windowBits<16&&(Z.windowBits=-Z.windowBits,Z.windowBits===0&&(Z.windowBits=-15)),Z.windowBits>=0&&Z.windowBits<16&&!(ie&&ie.windowBits)&&(Z.windowBits+=32),Z.windowBits>15&&Z.windowBits<48&&(Z.windowBits&15||(Z.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let ee=inflate_1$2.inflateInit2(this.strm,Z.windowBits);if(ee!==Z_OK)throw new Error(messages[ee]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),Z.dictionary&&(typeof Z.dictionary=="string"?Z.dictionary=strings.string2buf(Z.dictionary):toString.call(Z.dictionary)==="[object ArrayBuffer]"&&(Z.dictionary=new Uint8Array(Z.dictionary)),Z.raw&&(ee=inflate_1$2.inflateSetDictionary(this.strm,Z.dictionary),ee!==Z_OK)))throw new Error(messages[ee])}Inflate$1.prototype.push=function(ie,Z){const ee=this.strm,ae=this.options.chunkSize,ye=this.options.dictionary;let ve,be,Qe;if(this.ended)return!1;for(Z===~~Z?be=Z:be=Z===!0?Z_FINISH:Z_NO_FLUSH,toString.call(ie)==="[object ArrayBuffer]"?ee.input=new Uint8Array(ie):ee.input=ie,ee.next_in=0,ee.avail_in=ee.input.length;;){for(ee.avail_out===0&&(ee.output=new Uint8Array(ae),ee.next_out=0,ee.avail_out=ae),ve=inflate_1$2.inflate(ee,be),ve===Z_NEED_DICT&&ye&&(ve=inflate_1$2.inflateSetDictionary(ee,ye),ve===Z_OK?ve=inflate_1$2.inflate(ee,be):ve===Z_DATA_ERROR&&(ve=Z_NEED_DICT));ee.avail_in>0&&ve===Z_STREAM_END&&ee.state.wrap>0&&ie[ee.next_in]!==0;)inflate_1$2.inflateReset(ee),ve=inflate_1$2.inflate(ee,be);switch(ve){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(ve),this.ended=!0,!1}if(Qe=ee.avail_out,ee.next_out&&(ee.avail_out===0||ve===Z_STREAM_END))if(this.options.to==="string"){let Xe=strings.utf8border(ee.output,ee.next_out),Je=ee.next_out-Xe,tt=strings.buf2string(ee.output,Xe);ee.next_out=Je,ee.avail_out=ae-Je,Je&&ee.output.set(ee.output.subarray(Xe,Xe+Je),0),this.onData(tt)}else this.onData(ee.output.length===ee.next_out?ee.output:ee.output.subarray(0,ee.next_out));if(!(ve===Z_OK&&Qe===0)){if(ve===Z_STREAM_END)return ve=inflate_1$2.inflateEnd(this.strm),this.onEnd(ve),this.ended=!0,!0;if(ee.avail_in===0)break}}return!0},Inflate$1.prototype.onData=function(ie){this.chunks.push(ie)},Inflate$1.prototype.onEnd=function(ie){ie===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=ie,this.msg=this.strm.msg};function inflate$1(ie,Z){const ee=new Inflate$1(Z);if(ee.push(ie),ee.err)throw ee.msg||messages[ee.err];return ee.result}function inflateRaw$1(ie,Z){return Z=Z||{},Z.raw=!0,inflate$1(ie,Z)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var inflate_1=inflate;class DeflateDecoder extends BaseDecoder{decodeBlock(Z){return inflate_1(new Uint8Array(Z)).buffer}}const deflate=Object.freeze(Object.defineProperty({__proto__:null,default:DeflateDecoder},Symbol.toStringTag,{value:"Module"}));class PackbitsDecoder extends BaseDecoder{decodeBlock(Z){const ee=new DataView(Z),ae=[];for(let ye=0;ye<Z.byteLength;++ye){let ve=ee.getInt8(ye);if(ve<0){const be=ee.getUint8(ye+1);ve=-ve;for(let Qe=0;Qe<=ve;++Qe)ae.push(be);ye+=1}else{for(let be=0;be<=ve;++be)ae.push(ee.getUint8(ye+be+1));ye+=ve+1}}return new Uint8Array(ae).buffer}}const packbits=Object.freeze(Object.defineProperty({__proto__:null,default:PackbitsDecoder},Symbol.toStringTag,{value:"Module"}));var LercDecode={exports:{}};(function(ie){/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */(function(){var Z=function(){var ve={};ve.defaultNoDataValue=-34027999387901484e22,ve.decode=function(it,st){st=st||{};var lt=st.encodedMaskData||st.encodedMaskData===null,ct=Je(it,st.inputOffset||0,lt),gt=st.noDataValue!==null?st.noDataValue:ve.defaultNoDataValue,ut=be(ct,st.pixelType||Float32Array,st.encodedMaskData,gt,st.returnMask),mt={width:ct.width,height:ct.height,pixelData:ut.resultPixels,minValue:ut.minValue,maxValue:ct.pixels.maxValue,noDataValue:gt};return ut.resultMask&&(mt.maskData=ut.resultMask),st.returnEncodedMask&&ct.mask&&(mt.encodedMaskData=ct.mask.bitset?ct.mask.bitset:null),st.returnFileInfo&&(mt.fileInfo=Qe(ct),st.computeUsedBitDepths&&(mt.fileInfo.bitDepths=Xe(ct))),mt};var be=function(it,st,lt,ct,gt){var ut=0,mt=it.pixels.numBlocksX,ei=it.pixels.numBlocksY,ni=Math.floor(it.width/mt),ri=Math.floor(it.height/ei),si=2*it.maxZError,li=Number.MAX_VALUE,ai;lt=lt||(it.mask?it.mask.bitset:null);var ci,Ci;ci=new st(it.width*it.height),gt&&lt&&(Ci=new Uint8Array(it.width*it.height));for(var pi=new Float32Array(ni*ri),gi,_i,bi=0;bi<=ei;bi++){var Mi=bi!==ei?ri:it.height%ei;if(Mi!==0)for(var yi=0;yi<=mt;yi++){var Ti=yi!==mt?ni:it.width%mt;if(Ti!==0){var Ii=bi*it.width*ri+yi*ni,Ri=it.width-Ti,Pi=it.pixels.blocks[ut],xi,ki,Li;Pi.encoding<2?(Pi.encoding===0?xi=Pi.rawData:(tt(Pi.stuffedData,Pi.bitsPerPixel,Pi.numValidPixels,Pi.offset,si,pi,it.pixels.maxValue),xi=pi),ki=0):Pi.encoding===2?Li=0:Li=Pi.offset;var Yr;if(lt)for(_i=0;_i<Mi;_i++){for(Ii&7&&(Yr=lt[Ii>>3],Yr<<=Ii&7),gi=0;gi<Ti;gi++)Ii&7||(Yr=lt[Ii>>3]),Yr&128?(Ci&&(Ci[Ii]=1),ai=Pi.encoding<2?xi[ki++]:Li,li=li>ai?ai:li,ci[Ii++]=ai):(Ci&&(Ci[Ii]=0),ci[Ii++]=ct),Yr<<=1;Ii+=Ri}else if(Pi.encoding<2)for(_i=0;_i<Mi;_i++){for(gi=0;gi<Ti;gi++)ai=xi[ki++],li=li>ai?ai:li,ci[Ii++]=ai;Ii+=Ri}else for(li=li>Li?Li:li,_i=0;_i<Mi;_i++){for(gi=0;gi<Ti;gi++)ci[Ii++]=Li;Ii+=Ri}if(Pi.encoding===1&&ki!==Pi.numValidPixels)throw"Block and Mask do not match";ut++}}}return{resultPixels:ci,resultMask:Ci,minValue:li}},Qe=function(it){return{fileIdentifierString:it.fileIdentifierString,fileVersion:it.fileVersion,imageType:it.imageType,height:it.height,width:it.width,maxZError:it.maxZError,eofOffset:it.eofOffset,mask:it.mask?{numBlocksX:it.mask.numBlocksX,numBlocksY:it.mask.numBlocksY,numBytes:it.mask.numBytes,maxValue:it.mask.maxValue}:null,pixels:{numBlocksX:it.pixels.numBlocksX,numBlocksY:it.pixels.numBlocksY,numBytes:it.pixels.numBytes,maxValue:it.pixels.maxValue,noDataValue:it.noDataValue}}},Xe=function(it){for(var st=it.pixels.numBlocksX*it.pixels.numBlocksY,lt={},ct=0;ct<st;ct++){var gt=it.pixels.blocks[ct];gt.encoding===0?lt.float32=!0:gt.encoding===1?lt[gt.bitsPerPixel]=!0:lt[0]=!0}return Object.keys(lt)},Je=function(it,st,lt){var ct={},gt=new Uint8Array(it,st,10);if(ct.fileIdentifierString=String.fromCharCode.apply(null,gt),ct.fileIdentifierString.trim()!=="CntZImage")throw"Unexpected file identifier string: "+ct.fileIdentifierString;st+=10;var ut=new DataView(it,st,24);if(ct.fileVersion=ut.getInt32(0,!0),ct.imageType=ut.getInt32(4,!0),ct.height=ut.getUint32(8,!0),ct.width=ut.getUint32(12,!0),ct.maxZError=ut.getFloat64(16,!0),st+=24,!lt)if(ut=new DataView(it,st,16),ct.mask={},ct.mask.numBlocksY=ut.getUint32(0,!0),ct.mask.numBlocksX=ut.getUint32(4,!0),ct.mask.numBytes=ut.getUint32(8,!0),ct.mask.maxValue=ut.getFloat32(12,!0),st+=16,ct.mask.numBytes>0){var mt=new Uint8Array(Math.ceil(ct.width*ct.height/8));ut=new DataView(it,st,ct.mask.numBytes);var ei=ut.getInt16(0,!0),ni=2,ri=0;do{if(ei>0)for(;ei--;)mt[ri++]=ut.getUint8(ni++);else{var si=ut.getUint8(ni++);for(ei=-ei;ei--;)mt[ri++]=si}ei=ut.getInt16(ni,!0),ni+=2}while(ni<ct.mask.numBytes);if(ei!==-32768||ri<mt.length)throw"Unexpected end of mask RLE encoding";ct.mask.bitset=mt,st+=ct.mask.numBytes}else ct.mask.numBytes|ct.mask.numBlocksY|ct.mask.maxValue||(ct.mask.bitset=new Uint8Array(Math.ceil(ct.width*ct.height/8)));ut=new DataView(it,st,16),ct.pixels={},ct.pixels.numBlocksY=ut.getUint32(0,!0),ct.pixels.numBlocksX=ut.getUint32(4,!0),ct.pixels.numBytes=ut.getUint32(8,!0),ct.pixels.maxValue=ut.getFloat32(12,!0),st+=16;var li=ct.pixels.numBlocksX,ai=ct.pixels.numBlocksY,ci=li+(ct.width%li>0?1:0),Ci=ai+(ct.height%ai>0?1:0);ct.pixels.blocks=new Array(ci*Ci);for(var pi=0,gi=0;gi<Ci;gi++)for(var _i=0;_i<ci;_i++){var bi=0,Mi=it.byteLength-st;ut=new DataView(it,st,Math.min(10,Mi));var yi={};ct.pixels.blocks[pi++]=yi;var Ti=ut.getUint8(0);if(bi++,yi.encoding=Ti&63,yi.encoding>3)throw"Invalid block encoding ("+yi.encoding+")";if(yi.encoding===2){st++;continue}if(Ti!==0&&Ti!==2){if(Ti>>=6,yi.offsetType=Ti,Ti===2)yi.offset=ut.getInt8(1),bi++;else if(Ti===1)yi.offset=ut.getInt16(1,!0),bi+=2;else if(Ti===0)yi.offset=ut.getFloat32(1,!0),bi+=4;else throw"Invalid block offset type";if(yi.encoding===1)if(Ti=ut.getUint8(bi),bi++,yi.bitsPerPixel=Ti&63,Ti>>=6,yi.numValidPixelsType=Ti,Ti===2)yi.numValidPixels=ut.getUint8(bi),bi++;else if(Ti===1)yi.numValidPixels=ut.getUint16(bi,!0),bi+=2;else if(Ti===0)yi.numValidPixels=ut.getUint32(bi,!0),bi+=4;else throw"Invalid valid pixel count type"}if(st+=bi,yi.encoding!==3){var Ii,Ri;if(yi.encoding===0){var Pi=(ct.pixels.numBytes-1)/4;if(Pi!==Math.floor(Pi))throw"uncompressed block has invalid length";Ii=new ArrayBuffer(Pi*4),Ri=new Uint8Array(Ii),Ri.set(new Uint8Array(it,st,Pi*4));var xi=new Float32Array(Ii);yi.rawData=xi,st+=Pi*4}else if(yi.encoding===1){var ki=Math.ceil(yi.numValidPixels*yi.bitsPerPixel/8),Li=Math.ceil(ki/4);Ii=new ArrayBuffer(Li*4),Ri=new Uint8Array(Ii),Ri.set(new Uint8Array(it,st,ki)),yi.stuffedData=new Uint32Array(Ii),st+=ki}}}return ct.eofOffset=st,ct},tt=function(it,st,lt,ct,gt,ut,mt){var ei=(1<<st)-1,ni=0,ri,si=0,li,ai,ci=Math.ceil((mt-ct)/gt),Ci=it.length*4-Math.ceil(st*lt/8);for(it[it.length-1]<<=8*Ci,ri=0;ri<lt;ri++){if(si===0&&(ai=it[ni++],si=32),si>=st)li=ai>>>si-st&ei,si-=st;else{var pi=st-si;li=(ai&ei)<<pi&ei,ai=it[ni++],si=32-pi,li+=ai>>>si}ut[ri]=li<ci?ct+li*gt:mt}return ut};return ve}(),ee=function(){var ve={unstuff:function(Je,tt,it,st,lt,ct,gt,ut){var mt=(1<<it)-1,ei=0,ni,ri=0,si,li,ai,ci,Ci=Je.length*4-Math.ceil(it*st/8);if(Je[Je.length-1]<<=8*Ci,lt)for(ni=0;ni<st;ni++)ri===0&&(li=Je[ei++],ri=32),ri>=it?(si=li>>>ri-it&mt,ri-=it):(ai=it-ri,si=(li&mt)<<ai&mt,li=Je[ei++],ri=32-ai,si+=li>>>ri),tt[ni]=lt[si];else for(ci=Math.ceil((ut-ct)/gt),ni=0;ni<st;ni++)ri===0&&(li=Je[ei++],ri=32),ri>=it?(si=li>>>ri-it&mt,ri-=it):(ai=it-ri,si=(li&mt)<<ai&mt,li=Je[ei++],ri=32-ai,si+=li>>>ri),tt[ni]=si<ci?ct+si*gt:ut},unstuffLUT:function(Je,tt,it,st,lt,ct){var gt=(1<<tt)-1,ut=0,mt=0,ei=0,ni=0,ri=0,si,li=[],ai=Je.length*4-Math.ceil(tt*it/8);Je[Je.length-1]<<=8*ai;var ci=Math.ceil((ct-st)/lt);for(mt=0;mt<it;mt++)ni===0&&(si=Je[ut++],ni=32),ni>=tt?(ri=si>>>ni-tt&gt,ni-=tt):(ei=tt-ni,ri=(si&gt)<<ei&gt,si=Je[ut++],ni=32-ei,ri+=si>>>ni),li[mt]=ri<ci?st+ri*lt:ct;return li.unshift(st),li},unstuff2:function(Je,tt,it,st,lt,ct,gt,ut){var mt=(1<<it)-1,ei=0,ni,ri=0,si=0,li,ai,ci;if(lt)for(ni=0;ni<st;ni++)ri===0&&(ai=Je[ei++],ri=32,si=0),ri>=it?(li=ai>>>si&mt,ri-=it,si+=it):(ci=it-ri,li=ai>>>si&mt,ai=Je[ei++],ri=32-ci,li|=(ai&(1<<ci)-1)<<it-ci,si=ci),tt[ni]=lt[li];else{var Ci=Math.ceil((ut-ct)/gt);for(ni=0;ni<st;ni++)ri===0&&(ai=Je[ei++],ri=32,si=0),ri>=it?(li=ai>>>si&mt,ri-=it,si+=it):(ci=it-ri,li=ai>>>si&mt,ai=Je[ei++],ri=32-ci,li|=(ai&(1<<ci)-1)<<it-ci,si=ci),tt[ni]=li<Ci?ct+li*gt:ut}return tt},unstuffLUT2:function(Je,tt,it,st,lt,ct){var gt=(1<<tt)-1,ut=0,mt=0,ei=0,ni=0,ri=0,si=0,li,ai=[],ci=Math.ceil((ct-st)/lt);for(mt=0;mt<it;mt++)ni===0&&(li=Je[ut++],ni=32,si=0),ni>=tt?(ri=li>>>si&gt,ni-=tt,si+=tt):(ei=tt-ni,ri=li>>>si&gt,li=Je[ut++],ni=32-ei,ri|=(li&(1<<ei)-1)<<tt-ei,si=ei),ai[mt]=ri<ci?st+ri*lt:ct;return ai.unshift(st),ai},originalUnstuff:function(Je,tt,it,st){var lt=(1<<it)-1,ct=0,gt,ut=0,mt,ei,ni,ri=Je.length*4-Math.ceil(it*st/8);for(Je[Je.length-1]<<=8*ri,gt=0;gt<st;gt++)ut===0&&(ei=Je[ct++],ut=32),ut>=it?(mt=ei>>>ut-it&lt,ut-=it):(ni=it-ut,mt=(ei&lt)<<ni&lt,ei=Je[ct++],ut=32-ni,mt+=ei>>>ut),tt[gt]=mt;return tt},originalUnstuff2:function(Je,tt,it,st){var lt=(1<<it)-1,ct=0,gt,ut=0,mt=0,ei,ni,ri;for(gt=0;gt<st;gt++)ut===0&&(ni=Je[ct++],ut=32,mt=0),ut>=it?(ei=ni>>>mt&lt,ut-=it,mt+=it):(ri=it-ut,ei=ni>>>mt&lt,ni=Je[ct++],ut=32-ri,ei|=(ni&(1<<ri)-1)<<it-ri,mt=ri),tt[gt]=ei;return tt}},be={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(Je){for(var tt=65535,it=65535,st=Je.length,lt=Math.floor(st/2),ct=0;lt;){var gt=lt>=359?359:lt;lt-=gt;do tt+=Je[ct++]<<8,it+=tt+=Je[ct++];while(--gt);tt=(tt&65535)+(tt>>>16),it=(it&65535)+(it>>>16)}return st&1&&(it+=tt+=Je[ct]<<8),tt=(tt&65535)+(tt>>>16),it=(it&65535)+(it>>>16),(it<<16|tt)>>>0},readHeaderInfo:function(Je,tt){var it=tt.ptr,st=new Uint8Array(Je,it,6),lt={};if(lt.fileIdentifierString=String.fromCharCode.apply(null,st),lt.fileIdentifierString.lastIndexOf("Lerc2",0)!==0)throw"Unexpected file identifier string (expect Lerc2 ): "+lt.fileIdentifierString;it+=6;var ct=new DataView(Je,it,8),gt=ct.getInt32(0,!0);lt.fileVersion=gt,it+=4,gt>=3&&(lt.checksum=ct.getUint32(4,!0),it+=4),ct=new DataView(Je,it,12),lt.height=ct.getUint32(0,!0),lt.width=ct.getUint32(4,!0),it+=8,gt>=4?(lt.numDims=ct.getUint32(8,!0),it+=4):lt.numDims=1,ct=new DataView(Je,it,40),lt.numValidPixel=ct.getUint32(0,!0),lt.microBlockSize=ct.getInt32(4,!0),lt.blobSize=ct.getInt32(8,!0),lt.imageType=ct.getInt32(12,!0),lt.maxZError=ct.getFloat64(16,!0),lt.zMin=ct.getFloat64(24,!0),lt.zMax=ct.getFloat64(32,!0),it+=40,tt.headerInfo=lt,tt.ptr=it;var ut,mt;if(gt>=3&&(mt=gt>=4?52:48,ut=this.computeChecksumFletcher32(new Uint8Array(Je,it-mt,lt.blobSize-14)),ut!==lt.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(Je,tt){var it=tt.headerInfo,st=this.getDataTypeArray(it.imageType),lt=it.numDims*this.getDataTypeSize(it.imageType),ct=this.readSubArray(Je,tt.ptr,st,lt),gt=this.readSubArray(Je,tt.ptr+lt,st,lt);tt.ptr+=2*lt;var ut,mt=!0;for(ut=0;ut<it.numDims;ut++)if(ct[ut]!==gt[ut]){mt=!1;break}return it.minValues=ct,it.maxValues=gt,mt},readSubArray:function(Je,tt,it,st){var lt;if(it===Uint8Array)lt=new Uint8Array(Je,tt,st);else{var ct=new ArrayBuffer(st),gt=new Uint8Array(ct);gt.set(new Uint8Array(Je,tt,st)),lt=new it(ct)}return lt},readMask:function(Je,tt){var it=tt.ptr,st=tt.headerInfo,lt=st.width*st.height,ct=st.numValidPixel,gt=new DataView(Je,it,4),ut={};if(ut.numBytes=gt.getUint32(0,!0),it+=4,(ct===0||lt===ct)&&ut.numBytes!==0)throw"invalid mask";var mt,ei;if(ct===0)mt=new Uint8Array(Math.ceil(lt/8)),ut.bitset=mt,ei=new Uint8Array(lt),tt.pixels.resultMask=ei,it+=ut.numBytes;else if(ut.numBytes>0){mt=new Uint8Array(Math.ceil(lt/8)),gt=new DataView(Je,it,ut.numBytes);var ni=gt.getInt16(0,!0),ri=2,si=0,li=0;do{if(ni>0)for(;ni--;)mt[si++]=gt.getUint8(ri++);else for(li=gt.getUint8(ri++),ni=-ni;ni--;)mt[si++]=li;ni=gt.getInt16(ri,!0),ri+=2}while(ri<ut.numBytes);if(ni!==-32768||si<mt.length)throw"Unexpected end of mask RLE encoding";ei=new Uint8Array(lt);var ai=0,ci=0;for(ci=0;ci<lt;ci++)ci&7?(ai=mt[ci>>3],ai<<=ci&7):ai=mt[ci>>3],ai&128&&(ei[ci]=1);tt.pixels.resultMask=ei,ut.bitset=mt,it+=ut.numBytes}return tt.ptr=it,tt.mask=ut,!0},readDataOneSweep:function(Je,tt,it,st){var lt=tt.ptr,ct=tt.headerInfo,gt=ct.numDims,ut=ct.width*ct.height,mt=ct.imageType,ei=ct.numValidPixel*be.getDataTypeSize(mt)*gt,ni,ri=tt.pixels.resultMask;if(it===Uint8Array)ni=new Uint8Array(Je,lt,ei);else{var si=new ArrayBuffer(ei),li=new Uint8Array(si);li.set(new Uint8Array(Je,lt,ei)),ni=new it(si)}if(ni.length===ut*gt)st?tt.pixels.resultPixels=be.swapDimensionOrder(ni,ut,gt,it,!0):tt.pixels.resultPixels=ni;else{tt.pixels.resultPixels=new it(ut*gt);var ai=0,ci=0,Ci=0,pi=0;if(gt>1){if(st){for(ci=0;ci<ut;ci++)if(ri[ci])for(pi=ci,Ci=0;Ci<gt;Ci++,pi+=ut)tt.pixels.resultPixels[pi]=ni[ai++]}else for(ci=0;ci<ut;ci++)if(ri[ci])for(pi=ci*gt,Ci=0;Ci<gt;Ci++)tt.pixels.resultPixels[pi+Ci]=ni[ai++]}else for(ci=0;ci<ut;ci++)ri[ci]&&(tt.pixels.resultPixels[ci]=ni[ai++])}return lt+=ei,tt.ptr=lt,!0},readHuffmanTree:function(Je,tt){var it=this.HUFFMAN_LUT_BITS_MAX,st=new DataView(Je,tt.ptr,16);tt.ptr+=16;var lt=st.getInt32(0,!0);if(lt<2)throw"unsupported Huffman version";var ct=st.getInt32(4,!0),gt=st.getInt32(8,!0),ut=st.getInt32(12,!0);if(gt>=ut)return!1;var mt=new Uint32Array(ut-gt);be.decodeBits(Je,tt,mt);var ei=[],ni,ri,si,li;for(ni=gt;ni<ut;ni++)ri=ni-(ni<ct?0:ct),ei[ri]={first:mt[ni-gt],second:null};var ai=Je.byteLength-tt.ptr,ci=Math.ceil(ai/4),Ci=new ArrayBuffer(ci*4),pi=new Uint8Array(Ci);pi.set(new Uint8Array(Je,tt.ptr,ai));var gi=new Uint32Array(Ci),_i=0,bi,Mi=0;for(bi=gi[0],ni=gt;ni<ut;ni++)ri=ni-(ni<ct?0:ct),li=ei[ri].first,li>0&&(ei[ri].second=bi<<_i>>>32-li,32-_i>=li?(_i+=li,_i===32&&(_i=0,Mi++,bi=gi[Mi])):(_i+=li-32,Mi++,bi=gi[Mi],ei[ri].second|=bi>>>32-_i));var yi=0,Ti=0,Ii=new Qe;for(ni=0;ni<ei.length;ni++)ei[ni]!==void 0&&(yi=Math.max(yi,ei[ni].first));yi>=it?Ti=it:Ti=yi;var Ri=[],Pi,xi,ki,Li,Yr,Ui;for(ni=gt;ni<ut;ni++)if(ri=ni-(ni<ct?0:ct),li=ei[ri].first,li>0)if(Pi=[li,ri],li<=Ti)for(xi=ei[ri].second<<Ti-li,ki=1<<Ti-li,si=0;si<ki;si++)Ri[xi|si]=Pi;else for(xi=ei[ri].second,Ui=Ii,Li=li-1;Li>=0;Li--)Yr=xi>>>Li&1,Yr?(Ui.right||(Ui.right=new Qe),Ui=Ui.right):(Ui.left||(Ui.left=new Qe),Ui=Ui.left),Li===0&&!Ui.val&&(Ui.val=Pi[1]);return{decodeLut:Ri,numBitsLUTQick:Ti,numBitsLUT:yi,tree:Ii,stuffedData:gi,srcPtr:Mi,bitPos:_i}},readHuffman:function(Je,tt,it,st){var lt=tt.headerInfo,ct=lt.numDims,gt=tt.headerInfo.height,ut=tt.headerInfo.width,mt=ut*gt,ei=this.readHuffmanTree(Je,tt),ni=ei.decodeLut,ri=ei.tree,si=ei.stuffedData,li=ei.srcPtr,ai=ei.bitPos,ci=ei.numBitsLUTQick,Ci=ei.numBitsLUT,pi=tt.headerInfo.imageType===0?128:0,gi,_i,bi,Mi=tt.pixels.resultMask,yi,Ti,Ii,Ri,Pi,xi,ki,Li=0;ai>0&&(li++,ai=0);var Yr=si[li],Ui=tt.encodeMode===1,Vi=new it(mt*ct),Kr=Vi,Wi;if(ct<2||Ui){for(Wi=0;Wi<ct;Wi++)if(ct>1&&(Kr=new it(Vi.buffer,mt*Wi,mt),Li=0),tt.headerInfo.numValidPixel===ut*gt)for(xi=0,Ri=0;Ri<gt;Ri++)for(Pi=0;Pi<ut;Pi++,xi++){if(_i=0,yi=Yr<<ai>>>32-ci,Ti=yi,32-ai<ci&&(yi|=si[li+1]>>>64-ai-ci,Ti=yi),ni[Ti])_i=ni[Ti][1],ai+=ni[Ti][0];else for(yi=Yr<<ai>>>32-Ci,Ti=yi,32-ai<Ci&&(yi|=si[li+1]>>>64-ai-Ci,Ti=yi),gi=ri,ki=0;ki<Ci;ki++)if(Ii=yi>>>Ci-ki-1&1,gi=Ii?gi.right:gi.left,!(gi.left||gi.right)){_i=gi.val,ai=ai+ki+1;break}ai>=32&&(ai-=32,li++,Yr=si[li]),bi=_i-pi,Ui?(Pi>0?bi+=Li:Ri>0?bi+=Kr[xi-ut]:bi+=Li,bi&=255,Kr[xi]=bi,Li=bi):Kr[xi]=bi}else for(xi=0,Ri=0;Ri<gt;Ri++)for(Pi=0;Pi<ut;Pi++,xi++)if(Mi[xi]){if(_i=0,yi=Yr<<ai>>>32-ci,Ti=yi,32-ai<ci&&(yi|=si[li+1]>>>64-ai-ci,Ti=yi),ni[Ti])_i=ni[Ti][1],ai+=ni[Ti][0];else for(yi=Yr<<ai>>>32-Ci,Ti=yi,32-ai<Ci&&(yi|=si[li+1]>>>64-ai-Ci,Ti=yi),gi=ri,ki=0;ki<Ci;ki++)if(Ii=yi>>>Ci-ki-1&1,gi=Ii?gi.right:gi.left,!(gi.left||gi.right)){_i=gi.val,ai=ai+ki+1;break}ai>=32&&(ai-=32,li++,Yr=si[li]),bi=_i-pi,Ui?(Pi>0&&Mi[xi-1]?bi+=Li:Ri>0&&Mi[xi-ut]?bi+=Kr[xi-ut]:bi+=Li,bi&=255,Kr[xi]=bi,Li=bi):Kr[xi]=bi}}else for(xi=0,Ri=0;Ri<gt;Ri++)for(Pi=0;Pi<ut;Pi++)if(xi=Ri*ut+Pi,!Mi||Mi[xi])for(Wi=0;Wi<ct;Wi++,xi+=mt){if(_i=0,yi=Yr<<ai>>>32-ci,Ti=yi,32-ai<ci&&(yi|=si[li+1]>>>64-ai-ci,Ti=yi),ni[Ti])_i=ni[Ti][1],ai+=ni[Ti][0];else for(yi=Yr<<ai>>>32-Ci,Ti=yi,32-ai<Ci&&(yi|=si[li+1]>>>64-ai-Ci,Ti=yi),gi=ri,ki=0;ki<Ci;ki++)if(Ii=yi>>>Ci-ki-1&1,gi=Ii?gi.right:gi.left,!(gi.left||gi.right)){_i=gi.val,ai=ai+ki+1;break}ai>=32&&(ai-=32,li++,Yr=si[li]),bi=_i-pi,Kr[xi]=bi}tt.ptr=tt.ptr+(li+1)*4+(ai>0?4:0),tt.pixels.resultPixels=Vi,ct>1&&!st&&(tt.pixels.resultPixels=be.swapDimensionOrder(Vi,mt,ct,it))},decodeBits:function(Je,tt,it,st,lt){{var ct=tt.headerInfo,gt=ct.fileVersion,ut=0,mt=Je.byteLength-tt.ptr>=5?5:Je.byteLength-tt.ptr,ei=new DataView(Je,tt.ptr,mt),ni=ei.getUint8(0);ut++;var ri=ni>>6,si=ri===0?4:3-ri,li=(ni&32)>0,ai=ni&31,ci=0;if(si===1)ci=ei.getUint8(ut),ut++;else if(si===2)ci=ei.getUint16(ut,!0),ut+=2;else if(si===4)ci=ei.getUint32(ut,!0),ut+=4;else throw"Invalid valid pixel count type";var Ci=2*ct.maxZError,pi,gi,_i,bi,Mi,yi,Ti,Ii,Ri,Pi=ct.numDims>1?ct.maxValues[lt]:ct.zMax;if(li){for(tt.counter.lut++,Ii=ei.getUint8(ut),ut++,bi=Math.ceil((Ii-1)*ai/8),Mi=Math.ceil(bi/4),gi=new ArrayBuffer(Mi*4),_i=new Uint8Array(gi),tt.ptr+=ut,_i.set(new Uint8Array(Je,tt.ptr,bi)),Ti=new Uint32Array(gi),tt.ptr+=bi,Ri=0;Ii-1>>>Ri;)Ri++;bi=Math.ceil(ci*Ri/8),Mi=Math.ceil(bi/4),gi=new ArrayBuffer(Mi*4),_i=new Uint8Array(gi),_i.set(new Uint8Array(Je,tt.ptr,bi)),pi=new Uint32Array(gi),tt.ptr+=bi,gt>=3?yi=ve.unstuffLUT2(Ti,ai,Ii-1,st,Ci,Pi):yi=ve.unstuffLUT(Ti,ai,Ii-1,st,Ci,Pi),gt>=3?ve.unstuff2(pi,it,Ri,ci,yi):ve.unstuff(pi,it,Ri,ci,yi)}else tt.counter.bitstuffer++,Ri=ai,tt.ptr+=ut,Ri>0&&(bi=Math.ceil(ci*Ri/8),Mi=Math.ceil(bi/4),gi=new ArrayBuffer(Mi*4),_i=new Uint8Array(gi),_i.set(new Uint8Array(Je,tt.ptr,bi)),pi=new Uint32Array(gi),tt.ptr+=bi,gt>=3?st==null?ve.originalUnstuff2(pi,it,Ri,ci):ve.unstuff2(pi,it,Ri,ci,!1,st,Ci,Pi):st==null?ve.originalUnstuff(pi,it,Ri,ci):ve.unstuff(pi,it,Ri,ci,!1,st,Ci,Pi))}},readTiles:function(Je,tt,it,st){var lt=tt.headerInfo,ct=lt.width,gt=lt.height,ut=ct*gt,mt=lt.microBlockSize,ei=lt.imageType,ni=be.getDataTypeSize(ei),ri=Math.ceil(ct/mt),si=Math.ceil(gt/mt);tt.pixels.numBlocksY=si,tt.pixels.numBlocksX=ri,tt.pixels.ptr=0;var li=0,ai=0,ci=0,Ci=0,pi=0,gi=0,_i=0,bi=0,Mi=0,yi=0,Ti=0,Ii=0,Ri=0,Pi=0,xi=0,ki=0,Li,Yr,Ui,Vi,Kr,Wi,Zr=new it(mt*mt),ps=gt%mt||mt,Is=ct%mt||mt,_s,ws,hi=lt.numDims,Bi,qi=tt.pixels.resultMask,Xr=tt.pixels.resultPixels,rs=lt.fileVersion,Os=rs>=5?14:15,gs,zs=lt.zMax,$s;for(ci=0;ci<si;ci++)for(pi=ci!==si-1?mt:ps,Ci=0;Ci<ri;Ci++)for(gi=Ci!==ri-1?mt:Is,Ti=ci*ct*mt+Ci*mt,Ii=ct-gi,Bi=0;Bi<hi;Bi++){if(hi>1?($s=Xr,Ti=ci*ct*mt+Ci*mt,Xr=new it(tt.pixels.resultPixels.buffer,ut*Bi*ni,ut),zs=lt.maxValues[Bi]):$s=null,_i=Je.byteLength-tt.ptr,Li=new DataView(Je,tt.ptr,Math.min(10,_i)),Yr={},ki=0,bi=Li.getUint8(0),ki++,gs=lt.fileVersion>=5?bi&4:0,Mi=bi>>6&255,yi=bi>>2&Os,yi!==(Ci*mt>>3&Os)||gs&&Bi===0)throw"integrity issue";if(Wi=bi&3,Wi>3)throw tt.ptr+=ki,"Invalid block encoding ("+Wi+")";if(Wi===2){if(gs)if(qi)for(li=0;li<pi;li++)for(ai=0;ai<gi;ai++)qi[Ti]&&(Xr[Ti]=$s[Ti]),Ti++;else for(li=0;li<pi;li++)for(ai=0;ai<gi;ai++)Xr[Ti]=$s[Ti],Ti++;tt.counter.constant++,tt.ptr+=ki;continue}else if(Wi===0){if(gs)throw"integrity issue";if(tt.counter.uncompressed++,tt.ptr+=ki,Ri=pi*gi*ni,Pi=Je.byteLength-tt.ptr,Ri=Ri<Pi?Ri:Pi,Ui=new ArrayBuffer(Ri%ni===0?Ri:Ri+ni-Ri%ni),Vi=new Uint8Array(Ui),Vi.set(new Uint8Array(Je,tt.ptr,Ri)),Kr=new it(Ui),xi=0,qi)for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)qi[Ti]&&(Xr[Ti]=Kr[xi++]),Ti++;Ti+=Ii}else for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)Xr[Ti++]=Kr[xi++];Ti+=Ii}tt.ptr+=xi*ni}else if(_s=be.getDataTypeUsed(gs&&ei<6?4:ei,Mi),ws=be.getOnePixel(Yr,ki,_s,Li),ki+=be.getDataTypeSize(_s),Wi===3)if(tt.ptr+=ki,tt.counter.constantoffset++,qi)for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)qi[Ti]&&(Xr[Ti]=gs?Math.min(zs,$s[Ti]+ws):ws),Ti++;Ti+=Ii}else for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)Xr[Ti]=gs?Math.min(zs,$s[Ti]+ws):ws,Ti++;Ti+=Ii}else if(tt.ptr+=ki,be.decodeBits(Je,tt,Zr,ws,Bi),ki=0,gs)if(qi)for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)qi[Ti]&&(Xr[Ti]=Zr[ki++]+$s[Ti]),Ti++;Ti+=Ii}else for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)Xr[Ti]=Zr[ki++]+$s[Ti],Ti++;Ti+=Ii}else if(qi)for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)qi[Ti]&&(Xr[Ti]=Zr[ki++]),Ti++;Ti+=Ii}else for(li=0;li<pi;li++){for(ai=0;ai<gi;ai++)Xr[Ti++]=Zr[ki++];Ti+=Ii}}hi>1&&!st&&(tt.pixels.resultPixels=be.swapDimensionOrder(tt.pixels.resultPixels,ut,hi,it))},formatFileInfo:function(Je){return{fileIdentifierString:Je.headerInfo.fileIdentifierString,fileVersion:Je.headerInfo.fileVersion,imageType:Je.headerInfo.imageType,height:Je.headerInfo.height,width:Je.headerInfo.width,numValidPixel:Je.headerInfo.numValidPixel,microBlockSize:Je.headerInfo.microBlockSize,blobSize:Je.headerInfo.blobSize,maxZError:Je.headerInfo.maxZError,pixelType:be.getPixelType(Je.headerInfo.imageType),eofOffset:Je.eofOffset,mask:Je.mask?{numBytes:Je.mask.numBytes}:null,pixels:{numBlocksX:Je.pixels.numBlocksX,numBlocksY:Je.pixels.numBlocksY,maxValue:Je.headerInfo.zMax,minValue:Je.headerInfo.zMin,noDataValue:Je.noDataValue}}},constructConstantSurface:function(Je,tt){var it=Je.headerInfo.zMax,st=Je.headerInfo.zMin,lt=Je.headerInfo.maxValues,ct=Je.headerInfo.numDims,gt=Je.headerInfo.height*Je.headerInfo.width,ut=0,mt=0,ei=0,ni=Je.pixels.resultMask,ri=Je.pixels.resultPixels;if(ni)if(ct>1){if(tt)for(ut=0;ut<ct;ut++)for(ei=ut*gt,it=lt[ut],mt=0;mt<gt;mt++)ni[mt]&&(ri[ei+mt]=it);else for(mt=0;mt<gt;mt++)if(ni[mt])for(ei=mt*ct,ut=0;ut<ct;ut++)ri[ei+ct]=lt[ut]}else for(mt=0;mt<gt;mt++)ni[mt]&&(ri[mt]=it);else if(ct>1&&st!==it)if(tt)for(ut=0;ut<ct;ut++)for(ei=ut*gt,it=lt[ut],mt=0;mt<gt;mt++)ri[ei+mt]=it;else for(mt=0;mt<gt;mt++)for(ei=mt*ct,ut=0;ut<ct;ut++)ri[ei+ut]=lt[ut];else for(mt=0;mt<gt*ct;mt++)ri[mt]=it},getDataTypeArray:function(Je){var tt;switch(Je){case 0:tt=Int8Array;break;case 1:tt=Uint8Array;break;case 2:tt=Int16Array;break;case 3:tt=Uint16Array;break;case 4:tt=Int32Array;break;case 5:tt=Uint32Array;break;case 6:tt=Float32Array;break;case 7:tt=Float64Array;break;default:tt=Float32Array}return tt},getPixelType:function(Je){var tt;switch(Je){case 0:tt="S8";break;case 1:tt="U8";break;case 2:tt="S16";break;case 3:tt="U16";break;case 4:tt="S32";break;case 5:tt="U32";break;case 6:tt="F32";break;case 7:tt="F64";break;default:tt="F32"}return tt},isValidPixelValue:function(Je,tt){if(tt==null)return!1;var it;switch(Je){case 0:it=tt>=-128&&tt<=127;break;case 1:it=tt>=0&&tt<=255;break;case 2:it=tt>=-32768&&tt<=32767;break;case 3:it=tt>=0&&tt<=65536;break;case 4:it=tt>=-2147483648&&tt<=2147483647;break;case 5:it=tt>=0&&tt<=4294967296;break;case 6:it=tt>=-34027999387901484e22&&tt<=34027999387901484e22;break;case 7:it=tt>=-17976931348623157e292&&tt<=17976931348623157e292;break;default:it=!1}return it},getDataTypeSize:function(Je){var tt=0;switch(Je){case 0:case 1:tt=1;break;case 2:case 3:tt=2;break;case 4:case 5:case 6:tt=4;break;case 7:tt=8;break;default:tt=Je}return tt},getDataTypeUsed:function(Je,tt){var it=Je;switch(Je){case 2:case 4:it=Je-tt;break;case 3:case 5:it=Je-2*tt;break;case 6:tt===0?it=Je:tt===1?it=2:it=1;break;case 7:tt===0?it=Je:it=Je-2*tt+1;break;default:it=Je;break}return it},getOnePixel:function(Je,tt,it,st){var lt=0;switch(it){case 0:lt=st.getInt8(tt);break;case 1:lt=st.getUint8(tt);break;case 2:lt=st.getInt16(tt,!0);break;case 3:lt=st.getUint16(tt,!0);break;case 4:lt=st.getInt32(tt,!0);break;case 5:lt=st.getUInt32(tt,!0);break;case 6:lt=st.getFloat32(tt,!0);break;case 7:lt=st.getFloat64(tt,!0);break;default:throw"the decoder does not understand this pixel type"}return lt},swapDimensionOrder:function(Je,tt,it,st,lt){var ct=0,gt=0,ut=0,mt=0,ei=Je;if(it>1)if(ei=new st(tt*it),lt)for(ct=0;ct<tt;ct++)for(mt=ct,ut=0;ut<it;ut++,mt+=tt)ei[mt]=Je[gt++];else for(ct=0;ct<tt;ct++)for(mt=ct,ut=0;ut<it;ut++,mt+=tt)ei[gt++]=Je[mt];return ei}},Qe=function(Je,tt,it){this.val=Je,this.left=tt,this.right=it},Xe={decode:function(Je,tt){tt=tt||{};var it=tt.noDataValue,st=0,lt={};if(lt.ptr=tt.inputOffset||0,lt.pixels={},!!be.readHeaderInfo(Je,lt)){var ct=lt.headerInfo,gt=ct.fileVersion,ut=be.getDataTypeArray(ct.imageType);if(gt>5)throw"unsupported lerc version 2."+gt;be.readMask(Je,lt),ct.numValidPixel!==ct.width*ct.height&&!lt.pixels.resultMask&&(lt.pixels.resultMask=tt.maskData);var mt=ct.width*ct.height;lt.pixels.resultPixels=new ut(mt*ct.numDims),lt.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var ei=!tt.returnPixelInterleavedDims;if(ct.numValidPixel!==0)if(ct.zMax===ct.zMin)be.constructConstantSurface(lt,ei);else if(gt>=4&&be.checkMinMaxRanges(Je,lt))be.constructConstantSurface(lt,ei);else{var ni=new DataView(Je,lt.ptr,2),ri=ni.getUint8(0);if(lt.ptr++,ri)be.readDataOneSweep(Je,lt,ut,ei);else if(gt>1&&ct.imageType<=1&&Math.abs(ct.maxZError-.5)<1e-5){var si=ni.getUint8(1);if(lt.ptr++,lt.encodeMode=si,si>2||gt<4&&si>1)throw"Invalid Huffman flag "+si;si?be.readHuffman(Je,lt,ut,ei):be.readTiles(Je,lt,ut,ei)}else be.readTiles(Je,lt,ut,ei)}lt.eofOffset=lt.ptr;var li;tt.inputOffset?(li=lt.headerInfo.blobSize+tt.inputOffset-lt.ptr,Math.abs(li)>=1&&(lt.eofOffset=tt.inputOffset+lt.headerInfo.blobSize)):(li=lt.headerInfo.blobSize-lt.ptr,Math.abs(li)>=1&&(lt.eofOffset=lt.headerInfo.blobSize));var ai={width:ct.width,height:ct.height,pixelData:lt.pixels.resultPixels,minValue:ct.zMin,maxValue:ct.zMax,validPixelCount:ct.numValidPixel,dimCount:ct.numDims,dimStats:{minValues:ct.minValues,maxValues:ct.maxValues},maskData:lt.pixels.resultMask};if(lt.pixels.resultMask&&be.isValidPixelValue(ct.imageType,it)){var ci=lt.pixels.resultMask;for(st=0;st<mt;st++)ci[st]||(ai.pixelData[st]=it);ai.noDataValue=it}return lt.noDataValue=it,tt.returnFileInfo&&(ai.fileInfo=be.formatFileInfo(lt)),ai}},getBandCount:function(Je){var tt=0,it=0,st={};for(st.ptr=0,st.pixels={};it<Je.byteLength-58;)be.readHeaderInfo(Je,st),it+=st.headerInfo.blobSize,tt++,st.ptr=it;return tt}};return Xe}(),ae=function(){var ve=new ArrayBuffer(4),be=new Uint8Array(ve),Qe=new Uint32Array(ve);return Qe[0]=1,be[0]===1}(),ye={decode:function(ve,be){if(!ae)throw"Big endian system is not supported.";be=be||{};var Qe=be.inputOffset||0,Xe=new Uint8Array(ve,Qe,10),Je=String.fromCharCode.apply(null,Xe),tt,it;if(Je.trim()==="CntZImage")tt=Z,it=1;else if(Je.substring(0,5)==="Lerc2")tt=ee,it=2;else throw"Unexpected file identifier string: "+Je;for(var st=0,lt=ve.byteLength-10,ct,gt=[],ut,mt,ei={width:0,height:0,pixels:[],pixelType:be.pixelType,mask:null,statistics:[]},ni=0;Qe<lt;){var ri=tt.decode(ve,{inputOffset:Qe,encodedMaskData:ct,maskData:mt,returnMask:st===0,returnEncodedMask:st===0,returnFileInfo:!0,returnPixelInterleavedDims:be.returnPixelInterleavedDims,pixelType:be.pixelType||null,noDataValue:be.noDataValue||null});Qe=ri.fileInfo.eofOffset,mt=ri.maskData,st===0&&(ct=ri.encodedMaskData,ei.width=ri.width,ei.height=ri.height,ei.dimCount=ri.dimCount||1,ei.pixelType=ri.pixelType||ri.fileInfo.pixelType,ei.mask=mt),it>1&&(mt&&gt.push(mt),ri.fileInfo.mask&&ri.fileInfo.mask.numBytes>0&&ni++),st++,ei.pixels.push(ri.pixelData),ei.statistics.push({minValue:ri.minValue,maxValue:ri.maxValue,noDataValue:ri.noDataValue,dimStats:ri.dimStats})}var si,li,ai;if(it>1&&ni>1){for(ai=ei.width*ei.height,ei.bandMasks=gt,mt=new Uint8Array(ai),mt.set(gt[0]),si=1;si<gt.length;si++)for(ut=gt[si],li=0;li<ai;li++)mt[li]=mt[li]&ut[li];ei.maskData=mt}return ei}};ie.exports?ie.exports=ye:this.Lerc=ye})()})(LercDecode);var LercDecodeExports=LercDecode.exports;const Lerc=getDefaultExportFromCjs$1(LercDecodeExports);let init,instance,heap;const IMPORT_OBJECT={env:{emscripten_notify_memory_growth:function(ie){heap=new Uint8Array(instance.exports.memory.buffer)}}};class ZSTDDecoder{init(){return init||(typeof fetch<"u"?init=fetch("data:application/wasm;base64,"+wasm).then(Z=>Z.arrayBuffer()).then(Z=>WebAssembly.instantiate(Z,IMPORT_OBJECT)).then(this._init):init=WebAssembly.instantiate(Buffer.from(wasm,"base64"),IMPORT_OBJECT).then(this._init),init)}_init(Z){instance=Z.instance,IMPORT_OBJECT.env.emscripten_notify_memory_growth(0)}decode(Z,ee=0){if(!instance)throw new Error("ZSTDDecoder: Await .init() before decoding.");const ae=Z.byteLength,ye=instance.exports.malloc(ae);heap.set(Z,ye),ee=ee||Number(instance.exports.ZSTD_findDecompressedSize(ye,ae));const ve=instance.exports.malloc(ee),be=instance.exports.ZSTD_decompress(ve,ee,ye,ae),Qe=heap.slice(ve,ve+be);return instance.exports.free(ye),instance.exports.free(ve),Qe}}const wasm="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",zstd=new ZSTDDecoder;class LercDecoder extends BaseDecoder{constructor(Z){super(),this.planarConfiguration=typeof Z.PlanarConfiguration<"u"?Z.PlanarConfiguration:1,this.samplesPerPixel=typeof Z.SamplesPerPixel<"u"?Z.SamplesPerPixel:1,this.addCompression=Z.LercParameters[LercParameters.AddCompression]}decodeBlock(Z){switch(this.addCompression){case LercAddCompression.None:break;case LercAddCompression.Deflate:Z=inflate_1(new Uint8Array(Z)).buffer;break;case LercAddCompression.Zstandard:Z=zstd.decode(new Uint8Array(Z)).buffer;break;default:throw new Error(`Unsupported LERC additional compression method identifier: ${this.addCompression}`)}return Lerc.decode(Z,{returnPixelInterleavedDims:this.planarConfiguration===1}).pixels[0].buffer}}const lerc=Object.freeze(Object.defineProperty({__proto__:null,default:LercDecoder,zstd},Symbol.toStringTag,{value:"Module"}));class WebImageDecoder extends BaseDecoder{constructor(){if(super(),typeof createImageBitmap>"u")throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if(typeof document>"u"&&typeof OffscreenCanvas>"u")throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available")}async decode(Z,ee){const ae=new Blob([ee]),ye=await createImageBitmap(ae);let ve;typeof document<"u"?(ve=document.createElement("canvas"),ve.width=ye.width,ve.height=ye.height):ve=new OffscreenCanvas(ye.width,ye.height);const be=ve.getContext("2d");return be.drawImage(ye,0,0),be.getImageData(0,0,ye.width,ye.height).data.buffer}}const webimage=Object.freeze(Object.defineProperty({__proto__:null,default:WebImageDecoder},Symbol.toStringTag,{value:"Module"})),Worker$1=Worker;function create(){const ie='function A(A,e,t,i,r,I,g){try{var n=A[I](g),a=n.value}catch(A){return void t(A)}n.done?e(a):Promise.resolve(a).then(i,r)}function e(e){return function(){var t=this,i=arguments;return new Promise((function(r,I){var g=e.apply(t,i);function n(e){A(g,r,I,n,a,"next",e)}function a(e){A(g,r,I,n,a,"throw",e)}n(void 0)}))}}function t(A){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(A)}var i={exports:{}};!function(A){var e=function(A){var e,i=Object.prototype,r=i.hasOwnProperty,I="function"==typeof Symbol?Symbol:{},g=I.iterator||"@@iterator",n=I.asyncIterator||"@@asyncIterator",a=I.toStringTag||"@@toStringTag";function o(A,e,t){return Object.defineProperty(A,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),A[e]}try{o({},"")}catch(A){o=function(A,e,t){return A[e]=t}}function B(A,e,t,i){var r=e&&e.prototype instanceof h?e:h,I=Object.create(r.prototype),g=new S(i||[]);return I._invoke=function(A,e,t){var i=Q;return function(r,I){if(i===s)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw I;return R()}for(t.method=r,t.arg=I;;){var g=t.delegate;if(g){var n=m(g,t);if(n){if(n===c)continue;return n}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(i===Q)throw i=f,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);i=s;var a=C(A,e,t);if("normal"===a.type){if(i=t.done?f:E,a.arg===c)continue;return{value:a.arg,done:t.done}}"throw"===a.type&&(i=f,t.method="throw",t.arg=a.arg)}}}(A,t,g),I}function C(A,e,t){try{return{type:"normal",arg:A.call(e,t)}}catch(A){return{type:"throw",arg:A}}}A.wrap=B;var Q="suspendedStart",E="suspendedYield",s="executing",f="completed",c={};function h(){}function l(){}function u(){}var w={};o(w,g,(function(){return this}));var d=Object.getPrototypeOf,D=d&&d(d(v([])));D&&D!==i&&r.call(D,g)&&(w=D);var y=u.prototype=h.prototype=Object.create(w);function k(A){["next","throw","return"].forEach((function(e){o(A,e,(function(A){return this._invoke(e,A)}))}))}function p(A,e){function i(I,g,n,a){var o=C(A[I],A,g);if("throw"!==o.type){var B=o.arg,Q=B.value;return Q&&"object"===t(Q)&&r.call(Q,"__await")?e.resolve(Q.__await).then((function(A){i("next",A,n,a)}),(function(A){i("throw",A,n,a)})):e.resolve(Q).then((function(A){B.value=A,n(B)}),(function(A){return i("throw",A,n,a)}))}a(o.arg)}var I;this._invoke=function(A,t){function r(){return new e((function(e,r){i(A,t,e,r)}))}return I=I?I.then(r,r):r()}}function m(A,t){var i=A.iterator[t.method];if(i===e){if(t.delegate=null,"throw"===t.method){if(A.iterator.return&&(t.method="return",t.arg=e,m(A,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a \'throw\' method")}return c}var r=C(i,A.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var I=r.arg;return I?I.done?(t[A.resultName]=I.value,t.next=A.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,c):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function G(A){var e={tryLoc:A[0]};1 in A&&(e.catchLoc=A[1]),2 in A&&(e.finallyLoc=A[2],e.afterLoc=A[3]),this.tryEntries.push(e)}function F(A){var e=A.completion||{};e.type="normal",delete e.arg,A.completion=e}function S(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(G,this),this.reset(!0)}function v(A){if(A){var t=A[g];if(t)return t.call(A);if("function"==typeof A.next)return A;if(!isNaN(A.length)){var i=-1,I=function t(){for(;++i<A.length;)if(r.call(A,i))return t.value=A[i],t.done=!1,t;return t.value=e,t.done=!0,t};return I.next=I}}return{next:R}}function R(){return{value:e,done:!0}}return l.prototype=u,o(y,"constructor",u),o(u,"constructor",l),l.displayName=o(u,a,"GeneratorFunction"),A.isGeneratorFunction=function(A){var e="function"==typeof A&&A.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,u):(A.__proto__=u,o(A,a,"GeneratorFunction")),A.prototype=Object.create(y),A},A.awrap=function(A){return{__await:A}},k(p.prototype),o(p.prototype,n,(function(){return this})),A.AsyncIterator=p,A.async=function(e,t,i,r,I){void 0===I&&(I=Promise);var g=new p(B(e,t,i,r),I);return A.isGeneratorFunction(t)?g:g.next().then((function(A){return A.done?A.value:g.next()}))},k(y),o(y,a,"Generator"),o(y,g,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),A.keys=function(A){var e=[];for(var t in A)e.push(t);return e.reverse(),function t(){for(;e.length;){var i=e.pop();if(i in A)return t.value=i,t.done=!1,t}return t.done=!0,t}},A.values=v,S.prototype={constructor:S,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!A)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if("throw"===A.type)throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var t=this;function i(i,r){return n.type="throw",n.arg=A,t.next=i,r&&(t.method="next",t.arg=e),!!r}for(var I=this.tryEntries.length-1;I>=0;--I){var g=this.tryEntries[I],n=g.completion;if("root"===g.tryLoc)return i("end");if(g.tryLoc<=this.prev){var a=r.call(g,"catchLoc"),o=r.call(g,"finallyLoc");if(a&&o){if(this.prev<g.catchLoc)return i(g.catchLoc,!0);if(this.prev<g.finallyLoc)return i(g.finallyLoc)}else if(a){if(this.prev<g.catchLoc)return i(g.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return i(g.finallyLoc)}}}},abrupt:function(A,e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var I=i;break}}I&&("break"===A||"continue"===A)&&I.tryLoc<=e&&e<=I.finallyLoc&&(I=null);var g=I?I.completion:{};return g.type=A,g.arg=e,I?(this.method="next",this.next=I.finallyLoc,c):this.complete(g)},complete:function(A,e){if("throw"===A.type)throw A.arg;return"break"===A.type||"continue"===A.type?this.next=A.arg:"return"===A.type?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):"normal"===A.type&&e&&(this.next=e),c},finish:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===A)return this.complete(t.completion,t.afterLoc),F(t),c}},catch:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===A){var i=t.completion;if("throw"===i.type){var r=i.arg;F(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(A,t,i){return this.delegate={iterator:v(A),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=e),c}},A}(A.exports);try{regeneratorRuntime=e}catch(A){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(i);var r=i.exports,I=new Map;function g(A,e){Array.isArray(A)||(A=[A]),A.forEach((function(A){return I.set(A,e)}))}function n(A){return a.apply(this,arguments)}function a(){return(a=e(r.mark((function A(e){var t,i;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(t=I.get(e.Compression)){A.next=3;break}throw new Error("Unknown compression method identifier: ".concat(e.Compression));case 3:return A.next=5,t();case 5:return i=A.sent,A.abrupt("return",new i(e));case 7:case"end":return A.stop()}}),A)})))).apply(this,arguments)}g([void 0,1],(function(){return Promise.resolve().then((function(){return y})).then((function(A){return A.default}))})),g(5,(function(){return Promise.resolve().then((function(){return F})).then((function(A){return A.default}))})),g(6,(function(){throw new Error("old style JPEG compression is not supported.")})),g(7,(function(){return Promise.resolve().then((function(){return N})).then((function(A){return A.default}))})),g([8,32946],(function(){return Promise.resolve().then((function(){return OA})).then((function(A){return A.default}))})),g(32773,(function(){return Promise.resolve().then((function(){return _A})).then((function(A){return A.default}))})),g(34887,(function(){return Promise.resolve().then((function(){return le})).then(function(){var A=e(r.mark((function A(e){return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,e.zstd.init();case 2:return A.abrupt("return",e);case 3:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}()).then((function(A){return A.default}))})),g(50001,(function(){return Promise.resolve().then((function(){return de})).then((function(A){return A.default}))}));var o=globalThis;function B(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}function C(A,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(A,i.key,i)}}function Q(A,e,t){return e&&C(A.prototype,e),t&&C(A,t),A}function E(A,e){return E=Object.setPrototypeOf||function(A,e){return A.__proto__=e,A},E(A,e)}function s(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(e&&e.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),e&&E(A,e)}function f(A,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(A){if(void 0===A)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return A}(A)}function c(A){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},c(A)}function h(A,e){var t=A.length-e,i=0;do{for(var r=e;r>0;r--)A[i+e]+=A[i],i++;t-=e}while(t>0)}function l(A,e,t){for(var i=0,r=A.length,I=r/t;r>e;){for(var g=e;g>0;--g)A[i+e]+=A[i],++i;r-=e}for(var n=A.slice(),a=0;a<I;++a)for(var o=0;o<t;++o)A[t*a+o]=n[(t-o-1)*I+a]}function u(A,e,t,i,r,I){if(!e||1===e)return A;for(var g=0;g<r.length;++g){if(r[g]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(r[g]!==r[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var n=r[0]/8,a=2===I?1:r.length,o=0;o<i&&!(o*a*t*n>=A.byteLength);++o){var B=void 0;if(2===e){switch(r[0]){case 8:B=new Uint8Array(A,o*a*t*n,a*t*n);break;case 16:B=new Uint16Array(A,o*a*t*n,a*t*n/2);break;case 32:B=new Uint32Array(A,o*a*t*n,a*t*n/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(r[0]," bits per sample."))}h(B,a)}else 3===e&&l(B=new Uint8Array(A,o*a*t*n,a*t*n),a,n)}return A}o.addEventListener("message",function(){var A=e(r.mark((function A(e){var t,i,I,g,a,B;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.data,i=t.id,I=t.fileDirectory,g=t.buffer,A.next=3,n(I);case 3:return a=A.sent,A.next=6,a.decode(I,g);case 6:B=A.sent,o.postMessage({decoded:B,id:i},[B]);case 8:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}());var w=function(){function A(){B(this,A)}var t;return Q(A,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n,a;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,this.decodeBlock(t);case 2:if(i=A.sent,1===(I=e.Predictor||1)){A.next=9;break}return g=!e.StripOffsets,n=g?e.TileWidth:e.ImageWidth,a=g?e.TileLength:e.RowsPerStrip||e.ImageLength,A.abrupt("return",u(i,I,n,a,e.BitsPerSample,e.PlanarConfiguration));case 9:return A.abrupt("return",i);case 10:case"end":return A.stop()}}),A,this)}))),function(A,e){return t.apply(this,arguments)})}]),A}();function d(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var D=function(A){s(t,w);var e=d(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return A}}]),t}(),y=Object.freeze({__proto__:null,default:D});function k(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}function p(A,e){for(var t=e.length-1;t>=0;t--)A.push(e[t]);return A}function m(A){for(var e=new Uint16Array(4093),t=new Uint8Array(4093),i=0;i<=257;i++)e[i]=4096,t[i]=i;var r=258,I=9,g=0;function n(){r=258,I=9}function a(A){var e=function(A,e,t){var i=e%8,r=Math.floor(e/8),I=8-i,g=e+t-8*(r+1),n=8*(r+2)-(e+t),a=8*(r+2)-e;if(n=Math.max(0,n),r>=A.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var o=A[r]&Math.pow(2,8-i)-1,B=o<<=t-I;if(r+1<A.length){var C=A[r+1]>>>n;B+=C<<=Math.max(0,t-a)}if(g>8&&r+2<A.length){var Q=8*(r+3)-(e+t);B+=A[r+2]>>>Q}return B}(A,g,I);return g+=I,e}function o(A,i){return t[r]=i,e[r]=A,++r-1}function B(A){for(var i=[],r=A;4096!==r;r=e[r])i.push(t[r]);return i}var C=[];n();for(var Q,E=new Uint8Array(A),s=a(E);257!==s;){if(256===s){for(n(),s=a(E);256===s;)s=a(E);if(257===s)break;if(s>256)throw new Error("corrupted code at scanline ".concat(s));p(C,B(s)),Q=s}else if(s<r){var f=B(s);p(C,f),o(Q,f[f.length-1]),Q=s}else{var c=B(Q);if(!c)throw new Error("Bogus entry. Not in dictionary, ".concat(Q," / ").concat(r,", position: ").concat(g));p(C,c),C.push(c[c.length-1]),o(Q,c[c.length-1]),Q=s}r+1>=Math.pow(2,I)&&(12===I?Q=void 0:I++),s=a(E)}return new Uint8Array(C)}var G=function(A){s(t,w);var e=k(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return m(A).buffer}}]),t}(),F=Object.freeze({__proto__:null,default:G});function S(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var v=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function R(A,e){for(var t=0,i=[],r=16;r>0&&!A[r-1];)--r;i.push({children:[],index:0});for(var I,g=i[0],n=0;n<r;n++){for(var a=0;a<A[n];a++){for((g=i.pop()).children[g.index]=e[t];g.index>0;)g=i.pop();for(g.index++,i.push(g);i.length<=n;)i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I;t++}n+1<r&&(i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I)}return i[0].children}function U(A,e,i,r,I,g,n,a,o){var B=i.mcusPerLine,C=i.progressive,Q=e,E=e,s=0,f=0;function c(){if(f>0)return f--,s>>f&1;if(255===(s=A[E++])){var e=A[E++];if(e)throw new Error("unexpected marker: ".concat((s<<8|e).toString(16)))}return f=7,s>>>7}function h(A){for(var e,i=A;null!==(e=c());){if("number"==typeof(i=i[e]))return i;if("object"!==t(i))throw new Error("invalid huffman sequence")}return null}function l(A){for(var e=A,t=0;e>0;){var i=c();if(null===i)return;t=t<<1|i,--e}return t}function u(A){var e=l(A);return e>=1<<A-1?e:e+(-1<<A)+1}var w=0;var d,D=0;function y(A,e,t,i,r){var I=t%B,g=(t/B|0)*A.v+i,n=I*A.h+r;e(A,A.blocks[g][n])}function k(A,e,t){var i=t/A.blocksPerLine|0,r=t%A.blocksPerLine;e(A,A.blocks[i][r])}var p,m,G,F,S,R,U=r.length;R=C?0===g?0===a?function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t)<<o;A.pred+=i,e[0]=A.pred}:function(A,e){e[0]|=c()<<o}:0===a?function(A,e){if(w>0)w--;else for(var t=g,i=n;t<=i;){var r=h(A.huffmanTableAC),I=15&r,a=r>>4;if(0===I){if(a<15){w=l(a)+(1<<a)-1;break}t+=16}else e[v[t+=a]]=u(I)*(1<<o),t++}}:function(A,e){for(var t=g,i=n,r=0;t<=i;){var I=v[t],a=e[I]<0?-1:1;switch(D){case 0:var B=h(A.huffmanTableAC),C=15&B;if(r=B>>4,0===C)r<15?(w=l(r)+(1<<r),D=4):(r=16,D=1);else{if(1!==C)throw new Error("invalid ACn encoding");d=u(C),D=r?2:3}continue;case 1:case 2:e[I]?e[I]+=(c()<<o)*a:0==--r&&(D=2===D?3:0);break;case 3:e[I]?e[I]+=(c()<<o)*a:(e[I]=d<<o,D=0);break;case 4:e[I]&&(e[I]+=(c()<<o)*a)}t++}4===D&&0==--w&&(D=0)}:function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t);A.pred+=i,e[0]=A.pred;for(var r=1;r<64;){var I=h(A.huffmanTableAC),g=15&I,n=I>>4;if(0===g){if(n<15)break;r+=16}else e[v[r+=n]]=u(g),r++}};var L,b,M=0;b=1===U?r[0].blocksPerLine*r[0].blocksPerColumn:B*i.mcusPerColumn;for(var N=I||b;M<b;){for(m=0;m<U;m++)r[m].pred=0;if(w=0,1===U)for(p=r[0],S=0;S<N;S++)k(p,R,M),M++;else for(S=0;S<N;S++){for(m=0;m<U;m++){var x=p=r[m],J=x.h,q=x.v;for(G=0;G<q;G++)for(F=0;F<J;F++)y(p,R,M,G,F)}if(++M===b)break}if(f=0,(L=A[E]<<8|A[E+1])<65280)throw new Error("marker was not found");if(!(L>=65488&&L<=65495))break;E+=2}return E-Q}function L(A,e){var t=[],i=e.blocksPerLine,r=e.blocksPerColumn,I=i<<3,g=new Int32Array(64),n=new Uint8Array(64);function a(A,t,i){var r,I,g,n,a,o,B,C,Q,E,s=e.quantizationTable,f=i;for(E=0;E<64;E++)f[E]=A[E]*s[E];for(E=0;E<8;++E){var c=8*E;0!==f[1+c]||0!==f[2+c]||0!==f[3+c]||0!==f[4+c]||0!==f[5+c]||0!==f[6+c]||0!==f[7+c]?(r=5793*f[0+c]+128>>8,I=5793*f[4+c]+128>>8,g=f[2+c],n=f[6+c],a=2896*(f[1+c]-f[7+c])+128>>8,C=2896*(f[1+c]+f[7+c])+128>>8,o=f[3+c]<<4,Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+128>>8,g=1567*g-3784*n+128>>8,n=Q,Q=a-(B=f[5+c]<<4)+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+c]=r+C,f[7+c]=r-C,f[1+c]=I+B,f[6+c]=I-B,f[2+c]=g+o,f[5+c]=g-o,f[3+c]=n+a,f[4+c]=n-a):(Q=5793*f[0+c]+512>>10,f[0+c]=Q,f[1+c]=Q,f[2+c]=Q,f[3+c]=Q,f[4+c]=Q,f[5+c]=Q,f[6+c]=Q,f[7+c]=Q)}for(E=0;E<8;++E){var h=E;0!==f[8+h]||0!==f[16+h]||0!==f[24+h]||0!==f[32+h]||0!==f[40+h]||0!==f[48+h]||0!==f[56+h]?(r=5793*f[0+h]+2048>>12,I=5793*f[32+h]+2048>>12,g=f[16+h],n=f[48+h],a=2896*(f[8+h]-f[56+h])+2048>>12,C=2896*(f[8+h]+f[56+h])+2048>>12,o=f[24+h],Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+2048>>12,g=1567*g-3784*n+2048>>12,n=Q,Q=a-(B=f[40+h])+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+h]=r+C,f[56+h]=r-C,f[8+h]=I+B,f[48+h]=I-B,f[16+h]=g+o,f[40+h]=g-o,f[24+h]=n+a,f[32+h]=n-a):(Q=5793*i[E+0]+8192>>14,f[0+h]=Q,f[8+h]=Q,f[16+h]=Q,f[24+h]=Q,f[32+h]=Q,f[40+h]=Q,f[48+h]=Q,f[56+h]=Q)}for(E=0;E<64;++E){var l=128+(f[E]+8>>4);t[E]=l<0?0:l>255?255:l}}for(var o=0;o<r;o++){for(var B=o<<3,C=0;C<8;C++)t.push(new Uint8Array(I));for(var Q=0;Q<i;Q++){a(e.blocks[o][Q],n,g);for(var E=0,s=Q<<3,f=0;f<8;f++)for(var c=t[B+f],h=0;h<8;h++)c[s+h]=n[E++]}}return t}var b=function(){function A(){B(this,A),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return Q(A,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(A){var e=0;function t(){var t=A[e]<<8|A[e+1];return e+=2,t}function i(A){var e,t,i=0,r=0;for(t in A.components)A.components.hasOwnProperty(t)&&(i<(e=A.components[t]).h&&(i=e.h),r<e.v&&(r=e.v));var I=Math.ceil(A.samplesPerLine/8/i),g=Math.ceil(A.scanLines/8/r);for(t in A.components)if(A.components.hasOwnProperty(t)){e=A.components[t];for(var n=Math.ceil(Math.ceil(A.samplesPerLine/8)*e.h/i),a=Math.ceil(Math.ceil(A.scanLines/8)*e.v/r),o=I*e.h,B=g*e.v,C=[],Q=0;Q<B;Q++){for(var E=[],s=0;s<o;s++)E.push(new Int32Array(64));C.push(E)}e.blocksPerLine=n,e.blocksPerColumn=a,e.blocks=C}A.maxH=i,A.maxV=r,A.mcusPerLine=I,A.mcusPerColumn=g}var r,I,g=t();if(65496!==g)throw new Error("SOI not found");for(g=t();65497!==g;){switch(g){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var n=(r=void 0,I=void 0,r=t(),I=A.subarray(e,e+r-2),e+=I.length,I);65504===g&&74===n[0]&&70===n[1]&&73===n[2]&&70===n[3]&&0===n[4]&&(this.jfif={version:{major:n[5],minor:n[6]},densityUnits:n[7],xDensity:n[8]<<8|n[9],yDensity:n[10]<<8|n[11],thumbWidth:n[12],thumbHeight:n[13],thumbData:n.subarray(14,14+3*n[12]*n[13])}),65518===g&&65===n[0]&&100===n[1]&&111===n[2]&&98===n[3]&&101===n[4]&&0===n[5]&&(this.adobe={version:n[6],flags0:n[7]<<8|n[8],flags1:n[9]<<8|n[10],transformCode:n[11]});break;case 65499:for(var a=t()+e-2;e<a;){var o=A[e++],B=new Int32Array(64);if(o>>4==0)for(var C=0;C<64;C++){B[v[C]]=A[e++]}else{if(o>>4!=1)throw new Error("DQT: invalid table spec");for(var Q=0;Q<64;Q++){B[v[Q]]=t()}}this.quantizationTables[15&o]=B}break;case 65472:case 65473:case 65474:t();for(var E={extended:65473===g,progressive:65474===g,precision:A[e++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},s=A[e++],f=void 0,c=0;c<s;c++){f=A[e];var h=A[e+1]>>4,l=15&A[e+1],u=A[e+2];E.componentsOrder.push(f),E.components[f]={h:h,v:l,quantizationIdx:u},e+=3}i(E),this.frames.push(E);break;case 65476:for(var w=t(),d=2;d<w;){for(var D=A[e++],y=new Uint8Array(16),k=0,p=0;p<16;p++,e++)y[p]=A[e],k+=y[p];for(var m=new Uint8Array(k),G=0;G<k;G++,e++)m[G]=A[e];d+=17+k,D>>4==0?this.huffmanTablesDC[15&D]=R(y,m):this.huffmanTablesAC[15&D]=R(y,m)}break;case 65501:t(),this.resetInterval=t();break;case 65498:t();for(var F=A[e++],S=[],L=this.frames[0],b=0;b<F;b++){var M=L.components[A[e++]],N=A[e++];M.huffmanTableDC=this.huffmanTablesDC[N>>4],M.huffmanTableAC=this.huffmanTablesAC[15&N],S.push(M)}var x=A[e++],J=A[e++],q=A[e++],Y=U(A,e,L,S,this.resetInterval,x,J,q>>4,15&q);e+=Y;break;case 65535:255!==A[e]&&e--;break;default:if(255===A[e-3]&&A[e-2]>=192&&A[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker ".concat(g.toString(16)))}g=t()}}},{key:"getResult",value:function(){var A=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var e=0;e<this.frames.length;e++)for(var t=this.frames[e].components,i=0,r=Object.keys(t);i<r.length;i++){var I=r[i];t[I].quantizationTable=this.quantizationTables[t[I].quantizationIdx],delete t[I].quantizationIdx}for(var g=A[0],n=g.components,a=g.componentsOrder,o=[],B=g.samplesPerLine,C=g.scanLines,Q=0;Q<a.length;Q++){var E=n[a[Q]];o.push({lines:L(0,E),scaleX:E.h/g.maxH,scaleY:E.v/g.maxV})}for(var s=new Uint8Array(B*C*o.length),f=0,c=0;c<C;++c)for(var h=0;h<B;++h)for(var l=0;l<o.length;++l){var u=o[l];s[f]=u.lines[0|c*u.scaleY][0|h*u.scaleX],++f}return s}}]),A}(),M=function(A){s(t,w);var e=S(t);function t(A){var i;return B(this,t),(i=e.call(this)).reader=new b,A.JPEGTables&&i.reader.parse(A.JPEGTables),i}return Q(t,[{key:"decodeBlock",value:function(A){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(A)),this.reader.getResult().buffer}}]),t}(),N=Object.freeze({__proto__:null,default:M});function x(A){for(var e=A.length;--e>=0;)A[e]=0}x(new Array(576)),x(new Array(60)),x(new Array(512)),x(new Array(256)),x(new Array(29)),x(new Array(30));var J=function(A,e,t,i){for(var r=65535&A|0,I=A>>>16&65535|0,g=0;0!==t;){t-=g=t>2e3?2e3:t;do{I=I+(r=r+e[i++]|0)|0}while(--g);r%=65521,I%=65521}return r|I<<16|0},q=new Uint32Array(function(){for(var A,e=[],t=0;t<256;t++){A=t;for(var i=0;i<8;i++)A=1&A?3988292384^A>>>1:A>>>1;e[t]=A}return e}()),Y=function(A,e,t,i){var r=q,I=i+t;A^=-1;for(var g=i;g<I;g++)A=A>>>8^r[255&(A^e[g])];return-1^A},K={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},O=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},P=function(A){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==t(i))throw new TypeError(i+"must be non-object");for(var r in i)O(i,r)&&(A[r]=i[r])}}return A},T=function(A){for(var e=0,t=0,i=A.length;t<i;t++)e+=A[t].length;for(var r=new Uint8Array(e),I=0,g=0,n=A.length;I<n;I++){var a=A[I];r.set(a,g),g+=a.length}return r},V=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){V=!1}for(var _=new Uint8Array(256),X=0;X<256;X++)_[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;_[254]=_[254]=1;var Z=function(A){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(A);var e,t,i,r,I,g=A.length,n=0;for(r=0;r<g;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),n+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(n),I=0,r=0;I<n;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),t<128?e[I++]=t:t<2048?(e[I++]=192|t>>>6,e[I++]=128|63&t):t<65536?(e[I++]=224|t>>>12,e[I++]=128|t>>>6&63,e[I++]=128|63&t):(e[I++]=240|t>>>18,e[I++]=128|t>>>12&63,e[I++]=128|t>>>6&63,e[I++]=128|63&t);return e},j=function(A,e){var t,i,r=e||A.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(A.subarray(0,e));var I=new Array(2*r);for(i=0,t=0;t<r;){var g=A[t++];if(g<128)I[i++]=g;else{var n=_[g];if(n>4)I[i++]=65533,t+=n-1;else{for(g&=2===n?31:3===n?15:7;n>1&&t<r;)g=g<<6|63&A[t++],n--;n>1?I[i++]=65533:g<65536?I[i++]=g:(g-=65536,I[i++]=55296|g>>10&1023,I[i++]=56320|1023&g)}}}return function(A,e){if(e<65534&&A.subarray&&V)return String.fromCharCode.apply(null,A.length===e?A:A.subarray(0,e));for(var t="",i=0;i<e;i++)t+=String.fromCharCode(A[i]);return t}(I,i)},W=function(A,e){(e=e||A.length)>A.length&&(e=A.length);for(var t=e-1;t>=0&&128==(192&A[t]);)t--;return t<0||0===t?e:t+_[A[t]]>e?t:e};var z=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$=function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=A.state;t=A.next_in,k=A.input,i=t+(A.avail_in-5),r=A.next_out,p=A.output,I=r-(e-A.avail_out),g=r+(A.avail_out-257),n=m.dmax,a=m.wsize,o=m.whave,B=m.wnext,C=m.window,Q=m.hold,E=m.bits,s=m.lencode,f=m.distcode,c=(1<<m.lenbits)-1,h=(1<<m.distbits)-1;A:do{E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=s[Q&c];e:for(;;){if(Q>>>=u=l>>>24,E-=u,0===(u=l>>>16&255))p[r++]=65535&l;else{if(!(16&u)){if(0==(64&u)){l=s[(65535&l)+(Q&(1<<u)-1)];continue e}if(32&u){m.mode=12;break A}A.msg="invalid literal/length code",m.mode=30;break A}w=65535&l,(u&=15)&&(E<u&&(Q+=k[t++]<<E,E+=8),w+=Q&(1<<u)-1,Q>>>=u,E-=u),E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=f[Q&h];t:for(;;){if(Q>>>=u=l>>>24,E-=u,!(16&(u=l>>>16&255))){if(0==(64&u)){l=f[(65535&l)+(Q&(1<<u)-1)];continue t}A.msg="invalid distance code",m.mode=30;break A}if(d=65535&l,E<(u&=15)&&(Q+=k[t++]<<E,(E+=8)<u&&(Q+=k[t++]<<E,E+=8)),(d+=Q&(1<<u)-1)>n){A.msg="invalid distance too far back",m.mode=30;break A}if(Q>>>=u,E-=u,d>(u=r-I)){if((u=d-u)>o&&m.sane){A.msg="invalid distance too far back",m.mode=30;break A}if(D=0,y=C,0===B){if(D+=a-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}else if(B<u){if(D+=a+B-u,(u-=B)<w){w-=u;do{p[r++]=C[D++]}while(--u);if(D=0,B<w){w-=u=B;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}}else if(D+=B-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}for(;w>2;)p[r++]=y[D++],p[r++]=y[D++],p[r++]=y[D++],w-=3;w&&(p[r++]=y[D++],w>1&&(p[r++]=y[D++]))}else{D=r-d;do{p[r++]=p[D++],p[r++]=p[D++],p[r++]=p[D++],w-=3}while(w>2);w&&(p[r++]=p[D++],w>1&&(p[r++]=p[D++]))}break}}break}}while(t<i&&r<g);t-=w=E>>3,Q&=(1<<(E-=w<<3))-1,A.next_in=t,A.next_out=r,A.avail_in=t<i?i-t+5:5-(t-i),A.avail_out=r<g?g-r+257:257-(r-g),m.hold=Q,m.bits=E},AA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rA=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E,s,f,c,h=n.bits,l=0,u=0,w=0,d=0,D=0,y=0,k=0,p=0,m=0,G=0,F=null,S=0,v=new Uint16Array(16),R=new Uint16Array(16),U=null,L=0;for(l=0;l<=15;l++)v[l]=0;for(u=0;u<i;u++)v[e[t+u]]++;for(D=h,d=15;d>=1&&0===v[d];d--);if(D>d&&(D=d),0===d)return r[I++]=20971520,r[I++]=20971520,n.bits=1,0;for(w=1;w<d&&0===v[w];w++);for(D<w&&(D=w),p=1,l=1;l<=15;l++)if(p<<=1,(p-=v[l])<0)return-1;if(p>0&&(0===A||1!==d))return-1;for(R[1]=0,l=1;l<15;l++)R[l+1]=R[l]+v[l];for(u=0;u<i;u++)0!==e[t+u]&&(g[R[e[t+u]]++]=u);if(0===A?(F=U=g,E=19):1===A?(F=AA,S-=257,U=eA,L-=257,E=256):(F=tA,U=iA,E=-1),G=0,u=0,l=w,Q=I,y=D,k=0,B=-1,C=(m=1<<D)-1,1===A&&m>852||2===A&&m>592)return 1;for(;;){s=l-k,g[u]<E?(f=0,c=g[u]):g[u]>E?(f=U[L+g[u]],c=F[S+g[u]]):(f=96,c=0),a=1<<l-k,w=o=1<<y;do{r[Q+(G>>k)+(o-=a)]=s<<24|f<<16|c|0}while(0!==o);for(a=1<<l-1;G&a;)a>>=1;if(0!==a?(G&=a-1,G+=a):G=0,u++,0==--v[l]){if(l===d)break;l=e[t+g[u]]}if(l>D&&(G&C)!==B){for(0===k&&(k=D),Q+=w,p=1<<(y=l-k);y+k<d&&!((p-=v[y+k])<=0);)y++,p<<=1;if(m+=1<<y,1===A&&m>852||2===A&&m>592)return 1;r[B=G&C]=D<<24|y<<16|Q-I|0}}return 0!==G&&(r[Q+G]=l-k<<24|64<<16|0),n.bits=D,0},IA=H.Z_FINISH,gA=H.Z_BLOCK,nA=H.Z_TREES,aA=H.Z_OK,oA=H.Z_STREAM_END,BA=H.Z_NEED_DICT,CA=H.Z_STREAM_ERROR,QA=H.Z_DATA_ERROR,EA=H.Z_MEM_ERROR,sA=H.Z_BUF_ERROR,fA=H.Z_DEFLATED,cA=function(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)};function hA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var lA,uA,wA=function(A){if(!A||!A.state)return CA;var e=A.state;return A.total_in=A.total_out=e.total=0,A.msg="",e.wrap&&(A.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,aA},dA=function(A){if(!A||!A.state)return CA;var e=A.state;return e.wsize=0,e.whave=0,e.wnext=0,wA(A)},DA=function(A,e){var t;if(!A||!A.state)return CA;var i=A.state;return e<0?(t=0,e=-e):(t=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?CA:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,dA(A))},yA=function(A,e){if(!A)return CA;var t=new hA;A.state=t,t.window=null;var i=DA(A,e);return i!==aA&&(A.state=null),i},kA=!0,pA=function(A){if(kA){lA=new Int32Array(512),uA=new Int32Array(32);for(var e=0;e<144;)A.lens[e++]=8;for(;e<256;)A.lens[e++]=9;for(;e<280;)A.lens[e++]=7;for(;e<288;)A.lens[e++]=8;for(rA(1,A.lens,0,288,lA,0,A.work,{bits:9}),e=0;e<32;)A.lens[e++]=5;rA(2,A.lens,0,32,uA,0,A.work,{bits:5}),kA=!1}A.lencode=lA,A.lenbits=9,A.distcode=uA,A.distbits=5},mA=function(A,e,t,i){var r,I=A.state;return null===I.window&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new Uint8Array(I.wsize)),i>=I.wsize?(I.window.set(e.subarray(t-I.wsize,t),0),I.wnext=0,I.whave=I.wsize):((r=I.wsize-I.wnext)>i&&(r=i),I.window.set(e.subarray(t-i,t-i+r),I.wnext),(i-=r)?(I.window.set(e.subarray(t-i,t),0),I.wnext=i,I.whave=I.wsize):(I.wnext+=r,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=r))),0},GA={inflateReset:dA,inflateReset2:DA,inflateResetKeep:wA,inflateInit:function(A){return yA(A,15)},inflateInit2:yA,inflate:function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=0,G=new Uint8Array(4),F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!A||!A.state||!A.output||!A.input&&0!==A.avail_in)return CA;12===(t=A.state).mode&&(t.mode=13),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,C=n,Q=a,y=aA;A:for(;;)switch(t.mode){case 1:if(0===t.wrap){t.mode=13;break}for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(2&t.wrap&&35615===o){t.check=0,G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0),o=0,B=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&o)<<8)+(o>>8))%31){A.msg="incorrect header check",t.mode=30;break}if((15&o)!==fA){A.msg="unknown compression method",t.mode=30;break}if(B-=4,D=8+(15&(o>>>=4)),0===t.wbits)t.wbits=D;else if(D>t.wbits){A.msg="invalid window size",t.mode=30;break}t.dmax=1<<t.wbits,A.adler=t.check=1,t.mode=512&o?10:12,o=0,B=0;break;case 2:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.flags=o,(255&t.flags)!==fA){A.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){A.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=o>>8&1),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=3;case 3:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.time=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,G[2]=o>>>16&255,G[3]=o>>>24&255,t.check=Y(t.check,G,4,0)),o=0,B=0,t.mode=4;case 4:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.xflags=255&o,t.head.os=o>>8),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=5;case 5:if(1024&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length=o,t.head&&(t.head.extra_len=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((E=t.length)>n&&(E=n),E&&(t.head&&(D=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(I,I+E),D)),512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,t.length-=E),t.length))break A;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.name+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.comment+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(65535&t.check)){A.msg="header crc mismatch",t.mode=30;break}o=0,B=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),A.adler=t.check=0,t.mode=12;break;case 10:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}A.adler=t.check=cA(o),o=0,B=0,t.mode=11;case 11:if(0===t.havedict)return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,BA;A.adler=t.check=1,t.mode=12;case 12:if(e===gA||e===nA)break A;case 13:if(t.last){o>>>=7&B,B-=7&B,t.mode=27;break}for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}switch(t.last=1&o,B-=1,3&(o>>>=1)){case 0:t.mode=14;break;case 1:if(pA(t),t.mode=20,e===nA){o>>>=2,B-=2;break A}break;case 2:t.mode=17;break;case 3:A.msg="invalid block type",t.mode=30}o>>>=2,B-=2;break;case 14:for(o>>>=7&B,B-=7&B;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if((65535&o)!=(o>>>16^65535)){A.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&o,o=0,B=0,t.mode=15,e===nA)break A;case 15:t.mode=16;case 16:if(E=t.length){if(E>n&&(E=n),E>a&&(E=a),0===E)break A;r.set(i.subarray(I,I+E),g),n-=E,I+=E,a-=E,g+=E,t.length-=E;break}t.mode=12;break;case 17:for(;B<14;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.nlen=257+(31&o),o>>>=5,B-=5,t.ndist=1+(31&o),o>>>=5,B-=5,t.ncode=4+(15&o),o>>>=4,B-=4,t.nlen>286||t.ndist>30){A.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.lens[F[t.have++]]=7&o,o>>>=3,B-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},y=rA(0,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(l<16)o>>>=c,B-=c,t.lens[t.have++]=l;else{if(16===l){for(p=c+2;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o>>>=c,B-=c,0===t.have){A.msg="invalid bit length repeat",t.mode=30;break}D=t.lens[t.have-1],E=3+(3&o),o>>>=2,B-=2}else if(17===l){for(p=c+3;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=3+(7&(o>>>=c)),o>>>=3,B-=3}else{for(p=c+7;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=11+(127&(o>>>=c)),o>>>=7,B-=7}if(t.have+E>t.nlen+t.ndist){A.msg="invalid bit length repeat",t.mode=30;break}for(;E--;)t.lens[t.have++]=D}}if(30===t.mode)break;if(0===t.lens[256]){A.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,k={bits:t.lenbits},y=rA(1,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},y=rA(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,y){A.msg="invalid distances set",t.mode=30;break}if(t.mode=20,e===nA)break A;case 20:t.mode=21;case 21:if(n>=6&&a>=258){A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,$(A,Q),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(h&&0==(240&h)){for(u=c,w=h,d=l;h=(m=t.lencode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,t.length=l,0===h){t.mode=26;break}if(32&h){t.back=-1,t.mode=12;break}if(64&h){A.msg="invalid literal/length code",t.mode=30;break}t.extra=15&h,t.mode=22;case 22:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;h=(m=t.distcode[o&(1<<t.distbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(0==(240&h)){for(u=c,w=h,d=l;h=(m=t.distcode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,64&h){A.msg="invalid distance code",t.mode=30;break}t.offset=l,t.extra=15&h,t.mode=24;case 24:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){A.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===a)break A;if(E=Q-a,t.offset>E){if((E=t.offset-E)>t.whave&&t.sane){A.msg="invalid distance too far back",t.mode=30;break}E>t.wnext?(E-=t.wnext,s=t.wsize-E):s=t.wnext-E,E>t.length&&(E=t.length),f=t.window}else f=r,s=g-t.offset,E=t.length;E>a&&(E=a),a-=E,t.length-=E;do{r[g++]=f[s++]}while(--E);0===t.length&&(t.mode=21);break;case 26:if(0===a)break A;r[g++]=t.length,a--,t.mode=21;break;case 27:if(t.wrap){for(;B<32;){if(0===n)break A;n--,o|=i[I++]<<B,B+=8}if(Q-=a,A.total_out+=Q,t.total+=Q,Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,g-Q):J(t.check,r,Q,g-Q)),Q=a,(t.flags?o:cA(o))!==t.check){A.msg="incorrect data check",t.mode=30;break}o=0,B=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(4294967295&t.total)){A.msg="incorrect length check",t.mode=30;break}o=0,B=0}t.mode=29;case 29:y=oA;break A;case 30:y=QA;break A;case 31:return EA;default:return CA}return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,(t.wsize||Q!==A.avail_out&&t.mode<30&&(t.mode<27||e!==IA))&&mA(A,A.output,A.next_out,Q-A.avail_out),C-=A.avail_in,Q-=A.avail_out,A.total_in+=C,A.total_out+=Q,t.total+=Q,t.wrap&&Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,A.next_out-Q):J(t.check,r,Q,A.next_out-Q)),A.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0===C&&0===Q||e===IA)&&y===aA&&(y=sA),y},inflateEnd:function(A){if(!A||!A.state)return CA;var e=A.state;return e.window&&(e.window=null),A.state=null,aA},inflateGetHeader:function(A,e){if(!A||!A.state)return CA;var t=A.state;return 0==(2&t.wrap)?CA:(t.head=e,e.done=!1,aA)},inflateSetDictionary:function(A,e){var t,i=e.length;return A&&A.state?0!==(t=A.state).wrap&&11!==t.mode?CA:11===t.mode&&J(1,e,i,0)!==t.check?QA:mA(A,e,i,i)?(t.mode=31,EA):(t.havedict=1,aA):CA},inflateInfo:"pako inflate (from Nodeca project)"};var FA=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},SA=Object.prototype.toString,vA=H.Z_NO_FLUSH,RA=H.Z_FINISH,UA=H.Z_OK,LA=H.Z_STREAM_END,bA=H.Z_NEED_DICT,MA=H.Z_STREAM_ERROR,NA=H.Z_DATA_ERROR,xA=H.Z_MEM_ERROR;function JA(A){this.options=P({chunkSize:65536,windowBits:15,to:""},A||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||A&&A.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var t=GA.inflateInit2(this.strm,e.windowBits);if(t!==UA)throw new Error(K[t]);if(this.header=new FA,GA.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Z(e.dictionary):"[object ArrayBuffer]"===SA.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=GA.inflateSetDictionary(this.strm,e.dictionary))!==UA))throw new Error(K[t])}function qA(A,e){var t=new JA(e);if(t.push(A),t.err)throw t.msg||K[t.err];return t.result}JA.prototype.push=function(A,e){var t,i,r,I=this.strm,g=this.options.chunkSize,n=this.options.dictionary;if(this.ended)return!1;for(i=e===~~e?e:!0===e?RA:vA,"[object ArrayBuffer]"===SA.call(A)?I.input=new Uint8Array(A):I.input=A,I.next_in=0,I.avail_in=I.input.length;;){for(0===I.avail_out&&(I.output=new Uint8Array(g),I.next_out=0,I.avail_out=g),(t=GA.inflate(I,i))===bA&&n&&((t=GA.inflateSetDictionary(I,n))===UA?t=GA.inflate(I,i):t===NA&&(t=bA));I.avail_in>0&&t===LA&&I.state.wrap>0&&0!==A[I.next_in];)GA.inflateReset(I),t=GA.inflate(I,i);switch(t){case MA:case NA:case bA:case xA:return this.onEnd(t),this.ended=!0,!1}if(r=I.avail_out,I.next_out&&(0===I.avail_out||t===LA))if("string"===this.options.to){var a=W(I.output,I.next_out),o=I.next_out-a,B=j(I.output,a);I.next_out=o,I.avail_out=g-o,o&&I.output.set(I.output.subarray(a,a+o),0),this.onData(B)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(t!==UA||0!==r){if(t===LA)return t=GA.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,!0;if(0===I.avail_in)break}}return!0},JA.prototype.onData=function(A){this.chunks.push(A)},JA.prototype.onEnd=function(A){A===UA&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=T(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};var YA={Inflate:JA,inflate:qA,inflateRaw:function(A,e){return(e=e||{}).raw=!0,qA(A,e)},ungzip:qA,constants:H}.inflate;function KA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var HA=function(A){s(t,w);var e=KA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return YA(new Uint8Array(A)).buffer}}]),t}(),OA=Object.freeze({__proto__:null,default:HA});function PA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var TA,VA=function(A){s(t,w);var e=PA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){for(var e=new DataView(A),t=[],i=0;i<A.byteLength;++i){var r=e.getInt8(i);if(r<0){var I=e.getUint8(i+1);r=-r;for(var g=0;g<=r;++g)t.push(I);i+=1}else{for(var n=0;n<=r;++n)t.push(e.getUint8(i+n+1));i+=r+1}}return new Uint8Array(t).buffer}}]),t}(),_A=Object.freeze({__proto__:null,default:VA}),XA={exports:{}};TA=XA,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var A,e,t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c=(A={defaultNoDataValue:-34027999387901484e22,decode:function(I,g){var n=(g=g||{}).encodedMaskData||null===g.encodedMaskData,a=r(I,g.inputOffset||0,n),o=null!==g.noDataValue?g.noDataValue:A.defaultNoDataValue,B=e(a,g.pixelType||Float32Array,g.encodedMaskData,o,g.returnMask),C={width:a.width,height:a.height,pixelData:B.resultPixels,minValue:B.minValue,maxValue:a.pixels.maxValue,noDataValue:o};return B.resultMask&&(C.maskData=B.resultMask),g.returnEncodedMask&&a.mask&&(C.encodedMaskData=a.mask.bitset?a.mask.bitset:null),g.returnFileInfo&&(C.fileInfo=t(a),g.computeUsedBitDepths&&(C.fileInfo.bitDepths=i(a))),C}},e=function(A,e,t,i,r){var g,n,a,o=0,B=A.pixels.numBlocksX,C=A.pixels.numBlocksY,Q=Math.floor(A.width/B),E=Math.floor(A.height/C),s=2*A.maxZError,f=Number.MAX_VALUE;t=t||(A.mask?A.mask.bitset:null),n=new e(A.width*A.height),r&&t&&(a=new Uint8Array(A.width*A.height));for(var c,h,l=new Float32Array(Q*E),u=0;u<=C;u++){var w=u!==C?E:A.height%C;if(0!==w)for(var d=0;d<=B;d++){var D=d!==B?Q:A.width%B;if(0!==D){var y,k,p,m,G=u*A.width*E+d*Q,F=A.width-D,S=A.pixels.blocks[o];if(S.encoding<2?(0===S.encoding?y=S.rawData:(I(S.stuffedData,S.bitsPerPixel,S.numValidPixels,S.offset,s,l,A.pixels.maxValue),y=l),k=0):p=2===S.encoding?0:S.offset,t)for(h=0;h<w;h++){for(7&G&&(m=t[G>>3],m<<=7&G),c=0;c<D;c++)7&G||(m=t[G>>3]),128&m?(a&&(a[G]=1),f=f>(g=S.encoding<2?y[k++]:p)?g:f,n[G++]=g):(a&&(a[G]=0),n[G++]=i),m<<=1;G+=F}else if(S.encoding<2)for(h=0;h<w;h++){for(c=0;c<D;c++)f=f>(g=y[k++])?g:f,n[G++]=g;G+=F}else for(f=f>p?p:f,h=0;h<w;h++){for(c=0;c<D;c++)n[G++]=p;G+=F}if(1===S.encoding&&k!==S.numValidPixels)throw"Block and Mask do not match";o++}}}return{resultPixels:n,resultMask:a,minValue:f}},t=function(A){return{fileIdentifierString:A.fileIdentifierString,fileVersion:A.fileVersion,imageType:A.imageType,height:A.height,width:A.width,maxZError:A.maxZError,eofOffset:A.eofOffset,mask:A.mask?{numBlocksX:A.mask.numBlocksX,numBlocksY:A.mask.numBlocksY,numBytes:A.mask.numBytes,maxValue:A.mask.maxValue}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,numBytes:A.pixels.numBytes,maxValue:A.pixels.maxValue,noDataValue:A.noDataValue}}},i=function(A){for(var e=A.pixels.numBlocksX*A.pixels.numBlocksY,t={},i=0;i<e;i++){var r=A.pixels.blocks[i];0===r.encoding?t.float32=!0:1===r.encoding?t[r.bitsPerPixel]=!0:t[0]=!0}return Object.keys(t)},r=function(A,e,t){var i={},r=new Uint8Array(A,e,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,r),"CntZImage"!==i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;e+=10;var I=new DataView(A,e,24);if(i.fileVersion=I.getInt32(0,!0),i.imageType=I.getInt32(4,!0),i.height=I.getUint32(8,!0),i.width=I.getUint32(12,!0),i.maxZError=I.getFloat64(16,!0),e+=24,!t)if(I=new DataView(A,e,16),i.mask={},i.mask.numBlocksY=I.getUint32(0,!0),i.mask.numBlocksX=I.getUint32(4,!0),i.mask.numBytes=I.getUint32(8,!0),i.mask.maxValue=I.getFloat32(12,!0),e+=16,i.mask.numBytes>0){var g=new Uint8Array(Math.ceil(i.width*i.height/8)),n=(I=new DataView(A,e,i.mask.numBytes)).getInt16(0,!0),a=2,o=0;do{if(n>0)for(;n--;)g[o++]=I.getUint8(a++);else{var B=I.getUint8(a++);for(n=-n;n--;)g[o++]=B}n=I.getInt16(a,!0),a+=2}while(a<i.mask.numBytes);if(-32768!==n||o<g.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=g,e+=i.mask.numBytes}else 0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)&&(i.mask.bitset=new Uint8Array(Math.ceil(i.width*i.height/8)));I=new DataView(A,e,16),i.pixels={},i.pixels.numBlocksY=I.getUint32(0,!0),i.pixels.numBlocksX=I.getUint32(4,!0),i.pixels.numBytes=I.getUint32(8,!0),i.pixels.maxValue=I.getFloat32(12,!0),e+=16;var C=i.pixels.numBlocksX,Q=i.pixels.numBlocksY,E=C+(i.width%C>0?1:0),s=Q+(i.height%Q>0?1:0);i.pixels.blocks=new Array(E*s);for(var f=0,c=0;c<s;c++)for(var h=0;h<E;h++){var l=0,u=A.byteLength-e;I=new DataView(A,e,Math.min(10,u));var w={};i.pixels.blocks[f++]=w;var d=I.getUint8(0);if(l++,w.encoding=63&d,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==d&&2!==d){if(d>>=6,w.offsetType=d,2===d)w.offset=I.getInt8(1),l++;else if(1===d)w.offset=I.getInt16(1,!0),l+=2;else{if(0!==d)throw"Invalid block offset type";w.offset=I.getFloat32(1,!0),l+=4}if(1===w.encoding)if(d=I.getUint8(l),l++,w.bitsPerPixel=63&d,d>>=6,w.numValidPixelsType=d,2===d)w.numValidPixels=I.getUint8(l),l++;else if(1===d)w.numValidPixels=I.getUint16(l,!0),l+=2;else{if(0!==d)throw"Invalid valid pixel count type";w.numValidPixels=I.getUint32(l,!0),l+=4}}var D;if(e+=l,3!==w.encoding)if(0===w.encoding){var y=(i.pixels.numBytes-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";D=new ArrayBuffer(4*y),new Uint8Array(D).set(new Uint8Array(A,e,4*y));var k=new Float32Array(D);w.rawData=k,e+=4*y}else if(1===w.encoding){var p=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),m=Math.ceil(p/4);D=new ArrayBuffer(4*m),new Uint8Array(D).set(new Uint8Array(A,e,p)),w.stuffedData=new Uint32Array(D),e+=p}}else e++}return i.eofOffset=e,i},I=function(A,e,t,i,r,I,g){var n,a,o,B=(1<<e)-1,C=0,Q=0,E=Math.ceil((g-i)/r),s=4*A.length-Math.ceil(e*t/8);for(A[A.length-1]<<=8*s,n=0;n<t;n++){if(0===Q&&(o=A[C++],Q=32),Q>=e)a=o>>>Q-e&B,Q-=e;else{var f=e-Q;a=(o&B)<<f&B,a+=(o=A[C++])>>>(Q=32-f)}I[n]=a<E?i+a*r:g}return I},A),h=(g=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E=(1<<t)-1,s=0,f=0,c=4*A.length-Math.ceil(t*i/8);if(A[A.length-1]<<=8*c,r)for(a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=r[o];else for(Q=Math.ceil((n-I)/g),a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=o<Q?I+o*g:n},n=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=[],s=4*A.length-Math.ceil(e*t/8);A[A.length-1]<<=8*s;var f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32),C>=e?(Q=g>>>C-e&n,C-=e):(Q=(g&n)<<(B=e-C)&n,Q+=(g=A[a++])>>>(C=32-B)),E[o]=Q<f?i+Q*r:I;return E.unshift(i),E},a=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q=(1<<t)-1,E=0,s=0,f=0;if(r)for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=r[o];else{var c=Math.ceil((n-I)/g);for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=o<c?I+o*g:n}return e},o=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=0,s=[],f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32,E=0),C>=e?(Q=g>>>E&n,C-=e,E+=e):(Q=g>>>E&n,C=32-(B=e-C),Q|=((g=A[a++])&(1<<B)-1)<<e-B,E=B),s[o]=Q<f?i+Q*r:I;return s.unshift(i),s},B=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=4*A.length-Math.ceil(t*i/8);for(A[A.length-1]<<=8*C,r=0;r<i;r++)0===B&&(g=A[o++],B=32),B>=t?(I=g>>>B-t&a,B-=t):(I=(g&a)<<(n=t-B)&a,I+=(g=A[o++])>>>(B=32-n)),e[r]=I;return e},C=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=0;for(r=0;r<i;r++)0===B&&(g=A[o++],B=32,C=0),B>=t?(I=g>>>C&a,B-=t,C+=t):(I=g>>>C&a,B=32-(n=t-B),I|=((g=A[o++])&(1<<n)-1)<<t-n,C=n),e[r]=I;return e},Q={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(A){for(var e=65535,t=65535,i=A.length,r=Math.floor(i/2),I=0;r;){var g=r>=359?359:r;r-=g;do{e+=A[I++]<<8,t+=e+=A[I++]}while(--g);e=(65535&e)+(e>>>16),t=(65535&t)+(t>>>16)}return 1&i&&(t+=e+=A[I]<<8),((t=(65535&t)+(t>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(A,e){var t=e.ptr,i=new Uint8Array(A,t,6),r={};if(r.fileIdentifierString=String.fromCharCode.apply(null,i),0!==r.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+r.fileIdentifierString;t+=6;var I,g=new DataView(A,t,8),n=g.getInt32(0,!0);if(r.fileVersion=n,t+=4,n>=3&&(r.checksum=g.getUint32(4,!0),t+=4),g=new DataView(A,t,12),r.height=g.getUint32(0,!0),r.width=g.getUint32(4,!0),t+=8,n>=4?(r.numDims=g.getUint32(8,!0),t+=4):r.numDims=1,g=new DataView(A,t,40),r.numValidPixel=g.getUint32(0,!0),r.microBlockSize=g.getInt32(4,!0),r.blobSize=g.getInt32(8,!0),r.imageType=g.getInt32(12,!0),r.maxZError=g.getFloat64(16,!0),r.zMin=g.getFloat64(24,!0),r.zMax=g.getFloat64(32,!0),t+=40,e.headerInfo=r,e.ptr=t,n>=3&&(I=n>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(A,t-I,r.blobSize-14))!==r.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(A,e){var t=e.headerInfo,i=this.getDataTypeArray(t.imageType),r=t.numDims*this.getDataTypeSize(t.imageType),I=this.readSubArray(A,e.ptr,i,r),g=this.readSubArray(A,e.ptr+r,i,r);e.ptr+=2*r;var n,a=!0;for(n=0;n<t.numDims;n++)if(I[n]!==g[n]){a=!1;break}return t.minValues=I,t.maxValues=g,a},readSubArray:function(A,e,t,i){var r;if(t===Uint8Array)r=new Uint8Array(A,e,i);else{var I=new ArrayBuffer(i);new Uint8Array(I).set(new Uint8Array(A,e,i)),r=new t(I)}return r},readMask:function(A,e){var t,i,r=e.ptr,I=e.headerInfo,g=I.width*I.height,n=I.numValidPixel,a=new DataView(A,r,4),o={};if(o.numBytes=a.getUint32(0,!0),r+=4,(0===n||g===n)&&0!==o.numBytes)throw"invalid mask";if(0===n)t=new Uint8Array(Math.ceil(g/8)),o.bitset=t,i=new Uint8Array(g),e.pixels.resultMask=i,r+=o.numBytes;else if(o.numBytes>0){t=new Uint8Array(Math.ceil(g/8));var B=(a=new DataView(A,r,o.numBytes)).getInt16(0,!0),C=2,Q=0,E=0;do{if(B>0)for(;B--;)t[Q++]=a.getUint8(C++);else for(E=a.getUint8(C++),B=-B;B--;)t[Q++]=E;B=a.getInt16(C,!0),C+=2}while(C<o.numBytes);if(-32768!==B||Q<t.length)throw"Unexpected end of mask RLE encoding";i=new Uint8Array(g);var s=0,f=0;for(f=0;f<g;f++)7&f?(s=t[f>>3],s<<=7&f):s=t[f>>3],128&s&&(i[f]=1);e.pixels.resultMask=i,o.bitset=t,r+=o.numBytes}return e.ptr=r,e.mask=o,!0},readDataOneSweep:function(A,e,t,i){var r,I=e.ptr,g=e.headerInfo,n=g.numDims,a=g.width*g.height,o=g.imageType,B=g.numValidPixel*Q.getDataTypeSize(o)*n,C=e.pixels.resultMask;if(t===Uint8Array)r=new Uint8Array(A,I,B);else{var E=new ArrayBuffer(B);new Uint8Array(E).set(new Uint8Array(A,I,B)),r=new t(E)}if(r.length===a*n)e.pixels.resultPixels=i?Q.swapDimensionOrder(r,a,n,t,!0):r;else{e.pixels.resultPixels=new t(a*n);var s=0,f=0,c=0,h=0;if(n>1){if(i){for(f=0;f<a;f++)if(C[f])for(h=f,c=0;c<n;c++,h+=a)e.pixels.resultPixels[h]=r[s++]}else for(f=0;f<a;f++)if(C[f])for(h=f*n,c=0;c<n;c++)e.pixels.resultPixels[h+c]=r[s++]}else for(f=0;f<a;f++)C[f]&&(e.pixels.resultPixels[f]=r[s++])}return I+=B,e.ptr=I,!0},readHuffmanTree:function(A,e){var t=this.HUFFMAN_LUT_BITS_MAX,i=new DataView(A,e.ptr,16);if(e.ptr+=16,i.getInt32(0,!0)<2)throw"unsupported Huffman version";var r=i.getInt32(4,!0),I=i.getInt32(8,!0),g=i.getInt32(12,!0);if(I>=g)return!1;var n=new Uint32Array(g-I);Q.decodeBits(A,e,n);var a,o,B,C,s=[];for(a=I;a<g;a++)s[o=a-(a<r?0:r)]={first:n[a-I],second:null};var f=A.byteLength-e.ptr,c=Math.ceil(f/4),h=new ArrayBuffer(4*c);new Uint8Array(h).set(new Uint8Array(A,e.ptr,f));var l,u=new Uint32Array(h),w=0,d=0;for(l=u[0],a=I;a<g;a++)(C=s[o=a-(a<r?0:r)].first)>0&&(s[o].second=l<<w>>>32-C,32-w>=C?32===(w+=C)&&(w=0,l=u[++d]):(w+=C-32,l=u[++d],s[o].second|=l>>>32-w));var D=0,y=0,k=new E;for(a=0;a<s.length;a++)void 0!==s[a]&&(D=Math.max(D,s[a].first));y=D>=t?t:D;var p,m,G,F,S,v=[];for(a=I;a<g;a++)if((C=s[o=a-(a<r?0:r)].first)>0)if(p=[C,o],C<=y)for(m=s[o].second<<y-C,G=1<<y-C,B=0;B<G;B++)v[m|B]=p;else for(m=s[o].second,S=k,F=C-1;F>=0;F--)m>>>F&1?(S.right||(S.right=new E),S=S.right):(S.left||(S.left=new E),S=S.left),0!==F||S.val||(S.val=p[1]);return{decodeLut:v,numBitsLUTQick:y,numBitsLUT:D,tree:k,stuffedData:u,srcPtr:d,bitPos:w}},readHuffman:function(A,e,t,i){var r,I,g,n,a,o,B,C,E,s=e.headerInfo.numDims,f=e.headerInfo.height,c=e.headerInfo.width,h=c*f,l=this.readHuffmanTree(A,e),u=l.decodeLut,w=l.tree,d=l.stuffedData,D=l.srcPtr,y=l.bitPos,k=l.numBitsLUTQick,p=l.numBitsLUT,m=0===e.headerInfo.imageType?128:0,G=e.pixels.resultMask,F=0;y>0&&(D++,y=0);var S,v=d[D],R=1===e.encodeMode,U=new t(h*s),L=U;if(s<2||R){for(S=0;S<s;S++)if(s>1&&(L=new t(U.buffer,h*S,h),F=0),e.headerInfo.numValidPixel===c*f)for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(g+=B>0?F:o>0?L[C-c]:F,g&=255,L[C]=g,F=g):L[C]=g}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++)if(G[C]){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(B>0&&G[C-1]?g+=F:o>0&&G[C-c]?g+=L[C-c]:g+=F,g&=255,L[C]=g,F=g):L[C]=g}}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++)if(C=o*c+B,!G||G[C])for(S=0;S<s;S++,C+=h){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,L[C]=g}e.ptr=e.ptr+4*(D+1)+(y>0?4:0),e.pixels.resultPixels=U,s>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(U,h,s,t))},decodeBits:function(A,e,t,i,r){var I=e.headerInfo,Q=I.fileVersion,E=0,s=A.byteLength-e.ptr>=5?5:A.byteLength-e.ptr,f=new DataView(A,e.ptr,s),c=f.getUint8(0);E++;var h=c>>6,l=0===h?4:3-h,u=(32&c)>0,w=31&c,d=0;if(1===l)d=f.getUint8(E),E++;else if(2===l)d=f.getUint16(E,!0),E+=2;else{if(4!==l)throw"Invalid valid pixel count type";d=f.getUint32(E,!0),E+=4}var D,y,k,p,m,G,F,S,v,R=2*I.maxZError,U=I.numDims>1?I.maxValues[r]:I.zMax;if(u){for(e.counter.lut++,S=f.getUint8(E),E++,p=Math.ceil((S-1)*w/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),k=new Uint8Array(y),e.ptr+=E,k.set(new Uint8Array(A,e.ptr,p)),F=new Uint32Array(y),e.ptr+=p,v=0;S-1>>>v;)v++;p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,G=Q>=3?o(F,w,S-1,i,R,U):n(F,w,S-1,i,R,U),Q>=3?a(D,t,v,d,G):g(D,t,v,d,G)}else e.counter.bitstuffer++,v=w,e.ptr+=E,v>0&&(p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,Q>=3?null==i?C(D,t,v,d):a(D,t,v,d,!1,i,R,U):null==i?B(D,t,v,d):g(D,t,v,d,!1,i,R,U))},readTiles:function(A,e,t,i){var r=e.headerInfo,I=r.width,g=r.height,n=I*g,a=r.microBlockSize,o=r.imageType,B=Q.getDataTypeSize(o),C=Math.ceil(I/a),E=Math.ceil(g/a);e.pixels.numBlocksY=E,e.pixels.numBlocksX=C,e.pixels.ptr=0;var s,f,c,h,l,u,w,d,D,y,k=0,p=0,m=0,G=0,F=0,S=0,v=0,R=0,U=0,L=0,b=0,M=0,N=0,x=0,J=0,q=new t(a*a),Y=g%a||a,K=I%a||a,H=r.numDims,O=e.pixels.resultMask,P=e.pixels.resultPixels,T=r.fileVersion>=5?14:15,V=r.zMax;for(m=0;m<E;m++)for(F=m!==E-1?a:Y,G=0;G<C;G++)for(L=m*I*a+G*a,b=I-(S=G!==C-1?a:K),d=0;d<H;d++){if(H>1?(y=P,L=m*I*a+G*a,P=new t(e.pixels.resultPixels.buffer,n*d*B,n),V=r.maxValues[d]):y=null,v=A.byteLength-e.ptr,f={},J=0,R=(s=new DataView(A,e.ptr,Math.min(10,v))).getUint8(0),J++,D=r.fileVersion>=5?4&R:0,U=R>>6&255,(R>>2&T)!=(G*a>>3&T))throw"integrity issue";if(D&&0===d)throw"integrity issue";if((l=3&R)>3)throw e.ptr+=J,"Invalid block encoding ("+l+")";if(2!==l)if(0===l){if(D)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=J,M=(M=F*S*B)<(N=A.byteLength-e.ptr)?M:N,c=new ArrayBuffer(M%B==0?M:M+B-M%B),new Uint8Array(c).set(new Uint8Array(A,e.ptr,M)),h=new t(c),x=0,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=h[x++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=h[x++];L+=b}e.ptr+=x*B}else if(u=Q.getDataTypeUsed(D&&o<6?4:o,U),w=Q.getOnePixel(f,J,u,s),J+=Q.getDataTypeSize(u),3===l)if(e.ptr+=J,e.counter.constantoffset++,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=D?Math.min(V,y[L]+w):w),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=D?Math.min(V,y[L]+w):w,L++;L+=b}else if(e.ptr+=J,Q.decodeBits(A,e,q,w,d),J=0,D)if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]+y[L]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=q[J++]+y[L],L++;L+=b}else if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=q[J++];L+=b}else{if(D)if(O)for(k=0;k<F;k++)for(p=0;p<S;p++)O[L]&&(P[L]=y[L]),L++;else for(k=0;k<F;k++)for(p=0;p<S;p++)P[L]=y[L],L++;e.counter.constant++,e.ptr+=J}}H>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(e.pixels.resultPixels,n,H,t))},formatFileInfo:function(A){return{fileIdentifierString:A.headerInfo.fileIdentifierString,fileVersion:A.headerInfo.fileVersion,imageType:A.headerInfo.imageType,height:A.headerInfo.height,width:A.headerInfo.width,numValidPixel:A.headerInfo.numValidPixel,microBlockSize:A.headerInfo.microBlockSize,blobSize:A.headerInfo.blobSize,maxZError:A.headerInfo.maxZError,pixelType:Q.getPixelType(A.headerInfo.imageType),eofOffset:A.eofOffset,mask:A.mask?{numBytes:A.mask.numBytes}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,maxValue:A.headerInfo.zMax,minValue:A.headerInfo.zMin,noDataValue:A.noDataValue}}},constructConstantSurface:function(A,e){var t=A.headerInfo.zMax,i=A.headerInfo.zMin,r=A.headerInfo.maxValues,I=A.headerInfo.numDims,g=A.headerInfo.height*A.headerInfo.width,n=0,a=0,o=0,B=A.pixels.resultMask,C=A.pixels.resultPixels;if(B)if(I>1){if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)B[a]&&(C[o+a]=t);else for(a=0;a<g;a++)if(B[a])for(o=a*I,n=0;n<I;n++)C[o+I]=r[n]}else for(a=0;a<g;a++)B[a]&&(C[a]=t);else if(I>1&&i!==t)if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)C[o+a]=t;else for(a=0;a<g;a++)for(o=a*I,n=0;n<I;n++)C[o+n]=r[n];else for(a=0;a<g*I;a++)C[a]=t},getDataTypeArray:function(A){var e;switch(A){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:default:e=Float32Array;break;case 7:e=Float64Array}return e},getPixelType:function(A){var e;switch(A){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:default:e="F32";break;case 7:e="F64"}return e},isValidPixelValue:function(A,e){if(null==e)return!1;var t;switch(A){case 0:t=e>=-128&&e<=127;break;case 1:t=e>=0&&e<=255;break;case 2:t=e>=-32768&&e<=32767;break;case 3:t=e>=0&&e<=65536;break;case 4:t=e>=-2147483648&&e<=2147483647;break;case 5:t=e>=0&&e<=4294967296;break;case 6:t=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:t=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:t=!1}return t},getDataTypeSize:function(A){var e=0;switch(A){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=A}return e},getDataTypeUsed:function(A,e){var t=A;switch(A){case 2:case 4:t=A-e;break;case 3:case 5:t=A-2*e;break;case 6:t=0===e?A:1===e?2:1;break;case 7:t=0===e?A:A-2*e+1;break;default:t=A}return t},getOnePixel:function(A,e,t,i){var r=0;switch(t){case 0:r=i.getInt8(e);break;case 1:r=i.getUint8(e);break;case 2:r=i.getInt16(e,!0);break;case 3:r=i.getUint16(e,!0);break;case 4:r=i.getInt32(e,!0);break;case 5:r=i.getUInt32(e,!0);break;case 6:r=i.getFloat32(e,!0);break;case 7:r=i.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return r},swapDimensionOrder:function(A,e,t,i,r){var I=0,g=0,n=0,a=0,o=A;if(t>1)if(o=new i(e*t),r)for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[a]=A[g++];else for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[g++]=A[a];return o}},E=function(A,e,t){this.val=A,this.left=e,this.right=t},{decode:function(A,e){var t=(e=e||{}).noDataValue,i=0,r={};r.ptr=e.inputOffset||0,r.pixels={},Q.readHeaderInfo(A,r);var I=r.headerInfo,g=I.fileVersion,n=Q.getDataTypeArray(I.imageType);if(g>5)throw"unsupported lerc version 2."+g;Q.readMask(A,r),I.numValidPixel===I.width*I.height||r.pixels.resultMask||(r.pixels.resultMask=e.maskData);var a=I.width*I.height;r.pixels.resultPixels=new n(a*I.numDims),r.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var o,B=!e.returnPixelInterleavedDims;if(0!==I.numValidPixel)if(I.zMax===I.zMin)Q.constructConstantSurface(r,B);else if(g>=4&&Q.checkMinMaxRanges(A,r))Q.constructConstantSurface(r,B);else{var C=new DataView(A,r.ptr,2),E=C.getUint8(0);if(r.ptr++,E)Q.readDataOneSweep(A,r,n,B);else if(g>1&&I.imageType<=1&&Math.abs(I.maxZError-.5)<1e-5){var s=C.getUint8(1);if(r.ptr++,r.encodeMode=s,s>2||g<4&&s>1)throw"Invalid Huffman flag "+s;s?Q.readHuffman(A,r,n,B):Q.readTiles(A,r,n,B)}else Q.readTiles(A,r,n,B)}r.eofOffset=r.ptr,e.inputOffset?(o=r.headerInfo.blobSize+e.inputOffset-r.ptr,Math.abs(o)>=1&&(r.eofOffset=e.inputOffset+r.headerInfo.blobSize)):(o=r.headerInfo.blobSize-r.ptr,Math.abs(o)>=1&&(r.eofOffset=r.headerInfo.blobSize));var f={width:I.width,height:I.height,pixelData:r.pixels.resultPixels,minValue:I.zMin,maxValue:I.zMax,validPixelCount:I.numValidPixel,dimCount:I.numDims,dimStats:{minValues:I.minValues,maxValues:I.maxValues},maskData:r.pixels.resultMask};if(r.pixels.resultMask&&Q.isValidPixelValue(I.imageType,t)){var c=r.pixels.resultMask;for(i=0;i<a;i++)c[i]||(f.pixelData[i]=t);f.noDataValue=t}return r.noDataValue=t,e.returnFileInfo&&(f.fileInfo=Q.formatFileInfo(r)),f},getBandCount:function(A){for(var e=0,t=0,i={ptr:0,pixels:{}};t<A.byteLength-58;)Q.readHeaderInfo(A,i),t+=i.headerInfo.blobSize,e++,i.ptr=t;return e}}),l=(s=new ArrayBuffer(4),f=new Uint8Array(s),new Uint32Array(s)[0]=1,1===f[0]),u={decode:function(A,e){if(!l)throw"Big endian system is not supported.";var t,i,r=(e=e||{}).inputOffset||0,I=new Uint8Array(A,r,10),g=String.fromCharCode.apply(null,I);if("CntZImage"===g.trim())t=c,i=1;else{if("Lerc2"!==g.substring(0,5))throw"Unexpected file identifier string: "+g;t=h,i=2}for(var n,a,o,B,C,Q,E=0,s=A.byteLength-10,f=[],u={width:0,height:0,pixels:[],pixelType:e.pixelType,mask:null,statistics:[]},w=0;r<s;){var d=t.decode(A,{inputOffset:r,encodedMaskData:n,maskData:o,returnMask:0===E,returnEncodedMask:0===E,returnFileInfo:!0,returnPixelInterleavedDims:e.returnPixelInterleavedDims,pixelType:e.pixelType||null,noDataValue:e.noDataValue||null});r=d.fileInfo.eofOffset,o=d.maskData,0===E&&(n=d.encodedMaskData,u.width=d.width,u.height=d.height,u.dimCount=d.dimCount||1,u.pixelType=d.pixelType||d.fileInfo.pixelType,u.mask=o),i>1&&(o&&f.push(o),d.fileInfo.mask&&d.fileInfo.mask.numBytes>0&&w++),E++,u.pixels.push(d.pixelData),u.statistics.push({minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue,dimStats:d.dimStats})}if(i>1&&w>1){for(Q=u.width*u.height,u.bandMasks=f,(o=new Uint8Array(Q)).set(f[0]),B=1;B<f.length;B++)for(a=f[B],C=0;C<Q;C++)o[C]=o[C]&a[C];u.maskData=o}return u}};TA.exports?TA.exports=u:this.Lerc=u}();var ZA,jA,WA,zA=XA.exports,$A={env:{emscripten_notify_memory_growth:function(A){WA=new Uint8Array(jA.exports.memory.buffer)}}},Ae=function(){function A(){B(this,A)}return Q(A,[{key:"init",value:function(){return ZA||(ZA="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+ee).then((function(A){return A.arrayBuffer()})).then((function(A){return WebAssembly.instantiate(A,$A)})).then(this._init):WebAssembly.instantiate(Buffer.from(ee,"base64"),$A).then(this._init))}},{key:"_init",value:function(A){jA=A.instance,$A.env.emscripten_notify_memory_growth(0)}},{key:"decode",value:function(A){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!jA)throw new Error("ZSTDDecoder: Await .init() before decoding.");var t=A.byteLength,i=jA.exports.malloc(t);WA.set(A,i),e=e||Number(jA.exports.ZSTD_findDecompressedSize(i,t));var r=jA.exports.malloc(e),I=jA.exports.ZSTD_decompress(r,e,i,t),g=WA.slice(r,r+I);return jA.exports.free(i),jA.exports.free(r),g}}]),A}(),ee="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",te={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ie={};for(var re in te)te.hasOwnProperty(re)&&(ie[te[re]]=parseInt(re,10));ie.BitsPerSample,ie.ExtraSamples,ie.SampleFormat,ie.StripByteCounts,ie.StripOffsets,ie.StripRowCounts,ie.TileByteCounts,ie.TileOffsets,ie.SubIFDs;var Ie={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ge={};for(var ne in Ie)Ie.hasOwnProperty(ne)&&(ge[Ie[ne]]=parseInt(ne,10));var ae=1,oe=0,Be=1,Ce=2,Qe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},Ee={};for(var se in Qe)Qe.hasOwnProperty(se)&&(Ee[Qe[se]]=parseInt(se,10));function fe(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var ce=new Ae,he=function(A){s(t,w);var e=fe(t);function t(A){var i;return B(this,t),(i=e.call(this)).planarConfiguration=void 0!==A.PlanarConfiguration?A.PlanarConfiguration:1,i.samplesPerPixel=void 0!==A.SamplesPerPixel?A.SamplesPerPixel:1,i.addCompression=A.LercParameters[ae],i}return Q(t,[{key:"decodeBlock",value:function(A){switch(this.addCompression){case oe:break;case Be:A=YA(new Uint8Array(A)).buffer;break;case Ce:A=ce.decode(new Uint8Array(A)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return zA.decode(A,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),t}(),le=Object.freeze({__proto__:null,zstd:ce,default:he});function ue(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var we=function(A){s(I,w);var t,i=ue(I);function I(){var A;if(B(this,I),A=i.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return A}return Q(I,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return i=new Blob([t]),A.next=3,createImageBitmap(i);case 3:return I=A.sent,"undefined"!=typeof document?((g=document.createElement("canvas")).width=I.width,g.height=I.height):g=new OffscreenCanvas(I.width,I.height),(n=g.getContext("2d")).drawImage(I,0,0),A.abrupt("return",n.getImageData(0,0,I.width,I.height).data.buffer);case 8:case"end":return A.stop()}}),A)}))),function(A,e){return t.apply(this,arguments)})}]),I}(),de=Object.freeze({__proto__:null,default:we});';return new Worker$1(typeof Buffer<"u"?"data:application/javascript;base64,"+Buffer.from(ie,"binary").toString("base64"):URL.createObjectURL(new Blob([ie],{type:"application/javascript"})))}const decoder=Object.freeze(Object.defineProperty({__proto__:null,create},Symbol.toStringTag,{value:"Module"}));exports.CloverInitializer=CloverInitializer,exports.OlInitializer=OlInitializer,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})});
